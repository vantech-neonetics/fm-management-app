/*! For license information please see main.74e7b41b.js.LICENSE.txt */
(()=>{var e={62034:(e,t,i)=>{"use strict";i.d(t,{pk:()=>s,re:()=>r,FG:()=>n});const n={SUCCESS_TIMEOUT:1500,INFO_TIMEOUT:3e3,ERROR_TIMEOUT:5e3,WARNING_TIMEOUT:1e4,NOTICE_TIMEOUT:2e4},r=10,s=[{key:1,text:"OpenAI",value:1,color:"green"},{key:14,text:"Anthropic Claude",value:14,color:"black"},{key:3,text:"Azure OpenAI",value:3,color:"olive"},{key:11,text:"Google PaLM2",value:11,color:"orange"},{key:24,text:"Google Gemini",value:24,color:"orange"},{key:28,text:"Mistral AI",value:28,color:"orange"},{key:15,text:"\u767e\u5ea6\u6587\u5fc3\u5343\u5e06",value:15,color:"blue"},{key:17,text:"\u963f\u91cc\u901a\u4e49\u5343\u95ee",value:17,color:"orange"},{key:18,text:"\u8baf\u98de\u661f\u706b\u8ba4\u77e5",value:18,color:"blue"},{key:16,text:"\u667a\u8c31 ChatGLM",value:16,color:"violet"},{key:19,text:"360 \u667a\u8111",value:19,color:"blue"},{key:25,text:"Moonshot AI",value:25,color:"black"},{key:23,text:"\u817e\u8baf\u6df7\u5143",value:23,color:"teal"},{key:26,text:"\u767e\u5ddd\u5927\u6a21\u578b",value:26,color:"orange"},{key:27,text:"MiniMax",value:27,color:"red"},{key:29,text:"Groq",value:29,color:"orange"},{key:30,text:"Ollama",value:30,color:"black"},{key:31,text:"\u96f6\u4e00\u4e07\u7269",value:31,color:"green"},{key:8,text:"\u81ea\u5b9a\u4e49\u6e20\u9053",value:8,color:"pink"},{key:22,text:"\u77e5\u8bc6\u5e93\uff1aFastGPT",value:22,color:"blue"},{key:21,text:"\u77e5\u8bc6\u5e93\uff1aAI Proxy",value:21,color:"purple"},{key:20,text:"\u4ee3\u7406\uff1aOpenRouter",value:20,color:"black"},{key:2,text:"\u4ee3\u7406\uff1aAPI2D",value:2,color:"blue"},{key:5,text:"\u4ee3\u7406\uff1aOpenAI-SB",value:5,color:"brown"},{key:7,text:"\u4ee3\u7406\uff1aOhMyGPT",value:7,color:"purple"},{key:10,text:"\u4ee3\u7406\uff1aAI Proxy",value:10,color:"purple"},{key:4,text:"\u4ee3\u7406\uff1aCloseAI",value:4,color:"teal"},{key:6,text:"\u4ee3\u7406\uff1aOpenAI Max",value:6,color:"violet"},{key:9,text:"\u4ee3\u7406\uff1aAI.LS",value:9,color:"yellow"},{key:12,text:"\u4ee3\u7406\uff1aAPI2GPT",value:12,color:"blue"},{key:13,text:"\u4ee3\u7406\uff1aAIGC2D",value:13,color:"purple"}];for(let a=0;a<s.length;a++)s[a].label=s[a].text},68332:(e,t,i)=>{"use strict";i.d(t,{M:()=>o,u:()=>l});var n=i(65043);const r=(e,t)=>{switch(t.type){case"set":return{...e,status:t.payload};case"unset":return{...e,status:void 0};default:return e}},s={status:void 0};var a=i(70579);const o=n.createContext({state:s,dispatch:()=>null}),l=e=>{let{children:t}=e;const[i,l]=n.useReducer(r,s);return(0,a.jsx)(o.Provider,{value:[i,l],children:t})}},68169:(e,t,i)=>{"use strict";i.d(t,{nC:()=>H,C:()=>C,I9:()=>F,dq:()=>w,a8:()=>S,fx:()=>x,b6:()=>p,qc:()=>b,Fr:()=>k,jX:()=>_,UC:()=>D,Lx:()=>N,Qg:()=>P,cf:()=>I,An:()=>R,Te:()=>M,gA:()=>L,pi:()=>j,oM:()=>B});var n,r=i(58168);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));var s=function(e){return e};var a="beforeunload",o="popstate";function l(e){e.preventDefault(),e.returnValue=""}function c(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function h(){return Math.random().toString(36).substr(2,8)}function d(e){var t=e.pathname,i=void 0===t?"/":t,n=e.search,r=void 0===n?"":n,s=e.hash,a=void 0===s?"":s;return r&&"?"!==r&&(i+="?"===r.charAt(0)?r:"?"+r),a&&"#"!==a&&(i+="#"===a.charAt(0)?a:"#"+a),i}function u(e){var t={};if(e){var i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}const p=function(e){void 0===e&&(e={});var t=e.window,i=void 0===t?document.defaultView:t,p=i.history;function g(){var e=i.location,t=e.pathname,n=e.search,r=e.hash,a=p.state||{};return[a.idx,s({pathname:t,search:n,hash:r,state:a.usr||null,key:a.key||"default"})]}var f=null;i.addEventListener(o,(function(){if(f)x.call(f),f=null;else{var e=n.Pop,t=g(),i=t[0],r=t[1];if(x.length){if(null!=i){var s=y-i;s&&(f={action:e,location:r,retry:function(){E(-1*s)}},E(s))}}else A(e)}}));var m=n.Pop,v=g(),y=v[0],b=v[1],_=c(),x=c();function S(e){return"string"===typeof e?e:d(e)}function w(e,t){return void 0===t&&(t=null),s((0,r.A)({pathname:b.pathname,hash:"",search:""},"string"===typeof e?u(e):e,{state:t,key:h()}))}function C(e,t){return[{usr:e.state,key:e.key,idx:t},S(e)]}function k(e,t,i){return!x.length||(x.call({action:e,location:t,retry:i}),!1)}function A(e){m=e;var t=g();y=t[0],b=t[1],_.call({action:m,location:b})}function E(e){p.go(e)}return null==y&&(y=0,p.replaceState((0,r.A)({},p.state,{idx:y}),"")),{get action(){return m},get location(){return b},createHref:S,push:function e(t,r){var s=n.Push,a=w(t,r);if(k(s,a,(function(){e(t,r)}))){var o=C(a,y+1),l=o[0],c=o[1];try{p.pushState(l,"",c)}catch(h){i.location.assign(c)}A(s)}},replace:function e(t,i){var r=n.Replace,s=w(t,i);if(k(r,s,(function(){e(t,i)}))){var a=C(s,y),o=a[0],l=a[1];p.replaceState(o,"",l),A(r)}},go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(e){return _.push(e)},block:function(e){var t=x.push(e);return 1===x.length&&i.addEventListener(a,l),function(){t(),x.length||i.removeEventListener(a,l)}}}}();var g=i(664),f=i(62034),m=(i(65043),i(91036)),v=i(70579);const y=e=>{let{htmlContent:t}=e;return(0,v.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})};function b(){let e=localStorage.getItem("user");return!!e&&(e=JSON.parse(e),e.role>=10)}function _(){let e=localStorage.getItem("user");return!!e&&(e=JSON.parse(e),e.role>=100)}function x(){let e=localStorage.getItem("system_name");return e||"One API"}function S(){let e=localStorage.getItem("logo");return e||"/logo.png"}function w(){return localStorage.getItem("footer_html")}async function C(e){let t=!0;try{await navigator.clipboard.writeText(e)}catch(i){t=!1,console.error(i)}return t}function k(){return window.innerWidth<=600}let A={autoClose:f.FG.ERROR_TIMEOUT},E=(f.FG.WARNING_TIMEOUT,{autoClose:f.FG.SUCCESS_TIMEOUT}),T={autoClose:f.FG.INFO_TIMEOUT},O={autoClose:!1};function P(e){if(console.error(e),e.message){if("AxiosError"===e.name){switch(e.response.status){case 401:window.location.href="/login?expired=true";break;case 429:g.y8.error("\u9519\u8bef\uff1a\u8bf7\u6c42\u6b21\u6570\u8fc7\u591a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01");break;case 500:g.y8.error("\u9519\u8bef\uff1a\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01");break;case 405:g.y8.info("\u672c\u7ad9\u4ec5\u4f5c\u6f14\u793a\u4e4b\u7528\uff0c\u65e0\u670d\u52a1\u7aef\uff01");break;default:g.y8.error("\u9519\u8bef\uff1a"+e.message)}return}g.y8.error("\u9519\u8bef\uff1a"+e.message)}else g.y8.error("\u9519\u8bef\uff1a"+e)}function M(e){g.y8.success(e)}function I(e){g.y8.info(e)}function R(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,m.oR)((0,v.jsx)(y,{htmlContent:e}),O):g.y8.info(e)}function D(e){return e.endsWith("/")?e.slice(0,-1):e}function L(e){let t=new Date(1e3*e),i=t.getFullYear().toString(),n=(t.getMonth()+1).toString(),r=t.getDate().toString(),s=t.getHours().toString(),a=t.getMinutes().toString(),o=t.getSeconds().toString();return 1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),1===s.length&&(s="0"+s),1===a.length&&(a="0"+a),1===o.length&&(o="0"+o),i+"-"+n+"-"+r+" "+s+":"+a+":"+o}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hour",i=new Date(1e3*e),n=(i.getMonth()+1).toString(),r=i.getDate().toString(),s=i.getHours().toString();1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),1===s.length&&(s="0"+s);let a=n+"-"+r;if("hour"===t)a+=" "+s+":00";else if("week"===t){let t=new Date(1e3*e+5184e5),i=(t.getMonth()+1).toString(),n=t.getDate().toString();1===i.length&&(i="0"+i),1===n.length&&(n="0"+n),a+=" - "+i+"-"+n}return a}function F(e,t){let i=new Blob([e],{type:"text/plain;charset=utf-8"}),n=URL.createObjectURL(i),r=document.createElement("a");r.href=n,r.download=t,r.click()}k()&&(A.position="top-center",E.position="top-center",T.position="top-center",O.position="top-center");const B=e=>{try{JSON.parse(e)}catch(t){return!1}return!0};function N(e){return!localStorage.getItem("prompt-".concat(e))}var z=i(40854);const H=i.n(z)().create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:""}.REACT_APP_SERVER?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:""}.REACT_APP_SERVER:""});H.interceptors.response.use((e=>e),(e=>{P(e)}))},63322:(e,t,i)=>{"use strict";i.d(t,{_:()=>n});const n="semi"},24864:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(75713),r=i.n(n),s=i(94411);class a{static get cssClasses(){return{}}static get strings(){return{}}static get numbers(){return{}}static get defaultAdapter(){return{getProp:r(),getProps:r(),getState:r(),getStates:r(),setState:r(),getContext:r(),getContexts:r(),getCache:r(),setCache:r(),getCaches:r(),stopPropagation:r(),persistEvent:r()}}constructor(e){this._adapter=Object.assign(Object.assign({},a.defaultAdapter),e)}getProp(e){return this._adapter.getProp(e)}getProps(){return this._adapter.getProps()}getState(e){return this._adapter.getState(e)}getStates(){return this._adapter.getStates()}setState(e,t){return this._adapter.setState(Object.assign({},e),t)}getContext(e){return this._adapter.getContext(e)}getContexts(){return this._adapter.getContexts()}getCaches(){return this._adapter.getCaches()}getCache(e){return this._adapter.getCache(e)}setCache(e,t){return e&&this._adapter.setCache(e,t)}stopPropagation(e){this._adapter.stopPropagation(e)}_isControlledComponent(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value")in this.getProps()}_isInProps(e){return e in this.getProps()}init(e){}destroy(){}log(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];(0,s.A)(e,...i)}_persistEvent(e){this._adapter.persistEvent(e)}}const o=a},63972:(e,t,i)=>{"use strict";i.d(t,{P$:()=>a,Y7:()=>s,nL:()=>o});var n=i(76882),r=i(63322);const s={PREFIX:"".concat(r._,"-popover"),ARROW:"".concat(r._,"-popover-icon-arrow")},a={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_ARROW_STYLE:{borderOpacity:"1",backgroundColor:"var(--semi-color-bg-3)",borderColor:"var(--semi-color-border)"}},o={ARROW_BOUNDING:Object.assign(Object.assign({},n.nL.ARROW_BOUNDING),{offsetY:6,offsetX:0,height:8}),SPACING:4,SPACING_WITH_ARROW:10,DEFAULT_Z_INDEX:1030}},76882:(e,t,i)=>{"use strict";i.d(t,{P$:()=>s,Y7:()=>r,nL:()=>a});var n=i(63322);const r={PREFIX:"".concat(n._,"-tooltip")},s={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver","leftBottomOver","rightBottomOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],STATUS_DISABLED:"disabled",STATUS_LOADING:"loading"},a={ARROW_BOUNDING:{offsetX:0,offsetY:2,width:24,height:7},DEFAULT_Z_INDEX:1060,MOUSE_ENTER_DELAY:50,MOUSE_LEAVE_DELAY:50,SPACING:8,MARGIN:0}},75196:(e,t,i)=>{"use strict";i.d(t,{P:()=>s,Y:()=>r});var n=i(63322);const r={PREFIX:"".concat(n._,"-typography")},s={WEIGHT:["light","regular","medium","semibold","bold","default"],TYPE:["primary","secondary","danger","warning","success","tertiary","quaternary"],SIZE:["normal","small","inherit"],SPACING:["normal","extended"],HEADING:[1,2,3,4,5,6],RULE:["text","numbers","bytes-decimal","bytes-binary","percentages","exponential"],TRUNCATE:["ceil","floor","round"]}},28813:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(49825);class r{constructor(){this._eventMap=new Map}on(e,t){return e&&"function"===typeof t&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(t)),this}once(e,t){var i=this;if(e&&"function"===typeof t){const n=function(){t(...arguments),i.off(e,n)};this.on(e,n)}}off(e,t){if(e)if("function"===typeof t){const i=this._eventMap.get(e);if(Array.isArray(i)&&i.length){let e=-1;for(;(e=i.findIndex((e=>e===t)))>-1;)i.splice(e,1)}}else(0,n.A)(t)&&this._eventMap.delete(e);return this}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return!!this._eventMap.has(e)&&(this._eventMap.get(e).forEach((e=>e(...i))),!0)}}},76085:(e,t,i)=>{"use strict";i.d(t,{OQ:()=>g,P2:()=>a,_z:()=>u,jK:()=>s,jV:()=>l,l5:()=>o,ne:()=>p,r$:()=>d,xN:()=>c,xy:()=>h});var n=i(33097),r=i.n(n);function s(e){e.stopPropagation(),e.preventDefault()}function a(e){return 1===e.length&&e.match(/\S/)}function o(e,t){for(let i=0;i<e.length;i++)e[i]===t?(e[i].tabIndex=0,e[i].focus()):e[i].tabIndex=-1}function l(e){e.length>0&&o(e,e[0])}function c(e){e.length>0&&o(e,e[e.length-1])}function h(e,t){let i,n;e.length>0&&(t===e[0]?i=e[e.length-1]:(n=e.indexOf(t),i=e[n-1]),o(e,i))}function d(e,t){let i,n;e.length>0&&(t===e[e.length-1]?i=e[0]:(n=e.indexOf(t),i=e[n+1]),o(e,i))}function u(e,t,i,n){let r,s;return!e||!i||!n||n.length>1?-1:(n=n.toLowerCase(),r=e.indexOf(t)+1,r>=e.length&&(r=0),s=i.indexOf(n,r),-1===s&&(s=i.indexOf(n,0)),s>=0?s:-1)}function p(e,t){if(!e)return null;for(;e.parentElement&&r()(e.parentElement,"attributes.role.value","")!==t;)e=e.parentElement;return e.parentElement}function g(e,t){for(let i=0;i<e.length;i++){const n=e[i].attributes["data-popupid"];if(n&&n.value===t)return e[i]}return null}},41885:(e,t,i)=>{"use strict";function n(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const r of i)e.appendChild(r);return e}function r(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];if(e.children&&e.children.length){const t=e.children[0];for(const n of i)e.insertBefore(n,t)}else n(e,...i);return e}function s(e){if(e&&"object"===typeof e){if("function"===typeof e.toJSON)return e.toJSON();return["left","top","right","bottom","width","height"].reduce(((t,i)=>(t[i]=e[i],t)),{})}}i.d(t,{Ad:()=>s,BC:()=>n,Hs:()=>r})},12965:(e,t,i)=>{"use strict";function n(){}i.d(t,{l:()=>n})},73090:(e,t,i)=>{"use strict";function n(e){return Object.keys(e).reduce(((t,i)=>("data-"===i.substr(0,5)&&(t[i]=e[i]),t)),{})}i.d(t,{A:()=>n})},72125:(e,t,i)=>{"use strict";function n(e){try{return e instanceof HTMLElement}catch(t){return"object"===typeof e&&1===e.nodeType&&"object"===typeof e.style&&"object"===typeof e.ownerDocument}}i.d(t,{A:()=>n})},9640:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(33097),r=i.n(n),s=i(36531);const a=function(e){return r()(e,"key")===s.jD}},49825:(e,t,i)=>{"use strict";function n(e){return null===e||void 0===e}i.d(t,{A:()=>n})},36531:(e,t,i)=>{"use strict";i.d(t,{Ay:()=>r,jD:()=>n});const n="Enter",r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229}},94411:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(33097),r=i.n(n);const s=function(e){if("development"===r()(process,"env.NODE_ENV")){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];console.log(e,...i)}}},32050:(e,t,i)=>{"use strict";function n(e){return"".concat(e,"-").concat((new Date).getTime(),"-").concat(Math.random())}function r(){var e,t;try{return null!==(t=null===(e=null===crypto||void 0===crypto?void 0:crypto.randomUUID)||void 0===e?void 0:e.call(crypto))&&void 0!==t?t:String(-99990013e3).replace(/[018]/g,(e=>(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)))}catch(i){return n("semi")}}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{prefix:t="",length:i=7}=e,n="0123456789abcdefghijklmnopqrstuvwxyz";let r="";for(let s=0;s<i;s++){const e=Math.floor(36*Math.random());r+=n.charAt(e)}return t?"".concat(t,"-").concat(r):r}i.d(t,{Ae:()=>s,Ay:()=>n,i7:()=>r})},50557:(e,t,i)=>{"use strict";function n(e,t){e&&console.warn("Warning: ".concat(t))}i.d(t,{A:()=>n})},96041:(e,t,i)=>{"use strict";i.d(t,{T:()=>c,A:()=>h});var n=i(65043);const r="semi";var s=i(98139),a=i.n(s),o=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const l=n.forwardRef(((e,t)=>{const{svg:i,spin:s=!1,rotate:l,style:c,className:h,prefixCls:d=r,type:u,size:p="default"}=e,g=o(e,["svg","spin","rotate","style","className","prefixCls","type","size"]),f=a()("".concat(d,"-icon"),{["".concat(d,"-icon-extra-small")]:"extra-small"===p,["".concat(d,"-icon-small")]:"small"===p,["".concat(d,"-icon-default")]:"default"===p,["".concat(d,"-icon-large")]:"large"===p,["".concat(d,"-icon-extra-large")]:"extra-large"===p,["".concat(d,"-icon-spinning")]:!0===s,["".concat(d,"-icon-").concat(u)]:Boolean(u)},h),m={};return Number.isSafeInteger(l)&&(m.transform="rotate(".concat(l,"deg)")),Object.assign(m,c),n.createElement("span",Object.assign({role:"img",ref:t,"aria-label":u,className:f,style:m},g),i)}));l.elementType="Icon";const c=(e,t)=>{const i=n.forwardRef(((i,r)=>n.createElement(l,Object.assign({svg:n.createElement(e),type:t,ref:r},i))));return i.elementType="Icon",i},h=l},9670:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(65043);const r=(0,i(96041).T)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{d:"M2 5V19C2 20.6569 3.34315 22 5 22H12.101C11.5151 21.4259 11.0297 20.7496 10.6736 20H6C4.89543 20 4 19.1046 4 18V8C4 7.44772 4.44772 7 5 7H19C19.5523 7 20 7.44772 20 8V10.6736C20.7496 11.0297 21.4259 11.5151 22 12.101V5C22 3.34315 20.6569 2 19 2H5C3.34315 2 2 3.34315 2 5Z",fill:"currentColor"}),n.createElement("path",{d:"M16 10H17C16.4614 10 15.9369 10.0608 15.4332 10.176C15.5943 10.065 15.7896 10 16 10Z",fill:"currentColor"}),n.createElement("path",{d:"M13.4981 10.9376C13.4659 10.4144 13.0313 10 12.5 10H11.5C10.9477 10 10.5 10.4477 10.5 11V12C10.5 12.4742 10.83 12.8712 11.2729 12.9741C11.857 12.1446 12.6168 11.4478 13.4981 10.9376Z",fill:"currentColor"}),n.createElement("path",{d:"M7 10C6.44772 10 6 10.4477 6 11V12C6 12.5523 6.44772 13 7 13H8C8.55228 13 9 12.5523 9 12V11C9 10.4477 8.55228 10 8 10H7Z",fill:"currentColor"}),n.createElement("path",{d:"M6 16C6 15.4477 6.44772 15 7 15H8C8.55228 15 9 15.4477 9 16V17C9 17.5523 8.55228 18 8 18H7C6.44772 18 6 17.5523 6 17V16Z",fill:"currentColor"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 17C22 19.7614 19.7614 22 17 22C14.2386 22 12 19.7614 12 17C12 14.2386 14.2386 12 17 12C19.7614 12 22 14.2386 22 17ZM18 15C18 14.4477 17.5523 14 17 14C16.4477 14 16 14.4477 16 15V17C16 17.2652 16.1054 17.5196 16.2929 17.7071L17.7929 19.2071C18.1834 19.5976 18.8166 19.5976 19.2071 19.2071C19.5976 18.8166 19.5976 18.1834 19.2071 17.7929L18 16.5858V15Z",fill:"currentColor"}))}),"calendar_clock")},23463:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(65043);const r=(0,i(96041).T)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM11.8281 14.6094C10.9688 14.6094 10.5391 14.0723 10.5391 13.3691C10.5391 12.3242 11.0566 11.6504 12.2676 10.7324C12.2894 10.7158 12.3111 10.6993 12.3326 10.6829C13.1573 10.0555 13.7324 9.61807 13.7324 8.82812C13.7324 7.93945 12.9023 7.42188 11.9746 7.42188C11.2129 7.42188 10.627 7.70508 10.168 8.30078C9.83594 8.64258 9.57227 8.82812 9.12305 8.82812C8.38086 8.82812 8 8.31055 8 7.71484C8 7.10938 8.3418 6.49414 8.87891 6.02539C9.60156 5.40039 10.7539 5 12.2773 5C14.9922 5 16.8965 6.33789 16.8965 8.64258C16.8965 10.3223 15.8906 11.1328 14.709 11.9531C13.9082 12.5391 13.5273 12.8809 13.2246 13.5742L13.2238 13.5756C12.8922 14.1609 12.638 14.6094 11.8281 14.6094ZM11.8086 18.7695C10.8711 18.7695 10.0996 18.1641 10.0996 17.2266C10.0996 16.2891 10.8711 15.6836 11.8086 15.6836C12.7461 15.6836 13.5078 16.2891 13.5078 17.2266C13.5078 18.1641 12.7461 18.7695 11.8086 18.7695Z",fill:"currentColor"}))}),"help_circle")},95225:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(65043);const r=(0,i(96041).T)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3516 4.2652C22.0336 4.73552 22.2052 5.66964 21.7348 6.35162L11.7348 20.8516C11.4765 21.2262 11.0622 21.4632 10.6084 21.4961C10.1546 21.529 9.71041 21.3541 9.40082 21.0207L2.90082 14.0207C2.33711 13.4136 2.37226 12.4645 2.97933 11.9008C3.5864 11.3371 4.53549 11.3723 5.0992 11.9793L10.3268 17.6091L19.2652 4.64842C19.7355 3.96644 20.6696 3.79487 21.3516 4.2652Z",fill:"currentColor"}))}),"tick")},73304:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(65043);const r=(0,i(96041).T)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{d:"M20.5598 9.65618L12.7546 18.6322C12.3559 19.0906 11.644 19.0906 11.2453 18.6322L3.4401 9.65618C2.8773 9.00895 3.33701 8 4.19471 8L19.8052 8C20.6629 8 21.1226 9.00895 20.5598 9.65618Z",fill:"currentColor"}))}),"tree_triangle_down")},54089:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(65043),r=i(94411),s=i(73090);const{hasOwnProperty:a}=Object.prototype;class o extends n.Component{constructor(e){super(e),this.isControlled=e=>Boolean(e&&this.props&&"object"===typeof this.props&&a.call(this.props,e)),this.cache={},this.foundation=null}componentDidMount(){this.foundation&&"function"===typeof this.foundation.init&&this.foundation.init()}componentWillUnmount(){this.foundation&&"function"===typeof this.foundation.destroy&&this.foundation.destroy(),this.cache={}}get adapter(){return{getContext:e=>{if(this.context&&e)return this.context[e]},getContexts:()=>this.context,getProp:e=>this.props[e],getProps:()=>this.props,getState:e=>this.state[e],getStates:()=>this.state,setState:(e,t)=>this.setState(Object.assign({},e),t),getCache:e=>e&&this.cache[e],getCaches:()=>this.cache,setCache:(e,t)=>e&&(this.cache[e]=t),stopPropagation:e=>{try{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation()}catch(t){}},persistEvent:e=>{e&&e.persist&&"function"===typeof e.persist&&e.persist()}}}log(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return(0,r.A)(e,...i)}getDataAttr(e){return(0,s.A)(e)}}o.propTypes={},o.defaultProps={}},42459:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(19853),r=i.n(n),s=i(65043);class a extends s.Component{constructor(e){super(e),this.handleAnimationStart=()=>{var e,t;null===(t=(e=this.props).onAnimationStart)||void 0===t||t.call(e)},this.handleAnimationEnd=()=>{this.setState({currentClassName:this.props.endClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!1},(()=>{var e,t;null===(t=(e=this.props).onAnimationEnd)||void 0===t||t.call(e,!1)}))},this.state={currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0}}componentDidMount(){var e,t,i,n;null===(t=(e=this.props).onAnimationStart)||void 0===t||t.call(e),this.props.motion||(null===(n=(i=this.props).onAnimationEnd)||void 0===n||n.call(i,!1),this.setState({isAnimating:!1}))}componentDidUpdate(e,t,i){const n=Object.keys(this.props).filter((t=>!r()(this.props[t],e[t])));n.includes("animationState"),(n.includes("startClassName")||n.includes("replayKey")||n.includes("motion"))&&this.setState({currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0},(()=>{var e,t,i,n;null===(t=(e=this.props).onAnimationStart)||void 0===t||t.call(e),this.props.motion||(null===(n=(i=this.props).onAnimationEnd)||void 0===n||n.call(i,this.state.isAnimating),this.setState({isAnimating:!1}))}))}render(){var e;return this.props.motion?this.props.children({animationClassName:null!==(e=this.state.currentClassName)&&void 0!==e?e:"",animationStyle:this.state.extraStyle,animationEventsNeedBind:{onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},isAnimating:this.state.isAnimating}):this.props.children({animationClassName:"",animationStyle:{},animationEventsNeedBind:{},isAnimating:this.state.isAnimating})}}a.defaultProps={motion:!0,replayKey:""};const o=a},61902:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var n=i(65043),r=i(97950),s=i(63322),a=i(65173),o=i.n(a),l=i(98139),c=i.n(l),h=i(6711);const d=()=>document.body;class u extends n.PureComponent{constructor(e,t){var i;super(e),i=this,this.initContainer=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;try{let t;if(!i.el||!(null===(n=i.state)||void 0===n?void 0:n.container)||!Array.from(i.state.container.childNodes).includes(i.el)){i.el=document.createElement("div");const n=(i.props.getPopupContainer||e.getPopupContainer||d)();return n.appendChild(i.el),i.addStyle(i.props.style),i.addClass(i.props.prefixCls,e,i.props.className),t=n,t}}catch(s){if(!t)throw s}return null===(r=i.state)||void 0===r?void 0:r.container},this.addStyle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i.el)for(const t of Object.keys(e))i.el.style[t]=e[t]},this.addClass=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.context;const{direction:n}=t;for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];const o=c()(e,...s,{["".concat(e,"-rtl")]:"rtl"===n});i.el&&(i.el.className=o)},this.state={container:this.initContainer(t,!0)}}componentDidMount(){const e=this.initContainer(this.context);e!==this.state.container&&this.setState({container:e})}componentDidUpdate(e){const{didUpdate:t}=this.props;t&&t(e)}componentWillUnmount(){const{container:e}=this.state;e&&e.removeChild(this.el)}render(){const{state:e,props:t}=this;return e.container?(0,r.createPortal)(t.children,this.el):null}}u.contextType=h.A,u.defaultProps={prefixCls:"".concat(s._,"-portal")},u.propTypes={children:o().node,prefixCls:o().string,getPopupContainer:o().func,className:o().string,didUpdate:o().func};const p=u},11692:(e,t,i)=>{"use strict";i.d(t,{mg:()=>y,bq:()=>S,bQ:()=>A,iq:()=>w,TA:()=>b,XJ:()=>k,uR:()=>x,ot:()=>_,Ct:()=>C,dG:()=>v});var n=i(33097),r=i.n(n),s=i(69613),a=i.n(s),o=i(91054),l=i.n(o),c=i(65043),h=i(50557),d=i(90620),u=i.n(d);const p=e=>{let{autoEscape:t=!0,caseSensitive:i=!1,searchWords:n,sourceString:r}=e;u()(n)&&(n=[n]);const s=(e=>{let{autoEscape:t,caseSensitive:i,searchWords:n,sourceString:r}=e;return n.filter((e=>e)).reduce(((e,n)=>{t&&(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));const s=new RegExp(n,i?"g":"gi");let a;for(;a=s.exec(r);){const t=a.index,i=s.lastIndex;i>t&&e.push({highlight:!1,start:t,end:i}),a.index===s.lastIndex&&s.lastIndex++}return e}),[])})({autoEscape:t,caseSensitive:i,searchWords:n,sourceString:r}),a=(e=>{let{chunks:t}=e;return t=t.sort(((e,t)=>e.start-t.start)).reduce(((e,t)=>{if(0===e.length)return[t];{const i=e.pop();if(t.start<=i.end){const n=Math.max(i.end,t.end);e.push({highlight:!1,start:i.start,end:n})}else e.push(i,t);return e}}),[]),t})({chunks:s}),o=(e=>{let{chunksToHighlight:t,totalLength:i}=e;const n=[],r=(e,t,i)=>{t-e>0&&n.push({start:e,end:t,highlight:i})};if(0===t.length)r(0,i,!1);else{let e=0;t.forEach((t=>{r(e,t.start,!1),r(t.start,t.end,!0),e=t.end})),r(e,i,!1)}return n})({chunksToHighlight:a,totalLength:r?r.length:0});return o};var g=i(72125);const f=new class{constructor(){this.config={}}};var m=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};function v(e,t){e&&"function"===typeof e.stopPropagation&&e.stopPropagation(),!t&&e.nativeEvent&&"function"===typeof e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}function y(e,t){return l()(e,(e=>{if("function"===typeof t)return t(e);if("function"===typeof e||c.isValidElement(e))return e;if("[object Error]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e)&&0===e.length){const t=Object.keys(e);if(t.length){const n=[];t.forEach((t=>{a()(n,t,e[t])}));try{(0,h.A)("production"!==r()(process,"env.NODE_ENV"),"[Semi] You may use an out-of-bounds array. In some cases, your program may not behave as expected.\n                    The maximum length of an array is 4294967295.\n                    Please check whether the array subscript in your data exceeds the maximum value of the JS array subscript")}catch(i){}return n}}else;}))}const b=e=>{let{sourceString:t="",searchWords:i=[],option:n={autoEscape:!0,caseSensitive:!1}}=e;const r=p(Object.assign({sourceString:t,searchWords:i},n)),s=n.highlightTag||"mark",a=n.highlightClassName||"",o=n.highlightStyle||{};return r.map(((e,i)=>{const{end:n,start:r,highlight:l}=e,h=t.substr(r,n-r);return l?c.createElement(s,{style:o,className:a,key:h+i},h):h}))},_=(e,t)=>{let{match:i,unmatch:n,callInInit:r=!0}=t;if("undefined"!==typeof window){const s=window.matchMedia(e);function a(e){e.matches?i&&i(e):n&&n(e)}return r&&a(s),Object.prototype.hasOwnProperty.call(s,"addEventListener")?(s.addEventListener("change",a),()=>s.removeEventListener("change",a)):(s.addListener(a),()=>s.removeListener(a))}return()=>{}},x=e=>c.isValidElement(e)&&"Icon"===r()(e.type,"elementType");function S(){return document?document.activeElement:null}function w(e){if(!(0,g.A)(e))return[];const t=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(e.querySelectorAll(t))}function C(e,t){return m(this,void 0,void 0,(function*(){return 0===t?void(yield e()):void(yield new Promise((i=>{setTimeout((()=>m(this,void 0,void 0,(function*(){yield C(e,t-1),i()}))),0)})))}))}function k(){return globalThis&&"[object Window]"===Object.prototype.toString.call(globalThis)?window.innerWidth-document.documentElement.clientWidth:0}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=()=>{var t,i;return(null===(i=null===(t=null===f||void 0===f?void 0:f.config)||void 0===t?void 0:t.overrideDefaultProps)||void 0===i?void 0:i[e])||{}};return new Proxy(Object.assign({},t),{get(e,t,n){const r=i();return t in r?r[t]:Reflect.get(e,t,n)},set:(e,t,i,n)=>Reflect.set(e,t,i,n),ownKeys(){const e=i();return Array.from(new Set([...Reflect.ownKeys(t),...Object.keys(e)]))},getOwnPropertyDescriptor(e,t){const n=i();return t in n?Reflect.getOwnPropertyDescriptor(n,t):Reflect.getOwnPropertyDescriptor(e,t)}})}},6711:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=i(65043).createContext({})},664:(e,t,i)=>{"use strict";i.d(t,{j9:()=>Ce,eu:()=>Ne,lZ:()=>_t,$n:()=>St,Zp:()=>ri,Sc:()=>Oi,fv:()=>qh,lr:()=>uc,KH:()=>Oc,cG:()=>Rc,ms:()=>Bh,lV:()=>Tk,In:()=>ud,_V:()=>aA,kC:()=>hA,pd:()=>ce,YI:()=>Vd,Layout:()=>dd,aF:()=>uh,so:()=>wu,iS:()=>Eu,AM:()=>U.A,ke:()=>Nu,fI:()=>Gh,l6:()=>ig,DD:()=>fg,$x:()=>ei,tK:()=>V,O1:()=>vg,dO:()=>Sg,mF:()=>Pv,XI:()=>pv,tU:()=>Dv,vw:()=>ep,fs:()=>Cd,y8:()=>qv,m_:()=>vh.A,o5:()=>ut});var n=i(75713),r=i.n(n),s=i(19853),a=i.n(s),o=i(65043),l=i(65173),c=i.n(l),h=i(98139),d=i.n(h),u=i(76882),p=i(63322);const g=["default","error","warning","success"],f={PREFIX:"".concat(p._,"-autocomplete"),PREFIX_OPTION:"".concat(p._,"-autoComplete-option"),PREFIX_GROUP:"".concat(p._,"-autoComplete-group")},m={SIZE:["small","large","default"],POSITION:u.P$.POSITION_SET,OPTIONS:["children","value"],STATUS:g};var v=i(46686),y=i.n(v),b=i(141),_=i.n(b),x=i(79160),S=i.n(x),w=i(90620),C=i.n(w),k=i(24864),A=i(50557),E=i(36531);class T extends k.A{constructor(e){super(Object.assign({},e)),this.isPanelOpen=!1}init(){this._setDropdownWidth();const{defaultOpen:e,data:t,defaultValue:i,value:n}=this.getProps();if(t&&t.length){const e=this._generateList(t);this._adapter.updateOptionList(e)}let r;e&&this.openDropdown(),"undefined"!==typeof i&&(r=i),"undefined"!==typeof n&&(r=n),"undefined"!==typeof r&&this.handleValueChange(r)}destroy(){this._adapter.unregisterClickOutsideHandler()}_setDropdownWidth(){const{style:e,dropdownMatchSelectWidth:t}=this.getProps();let i;t&&(i=e&&S()(e.width)||e&&C()(e.width)&&!e.width.includes("%")?e.width:this._adapter.getTriggerWidth(),this._adapter.setOptionWrapperWidth(i))}handleInputClick(e){const{options:t}=this.getStates(),{disabled:i}=this.getProps();i||(this.isPanelOpen?this.closeDropdown():this.openDropdown())}openDropdown(){this.isPanelOpen=!0,this._adapter.toggleListVisible(!0),this._setDropdownWidth(),this._adapter.registerClickOutsideHandler((e=>this.closeDropdown(e))),this._adapter.notifyDropdownVisibleChange(!0),this._modifyFocusIndexOnPanelOpen()}closeDropdown(e){this.isPanelOpen=!1,this._adapter.toggleListVisible(!1),this._adapter.unregisterClickOutsideHandler(),this._adapter.notifyDropdownVisibleChange(!1)}_generateList(e){const{renderItem:t}=this.getProps(),i=[];return e&&e.length&&e.forEach(((e,n)=>{const r=String((new Date).getTime())+n;let s={};C()(e)||S()(e)?s={value:e,key:r,label:e,show:!0}:y()(e)&&!_()(e.value)&&(s=Object.assign({show:!0},e)),t&&"function"===typeof t&&(s.label=t(e)),i.push(s)})),i}handleSearch(e){this._adapter.updateInputValue(e),this._adapter.notifySearch(e),this._adapter.notifyChange(e),this._modifyFocusIndex(e),this.isPanelOpen||this.openDropdown()}handleSelect(e,t){const{renderSelectedItem:i}=this.getProps();let n="";i&&"function"===typeof i?(n=i(e),(0,A.A)("string"!==typeof n,"Warning: [Semi AutoComplete] renderSelectedItem must return string, please check your function return")):n=e.value,this._isControlledComponent()?(this.closeDropdown(),this.notifySelect(e)):(this._adapter.updateInputValue(n),this.updateSelection(e),this.notifySelect(e),this.closeDropdown()),this._adapter.notifyChange(n),this._adapter.updateFocusIndex(t)}updateSelection(e){const t=new Map;e&&t.set(e.label,e),this._adapter.updateSelection(t)}notifySelect(e){this._backwardLabelInValue()?this._adapter.notifySelect(e):this._adapter.notifySelect(e.value)}_backwardLabelInValue(){const e=this.getProps();let{onSelectWithObject:t}=e;return t}handleDataChange(e){const t=this._generateList(e);this._adapter.updateOptionList(t),this._adapter.rePositionDropdown()}handleValueChange(e){let{data:t,defaultActiveFirstOption:i}=this.getProps(),n="";n=this._backwardLabelInValue()&&"[object Object]"===Object.prototype.toString.call(e)?e.value:e;let r=this._getRenderSelectedItem();const s=this._generateList(t);let a=s.length?s.filter((e=>r(e)===n)):[];const o=a.length,l=s.findIndex((e=>r(e)===n));let c="";if(o)a=a[0],c=r(a);else{const t=this._backwardLabelInValue()?e:{label:n,value:n};c=r(t)}this._adapter.updateInputValue(c),this.updateSelection(o?a:null),-1===l&&i?this._adapter.updateFocusIndex(0):this._adapter.updateFocusIndex(l)}_modifyFocusIndex(e){let{focusIndex:t}=this.getStates(),{data:i,defaultActiveFirstOption:n}=this.getProps(),r=-1;if(e){let t=this._getRenderSelectedItem();r=this._generateList(i).findIndex((i=>t(i)===e))}-1===r&&n?0!==t&&this._adapter.updateFocusIndex(0):r!==t&&this._adapter.updateFocusIndex(r)}_modifyFocusIndexOnPanelOpen(){let{inputValue:e}=this.getStates();this._modifyFocusIndex(e)}_getRenderSelectedItem(){let{renderSelectedItem:e}=this.getProps();return"undefined"===typeof e&&(e=e=>null===e||void 0===e?void 0:e.value),e}handleClear(){this._adapter.notifyClear()}bindKeyBoardEvent(){this._keydownHandler=e=>{this._handleKeyDown(e)},this._adapter.registerKeyDown(this._keydownHandler)}_handleKeyDown(e){const t=e.keyCode,{visible:i}=this.getStates();switch(t){case E.Ay.UP:e.preventDefault(),this._handleArrowKeyDown(-1);break;case E.Ay.DOWN:e.preventDefault(),this._handleArrowKeyDown(1);break;case E.Ay.ENTER:e.preventDefault(),this._handleEnterKeyDown();break;case E.Ay.ESC:case E.Ay.TAB:this.closeDropdown()}this._adapter.notifyKeyDown(e)}_getEnableFocusIndex(e){const{focusIndex:t,options:i}=this.getStates(),n=i.filter((e=>e.show)),r=n.length;let s=t+e;if(s<0&&(s=r-1),s>=r&&(s=0),e>0){let e=-1;for(let t=0;t<n.length;t++){if(!n[t].disabled&&(e=t),e>=s)break}s=e}else{let e=n.length;for(let t=r-1;t>=0;t--){if(!n[t].disabled&&(e=t),e<=s)break}s=e}this._adapter.updateFocusIndex(s)}_handleArrowKeyDown(e){const{visible:t}=this.getStates();t?this._getEnableFocusIndex(e):this.openDropdown()}_handleEnterKeyDown(){const{visible:e,options:t,focusIndex:i}=this.getStates();if(e)if(void 0!==i&&-1!==i&&0!==t.length){const e=t.filter((e=>e.show))[i];this.handleSelect(e,i)}else this.closeDropdown();else this.openDropdown()}handleOptionMouseEnter(e){this._adapter.updateFocusIndex(e)}handleFocus(e){this.bindKeyBoardEvent(),this._adapter.notifyFocus(e)}handleBlur(e){this._persistEvent(e),this._adapter.notifyBlur(e)}}const O=T;var P=i(63972),M=i(54089);const I={PREFIX:"".concat(p._,"-spin")};class R extends k.A{static get spinDefaultAdapter(){return{getProp:()=>{},setLoading:e=>{}}}constructor(e){super(Object.assign(Object.assign({},R.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){const{spinning:e,delay:t}=this._adapter.getProps(),{delay:i}=this._adapter.getStates();if(i){const i=this;this._timer=setTimeout((()=>{i._adapter.setState({loading:e,delay:0})}),t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}const D=R;var L=i(49825),j=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};let F=-1;const B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t,className:i}=e,n=j(e,["id","className"]);let r=t;(0,L.A)(r)&&(F++,r=F);const s="linearGradient-".concat(r);return o.createElement("svg",Object.assign({},n,{className:i,width:"48",height:"48",viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,"data-icon":"spin"}),o.createElement("defs",null,o.createElement("linearGradient",{x1:"0%",y1:"100%",x2:"100%",y2:"100%",id:s},o.createElement("stop",{stopColor:"currentColor",stopOpacity:"0",offset:"0%"}),o.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.50",offset:"39.9430698%"}),o.createElement("stop",{stopColor:"currentColor",offset:"100%"}))),o.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.createElement("rect",{fillOpacity:"0.01",fill:"none",x:"0",y:"0",width:"36",height:"36"}),o.createElement("path",{d:"M34,18 C34,9.163444 26.836556,2 18,2 C11.6597233,2 6.18078805,5.68784135 3.59122325,11.0354951",stroke:"url(#".concat(s,")"),strokeWidth:"4",strokeLinecap:"round"})))};var N=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const z=I.PREFIX;class H extends M.A{constructor(e){super(e),this.foundation=new D(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?!1===e.spinning?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){const{indicator:e,tip:t}=this.props,{loading:i}=this.state;return i?o.createElement("div",{className:"".concat(z,"-wrapper")},e?o.createElement("div",{className:"".concat(z,"-animate"),"x-semi-prop":"indicator"},e):o.createElement(B,null),t?o.createElement("div",{"x-semi-prop":"tip"},t):null):null}render(){this.foundation.updateLoadingIfNeedDelay();const e=this.props,{children:t,style:i,wrapperClassName:n,childStyle:r,size:s}=e,a=N(e,["children","style","wrapperClassName","childStyle","size"]),{loading:l}=this.state,c=d()(z,n,{["".concat(z,"-").concat(s)]:s,["".concat(z,"-block")]:t,["".concat(z,"-hidden")]:!l});return o.createElement("div",Object.assign({className:c,style:i},this.getDataAttr(a)),this.renderSpin(),o.createElement("div",{className:"".concat(z,"-children"),style:r,"x-semi-prop":"children"},t))}}H.propTypes={size:c().oneOf(["small","middle","large"]),spinning:c().bool,children:c().node,indicator:c().node,delay:c().number,tip:c().node,wrapperClassName:c().string,childStyle:c().object,style:c().object},H.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};const V=H;var U=i(46001),W=i(11629),G=i.n(W),K=i(69613),Y=i.n(K);const X={PREFIX:"".concat(p._,"-input")},q={SIZE:["small","large","default"],DEFAULT_SIZE:"default",STATUS:["default","error","warning","success"],CLEARBTN_CLICKED_EVENT_FLAG:"__fromClearBtn",MODE:["password"]};class Z extends k.A{static get inputDefaultAdapter(){return{notifyChange:r(),setValue:r()}}constructor(e){super(Object.assign(Object.assign({},Z.inputDefaultAdapter),e))}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}setDisable(){}setValue(e){this._adapter.setValue(e)}handleChange(e,t){const{maxLength:i,minLength:n,getValueLength:r}=this._adapter.getProps();let s=e;i&&G()(r)&&(s=this.handleVisibleMaxLength(e)),n&&G()(r)&&this.handleVisibleMinLength(s),this._isControlledComponent()||this._adapter.setValue(s),this._adapter.notifyChange(s,t)}handleVisibleMinLength(e){const{minLength:t,getValueLength:i}=this._adapter.getProps(),{minLength:n}=this._adapter.getStates();if(S()(t)&&t>=0&&G()(i)&&C()(e)){const r=i(e);if(r<t){const i=e.length+(t-r);i!==n&&this._adapter.setMinLength(i)}else n!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:i}=this._adapter.getProps();if(S()(t)&&t>=0&&G()(i)&&C()(e)){if(i(e)>t){console.warn("[Semi Input] The input character is truncated because the input length exceeds the maximum length limit");return this.handleTruncateValue(e,t)}return e}}handleTruncateValue(e,t){const{getValueLength:i}=this._adapter.getProps();if(G()(i)){let n="";for(let r=1,s=e.length;r<=s;r++){const s=e.slice(0,r);if(i(s)>t)return n;n=s}return n}return e.slice(0,t)}handleClear(e){let t=e;this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),t&&"object"===typeof t||(t={}),Y()(t,q.CLEARBTN_CLICKED_EVENT_FLAG,!0),this._adapter.notifyChange("",t),this._adapter.notifyClear(t),t&&this.stopPropagation(t)}handleClick(e){const{disabled:t}=this._adapter.getProps(),{isFocus:i}=this._adapter.getStates();t||i||this._adapter.isEventTarget(e)&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handleModeChange(e){"password"===e?this._adapter.setEyeClosed(!0):this._adapter.setEyeClosed(!1)}handleClickEye(e){const t=this._adapter.getState("eyeClosed");this._adapter.focusInput(),this._adapter.toggleFocusing(!0),this._adapter.setEyeClosed(!t)}handleInputType(e){const t=this._adapter.getProp("mode"),i=this._adapter.getState("eyeClosed");return"password"===t?i?"password":"text":e}handleMouseDown(e){e.preventDefault()}handleMouseUp(e){e.preventDefault()}handleBlur(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(t,e)}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleInput(e){this._adapter.notifyInput(e)}handleKeyDown(e){this._adapter.notifyKeyDown(e)}handleKeyUp(e){this._adapter.notifyKeyUp(e)}handleKeyPress(e){this._adapter.notifyKeyPress(e),e.key===E.jD&&this._adapter.notifyEnterPress(e)}isAllowClear(){const{value:e,isFocus:t,isHovering:i}=this._adapter.getStates(),{showClear:n,disabled:r,showClearIgnoreDisabled:s}=this._adapter.getProps();return e&&n&&(!r||s)&&(t||i)}handleClickPrefixOrSuffix(e){const{disabled:t}=this._adapter.getProps(),{isFocus:i}=this._adapter.getStates();t||i||(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handlePreventMouseDown(e){e&&G()(e.preventDefault)&&e.preventDefault()}handleModeEnterPress(e){["Enter"," "].includes(null===e||void 0===e?void 0:e.key)&&(this.handlePreventMouseDown(e),this.handleClickEye(e))}}const Q=Z;var $=i(11692),J=i(96041);const ee=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.0352 16.8626C16.4597 17.4585 15.5101 17.4751 14.9142 16.8996L12.0368 14.121L9.25822 16.9984C8.68274 17.5943 7.73314 17.6109 7.13722 17.0354C6.5413 16.4599 6.52472 15.5103 7.1002 14.9144L9.87883 12.037L7.00147 9.2584C6.40555 8.68293 6.38897 7.73332 6.96445 7.1374C7.53992 6.54148 8.48953 6.52491 9.08545 7.10038L11.9628 9.87901L14.7414 7.00165C15.3169 6.40573 16.2665 6.38916 16.8624 6.96463C17.4584 7.54011 17.4749 8.48971 16.8995 9.08563L14.1208 11.963L16.9982 14.7416C17.5941 15.3171 17.6107 16.2667 17.0352 16.8626Z",fill:"currentColor"}))}),"clear");const te=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7071 3.70711C22.0976 3.31658 22.0976 2.68342 21.7071 2.29289C21.3166 1.90237 20.6834 1.90237 20.2929 2.29289L17.3135 5.27233C15.8114 4.50566 14.0321 4 12 4C5 4 1 10 1 12C1 13.1757 2.38219 15.7335 4.94345 17.6423L2.29289 20.2929C1.90237 20.6834 1.90237 21.3166 2.29289 21.7071C2.68342 22.0976 3.31658 22.0976 3.70711 21.7071L21.7071 3.70711ZM7.8284 14.7574L9.29237 13.2934C9.10495 12.9018 9 12.4631 9 12C9 10.3431 10.3431 9 12 9C12.4631 9 12.9018 9.10495 13.2934 9.29237L14.7574 7.8284C13.967 7.30488 13.0191 7 12 7C9.23858 7 7 9.23858 7 12C7 13.0191 7.30488 13.967 7.8284 14.7574Z",fill:"currentColor"}),o.createElement("path",{d:"M12 20C10.7789 20 9.64914 19.8174 8.61594 19.5054L11.1871 16.9342C11.4516 16.9775 11.7232 17 12 17C14.7614 17 17 14.7614 17 12C17 11.7232 16.9775 11.4516 16.9342 11.1871L20.5032 7.61808C22.1342 9.27317 23 11.0695 23 12C23 14 19 20 12 20Z",fill:"currentColor"}))}),"eye_closed_solid");const ie=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C5 4 1 10 1 12C1 14 5 20 12 20C19 20 23 14 23 12C23 10 19 4 12 4ZM17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",fill:"currentColor"}))}),"eye_opened");var ne=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const re=X.PREFIX,se=q.SIZE,ae=q.STATUS,oe=q.MODE;class le extends M.A{constructor(e){super(e),this.handleClear=e=>{this.foundation.handleClear(e)},this.handleClick=e=>{this.foundation.handleClick(e)},this.handleMouseOver=e=>{this.setState({isHovering:!0})},this.handleMouseLeave=e=>{this.setState({isHovering:!1})},this.handleModeChange=e=>{this.foundation.handleModeChange(e)},this.handleClickEye=e=>{this.foundation.handleClickEye(e)},this.handleMouseDown=e=>{this.foundation.handleMouseDown(e)},this.handleMouseUp=e=>{this.foundation.handleMouseUp(e)},this.handleModeEnterPress=e=>{this.foundation.handleModeEnterPress(e)},this.handleClickPrefixOrSuffix=e=>{this.foundation.handleClickPrefixOrSuffix(e)},this.handlePreventMouseDown=e=>{this.foundation.handlePreventMouseDown(e)};const t="value"in e?e.value:e.defaultValue;this.state={value:t,cachedValue:e.value,disabled:!1,props:{},isFocus:!1,isHovering:!1,eyeClosed:"password"===e.mode,minLength:e.minLength},this.inputRef=o.createRef(),this.prefixRef=o.createRef(),this.suffixRef=o.createRef(),this.foundation=new Q(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e}),setEyeClosed:e=>this.setState({eyeClosed:e}),toggleFocusing:e=>{this.setState({isFocus:e})},focusInput:()=>{const{preventScroll:e}=this.props,t=this.inputRef&&this.inputRef.current;t&&t.focus({preventScroll:e})},toggleHovering:e=>this.setState({isHovering:e}),getIfFocusing:()=>this.state.isFocus,notifyChange:(e,t)=>this.props.onChange(e,t),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyInput:e=>this.props.onInput(e),notifyKeyPress:e=>this.props.onKeyPress(e),notifyKeyDown:e=>this.props.onKeyDown(e),notifyKeyUp:e=>this.props.onKeyUp(e),notifyEnterPress:e=>this.props.onEnterPress(e),notifyClear:e=>this.props.onClear(e),setMinLength:e=>this.setState({minLength:e}),isEventTarget:e=>e&&e.target===e.currentTarget})}static getDerivedStateFromProps(e,t){const i={};return e.value!==t.cachedValue&&(i.value=e.value,i.cachedValue=e.value),i}componentDidUpdate(e){const{mode:t}=this.props;e.mode!==t&&this.handleModeChange(t)}componentDidMount(){const{disabled:e,autoFocus:t,preventScroll:i}=this.props;e||!t&&!this.props.autofocus||this.inputRef.current.focus({preventScroll:i})}renderPrepend(){const{addonBefore:e}=this.props;if(e){const t=d()({["".concat(re,"-prepend")]:!0,["".concat(re,"-prepend-text")]:e&&C()(e),["".concat(re,"-prepend-icon")]:(0,$.uR)(e)});return o.createElement("div",{className:t,"x-semi-prop":"addonBefore"},e)}return null}renderAppend(){const{addonAfter:e}=this.props;if(e){const t=d()({["".concat(re,"-append")]:!0,["".concat(re,"-append-text")]:e&&C()(e),["".concat(re,"-append-icon")]:(0,$.uR)(e)});return o.createElement("div",{className:t,"x-semi-prop":"addonAfter"},e)}return null}renderClearBtn(){const e=d()("".concat(re,"-clearbtn")),{clearIcon:t}=this.props;return this.foundation.isAllowClear()?o.createElement("div",{className:e,onMouseDown:this.handleClear},t||o.createElement(ee,null)):null}renderModeBtn(){const{eyeClosed:e}=this.state,{mode:t,disabled:i}=this.props,n=d()("".concat(re,"-modebtn")),r=e?o.createElement(te,null):o.createElement(ie,null),s=e?"Show password":"Hidden password";return"password"===t&&!i?o.createElement("div",{role:"button",tabIndex:0,"aria-label":s,className:n,onClick:this.handleClickEye,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyPress:this.handleModeEnterPress},r):null}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:i}=this.props,n=e||t;if(!n)return null;const r=d()({["".concat(re,"-prefix")]:!0,["".concat(re,"-inset-label")]:t,["".concat(re,"-prefix-text")]:n&&C()(n),["".concat(re,"-prefix-icon")]:(0,$.uR)(n)});return o.createElement("div",{className:r,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:i,"x-semi-prop":"prefix,insetLabel"},n)}renderSuffix(e){const{suffix:t,hideSuffix:i}=this.props;if(!t)return null;const n=d()({["".concat(re,"-suffix")]:!0,["".concat(re,"-suffix-text")]:t&&C()(t),["".concat(re,"-suffix-icon")]:(0,$.uR)(t),["".concat(re,"-suffix-hidden")]:e&&Boolean(i)});return o.createElement("div",{className:n,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},t)}getInputRef(){const{forwardRef:e}=this.props;if(!_()(e)){if("function"===typeof e)return t=>{e(t),this.inputRef={current:t}};if("[object Object]"===Object.prototype.toString.call(e))return this.inputRef=e,e}return this.inputRef}render(){const e=this.props,{addonAfter:t,addonBefore:i,autoFocus:n,clearIcon:r,className:s,disabled:a,defaultValue:l,placeholder:c,prefix:h,mode:u,insetLabel:p,insetLabelId:g,validateStatus:f,type:m,readonly:v,size:y,suffix:b,style:_,showClear:x,onEnterPress:S,onClear:w,hideSuffix:C,inputStyle:k,forwardRef:A,maxLength:E,getValueLength:T,preventScroll:O,borderless:P,showClearIgnoreDisabled:M,onlyBorder:I}=e,R=ne(e,["addonAfter","addonBefore","autoFocus","clearIcon","className","disabled","defaultValue","placeholder","prefix","mode","insetLabel","insetLabelId","validateStatus","type","readonly","size","suffix","style","showClear","onEnterPress","onClear","hideSuffix","inputStyle","forwardRef","maxLength","getValueLength","preventScroll","borderless","showClearIgnoreDisabled","onlyBorder"]),{value:D,isFocus:L,minLength:j}=this.state,F=this.foundation.isAllowClear(),B=(0,$.uR)(b),N=this.getInputRef(),z="".concat(re,"-wrapper"),H=d()(z,s,{["".concat(re,"-wrapper__with-prefix")]:h||p,["".concat(re,"-wrapper__with-suffix")]:b,["".concat(re,"-wrapper__with-suffix-hidden")]:F&&Boolean(C),["".concat(re,"-wrapper__with-suffix-icon")]:B,["".concat(re,"-wrapper__with-append")]:i,["".concat(re,"-wrapper__with-prepend")]:t,["".concat(re,"-wrapper__with-append-only")]:i&&!t,["".concat(re,"-wrapper__with-prepend-only")]:!i&&t,["".concat(z,"-readonly")]:v,["".concat(z,"-disabled")]:a,["".concat(z,"-warning")]:"warning"===f,["".concat(z,"-error")]:"error"===f,["".concat(z,"-focus")]:L,["".concat(z,"-clearable")]:x,["".concat(z,"-modebtn")]:"password"===u,["".concat(z,"-hidden")]:"hidden"===m,["".concat(z,"-").concat(y)]:y,["".concat(re,"-borderless")]:P,["".concat(re,"-only_border")]:void 0!==I&&null!==I}),V=d()(re,{["".concat(re,"-").concat(y)]:y,["".concat(re,"-disabled")]:a,["".concat(re,"-sibling-clearbtn")]:this.foundation.isAllowClear(),["".concat(re,"-sibling-modebtn")]:"password"===u}),U=null===D||void 0===D?"":D,W=Object.assign(Object.assign({},R),{style:k,className:V,disabled:a,readOnly:v,type:this.foundation.handleInputType(m),placeholder:c,onInput:e=>this.foundation.handleInput(e),onChange:e=>this.foundation.handleChange(e.target.value,e),onFocus:e=>this.foundation.handleFocus(e),onBlur:e=>this.foundation.handleBlur(e),onKeyUp:e=>this.foundation.handleKeyUp(e),onKeyDown:e=>this.foundation.handleKeyDown(e),onKeyPress:e=>this.foundation.handleKeyPress(e),value:U});G()(T)||(W.maxLength=E),j&&(W.minLength=j),"error"===f&&(W["aria-invalid"]="true");let K=Object.assign({},_);return void 0!==I&&(K=Object.assign({borderWidth:I},_)),o.createElement("div",{className:H,style:K,onMouseEnter:e=>this.handleMouseOver(e),onMouseLeave:e=>this.handleMouseLeave(e),onClick:e=>this.handleClick(e)},this.renderPrepend(),this.renderPrefix(),o.createElement("input",Object.assign({},W,{ref:N})),this.renderClearBtn(),this.renderSuffix(F),this.renderModeBtn(),this.renderAppend())}}le.propTypes={"aria-label":c().string,"aria-labelledby":c().string,"aria-invalid":c().bool,"aria-errormessage":c().string,"aria-describedby":c().string,"aria-required":c().bool,addonBefore:c().node,addonAfter:c().node,clearIcon:c().node,prefix:c().node,suffix:c().node,mode:c().oneOf(oe),value:c().any,defaultValue:c().any,disabled:c().bool,readonly:c().bool,autoFocus:c().bool,type:c().string,showClear:c().bool,hideSuffix:c().bool,placeholder:c().any,size:c().oneOf(se),className:c().string,style:c().object,validateStatus:c().oneOf(ae),onClear:c().func,onChange:c().func,onBlur:c().func,onFocus:c().func,onInput:c().func,onKeyDown:c().func,onKeyUp:c().func,onKeyPress:c().func,onEnterPress:c().func,insetLabel:c().node,insetLabelId:c().string,inputStyle:c().object,getValueLength:c().func,preventScroll:c().bool,borderless:c().bool},le.defaultProps={addonBefore:"",addonAfter:"",prefix:"",suffix:"",readonly:!1,type:"text",showClear:!1,hideSuffix:!1,placeholder:"",size:"default",className:"",onClear:r(),onChange:r(),onBlur:r(),onFocus:r(),onInput:r(),onKeyDown:r(),onKeyUp:r(),onKeyPress:r(),onEnterPress:r(),validateStatus:"default",borderless:!1};const ce=o.forwardRef(((e,t)=>o.createElement(le,Object.assign({},e,{forwardRef:t}))));var he=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class de extends o.PureComponent{render(){const e=this.props,{triggerRender:t,componentName:i}=e,n=he(e,["triggerRender","componentName"]);return t(Object.assign({},n))}}de.propTypes={triggerRender:c().func.isRequired,componentName:c().string,componentProps:c().object,value:c().any,inputValue:c().string,placeholder:c().oneOfType([c().string,c().array]),className:c().string,style:c().object};const ue=de;var pe=i(162),ge=i(95225),fe=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class me extends o.PureComponent{onClick(e,t){var{value:i,label:n,children:r}=e,s=fe(e,["value","label","children"]);const{props:a}=this;a.disabled||a.onSelect(Object.assign(Object.assign({},s),{value:i,label:n||r}),t)}renderOptionContent(e){let{config:t,children:i,inputValue:n,prefixCls:r}=e;return C()(i)&&n?(0,$.TA)(t):i}render(){const e=this.props,{children:t,disabled:i,value:n,selected:r,label:s,empty:a,emptyContent:l,onSelect:c,focused:h,showTick:u,className:p,style:g,onMouseEnter:f,prefixCls:m,renderOptionItem:v,inputValue:y}=e,b=fe(e,["children","disabled","value","selected","label","empty","emptyContent","onSelect","focused","showTick","className","style","onMouseEnter","prefixCls","renderOptionItem","inputValue"]),_=d()(m,{["".concat(m,"-disabled")]:i,["".concat(m,"-selected")]:r,["".concat(m,"-focused")]:h,["".concat(m,"-empty")]:a,[p]:p}),x=d()(["".concat(m,"-icon")]);if(a)return null===l?null:o.createElement(pe.A,{componentName:"Select"},(e=>o.createElement("div",{className:_,"x-semi-prop":"emptyContent"},l||e.emptyText)));if("function"===typeof v)return v(Object.assign({disabled:i,focused:h,selected:r,style:g,label:s,value:n,inputValue:y,onMouseEnter:e=>f(e),onClick:e=>this.onClick(Object.assign({value:n,label:s,children:t},b),e)},b));const S={searchWords:y,sourceString:t,option:{highlightClassName:"".concat(m,"-keyword")}};return o.createElement("div",{className:_,onClick:e=>{this.onClick(Object.assign({value:n,label:s,children:t},b),e)},onMouseEnter:e=>f&&f(e),role:"option","aria-selected":r?"true":"false","aria-disabled":i?"true":"false",style:g},u?o.createElement("div",{className:x},o.createElement(ge.A,null)):null,C()(t)?o.createElement("div",{className:"".concat(m,"-text")},this.renderOptionContent({children:t,config:S,inputValue:y,prefixCls:m})):t)}}me.isSelectOption=!0,me.propTypes={children:c().node,disabled:c().bool,value:c().oneOfType([c().string,c().number]),selected:c().bool,label:c().node,empty:c().bool,emptyContent:c().node,onSelect:c().func,focused:c().bool,showTick:c().bool,className:c().string,style:c().object,onMouseEnter:c().func,prefixCls:c().string,renderOptionItem:c().func,inputValue:c().string},me.defaultProps={prefixCls:f.PREFIX_OPTION};const ve=me;var ye=i(97950);const be=f.PREFIX,_e=m.SIZE,xe=m.POSITION,Se=m.STATUS;class we extends M.A{constructor(e){super(e),this.onSelect=(e,t,i)=>{this.foundation.handleSelect(e,t)},this.onSearch=e=>{this.foundation.handleSearch(e)},this.onBlur=e=>this.foundation.handleBlur(e),this.onFocus=e=>this.foundation.handleFocus(e),this.onInputClear=()=>this.foundation.handleClear(),this.handleInputClick=e=>this.foundation.handleInputClick(e),this.foundation=new O(this.adapter);this.state={dropdownMinWidth:null,inputValue:"",options:[],visible:!1,focusIndex:e.defaultActiveFirstOption?0:-1,selection:new Map,rePosKey:1},this.triggerRef=o.createRef(),this.optionsRef=o.createRef(),this.clickOutsideHandler=null,(0,A.A)("triggerRender"in this.props&&"function"===typeof this.props.triggerRender,"[Semi AutoComplete]\n            - If you are using the following props: 'suffix', 'prefix', 'showClear', 'validateStatus', and 'size',\n            please notice that they will be removed in the next major version.\n            Please use 'componentProps' to retrieve these props instead.\n            - If you are using 'onBlur', 'onFocus', please try to avoid using them and look for changes in the future.")}get adapter(){const e={registerKeyDown:e=>{const t={onKeyDown:e};this.setState({keyboardEventSet:t})},unregisterKeyDown:e=>{this.setState({keyboardEventSet:{}})},updateFocusIndex:e=>{this.setState({focusIndex:e})}};return Object.assign(Object.assign(Object.assign({},super.adapter),e),{getTriggerWidth:()=>{const e=this.triggerRef.current;return e&&e.getBoundingClientRect().width},setOptionWrapperWidth:e=>{this.setState({dropdownMinWidth:e})},updateInputValue:e=>{this.setState({inputValue:e})},toggleListVisible:e=>{this.setState({visible:e})},updateOptionList:e=>{this.setState({options:e})},updateSelection:e=>{this.setState({selection:e})},notifySearch:e=>{this.props.onSearch(e)},notifyChange:e=>{this.props.onChange(e)},notifySelect:e=>{this.props.onSelect(e)},notifyDropdownVisibleChange:e=>{this.props.onDropdownVisibleChange(e)},notifyClear:()=>{this.props.onClear()},notifyFocus:e=>{this.props.onFocus(e)},notifyBlur:e=>{this.props.onBlur(e)},notifyKeyDown:e=>{this.props.onKeyDown(e)},rePositionDropdown:()=>{let{rePosKey:e}=this.state;e+=1,this.setState({rePosKey:e})},registerClickOutsideHandler:e=>{const t=t=>{const i=this.optionsRef&&this.optionsRef.current,n=this.triggerRef&&this.triggerRef.current,r=ye.findDOMNode(i),s=t.target,a=t.composedPath&&t.composedPath()||[s];!r||r.contains(s)&&r.contains(s.parentNode)||!n||n.contains(s)||a.includes(n)||a.includes(r)||e(t)};this.clickOutsideHandler=t,document.addEventListener("mousedown",t,!1)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&document.removeEventListener("mousedown",this.clickOutsideHandler,!1)}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e,t){a()(this.props.data,e.data)||this.foundation.handleDataChange(this.props.data),this.props.value!==e.value&&this.foundation.handleValueChange(this.props.value)}renderInput(){const{size:e,prefix:t,insetLabel:i,insetLabelId:n,suffix:r,placeholder:s,style:a,className:l,showClear:c,disabled:h,triggerRender:u,validateStatus:p,autoFocus:g,value:f,id:m,clearIcon:v}=this.props,{inputValue:y,keyboardEventSet:b,selection:_}=this.state,x="function"===typeof u,S=Object.assign(Object.assign(Object.assign({style:a,className:x?d()(l):d()({[be]:!0,["".concat(be,"-disabled")]:h},l),onClick:this.handleInputClick,ref:this.triggerRef,id:m},b),{tabIndex:-1}),this.getDataAttr(this.props)),w={disabled:h,placeholder:s,autofocus:g,onChange:this.onSearch,onClear:this.onInputClear,"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"],suffix:r,prefix:t||i,insetLabelId:n,showClear:c,validateStatus:p,size:e,onBlur:this.onBlur,onFocus:this.onFocus,clearIcon:v};return o.createElement("div",Object.assign({},S),"function"===typeof u?o.createElement(ue,Object.assign({},w,{inputValue:"undefined"!==typeof f?f:y,value:Array.from(_.values()),triggerRender:u,componentName:"AutoComplete",componentProps:Object.assign({},this.props)})):o.createElement(ce,Object.assign({},w,{value:"undefined"!==typeof f?f:y})))}renderLoading(){const e="".concat(be,"-loading-wrapper");return o.createElement("div",{className:e},o.createElement(V,null))}renderOption(e,t){const{focusIndex:i}=this.state,n=t===i;return o.createElement(ve,Object.assign({showTick:!1,onSelect:(e,i)=>this.onSelect(e,t,i),focused:n,onMouseEnter:()=>this.foundation.handleOptionMouseEnter(t),key:e.key||e.label+e.value+t},e),e.label)}renderOptionList(){const{maxHeight:e,dropdownStyle:t,dropdownClassName:i,loading:n,emptyContent:r}=this.props,{options:s,dropdownMinWidth:a}=this.state,l=d()({["".concat(be,"-option-list")]:!0},i);let c;c=0===s.length?r:s.filter((e=>e.show)).map(((e,t)=>this.renderOption(e,t)));const h=Object.assign({maxHeight:e,minWidth:a},t);return o.createElement("div",{className:l,role:"listbox",style:h},n?this.renderLoading():c)}render(){const{position:e,motion:t,zIndex:i,mouseEnterDelay:n,mouseLeaveDelay:r,autoAdjustOverflow:s,stopPropagation:a,getPopupContainer:l}=this.props,{visible:c,rePosKey:h}=this.state,d=this.renderInput(),u=this.renderOptionList();return o.createElement(U.A,{mouseEnterDelay:n,mouseLeaveDelay:r,autoAdjustOverflow:s,trigger:"custom",motion:t,visible:c,content:u,position:e,ref:this.optionsRef,zIndex:i,stopPropagation:a,getPopupContainer:l,rePosKey:h},d)}}we.propTypes={"aria-label":c().string,"aria-labelledby":c().string,"aria-invalid":c().bool,"aria-errormessage":c().string,"aria-describedby":c().string,"aria-required":c().bool,autoFocus:c().bool,autoAdjustOverflow:c().bool,className:c().string,clearIcon:c().node,children:c().node,data:c().array,defaultOpen:c().bool,defaultValue:c().oneOfType([c().string,c().number]),defaultActiveFirstOption:c().bool,disabled:c().bool,dropdownMatchSelectWidth:c().bool,dropdownClassName:c().string,dropdownStyle:c().object,emptyContent:c().node,id:c().string,insetLabel:c().node,insetLabelId:c().string,onSearch:c().func,onSelect:c().func,onClear:c().func,onBlur:c().func,onFocus:c().func,onChange:c().func,onKeyDown:c().func,position:c().oneOf(xe),placeholder:c().string,prefix:c().node,onChangeWithObject:c().bool,onSelectWithObject:c().bool,renderItem:c().func,renderSelectedItem:c().func,suffix:c().node,showClear:c().bool,size:c().oneOf(_e),style:c().object,stopPropagation:c().oneOfType([c().bool,c().string]),maxHeight:c().oneOfType([c().string,c().number]),mouseEnterDelay:c().number,mouseLeaveDelay:c().number,motion:c().oneOfType([c().bool,c().func,c().object]),getPopupContainer:c().func,triggerRender:c().func,value:c().oneOfType([c().string,c().number]),validateStatus:c().oneOf(Se),zIndex:c().number},we.Option=ve,we.__SemiComponentName__="AutoComplete",we.defaultProps=(0,$.bQ)(we.__SemiComponentName__,{stopPropagation:!0,motion:!0,zIndex:P.nL.DEFAULT_Z_INDEX,position:"bottomLeft",data:[],showClear:!1,size:"default",onFocus:r(),onSearch:r(),onClear:r(),onBlur:r(),onSelect:r(),onChange:r(),onSelectWithObject:!1,onDropdownVisibleChange:r(),defaultActiveFirstOption:!1,dropdownMatchSelectWidth:!0,loading:!1,maxHeight:300,validateStatus:"default",autoFocus:!1,emptyContent:null,onKeyDown:r()});const Ce=we,ke={PREFIX:"".concat(p._,"-avatar")},Ae=["circle","square"],Ee=["extra-extra-small","extra-small","small","default","medium","large","extra-large"],Te=["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"];class Oe extends k.A{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(i){(0,A.A)(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)},this.changeScale=()=>{const{gap:e}=this.getProps(),t=this._adapter.getAvatarNode(),i=null===t||void 0===t?void 0:t.firstChild,[n,r]=[(null===t||void 0===t?void 0:t.offsetWidth)||0,(null===i||void 0===i?void 0:i.offsetWidth)||0];if(0!==n&&0!==r&&2*e<n){const t=n-2*e>r?1:(n-2*e)/r;this._adapter.setScale(t)}}}init(){const{children:e}=this.getProps();"string"===typeof e&&this.changeScale()}destroy(){}handleImgLoadError(){const{onError:e}=this.getProps();!1!==(e?e():void 0)&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}var Pe=i(12965),Me=i(76085),Ie=i(32050);const Re=e=>{let{gradientStart:t,gradientEnd:i}=e;const n=(0,Ie.Ae)();return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"51",height:"52",viewBox:"0 0 51 52",fill:"none"},o.createElement("g",{filter:"url(#filter0_d_6_2)"},o.createElement("path",{d:"M40.4918 46.5592C44.6795 43.176 46.261 34.1333 47.5301 25.6141C49.5854 11.8168 39.6662 1 25.8097 1C11.2857 1 3 11.4279 3 25.3518C3 33.7866 6.29361 43.8947 10.4602 46.5592C12.5868 47.9192 12.5868 47.9051 25.8097 47.9192C38.3651 47.9282 38.5352 48.14 40.4918 46.5592Z",fill:"url(#".concat(n,")")})),o.createElement("defs",null,o.createElement("filter",{id:"filter0_d_6_2",x:"0.789215",y:"0.447304",width:"49.2216",height:"51.3549",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),o.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),o.createElement("feOffset",{dy:"1.65809"}),o.createElement("feGaussianBlur",{stdDeviation:"1.10539"}),o.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),o.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_6_2"}),o.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_6_2",result:"shape"})),o.createElement("linearGradient",{id:n,x1:"17.671",y1:"31.7392",x2:"17.671",y2:"47.9333",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:t}),o.createElement("stop",{offset:"1",stopColor:i}))))};var De=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Le=Ee,je=Ae,Fe=Te,Be=ke.PREFIX;class Ne extends M.A{constructor(e){super(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.getContent=()=>{const{children:e,onClick:t,imgAttr:i,src:n,srcSet:r,alt:s}=this.props,{isImgExist:a}=this.state;let l=e;const c=t!==Pe.l,h=n&&a,u={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(h){const e=c?"clickable Avatar: ".concat(s):s,t=Object.assign(Object.assign({src:n,srcSet:r,onError:this.handleError},i),{className:d()({["".concat(Be,"-no-focus-visible")]:c})}),a=c?Object.assign(Object.assign({},t),u):t;l=o.createElement("img",Object.assign({alt:e},a))}else if("string"===typeof e){const t=null!==s&&void 0!==s?s:e,i={role:"img","aria-label":c?"clickable Avatar: ".concat(t):t,className:d()("".concat(Be,"-label"),{["".concat(Be,"-no-focus-visible")]:c})},n=c?Object.assign(Object.assign({},i),u):i,r={transform:"scale(".concat(this.state.scale,")")};l=o.createElement("span",{className:"".concat(Be,"-content"),style:r},o.createElement("span",Object.assign({},n,{"x-semi-prop":"children"}),e))}return l},this.renderBottomSlot=()=>{var e,t;if(!this.props.bottomSlot)return null;if(this.props.bottomSlot.render)return this.props.bottomSlot.render();const i=null!==(e=this.props.bottomSlot.render)&&void 0!==e?e:()=>{var e;const t={};return this.props.bottomSlot.bgColor&&(t.backgroundColor=this.props.bottomSlot.bgColor),this.props.bottomSlot.textColor&&(t.color=this.props.bottomSlot.textColor),o.createElement("span",{style:t,className:d()("".concat(Be,"-bottom_slot-shape_").concat(this.props.bottomSlot.shape),"".concat(Be,"-bottom_slot-shape_").concat(this.props.bottomSlot.shape,"-").concat(this.props.size),null!==(e=this.props.bottomSlot.className)&&void 0!==e?e:"")},this.props.bottomSlot.text)};return o.createElement("div",{className:d()(["".concat(Be,"-bottom_slot")]),style:null!==(t=this.props.bottomSlot.style)&&void 0!==t?t:{}},i())},this.renderTopSlot=()=>{var e,t,i,n;if(!this.props.topSlot)return null;if(this.props.topSlot.render)return this.props.topSlot.render();const r={};return this.props.topSlot.textColor&&(r.color=this.props.topSlot.textColor),o.createElement("div",{style:null!==(e=this.props.topSlot.style)&&void 0!==e?e:{},className:d()(["".concat(Be,"-top_slot-wrapper"),null!==(t=this.props.topSlot.className)&&void 0!==t?t:"",{["".concat(Be,"-animated")]:this.props.contentMotion}])},o.createElement("div",{className:d()(["".concat(Be,"-top_slot-bg"),"".concat(Be,"-top_slot-bg-").concat(this.props.size)])},o.createElement("div",{className:d()(["".concat(Be,"-top_slot-bg-svg"),"".concat(Be,"-top_slot-bg-svg-").concat(this.props.size)])},o.createElement(Re,{gradientStart:null!==(i=this.props.topSlot.gradientStart)&&void 0!==i?i:"var(--semi-color-primary)",gradientEnd:null!==(n=this.props.topSlot.gradientEnd)&&void 0!==n?n:"var(--semi-color-primary)"}))),o.createElement("div",{className:d()(["".concat(Be,"-top_slot")])},o.createElement("div",{style:r,className:d()(["".concat(Be,"-top_slot-content"),"".concat(Be,"-top_slot-content-").concat(this.props.size)])},this.props.topSlot.text)))},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1,scale:1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this),this.avatarRef=o.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{const{hoverMask:t}=this.props,i=t;this.setState({hoverContent:i},(()=>{const{onMouseEnter:t}=this.props;t&&t(e)}))},notifyLeave:e=>{this.setState({hoverContent:""},(()=>{const{onMouseLeave:t}=this.props;t&&t(e)}))},setFocusVisible:e=>{this.setState({focusVisible:e})},setScale:e=>{this.setState({scale:e})},getAvatarNode:()=>{var e;return null===(e=this.avatarRef)||void 0===e?void 0:e.current}})}componentDidMount(){this.foundation=new Oe(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){const e=new Image(0,0);e.src=this.props.src,e.onload=()=>{this.setState({isImgExist:!0})},e.onerror=()=>{this.setState({isImgExist:!1})},e.onabort=()=>{this.setState({isImgExist:!1})}}"string"===typeof this.props.children&&this.props.children!==e.children&&this.foundation.changeScale()}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){const{onClick:t}=this.props;switch(e.key){case"Enter":t(e),(0,Me.jK)(e);break;case"Escape":e.target.blur()}}render(){var e;const t=this.props,{shape:i,children:n,size:r,color:s,className:a,hoverMask:l,onClick:c,imgAttr:h,src:u,srcSet:p,style:g,alt:f,gap:m,bottomSlot:v,topSlot:y,border:b,contentMotion:_}=t,x=De(t,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt","gap","bottomSlot","topSlot","border","contentMotion"]),{isImgExist:S,hoverContent:w,focusVisible:C}=this.state,k=u&&S,A=d()(Be,{["".concat(Be,"-").concat(i)]:i,["".concat(Be,"-").concat(r)]:r,["".concat(Be,"-").concat(s)]:s&&!k,["".concat(Be,"-img")]:k,["".concat(Be,"-focus")]:C,["".concat(Be,"-animated")]:_},a),E=w?o.createElement("div",{className:"".concat(Be,"-hover"),"x-semi-prop":"hoverContent"},w):null;let T=o.createElement("span",Object.assign({},x,{style:b||v||y||b?{}:g,className:A,onClick:c,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave,role:"listitem",ref:this.avatarRef}),this.getContent(),E);if(b){const t={};"object"===typeof b&&(null===b||void 0===b?void 0:b.color)&&(t.borderColor=null===b||void 0===b?void 0:b.color),T=o.createElement("div",{style:Object.assign({position:"relative"},g)},T,o.createElement("span",{style:t,className:d()(["".concat(Be,"-additionalBorder"),"".concat(Be,"-additionalBorder-").concat(r),{["".concat(Be,"-").concat(i)]:i}])}),"object"===typeof this.props.border&&this.props.border.motion&&o.createElement("span",{style:t,className:d()(["".concat(Be,"-additionalBorder"),"".concat(Be,"-additionalBorder-").concat(r),{["".concat(Be,"-").concat(i)]:i,["".concat(Be,"-additionalBorder-animated")]:"object"===typeof this.props.border&&(null===(e=this.props.border)||void 0===e?void 0:e.motion)}])}))}return v||y||b?o.createElement("span",{className:d()(["".concat(Be,"-wrapper")]),style:g},T,y&&["small","default","medium","large","extra-large"].includes(r)&&"circle"===i&&this.renderTopSlot(),v&&["small","default","medium","large","extra-large"].includes(r)&&this.renderBottomSlot()):T}}Ne.__SemiComponentName__="Avatar",Ne.defaultProps=(0,$.bQ)(Ne.__SemiComponentName__,{size:"medium",color:"grey",shape:"circle",gap:3,onClick:Pe.l,onMouseEnter:Pe.l,onMouseLeave:Pe.l}),Ne.propTypes={children:c().node,color:c().oneOf(Fe),shape:c().oneOf(je),size:c().oneOf(Le),hoverMask:c().node,className:c().string,style:c().object,gap:c().number,imgAttr:c().object,src:c().string,srcSet:c().string,alt:c().string,onError:c().func,onClick:c().func,onMouseEnter:c().func,onMouseLeave:c().func,bottomSlot:c().shape({render:c().func,shape:c().oneOf(["circle","square"]),text:c().node,bgColor:c().string,textColor:c().string,className:c().string,style:c().object}),topSlot:c().shape({render:c().func,gradientStart:c().string,gradientEnd:c().string,text:c().node,textColor:c().string,className:c().string,style:c().object}),border:c().oneOfType([c().shape({color:c().string,motion:c().bool}),c().bool]),contentMotion:c().bool},Ne.elementType="Avatar";const ze={PREFIX:"".concat(p._,"-button")},He={sizes:["default","small","large"],iconPositions:["left","right"],htmlTypes:["button","reset","submit"],btnTypes:["primary","secondary","tertiary","warning","danger"],themes:["solid","borderless","light"],DEFAULT_ICON_SIZE:"default",DEFAULT_ICON_POSITION:"left"};"".concat(p._,"-icon");var Ve=i(1488),Ue=i.n(Ve),We=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Ge=He.sizes,{htmlTypes:Ke,btnTypes:Ye}=He;class Xe extends o.PureComponent{render(){const e=this.props,{children:t,block:i,htmlType:n,loading:r,circle:s,className:a,style:l,disabled:c,size:h,theme:u,type:p,prefixCls:g,iconPosition:f}=e,m=We(e,["children","block","htmlType","loading","circle","className","style","disabled","size","theme","type","prefixCls","iconPosition"]),v=Object.assign(Object.assign({disabled:c},Ue()(m,["x-semi-children-alias"])),{className:d()(g,{["".concat(g,"-").concat(p)]:!c&&p,["".concat(g,"-disabled")]:c,["".concat(g,"-size-large")]:"large"===h,["".concat(g,"-size-small")]:"small"===h,["".concat(g,"-light")]:"light"===u,["".concat(g,"-block")]:i,["".concat(g,"-circle")]:s,["".concat(g,"-borderless")]:"borderless"===u,["".concat(g,"-outline")]:"outline"===u,["".concat(g,"-").concat(p,"-disabled")]:c&&p},a),type:n,"aria-disabled":c}),y={};return a&&a.includes("-with-icon")||(y["x-semi-prop"]=this.props["x-semi-children-alias"]||"children"),o.createElement("button",Object.assign({},v,{onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,style:l}),o.createElement("span",Object.assign({className:"".concat(g,"-content"),onClick:e=>c&&e.stopPropagation()},y),t))}}Xe.defaultProps={disabled:!1,size:"default",type:"primary",theme:"light",block:!1,htmlType:"button",onMouseDown:Pe.l,onClick:Pe.l,onMouseEnter:Pe.l,onMouseLeave:Pe.l,prefixCls:ze.PREFIX},Xe.propTypes={children:c().node,disabled:c().bool,prefixCls:c().string,style:c().object,size:c().oneOf(Ge),type:c().oneOf(Ye),block:c().bool,onClick:c().func,onMouseDown:c().func,circle:c().bool,loading:c().bool,htmlType:c().oneOf(Ke),theme:c().oneOf(He.themes),className:c().string,onMouseEnter:c().func,onMouseLeave:c().func,"aria-label":c().string};var qe=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Ze=["extra-small","small","default","large","extra-large","custom"];class Qe extends o.PureComponent{render(){const e=this.props,{children:t,iconPosition:i,iconSize:n,iconStyle:r,style:s,icon:a,noHorizontalPadding:l,theme:c,className:h,prefixCls:u,loading:p}=e,g=qe(e,["children","iconPosition","iconSize","iconStyle","style","icon","noHorizontalPadding","theme","className","prefixCls","loading"]),f=Object.assign({},s);Array.isArray(l)?(l.includes("left")&&(f.paddingLeft=0),l.includes("right")&&(f.paddingRight=0)):!0===l?(f.paddingLeft=0,f.paddingRight=0):"string"===typeof l&&("left"===l&&(f.paddingLeft=0),"right"===l&&(f.paddingRight=0));let m=null,v=null;p&&!g.disabled?v=o.createElement(B,null):o.isValidElement(a)&&(v=a);const y=d()({["".concat(u,"-content-left")]:"right"===i,["".concat(u,"-content-right")]:"left"===i}),b=this.props["x-semi-children-alias"]||"children",_=null!=t?o.createElement("span",{className:y,"x-semi-prop":b},t):null;m="left"===i?o.createElement(o.Fragment,null,v,_):o.createElement(o.Fragment,null,_,v);const x=d()(h,"".concat(u,"-with-icon"),{["".concat(u,"-with-icon-only")]:null==_||""===_,["".concat(u,"-loading")]:p});return o.createElement(Xe,Object.assign({},g,{className:x,theme:c,style:f}),m)}}Qe.defaultProps={iconPosition:He.DEFAULT_ICON_POSITION,prefixCls:ze.PREFIX,loading:!1,noHorizontalPadding:!1,onMouseEnter:r(),onMouseLeave:r()},Qe.elementType="IconButton",Qe.propTypes={iconStyle:c().object,style:c().object,loading:c().bool,prefixCls:c().string,icon:c().oneOfType([c().object,c().string,c().node]),iconSize:c().oneOf(Ze),noHorizontalPadding:c().oneOfType([c().bool,c().string,c().array]),children:c().node,theme:c().string,iconPosition:c().oneOf(He.iconPositions),className:c().string,onMouseEnter:c().func,onMouseLeave:c().func};const $e=Qe,Je={PREFIX:"".concat(p._,"-banner")};class et extends k.A{constructor(e){super(Object.assign(Object.assign({},et.defaultAdapter),e))}removeBanner(e){this._adapter.notifyClose(e),this._adapter.setVisible()}}var tt=i(10727),it=i(66503),nt=i(82916),rt=i(3784),st=i(75196),at=i(60367);class ot{constructor(e,t,i,n,r){this.ruleMethods={"bytes-decimal":e=>{let t=0;for(;e>=1e3;)e/=1e3,t++;return"".concat(this.truncatePrecision(e)," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])},"bytes-binary":e=>{let t=0;for(;e>=1024;)e/=1024,t++;return"".concat(this.truncatePrecision(e)," ").concat(["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][t])},percentages:e=>"".concat(this.truncatePrecision(100*e),"%"),exponential:e=>{const t=e.toExponential(this.precision+2).split("e");return"".concat(this.truncatePrecision(Number(t[0])),"e").concat(t[1])}},this.truncateMethods={ceil:Math.ceil,floor:Math.floor,round:Math.round},this.isDiyParser="undefined"!==typeof r,this.content=e,this.rule=t,this.precision=i,this.truncate=n,this.parser=r}format(){return this.isDiyParser?this.parser(this.content):"text"===this.rule?lt(this.content).map((e=>ct(e)?this.truncatePrecision(e):e)).join(""):"numbers"===this.rule?lt(this.content).filter((e=>ct(e))).map((e=>this.truncatePrecision(e))).join(","):lt(this.content).map((e=>ct(e)?this.ruleMethods[this.rule](Number(e)):e)).join("")}truncatePrecision(e){const t=this.truncateMethods[this.truncate](Number(e)*Math.pow(10,this.precision))/Math.pow(10,this.precision),i=t.toString().split(".");if(1===i.length)return t.toFixed(this.precision);const n=i[1].length;return n<this.precision?"".concat(i[0],".").concat(i[1]).concat("0".repeat(this.precision-n)):t.toString()}}function lt(e){return e.match(/(-?[0-9]*\.?[0-9]+([eE]-?[0-9]+)?)|([^-\d\.]+)/g)||[]}function ct(e){return!(isNaN(Number(e))||""===e.replace(/\s+/g,""))}class ht extends o.PureComponent{formatNodeDFS(e){return Array.isArray(e)||(e=[e]),1===(e=e.map((e=>"string"===typeof e||"number"===typeof e?new ot(String(e),this.props.rule,this.props.precision,this.props.truncate,this.props.parser).format():"function"===typeof e?this.formatNodeDFS(e()):"object"===typeof e&&"children"in e.props?Object.assign(Object.assign({},e),{props:Object.assign(Object.assign({},e.props),{children:this.formatNodeDFS(e.props.children)})}):e))).length?e[0]:e}render(){const e=Object.assign({},this.props);return delete e.rule,delete e.parser,e.children=this.formatNodeDFS(this.props.children),o.createElement(at.A,Object.assign({component:"span"},e))}}ht.propTypes={rule:c().oneOf(st.P.RULE),precision:c().number,truncate:c().oneOf(st.P.TRUNCATE),parser:c().func,copyable:c().oneOfType([c().object,c().bool]),delete:c().bool,disabled:c().bool,icon:c().oneOfType([c().node,c().string]),mark:c().bool,underline:c().bool,link:c().oneOfType([c().object,c().bool]),strong:c().bool,type:c().oneOf(st.P.TYPE),size:c().oneOf(st.P.SIZE),style:c().object,className:c().string,code:c().bool,component:c().string},ht.defaultProps={rule:"text",precision:0,truncate:"round",parser:void 0,copyable:!1,delete:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};const dt=tt.A;dt.Text=it.A,dt.Title=nt.A,dt.Paragraph=rt.A,dt.Numeral=ht;const ut=dt;const pt=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M17.6568 19.7782C18.2426 20.3639 19.1924 20.3639 19.7782 19.7782C20.3639 19.1924 20.3639 18.2426 19.7782 17.6568L14.1213 12L19.7782 6.34313C20.3639 5.75734 20.3639 4.8076 19.7782 4.22181C19.1924 3.63602 18.2426 3.63602 17.6568 4.22181L12 9.87866L6.34313 4.22181C5.75734 3.63602 4.8076 3.63602 4.22181 4.22181C3.63602 4.8076 3.63602 5.75734 4.22181 6.34313L9.87866 12L4.22181 17.6568C3.63602 18.2426 3.63602 19.1924 4.22181 19.7782C4.8076 20.3639 5.75734 20.3639 6.34313 19.7782L12 14.1213L17.6568 19.7782Z",fill:"currentColor"}))}),"close");const gt=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2268 2.3986L1.52616 19.0749C0.831449 20.4064 1.79747 22 3.29933 22H20.7007C22.2025 22 23.1686 20.4064 22.4739 19.0749L13.7732 2.3986C13.0254 0.965441 10.9746 0.965442 10.2268 2.3986ZM13.1415 14.0101C13.0603 14.5781 12.5739 15 12.0001 15C11.4263 15 10.9398 14.5781 10.8586 14.0101L10.2829 9.97992C10.1336 8.93495 10.9445 8.00002 12.0001 8.00002C13.0556 8.00002 13.8665 8.93495 13.7172 9.97992L13.1415 14.0101ZM13.5001 18.5C13.5001 19.3284 12.8285 20 12.0001 20C11.1716 20 10.5001 19.3284 10.5001 18.5C10.5001 17.6716 11.1716 17 12.0001 17C12.8285 17 13.5001 17.6716 13.5001 18.5Z",fill:"currentColor"}))}),"alert_triangle");const ft=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.8831 9.82235L11.6854 17.4112C11.4029 17.7806 10.965 17.9981 10.5 18C10.035 18.0019 9.59533 17.788 9.30982 17.421L5.81604 13.4209C5.30744 12.767 5.42524 11.8246 6.07916 11.316C6.73308 10.8074 7.67549 10.9252 8.1841 11.5791L10.4838 14.0439L15.5 8C16.0032 7.34193 16.9446 7.21641 17.6027 7.71964C18.2608 8.22287 18.3863 9.16428 17.8831 9.82235Z",fill:"currentColor"}))}),"tick_circle");const mt=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7ZM9 10.75C9 10.3358 9.33579 10 9.75 10H12.5C13.0523 10 13.5 10.4477 13.5 11V16.5H14.25C14.6642 16.5 15 16.8358 15 17.25C15 17.6642 14.6642 18 14.25 18H9.75C9.33579 18 9 17.6642 9 17.25C9 16.8358 9.33579 16.5 9.75 16.5H10.5V11.5H9.75C9.33579 11.5 9 11.1642 9 10.75Z",fill:"currentColor"}))}),"info_circle");const vt=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13.5 17.5C13.5 16.6716 12.8284 16 12 16C11.1716 16 10.5 16.6716 10.5 17.5C10.5 18.3284 11.1716 19 12 19C12.8284 19 13.5 18.3284 13.5 17.5ZM12 5C10.9138 5 10.0507 5.91244 10.1109 6.99692L10.4168 12.5023C10.4635 13.3426 11.1584 14 12 14C12.8416 14 13.5365 13.3426 13.5832 12.5023L13.8891 6.99692C13.9493 5.91244 13.0862 5 12 5Z",fill:"currentColor"}))}),"alert_circle"),yt=Je.PREFIX,bt=["info","success","danger","warning"];class _t extends M.A{constructor(e){super(e),this.remove=e=>{e&&e.stopPropagation(),this.foundation.removeBanner(e)},this.state={visible:!0},(0,A.A)("target"in this.props,"[Semi Banner] 'target' has been deprecated, please write JSX directly instead.")}get adapter(){return Object.assign(Object.assign({},super.adapter),{setVisible:()=>{this.setState({visible:!1})},notifyClose:e=>{const{onClose:t}=this.props;t(e)}})}componentDidMount(){this.foundation=new et(this.adapter),this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}renderCloser(){const{closeIcon:e}=this.props;if(null===e)return e;return o.createElement($e,{className:"".concat(yt,"-close"),onClick:this.remove,icon:e||o.createElement(pt,{"x-semi-prop":"closeIcon","aria-hidden":!0}),theme:"borderless",size:"small",type:"tertiary","aria-label":"Close"})}renderIcon(){const{type:e,icon:t}=this.props;let i={warning:o.createElement(gt,{size:"large","aria-label":"warning"}),success:o.createElement(ft,{size:"large","aria-label":"success"}),info:o.createElement(mt,{size:"large","aria-label":"info"}),danger:o.createElement(vt,{size:"large","aria-label":"danger"})}[e];const n=d()({["".concat(yt,"-icon")]:!0});return"undefined"!==typeof t&&(i=t),i?o.createElement("div",{className:n,"x-semi-prop":"icon"},i):null}render(){const{children:e,type:t,className:i,style:n,bordered:r,title:s,description:a,fullMode:l}=this.props,{visible:c}=this.state,h=d()(yt,i,{["".concat(yt,"-").concat(t)]:t,["".concat(yt,"-full")]:l,["".concat(yt,"-in-container")]:!l,["".concat(yt,"-bordered")]:!l&&r});return c?o.createElement("div",Object.assign({className:h,style:n,role:"alert"},this.getDataAttr(this.props)),o.createElement("div",{className:"".concat(yt,"-content-wrapper")},o.createElement("div",{className:"".concat(yt,"-content")},this.renderIcon(),o.createElement("div",{className:"".concat(yt,"-content-body")},s?o.createElement(ut.Title,{heading:5,className:"".concat(yt,"-title"),component:"div","x-semi-prop":"title"},s):null,a?o.createElement(ut.Paragraph,{className:"".concat(yt,"-description"),component:"div","x-semi-prop":"description"},a):null)),this.renderCloser()),e?o.createElement("div",{className:"".concat(yt,"-extra"),"x-semi-prop":"children"},e):null):null}}_t.propTypes={fullMode:c().bool,type:c().oneOf(bt),title:c().node,description:c().node,icon:c().node,closeIcon:c().node,children:c().node,style:c().object,className:c().string,onClose:c().func,bordered:c().bool},_t.defaultProps={onClose:()=>{},type:"info",fullMode:!0};class xt extends o.PureComponent{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}render(){const e=Object.assign({},this.props),t=Boolean(e.icon),i=Boolean(e.loading),n=Boolean(e.disabled);return t||i&&!n?o.createElement($e,Object.assign({},e)):o.createElement(Xe,Object.assign({},e))}}xt.__SemiComponentName__="Button",xt.propTypes=Object.assign(Object.assign({},Xe.propTypes),$e.propTypes),xt.defaultProps=(0,$.bQ)(xt.__SemiComponentName__),xt.elementType="Button";const St=xt,wt={PREFIX:"".concat(p._,"-card")};var Ct=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const kt=wt.PREFIX;class At extends o.PureComponent{render(){const e=this.props,{avatar:t,className:i,description:n,style:r,title:s}=e,a=Ct(e,["avatar","className","description","style","title"]),l=d()("".concat(kt,"-meta"),i),c=t&&o.createElement("div",{className:"".concat(kt,"-meta-avatar")},t),h=s&&o.createElement("div",{className:"".concat(kt,"-meta-wrapper-title")},s),u=n&&o.createElement("div",{className:"".concat(kt,"-meta-wrapper-description")},n),p=s||n?o.createElement("div",{className:"".concat(kt,"-meta-wrapper")},h,u):null;return o.createElement("div",Object.assign({},a,{className:l,style:r}),c,p)}}At.propTypes={avatar:c().node,className:c().string,description:c().node,style:c().object,title:c().node};const Et=At,Tt={PREFIX:"".concat(p._,"-skeleton")};var Ot=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Pt=Ee,Mt=Ae,It=e=>t=>i=>o.createElement(t,Object.assign({type:e},i));class Rt extends o.PureComponent{render(){const e=this.props,{prefixCls:t,className:i,type:n,size:r,shape:s}=e,a=Ot(e,["prefixCls","className","type","size","shape"]),l=d()(i,"".concat(t,"-").concat(n),{["".concat(t,"-").concat(n,"-").concat(r)]:"AVATAR"===n.toUpperCase()},{["".concat(t,"-").concat(n,"-").concat(s)]:"AVATAR"===n.toUpperCase()});return o.createElement("div",Object.assign({className:l},a))}}Rt.propTypes={type:c().string,prefixCls:c().string,style:c().object,className:c().string,size:c().oneOf(Pt),shape:c().oneOf(Mt)},Rt.defaultProps={prefixCls:Tt.PREFIX,size:"medium",shape:"circle"};const Dt=It("avatar")(Rt),Lt=It("image")(Rt),jt=It("title")(Rt),Ft=It("button")(Rt);class Bt extends o.PureComponent{render(){const{prefixCls:e,className:t,style:i,rows:n}=this.props,r=d()(t,"".concat(e,"-paragraph"));return o.createElement("ul",{className:r,style:i},[...Array(n)].map(((e,t)=>o.createElement("li",{key:t}))))}}Bt.propTypes={rows:c().number,prefixCls:c().string,style:c().object,className:c().string},Bt.defaultProps={prefixCls:Tt.PREFIX,rows:4};var Nt=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const zt=Tt.PREFIX;class Ht extends o.PureComponent{render(){const e=this.props,{placeholder:t,active:i,children:n,className:r,loading:s,style:a}=e,l=Nt(e,["placeholder","active","children","className","loading","style"]),c=d()(zt,{["".concat(zt,"-active")]:Boolean(i)},r);let h;return h=s?o.createElement("div",Object.assign({className:c,style:a},l,{"x-semi-prop":"placeholder"}),t):n,h}}Ht.Avatar=Dt,Ht.Title=jt,Ht.Button=Ft,Ht.Paragraph=Bt,Ht.Image=Lt,Ht.defaultProps={loading:!0},Ht.propTypes={active:c().bool,placeholder:c().node,style:c().object,className:c().string,loading:c().bool,children:c().node};const Vt=Ht;var Ut=i(54052),Wt=i.n(Ut);const Gt={PREFIX:"".concat(p._,"-space")},Kt=["start","end","center","baseline"],Yt="loose",Xt="medium",qt="tight",Zt=e=>{let t=[];return o.Children.forEach(e,(e=>{void 0!==e&&null!==e&&(Array.isArray(e)?t=t.concat(Zt(e)):(0,o.isValidElement)(e)&&e.type&&"Symbol(react.fragment)"===e.type.toString()&&e.props?t=t.concat(Zt(e.props.children)):t.push(e))})),t};var Qt=i(73090);const $t=Gt.PREFIX;class Jt extends o.PureComponent{render(){const{children:e=null,style:t,className:i,spacing:n,wrap:r,align:s,vertical:a}=this.props,l=(!r||!a)&&r,c=Object.assign({},t);let h="",u="";C()(n)?(h=n,u=n):S()(n)?(c.rowGap=n,c.columnGap=n):Wt()(n)&&(C()(n[0])?h=n[0]:S()(n[0])&&(c.columnGap="".concat(n[0],"px")),C()(n[1])?u=n[1]:S()(n[1])&&(c.rowGap="".concat(n[1],"px")));const p=d()($t,i,{["".concat($t,"-align-").concat(s)]:s,["".concat($t,"-vertical")]:a,["".concat($t,"-horizontal")]:!a,["".concat($t,"-wrap")]:l,["".concat($t,"-tight-horizontal")]:h===qt,["".concat($t,"-tight-vertical")]:u===qt,["".concat($t,"-medium-horizontal")]:h===Xt,["".concat($t,"-medium-vertical")]:u===Xt,["".concat($t,"-loose-horizontal")]:h===Yt,["".concat($t,"-loose-vertical")]:u===Yt}),g=Zt(e),f=(0,Qt.A)(this.props);return o.createElement("div",Object.assign({},f,{className:p,style:c,"x-semi-prop":"children"}),g)}}Jt.propTypes={wrap:c().bool,align:c().oneOf(Kt),vertical:c().bool,spacing:c().oneOfType([c().string,c().number,c().array]),children:c().node,style:c().object,className:c().string},Jt.defaultProps={vertical:!1,wrap:!1,spacing:"tight",align:"center"};const ei=Jt;var ti=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const ii=wt.PREFIX;class ni extends o.PureComponent{constructor(){super(...arguments),this.renderHeader=()=>{const{title:e,headerExtraContent:t,header:i,headerLine:n,headerStyle:r}=this.props,s=d()("".concat(ii,"-header"),{["".concat(ii,"-header-bordered")]:Boolean(n)}),a=d()("".concat(ii,"-header-wrapper")),l=d()("".concat(ii,"-header-wrapper-title"),{["".concat(ii,"-header-wrapper-spacing")]:Boolean(t)});return i||t||e?o.createElement("div",{style:r,className:s},i||o.createElement("div",{className:a},t&&o.createElement("div",{className:"".concat(ii,"-header-wrapper-extra"),"x-semi-prop":"headerExtraContent"},t),e&&o.createElement("div",{className:l},C()(e)?o.createElement(ut.Title,{heading:6,ellipsis:{showTooltip:!0,rows:1},"x-semi-prop":"title"},e):e))):null},this.renderCover=()=>{const{cover:e}=this.props,t=d()("".concat(ii,"-cover"));return e&&o.createElement("div",{className:t,"x-semi-prop":"cover"},e)},this.renderBody=()=>{const{bodyStyle:e,children:t,actions:i,loading:n}=this.props,r=d()("".concat(ii,"-body")),s=d()("".concat(ii,"-body-actions")),a=d()("".concat(ii,"-body-actions-item")),l=o.createElement("div",null,o.createElement(Vt.Title,null),o.createElement("br",null),o.createElement(Vt.Paragraph,{rows:3}));return o.createElement("div",{style:e,className:r},t&&o.createElement(Vt,{placeholder:l,loading:n,active:!0},t),Array.isArray(i)&&o.createElement("div",{className:s},o.createElement(ei,{spacing:12},i.map(((e,t)=>o.createElement("div",{key:t,className:a,"x-semi-prop":"actions.".concat(t)},e))))))},this.renderFooter=()=>{const{footer:e,footerLine:t,footerStyle:i}=this.props,n=d()("".concat(ii,"-footer"),{["".concat(ii,"-footer-bordered")]:t});return e&&o.createElement("div",{style:i,className:n,"x-semi-prop":"footer"},e)}}render(){const e=this.props,{bordered:t,shadows:i,style:n,className:r}=e,s=ti(e,["bordered","shadows","style","className"]),a=Ue()(s,["actions","bodyStyle","cover","headerExtraContent","footer","footerLine","footerStyle","header","headerLine","headerStyle","loading","title"]),l=d()(ii,r,{["".concat(ii,"-bordered")]:t,["".concat(ii,"-shadows")]:i,["".concat(ii,"-shadows-").concat(i)]:i});return o.createElement("div",Object.assign({},a,{"aria-busy":this.props.loading,className:l,style:n}),this.renderHeader(),this.renderCover(),this.renderBody(),this.renderFooter())}}ni.Meta=Et,ni.propTypes={actions:c().array,bodyStyle:c().object,bordered:c().bool,children:c().node,className:c().string,cover:c().node,footer:c().node,footerLine:c().bool,footerStyle:c().object,header:c().node,headerExtraContent:c().node,headerLine:c().bool,headerStyle:c().object,loading:c().bool,shadows:c().oneOf(["hover","always"]),style:c().object,title:c().node,"aria-label":c().string},ni.defaultProps={bordered:!0,footerLine:!1,headerLine:!0,loading:!1};const ri=ni;var si=i(96361),ai=i.n(si);const oi={PREFIX:"".concat(p._,"-checkbox"),INNER:"".concat(p._,"-checkbox-inner"),TEXT:"".concat(p._,"-checkbox-text"),INPUT:"".concat(p._,"-checkbox-input"),CHECKED:"".concat(p._,"-checkbox-checked"),DISABLED:"".concat(p._,"-checkbox-disabled"),BUTTON:"".concat(p._,"-checkbox-button"),WRAPPER:""},li={PREFIX:"".concat(p._,"-checkboxGroup"),INNER:"".concat(p._,"-checkboxGroup-inner"),TEXT:"".concat(p._,"-checkboxGroup-text"),INPUT:"".concat(p._,"-checkboxGroup-input"),CHECKED:"".concat(p._,"-checkboxGroup-checked"),DISABLED:"".concat(p._,"-checkboxGroup-disabled")},ci=["horizontal","vertical"],hi="default",di="card",ui="pureCard",pi="vertical";var gi=i(9640);class fi extends k.A{constructor(e){super(Object.assign({},e)),this.clickState=!1,this.handleFocusVisible=e=>{const{target:t}=e;try{if(this.clickState)return void(this.clickState=!1);t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(i){(0,A.A)(!0,"Warning: [Semi Checkbox] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this.clickState=!1,this._adapter.setFocusVisible(!1)}}init(){const{children:e,extra:t,extraId:i,addonId:n}=this.getProps();e&&!n&&this._adapter.setAddonId(),t&&!i&&this._adapter.setExtraId()}notifyChange(e,t){const i=this._adapter.generateEvent(e,t);this._adapter.notifyChange(i)}handleChange(e){if(this.getProp("disabled"))return;"click"===(null===e||void 0===e?void 0:e.type)&&(this.clickState=!0),this._adapter.focusCheckboxEntity();if(this._adapter.getIsInGroup()){return void(this._adapter.getGroupDisabled()||this.handleChangeInGroup(e))}const t=!this.getState("checked");this._isControlledComponent("checked")||this.setChecked(t),this.notifyChange(t,e)}handleChangeInGroup(e){const{value:t}=this.getProps(),i=!this._adapter.getGroupValue().includes(t),n=this._adapter.generateEvent(i,e);this._adapter.notifyChange(n),this._adapter.notifyGroupChange(n)}handleEnterPress(e){(0,gi.A)(e)&&this.handleChange(e)}setChecked(e){this._adapter.setNativeControlChecked(e)}destroy(){}}const mi=fi,vi=o.createContext({});const yi=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.4111 7.30848C18.0692 7.81171 18.1947 8.75312 17.6915 9.41119L11.1915 17.9112C10.909 18.2806 10.4711 18.4981 10.0061 18.5C9.54105 18.5019 9.10143 18.288 8.81592 17.9209L5.31592 13.4209C4.80731 12.767 4.92512 11.8246 5.57904 11.316C6.23296 10.8074 7.17537 10.9252 7.68398 11.5791L9.98988 14.5438L15.3084 7.58884C15.8116 6.93077 16.7531 6.80525 17.4111 7.30848Z",fill:"currentColor"}))}),"checkbox_tick");const bi=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M5 12.5C5 11.6716 5.67157 11 6.5 11H17.5C18.3284 11 19 11.6716 19 12.5C19 13.3284 18.3284 14 17.5 14H6.5C5.67157 14 5 13.3284 5 12.5Z",fill:"currentColor"}))}),"checkbox_indeterminate");class _i extends o.PureComponent{blur(){this.inputEntity.blur()}focus(){const{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}render(){const{indeterminate:e,checked:t,disabled:i,prefixCls:n,name:s,isPureCardType:a,addonId:l,extraId:c,focusInner:h,onInputFocus:u,onInputBlur:p}=this.props,g=n||oi.PREFIX,f=d()({["".concat(g,"-inner")]:!0,["".concat(g,"-inner-checked")]:Boolean(t),["".concat(g,"-inner-pureCardType")]:a},oi.WRAPPER),m=d()({["".concat(g,"-inner-display")]:!0,["".concat(g,"-focus")]:h,["".concat(g,"-focus-border")]:h&&!t}),v=t?o.createElement(yi,null):e?o.createElement(bi,null):null,y={type:"checkbox","aria-label":this.props["aria-label"],"aria-disabled":i,"aria-checked":t,"aria-labelledby":l,"aria-describedby":c||this.props["aria-describedby"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-required":this.props["aria-required"],className:oi.INPUT,onChange:r(),checked:t,disabled:i,onFocus:u,onBlur:p};return s&&(y.name=s),o.createElement("span",{className:f},o.createElement("input",Object.assign({},y,{ref:e=>{this.inputEntity=e}})),o.createElement("span",{className:m},v))}}_i.contextType=vi,_i.propTypes={"aria-describedby":c().string,"aria-errormessage":c().string,"aria-invalid":c().bool,"aria-labelledby":c().string,"aria-required":c().bool,checked:c().bool,disabled:c().bool,onChange:c().func,children:c().node,grouped:c().bool,value:c().any,isPureCardType:c().bool,addonId:c().string,extraId:c().string,focusInner:c().bool,onInputFocus:c().func,onInputBlur:c().func,preventScroll:c().bool},_i.defaultProps={onChange:r()};const xi=_i;class Si extends M.A{get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{const{onChange:t}=this.props;t&&t(e)},generateEvent:(e,t)=>{const{props:i}=this;return{target:Object.assign(Object.assign({},i),{checked:e}),stopPropagation:()=>{t.stopPropagation()},preventDefault:()=>{t.preventDefault()},nativeEvent:{stopImmediatePropagation:()=>{t.nativeEvent&&"function"===typeof t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation()}}}},getIsInGroup:()=>this.isInGroup(),getGroupValue:()=>this.context&&this.context.checkboxGroup.value||[],notifyGroupChange:e=>{this.context.checkboxGroup.onChange(e)},getGroupDisabled:()=>this.context&&this.context.checkboxGroup.disabled,setAddonId:()=>{this.setState({addonId:(0,Ie.Ae)({prefix:"addon"})})},setExtraId:()=>{this.setState({extraId:(0,Ie.Ae)({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})},focusCheckboxEntity:()=>{this.focus()}})}constructor(e){super(e),this.handleChange=e=>this.foundation.handleChange(e),this.handleEnterPress=e=>this.foundation.handleEnterPress(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()};this.state={checked:e.checked||e.defaultChecked||!1,addonId:e.addonId,extraId:e.extraId,focusVisible:!1},this.checkboxEntity=null,this.foundation=new mi(this.adapter)}componentDidUpdate(e){this.props.checked!==e.checked&&(_()(this.props.checked)?this.foundation.setChecked(!1):ai()(this.props.checked)&&this.foundation.setChecked(this.props.checked))}isInGroup(){return Boolean(this.context&&this.context.checkboxGroup&&"value"in this.props)}focus(){this.checkboxEntity&&this.checkboxEntity.focus()}blur(){this.checkboxEntity&&this.checkboxEntity.blur()}render(){const{disabled:e,style:t,prefixCls:i,className:n,indeterminate:r,children:s,onMouseEnter:a,onMouseLeave:l,extra:c,value:h,role:u,tabIndex:p,id:g,type:f}=this.props,{checked:m,addonId:v,extraId:y,focusVisible:b}=this.state,_={checked:m,disabled:e},x=this.isInGroup();if(x){if(this.context.checkboxGroup.value){const e=(this.context.checkboxGroup.value||[]).includes(h);_.checked=e}this.context.checkboxGroup.disabled&&(_.disabled=this.context.checkboxGroup.disabled||this.props.disabled);const{isCardType:e,isPureCardType:t}=this.context.checkboxGroup;_.isCardType=e,_.isPureCardType=t,_.name=this.context.checkboxGroup.name}else _.isPureCardType=f===ui,_.isCardType=f===di||_.isPureCardType;const S=i||oi.PREFIX,w=_.isCardType||_.isPureCardType,C=d()(S,{["".concat(S,"-disabled")]:_.disabled,["".concat(S,"-indeterminate")]:r,["".concat(S,"-checked")]:_.checked,["".concat(S,"-unChecked")]:!_.checked,["".concat(S,"-cardType")]:_.isCardType,["".concat(S,"-cardType_disabled")]:_.disabled&&_.isCardType,["".concat(S,"-cardType_unDisabled")]:!(_.disabled&&_.isCardType),["".concat(S,"-cardType_checked")]:_.isCardType&&_.checked&&!_.disabled,["".concat(S,"-cardType_checked_disabled")]:_.isCardType&&_.checked&&_.disabled,[n]:Boolean(n),["".concat(S,"-focus")]:b&&w}),k=d()("".concat(S,"-extra"),{["".concat(S,"-cardType_extra_noChildren")]:_.isCardType&&!s}),A=(x&&this.context.checkboxGroup.name,this.props["x-semi-children-alias"]||"children");return o.createElement("span",Object.assign({role:u,tabIndex:p,style:t,className:C,id:g,onMouseEnter:a,onMouseLeave:l,onClick:this.handleChange,onKeyPress:this.handleEnterPress,"aria-labelledby":this.props["aria-labelledby"]},this.getDataAttr(this.props)),o.createElement(xi,Object.assign({},this.props,_,{addonId:s&&v,extraId:c&&y,isPureCardType:_.isPureCardType,ref:e=>{this.checkboxEntity=e},focusInner:b&&!w,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),s||c?o.createElement("div",{className:"".concat(S,"-content")},s?o.createElement("span",{id:v,className:"".concat(S,"-addon"),"x-semi-prop":A},s):null,c?o.createElement("div",{id:y,className:k,"x-semi-prop":"extra"},c):null):null)}}Si.contextType=vi,Si.propTypes={"aria-describedby":c().string,"aria-errormessage":c().string,"aria-invalid":c().bool,"aria-labelledby":c().string,"aria-required":c().bool,checked:c().bool,defaultChecked:c().bool,disabled:c().bool,indeterminate:c().bool,onChange:c().func,value:c().any,style:c().object,className:c().string,prefixCls:c().string,onMouseEnter:c().func,onMouseLeave:c().func,extra:c().node,index:c().number,"aria-label":c().string,tabIndex:c().number,preventScroll:c().bool,type:c().string},Si.defaultProps={defaultChecked:!1,indeterminate:!1,onChange:r(),onMouseEnter:r(),onMouseLeave:r(),type:"default"},Si.elementType="Checkbox";const wi=Si;class Ci extends k.A{static get checkboxGroupDefaultAdapter(){return{}}constructor(e){super(Object.assign(Object.assign({},Ci.checkboxGroupDefaultAdapter),e))}init(){const{defaultValue:e,value:t}=this.getProps();"undefined"===typeof e||Array.isArray(e)||(0,A.A)(!0,"Warning: [Semi CheckboxGroup] defaultValue should be an Array"),"undefined"===typeof t||Array.isArray(t)||(0,A.A)(!0,"Warning: [Semi CheckboxGroup] value should be an Array")}notifyChange(e){this._adapter.notifyChange(e)}handleChange(e){const t=this.getState("value");let i=[];Array.isArray(t)||(i=[t]),i=e.target.checked?[...t,e.target.value]:t.filter(((t,i)=>t!==e.target.value));"value"in this.getProps()||this._adapter.updateGroupValue(i),this.notifyChange(i)}getFormatName(){return this.getProp("name")||"default"}handlePropValueChange(e){Array.isArray(e)?this._adapter.updateGroupValue(e):("undefined"===typeof e&&this._adapter.updateGroupValue([]),(0,A.A)(!0,"Warning: [Semi CheckboxGroup] value should be an Array"))}destroy(){}}const ki=Ci;class Ai extends M.A{get adapter(){return Object.assign(Object.assign({},super.adapter),{updateGroupValue:e=>{this.setState({value:e})},notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}constructor(e){super(e),this.state={value:e.value||e.defaultValue},this.foundation=new ki(this.adapter),this.onChange=this.onChange.bind(this)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){a()(e.value,this.props.value)||this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}onChange(e){this.foundation.handleChange(e)}render(){const{children:e,options:t,prefixCls:i,direction:n,className:r,id:s,style:a,type:l,disabled:c}=this.props,h=l===ui,u=l===di||h,p=i||li.PREFIX,g=d()({[p]:!0,["".concat(p,"-wrapper")]:!0,["".concat(p,"-").concat(n)]:n,["".concat(p,"-").concat(n,"-cardType")]:n&&u,["".concat(p,"-").concat(n,"-pureCardType")]:n&&h},r),f=this.state.value.slice();let m;return t?m=(t||[]).map(((e,t)=>"string"===typeof e?o.createElement(wi,{role:"listitem",key:t,disabled:this.props.disabled,value:e,prefixCls:i},e):o.createElement(wi,{role:"listitem",key:t,disabled:e.disabled||this.props.disabled,value:e.value,prefixCls:i,extra:e.extra,className:e.className,style:e.style,onChange:e.onChange},e.label))):e&&(m=o.Children.toArray(e).map(((e,t)=>o.cloneElement(e,{key:t,role:"listitem"})))),o.createElement("div",Object.assign({id:s,role:"list","aria-label":this.props["aria-label"],className:g,style:a,"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"]},this.getDataAttr(this.props)),o.createElement(vi.Provider,{value:{checkboxGroup:{onChange:this.onChange,value:f,disabled:this.props.disabled,name:this.foundation.getFormatName(),isCardType:u,isPureCardType:h}}},m))}}Ai.propTypes={"aria-describedby":c().string,"aria-errormessage":c().string,"aria-invalid":c().bool,"aria-labelledby":c().string,"aria-required":c().bool,defaultValue:c().array,disabled:c().bool,name:c().string,options:c().array,value:c().array,onChange:c().func,children:c().node,prefixCls:c().string,direction:c().oneOf(ci),className:c().string,type:c().oneOf([hi,di,ui]),style:c().object},Ai.defaultProps={disabled:!1,onChange:()=>{},type:hi,defaultValue:[],direction:pi};const Ei=Ai;class Ti extends wi{}Ti.Group=Ei;const Oi=Ti;var Pi=i(26727),Mi=i.n(Pi),Ii=i(16940),Ri=i.n(Ii),Di=i(615),Li=i.n(Di),ji=(i(62117),i(33097)),Fi=i.n(ji);const Bi=e=>{const t=Li()(e);return!(S()(e)&&1===t.length)&&Number.isInteger(+t[t.length-1])};function Ni(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length)return;const n=Fi()(e,t);(Array.isArray(n)&&n.every((e=>null==e))||function(e){if(y()(e)){const t=Mi()(e);return!t.length||t.every((e=>"undefined"===typeof e))}return!1}(n))&&Ri()(e,t),Ni(e,t.slice(0,t.length-1),i)}function zi(e,t){return Fi()(e,t)}function Hi(e,t){Ri()(e,t);let i=Li()(t);i=i.slice(0,i.length-1),Ni(e,i,!1)}function Vi(e,t,i,n){if(n)return Y()(e,t,i);if(void 0!==i)return Y()(e,t,i);if(Bi(t)&&void 0!==zi(e,t)){Y()(e,t,void 0);let i=Li()(t);i=i.slice(0,i.length-1),Ni(e,i,!1)}else Bi(t)||void 0===zi(e,t)||Hi(e,t)}function Ui(e,t){return!e||"function"!==typeof e&&"object"!==typeof e||!t||"function"!==typeof t&&"object"!==typeof t||Object.entries(t).forEach((t=>{let[i,n]=t;e[i]=n})),e}const Wi={DAY_TODAY:"".concat(p._,"-datepicker-day-today"),DAY_IN_RANGE:"".concat(p._,"-datepicker-day-inrange"),DAY_HOVER:"".concat(p._,"-datepicker-day-inhover"),DAY_SELECTED:"".concat(p._,"-datepicker-day-selected"),DAY_SELECTED_START:"".concat(p._,"-datepicker-day-selected-start"),DAY_SELECTED_END:"".concat(p._,"-datepicker-day-selected-end"),DAY_DISABLED:"".concat(p._,"-datepicker-day-disabled"),DAY_HOVER_DAY:"".concat(p._,"-datepicker-day-hoverday"),DAY_HOVER_DAY_OFFSET:"".concat(p._,"-datepicker-day-hoverday-offset"),DAY_IN_OFFSET_RANGE:"".concat(p._,"-datepicker-day-inoffsetrange"),DAY_SELECTED_RANGE_HOVER:"".concat(p._,"-datepicker-day-selectedrange-hover"),DAY_OFFSET_RANGE_START:"".concat(p._,"-datepicker-day-offsetrange-start"),DAY_OFFSET_RANGE_END:"".concat(p._,"-datepicker-day-offsetrange-end"),DAY_SELECTED_START_AFTER_HOVER:"".concat(p._,"-datepicker-day-selected-start-afterhover"),DAY_SELECTED_END_BEFORE_HOVER:"".concat(p._,"-datepicker-day-selected-end-beforehover"),DAY_HOVER_DAY_BEFORE_RANGE:"".concat(p._,"-datepicker-day-hoverday-beforerange"),DAY_HOVER_DAY_AFTER_RANGE:"".concat(p._,"-datepicker-day-hoverday-afterrange"),DAY_HOVER_DAY_IN_RANGE:"".concat(p._,"-datepicker-day-hoverday-inrange"),DAY_HOVER_DAY_AROUND_SINGLE_SELECTED:"".concat(p._,"-datepicker-day-hoverday-around-singleselected")},Gi=Object.assign({PREFIX:"".concat(p._,"-datepicker"),NAVIGATION:"".concat(p._,"-datepicker-navigation"),PANEL_YAM:"".concat(p._,"-datepicker-panel-yam"),MONTH:"".concat(p._,"-datepicker-month"),WEEKDAY:"".concat(p._,"-datepicker-weekday"),WEEKS:"".concat(p._,"-datepicker-weeks"),WEEK:"".concat(p._,"-datepicker-week"),DAY:"".concat(p._,"-datepicker-day")},Wi),Ki=Object.assign({DEFAULT_SEPARATOR_MULTIPLE:",",DEFAULT_SEPARATOR_RANGE:" ~ ",SIZE_SET:["small","default","large"],TYPE_SET:["date","dateRange","year","month","monthRange","dateTime","dateTimeRange"],PRESET_POSITION_SET:["left","right","top","bottom"],DENSITY_SET:["default","compact"],PANEL_TYPE_LEFT:"left",PANEL_TYPE_RIGHT:"right",STATUS:g,POSITION_SET:P.P$.POSITION_SET,POSITION_INLINE_INPUT:"leftTopOver"},{FORMAT_FULL_DATE:"yyyy-MM-dd",FORMAT_TIME_PICKER:"HH:mm:ss",FORMAT_DATE_TIME:"yyyy-MM-dd HH:mm:ss",FORMAT_YEAR_MONTH:"yyyy-MM"}),Yi={WEEK_START_ON:0,WEEK_HEIGHT:36,SPACING:P.nL.SPACING,SPACING_INSET_INPUT:1};var Xi=i(22616),qi=i.n(Xi),Zi=i(93085),Qi=i.n(Zi),$i=i(60014),Ji=i.n($i),en=i(6711),tn=i(82284),nn=i(43666);function rn(e){return(0,nn.A)(1,arguments),e instanceof Date||"object"===(0,tn.A)(e)&&"[object Date]"===Object.prototype.toString.call(e)}var sn=i(16260);function an(e){if((0,nn.A)(1,arguments),!rn(e)&&"number"!==typeof e)return!1;var t=(0,sn.A)(e);return!isNaN(Number(t))}function on(e){(0,nn.A)(1,arguments);var t=(0,sn.A)(e);return t.setMilliseconds(0),t}function ln(e,t){(0,nn.A)(2,arguments);var i=on(e),n=on(t);return i.getTime()===n.getTime()}function cn(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e),n=(0,sn.A)(t);return i.getTime()===n.getTime()}var hn=i(58355);function dn(e,t){return(0,nn.A)(2,arguments),function(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e).getTime(),n=(0,hn.A)(t);return new Date(i+n)}(e,-(0,hn.A)(t))}function un(e){(0,nn.A)(1,arguments);var t=(0,sn.A)(e),i=t.getUTCDay(),n=(i<1?7:0)+i-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function pn(e){(0,nn.A)(1,arguments);var t=(0,sn.A)(e),i=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(i+1,0,4),n.setUTCHours(0,0,0,0);var r=un(n),s=new Date(0);s.setUTCFullYear(i,0,4),s.setUTCHours(0,0,0,0);var a=un(s);return t.getTime()>=r.getTime()?i+1:t.getTime()>=a.getTime()?i:i-1}var gn=6048e5;function fn(e){(0,nn.A)(1,arguments);var t=(0,sn.A)(e),i=un(t).getTime()-function(e){(0,nn.A)(1,arguments);var t=pn(e),i=new Date(0);return i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0),un(i)}(t).getTime();return Math.round(i/gn)+1}var mn=i(89511),vn=i(92239);function yn(e,t){var i,n,r,s,a,o,l,c;(0,nn.A)(1,arguments);var h=(0,sn.A)(e),d=h.getUTCFullYear(),u=(0,vn.q)(),p=(0,hn.A)(null!==(i=null!==(n=null!==(r=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(o=a.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==r?r:u.firstWeekContainsDate)&&void 0!==n?n:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==i?i:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(d+1,0,p),g.setUTCHours(0,0,0,0);var f=(0,mn.A)(g,t),m=new Date(0);m.setUTCFullYear(d,0,p),m.setUTCHours(0,0,0,0);var v=(0,mn.A)(m,t);return h.getTime()>=f.getTime()?d+1:h.getTime()>=v.getTime()?d:d-1}var bn=6048e5;function _n(e,t){(0,nn.A)(1,arguments);var i=(0,sn.A)(e),n=(0,mn.A)(i,t).getTime()-function(e,t){var i,n,r,s,a,o,l,c;(0,nn.A)(1,arguments);var h=(0,vn.q)(),d=(0,hn.A)(null!==(i=null!==(n=null!==(r=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(o=a.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==r?r:h.firstWeekContainsDate)&&void 0!==n?n:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==i?i:1),u=yn(e,t),p=new Date(0);return p.setUTCFullYear(u,0,d),p.setUTCHours(0,0,0,0),(0,mn.A)(p,t)}(i,t).getTime();return Math.round(n/bn)+1}function xn(e,t){for(var i=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return i+n}var Sn={y:function(e,t){var i=e.getUTCFullYear(),n=i>0?i:1-i;return xn("yy"===t?n%100:n,t.length)},M:function(e,t){var i=e.getUTCMonth();return"M"===t?String(i+1):xn(i+1,2)},d:function(e,t){return xn(e.getUTCDate(),t.length)},a:function(e,t){var i=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h:function(e,t){return xn(e.getUTCHours()%12||12,t.length)},H:function(e,t){return xn(e.getUTCHours(),t.length)},m:function(e,t){return xn(e.getUTCMinutes(),t.length)},s:function(e,t){return xn(e.getUTCSeconds(),t.length)},S:function(e,t){var i=t.length,n=e.getUTCMilliseconds();return xn(Math.floor(n*Math.pow(10,i-3)),t.length)}};const wn=Sn;var Cn="midnight",kn="noon",An="morning",En="afternoon",Tn="evening",On="night",Pn={G:function(e,t,i){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});default:return i.era(n,{width:"wide"})}},y:function(e,t,i){if("yo"===t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return i.ordinalNumber(r,{unit:"year"})}return wn.y(e,t)},Y:function(e,t,i,n){var r=yn(e,n),s=r>0?r:1-r;return"YY"===t?xn(s%100,2):"Yo"===t?i.ordinalNumber(s,{unit:"year"}):xn(s,t.length)},R:function(e,t){return xn(pn(e),t.length)},u:function(e,t){return xn(e.getUTCFullYear(),t.length)},Q:function(e,t,i){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return xn(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,i){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return xn(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,i){var n=e.getUTCMonth();switch(t){case"M":case"MM":return wn.M(e,t);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,i){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return xn(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,i,n){var r=_n(e,n);return"wo"===t?i.ordinalNumber(r,{unit:"week"}):xn(r,t.length)},I:function(e,t,i){var n=fn(e);return"Io"===t?i.ordinalNumber(n,{unit:"week"}):xn(n,t.length)},d:function(e,t,i){return"do"===t?i.ordinalNumber(e.getUTCDate(),{unit:"date"}):wn.d(e,t)},D:function(e,t,i){var n=function(e){(0,nn.A)(1,arguments);var t=(0,sn.A)(e),i=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=i-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?i.ordinalNumber(n,{unit:"dayOfYear"}):xn(n,t.length)},E:function(e,t,i){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,i,n){var r=e.getUTCDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return xn(s,2);case"eo":return i.ordinalNumber(s,{unit:"day"});case"eee":return i.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,i,n){var r=e.getUTCDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return xn(s,t.length);case"co":return i.ordinalNumber(s,{unit:"day"});case"ccc":return i.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(r,{width:"narrow",context:"standalone"});case"cccccc":return i.day(r,{width:"short",context:"standalone"});default:return i.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,i){var n=e.getUTCDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return xn(r,t.length);case"io":return i.ordinalNumber(r,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,i){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,i){var n,r=e.getUTCHours();switch(n=12===r?kn:0===r?Cn:r/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,i){var n,r=e.getUTCHours();switch(n=r>=17?Tn:r>=12?En:r>=4?An:On,t){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,i){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),i.ordinalNumber(n,{unit:"hour"})}return wn.h(e,t)},H:function(e,t,i){return"Ho"===t?i.ordinalNumber(e.getUTCHours(),{unit:"hour"}):wn.H(e,t)},K:function(e,t,i){var n=e.getUTCHours()%12;return"Ko"===t?i.ordinalNumber(n,{unit:"hour"}):xn(n,t.length)},k:function(e,t,i){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?i.ordinalNumber(n,{unit:"hour"}):xn(n,t.length)},m:function(e,t,i){return"mo"===t?i.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):wn.m(e,t)},s:function(e,t,i){return"so"===t?i.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):wn.s(e,t)},S:function(e,t){return wn.S(e,t)},X:function(e,t,i,n){var r=(n._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return In(r);case"XXXX":case"XX":return Rn(r);default:return Rn(r,":")}},x:function(e,t,i,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return In(r);case"xxxx":case"xx":return Rn(r);default:return Rn(r,":")}},O:function(e,t,i,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Mn(r,":");default:return"GMT"+Rn(r,":")}},z:function(e,t,i,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Mn(r,":");default:return"GMT"+Rn(r,":")}},t:function(e,t,i,n){var r=n._originalDate||e;return xn(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,i,n){return xn((n._originalDate||e).getTime(),t.length)}};function Mn(e,t){var i=e>0?"-":"+",n=Math.abs(e),r=Math.floor(n/60),s=n%60;if(0===s)return i+String(r);var a=t||"";return i+String(r)+a+xn(s,2)}function In(e,t){return e%60===0?(e>0?"-":"+")+xn(Math.abs(e)/60,2):Rn(e,t)}function Rn(e,t){var i=t||"",n=e>0?"-":"+",r=Math.abs(e);return n+xn(Math.floor(r/60),2)+i+xn(r%60,2)}const Dn=Pn;var Ln=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},jn=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Fn={p:jn,P:function(e,t){var i,n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Ln(e,t);switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",Ln(r,t)).replace("{{time}}",jn(s,t))}};const Bn=Fn;function Nn(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var zn=["D","DD"],Hn=["YY","YYYY"];function Vn(e){return-1!==zn.indexOf(e)}function Un(e){return-1!==Hn.indexOf(e)}function Wn(e,t,i){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Gn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const Kn=function(e,t,i){var n,r=Gn[e];return n="string"===typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),null!==i&&void 0!==i&&i.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n};var Yn=i(15258);const Xn={date:(0,Yn.A)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,Yn.A)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,Yn.A)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var qn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const Zn=function(e,t,i,n){return qn[e]};var Qn=i(39344),$n={ordinalNumber:function(e,t){var i=Number(e),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:(0,Qn.A)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,Qn.A)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,Qn.A)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,Qn.A)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,Qn.A)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};const Jn=$n;var er=i(84240),tr={ordinalNumber:(0,i(64734).A)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,er.A)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,er.A)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,er.A)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,er.A)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,er.A)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const ir={code:"en-US",formatDistance:Kn,formatLong:Xn,formatRelative:Zn,localize:Jn,match:tr,options:{weekStartsOn:0,firstWeekContainsDate:1}};var nr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sr=/^'([^]*?)'?$/,ar=/''/g,or=/[a-zA-Z]/;function lr(e,t,i){var n,r,s,a,o,l,c,h,d,u,p,g,f,m,v,y,b,_;(0,nn.A)(2,arguments);var x=String(t),S=(0,vn.q)(),w=null!==(n=null!==(r=null===i||void 0===i?void 0:i.locale)&&void 0!==r?r:S.locale)&&void 0!==n?n:ir,C=(0,hn.A)(null!==(s=null!==(a=null!==(o=null!==(l=null===i||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==l?l:null===i||void 0===i||null===(c=i.locale)||void 0===c||null===(h=c.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==o?o:S.firstWeekContainsDate)&&void 0!==a?a:null===(d=S.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=(0,hn.A)(null!==(p=null!==(g=null!==(f=null!==(m=null===i||void 0===i?void 0:i.weekStartsOn)&&void 0!==m?m:null===i||void 0===i||null===(v=i.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==f?f:S.weekStartsOn)&&void 0!==g?g:null===(b=S.locale)||void 0===b||null===(_=b.options)||void 0===_?void 0:_.weekStartsOn)&&void 0!==p?p:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var A=(0,sn.A)(e);if(!an(A))throw new RangeError("Invalid time value");var E=dn(A,Nn(A)),T={firstWeekContainsDate:C,weekStartsOn:k,locale:w,_originalDate:A},O=x.match(rr).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Bn[t])(e,w.formatLong):e})).join("").match(nr).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return function(e){var t=e.match(sr);if(!t)return e;return t[1].replace(ar,"'")}(n);var s=Dn[r];if(s)return null!==i&&void 0!==i&&i.useAdditionalWeekYearTokens||!Un(n)||Wn(n,t,String(e)),null!==i&&void 0!==i&&i.useAdditionalDayOfYearTokens||!Vn(n)||Wn(n,t,String(e)),s(E,n,w.localize,T);if(r.match(or))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return O}function cr(e){return e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e)}function hr(e){return("number"===typeof(t=e)||"[object Number]"===Object.prototype.toString.call(t))&&cr(new Date(e));var t}var dr=i(45288);const ur=[[-11,["Pacific/Midway"]],[-10,["Pacific/Honolulu"]],[-9.5,["Pacific/Marquesas"]],[-9,["Pacific/Gambier"]],[-8,["Pacific/Pitcairn"]],[-7,["America/Phoenix"]],[-6,["America/Tegucigalpa"]],[-5,["America/Bogota"]],[-4,["America/Puerto_Rico"]],[-3.5,["America/St_Johns"]],[-3,["America/Montevideo"]],[-2,["Atlantic/South_Georgia"]],[-1,["Atlantic/Cape_Verde"]],[0,["Africa/Accra"]],[1,["Africa/Bangui"]],[2,["Africa/Cairo"]],[3,["Asia/Bahrain","Indian/Antananarivo"]],[3.5,["Asia/Tehran"]],[4,["Asia/Dubai","Asia/Muscat"]],[4.5,["Asia/Kabul"]],[5,["Asia/Samarkand","Asia/Karachi"]],[5.5,["Asia/Kolkata"]],[5.75,["Asia/Kathmandu"]],[6,["Asia/Dhaka"]],[6.5,["Asia/Rangoon","Asia/Rangoon"]],[7,["Asia/Jakarta","Asia/Phnom_Penh","Asia/Bangkok"]],[8,["Asia/Shanghai","Asia/Singapore"]],[8.75,["Australia/Eucla"]],[9,["Asia/Tokyo","Asia/Seoul","Asia/Pyongyang"]],[9.5,["Australia/Darwin"]],[10,["Pacific/Guam"]],[10.5,["Australia/Adelaide"]],[11,["Pacific/Guadalcanal"]],[12,["Pacific/Funafuti"]],[13,["Pacific/Enderbury"]],[13.75,["Pacific/Chatham"]],[14,["Pacific/Kiritimati"]]],pr={0:"Etc/GMT",1:"Etc/GMT-1",2:"Etc/GMT-2",3:"Etc/GMT-3",4:"Etc/GMT-4",5:"Etc/GMT-5",6:"Etc/GMT-6",7:"Etc/GMT-7",8:"Etc/GMT-8",9:"Etc/GMT-9",10:"Etc/GMT-10",11:"Etc/GMT-11",12:"Etc/GMT-12",13:"Etc/GMT-13",14:"Etc/GMT-14","-1":"Etc/GMT+1","-2":"Etc/GMT+2","-3":"Etc/GMT+3","-4":"Etc/GMT+4","-5":"Etc/GMT+5","-6":"Etc/GMT+6","-7":"Etc/GMT+7","-8":"Etc/GMT+8","-9":"Etc/GMT+9","-10":"Etc/GMT+10","-11":"Etc/GMT+11","-12":"Etc/GMT+12"},gr=/([\-\+]{1})(\d{2})\:(\d{2})/,fr=e=>{let t=null;if("string"===typeof e){if(t=e.match(gr),!t)return e;const i=parseInt(t[1]+1,10),n=parseInt(t[2],10),r=parseInt(t[3],10);e=i*(n+r/60)}if("number"===typeof e){if(e in pr){const t=pr[e];if(function(e){if(mr[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),mr[e]=!0,!0}catch(t){return!1}}(t))return t}const t=ur.find((t=>t[0]===e));return t&&t[1][0]}},mr={};const vr=(e,t,i)=>(0,dr.utcToZonedTime)(e,fr(t),i),yr=(e,t,i)=>(0,dr.zonedTimeToUtc)(e,fr(t),i);function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function _r(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return br(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?br(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw s}}}}function xr(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}var Sr=i(9417),wr=i(63662);function Cr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,wr.A)(e,t)}function kr(e){return kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kr(e)}function Ar(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ar=function(){return!!e})()}function Er(e){var t=Ar();return function(){var i,n=kr(e);if(t){var r=kr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"==(0,tn.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,Sr.A)(e)}(this,i)}}function Tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Or=i(20816);function Pr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,Or.A)(n.key),n)}}function Mr(e,t,i){return t&&Pr(e.prototype,t),i&&Pr(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ir=i(64467),Rr=function(){function e(){Tr(this,e),(0,Ir.A)(this,"priority",void 0),(0,Ir.A)(this,"subPriority",0)}return Mr(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),Dr=function(e){Cr(i,e);var t=Er(i);function i(e,n,r,s,a){var o;return Tr(this,i),(o=t.call(this)).value=e,o.validateValue=n,o.setValue=r,o.priority=s,a&&(o.subPriority=a),o}return Mr(i,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,i){return this.setValue(e,t,this.value,i)}}]),i}(Rr),Lr=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",10),(0,Ir.A)((0,Sr.A)(e),"subPriority",-1),e}return Mr(i,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var i=new Date(0);return i.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),i.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),i}}]),i}(Rr),jr=function(){function e(){Tr(this,e),(0,Ir.A)(this,"incompatibleTokens",void 0),(0,Ir.A)(this,"priority",void 0),(0,Ir.A)(this,"subPriority",void 0)}return Mr(e,[{key:"run",value:function(e,t,i,n){var r=this.parse(e,t,i,n);return r?{setter:new Dr(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}},{key:"validate",value:function(e,t,i){return!0}}]),e}(),Fr=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",140),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["R","u","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,i){return t.era=i,e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}}]),i}(jr),Br=(Math.pow(10,8),6e4),Nr=36e5,zr=/^(1[0-2]|0?\d)/,Hr=/^(3[0-1]|[0-2]?\d)/,Vr=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Ur=/^(5[0-3]|[0-4]?\d)/,Wr=/^(2[0-3]|[0-1]?\d)/,Gr=/^(2[0-4]|[0-1]?\d)/,Kr=/^(1[0-1]|0?\d)/,Yr=/^(1[0-2]|0?\d)/,Xr=/^[0-5]?\d/,qr=/^[0-5]?\d/,Zr=/^\d/,Qr=/^\d{1,2}/,$r=/^\d{1,3}/,Jr=/^\d{1,4}/,es=/^-?\d+/,ts=/^-?\d/,is=/^-?\d{1,2}/,ns=/^-?\d{1,3}/,rs=/^-?\d{1,4}/,ss=/^([+-])(\d{2})(\d{2})?|Z/,as=/^([+-])(\d{2})(\d{2})|Z/,os=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ls=/^([+-])(\d{2}):(\d{2})|Z/,cs=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function hs(e,t){return e?{value:t(e.value),rest:e.rest}:e}function ds(e,t){var i=t.match(e);return i?{value:parseInt(i[0],10),rest:t.slice(i[0].length)}:null}function us(e,t){var i=t.match(e);if(!i)return null;if("Z"===i[0])return{value:0,rest:t.slice(1)};var n="+"===i[1]?1:-1,r=i[2]?parseInt(i[2],10):0,s=i[3]?parseInt(i[3],10):0,a=i[5]?parseInt(i[5],10):0;return{value:n*(r*Nr+s*Br+1e3*a),rest:t.slice(i[0].length)}}function ps(e){return ds(es,e)}function gs(e,t){switch(e){case 1:return ds(Zr,t);case 2:return ds(Qr,t);case 3:return ds($r,t);case 4:return ds(Jr,t);default:return ds(new RegExp("^\\d{1,"+e+"}"),t)}}function fs(e,t){switch(e){case 1:return ds(ts,t);case 2:return ds(is,t);case 3:return ds(ns,t);case 4:return ds(rs,t);default:return ds(new RegExp("^-?\\d{1,"+e+"}"),t)}}function ms(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function vs(e,t){var i,n=t>0,r=n?t:1-t;if(r<=50)i=e||100;else{var s=r+50;i=e+100*Math.floor(s/100)-(e>=s%100?100:0)}return n?i:1-i}function ys(e){return e%400===0||e%4===0&&e%100!==0}var bs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",130),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){var n=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return hs(gs(4,e),n);case"yo":return hs(i.ordinalNumber(e,{unit:"year"}),n);default:return hs(gs(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,i){var n=e.getUTCFullYear();if(i.isTwoDigitYear){var r=vs(i.year,n);return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}var s="era"in t&&1!==t.era?1-i.year:i.year;return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e}}]),i}(jr),_s=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",130),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){var n=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return hs(gs(4,e),n);case"Yo":return hs(i.ordinalNumber(e,{unit:"year"}),n);default:return hs(gs(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,i,n){var r=yn(e,n);if(i.isTwoDigitYear){var s=vs(i.year,r);return e.setUTCFullYear(s,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,mn.A)(e,n)}var a="era"in t&&1!==t.era?1-i.year:i.year;return e.setUTCFullYear(a,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,mn.A)(e,n)}}]),i}(jr),xs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",130),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t){return fs("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,i){var n=new Date(0);return n.setUTCFullYear(i,0,4),n.setUTCHours(0,0,0,0),un(n)}}]),i}(jr),Ss=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",130),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t){return fs("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,i){return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}}]),i}(jr),ws=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",120),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"Q":case"QQ":return gs(t.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,i){return e.setUTCMonth(3*(i-1),1),e.setUTCHours(0,0,0,0),e}}]),i}(jr),Cs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",120),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"q":case"qq":return gs(t.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,i){return e.setUTCMonth(3*(i-1),1),e.setUTCHours(0,0,0,0),e}}]),i}(jr),ks=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),(0,Ir.A)((0,Sr.A)(e),"priority",110),e}return Mr(i,[{key:"parse",value:function(e,t,i){var n=function(e){return e-1};switch(t){case"M":return hs(ds(zr,e),n);case"MM":return hs(gs(2,e),n);case"Mo":return hs(i.ordinalNumber(e,{unit:"month"}),n);case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,i){return e.setUTCMonth(i,1),e.setUTCHours(0,0,0,0),e}}]),i}(jr),As=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",110),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){var n=function(e){return e-1};switch(t){case"L":return hs(ds(zr,e),n);case"LL":return hs(gs(2,e),n);case"Lo":return hs(i.ordinalNumber(e,{unit:"month"}),n);case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,i){return e.setUTCMonth(i,1),e.setUTCHours(0,0,0,0),e}}]),i}(jr);var Es=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",100),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"w":return ds(Ur,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return gs(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,i,n){return(0,mn.A)(function(e,t,i){(0,nn.A)(2,arguments);var n=(0,sn.A)(e),r=(0,hn.A)(t),s=_n(n,i)-r;return n.setUTCDate(n.getUTCDate()-7*s),n}(e,i,n),n)}}]),i}(jr);var Ts=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",100),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"I":return ds(Ur,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return gs(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,i){return un(function(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e),n=(0,hn.A)(t),r=fn(i)-n;return i.setUTCDate(i.getUTCDate()-7*r),i}(e,i))}}]),i}(jr),Os=[31,28,31,30,31,30,31,31,30,31,30,31],Ps=[31,29,31,30,31,30,31,31,30,31,30,31],Ms=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",90),(0,Ir.A)((0,Sr.A)(e),"subPriority",1),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"d":return ds(Hr,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return gs(t.length,e)}}},{key:"validate",value:function(e,t){var i=ys(e.getUTCFullYear()),n=e.getUTCMonth();return i?t>=1&&t<=Ps[n]:t>=1&&t<=Os[n]}},{key:"set",value:function(e,t,i){return e.setUTCDate(i),e.setUTCHours(0,0,0,0),e}}]),i}(jr),Is=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",90),(0,Ir.A)((0,Sr.A)(e),"subpriority",1),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"D":case"DD":return ds(Vr,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return gs(t.length,e)}}},{key:"validate",value:function(e,t){return ys(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,i){return e.setUTCMonth(0,i),e.setUTCHours(0,0,0,0),e}}]),i}(jr);function Rs(e,t,i){var n,r,s,a,o,l,c,h;(0,nn.A)(2,arguments);var d=(0,vn.q)(),u=(0,hn.A)(null!==(n=null!==(r=null!==(s=null!==(a=null===i||void 0===i?void 0:i.weekStartsOn)&&void 0!==a?a:null===i||void 0===i||null===(o=i.locale)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==s?s:d.weekStartsOn)&&void 0!==r?r:null===(c=d.locale)||void 0===c||null===(h=c.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==n?n:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=(0,sn.A)(e),g=(0,hn.A)(t),f=((g%7+7)%7<u?7:0)+g-p.getUTCDay();return p.setUTCDate(p.getUTCDate()+f),p}var Ds=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",90),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,i,n){return(e=Rs(e,i,n)).setUTCHours(0,0,0,0),e}}]),i}(jr),Ls=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",90),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i,n){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return hs(gs(t.length,e),r);case"eo":return hs(i.ordinalNumber(e,{unit:"day"}),r);case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,i,n){return(e=Rs(e,i,n)).setUTCHours(0,0,0,0),e}}]),i}(jr),js=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",90),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i,n){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return hs(gs(t.length,e),r);case"co":return hs(i.ordinalNumber(e,{unit:"day"}),r);case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,i,n){return(e=Rs(e,i,n)).setUTCHours(0,0,0,0),e}}]),i}(jr);var Fs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",90),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){var n=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return gs(t.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return hs(i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return hs(i.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return hs(i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),n);default:return hs(i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),n)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,i){return e=function(e,t){(0,nn.A)(2,arguments);var i=(0,hn.A)(t);i%7===0&&(i-=7);var n=(0,sn.A)(e),r=((i%7+7)%7<1?7:0)+i-n.getUTCDay();return n.setUTCDate(n.getUTCDate()+r),n}(e,i),e.setUTCHours(0,0,0,0),e}}]),i}(jr),Bs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",80),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,i){return e.setUTCHours(ms(i),0,0,0),e}}]),i}(jr),Ns=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",80),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,i){return e.setUTCHours(ms(i),0,0,0),e}}]),i}(jr),zs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",80),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["a","b","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,i){return e.setUTCHours(ms(i),0,0,0),e}}]),i}(jr),Hs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",70),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["H","K","k","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"h":return ds(Yr,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return gs(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,i){var n=e.getUTCHours()>=12;return n&&i<12?e.setUTCHours(i+12,0,0,0):n||12!==i?e.setUTCHours(i,0,0,0):e.setUTCHours(0,0,0,0),e}}]),i}(jr),Vs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",70),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"H":return ds(Wr,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return gs(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,i){return e.setUTCHours(i,0,0,0),e}}]),i}(jr),Us=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",70),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["h","H","k","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"K":return ds(Kr,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return gs(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,i){return e.getUTCHours()>=12&&i<12?e.setUTCHours(i+12,0,0,0):e.setUTCHours(i,0,0,0),e}}]),i}(jr),Ws=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",70),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"k":return ds(Gr,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return gs(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,i){var n=i<=24?i%24:i;return e.setUTCHours(n,0,0,0),e}}]),i}(jr),Gs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",60),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"m":return ds(Xr,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return gs(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,i){return e.setUTCMinutes(i,0,0),e}}]),i}(jr),Ks=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",50),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t,i){switch(t){case"s":return ds(qr,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return gs(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,i){return e.setUTCSeconds(i,0),e}}]),i}(jr),Ys=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",30),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["t","T"]),e}return Mr(i,[{key:"parse",value:function(e,t){return hs(gs(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,i){return e.setUTCMilliseconds(i),e}}]),i}(jr),Xs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",10),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["t","T","x"]),e}return Mr(i,[{key:"parse",value:function(e,t){switch(t){case"X":return us(ss,e);case"XX":return us(as,e);case"XXXX":return us(os,e);case"XXXXX":return us(cs,e);default:return us(ls,e)}}},{key:"set",value:function(e,t,i){return t.timestampIsSet?e:new Date(e.getTime()-i)}}]),i}(jr),qs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",10),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens",["t","T","X"]),e}return Mr(i,[{key:"parse",value:function(e,t){switch(t){case"x":return us(ss,e);case"xx":return us(as,e);case"xxxx":return us(os,e);case"xxxxx":return us(cs,e);default:return us(ls,e)}}},{key:"set",value:function(e,t,i){return t.timestampIsSet?e:new Date(e.getTime()-i)}}]),i}(jr),Zs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",40),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens","*"),e}return Mr(i,[{key:"parse",value:function(e){return ps(e)}},{key:"set",value:function(e,t,i){return[new Date(1e3*i),{timestampIsSet:!0}]}}]),i}(jr),Qs=function(e){Cr(i,e);var t=Er(i);function i(){var e;Tr(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,Ir.A)((0,Sr.A)(e),"priority",20),(0,Ir.A)((0,Sr.A)(e),"incompatibleTokens","*"),e}return Mr(i,[{key:"parse",value:function(e){return ps(e)}},{key:"set",value:function(e,t,i){return[new Date(i),{timestampIsSet:!0}]}}]),i}(jr),$s={G:new Fr,y:new bs,Y:new _s,R:new xs,u:new Ss,Q:new ws,q:new Cs,M:new ks,L:new As,w:new Es,I:new Ts,d:new Ms,D:new Is,E:new Ds,e:new Ls,c:new js,i:new Fs,a:new Bs,b:new Ns,B:new zs,h:new Hs,H:new Vs,K:new Us,k:new Ws,m:new Gs,s:new Ks,S:new Ys,X:new Xs,x:new qs,t:new Zs,T:new Qs},Js=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ea=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ta=/^'([^]*?)'?$/,ia=/''/g,na=/\S/,ra=/[a-zA-Z]/;function sa(e,t,i,n){var r,s,a,o,l,c,h,d,u,p,g,f,m,v,y,b,_,x;(0,nn.A)(3,arguments);var S=String(e),w=String(t),C=(0,vn.q)(),k=null!==(r=null!==(s=null===n||void 0===n?void 0:n.locale)&&void 0!==s?s:C.locale)&&void 0!==r?r:ir;if(!k.match)throw new RangeError("locale must contain match property");var A=(0,hn.A)(null!==(a=null!==(o=null!==(l=null!==(c=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null===n||void 0===n||null===(h=n.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:C.firstWeekContainsDate)&&void 0!==o?o:null===(u=C.locale)||void 0===u||null===(p=u.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==a?a:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=(0,hn.A)(null!==(g=null!==(f=null!==(m=null!==(v=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==v?v:null===n||void 0===n||null===(y=n.locale)||void 0===y||null===(b=y.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==m?m:C.weekStartsOn)&&void 0!==f?f:null===(_=C.locale)||void 0===_||null===(x=_.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==g?g:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===w)return""===S?(0,sn.A)(i):new Date(NaN);var T,O={firstWeekContainsDate:A,weekStartsOn:E,locale:k},P=[new Lr],M=w.match(ea).map((function(e){var t=e[0];return t in Bn?(0,Bn[t])(e,k.formatLong):e})).join("").match(Js),I=[],R=_r(M);try{var D=function(){var t=T.value;null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!Un(t)||Wn(t,w,e),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!Vn(t)||Wn(t,w,e);var i=t[0],r=$s[i];if(r){var s=r.incompatibleTokens;if(Array.isArray(s)){var a=I.find((function(e){return s.includes(e.token)||e.token===i}));if(a)throw new RangeError("The format string mustn't contain `".concat(a.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===r.incompatibleTokens&&I.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));I.push({token:i,fullToken:t});var o=r.run(S,t,k.match,O);if(!o)return{v:new Date(NaN)};P.push(o.setter),S=o.rest}else{if(i.match(ra))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");if("''"===t?t="'":"'"===i&&(t=function(e){return e.match(ta)[1].replace(ia,"'")}(t)),0!==S.indexOf(t))return{v:new Date(NaN)};S=S.slice(t.length)}};for(R.s();!(T=R.n()).done;){var L=D();if("object"===(0,tn.A)(L))return L.v}}catch(W){R.e(W)}finally{R.f()}if(S.length>0&&na.test(S))return new Date(NaN);var j=P.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,i){return i.indexOf(e)===t})).map((function(e){return P.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),F=(0,sn.A)(i);if(isNaN(F.getTime()))return new Date(NaN);var B,N=dn(F,Nn(F)),z={},H=_r(j);try{for(H.s();!(B=H.n()).done;){var V=B.value;if(!V.validate(N,O))return new Date(NaN);var U=V.set(N,z,O);Array.isArray(U)?(N=U[0],xr(z,U[1])):N=U}}catch(W){H.e(W)}finally{H.f()}return N}function aa(e,t){var i;(0,nn.A)(1,arguments);var n=(0,hn.A)(null!==(i=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==i?i:2);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,s=function(e){var t,i={},n=e.split(oa.dateTimeDelimiter);if(n.length>2)return i;/:/.test(n[0])?t=n[0]:(i.date=n[0],t=n[1],oa.timeZoneDelimiter.test(i.date)&&(i.date=e.split(oa.timeZoneDelimiter)[0],t=e.substr(i.date.length,e.length)));if(t){var r=oa.timezone.exec(t);r?(i.time=t.replace(r[1],""),i.timezone=r[1]):i.time=t}return i}(e);if(s.date){var a=function(e,t){var i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(i);if(!n)return{year:NaN,restDateString:""};var r=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:null===s?r:100*s,restDateString:e.slice((n[1]||n[2]).length)}}(s.date,n);r=function(e,t){if(null===t)return new Date(NaN);var i=e.match(la);if(!i)return new Date(NaN);var n=!!i[4],r=da(i[1]),s=da(i[2])-1,a=da(i[3]),o=da(i[4]),l=da(i[5])-1;if(n)return function(e,t,i){return t>=1&&t<=53&&i>=0&&i<=6}(0,o,l)?function(e,t,i){var n=new Date(0);n.setUTCFullYear(e,0,4);var r=n.getUTCDay()||7,s=7*(t-1)+i+1-r;return n.setUTCDate(n.getUTCDate()+s),n}(t,o,l):new Date(NaN);var c=new Date(0);return function(e,t,i){return t>=0&&t<=11&&i>=1&&i<=(pa[t]||(ga(e)?29:28))}(t,s,a)&&function(e,t){return t>=1&&t<=(ga(e)?366:365)}(t,r)?(c.setUTCFullYear(t,s,Math.max(r,a)),c):new Date(NaN)}(a.restDateString,a.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var o,l=r.getTime(),c=0;if(s.time&&(c=function(e){var t=e.match(ca);if(!t)return NaN;var i=ua(t[1]),n=ua(t[2]),r=ua(t[3]);if(!function(e,t,i){if(24===e)return 0===t&&0===i;return i>=0&&i<60&&t>=0&&t<60&&e>=0&&e<25}(i,n,r))return NaN;return i*Nr+n*Br+1e3*r}(s.time),isNaN(c)))return new Date(NaN);if(!s.timezone){var h=new Date(l+c),d=new Date(0);return d.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),d.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),d}return o=function(e){if("Z"===e)return 0;var t=e.match(ha);if(!t)return 0;var i="+"===t[1]?-1:1,n=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,r))return NaN;return i*(n*Nr+r*Br)}(s.timezone),isNaN(o)?new Date(NaN):new Date(l+c+o)}var oa={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},la=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ca=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ha=/^([+-])(\d{2})(?::?(\d{2}))?$/;function da(e){return e?parseInt(e):1}function ua(e){return e&&parseFloat(e.replace(",","."))||0}var pa=[31,null,31,30,31,30,31,31,30,31,30,31];function ga(e){return e%400===0||e%4===0&&e%100!==0}function fa(e,t,i,n){let r=null;if(e){t&&(r=sa(e,t,i=i||new Date,{locale:n})),an(r)||(r=aa(e)),an(r)||(r=new Date(Date.parse(e)));const s=an(r)&&String(r.getFullYear()).length>4;an(r)&&!s||(r=null)}return r}const ma={date:Ki.FORMAT_FULL_DATE,dateTime:Ki.FORMAT_DATE_TIME,dateRange:Ki.FORMAT_FULL_DATE,dateTimeRange:Ki.FORMAT_DATE_TIME,month:Ki.FORMAT_YEAR_MONTH,monthRange:Ki.FORMAT_YEAR_MONTH};function va(e){return e&&ma[e]}const ya=e=>ma;function ba(e){const{format:t,type:i}=e,n=/([yMd]{0,4}[^a-z\s]*[yMd]{0,4}[^a-z\s]*[yMd]{0,4})/i,r=/([yMd]{0,4}[^a-z\s]*[yMd]{0,4}[^a-z\s]*[yMd]{0,4}) (H{0,2}[^a-z\s]*m{0,2}[^a-z\s]*s{0,2})/i,s=va(i);let a;switch(i){case"dateTime":case"dateTimeRange":const e=r.exec(t);a=e&&e[1]&&e[2]?"".concat(e[1]," ").concat(e[2]):s;break;default:const i=n.exec(t);a=i&&i[1]||s}return a}function _a(e){const{inputValue:t="",rangeSeparator:i,type:n}=e;let r,s,a,o;const l={monthLeft:{dateInput:"",timeInput:""},monthRight:{dateInput:"",timeInput:""}};switch(n){case"date":case"month":case"monthRange":l.monthLeft.dateInput=t;break;case"dateRange":[r="",a=""]=t.split(i),l.monthLeft.dateInput=r,l.monthRight.dateInput=a;break;case"dateTime":[r="",s=""]=t.split(" "),l.monthLeft.dateInput=r,l.monthLeft.timeInput=s;break;case"dateTimeRange":const[e="",n=""]=t.split(i);[r="",s=""]=e.split(" "),[a="",o=""]=n.split(" "),l.monthLeft.dateInput=r,l.monthLeft.timeInput=s,l.monthRight.dateInput=a,l.monthRight.timeInput=o}return l}function xa(e){return["string","number"].includes(typeof e)&&""!==e}class Sa extends k.A{constructor(e){super(Object.assign({},e)),this.clearRangeInputFocus=()=>{const{type:e}=this._adapter.getProps(),{rangeInputFocus:t}=this._adapter.getStates();"dateTimeRange"===e&&t&&this._adapter.setRangeInputFocus(!1)},this._isRangeType=()=>{const e=this._adapter.getProp("type");return/range/i.test(e)},this._isRangeValueComplete=e=>{let t=!1;return Array.isArray(e)&&(t=!e.some((e=>(0,L.A)(e)))),t}}init(){const e=this.getProp("timeZone");this._isControlledComponent()?this.initFromProps({timeZone:e,value:this.getProp("value")}):this._isInProps("defaultValue")&&this.initFromProps({timeZone:e,value:this.getProp("defaultValue")}),this.initPanelOpenStatus(this.getProp("defaultOpen"))}initFromProps(e){let{value:t,timeZone:i,prevTimeZone:n}=e;const r=(Array.isArray(t)?[...t]:(t||0===t)&&[t])||[],s=this.parseWithTimezone(r,i,n);this._adapter.updatePrevTimezone(n),this.clearInputValue(),this._adapter.updateValue(s),this.resetCachedSelectedValue(s),this.initRangeInputFocus(s),this._adapter.needConfirm()&&this._adapter.updateCachedSelectedValue(s)}initRangeInputFocus(e){const{triggerRender:t}=this.getProps();this._isRangeType()&&G()(t)&&0===e.length&&this._adapter.setRangeInputFocus("rangeStart")}parseWithTimezone(e,t,i){const n=[];if(Array.isArray(e)&&e.length)for(const r of e){let e=(r||0===r)&&this._parseValue(r);e?(xa(i)&&(e=yr(e,i)),n.push(xa(t)?vr(e,t):e)):(0,A.A)(!0,"[Semi DatePicker] value cannot be parsed, value: ".concat(String(r)))}return n}_isMultiple(){return Boolean(this.getProp("multiple"))}_parseValue(e){const t=this._adapter.getProp("dateFnsLocale");let i;if(!e&&0!==e)return new Date;if(cr(e))i=e;else if(C()(e))i=fa(e,this.getProp("format"),void 0,t);else{if(!hr(e))throw new TypeError("defaultValue should be valid Date object/timestamp or string");i=new Date(e)}return i}destroy(){this._adapter.togglePanel(!1),this._adapter.unregisterClickOutSide()}initPanelOpenStatus(e){!this.getProp("open")&&!e||this.getProp("disabled")?(this._adapter.togglePanel(!1),this._adapter.unregisterClickOutSide()):(this._adapter.togglePanel(!0),this._adapter.registerClickOutSide())}openPanel(){this.getProp("disabled")||(this._isControlledComponent("open")||this.open(),this._adapter.notifyOpenChange(!0))}clearInsetInputValue(){const{insetInput:e}=this._adapter.getProps();e&&this._adapter.updateInsetInputValue(null)}resetCachedSelectedValue(e){const{value:t,cachedSelectedValue:i}=this._adapter.getStates(),n=Array.isArray(e)?e:t;a()(n,i)||this._adapter.updateCachedSelectedValue(n)}closePanel(e){let t=arguments.length>2?arguments[2]:void 0;const{value:i}=this._adapter.getStates(),n=(0,L.A)(t)?i:t;this._isControlledComponent("open")?this.resetInnerSelectedStates(n):this.close(),this._adapter.notifyOpenChange(!1)}open(){this._adapter.togglePanel(!0),this._adapter.registerClickOutSide()}close(){this._adapter.togglePanel(!1,(()=>this.resetInnerSelectedStates())),this._adapter.unregisterClickOutSide()}focus(e){if(this._isRangeType()){const t=null!==e&&void 0!==e?e:"rangeStart";this._adapter.setRangeInputFocus(t)}else this._adapter.setInputFocus()}blur(){this._isRangeType()?this._adapter.setRangeInputBlur():this._adapter.setInputBlur()}resetInnerSelectedStates(e){const{value:t}=this._adapter.getStates();(!this.isCachedSelectedValueValid(e)||this._adapter.needConfirm()&&!this.clickConfirmButton)&&this.resetCachedSelectedValue(t),this.resetFocus(),this.clearInputValue(),this.clickConfirmButton=!1}resetFocus(e){this._adapter.setRangeInputFocus(!1),this._adapter.notifyBlur(e)}isCachedSelectedValueValid(e){const t=e||this._adapter.getState("cachedSelectedValue"),{type:i}=this._adapter.getProps();let n=!0;switch(!0){case"dateRange"===i:case"dateTimeRange"===i:this._isRangeValueComplete(t)||(n=!1);break;default:const e=null===t||void 0===t?void 0:t.filter((e=>e));Array.isArray(e)&&e.length||(n=!1)}return n}clearInputValue(){this._adapter.updateInputValue(null),this._adapter.updateInsetInputValue(null)}handleInputChange(e,t){const i=this._isMultiple()?this.parseMultipleInput(e):this.parseInput(e),{value:n}=this.getStates();if(this._updateCachedSelectedValueFromInput(e),i&&i.length||""===e){if(Fi()(t,q.CLEARBTN_CLICKED_EVENT_FLAG)&&this._isControlledComponent("value"))return void this._notifyChange(i);this._updateValueAndInput(i,""===e,e);const r=this._getChangedDates(i);this._someDateDisabled(r,i)||a()(i,n)||this._notifyChange(i)}else this._adapter.updateInputValue(e)}handleInsetInputChange(e){const{insetInputStr:t,format:i,insetInputValue:n}=e,r=this._isMultiple(),s=r?this.parseMultipleInput(t,i):this.parseInput(t,i),{value:o}=this.getStates();if(this._updateCachedSelectedValueFromInput(t),s&&s.length){const e=this._getChangedDates(s);if(!this._someDateDisabled(e,s)){a()(s,o)||(this._isControlledComponent()||this._adapter.needConfirm()||this._adapter.updateValue(s),this._notifyChange(s));const e=r?this.formatMultipleDates(s):this.formatDates(s);this._adapter.updateInputValue(e)}}this._adapter.updateInsetInputValue(n)}_updateCachedSelectedValueFromInput(e){const t=this.getLooseDateFromInput(e),i=this._getChangedDates(t);this._someDateDisabled(i,t)||this.resetCachedSelectedValue(t)}handleInputBlur(){}handleRangeEndTabPress(e){this._adapter.setRangeInputFocus(!1)}handleInputFocus(e,t){const i=this._adapter.getState("rangeInputFocus");t&&this._adapter.setRangeInputFocus(t),t&&["rangeStart","rangeEnd"].includes(i)||this._adapter.notifyFocus(e,t)}handleSetRangeFocus(e){this._adapter.setRangeInputFocus(e)}handleInputClear(e){this._adapter.notifyClear(e)}handleRangeInputClear(e){const t=[];this._isControlledComponent("value")||(this._updateValueAndInput(t,!0,""),this._adapter.updateInsetInputValue(null),this.resetCachedSelectedValue(t)),this._notifyChange(t),this._adapter.setRangeInputFocus(!1),this._adapter.notifyClear(e)}handleRangeInputBlur(e,t){}handleInputComplete(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e?this._isMultiple()?this.parseMultipleInput(e,",",!0):this.parseInput(e):[];if(t=t&&t.length?t:this.getState("value"),!t||!t.length){const e=new Date;t=this._isRangeType()?[e,e]:[e]}this._updateValueAndInput(t);const{value:i}=this.getStates(),n=this._getChangedDates(t);this._someDateDisabled(n,t)||a()(t,i)||this._notifyChange(t)}parseInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i=[];const{dateFnsLocale:n,rangeSeparator:r}=this.getProps();if(e&&e.length){const s=this.getProp("type"),a=t||this.getProp("format")||va(s);let o,l;const c=new Date;switch(s){case"date":case"dateTime":case"month":o=e?fa(e,a,c,n):"",l=o&&an(o)&&this.localeFormat(o,a),o&&l===e&&(i=[o]);break;case"dateRange":case"dateTimeRange":case"monthRange":const t=r,s=e.split(t);o=s&&s.reduce(((e,t)=>{const i=t&&fa(t,a,c,n);return i&&e.push(i),e}),[]),l=o&&o.map((e=>e&&an(e)&&this.localeFormat(e,a))).join(t),o&&l===e&&(o.sort(((e,t)=>e.getTime()-t.getTime())),i=o)}}return i}getLooseDateFromInput(e){return this._isMultiple()?this.parseMultipleInputLoose(e):this.parseInputLoose(e)}parseInputLoose(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];const{dateFnsLocale:i,rangeSeparator:n,type:r,format:s}=this.getProps();if(e&&e.length){const a=s||va(r);let o,l;const c=new Date;switch(r){case"date":case"dateTime":case"month":const r=fa(e,a,c,i);cr(r)?(l=this.localeFormat(r,a),l===e&&(o=r)):o=null,t=[o];break;case"dateRange":case"dateTimeRange":const s=n,h=e.split(s);o=h&&h.reduce(((e,t)=>{let n=null;const r=fa(t,a,c,i);return cr(r)&&(l=this.localeFormat(r,a),l===t&&(n=r)),e.push(n),e}),[]),Array.isArray(o)&&o.every((e=>an(e)))&&o.sort(((e,t)=>e.getTime()-t.getTime())),t=o}}return t}parseMultipleInputLoose(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ki.DEFAULT_SEPARATOR_MULTIPLE,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.getProp("max"),r=e.split(t),s=[];for(const a of r){let e=a&&this.parseInputLoose(a);if(e=Array.isArray(e)?e:e&&[e],!e||!e.length)return[];if(i?!s.filter((t=>Boolean(e.find((e=>ln(t,e))))))&&s.push(...e):s.push(...e),n&&n>0&&s.length>n)return[]}return s}parseMultipleInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ki.DEFAULT_SEPARATOR_MULTIPLE,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.getProp("max"),r=e.split(t),s=[];for(const a of r){let e=a&&this.parseInput(a);if(e=Array.isArray(e)?e:e&&[e],!e||!e.length)return[];if(i?!s.filter((t=>Boolean(e.find((e=>ln(t,e))))))&&s.push(...e):s.push(...e),n&&n>0&&s.length>n)return[]}return s}formatDates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i="";const n=this.getProp("rangeSeparator");if(Array.isArray(e)&&e.length){const r=this.getProp("type"),s=t||this.getProp("format")||va(r);switch(r){case"date":case"dateTime":case"month":i=this.localeFormat(e[0],s);break;case"dateRange":case"dateTimeRange":case"monthRange":const t=!(0,L.A)(e[0]),r=!(0,L.A)(e[1]);t&&r?i="".concat(this.localeFormat(e[0],s)).concat(n).concat(this.localeFormat(e[1],s)):t?i="".concat(this.localeFormat(e[0],s)).concat(n):r&&(i="".concat(n).concat(this.localeFormat(e[1],s)))}}return i}formatMultipleDates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ki.DEFAULT_SEPARATOR_MULTIPLE,i=arguments.length>2?arguments[2]:void 0;const n=[];if(Array.isArray(e)&&e.length){switch(this.getProp("type")){case"date":case"dateTime":case"month":e.forEach((e=>n.push(this.formatDates([e],i))));break;case"dateRange":case"dateTimeRange":case"monthRange":for(let t=0;t<e.length;t+=2)n.push(this.formatDates(e.slice(t,t+2),i))}}return n.join(t)}_updateValueAndInput(e,t,i){let n;if(t||e){n=Array.isArray(e)?e:e?[e]:[];const t=this._getChangedDates(n);this._isControlledComponent()||this._someDateDisabled(t,n)||this._adapter.needConfirm()||this._adapter.updateValue(n)}this._adapter.updateInputValue(i)}handleSelectedChange(e,t){const{type:i,format:n,rangeSeparator:r,insetInput:s}=this._adapter.getProps(),{value:o}=this.getStates(),l=this._isControlledComponent(),c=y()(t)?t.fromPreset:t,h=Fi()(t,"closePanel",!0),d=Fi()(t,"needCheckFocusRecord",!0),u=Array.isArray(e)?[...e]:e?[e]:[],p=this._getChangedDates(u);let g,f;if(!this._someDateDisabled(p,u)){if(this.resetCachedSelectedValue(u),g=this._isMultiple()?this.formatMultipleDates(u):this.formatDates(u),s){const e=ba({format:n,type:i});f=_a({inputValue:this._isMultiple()?this.formatMultipleDates(u,void 0,e):this.formatDates(u,e),type:i,rangeSeparator:r})}if(this._isRangeType()&&!this._isRangeValueComplete(u))return this._adapter.updateInputValue(g),void this._adapter.updateInsetInputValue(f);l&&!c||(this._updateValueAndInput(u,!0,g),this._adapter.updateInsetInputValue(f)),a()(e,o)||this._notifyChange(e)}const m=!d||d&&this._adapter.couldPanelClosed();("date"===i&&!this._isMultiple()&&h||"dateRange"===i&&this._isRangeValueComplete(u)&&h&&m)&&this.closePanel(void 0,g,u)}handleYMSelectedChange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{currentMonth:t,currentYear:i}=e,{type:n}=this.getProps();if("month"===n){const e=new Date(i.left,t.left-1);this.handleSelectedChange([e])}else{const e=new Date(i.left,t.left-1),n=new Date(i.right,t.right-1);this.handleSelectedChange([e,n])}}handleConfirm(){this.clickConfirmButton=!0;const{cachedSelectedValue:e,value:t}=this._adapter.getStates(),i=this._isRangeValueComplete(e),n=i?e:t;if(this._adapter.needConfirm()&&!this._isControlledComponent()&&this._adapter.updateValue(n),this.closePanel(void 0,void 0,n),i){const{notifyValue:t,notifyDate:i}=this.disposeCallbackArgs(e);this._adapter.notifyConfirm(i,t)}}handleCancel(){this.closePanel();const e=this.getState("value"),{notifyValue:t,notifyDate:i}=this.disposeCallbackArgs(e);this._adapter.notifyCancel(i,t)}handlePresetClick(e,t){const{type:i,timeZone:n}=this.getProps(),r=this.getState("prevTimezone"),s="function"===typeof e.start?e.start():e.start,a="function"===typeof e.end?e.end():e.end;let o;switch(i){case"month":case"dateTime":case"date":o=this.parseWithTimezone([s],n,r),this.handleSelectedChange(o);break;case"dateTimeRange":case"dateRange":o=this.parseWithTimezone([s,a],n,r),this.handleSelectedChange(o,{needCheckFocusRecord:!1})}this._adapter.notifyPresetsClick(e,t)}disposeCallbackArgs(e){let t=Array.isArray(e)?e:e&&[e]||[];const i=this.getProp("timeZone");xa(i)&&(t=t.map((e=>yr(e,i))));const n=this.getProp("type"),r=this.getProp("format")||va(n);let s,a;switch(n){case"date":case"dateTime":case"month":this._isMultiple()?(s=t.map((e=>e&&this.localeFormat(e,r))),a=[...t]):(s=t[0]&&this.localeFormat(t[0],r),[a]=t);break;case"dateRange":case"dateTimeRange":case"monthRange":s=t.map((e=>e&&this.localeFormat(e,r))),a=[...t]}return{notifyValue:s,notifyDate:a}}_notifyChange(e){if(this._isRangeType()&&!this._isRangeValueComplete(e))return;const{onChangeWithDateFirst:t}=this.getProps(),{notifyValue:i,notifyDate:n}=this.disposeCallbackArgs(e);t?this._adapter.notifyChange(n,i):this._adapter.notifyChange(i,n)}_getChangedDates(e){const t=this._adapter.getProp("type"),{cachedSelectedValue:i}=this._adapter.getStates(),n=[];switch(t){case"dateRange":case"dateTimeRange":const[t,r]=i,[s,a]=e;cn(s,t)||n.push(s),cn(a,r)||n.push(a);break;default:const o=new Set;i.forEach((e=>o.add(rn(e)&&e.valueOf())));for(const i of e)o.has(rn(i)&&i.valueOf())||n.push(i)}return n}_someDateDisabled(e,t){const{rangeInputFocus:i}=this.getStates(),n={rangeStart:"",rangeEnd:"",rangeInputFocus:i};if(this._isRangeType()&&Array.isArray(t)){if(an(t[0])){const e=lr(t[0],"yyyy-MM-dd");n.rangeStart=e}if(an(t[1])){const e=lr(t[1],"yyyy-MM-dd");n.rangeEnd=e}}let r=!1;for(const s of e)if(!(0,L.A)(s)&&this.disabledDisposeDate(s,n)){r=!0;break}return r}localeFormat(e,t){return lr(e,t,{locale:this._adapter.getProp("dateFnsLocale")})}disposeDateFn(e,t){const{notifyDate:i}=this.disposeCallbackArgs(t),n=Array.isArray(t);let r;r=n===Array.isArray(i)?i:n?[i]:i[0];for(var s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];return e(r,...a)}disabledDisposeDate(e){const{disabledDate:t}=this.getProps();for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return this.disposeDateFn(t,e,...n)}disabledDisposeTime(e){const{disabledTime:t}=this.getProps();for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return this.disposeDateFn(t,e,...n)}handleTriggerWrapperClick(e){const{disabled:t,triggerRender:i}=this._adapter.getProps(),{rangeInputFocus:n}=this._adapter.getStates();t||(this._isRangeType()&&!n?(this._adapter.isEventTarget(e)?setTimeout((()=>{this.handleInputFocus(e,"rangeStart")}),0):G()(i)&&this._adapter.setRangeInputFocus("rangeStart"),this.openPanel()):this.openPanel())}handlePanelVisibleChange(e){e?(this._adapter.setInsetInputFocus(),setTimeout((()=>{this._adapter.setTriggerDisabled(!0)}),0)):this._adapter.setTriggerDisabled(!1)}}function wa(e,t){let{groupInnerSeparator:i=Ki.DEFAULT_SEPARATOR_RANGE,groupSize:n=1,groupSeparator:r=Ki.DEFAULT_SEPARATOR_MULTIPLE}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0,a="";if((n<=0||"number"!==typeof n)&&(n=1),Array.isArray(e)&&e.length){const o=[],{length:l}=e;for(let t=0;t<l;t++){t%n===0&&o.push([]);o[Math.floor(t/n)].push(e[t])}a=o.map((e=>e.map((e=>e?lr(e,t,{locale:s}):"")).join(i))).join(r)}return a}function Ca(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e),n=(0,hn.A)(t);if(isNaN(n))return new Date(NaN);if(!n)return i;var r=i.getDate(),s=new Date(i.getTime());return s.setMonth(i.getMonth()+n+1,0),r>=s.getDate()?s:(i.setFullYear(s.getFullYear(),s.getMonth(),r),i)}function ka(e){const{defaultPickerValue:t,format:i,dateFnsLocale:n}=e;let r=Array.isArray(t)?t[0]:t,s=Array.isArray(t)?t[1]:void 0;switch(!0){case cr(r):break;case hr(r):r=new Date(r);break;case"string"===typeof r:r=fa(r,i,void 0,n);break;default:r=new Date}switch(!0){case cr(s):break;case hr(s):s=new Date(s);break;case"string"===typeof s:s=fa(s,i,void 0,n);break;default:s=Ca(r,1)}return{nowDate:r,nextDate:s}}var Aa=Function.prototype.toString,Ea=Object.create,Ta=Object.prototype.toString,Oa=function(){function e(){this._keys=[],this._values=[]}return e.prototype.has=function(e){return!!~this._keys.indexOf(e)},e.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},e.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},e}();var Pa="undefined"!==typeof WeakMap?function(){return new WeakMap}:function(){return new Oa};function Ma(e){if(!e)return Ea(null);var t=e.constructor;if(t===Object)return e===Object.prototype?{}:Ea(e);if(t&&~Aa.call(t).indexOf("[native code]"))try{return new t}catch(Na){}return Ea(e)}var Ia="g"===/test/g.flags?function(e){return e.flags}:function(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function Ra(e){var t=Ta.call(e);return t.substring(8,t.length-1)}var Da="undefined"!==typeof Symbol?function(e){return e[Symbol.toStringTag]||Ra(e)}:Ra,La=Object.defineProperty,ja=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,Ba=Object.getOwnPropertySymbols,Na=Object.prototype,za=Na.hasOwnProperty,Ha=Na.propertyIsEnumerable,Va="function"===typeof Ba;var Ua=Va?function(e){return Fa(e).concat(Ba(e))}:Fa;function Wa(e,t,i){for(var n=Ua(e),r=0,s=n.length,a=void 0,o=void 0;r<s;++r)if("callee"!==(a=n[r])&&"caller"!==a)if(o=ja(e,a)){o.get||o.set||(o.value=i.copier(o.value,i));try{La(t,a,o)}catch(l){t[a]=o.value}}else t[a]=i.copier(e[a],i);return t}function Ga(e,t){return e.slice(0)}function Ka(e,t){var i=new t.Constructor;return t.cache.set(e,i),e.forEach((function(e,n){i.set(n,t.copier(e,t))})),i}var Ya=Va?function(e,t){var i=Ma(t.prototype);for(var n in t.cache.set(e,i),e)za.call(e,n)&&(i[n]=t.copier(e[n],t));for(var r=Ba(e),s=0,a=r.length,o=void 0;s<a;++s)o=r[s],Ha.call(e,o)&&(i[o]=t.copier(e[o],t));return i}:function(e,t){var i=Ma(t.prototype);for(var n in t.cache.set(e,i),e)za.call(e,n)&&(i[n]=t.copier(e[n],t));return i};function Xa(e,t){return new t.Constructor(e.valueOf())}function qa(e,t){return e}function Za(e,t){var i=new t.Constructor;return t.cache.set(e,i),e.forEach((function(e){i.add(t.copier(e,t))})),i}var Qa=Array.isArray,$a=Object.assign,Ja=Object.getPrototypeOf||function(e){return e.__proto__},eo={array:function(e,t){var i=new t.Constructor;t.cache.set(e,i);for(var n=0,r=e.length;n<r;++n)i[n]=t.copier(e[n],t);return i},arrayBuffer:Ga,blob:function(e,t){return e.slice(0,e.size,e.type)},dataView:function(e,t){return new t.Constructor(Ga(e.buffer))},date:function(e,t){return new t.Constructor(e.getTime())},error:qa,map:Ka,object:Ya,regExp:function(e,t){var i=new t.Constructor(e.source,Ia(e));return i.lastIndex=e.lastIndex,i},set:Za},to=$a({},eo,{array:function(e,t){var i=new t.Constructor;return t.cache.set(e,i),Wa(e,i,t)},map:function(e,t){return Wa(e,Ka(e,t),t)},object:function(e,t){var i=Ma(t.prototype);return t.cache.set(e,i),Wa(e,i,t)},set:function(e,t){return Wa(e,Za(e,t),t)}});function io(e){var t=function(e){return{Arguments:e.object,Array:e.array,ArrayBuffer:e.arrayBuffer,Blob:e.blob,Boolean:Xa,DataView:e.dataView,Date:e.date,Error:e.error,Float32Array:e.arrayBuffer,Float64Array:e.arrayBuffer,Int8Array:e.arrayBuffer,Int16Array:e.arrayBuffer,Int32Array:e.arrayBuffer,Map:e.map,Number:Xa,Object:e.object,Promise:qa,RegExp:e.regExp,Set:e.set,String:Xa,WeakMap:qa,WeakSet:qa,Uint8Array:e.arrayBuffer,Uint8ClampedArray:e.arrayBuffer,Uint16Array:e.arrayBuffer,Uint32Array:e.arrayBuffer,Uint64Array:e.arrayBuffer}}($a({},eo,e)),i=t.Array,n=t.Object;function r(e,r){if(r.prototype=r.Constructor=void 0,!e||"object"!==typeof e)return e;if(r.cache.has(e))return r.cache.get(e);if(r.prototype=Ja(e),r.Constructor=r.prototype&&r.prototype.constructor,!r.Constructor||r.Constructor===Object)return n(e,r);if(Qa(e))return i(e,r);var s=t[Da(e)];return s?s(e,r):"function"===typeof e.then?e:n(e,r)}return function(e){return r(e,{Constructor:void 0,cache:Pa(),copier:r,prototype:void 0})}}io($a({},to,{}));var no=io({});const ro="Enter";class so extends k.A{constructor(e){super(Object.assign({},e))}init(){}destroy(){}handleClick(e){this._adapter.notifyClick(e)}handleChange(e,t){this._adapter.notifyChange(e,t)}handleInputComplete(e){e.key===ro&&this._adapter.notifyEnter(e.target.value)}handleInputClear(e){this._adapter.notifyClear(e)}handleRangeInputClear(e){this.stopPropagation(e),this._adapter.notifyRangeInputClear(e)}handleRangeInputEnterPress(e,t){e.key===ro&&this._adapter.notifyEnter(t)}handleRangeInputEndKeyPress(e){"Tab"===e.key&&this._adapter.notifyTabPress(e)}handleRangeInputFocus(e,t){this._adapter.notifyRangeInputFocus(e,t)}formatShowText(e,t){const{type:i,dateFnsLocale:n,format:r,rangeSeparator:s}=this._adapter.getProps(),a=t||r||va(i);let o="";switch(i){case"date":case"dateTime":case"month":o=wa(e,a,void 0,n);break;case"dateRange":case"dateTimeRange":case"monthRange":o=wa(e,a,{groupSize:2,groupInnerSeparator:s},n)}return o}handleInsetInputChange(e){const{value:t,valuePath:i,insetInputValue:n}=e,{format:r,type:s,rangeSeparator:a}=this._adapter.getProps(),o=ba({type:s,format:r}),l=Y()(no(n),i,t),c=_a({inputValue:this.concatInsetInputValue({insetInputValue:l}),type:s,rangeSeparator:a}),h=this._autoFillTimeToInsetInputValue({insetInputValue:c,valuePath:i,format:o}),d=this.concatInsetInputValue({insetInputValue:h});this._adapter.notifyInsetInputChange({insetInputValue:h,format:o,insetInputStr:d})}_autoFillTimeToInsetInputValue(e){const{valuePath:t,insetInputValue:i,format:n}=e,{type:r,defaultPickerValue:s,dateFnsLocale:a}=this._adapter.getProps(),o=no(i),{nowDate:l,nextDate:c}=ka({defaultPickerValue:s,format:n,dateFnsLocale:a});if(r.includes("Time")){let e="";const i=Fi()(n.split(" "),"0",Ki.FORMAT_FULL_DATE),r=Fi()(n.split(" "),"1",Ki.FORMAT_TIME_PICKER);switch(t){case"monthLeft.dateInput":const t=o.monthLeft.dateInput;if(!o.monthLeft.timeInput&&t.length===i.length){cr(fa(o.monthLeft.dateInput,i))&&(e=lr(l,r),o.monthLeft.timeInput=e)}break;case"monthRight.dateInput":const n=o.monthRight.dateInput;if(!o.monthRight.timeInput&&n.length===i.length){cr(fa(n,i))&&(e=lr(c,r),o.monthRight.timeInput=e)}}}return o}getInsetInputPlaceholder(){const{type:e,format:t,rangeSeparator:i}=this._adapter.getProps(),n=ba({type:e,format:t});let r,s;switch(e){case"date":case"month":case"dateRange":r=n;break;case"dateTime":case"dateTimeRange":[r,s]=n.split(" ");break;case"monthRange":r=n+i+n}return{datePlaceholder:r,timePlaceholder:s}}getInsetInputValue(e){let{value:t,insetInputValue:i}=e;const{type:n,rangeSeparator:r,format:s}=this._adapter.getProps();let a="";if(y()(i))a=this.concatInsetInputValue({insetInputValue:i});else{const e=ba({format:s,type:n});a=this.formatShowText(t,e)}return _a({inputValue:a,type:n,rangeSeparator:r})}concatInsetDateAndTime(e){let{date:t,time:i}=e;return"".concat(t," ").concat(i)}concatInsetDateRange(e){let{rangeStart:t,rangeEnd:i}=e;const{rangeSeparator:n}=this._adapter.getProps();return"".concat(t).concat(n).concat(i)}concatInsetInputValue(e){let{insetInputValue:t}=e;const{type:i}=this._adapter.getProps();let n="";switch(i){case"date":case"month":case"monthRange":n=t.monthLeft.dateInput;break;case"dateRange":n=this.concatInsetDateRange({rangeStart:t.monthLeft.dateInput,rangeEnd:t.monthRight.dateInput});break;case"dateTime":n=this.concatInsetDateAndTime({date:t.monthLeft.dateInput,time:t.monthLeft.timeInput});break;case"dateTimeRange":const e=this.concatInsetDateAndTime({date:t.monthLeft.dateInput,time:t.monthLeft.timeInput}),i=this.concatInsetDateAndTime({date:t.monthRight.dateInput,time:t.monthRight.timeInput});n=this.concatInsetDateRange({rangeStart:e,rangeEnd:i})}return n}}const ao=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 20V8H20V20H4ZM2 4C2 2.89543 2.89543 2 4 2H20C21.1046 2 22 2.89543 22 4V20C22 21.1046 21.1046 22 20 22H4C2.89543 22 2 21.1046 2 20V4ZM6 10.5C6 10.2239 6.22386 10 6.5 10H8.5C8.77614 10 9 10.2239 9 10.5V12.5C9 12.7761 8.77614 13 8.5 13H6.5C6.22386 13 6 12.7761 6 12.5V10.5ZM6.5 15C6.22386 15 6 15.2239 6 15.5V17.5C6 17.7761 6.22386 18 6.5 18H8.5C8.77614 18 9 17.7761 9 17.5V15.5C9 15.2239 8.77614 15 8.5 15H6.5ZM10.5 10.5C10.5 10.2239 10.7239 10 11 10H13C13.2761 10 13.5 10.2239 13.5 10.5V12.5C13.5 12.7761 13.2761 13 13 13H11C10.7239 13 10.5 12.7761 10.5 12.5V10.5ZM11 15C10.7239 15 10.5 15.2239 10.5 15.5V17.5C10.5 17.7761 10.7239 18 11 18H13C13.2761 18 13.5 17.7761 13.5 17.5V15.5C13.5 15.2239 13.2761 15 13 15H11ZM15 10.5C15 10.2239 15.2239 10 15.5 10H17.5C17.7761 10 18 10.2239 18 10.5V12.5C18 12.7761 17.7761 13 17.5 13H15.5C15.2239 13 15 12.7761 15 12.5V10.5ZM15.5 15C15.2239 15 15 15.2239 15 15.5V17.5C15 17.7761 15.2239 18 15.5 18H17.5C17.7761 18 18 17.7761 18 17.5V15.5C18 15.2239 17.7761 15 17.5 15H15.5Z",fill:"currentColor"}))}),"calendar");var oo=i(9670);function lo(e){const{insetInputValue:t,valuePath:i,onFocus:n,onChange:r,placeholder:s,forwardRef:a}=e,l=Fi()(t,i);return o.createElement(ce,{value:l,onChange:(e,n)=>{r({value:e,event:n,insetInputValue:t,valuePath:i})},onFocus:n,placeholder:s,ref:a})}function co(e){const{insetInputValue:t,valuePath:i,type:n,onFocus:r,onChange:s,placeholder:a,disabled:l}=e;if(!n.includes("Time"))return null;const c=Fi()(t,i);return o.createElement(ce,{value:c,onChange:(e,n)=>{s({value:e,event:n,insetInputValue:t,valuePath:i})},onFocus:r,placeholder:a,disabled:l})}var ho=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class uo extends M.A{constructor(e){super(e),this.handleChange=(e,t)=>this.foundation.handleChange(e,t),this.handleEnterPress=e=>this.foundation.handleInputComplete(e),this.handleInputClear=e=>this.foundation.handleInputClear(e),this.handleRangeInputChange=(e,t,i)=>{const n=this.getRangeInputValue(e,t);this.foundation.handleChange(n,i)},this.handleRangeInputClear=e=>{this.foundation.handleRangeInputClear(e)},this.handleRangeInputEnterPress=(e,t,i)=>{const n=this.getRangeInputValue(t,i);this.foundation.handleRangeInputEnterPress(e,n)},this.handleRangeInputEndKeyPress=e=>{this.foundation.handleRangeInputEndKeyPress(e)},this.handleRangeInputFocus=(e,t)=>{this.foundation.handleRangeInputFocus(e,t)},this.handleRangeStartFocus=e=>{this.handleRangeInputFocus(e,"rangeStart")},this.handleInsetInputChange=e=>{this.foundation.handleInsetInputChange(e)},this.getRangeInputValue=(e,t)=>{const{rangeSeparator:i}=this.props;return"".concat(e).concat(i).concat(t)},this.foundation=new so(this.adapter)}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{updateIsFocusing:e=>this.setState({isFocusing:e}),notifyClick:function(){return e.props.onClick(...arguments)},notifyChange:function(){return e.props.onChange(...arguments)},notifyEnter:function(){return e.props.onEnterPress(...arguments)},notifyBlur:function(){return e.props.onBlur(...arguments)},notifyClear:function(){return e.props.onClear(...arguments)},notifyFocus:function(){return e.props.onFocus(...arguments)},notifyRangeInputClear:function(){return e.props.onRangeClear(...arguments)},notifyRangeInputFocus:function(){return e.props.onFocus(...arguments)},notifyTabPress:function(){return e.props.onRangeEndTabPress(...arguments)},notifyInsetInputChange:e=>this.props.onInsetInputChange(e)})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}formatText(e){return e&&e.length?this.foundation.formatShowText(e):""}renderRangePrefix(){const{prefix:e,insetLabel:t,prefixCls:i,disabled:n,rangeInputFocus:r}=this.props,s=e||t;return s?o.createElement("div",{className:"".concat(i,"-range-input-prefix"),onClick:e=>!n&&!r&&this.handleRangeStartFocus(e),"x-semi-prop":"prefix,insetLabel"},s):null}renderRangeSeparator(e,t){const{disabled:i,rangeSeparator:n}=this.props,r=d()({["".concat(Gi.PREFIX,"-range-input-separator")]:!0,["".concat(Gi.PREFIX,"-range-input-separator-active")]:(e||t)&&!i});return o.createElement("span",{onClick:e=>!i&&this.handleRangeStartFocus(e),className:r},n)}renderRangeClearBtn(e,t){const{showClear:i,prefixCls:n,disabled:r,clearIcon:s,showClearIgnoreDisabled:a}=this.props;return(e||t)&&i&&!(r&&!a)?o.createElement("div",{role:"button",tabIndex:0,"aria-label":"Clear range input value",className:"".concat(n,"-range-input-clearbtn"),onMouseDown:e=>this.handleRangeInputClear(e)},s||o.createElement(ee,{"aria-hidden":!0})):null}renderRangeSuffix(e){const{prefixCls:t,disabled:i,rangeInputFocus:n}=this.props,r=e?o.createElement("div",{className:"".concat(t,"-range-input-suffix"),onClick:e=>!i&&!n&&this.handleRangeStartFocus(e)},e):null;return r}renderRangeInput(e){const{placeholder:t,inputStyle:i,disabled:n,inputReadOnly:r,autofocus:s,size:a,text:l,suffix:c,inputCls:h,rangeInputStartRef:u,rangeInputEndRef:p,rangeInputFocus:g,prefixCls:f,rangeSeparator:m,borderless:v}=e,[y,b=""]=l.split(m)||[],_="large"===a?"default":"small",x=Array.isArray(t)?t:[t,t],[S,w]=x,C=d()("".concat(f,"-range-input-wrapper-start"),"".concat(f,"-range-input-wrapper"),{["".concat(f,"-range-input-wrapper-active")]:"rangeStart"===g&&!n,["".concat(f,"-range-input-wrapper-start-with-prefix")]:this.props.prefix||this.props.insetLabel,["".concat(f,"-borderless")]:v}),k=d()("".concat(f,"-range-input-wrapper-end"),"".concat(f,"-range-input-wrapper"),{["".concat(f,"-range-input-wrapper-active")]:"rangeEnd"===g&&!n,["".concat(f,"-borderless")]:v});return o.createElement(o.Fragment,null,this.renderRangePrefix(),o.createElement("div",{onClick:e=>!n&&this.handleRangeInputFocus(e,"rangeStart"),className:"".concat(h," ").concat(C)},o.createElement(ce,{borderless:v,size:_,style:i,disabled:n,readonly:r,placeholder:S,value:y,onChange:(e,t)=>this.handleRangeInputChange(e,b,t),onEnterPress:e=>this.handleRangeInputEnterPress(e,y,b),onFocus:e=>this.handleRangeInputFocus(e,"rangeStart"),autoFocus:s,ref:u})),this.renderRangeSeparator(y,b),o.createElement("div",{className:"".concat(h," ").concat(k),onClick:e=>!n&&this.handleRangeInputFocus(e,"rangeEnd")},o.createElement(ce,{borderless:v,size:_,style:i,disabled:n,readonly:r,placeholder:w,value:b,onChange:(e,t)=>this.handleRangeInputChange(y,e,t),onEnterPress:e=>this.handleRangeInputEnterPress(e,y,b),onFocus:e=>this.handleRangeInputFocus(e,"rangeEnd"),onKeyDown:this.handleRangeInputEndKeyPress,ref:p})),this.renderRangeClearBtn(y,b),this.renderRangeSuffix(c))}isRenderMultipleInputs(){const{type:e}=this.props;return e.includes("Range")&&"monthRange"!==e}renderInputInset(){const{type:e,handleInsetDateFocus:t,handleInsetTimeFocus:i,value:n,insetInputValue:r,prefixCls:s,rangeInputStartRef:a,rangeInputEndRef:l,density:c,insetInput:h}=this.props,d=this.foundation.getInsetInputValue({value:n,insetInputValue:r}),{dateStart:u,dateEnd:p,timeStart:g,timeEnd:f}=Fi()(h,"placeholder",{}),{datePlaceholder:m,timePlaceholder:v}=this.foundation.getInsetInputPlaceholder(),y="".concat(s,"-inset-input-wrapper"),b="".concat(s,"-inset-input-separator");return o.createElement("div",{className:y,"x-type":e},o.createElement(lo,{forwardRef:a,insetInputValue:d,placeholder:null!==u&&void 0!==u?u:m,valuePath:"monthLeft.dateInput",onChange:this.handleInsetInputChange,onFocus:e=>t(e,"rangeStart")}),o.createElement(co,{disabled:!d.monthLeft.dateInput,insetInputValue:d,placeholder:null!==g&&void 0!==g?g:v,type:e,valuePath:"monthLeft.timeInput",onChange:this.handleInsetInputChange,onFocus:i}),this.isRenderMultipleInputs()&&o.createElement(o.Fragment,null,o.createElement("div",{className:b},"compact"===c?null:"-"),o.createElement(lo,{forwardRef:l,insetInputValue:d,placeholder:null!==p&&void 0!==p?p:m,valuePath:"monthRight.dateInput",onChange:this.handleInsetInputChange,onFocus:e=>t(e,"rangeEnd")}),o.createElement(co,{disabled:!d.monthRight.dateInput,insetInputValue:d,placeholder:null!==f&&void 0!==f?f:v,type:e,valuePath:"monthRight.timeInput",onChange:this.handleInsetInputChange,onFocus:i})))}renderTriggerInput(){const e=this.props,{placeholder:t,type:i,value:n,inputValue:r,inputStyle:s,disabled:a,showClear:l,inputReadOnly:c,insetLabel:h,validateStatus:u,block:p,prefixCls:g,multiple:f,dateFnsLocale:m,onBlur:v,onClear:y,onFocus:b,prefix:_,autofocus:x,size:S,inputRef:w,rangeInputStartRef:C,rangeInputEndRef:k,onRangeClear:A,onRangeBlur:E,onRangeEndTabPress:T,rangeInputFocus:O,rangeSeparator:P,insetInput:M,insetInputValue:I,defaultPickerValue:R,showClearIgnoreDisabled:D}=e,j=ho(e,["placeholder","type","value","inputValue","inputStyle","disabled","showClear","inputReadOnly","insetLabel","validateStatus","block","prefixCls","multiple","dateFnsLocale","onBlur","onClear","onFocus","prefix","autofocus","size","inputRef","rangeInputStartRef","rangeInputEndRef","onRangeClear","onRangeBlur","onRangeEndTabPress","rangeInputFocus","rangeSeparator","insetInput","insetInputValue","defaultPickerValue","showClearIgnoreDisabled"]),F=o.createElement(ao,{"aria-hidden":!0}),B=o.createElement(oo.A,{"aria-hidden":!0}),N=i.includes("Time")?B:F;let z="";(0,L.A)(r)?n&&(z=this.formatText(n)):z=r;const H=d()({["".concat(g,"-input-readonly")]:c,["".concat(g,"-monthRange-input")]:"monthRange"===i}),V=Object.assign(Object.assign({},this.props),{text:z,suffix:N,inputCls:H});return this.isRenderMultipleInputs()?this.renderRangeInput(V):o.createElement(ce,Object.assign({},j,{ref:w,insetLabel:h,disabled:a,showClearIgnoreDisabled:D,readonly:c,className:H,style:s,hideSuffix:l,placeholder:"monthRange"===i&&Array.isArray(t)?t[0]+P+t[1]:t,onEnterPress:this.handleEnterPress,onChange:this.handleChange,onClear:this.handleInputClear,suffix:N,showClear:l,value:z,validateStatus:u,prefix:_,autoFocus:x,size:S,onBlur:v,onFocus:b}))}render(){const{insetInput:e}=this.props;return e?this.renderInputInset():this.renderTriggerInput()}}function po(e){(0,nn.A)(1,arguments);var t=(0,sn.A)(e);return t.setHours(0,0,0,0),t}function go(e,t){(0,nn.A)(2,arguments);var i=po(e),n=po(t);return i.getTime()===n.getTime()}uo.propTypes={borderless:c().bool,onClick:c().func,onChange:c().func,onEnterPress:c().func,onBlur:c().func,onClear:c().func,onFocus:c().func,value:c().array,disabled:c().bool,type:c().oneOf(Ki.TYPE_SET),showClear:c().bool,format:c().string,inputStyle:c().object,inputReadOnly:c().bool,insetLabel:c().node,validateStatus:c().string,prefix:c().node,prefixCls:c().string,dateFnsLocale:c().object.isRequired,placeholder:c().oneOfType([c().string,c().array]),rangeInputFocus:c().oneOfType([c().string,c().bool]),rangeInputStartRef:c().object,rangeInputEndRef:c().object,rangeSeparator:c().string,insetInput:c().oneOfType([c().bool,c().object]),insetInputValue:c().object,defaultPickerValue:c().oneOfType([c().string,c().number,c().object,c().array])},uo.defaultProps={borderless:!1,showClear:!0,onClick:Pe.l,onChange:Pe.l,onEnterPress:Pe.l,onBlur:Pe.l,onClear:Pe.l,onFocus:Pe.l,type:"date",inputStyle:{},inputReadOnly:!1,prefixCls:Gi.PREFIX,rangeSeparator:Ki.DEFAULT_SEPARATOR_RANGE};var fo=i(45921),mo=i.n(fo),vo=i(84048),yo=i.n(vo);function bo(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e),n=(0,sn.A)(t);return 12*(i.getFullYear()-n.getFullYear())+(i.getMonth()-n.getMonth())}function _o(e,t){return(0,nn.A)(2,arguments),Ca(e,12*(0,hn.A)(t))}function xo(e){(0,nn.A)(1,arguments);var t=(0,sn.A)(e),i=t.getFullYear(),n=t.getMonth(),r=new Date(0);return r.setFullYear(i,n+1,0),r.setHours(0,0,0,0),r.getDate()}function So(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e),n=(0,hn.A)(t),r=i.getFullYear(),s=i.getDate(),a=new Date(0);a.setFullYear(r,n,15),a.setHours(0,0,0,0);var o=xo(a);return i.setMonth(n,Math.min(s,o)),i}function wo(e,t){if((0,nn.A)(2,arguments),"object"!==(0,tn.A)(t)||null===t)throw new RangeError("values parameter must be an object");var i=(0,sn.A)(e);return isNaN(i.getTime())?new Date(NaN):(null!=t.year&&i.setFullYear(t.year),null!=t.month&&(i=So(i,t.month)),null!=t.date&&i.setDate((0,hn.A)(t.date)),null!=t.hours&&i.setHours((0,hn.A)(t.hours)),null!=t.minutes&&i.setMinutes((0,hn.A)(t.minutes)),null!=t.seconds&&i.setSeconds((0,hn.A)(t.seconds)),null!=t.milliseconds&&i.setMilliseconds((0,hn.A)(t.milliseconds)),i)}const Co=(e,t)=>{if(!t)return"";const i=new Date(t),n=G()(e)?e(i):i;return lr(new Date(n),Ki.FORMAT_FULL_DATE)};function ko(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e),n=(0,sn.A)(t);return i.getTime()<n.getTime()}function Ao(e){return"string"===typeof e}function Eo(e,t){return ko(Ao(e)?aa(e):e,Ao(t)?aa(t):t)}function To(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="";const r="number"===typeof t&&t<10?"0".concat(t):t.toString(),s="number"===typeof i&&i<10?"0".concat(i):i.toString();return n="".concat(String(e),"-").concat(r,"-").concat(s),n}function Oo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i={dayNumber:"",dateNumberFull:"",fullDate:""},n=xo(e),r=lr(e,"yyyy"),s=lr(e,"MM"),a=function(e){(0,nn.A)(1,arguments);var t=(0,sn.A)(e),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(0,0,0,0),t}(e),o=function(e){(0,nn.A)(1,arguments);var t=(0,sn.A)(e);return t.setDate(1),t.setHours(0,0,0,0),t}(e),l=Number(lr(o,"e",{weekStartsOn:t})),c=[];let h=[];for(let d=1;d<l;d++)h.push(i);for(let d=0;d<n;d++){const e=d+1,t=e<10?"0".concat(e):e.toString(),i=To(r,s,e);h.push({dayNumber:e,dayNumberFull:t,fullDate:i}),(7===h.length||i===lr(a,"yyyy-MM-dd"))&&(c.push(h),h=[])}return c}const Po=(e,t)=>{const i=Oo(e,t);return{monthText:lr(e,"yyyy-MM"),weeks:i,month:e}},Mo={month:bo,year:function(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e),n=(0,sn.A)(t);return i.getFullYear()-n.getFullYear()}},Io={prevMonth:function(e,t){return(0,nn.A)(2,arguments),Ca(e,-(0,hn.A)(t))},nextMonth:Ca,prevYear:function(e,t){return(0,nn.A)(2,arguments),_o(e,-(0,hn.A)(t))},nextYear:_o};class Ro extends k.A{constructor(e){super(Object.assign({},e)),this.newBiMonthPanelDate=[this.getState("monthLeft").pickerDate,this.getState("monthRight").pickerDate]}init(){const e=this.getProp("defaultValue");this.initDefaultPickerValue(),this.updateSelectedFromProps(e)}initDefaultPickerValue(){const e=fa(this.getProp("defaultPickerValue"));e&&cr(e)&&(this._updatePanelDetail(Ki.PANEL_TYPE_LEFT,{pickerDate:e}),this._updatePanelDetail(Ki.PANEL_TYPE_RIGHT,{pickerDate:Ca(e,1)}))}updateSelectedFromProps(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.getProp("type"),{selected:n,rangeStart:r,rangeEnd:s}=this.getStates();if(e&&(null===e||void 0===e?void 0:e.length))switch(i){case"date":this._initDatePickerFromValue(e,t);break;case"dateRange":this._initDateRangePickerFromValue(e);break;case"dateTime":this._initDateTimePickerFromValue(e);break;case"dateTimeRange":this._initDateTimeRangePickerFormValue(e)}else(Array.isArray(e)&&!e.length||!e)&&(mo()(n)&&n.size&&this._adapter.updateDaySelected(new Set),r&&this._adapter.setRangeStart(""),s&&this._adapter.setRangeEnd(""))}calcDisabledTime(e){const{disabledTime:t,type:i}=this.getProps();if("function"===typeof t&&e&&["dateTime","dateTimeRange"].includes(i)){const{rangeStart:n,rangeEnd:r,monthLeft:s}=this.getStates(),a=[];"dateTimeRange"===i?(n&&a.push(n),n&&r&&a.push(r)):s&&s.showDate&&a.push(s.showDate);const o=a.map((e=>e instanceof Date?e:aa(e)));return t("dateTimeRange"===i?o:o[0],e)}}_initDatePickerFromValue(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{monthLeft:i}=this._adapter.getStates(),n=Object.assign({},i);this._adapter.updateMonthOnLeft(n);const r=new Set,s=this._isMultiple();if(s?e.forEach((e=>{e&&r.add(lr(e,Ki.FORMAT_FULL_DATE))})):e[0]&&r.add(lr(e[0],Ki.FORMAT_FULL_DATE)),t)if(s){!(null===e||void 0===e?void 0:e.some((e=>e&&0===bo(e,i.pickerDate))))&&this.handleShowDateAndTime(Ki.PANEL_TYPE_LEFT,e[0]||n.pickerDate)}else this.handleShowDateAndTime(Ki.PANEL_TYPE_LEFT,e[0]||n.pickerDate);else this.handleShowDateAndTime(Ki.PANEL_TYPE_LEFT,n.pickerDate);this._adapter.updateDaySelected(r)}_initDateRangePickerFromValue(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getState("monthLeft"),n=this.getState("monthRight"),r=this._autoAdjustMonth(Object.assign(Object.assign({},i),{pickerDate:e[0]||i.pickerDate}),Object.assign(Object.assign({},n),{pickerDate:e[1]||n.pickerDate}));if(Array.isArray(e)&&e.filter((e=>e)).length>1)this.handleShowDateAndTime(Ki.PANEL_TYPE_LEFT,r.monthLeft.pickerDate),this.handleShowDateAndTime(Ki.PANEL_TYPE_RIGHT,r.monthRight.pickerDate);else{const t=e.find((e=>e));if(t){const e=Math.abs(bo(t,i.pickerDate))>0,s=Math.abs(bo(t,n.pickerDate))>0;e&&s&&(this.handleShowDateAndTime(Ki.PANEL_TYPE_LEFT,r.monthLeft.pickerDate),this.handleShowDateAndTime(Ki.PANEL_TYPE_RIGHT,r.monthRight.pickerDate))}}const s=t?Ki.FORMAT_DATE_TIME:Ki.FORMAT_FULL_DATE;let a=e[0]&&lr(e[0],s),o=e[1]&&lr(e[1],s);this._isNeedSwap(a,o)&&([a,o]=[o,a]),this._adapter.setRangeStart(a),this._adapter.setRangeEnd(o),this._adapter.setHoverDay(o)}_initDateTimePickerFromValue(e){this._initDatePickerFromValue(e)}_initDateTimeRangePickerFormValue(e){this._initDateRangePickerFromValue(e,!0)}destroy(){}handleSyncChangeMonths(e){const{panelType:t,target:i}=e,{type:n}=this._adapter.getProps(),{monthLeft:r,monthRight:s}=this._adapter.getStates();this.isRangeType(n)&&("right"===t&&0===bo(i,r.pickerDate)?this.handleYearOrMonthChange("prevMonth","left",1,!0):"left"===t&&0===bo(s.pickerDate,i)&&this.handleYearOrMonthChange("nextMonth","right",1,!0))}getTargetChangeDate(e){const{panelType:t,switchType:i}=e,{monthRight:n,monthLeft:r}=this._adapter.getStates(),s="left"===t?r.pickerDate:n.pickerDate;let a;switch(i){case"prevMonth":a=Ca(s,-1);break;case"nextMonth":a=Ca(s,1);break;case"prevYear":a=_o(s,-1);break;case"nextYear":a=_o(s,1)}return a}toMonth(e,t){const{type:i}=this._adapter.getProps(),n=this._getDiff("month",t,e);this.handleYearOrMonthChange(n<0?"prevMonth":"nextMonth",e,Math.abs(n),!1),this.isRangeType(i)&&this.handleSyncChangeMonths({panelType:e,target:t})}toYear(e,t){const i=this._getDiff("year",t,e);this.handleYearOrMonthChange(i<0?"prevYear":"nextYear",e,Math.abs(i),!1)}toYearMonth(e,t){this.toYear(e,t),this.toMonth(e,t)}isRangeType(e){const{type:t}=this.getProps(),i=e||t;return"string"===typeof i&&/range/i.test(i)}handleSwitchMonthOrYear(e,t){const{type:i,syncSwitchMonth:n}=this.getProps(),r=this.isRangeType(i);if(r&&n)this.handleYearOrMonthChange(e,"left",1,!0),this.handleYearOrMonthChange(e,"right",1,!0);else if(this.handleYearOrMonthChange(e,t),r){const i=this.getTargetChangeDate({panelType:t,switchType:e});this.handleSyncChangeMonths({panelType:t,target:i})}}prevMonth(e){this.handleSwitchMonthOrYear("prevMonth",e)}nextMonth(e){this.handleSwitchMonthOrYear("nextMonth",e)}prevYear(e){this.handleSwitchMonthOrYear("prevYear",e)}nextYear(e){this.handleSwitchMonthOrYear("nextYear",e)}_getDiff(e,t,i){const n=this._getPanelDetail(i);return Mo[e]&&Mo[e](t,n.pickerDate)}_getPanelDetail(e){return e===Ki.PANEL_TYPE_RIGHT?this.getState("monthRight"):this.getState("monthLeft")}localeFormat(e,t){return lr(e,t,{locale:this._adapter.getProp("dateFnsLocale")})}disposeCallbackArgs(e){let t=Array.isArray(e)?e:e&&[e]||[];const i=this.getProp("timeZone");xa(i)&&(t=t.map((e=>yr(e,i))));const n=this.getProp("type"),r=this.getProp("format")||va(n);let s,a;switch(n){case"date":case"dateTime":case"month":this._isMultiple()?(s=t.map((e=>e&&this.localeFormat(e,r))),a=[...t]):(s=t[0]&&this.localeFormat(t[0],r),[a]=t);break;case"dateRange":case"dateTimeRange":s=t.map((e=>e&&this.localeFormat(e,r))),a=[...t]}return{notifyValue:s,notifyDate:a}}handleYearOrMonthChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ki.PANEL_TYPE_LEFT,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{autoSwitchDate:r,type:s}=this.getProps(),{monthLeft:o,monthRight:l}=this.getStates(),c=this.isRangeType(s),h=c&&t===Ki.PANEL_TYPE_LEFT,d=this._getPanelDetail(t),{pickerDate:u}=d,p=(0,Io[e])(u,i),g=t===Ki.PANEL_TYPE_LEFT&&!a()(p,o.pickerDate)||t===Ki.PANEL_TYPE_RIGHT&&!a()(p,l.pickerDate);if(this._updatePanelDetail(t,{pickerDate:p}),g)if(c){if(h?this.newBiMonthPanelDate[0]=p:this.newBiMonthPanelDate[1]=p,!h||!n){const{notifyValue:e,notifyDate:t}=this.disposeCallbackArgs(this.newBiMonthPanelDate);this._adapter.notifyPanelChange(t,e)}}else{const{notifyValue:e,notifyDate:t}=this.disposeCallbackArgs(p);this._adapter.notifyPanelChange(t,e)}r&&this.updateDateAfterChangeYM(e,p)}updateDateAfterChangeYM(e,t){const{multiple:i,disabledDate:n,type:r}=this.getProps(),{selected:s,rangeStart:a,rangeEnd:o,monthLeft:l}=this.getStates(),c=["dateRange","dateTimeRange"].includes(e),h={closePanel:!1};if(!i&&!c&&s.size){const e=Array.from(s)[0];let i=wo(new Date(e),{year:t.getFullYear(),month:t.getMonth()});if("dateTime"===r&&(i=this._mergeDateAndTime(i,l.pickerDate)),n(i,{rangeStart:a,rangeEnd:o}))return;this._adapter.notifySelectedChange([i],h)}}_isMultiple(){return Boolean(this.getProp("multiple"))&&"date"===this.getProp("type")}_isRange(){}handleDayClick(e,t){const i=this.getProp("type");switch(!0){case"date"===i||"dateTime"===i:this.handleDateSelected(e,t);break;case"dateRange"===i||"dateTimeRange"===i:this.handleRangeSelected(e)}}handleDateSelected(e,t){const{max:i,type:n,isControlledComponent:r,dateFnsLocale:s}=this.getProps(),a=this._isMultiple(),{selected:o}=this.getStates(),l=this._getPanelDetail(t),c=new Set(a?[...o]:[]),{fullDate:h}=e,d=l.pickerDate,u="dateTime"===n?this._mergeDateAndTime(h,d):h;a?c.has(u)?c.delete(u):i&&c.size===i?this._adapter.notifyMaxLimit():c.add(u):c.add(u);const p=this.getValidDateFormat(),g=[...c].map((e=>fa(e,p,void 0,s)));this.handleShowDateAndTime(t,d),r||this._adapter.updateDaySelected(c),this._adapter.notifySelectedChange(g)}handleShowDateAndTime(e,t,i){const n=i||t;this._updatePanelDetail(e,{showDate:n,pickerDate:t})}_mergeDateAndTime(e,t){const i=this._adapter.getProp("dateFnsLocale"),n=lr(cr(e)?e:fa(e,Ki.FORMAT_FULL_DATE,void 0,i),Ki.FORMAT_FULL_DATE),r=lr(cr(t)?t:fa(t,Ki.FORMAT_TIME_PICKER,void 0,i),Ki.FORMAT_TIME_PICKER),s=this.getValidTimeFormat();return fa("".concat(n," ").concat(r),s,void 0,i)}handleRangeSelected(e){let{rangeStart:t,rangeEnd:i}=this.getStates();const{startDateOffset:n,endDateOffset:r,type:s,dateFnsLocale:a,rangeInputFocus:o,triggerRender:l}=this._adapter.getProps(),{fullDate:c}=e;let h=!1,d=!1;const u=(n||r)&&"dateRange"===s;u?(t=Co(n,c),i=Co(r,c)):"rangeEnd"===o?(i=c,t&&i&&Eo(i,t.trim().split(/\s+/)[0])&&(t=null,h=!0)):"rangeStart"!==o&&o||(t=c,t&&i&&Eo(i.trim().split(/\s+/)[0],t)&&(i=null,d=!0));/range/i.test(s)&&(u?(this._adapter.setRangeStart(t),this._adapter.setRangeEnd(i)):"rangeEnd"===o?(this._adapter.setRangeEnd(i),h&&this._adapter.setRangeStart(t),this._adapter.isAnotherPanelHasOpened("rangeEnd")&&t||this._adapter.setRangeInputFocus("rangeStart")):"rangeStart"!==o&&o||(this._adapter.setRangeStart(t),d&&this._adapter.setRangeEnd(i),this._adapter.isAnotherPanelHasOpened("rangeStart")&&i||this._adapter.setRangeInputFocus("rangeEnd")));const p=this.getValidDateFormat();if(t||i){const[e,n]=[fa(t,p,void 0,a),fa(i,p,void 0,a)];let r=[e,n];if("dateTimeRange"===s){const s=this.getState("monthLeft").pickerDate,a=this.getState("monthRight").pickerDate,o=t?this._mergeDateAndTime(t,s):null,l=i?this._mergeDateAndTime(i,a):null;r=go(e,n)&&Eo(l,o)?[o,o]:[o,l]}const o=!("dateRange"===s&&u);this._adapter.notifySelectedChange(r,{needCheckFocusRecord:o})}}_isNeedSwap(e,t){return e&&t&&Eo(t,e)}handleDayHover(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fullDate:""};const{fullDate:t}=e,{startDateOffset:i,endDateOffset:n,type:r}=this.getProps();if(this._adapter.setHoverDay(t),(i||n)&&"dateRange"===r){const e=Co(i,t),r=Co(n,t);this._adapter.setOffsetRangeStart(e),this._adapter.setOffsetRangeEnd(r)}}_autoAdjustMonth(e,t){let i=e,n=t;const r=bo(e.pickerDate,t.pickerDate);return r>0?(i=Object.assign({},t),n=Object.assign({},e)):0===r&&(i=e,n=Object.assign(Object.assign({},t),{pickerDate:Ca(t.pickerDate,1)})),{monthLeft:i,monthRight:n}}getValidTimeFormat(){const e=this.getProp("format")||Ki.FORMAT_TIME_PICKER,t=[];return(yo()(e,"h")||yo()(e,"H"))&&t.push("HH"),yo()(e,"m")&&t.push("mm"),yo()(e,"s")&&t.push("ss"),t.join(":")}getValidDateFormat(){return this.getProp("format")||ya(this.getProp("type"))}handleTimeChange(e,t){const{rangeEnd:i,rangeStart:n}=this.getStates(),r=this.getProp("dateFnsLocale"),s=e.timeStampValue,a=this.getProp("type"),o=this._getPanelDetail(t),{showDate:l}=o,c=new Date(s),h=this.getValidDateFormat(),d=t===Ki.PANEL_TYPE_RIGHT?i:n;let u,p,g;if("dateTimeRange"===a&&d){const e=fa(d,h,void 0,r);u=e.getFullYear(),p=e.getMonth(),g=e.getDate()}else u=l.getFullYear(),p=l.getMonth(),g=l.getDate();const f=c.getHours(),m=c.getMinutes(),v=c.getSeconds(),y=c.getMilliseconds(),b=new Date(...[u,p,g,f,m,v,y]);if("dateTimeRange"===a)this.handleShowDateAndTime(t,b,l),this._updateTimeInDateRange(t,b);else{const e=To(u,p+1,g);this.handleDateSelected({fullDate:e,fullValidDate:b},t),this.handleShowDateAndTime(t,b),this._adapter.notifySelectedChange([b])}}_updateTimeInDateRange(e,t){const{isControlledComponent:i,dateFnsLocale:n}=this.getProps();let r=this.getState("rangeStart"),s=this.getState("rangeEnd");const a=this.getValidDateFormat();if(r&&s){let o=fa(r,a,void 0,n),l=fa(s,a,void 0,n);e===Ki.PANEL_TYPE_RIGHT?(l=this._mergeDateAndTime(t,t),s=lr(l,Ki.FORMAT_DATE_TIME),this._isNeedSwap(r,s)&&([r,s]=[s,r],[o,l]=[l,o]),i||this._adapter.setRangeEnd(s)):(o=this._mergeDateAndTime(t,t),r=lr(o,Ki.FORMAT_DATE_TIME),this._isNeedSwap(r,s)&&([r,s]=[s,r],[o,l]=[l,o]),i||this._adapter.setRangeStart(r)),this._adapter.notifySelectedChange([o,l])}}_updatePanelDetail(e,t){const{monthLeft:i,monthRight:n}=this.getStates();e===Ki.PANEL_TYPE_RIGHT?this._adapter.updateMonthOnRight(Object.assign(Object.assign({},n),t)):this._adapter.updateMonthOnLeft(Object.assign(Object.assign({},i),t))}showYearPicker(e){this._updatePanelDetail(e,{isTimePickerOpen:!1,isYearPickerOpen:!0})}showTimePicker(e,t){this.getProp("disabledTimePicker")||this._updatePanelDetail(e,{isTimePickerOpen:!0,isYearPickerOpen:!1})}showDatePanel(e){this._updatePanelDetail(e,{isTimePickerOpen:!1,isYearPickerOpen:!1})}getYAMOpenType(){const{monthLeft:e,monthRight:t}=this._adapter.getStates(),i=e.isYearPickerOpen,n=t.isYearPickerOpen;return i&&n?"both":i?"left":n?"right":"none"}}const Do=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6185 4.39653C13.1272 4.92524 13.1272 5.78245 12.6185 6.31116L7.14483 12L12.6185 17.6888C13.1272 18.2176 13.1272 19.0748 12.6185 19.6035C12.1098 20.1322 11.285 20.1322 10.7763 19.6035L4.38153 12.9573C3.87282 12.4286 3.87282 11.5714 4.38153 11.0427L10.7763 4.39653C11.285 3.86782 12.1098 3.86782 12.6185 4.39653Z",fill:"currentColor"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.6185 4.39653C20.1272 4.92524 20.1272 5.78245 19.6185 6.31116L14.1448 12L19.6185 17.6888C20.1272 18.2176 20.1272 19.0748 19.6185 19.6035C19.1098 20.1322 18.285 20.1322 17.7763 19.6035L11.3815 12.9573C10.8728 12.4286 10.8728 11.5714 11.3815 11.0427L17.7763 4.39653C18.285 3.86782 19.1098 3.86782 19.6185 4.39653Z",fill:"currentColor"}))}),"double_chevron_left");const Lo=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2782 4.23933C16.864 4.82511 16.864 5.77486 16.2782 6.36065L10.6213 12.0175L16.2782 17.6744C16.864 18.2601 16.864 19.2099 16.2782 19.7957C15.6924 20.3815 14.7426 20.3815 14.1569 19.7957L7.43934 13.0782C6.85355 12.4924 6.85355 11.5426 7.43934 10.9568L14.1569 4.23933C14.7426 3.65354 15.6924 3.65354 16.2782 4.23933Z",fill:"currentColor"}))}),"chevron_left");const jo=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.43934 19.7957C6.85355 19.2099 6.85355 18.2601 7.43934 17.6744L13.0962 12.0175L7.43934 6.36065C6.85355 5.77486 6.85355 4.82511 7.43934 4.23933C8.02513 3.65354 8.97487 3.65354 9.56066 4.23933L16.2782 10.9568C16.864 11.5426 16.864 12.4924 16.2782 13.0782L9.56066 19.7957C8.97487 20.3815 8.02513 20.3815 7.43934 19.7957Z",fill:"currentColor"}))}),"chevron_right");const Fo=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.38153 4.39653C4.89024 3.86782 5.71502 3.86782 6.22373 4.39653L12.6185 11.0427C13.1272 11.5714 13.1272 12.4286 12.6185 12.9573L6.22373 19.6035C5.71502 20.1322 4.89024 20.1322 4.38153 19.6035C3.87282 19.0748 3.87282 18.2176 4.38153 17.6888L9.85517 12L4.38153 6.31116C3.87282 5.78245 3.87282 4.92524 4.38153 4.39653Z",fill:"currentColor"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3815 4.39653C11.8902 3.86782 12.715 3.86782 13.2237 4.39653L19.6185 11.0427C20.1272 11.5714 20.1272 12.4286 19.6185 12.9573L13.2237 19.6035C12.715 20.1322 11.8902 20.1322 11.3815 19.6035C10.8728 19.0748 10.8728 18.2176 11.3815 17.6888L16.8552 12L11.3815 6.31116C10.8728 5.78245 10.8728 4.92524 11.3815 4.39653Z",fill:"currentColor"}))}),"double_chevron_right"),Bo=Gi.NAVIGATION;class No extends o.PureComponent{constructor(e){super(e),this.navRef=o.createRef()}render(){const{forwardRef:e,monthText:t,onMonthClick:i,onNextMonth:n,onPrevMonth:r,onPrevYear:s,onNextYear:a,density:l,shouldBimonthSwitch:c,panelType:h}=this.props,d="borderless",u="compact"===l?"default":"large",p=!0,g="compact"===l?"small":"default",f=h===Ki.PANEL_TYPE_LEFT,m=h===Ki.PANEL_TYPE_RIGHT,v=c&&f,y={},b={};c&&m&&(y.visibility="hidden"),v&&(b.visibility="hidden");const _=e||this.navRef;return o.createElement("div",{className:Bo,ref:_},o.createElement($e,{key:"double-chevron-left","aria-label":"Previous year",icon:o.createElement(Do,{"aria-hidden":!0,size:u}),size:g,theme:d,noHorizontalPadding:p,onClick:s,style:y}),o.createElement($e,{key:"chevron-left","aria-label":"Previous month",icon:o.createElement(Lo,{"aria-hidden":!0,size:u}),size:g,onClick:r,theme:d,noHorizontalPadding:p,style:y}),o.createElement("div",{className:"".concat(Bo,"-month")},o.createElement(St,{onClick:i,theme:d,size:g},o.createElement("span",null,t))),o.createElement($e,{key:"chevron-right","aria-label":"Next month",icon:o.createElement(jo,{"aria-hidden":!0,size:u}),size:g,onClick:n,theme:d,noHorizontalPadding:p,style:b}),o.createElement($e,{key:"double-chevron-right","aria-label":"Next year",icon:o.createElement(Fo,{"aria-hidden":!0,size:u}),size:g,theme:d,noHorizontalPadding:p,onClick:a,style:b}))}}No.propTypes={monthText:c().string,density:c().string,onMonthClick:c().func,onNextMonth:c().func,onPrevMonth:c().func,onNextYear:c().func,onPrevYear:c().func,navPrev:c().node,navNext:c().node,shouldBimonthSwitch:c().bool,panelType:c().oneOf([Ki.PANEL_TYPE_LEFT,Ki.PANEL_TYPE_RIGHT])},No.defaultProps={monthText:"",onMonthClick:r(),onNextMonth:r(),onPrevMonth:r(),onNextYear:r(),onPrevYear:r()};const zo=e=>{let{weekStartsOn:t=0}=e;const i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let n=0;n<t;n++)i.push(i.shift());return i};class Ho extends k.A{constructor(e){super(Object.assign({},e))}init(){this._getToday(),this.getMonthTable()}_getToday(){const e=lr(new Date,"yyyy-MM-dd");this._adapter.updateToday(e)}getMonthTable(){const e=this._adapter.getProp("month"),t=this.getState("weeksRowNum");if(e){this.updateWeekDays();const i=this._adapter.getProp("weekStartsOn"),n=Po(e,i),{weeks:r}=n;this._adapter.updateMonthTable(n),(0,L.A)(t)?this._adapter.setWeeksRowNum(r.length):Array.isArray(r)&&r.length!==t&&this._adapter.setWeeksRowNum(r.length,(()=>{this._adapter.notifyWeeksRowNumChange(r.length)}))}}updateWeekDays(){const e=this._adapter.getProp("weekStartsOn"),t=zo({weekStartsOn:e});this._adapter.setWeekDays(t)}destroy(){}handleClick(e){this._adapter.notifyDayClick(e)}handleHover(e){this._adapter.notifyDayHover(e)}}function Vo(e,t){return function(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e),n=(0,sn.A)(t);return i.getTime()>n.getTime()}(Ao(e)?aa(e):e,Ao(t)?aa(t):t)}function Uo(e,t){return go(Ao(e)?aa(e):e,Ao(t)?aa(t):t)}function Wo(e,t){let{start:i,end:n}=t;const r=Ao(e)?aa(e):e,s=Ao(i)?aa(i):i,a=Ao(n)?aa(n):n;return ko(s,a)&&function(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e).getTime(),n=(0,sn.A)(t.start).getTime(),r=(0,sn.A)(t.end).getTime();if(!(n<=r))throw new RangeError("Invalid interval");return i>=n&&i<=r}(r,{start:s,end:a})&&!cn(r,s)&&!cn(r,a)}const Go=Gi.PREFIX;class Ko extends M.A{constructor(e){super(e),this.state={weekdays:[],month:{weeks:[],monthText:""},todayText:"",weeksRowNum:e.weeksRowNum},this.monthRef=o.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateToday:e=>this.setState({todayText:e}),setWeekDays:e=>this.setState({weekdays:e}),setWeeksRowNum:(e,t)=>this.setState({weeksRowNum:e},t),updateMonthTable:e=>this.setState({month:e}),notifyDayClick:e=>this.props.onDayClick(e),notifyDayHover:e=>this.props.onDayHover(e),notifyWeeksRowNumChange:e=>this.props.onWeeksRowNumChange(e)})}componentDidMount(){this.foundation=new Ho(this.adapter),this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e,t){e.month!==this.props.month&&this.foundation.getMonthTable()}getSingleDayStatus(e){const{rangeInputFocus:t}=this.props,{fullDate:i,todayText:n,selected:r,disabledDate:s,rangeStart:a,rangeEnd:o}=e,l={rangeStart:a,rangeEnd:o,rangeInputFocus:t},c=i===n,h=r.has(i);let d=s&&s(aa(i),l);return!d&&"rangeStart"===this.props.rangeInputFocus&&o&&this.props.focusRecordsRef&&this.props.focusRecordsRef.current.rangeEnd&&(d=Vo(i,o.trim().split(/\s+/)[0])),!d&&"rangeEnd"===this.props.rangeInputFocus&&a&&this.props.focusRecordsRef&&this.props.focusRecordsRef.current.rangeStart&&(d=Eo(i,a.trim().split(/\s+/)[0])),{isToday:c,isSelected:h,isDisabled:d}}getDateRangeStatus(e){const{rangeStart:t,rangeEnd:i,fullDate:n,hoverDay:r,offsetRangeStart:s,offsetRangeEnd:a,rangeInputFocus:o}=e,l=Boolean(t||i),c=Boolean(t&&i),h=s||a;if(!l)return{};const d=Uo(r,n);let u,p,g,f,m,v,y,b,_,x,S,w;return t&&(g=Uo(n,t),"rangeEnd"===o&&(u=Wo(n,{start:t,end:r}))),i&&(f=Uo(n,i),"rangeStart"===o&&(p=Wo(n,{start:r,end:i}))),!c&&l&&(m=d),h||(v=u||p||d),c&&(y=Wo(n,{start:t,end:i}),h||(b=g&&Vo(t,r),_=f&&Eo(i,r),x=d&&"rangeStart"===o,S=d&&"rangeEnd"===o,w=d&&Wo(r,{start:t,end:i}))),{isHoverDay:d,isSelectedStart:g,isSelectedEnd:f,isInRange:y,isHover:v,isSelectedStartAfterHover:b,isSelectedEndBeforeHover:_,isHoverDayInRange:w,isHoverDayInStartSelection:x,isHoverDayInEndSelection:S,isHoverDayAroundOneSelected:m}}getOffsetDateStatus(e){const{offsetRangeStart:t,offsetRangeEnd:i,rangeStart:n,rangeEnd:r,fullDate:s,hoverDay:a}=e;if(!(t||i))return{};const o=Wo(s,{start:n,end:r}),l=Uo(a,s),c=n&&Uo(s,n),h=r&&Uo(s,r),d=Boolean(n&&r),u=Uo(s,t),p=Uo(s,i),g=l;let f,m;d&&(f=o&&l);return Boolean(t&&i)&&(m=c||Wo(s,{start:t,end:i})||h),{isOffsetRangeStart:u,isOffsetRangeEnd:p,isHoverInOffsetRange:f,isHoverDayOffset:g,isInOffsetRange:m}}getDayStatus(e,t){const{fullDate:i}=e,{hoverDay:n,rangeStart:r,rangeEnd:s,todayText:a,offsetRangeStart:o,offsetRangeEnd:l,disabledDate:c,selected:h,rangeInputFocus:d}=t,u=this.getSingleDayStatus({fullDate:i,todayText:a,hoverDay:n,selected:h,disabledDate:c,rangeStart:r,rangeEnd:s}),p=this.getDateRangeStatus(Object.assign({fullDate:i,rangeStart:r,rangeEnd:s,hoverDay:n,offsetRangeStart:o,offsetRangeEnd:l,rangeInputFocus:d},u)),g=this.getOffsetDateStatus(Object.assign(Object.assign({offsetRangeStart:o,offsetRangeEnd:l,rangeStart:r,rangeEnd:s,fullDate:i,hoverDay:n},u),p));return Object.assign(Object.assign(Object.assign({},u),p),g)}renderDayOfWeek(){const{locale:e}=this.props,t=d()(Gi.WEEKDAY),i=d()("".concat(Go,"-weekday-item")),{weekdays:n}=this.state,r=n.map((t=>e.weeks[t]));return o.createElement("div",{role:"row",className:t},r.map(((e,t)=>o.createElement("div",{role:"columnheader",key:e+t,className:i},e))))}renderWeeks(){const{month:e}=this.state,{weeks:t}=e,{weeksRowNum:i}=this.props;let n={};if(i){n={height:i*Yi.WEEK_HEIGHT}}const r=d()(Gi.WEEKS);return o.createElement("div",{className:r,style:n},t.map(((e,t)=>this.renderWeek(e,t))))}renderWeek(e,t){const i=Gi.WEEK;return o.createElement("div",{role:"row",className:i,key:t},e.map(((e,t)=>this.renderDay(e,t))))}renderDay(e,t){const{todayText:i}=this.state,{renderFullDate:n,renderDate:r}=this.props,{fullDate:s,dayNumber:a}=e;if(!s)return o.createElement("div",{role:"gridcell",tabIndex:-1,key:a+t,className:Gi.DAY},o.createElement("span",null));const l=this.getDayStatus(e,Object.assign({todayText:i},this.props)),c=d()(Gi.DAY,{[Gi.DAY_TODAY]:l.isToday,[Gi.DAY_IN_RANGE]:l.isInRange,[Gi.DAY_HOVER]:l.isHover,[Gi.DAY_SELECTED]:l.isSelected,[Gi.DAY_SELECTED_START]:l.isSelectedStart,[Gi.DAY_SELECTED_END]:l.isSelectedEnd,[Gi.DAY_DISABLED]:l.isDisabled,[Gi.DAY_HOVER_DAY]:l.isHoverDayOffset,[Gi.DAY_IN_OFFSET_RANGE]:l.isInOffsetRange,[Gi.DAY_SELECTED_RANGE_HOVER]:l.isHoverInOffsetRange,[Gi.DAY_OFFSET_RANGE_START]:l.isOffsetRangeStart,[Gi.DAY_OFFSET_RANGE_END]:l.isOffsetRangeEnd,[Gi.DAY_SELECTED_START_AFTER_HOVER]:l.isSelectedStartAfterHover,[Gi.DAY_SELECTED_END_BEFORE_HOVER]:l.isSelectedEndBeforeHover,[Gi.DAY_HOVER_DAY_BEFORE_RANGE]:l.isHoverDayInStartSelection,[Gi.DAY_HOVER_DAY_AFTER_RANGE]:l.isHoverDayInEndSelection,[Gi.DAY_HOVER_DAY_AROUND_SINGLE_SELECTED]:l.isHoverDayAroundOneSelected}),h=d()({["".concat(Gi.DAY,"-main")]:!0}),u=[a,s,l],p=G()(n);return o.createElement("div",{role:"gridcell",tabIndex:l.isDisabled?-1:0,"aria-disabled":l.isDisabled,"aria-selected":l.isSelected,"aria-label":s,className:p?Gi.DAY:c,title:s,key:a+t,onClick:t=>!l.isDisabled&&this.foundation.handleClick(e),onMouseEnter:()=>this.foundation.handleHover(e),onMouseLeave:()=>this.foundation.handleHover()},p?n(...u):o.createElement("div",{className:h},G()(r)?r(a,s):o.createElement("span",null,a)))}render(){const{forwardRef:e,multiple:t}=this.props,i=this.renderDayOfWeek(),n=this.renderWeeks(),r=d()(Gi.MONTH),s=e||this.monthRef;return o.createElement("div",{role:"grid","aria-multiselectable":t,ref:s,className:r},i,n)}}Ko.propTypes={month:c().object,selected:c().object,rangeStart:c().string,rangeEnd:c().string,offsetRangeStart:c().string,offsetRangeEnd:c().string,onDayClick:c().func,onDayHover:c().func,weekStartsOn:c().number,disabledDate:c().func,weeksRowNum:c().number,onWeeksRowNumChange:c().func,renderDate:c().func,renderFullDate:c().func,hoverDay:c().string,startDateOffset:c().func,endDateOffset:c().func,rangeInputFocus:c().oneOfType([c().string,c().bool]),focusRecordsRef:c().object,multiple:c().bool},Ko.defaultProps={month:new Date,selected:new Set,rangeStart:"",rangeEnd:"",onDayClick:r(),onDayHover:r(),onWeeksRowNumChange:r(),weekStartsOn:Yi.WEEK_START_ON,disabledDate:Ji(),weeksRowNum:0};const Yo="time",Xo="timeRange",qo={PREFIX:"".concat(p._,"-timepicker"),RANGE_PICKER:"".concat(p._,"-timepicker-range-panel"),RANGE_PANEL_LISTS:"".concat(p._,"-timepicker-lists")},Zo={TYPES:[Yo,Xo],TYPE_TIME_PICKER:Yo,TYPE_TIME_RANGE_PICKER:Xo,DEFAULT_TYPE:Yo,DEFAULT_RANGE_SEPARATOR:" ~ ",DEFAULT_MULTIPLE_SEPARATOR:",",SIZE:q.SIZE,DEFAULT_FORMAT:"HH:mm:ss",DEFAULT_FORMAT_A:"a h:mm:ss",STATUS:g,DEFAULT_POSITION:{[Yo]:"bottomLeft",[Xo]:"bottomLeft"}},Qo={PREFIX:"".concat(p._,"-scrolllist"),SELECTED:"".concat(p._,"-scrolllist-item-selected")},$o=36,Jo=120;var el=i(71247),tl=i.n(el),il=i(32520),nl=i.n(il),rl=i(33411),sl=i.n(rl),al=i(98990),ol=i.n(al),ll=i(79889),cl=i.n(ll),hl=i(93950),dl=i.n(hl),ul=i(74255),pl=i.n(ul),gl=i(72125),fl=i(41885);class ml extends k.A{constructor(){super(...arguments),this._cachedSelectedNode=null}selectIndex(e,t){const{type:i,list:n}=this.getProps();if(e>-1&&Array.isArray(n)&&n.length&&(0,gl.A)(t)){const r=e%n.length,s=n[r],a=t.children[e];this._adapter.setSelectedNode(a),this._adapter.notifySelectItem(Object.assign(Object.assign({},s),{value:s.value,type:i,index:r}))}}selectNode(e,t){const{type:i,list:n}=this.getProps();if((0,gl.A)(e)&&(0,gl.A)(t)){const r=nl()(t.children,(t=>t===e))%n.length,s=nl()(t.children,(e=>e===this._cachedSelectedNode))%n.length,a=n[r];this._adapter.setSelectedNode(e),this._adapter.scrollToCenter(e),this._cachedSelectedNode!==e&&(this._cachedSelectedNode=e,s!==r&&this._adapter.notifySelectItem(Object.assign(Object.assign({},a),{value:a.value,type:i,index:r})))}}shouldAppend(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if((0,gl.A)(e)&&(0,gl.A)(t)){const n=e.querySelectorAll("li"),r=n[n.length-1],{list:s}=this.getProps();if(r){const e=t.getBoundingClientRect(),n=r.getBoundingClientRect(),a=n.height*s.length;let o=n.top,l=0;for(;o<=e.top+e.height*i;)l+=1,o+=a;return l}}return!1}shouldPrepend(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if((0,gl.A)(e)&&(0,gl.A)(t)){const n=e.querySelectorAll("li")[0],{list:r}=this.getProps();if(n){const e=t.getBoundingClientRect(),s=n.getBoundingClientRect(),a=s.height*r.length;let o=s.top,l=0;for(;o+s.height>=e.top-e.height*i;)l+=1,o-=a;return l}}return 0}initWheelList(e,t,i){const{list:n}=this.getProps();if((0,gl.A)(t)&&(0,gl.A)(e)&&n&&n.length){const r=e.children,s=(pl()(r,0,n.length),this.shouldPrepend(e,t)),a=this.shouldAppend(e,t);this._adapter.setState({prependCount:s,appendCount:a},i)}}adjustInfiniteList(e,t,i){const{list:n}=this.getProps();if((0,gl.A)(t)&&(0,gl.A)(e)&&n&&n.length){const i=e.querySelectorAll("li"),r=i.length,s=1,a=this.shouldPrepend(e,t,s),o=this.shouldAppend(e,t,s);if(a)for(let t=0;t<a;t++){const s=pl()(i,r-n.length*(t+1),r-n.length*t);(0,fl.Hs)(e,...s)}if(o)for(let t=0;t<o;t++){const r=pl()(i,t*n.length,(t+1)*n.length);(0,fl.BC)(e,...r)}}}getNearestNodeInfo(e,t){if((0,gl.A)(e)&&(0,gl.A)(t)){const i=t.getBoundingClientRect().top,n=e.querySelectorAll("li");let r=null,s=-1,a=1/0;return Array.from(n).map(((e,t)=>{const n=e.getBoundingClientRect().top,o=Math.abs(n-i);o<a&&!this._adapter.isDisabledIndex(t)&&(a=o,r=e,s=t)})),{nearestNode:r,nearestIndex:s}}}getTargetNode(e,t){if(e&&(0,gl.A)(t)){const i="li",n=e.target,r=t.querySelectorAll(i),s=this.getProp("list"),a=Array.isArray(s)?s.length:0;let o=-1,l=-1,c=null;const h=ol()(r,((e,t)=>{if(e===n||e.contains(n))return o=t,a>0&&(l=t%a),!0}));return l>-1&&(c=s[l]),{targetNode:h,targetIndex:o,indexInList:l,infoInList:c}}return null}}var vl=i(89002),yl=i.n(vl);function bl(e,t,i){return Math.min(Math.max(e,t),i)}function _l(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;const t=bl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,1,10),i=bl(e,.1,2);return e=>0===e||1===e?e:-t*Math.pow(2,10*(e-1))*Math.sin((e-1-i/(2*Math.PI)*Math.asin(1/t))*(2*Math.PI)/i)}const xl=(()=>{const e=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],t={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],_l],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],(e,t)=>i=>1-_l(e,t)(1-i)],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],(e,t)=>i=>i<.5?_l(e,t)(2*i)/2:1-_l(e,t)(-2*i+2)/2]},i={linear:[.25,.25,.75,.75]};for(const n of Object.keys(t))t[n].forEach(((t,r)=>{i["ease"+n+e[r]]=t}));return i})();function Sl(e){if("function"===typeof e)return e;let t=(e=e&&"string"===typeof e?e.trim():"linear").split("(")[0];const i=function(e){const t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((e=>parseFloat(e))):[]}(e);let n;return"cubic-bezier"===t||"cubicBezier"===t?yl()(...i.length?i:xl.linear):((!t||"string"!==typeof t||"string"===typeof t&&null==xl[t])&&(t="linear"),n=xl[t],"function"===typeof n?n(...i):i.length?yl()(...i):yl()(...n))}class wl{constructor(){this._eventMap=new Map}on(e,t){return e&&"function"===typeof t&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(t)),this}once(e,t){var i=this;if(e&&"function"===typeof t){const n=function(){t(...arguments),i.off(e,n)};this.on(e,n)}}off(e,t){if(e)if("function"===typeof t){const i=this._eventMap.get(e);if(Array.isArray(i)&&i.length){let e=-1;for(;(e=i.findIndex((e=>e===t)))>-1;)i.splice(e,1)}}else null==t&&this._eventMap.delete(e);return this}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return!!this._eventMap.has(e)&&(this._eventMap.get(e).forEach((e=>e(...i))),!0)}}function Cl(e){return Boolean(e&&"object"===typeof e&&(e.duration>0||"string"===typeof e.easing||"function"===typeof e.easing))}function kl(e){const t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]="number"===typeof e[i]?e[i]:e[i].val);return t}const Al=[0,0];function El(e,t,i,n,r,s,a){const o=i+(-r*(t-n)+-s*i)*e,l=t+o*e;return Math.abs(o)<a&&Math.abs(l-n)<a?(Al[0]=n,Al[1]=0,Al):(Al[0]=l,Al[1]=o,Al)}const Tl=Object.assign(Object.assign({},{tension:170,friction:26}),{precision:.01});function Ol(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Cl(t)){const e=Sl(t.easing),i="number"===typeof t.duration&&t.duration>0?t.duration:1e3;t=Object.assign(Object.assign({},t),{easing:e,duration:i})}let i=Object.assign(Object.assign(Object.assign({},Tl),t),{done:!1});if(e&&"object"===typeof e&&"val"in e){if(Cl(e)){const i=Sl(e.easing),n="number"===typeof e.duration&&e.duration>0?e.duration:parseInt(t.duration)||1e3;e=Object.assign(Object.assign({},e),{easing:i,duration:n})}i=Object.assign(Object.assign({},i),e)}else i=Object.assign(Object.assign({},i),{val:e});return i}const Pl=()=>Date.now(),Ml=1e3/60;class Il extends wl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._props=Object.assign({},e),this._config=Object.assign({},t),this.initStates()}_wrapConfig(e,t){t=t&&"object"===typeof t?t:this._config;const i={};for(const n of Object.keys(e))i[n]=Ol(e[n],t);return i}initStates(e,t){e=e&&"object"===typeof e?e:this._props,t=t&&"object"===typeof t?t:this._config;const{from:i,to:n}=e;if(this._from={},i)for(const a of Object.keys(i))this._from[a]="object"===typeof i[a]&&i[a].val?i[a].val:i[a];this._to=this._wrapConfig(n,t),this._delay=parseInt(t.delay)||0;const r=this._from&&kl(this._from)||kl(this._to),s=function(e){const t={},i=e&&Object.keys(e)||[];for(const n of i)t[n]=0;return t}(r);this._currentStyle=Object.assign({},r),this._currentVelocity=Object.assign({},s),this._lastIdealStyle=Object.assign({},r),this._lastIdealVelocity=Object.assign({},s),this.resetPlayStates(),this._frameCount=0,this._prevTime=0}animate(){null==this._timer&&(this._timer=requestAnimationFrame((e=>{const t=Pl();if(function(e,t,i,n,r){for(const s of Object.keys(t)){const a=t[s],o="number"===typeof a?a:a.val;if("object"!==typeof a||!a.done){if(Cl(a)&&n&&r&&a.duration){if(a.duration+n<=r||o!==e[s])return!1}else if("number"===typeof i[s]&&0!==i[s])return!1;if(e[s]!==o)return!1}}return!0}(this._currentStyle,this._to,this._currentVelocity,this._startedTime||t,t)||this._ended||this._stopped)return!this._wasAnimating||this._ended||this._stopped||(this._timer=setTimeout((()=>{clearTimeout(this._timer),this._timer=null,this._ended=!0,this.emit("rest",this.getCurrentStates())}),Ml)),void this.resetPlayStates();this._started||(this._started=!0,this.emit("start",this.getCurrentStates())),this._stopped=!1,this._paused=!1,this._wasAnimating=!0,0===this._startedTime&&(this._startedTime=t);const i=t,n=i-this._prevTime;this._prevTime=i,i-this._startedTime<this._delay&&(this._timer=null,this.animate());const r={},s={},a={},o={},l=this._to&&Object.keys(this._to)||[];for(const c of l){const e=this._to[c];this._accumulatedTime[c]="number"!==typeof this._accumulatedTime[c]?n:this._accumulatedTime[c]+n;const t=null!=this._from[c]&&"object"===typeof this._from[c]?this._from[c].val:this._from[c],l=e.val;if("number"===typeof e)a[c]=e,o[c]=0,r[c]=e,s[c]=0;else{let n=this._lastIdealStyle[c],h=this._lastIdealVelocity[c];if(Cl(this._config)||Cl(e)){const{easing:s,duration:o}=e;n=t+s((i-this._startedTime)/o)*(l-t),i>=this._startedTime+o&&(n=l,e.done=!0),r[c]=n,a[c]=n}else if(null!=l&&l===this._currentStyle[c])a[c]=l,o[c]=0,r[c]=l,s[c]=0;else{const t=(this._accumulatedTime[c]-Math.floor(this._accumulatedTime[c]/Ml)*Ml)/Ml,i=Math.floor(this._accumulatedTime[c]/Ml);for(let r=0;r<i;r++)[n,h]=El(Ml/1e3,n,h,e.val,e.tension,e.friction,e.precision);const[l,d]=El(Ml/1e3,n,h,e.val,e.tension,e.friction,e.precision);a[c]=n+(l-n)*t,o[c]=h+(d-h)*t,r[c]=n,s[c]=h,this._accumulatedTime[c]-=i*Ml}}}this._timer=null,this._currentStyle=Object.assign({},a),this._currentVelocity=Object.assign({},o),this._lastIdealStyle=Object.assign({},r),this._lastIdealVelocity=Object.assign({},s),this._destroyed||(this.emit("frame",this.getCurrentStates()),this.animate())})))}start(){this._prevTime=Pl(),this._startedTime=Pl(),this.animate()}end(){this._ended||(this._ended=!0,this._currentStyle=this.getFinalStates(),this.emit("frame",this.getFinalStates()),this.emit("rest",this.getFinalStates())),this.destroy()}pause(){this._paused||(this._pausedTime=Pl(),this._paused=!0,this.emit("pause",this.getCurrentStates()),this.destroy(),this._destroyed=!1)}resume(){if(this._started&&this._paused){const e=Pl()-this._pausedTime;this._paused=!1,this._startedTime+=e,this._prevTime+=e,this._pausedTime=0,this.emit("resume",this.getCurrentStates()),this.animate()}}stop(){this.destroy(),this._stopped||(this._stopped=!0,this.emit("stop",this.getInitialStates()),this.initStates())}destroy(){cancelAnimationFrame(this._timer),clearTimeout(this._timer),this._timer=null,this._destroyed=!0}resetPlayStates(){this._started=!1,this._stopped=!1,this._ended=!1,this._paused=!1,this._destroyed=!1,this._timer=null,this._wasAnimating=!1,this._accumulatedTime={},this._startedTime=0,this._pausedTime=0}reset(){this.destroy(),this.initStates()}reverse(){this.destroy();const e=Object.assign({},this._props),[t,i]=[e.to,e.from];e.from=t,e.to=i,this._props=Object.assign({},e),this.initStates()}getCurrentStates(){return Object.assign({},this._currentStyle)}getInitialStates(){return Object.assign({},kl(this._props.from))}getFinalStates(){return Object.assign({},kl(this._props.to))}}const Rl=(e,t,i)=>{const n=new Il({from:{scrollTop:e.scrollTop},to:{scrollTop:t}},{duration:i});return n.on("frame",(t=>{let{scrollTop:i}=t;e.scrollTop=i})),n},Dl=1e3/60,Ll=/^\s*$/,jl="wheel";class Fl extends M.A{constructor(){var e;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e=this,this._cacheNode=(e,t)=>e&&t&&Object.prototype.hasOwnProperty.call(this,e)&&(this[e]=t),this._cacheSelectedNode=e=>this._cacheNode("selectedNode",e),this._cacheWillSelectNode=e=>this._cacheNode("willSelectNode",e),this._cacheListNode=e=>this._cacheNode("list",e),this._cacheSelectorNode=e=>this._cacheNode("selector",e),this._cacheWrapperNode=e=>this._cacheNode("wrapper",e),this._isFirst=e=>{const{list:t}=this;if((0,gl.A)(e)&&(0,gl.A)(t)){const i=t.children;return 0===nl()(i,e)}return!1},this._isLast=e=>{const{list:t}=this;if((0,gl.A)(e)&&(0,gl.A)(t)){const{children:i}=t;return nl()(i,e)===i.length-1}return!1},this.indexIsSame=(e,t)=>{const{list:i}=this.props;if(i.length)return e%i.length===t%i.length},this.isDisabledIndex=e=>{const{list:t}=this.props;if(Array.isArray(t)&&t.length&&e>-1){const i=e%t.length;return this.isDisabledData(t[i])}return!1},this.isDisabledNode=e=>{const t=this.list;if((0,gl.A)(e)&&(0,gl.A)(t)){const i=nl()(t.children,(t=>t===e));return this.isDisabledIndex(i)}return!1},this.isDisabledData=e=>e&&"object"===typeof e&&e.disabled,this.isWheelMode=()=>this.props.mode===jl,this.addClassToNode=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qo.SELECTED;const{list:n}=e;if(t=t||e.selectedNode,(0,gl.A)(t)&&(0,gl.A)(n)){const{children:e}=n,r=new RegExp("\\s*".concat(i,"\\s*"),"g");sl()(e,(e=>{e.className=e.className&&e.className.replace(r," "),Ll.test(e.className)&&(e.className="")})),t.className&&!Ll.test(t.className)?t.className+=" ".concat(i):t.className=i}},this.getIndexByNode=e=>nl()(this.list.children,e),this.getNodeByIndex=e=>{if(e>-1)return ol()(this.list.children,((t,i)=>i===e));return ol()(this.list.children,(e=>!this.isDisabledNode(e)))},this.scrollToIndex=(e,t)=>{t="number"===typeof t?t:Jo,e=null==e?this.props.selectedIndex:e,this.scrollToNode(this.selectedNode,t)},this.scrollToNode=(e,t)=>{const{wrapper:i}=this,n=i.offsetHeight,r=this.getItmHeight(e),s=(e.offsetTop||this.list.children.length*r/2)-(n-r)/2;this.scrollToPos(s,t)},this.scrollToPos=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jo;const{wrapper:n}=e;if(i&&e.props.motion)if(e.scrollAnimation&&(e.scrollAnimation.destroy(),e.scrolling=!1),n.scrollTop===t){if(e.isWheelMode()){const t=e.foundation.getNearestNodeInfo(e.list,e.selector);e.addClassToNode(t.nearestNode)}}else e.scrollAnimation=Rl(n,t,i),e.scrollAnimation.on("rest",(()=>{if(e.isWheelMode()){const t=e.foundation.getNearestNodeInfo(e.list,e.selector);e.addClassToNode(t.nearestNode)}})),e.scrollAnimation.start();else n.scrollTop=t},this.scrollToSelectItem=e=>{const{nearestNode:t}=this.foundation.getNearestNodeInfo(this.list,this.selector);this.props.cycled&&this.throttledAdjustList(e,t),this.debouncedSelect(e,t)},this.scrollToCenter=(e,t,i)=>{if(e=e||this.selectedNode,t=t||this.wrapper,(0,gl.A)(e)&&(0,gl.A)(t)){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=t.scrollTop+(r.top-(n.top+n.height/2-r.height/2));this.scrollToPos(s,"number"===typeof i?i:Jo)}},this.clickToSelectItem=e=>{e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation();const{targetNode:t,infoInList:i}=this.foundation.getTargetNode(e,this.list);t&&i&&!i.disabled&&this.debouncedSelect(null,t)},this.getItmHeight=e=>e&&e.offsetHeight||$o,this.renderItemList=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{selectedIndex:i,mode:n,transform:r,list:s}=e.props;return s.map(((s,a)=>{const{transform:l}=s,c="function"===typeof l?l:r,h=i===a,u=d()({["".concat(Qo.PREFIX,"-item-sel")]:h&&n!==jl,["".concat(Qo.PREFIX,"-item-disabled")]:Boolean(s.disabled)});let p="";p=h&&"function"===typeof c?c(s.value,s.text):null==s.text?s.value:s.text;const g={};return e.isWheelMode()||s.disabled||(g.onClick=()=>e.foundation.selectIndex(a,e.list)),o.createElement("li",Object.assign({key:t+a},g,{className:u,role:"option","aria-selected":h,"aria-disabled":s.disabled}),p)}))},this.renderNormalList=()=>{const{list:e,className:t,style:i}=this.props,n=this.renderItemList(),r=d()("".concat(Qo.PREFIX,"-item"),t);return o.createElement("div",{style:i,className:r,ref:this._cacheWrapperNode},o.createElement("ul",{role:"listbox","aria-multiselectable":!1,"aria-label":this.props["aria-label"],ref:this._cacheListNode},n))},this.renderInfiniteList=()=>{const{list:e,cycled:t,className:i,style:n}=this.props,{prependCount:r,appendCount:s}=this.state,a=tl()(r).reduce(((e,t)=>{const i=this.renderItemList("pre_".concat(t,"_"));return e.unshift(...i),e}),[]),l=tl()(s).reduce(((e,t)=>{const i=this.renderItemList("app_".concat(t,"_"));return e.push(...i),e}),[]),c=this.renderItemList(),h=d()("".concat(Qo.PREFIX,"-list-outer"),{["".concat(Qo.PREFIX,"-list-outer-nocycle")]:!t}),u=d()("".concat(Qo.PREFIX,"-item-wheel"),i),p=d()("".concat(Qo.PREFIX,"-selector")),g=d()("".concat(Qo.PREFIX,"-shade"),"".concat(Qo.PREFIX,"-shade-pre")),f=d()("".concat(Qo.PREFIX,"-shade"),"".concat(Qo.PREFIX,"-shade-post"));return o.createElement("div",{className:u,style:n},o.createElement("div",{className:g}),o.createElement("div",{className:p,ref:this._cacheSelectorNode}),o.createElement("div",{className:f}),o.createElement("div",{className:h,ref:this._cacheWrapperNode,onScroll:this.scrollToSelectItem},o.createElement("ul",{role:"listbox","aria-label":this.props["aria-label"],"aria-multiselectable":!1,ref:this._cacheListNode,onClick:this.clickToSelectItem},a,c,l)))},this.state={prependCount:0,appendCount:0},this.selectedNode=null,this.willSelectNode=null,this.list=null,this.wrapper=null,this.selector=null,this.scrollAnimation=null,this.foundation=new ml(this.adapter),this.throttledAdjustList=cl()(((e,t)=>{this.foundation.adjustInfiniteList(this.list,this.wrapper,t)}),Dl),this.debouncedSelect=dl()(((e,t)=>{this._cacheSelectedNode(t),this.foundation.selectNode(t,this.list)}),33.333333333333336)}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{setState:(e,t)=>this.setState(Object.assign({},e),t),setPrependCount:e=>this.setState({prependCount:e}),setAppendCount:e=>this.setState({appendCount:e}),isDisabledIndex:this.isDisabledIndex,setSelectedNode:e=>this._cacheWillSelectNode(e),notifySelectItem:function(){return e.props.onSelect(...arguments)},scrollToCenter:this.scrollToCenter})}componentWillUnmount(){this.props.cycled&&(this.throttledAdjustList.cancel(),this.debouncedSelect.cancel())}componentDidMount(){this.foundation.init();const{mode:e,cycled:t,selectedIndex:i,list:n}=this.props,r=this.getNodeByIndex("number"===typeof i&&i>-1?i:0);this._cacheSelectedNode(r),this._cacheWillSelectNode(r),e===jl&&t?this.foundation.initWheelList(this.list,this.wrapper,(()=>{this.scrollToNode(r,0)})):this.scrollToNode(r,0)}componentDidUpdate(e){const{selectedIndex:t}=this.props;if(e.selectedIndex!==t){const i=this.getIndexByNode(this.willSelectNode);if(!this.indexIsSame(i,t)){const i=this.getNodeByOffset(this.selectedNode,t-e.selectedIndex,this.list);this._cacheWillSelectNode(i)}this._cacheSelectedNode(this.willSelectNode),this.scrollToIndex(t)}}getNodeByOffset(e,t,i){const{list:n}=this.props;if((0,gl.A)(e)&&(0,gl.A)(i)&&"number"===typeof t&&Array.isArray(n)&&n.length){t%=n.length;let i=this.getIndexByNode(e)+t;for(;i<0;)i+=n.length;if(t)return this.getNodeByIndex(i)}return e}render(){return this.isWheelMode()?this.renderInfiniteList():this.renderNormalList()}}Fl.propTypes={mode:c().oneOf(["normal","wheel"]),cycled:c().bool,list:c().array,selectedIndex:c().number,onSelect:c().func,transform:c().func,className:c().string,style:c().object,motion:c().oneOfType([c().func,c().bool]),type:c().oneOfType([c().string,c().number])},Fl.defaultProps={selectedIndex:0,motion:!0,list:[],onSelect:r(),cycled:!1,mode:jl};class Bl extends k.A{}var Nl=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class zl extends M.A{constructor(e){super(e),this.foundation=new Bl(this.adapter)}render(){const e=this.props,{children:t,header:i,footer:n,prefixCls:r,bodyHeight:s,className:a,style:l}=e,c=Nl(e,["children","header","footer","prefixCls","bodyHeight","className","style"]),h=d()(a,{[r||Qo.PREFIX]:!0}),u=d()({["".concat(r||Qo.PREFIX,"-header")]:!0});return o.createElement("div",Object.assign({className:h,style:l},this.getDataAttr(c)),i?o.createElement("div",{className:u},o.createElement("div",{className:"".concat(u,"-title"),"x-semi-prop":this.props["x-semi-header-alias"]||"header"},i),o.createElement("div",{className:"".concat(h,"-line")})):null,o.createElement("div",{className:"".concat(h,"-body"),style:{height:s||""},"x-semi-prop":"children"},t),n?o.createElement("div",{className:"".concat(h,"-footer"),"x-semi-prop":this.props["x-semi-footer-alias"]||"footer"},n):null)}}zl.Item=Fl,zl.propTypes={className:c().string,header:c().node,footer:c().node,children:c().node,bodyHeight:c().oneOfType([c().number,c().string])};const Hl=zl,Vl=36e5,Ul=24*Vl,Wl=(e,t)=>{let i="".concat(e);e<10&&(i="0".concat(e));let n=!1;return t&&t.indexOf(e)>=0&&(n=!0),{value:i,disabled:n}};function Gl(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=[];for(let s=0;s<e;s+=n)(!t||t.indexOf(s)<0||!i)&&r.push(s);return r}class Kl extends k.A{constructor(e){super(Object.assign({},e))}isAM(){return this.getProp("isAM")}initData(){const{timeStampValue:e,hourStep:t,disabledMinutes:i,disabledSeconds:n,hideDisabledOptions:r,minuteStep:s,secondStep:a}=this.getProps(),o=this.getValidFormat(),l=this.getDisplayDateFromTimeStamp(e),c=this.disabledHours(),h=i(l?l.getHours():null),d=n(l?l.getHours():null,l?l.getMinutes():null),u=Gl(24,c,r,t),p=Gl(60,h,r,s),g=Gl(60,d,r,a);return{showHour:Boolean(o.match(/HH|hh|H|h/g)),showMinute:Boolean(o.match(/mm/g)),showSecond:Boolean(o.match(/ss/g)),hourOptions:u,minuteOptions:p,secondOptions:g}}getPosition(){const e=this.getProp("position"),t=this.getProp("type")||Zo.DEFAULT_TYPE;return e||Zo.DEFAULT_POSITION[t]}getDefaultFormatIfNeed(){return this._isInProps("format")?this.getProp("format"):this.getProp("use12Hours")?Zo.DEFAULT_FORMAT_A:Zo.DEFAULT_FORMAT}disabledHours(){const{use12Hours:e,disabledHours:t}=this.getProps();let i=t&&t();return e&&Array.isArray(i)&&(i=this.isAM()?i.filter((e=>e<12)).map((e=>0===e?12:e)):i.map((e=>12===e?12:e-12))),i}getValidFormat(e){let t=(0,L.A)(e)?this.getProp("format"):e;return t=this.getDefaultFormatIfNeed(),t="string"===typeof t?t:Zo.DEFAULT_FORMAT,t}getDisplayDateFromTimeStamp(e){let t;return e&&(t=new Date(e)),e&&cr(t)?t:this.createDateDefault()}createDateDefault(){return new Date(parseInt(String(Date.now()/Ul),10)*Ul-8*Vl)}}const Yl=Kl;class Xl extends M.A{constructor(e){super(e),this.cacheRefCurrent=(e,t)=>{e&&"string"===typeof e&&this.adapter.setCache(e,t)},this.reselect=()=>{["ampm","hour","minute","second"].forEach((e=>{const t=this.adapter.getCache(e);t&&t.scrollToIndex&&t.scrollToIndex()}))},this.onItemChange=e=>{let{type:t,value:i,disabled:n}=e,{onChange:r,use12Hours:s,isAM:a,format:o,timeStampValue:l}=this.props;const c=this.foundation.getDisplayDateFromTimeStamp(l);if("hour"===t)s?a?c.setHours(Number(i)%12):c.setHours(Number(i)%12+12):c.setHours(Number(i));else if("minute"===t)c.setMinutes(Number(i));else if("ampm"===t){const e=i.toUpperCase();s&&("PM"===e&&(a=!1,c.getHours()<12&&c.setHours(c.getHours()%12+12)),"AM"===e&&(a=!0,c.getHours()>=12&&c.setHours(c.getHours()-12)))}else c.setSeconds(Number(i));r&&r({isAM:a,value:lr(c,o&&o.replace(/(\s+)A/g,"$1a")),timeStampValue:Number(c)})},this.onEnterSelectPanel=e=>{const{onCurrentSelectPanelChange:t}=this.props;t(e)},this.getDisplayDateFromTimeStamp=e=>this.foundation.getDisplayDateFromTimeStamp(e),this.foundation=new Yl(this.adapter),this.state=Object.assign({},this.foundation.initData())}componentDidUpdate(e,t){e.timeStampValue===this.props.timeStampValue&&e.format===this.props.format||this.setState(Object.assign({},this.foundation.initData()))}componentWillUnmount(){}componentDidMount(){}renderHourSelect(e,t){const{prefixCls:i,disabledHours:n,use12Hours:r,scrollItemProps:s}=this.props,{showHour:a,hourOptions:l}=this.state;if(!a)return null;const c=n();let h,d;r?(h=[12].concat(l.filter((e=>e<12&&e>0))),d=e%12||12):(h=l,d=e);const u="".concat(i,"-list-hour");return o.createElement(Fl,Object.assign({ref:e=>this.cacheRefCurrent("hour",e),mode:"normal",transform:e=>e+t.hour,className:u,list:h.map((e=>Wl(e,c))),selectedIndex:h.indexOf(d),type:"hour",onSelect:this.onItemChange},s))}renderMinuteSelect(e,t){const{prefixCls:i,disabledMinutes:n,timeStampValue:r,scrollItemProps:s}=this.props,{showMinute:a,minuteOptions:l}=this.state;if(!a)return null;const c=new Date(r),h=n&&n(c.getHours()),d="".concat(i,"-list-minute");return o.createElement(Fl,Object.assign({ref:e=>this.cacheRefCurrent("minute",e),mode:"normal",transform:e=>e+t.minute,list:l.map((e=>Wl(e,h))),selectedIndex:l.indexOf(e),type:"minute",onSelect:this.onItemChange,className:d},s))}renderSecondSelect(e,t){const{prefixCls:i,disabledSeconds:n,timeStampValue:r,scrollItemProps:s}=this.props,{showSecond:a,secondOptions:l}=this.state;if(!a)return null;const c=new Date(r),h=n&&n(c.getHours(),c.getMinutes()),d="".concat(i,"-list-second");return o.createElement(Fl,Object.assign({ref:e=>this.cacheRefCurrent("second",e),mode:"normal",transform:e=>String(e)+t.second,list:l.map((e=>Wl(e,h))),selectedIndex:l.indexOf(e),className:d,type:"second",onSelect:this.onItemChange},s))}renderAMPMSelect(e,t){const{prefixCls:i,use12Hours:n,isAM:r,scrollItemProps:s}=this.props;if(!n)return null;const a=[{value:"AM",text:e.AM||"\u4e0a\u5348"},{value:"PM",text:e.PM||"\u4e0b\u5348"}],l=r?0:1,c="".concat(i,"-list-ampm");return o.createElement(Fl,Object.assign({ref:e=>this.cacheRefCurrent("ampm",e),mode:"normal",className:c,list:a,selectedIndex:l,type:"ampm",onSelect:this.onItemChange},s))}render(){const{timeStampValue:e,panelHeader:t,panelFooter:i}=this.props,n=this.getDisplayDateFromTimeStamp(e);return o.createElement(pe.A,{componentName:"TimePicker"},((e,r)=>o.createElement(Hl,{header:t,footer:i,"x-semi-header-alias":"panelHeader","x-semi-footer-alias":"panelFooter"},this.renderAMPMSelect(e,r),this.renderHourSelect(n.getHours(),e),this.renderMinuteSelect(n.getMinutes(),e),this.renderSecondSelect(n.getSeconds(),e))))}}Xl.propTypes={format:c().string,defaultOpenValue:c().object,prefixCls:c().string,onChange:c().func,showHour:c().bool,showMinute:c().bool,showSecond:c().bool,disabledHours:c().func,disabledMinutes:c().func,disabledSeconds:c().func,hideDisabledOptions:c().bool,onCurrentSelectPanelChange:c().func,use12Hours:c().bool,isAM:c().bool,timeStampValue:c().any,scrollItemProps:c().object},Xl.defaultProps={disabledHours:r(),disabledMinutes:r(),disabledSeconds:r(),format:Zo.DEFAULT_FORMAT};const ql=Xl;function Zl(e,t){(0,nn.A)(2,arguments);var i=(0,sn.A)(e),n=(0,hn.A)(t);return isNaN(i.getTime())?new Date(NaN):(i.setFullYear(n),i)}class Ql extends k.A{constructor(e){super(Object.assign({},e))}init(){}destroy(){}selectYear(e,t){const{currentYear:i,currentMonth:n}=this.getStates(),{type:r}=this.getProps(),s=Ki.PANEL_TYPE_LEFT,a=Ki.PANEL_TYPE_RIGHT,o=no(i);if(o[t]=e.value,"monthRange"===r){const i=o[s]===o[a]&&n[s]>n[a];t===s&&e.value>o[a]||t===s&&i?o[a]=e.value+1:t===a&&i&&(o[s]=e.value-1)}this._adapter.setCurrentYear(o,(()=>this.autoSelectMonth(e,t,o))),this._adapter.notifySelectYear(o)}selectMonth(e,t){const{currentMonth:i,currentYear:n}=this.getStates(),{type:r}=this.getProps(),s=Ki.PANEL_TYPE_LEFT,a=Ki.PANEL_TYPE_RIGHT,o=no(i);o[t]=e.month,"monthRange"===r&&t===s&&n[s]===n[a]&&e.value>o[a]&&(o[a]=e.month+1),this._adapter.setCurrentMonth(o),this._adapter.notifySelectMonth(o)}autoSelectMonth(e,t,i){const{disabledDate:n,locale:r}=this._adapter.getProps(),{months:s,currentMonth:a}=this._adapter.getStates(),o=Zl(Date.now(),e.year);if(n(So(o,a[t]-1))){const e=s.findIndex((e=>{let{month:i}=e;return i===a[t]}));let r;if(r=s.slice(e).find((e=>{let{month:t}=e;return!n(So(o,t-1))})),r||(r=s.slice(0,e).find((e=>{let{month:t}=e;return!n(So(o,t-1))}))),r){const e=no(a);e[t]=r.month,this._adapter.setCurrentYearAndMonth(i,e),this._adapter.notifySelectYearAndMonth(i,e)}}}backToMain(){this._adapter.notifyBackToMain()}}const $l=(e,t)=>{const i=(new Date).getFullYear();let n="number"===typeof e?e:i-100,r="number"===typeof t?t:i+100;return r<n&&([n,r]=[r,n]),Array.from({length:r-n+1},((e,t)=>n+t))},Jl="".concat(p._,"-datepicker");class ec extends M.A{constructor(e){super(e),this.selectYear=(e,t)=>{this.foundation.selectYear(e,t)},this.selectMonth=(e,t)=>{this.foundation.selectMonth(e,t)},this.reselect=()=>{["yearRef","monthRef"].forEach((e=>{const t=this[e];t&&t.current&&t.current.scrollToIndex&&t.current.scrollToIndex()}))},this.backToMain=e=>{e.nativeEvent.stopImmediatePropagation(),this.foundation.backToMain()};const t=new Date;let{currentYear:i,currentMonth:n}=e;this.state={years:$l(e.startYear,e.endYear).map((e=>({value:e,year:e}))),months:Array(12).fill(0).map(((e,t)=>({value:t+1,month:t+1}))),currentYear:{left:i.left||t.getFullYear(),right:i.right||t.getFullYear()},currentMonth:{left:n.left||t.getMonth()+1,right:n.right||t.getMonth()+2}},this.yearRef=o.createRef(),this.monthRef=o.createRef(),this.foundation=new Ql(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setCurrentYear:(e,t)=>this.setState({currentYear:e},t),setCurrentMonth:e=>this.setState({currentMonth:e}),setCurrentYearAndMonth:(e,t)=>this.setState({currentYear:e,currentMonth:t}),notifySelectYear:e=>this.props.onSelect({currentMonth:this.state.currentMonth,currentYear:e}),notifySelectMonth:e=>this.props.onSelect({currentYear:this.state.currentYear,currentMonth:e}),notifySelectYearAndMonth:(e,t)=>this.props.onSelect({currentYear:e,currentMonth:t}),notifyBackToMain:()=>this.props.onBackToMain()})}static getDerivedStateFromProps(e,t){const i={};if(!a()(e.currentYear,t.currentYear)){const t=(new Date).getFullYear();i.currentYear={left:e.currentYear.left||t,right:e.currentYear.right||t}}if(!a()(e.currentMonth,t.currentMonth)){const t=(new Date).getMonth();i.currentMonth={left:e.currentMonth.left||t+1,right:e.currentMonth.right||t+2}}return i}renderColYear(e){const{years:t,currentYear:i,currentMonth:n,months:r}=this.state,{disabledDate:s,localeCode:a,yearCycled:l,yearAndMonthOpts:c}=this.props,h=So(Date.now(),n[e]-1),d=Ki.PANEL_TYPE_LEFT,u=Ki.PANEL_TYPE_RIGHT,p=t.map((t=>{let{value:n,year:a}=t;const o=r.every((e=>{let{month:t}=e;return s(wo(h,{year:a,month:t-1}))})),l=(t=>!(e!==u||!i[d])&&i[d]>t)(a);return{year:a,value:n,disabled:o||l}}));let g=e=>e;return"zh-CN"!==a&&"zh-TW"!==a||(g=e=>"".concat(e,"\u5e74")),o.createElement(Fl,Object.assign({ref:this.yearRef,cycled:l,list:p,transform:g,selectedIndex:t.findIndex((t=>t.value===i[e])),type:"year",onSelect:t=>this.selectYear(t,e),mode:"normal"},c))}renderColMonth(e){const{months:t,currentMonth:i,currentYear:n}=this.state,{locale:r,localeCode:s,monthCycled:a,disabledDate:l,yearAndMonthOpts:c}=this.props;let h=e=>e;const d=Zl(Date.now(),n[e]),u=Ki.PANEL_TYPE_LEFT,p=Ki.PANEL_TYPE_RIGHT;"zh-CN"!==s&&"zh-TW"!==s||(h=e=>"".concat(e,"\u6708"));const g=t.map((t=>{let{value:s,month:a}=t;const o=e===p&&i[u]&&n[u]===n[p]&&i[u]>a;return{month:a,disabled:l(So(d,a-1))||o,value:r.fullMonths[s]}})),f=g.findIndex((t=>t.month===i[e]));return o.createElement(Fl,Object.assign({ref:this.monthRef,cycled:a,list:g,transform:h,selectedIndex:f,type:"month",onSelect:t=>this.selectMonth(t,e),mode:"normal"},c))}renderPanel(e){return o.createElement(o.Fragment,null,o.createElement(Hl,null,this.renderColYear(e),this.renderColMonth(e)))}render(){const{locale:e,noBackBtn:t,density:i,presetPosition:n,renderQuickControls:r,renderDateInput:s,type:a}=this.props,l="".concat(Jl,"-yearmonth-header"),c="".concat(Jl,"-yearmonth-body"),h=e.selectDate,d="compact"===i?"default":"large",u="compact"===i?"small":"default",p=Ki.PANEL_TYPE_LEFT,g=Ki.PANEL_TYPE_RIGHT;let f=null;return f="month"===a?this.renderPanel(p):o.createElement("div",{className:c},this.renderPanel(p),this.renderPanel(g)),o.createElement(o.Fragment,null,t?null:o.createElement("div",{className:l},o.createElement($e,{noHorizontalPadding:!1,icon:o.createElement(Lo,{"aria-hidden":!0,size:d}),size:u,onClick:this.backToMain},o.createElement("span",null,h))),n?o.createElement("div",{style:{display:"flex"}},"left"===n&&"monthRange"!==a&&r,o.createElement("div",null,s,f),"right"===n&&"monthRange"!==a&&r):o.createElement(o.Fragment,null,s,f))}}ec.propTypes={currentYear:c().object,currentMonth:c().object,onSelect:c().func,locale:c().object,localeCode:c().string,monthCycled:c().bool,yearCycled:c().bool,noBackBtn:c().bool,disabledDate:c().func,density:c().string,presetPosition:c().oneOf(Ki.PRESET_POSITION_SET),renderQuickControls:c().node,renderDateInput:c().node,type:c().oneOf(Ki.TYPE_SET),startYear:c().number,endYear:c().number},ec.defaultProps={disabledDate:Ji(),monthCycled:!1,yearCycled:!1,noBackBtn:!1,onSelect:r(),type:"month"};const tc=ec;const ic=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM13.5 6.5V11.3787L17.0607 14.9393C17.6464 15.5251 17.6464 16.4749 17.0607 17.0607C16.4749 17.6464 15.5251 17.6464 14.9393 17.0607L10.9393 13.0607C10.658 12.7794 10.5 12.3978 10.5 12V6.5C10.5 5.67157 11.1716 5 12 5C12.8284 5 13.5 5.67157 13.5 6.5Z",fill:"currentColor"}))}),"clock"),nc=Gi.PREFIX;class rc extends M.A{constructor(e){super(e),this.cacheRefCurrent=(e,t)=>{"string"===typeof e&&e.length&&this.adapter.setCache(e,t)},this.leftIsYearOrTime=e=>{const{monthLeft:t}=e||this.state;return!(!t||!t.isTimePickerOpen&&!t.isYearPickerOpen)},this.rightIsYearOrTime=e=>{const{monthRight:t}=e||this.state;return!(!t||!t.isTimePickerOpen&&!t.isYearPickerOpen)},this.calcScrollListHeight=()=>{const e=this.adapter.getCache("wrap-".concat(Ki.PANEL_TYPE_LEFT)),t=this.adapter.getCache("wrap-".concat(Ki.PANEL_TYPE_RIGHT)),i=this.adapter.getCache("switch-".concat(Ki.PANEL_TYPE_LEFT)),n=this.adapter.getCache("switch-".concat(Ki.PANEL_TYPE_RIGHT)),r=e&&e.getBoundingClientRect(),s=t&&t.getBoundingClientRect();let a=r&&r.height||0,o=s&&s.height||0;return i&&(a+=i.getBoundingClientRect().height),n&&(o+=n.getBoundingClientRect().height),Math.max(a,o)},this.handleWeeksRowNumChange=(e,t)=>{const i=t===Ki.PANEL_TYPE_RIGHT,n=t===Ki.PANEL_TYPE_RIGHT,r=this.leftIsYearOrTime()&&this.rightIsYearOrTime();if(this.foundation.isRangeType()&&!r){const t={weeksRowNum:e,currentPanelHeight:this.calcScrollListHeight()};this.setState(t,(()=>{(this.leftIsYearOrTime()&&n||this.rightIsYearOrTime()&&i)&&this.reselect()}))}},this.reselect=()=>{["timepicker-".concat(Ki.PANEL_TYPE_LEFT),"timepicker-".concat(Ki.PANEL_TYPE_RIGHT),"yam-".concat(Ki.PANEL_TYPE_LEFT),"yam-".concat(Ki.PANEL_TYPE_RIGHT)].forEach((e=>{const t=this.adapter.getCache(e);t&&"function"===typeof t.reselect&&t.reselect()}))},this.getYAMOpenType=()=>this.foundation.getYAMOpenType();const t=e.format||va(e.type),{nowDate:i,nextDate:n}=ka({defaultPickerValue:e.defaultPickerValue,format:t,dateFnsLocale:e.dateFnsLocale}),r={selected:new Set},s={monthLeft:{pickerDate:i,showDate:i,isTimePickerOpen:!1,isYearPickerOpen:!1},monthRight:{pickerDate:n,showDate:n,isTimePickerOpen:!1,isYearPickerOpen:!1},maxWeekNum:0,hoverDay:"",rangeStart:e.rangeStart,rangeEnd:"",currentPanelHeight:0,offsetRangeStart:"",offsetRangeEnd:""};this.state=Object.assign(Object.assign({},r),s),this.foundation=new Ro(this.adapter)}get dateAdapter(){return{updateDaySelected:e=>this.setState({selected:e})}}get rangeAdapter(){return{setRangeStart:e=>this.setState({rangeStart:e}),setRangeEnd:e=>this.setState({rangeEnd:e}),setHoverDay:e=>this.setState({hoverDay:e}),setWeeksHeight:e=>this.setState({maxWeekNum:e}),setOffsetRangeStart:e=>this.setState({offsetRangeStart:e}),setOffsetRangeEnd:e=>this.setState({offsetRangeEnd:e})}}get adapter(){return Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),this.dateAdapter),this.rangeAdapter),{updateMonthOnLeft:e=>this.setState({monthLeft:e}),updateMonthOnRight:e=>this.setState({monthRight:e}),notifySelectedChange:(e,t)=>this.props.onChange(e,t),notifyMaxLimit:e=>this.props.onMaxSelect(e),notifyPanelChange:(e,t)=>this.props.onPanelChange(e,t),setRangeInputFocus:e=>this.props.setRangeInputFocus(e),isAnotherPanelHasOpened:e=>this.props.isAnotherPanelHasOpened(e)})}componentDidMount(){super.componentDidMount()}componentDidUpdate(e,t){const{defaultValue:i,defaultPickerValue:n}=this.props;e.defaultValue!==i&&this.foundation.updateSelectedFromProps(i),e.defaultPickerValue!==n&&this.foundation.initDefaultPickerValue();if(this.foundation.isRangeType()){const e=this.leftIsYearOrTime(t)&&this.rightIsYearOrTime(t),i=this.leftIsYearOrTime(t)&&!this.rightIsYearOrTime(t)||!this.leftIsYearOrTime(t)&&this.rightIsYearOrTime(t),n=this.leftIsYearOrTime()&&this.rightIsYearOrTime(),r=this.leftIsYearOrTime()&&!this.rightIsYearOrTime()||!this.leftIsYearOrTime()&&this.rightIsYearOrTime(),s=e&&r;i&&n?this.setState({currentPanelHeight:this.calcScrollListHeight()},this.reselect):s&&this.reselect()}}renderPanel(e,t){let i=d()("".concat(nc,"-month-grid-").concat(t));const{monthLeft:n,monthRight:r,currentPanelHeight:s}=this.state,{insetInput:a}=this.props,l=t===Ki.PANEL_TYPE_RIGHT?r:n,{isTimePickerOpen:c,isYearPickerOpen:h}=l,u=this.renderMonth(e,t),p=h?o.createElement("div",{className:"".concat(nc,"-yam")},this.renderYearAndMonth(t,l)):null,g=c?o.createElement("div",{className:"".concat(nc,"-tpk")},this.renderTimePicker(t,l)):null,f={},m=this.adapter.getCache("wrap-".concat(Ki.PANEL_TYPE_LEFT)),v=this.adapter.getCache("wrap-".concat(Ki.PANEL_TYPE_RIGHT)),y=t===Ki.PANEL_TYPE_RIGHT?v:m;this.foundation.isRangeType()?((h||c)&&(f.minWidth=y.getBoundingClientRect().width),this.leftIsYearOrTime()&&this.rightIsYearOrTime()&&!a&&(f.minHeight=s||this.calcScrollListHeight())):"year"!==this.props.type&&"month"!==this.props.type&&(c||h)&&(i=d()(i,"".concat(nc,"-yam-showing")));const b=!(h||c)?"date":h?"year":"time";return o.createElement("div",{className:i,key:t,style:f,"x-open-type":b},p,g,this.foundation.isRangeType()?u:h||c?null:u,this.renderSwitch(t))}showYearPicker(e,t){t.nativeEvent.stopImmediatePropagation(),this.foundation.showYearPicker(e)}renderMonth(e,t){const{selected:i,rangeStart:n,rangeEnd:r,hoverDay:s,maxWeekNum:a,offsetRangeStart:l,offsetRangeEnd:c}=this.state,{weekStartsOn:h,disabledDate:d,locale:u,localeCode:p,renderDate:g,renderFullDate:f,startDateOffset:m,endDateOffset:v,density:y,rangeInputFocus:b,syncSwitchMonth:_,multiple:x}=this.props;let S="";if(e){const t=e?lr(e,"yyyy"):"",i=e?lr(e,"L"):"",n=u.months[i];S=u.monthText.replace("${year}",t).replace("${month}",n)}let w={};const C=t===Ki.PANEL_TYPE_RIGHT?this.state.monthRight:this.state.monthLeft,k=this.foundation.isRangeType(),A=k&&_;return k&&C&&(C.isYearPickerOpen||C.isTimePickerOpen)&&(w={visibility:"hidden",position:"absolute",pointerEvents:"none"}),o.createElement("div",{ref:e=>this.cacheRefCurrent("wrap-".concat(t),e),style:w},o.createElement(No,{forwardRef:e=>this.cacheRefCurrent("nav-".concat(t),e),monthText:S,density:y,onMonthClick:e=>this.showYearPicker(t,e),onPrevMonth:()=>this.foundation.prevMonth(t),onNextMonth:()=>this.foundation.nextMonth(t),onNextYear:()=>this.foundation.nextYear(t),onPrevYear:()=>this.foundation.prevYear(t),shouldBimonthSwitch:A,panelType:t}),o.createElement(Ko,{locale:u,localeCode:p,forwardRef:e=>this.cacheRefCurrent("month-".concat(t),e),disabledDate:d,weekStartsOn:h,month:e,selected:i,rangeStart:n,rangeEnd:r,rangeInputFocus:b,offsetRangeStart:l,offsetRangeEnd:c,hoverDay:s,weeksRowNum:a,renderDate:g,renderFullDate:f,onDayClick:e=>this.foundation.handleDayClick(e,t),onDayHover:e=>this.foundation.handleDayHover(e,t),onWeeksRowNumChange:e=>this.handleWeeksRowNumChange(e,t),startDateOffset:m,endDateOffset:v,focusRecordsRef:this.props.focusRecordsRef,multiple:x}))}renderTimePicker(e,t){const{type:i,locale:n,format:r,hideDisabledOptions:s,timePickerOpts:a,dateFnsLocale:l}=this.props,{pickerDate:c}=t,h=d()("".concat(nc,"-time")),u=Object.assign(Object.assign({},a),{hideDisabledOptions:s}),p=this.foundation.calcDisabledTime(e);p&&["disabledHours","disabledMinutes","disabledSeconds"].forEach((e=>{p[e]&&(u[e]=p[e])}));const{rangeStart:g,rangeEnd:f}=this.state,m=this.foundation.getValidDateFormat();let v,y;"dateTimeRange"===i&&g&&f&&go(v=fa(g,m,void 0,l),y=fa(f,m,void 0,l))&&(e===Ki.PANEL_TYPE_RIGHT?g&&(u.startDate=v):f&&(u.endDate=y));const b=n.selectTime;return o.createElement("div",{className:h},o.createElement(ql,Object.assign({ref:t=>this.cacheRefCurrent("timepicker-".concat(e),t),panelHeader:b,format:r||Ki.FORMAT_TIME_PICKER,timeStampValue:c,onChange:t=>this.foundation.handleTimeChange(t,e)},u)))}renderYearAndMonth(e,t){const{pickerDate:i}=t,{locale:n,localeCode:r,density:s,yearAndMonthOpts:a,startYear:l,endYear:c}=this.props,h=i.getFullYear(),d=i.getMonth()+1;return o.createElement(tc,{ref:t=>this.cacheRefCurrent("yam-".concat(e),t),locale:n,localeCode:r,currentYear:{left:h,right:0},currentMonth:{left:d,right:0},onSelect:t=>this.foundation.toYearMonth(e,new Date(t.currentYear.left,t.currentMonth.left-1)),onBackToMain:()=>{this.foundation.showDatePanel(e);const t=this.adapter.getCache("wrap-".concat(e));t&&(t.style.height="auto")},density:s,yearAndMonthOpts:a,startYear:l,endYear:c})}renderSwitch(e){const{rangeStart:t,rangeEnd:i,monthLeft:n,monthRight:r}=this.state,{type:s,locale:a,disabledTimePicker:l,density:c,dateFnsLocale:h,insetInput:u}=this.props;if(!s.includes("Time")||u)return null;let p,g;const{FORMAT_SWITCH_DATE:f}=a.localeFormatToken,m=this.foundation.getValidTimeFormat(),v=this.foundation.getValidDateFormat();e===Ki.PANEL_TYPE_LEFT?(p=n,g=t?lr(fa(t,v,void 0,h),f):""):(p=r,g=i?lr(fa(i,v,void 0,h),f):"");const{isTimePickerOpen:y,showDate:b}=p,_=b?lr(b,f):"",x=b?lr(b,m):"",S=["default"].includes(c),w=d()("".concat(nc,"-switch")),C=d()({["".concat(nc,"-switch-date")]:!0,["".concat(nc,"-switch-date-active")]:!y}),k=d()({["".concat(nc,"-switch-time")]:!0,["".concat(nc,"-switch-time-disabled")]:l,["".concat(nc,"-switch-date-active")]:y}),A=d()("".concat(nc,"-switch-text"));return o.createElement("div",{className:w,ref:t=>this.adapter.setCache("switch-".concat(e),t)},o.createElement("div",{role:"button","aria-label":"Switch to date panel",className:C,onClick:t=>this.foundation.showDatePanel(e)},S&&o.createElement(ao,{"aria-hidden":!0}),o.createElement("span",{className:A},g||_)),o.createElement("div",{role:"button","aria-label":"Switch to time panel",className:k,onClick:t=>this.foundation.showTimePicker(e,!0)},S&&o.createElement(ic,{"aria-hidden":!0}),o.createElement("span",{className:A},x)))}render(){const{monthLeft:e,monthRight:t}=this.state,{type:i,insetInput:n,presetPosition:r,renderQuickControls:s,renderDateInput:a}=this.props,l=d()({["".concat(nc,"-month-grid")]:!0}),c=Ki.PANEL_TYPE_LEFT,h=Ki.PANEL_TYPE_RIGHT;let u=null;"date"===i||"dateTime"===i?u=this.renderPanel(e.pickerDate,c):"dateRange"===i||"dateTimeRange"===i?u=[this.renderPanel(e.pickerDate,c),this.renderPanel(t.pickerDate,h)]:"year"!==i&&"month"!==i||(u="year month");const p=this.getYAMOpenType();return o.createElement("div",{style:{display:"flex"}},"left"===r&&s,o.createElement("div",null,a,o.createElement("div",{className:l,"x-type":i,"x-panel-yearandmonth-open-type":p,"x-insetinput":n?"true":"false","x-preset-position":null===s?"null":r,ref:e=>this.cacheRefCurrent("monthGrid",e)},u)),"right"===r&&s)}}rc.propTypes={type:c().oneOf(Ki.TYPE_SET),defaultValue:c().array,defaultPickerValue:c().oneOfType([c().string,c().number,c().object,c().array]),multiple:c().bool,max:c().number,weekStartsOn:c().number,disabledDate:c().func,disabledTime:c().func,disabledTimePicker:c().bool,hideDisabledOptions:c().bool,navPrev:c().node,navNext:c().node,onMaxSelect:c().func,timePickerOpts:c().object,isControlledComponent:c().bool,rangeStart:c().oneOfType([c().string]),rangeInputFocus:c().oneOfType([c().bool,c().string]),locale:c().object,localeCode:c().string,format:c().string,renderDate:c().func,renderFullDate:c().func,startDateOffset:c().func,endDateOffset:c().func,autoSwitchDate:c().bool,density:c().string,dateFnsLocale:c().object.isRequired,timeZone:c().oneOfType([c().string,c().number]),syncSwitchMonth:c().bool,onPanelChange:c().func,focusRecordsRef:c().object,triggerRender:c().func,presetPosition:c().oneOf(Ki.PRESET_POSITION_SET),renderQuickControls:c().node,renderDateInput:c().node},rc.defaultProps={type:"date",rangeStart:"",multiple:!1,weekStartsOn:Yi.WEEK_START_ON,disabledDate:Ji(),onMaxSelect:r(),locale:{}};const sc=Gi.PREFIX,{Text:ac}=ut;class oc extends o.PureComponent{render(){const{presets:e,onPresetClick:t,type:i,presetPosition:n,insetInput:r,locale:s}=this.props,a="top"===n||"bottom"===n,l=a&&("dateRange"===i||"dateTimeRange"===i),c=a&&"month"===i,h=d()("".concat(sc,"-quick-control"),{["".concat(sc,"-quick-control-").concat(i)]:i,["".concat(sc,"-quick-control-").concat(n)]:!0}),u=d()({["".concat(sc,"-quick-control-header")]:!0}),p=d()({["".concat(sc,"-quick-control-").concat(n,"-content-wrapper")]:!0}),g=d()({["".concat(sc,"-quick-control-").concat(n,"-content")]:!l&&!c,["".concat(sc,"-quick-control-").concat(n,"-range-content")]:l,["".concat(sc,"-quick-control-").concat(n,"-month-content")]:c}),f=d()({["".concat(sc,"-quick-control-").concat(n,"-content-item")]:!l&&!c,["".concat(sc,"-quick-control-").concat(n,"-range-content-item")]:l,["".concat(sc,"-quick-control-").concat(n,"-month-content-item")]:c}),m=d()({["".concat(sc,"-quick-control-").concat(n,"-content-item-ellipsis")]:!l&&!c,["".concat(sc,"-quick-control-").concat(n,"-range-content-item-ellipsis")]:l,["".concat(sc,"-quick-control-").concat(n,"-month-content-item-ellipsis")]:c});return e.length?o.createElement("div",{className:h,"x-insetinput":r?"true":"false"},!a&&o.createElement("div",{className:u},s.presets),o.createElement("div",{className:p},o.createElement("div",{className:g},e.map(((e,i)=>{const n="function"===typeof e?e():e;return o.createElement(St,{size:"small",type:"primary",onClick:e=>t(n,e),key:i},o.createElement("div",{className:f},o.createElement(ac,{ellipsis:{showTooltip:!0},className:m},n.text)))}))))):null}}oc.propTypes={presets:c().array,presetPosition:c().oneOf(Ki.PRESET_POSITION_SET),onPresetClick:c().func,type:c().string,insetInput:c().oneOfType([c().bool,c().object]),locale:c().object},oc.defaultProps={presets:[],presetPosition:"bottom",onPresetClick:Pe.l};const lc=oc;function cc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{prefixCls:t,locale:i,onCancelClick:n,onConfirmClick:r}=e,s=d()("".concat(t,"-footer"));return o.createElement("div",{className:s},o.createElement(St,{theme:"borderless",onClick:n},Fi()(i,"footer.cancel","")),o.createElement(St,{theme:"solid",onClick:r},Fi()(i,"footer.confirm","")))}var hc=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class dc extends M.A{constructor(e){var t;super(e),t=this,this.setTriggerRef=e=>this.triggerElRef.current=e,this.handleSelectedChange=(e,t)=>this.foundation.handleSelectedChange(e,t),this.handleYMSelectedChange=e=>this.foundation.handleYMSelectedChange(e),this.disabledDisposeDate=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return t.foundation.disabledDisposeDate(e,...n)},this.disabledDisposeTime=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return t.foundation.disabledDisposeTime(e,...n)},this.handleOpenPanel=()=>this.foundation.openPanel(),this.handleInputChange=function(){return t.foundation.handleInputChange(...arguments)},this.handleInsetInputChange=e=>this.foundation.handleInsetInputChange(e),this.handleInputComplete=e=>this.foundation.handleInputComplete(e),this.handleInputBlur=e=>this.foundation.handleInputBlur(Fi()(e,"nativeEvent.target.value"),e),this.handleInputFocus=function(){return t.foundation.handleInputFocus(...arguments)},this.handleInputClear=e=>this.foundation.handleInputClear(e),this.handleTriggerWrapperClick=e=>this.foundation.handleTriggerWrapperClick(e),this.handleSetRangeFocus=e=>this.foundation.handleSetRangeFocus(e),this.handleRangeInputBlur=(e,t)=>this.foundation.handleRangeInputBlur(e,t),this.handleRangeInputClear=e=>this.foundation.handleRangeInputClear(e),this.handleRangeEndTabPress=e=>this.foundation.handleRangeEndTabPress(e),this.isAnotherPanelHasOpened=e=>"rangeStart"===e?this.focusRecordsRef.current.rangeEnd:this.focusRecordsRef.current.rangeStart,this.handleInsetDateFocus=(e,t)=>{const i=Fi()(this,"monthGrid.current.foundation");i&&(i.showDatePanel(Ki.PANEL_TYPE_LEFT),i.showDatePanel(Ki.PANEL_TYPE_RIGHT)),this.handleInputFocus(e,t)},this.handleInsetTimeFocus=()=>{const e=Fi()(this,"monthGrid.current.foundation");e&&(e.showTimePicker(Ki.PANEL_TYPE_LEFT),e.showTimePicker(Ki.PANEL_TYPE_RIGHT))},this.handlePanelVisibleChange=e=>{this.foundation.handlePanelVisibleChange(e)},this.handleConfirm=e=>this.foundation.handleConfirm(),this.handleCancel=e=>this.foundation.handleCancel(),this.renderFooter=(e,t)=>this.adapter.needConfirm()?o.createElement(cc,Object.assign({},this.props,{locale:e,localeCode:t,onConfirmClick:this.handleConfirm,onCancelClick:this.handleCancel})):null,this.renderPanel=(e,t,i)=>{const{dropdownClassName:n,dropdownStyle:r,density:s,topSlot:a,bottomSlot:l,presetPosition:c,type:h}=this.props,u=d()(Gi.PREFIX,{[Gi.PANEL_YAM]:this.adapter.typeIsYearOrMonth(),["".concat(Gi.PREFIX,"-compact")]:"compact"===s},n);return o.createElement("div",{ref:this.panelRef,className:u,style:r,"x-type":h},a&&o.createElement("div",{className:"".concat(Gi.PREFIX,"-topSlot"),"x-semi-prop":"topSlot"},a),"top"===c&&"monthRange"!==h&&this.renderQuickControls(),this.adapter.typeIsYearOrMonth()?this.renderYearMonthPanel(e,t):this.renderMonthGrid(e,t,i),"bottom"===c&&"monthRange"!==h&&this.renderQuickControls(),l&&o.createElement("div",{className:"".concat(Gi.PREFIX,"-bottomSlot"),"x-semi-prop":"bottomSlot"},l),this.renderFooter(e,t))},this.renderYearMonthPanel=(e,t)=>{const{density:i,presetPosition:n,yearAndMonthOpts:r,type:s,startYear:a,endYear:l}=this.props,c=this.state.value[0],h={left:0,right:0},d={left:0,right:0};if(Qi()(c)&&(h.left=c.getFullYear(),d.left=c.getMonth()+1),"monthRange"===s){const e=this.state.value[1];Qi()(e)&&(h.right=e.getFullYear(),d.right=e.getMonth()+1)}return o.createElement(tc,{locale:e,localeCode:t,disabledDate:this.disabledDisposeDate,noBackBtn:!0,monthCycled:!0,onSelect:this.handleYMSelectedChange,currentYear:h,currentMonth:d,density:i,presetPosition:n,renderQuickControls:this.renderQuickControls(),renderDateInput:this.renderDateInput(),type:s,yearAndMonthOpts:r,startYear:a,endYear:l})},this.wrapPopover=e=>{const{panelShow:t}=this.state,{direction:i}=this.context,n="rtl"===i?"bottomRight":"bottomLeft",{motion:r,zIndex:s,position:a=n,getPopupContainer:l,locale:c,localeCode:h,dateFnsLocale:d,stopPropagation:u,autoAdjustOverflow:p,spacing:g,dropdownMargin:f}=this.props;return o.createElement(U.A,{getPopupContainer:l,autoAdjustOverflow:p,zIndex:s,motion:r,margin:f,content:this.renderPanel(c,h,d),trigger:"custom",position:a,visible:t,stopPropagation:u,spacing:g,onVisibleChange:this.handlePanelVisibleChange},e)},this.state={panelShow:e.open||e.defaultOpen,isRange:!1,inputValue:null,value:[],cachedSelectedValue:[],prevTimeZone:null,rangeInputFocus:void 0,autofocus:e.autoFocus||this.isRangeType(e.type,e.triggerRender)&&(e.open||e.defaultOpen),insetInputValue:null,triggerDisabled:void 0},this.triggerElRef=o.createRef(),this.panelRef=o.createRef(),this.monthGrid=o.createRef(),this.inputRef=o.createRef(),this.rangeInputStartRef=o.createRef(),this.rangeInputEndRef=o.createRef(),this.focusRecordsRef=o.createRef(),this.focusRecordsRef.current={rangeStart:!1,rangeEnd:!1},this.foundation=new Sa(this.adapter)}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{togglePanel:(e,t)=>{this.setState({panelShow:e},t),e||(this.focusRecordsRef.current.rangeEnd=!1,this.focusRecordsRef.current.rangeStart=!1)},registerClickOutSide:()=>{this.clickOutSideHandler&&(this.adapter.unregisterClickOutSide(),this.clickOutSideHandler=null),this.clickOutSideHandler=e=>{const t=this.triggerElRef&&this.triggerElRef.current,i=this.panelRef&&this.panelRef.current,n=e.target,r=e.composedPath&&e.composedPath()||[n];t&&t.contains(n)||i&&i.contains(n)||r.includes(t)||r.includes(i)||(this.props.onClickOutSide(),this.adapter.needConfirm()||this.foundation.closePanel(e))},document.addEventListener("mousedown",this.clickOutSideHandler)},unregisterClickOutSide:()=>{document.removeEventListener("mousedown",this.clickOutSideHandler)},notifyBlur:function(){return e.props.onBlur(...arguments)},notifyFocus:function(){return e.props.onFocus(...arguments)},notifyClear:function(){return e.props.onClear(...arguments)},notifyChange:function(){return e.props.onChange(...arguments)},notifyCancel:function(){return e.props.onCancel(...arguments)},notifyConfirm:function(){return e.props.onConfirm(...arguments)},notifyOpenChange:function(){return e.props.onOpenChange(...arguments)},notifyPresetsClick:function(){return e.props.onPresetClick(...arguments)},updateValue:e=>this.setState({value:e}),updatePrevTimezone:e=>this.setState({prevTimeZone:e}),updateCachedSelectedValue:e=>{let t=e;e&&!Array.isArray(e)&&(t=[...e]),this.setState({cachedSelectedValue:t})},updateInputValue:e=>{this.setState({inputValue:e})},updateInsetInputValue:e=>{const{insetInput:t}=this.props;t&&!a()(e,this.state.insetInputValue)&&this.setState({insetInputValue:e})},needConfirm:()=>["dateTime","dateTimeRange"].includes(this.props.type)&&!0===this.props.needConfirm,typeIsYearOrMonth:()=>["month","year","monthRange"].includes(this.props.type),setRangeInputFocus:e=>{const{preventScroll:t}=this.props;switch(e!==this.state.rangeInputFocus&&this.setState({rangeInputFocus:e}),e){case"rangeStart":const e=Fi()(this,"rangeInputStartRef.current");e&&e.focus({preventScroll:t}),setTimeout((()=>{this.focusRecordsRef.current.rangeStart=!0}),0);break;case"rangeEnd":const i=Fi()(this,"rangeInputEndRef.current");i&&i.focus({preventScroll:t}),setTimeout((()=>{this.focusRecordsRef.current.rangeEnd=!0}),0);break;default:return}},couldPanelClosed:()=>this.focusRecordsRef.current.rangeStart&&this.focusRecordsRef.current.rangeEnd,isEventTarget:e=>e&&e.target===e.currentTarget,setInsetInputFocus:()=>{const{preventScroll:e}=this.props,{rangeInputFocus:t}=this.state;if("rangeEnd"===t){if(document.activeElement!==this.rangeInputEndRef.current){const t=Fi()(this,"rangeInputEndRef.current");t&&t.focus({preventScroll:e})}}else if(document.activeElement!==this.rangeInputStartRef.current){const t=Fi()(this,"rangeInputStartRef.current");t&&t.focus({preventScroll:e})}},setInputFocus:()=>{const{preventScroll:e}=this.props,t=Fi()(this,"inputRef.current");t&&t.focus({preventScroll:e})},setInputBlur:()=>{const e=Fi()(this,"inputRef.current");e&&e.blur()},setRangeInputBlur:()=>{const{rangeInputFocus:e}=this.state;if("rangeStart"===e){const e=Fi()(this,"rangeInputStartRef.current");e&&e.blur()}else if("rangeEnd"===e){const e=Fi()(this,"rangeInputEndRef.current");e&&e.blur()}this.adapter.setRangeInputFocus(!1)},setTriggerDisabled:e=>{this.setState({triggerDisabled:e})}})}isRangeType(e,t){return/range/i.test(e)&&!G()(t)}componentDidUpdate(e){a()(e.value,this.props.value)?this.props.timeZone!==e.timeZone&&this.foundation.initFromProps({value:this.state.value,timeZone:this.props.timeZone,prevTimeZone:e.timeZone}):this.foundation.initFromProps(Object.assign({},this.props)),e.open!==this.props.open&&(this.foundation.initPanelOpenStatus(),this.props.open||this.foundation.clearRangeInputFocus())}componentDidMount(){this._mounted=!0,super.componentDidMount()}componentWillUnmount(){this._mounted=!1,super.componentWillUnmount()}open(){this.foundation.open()}close(){this.foundation.close()}focus(e){this.foundation.focus(e)}blur(){this.foundation.blur()}renderMonthGrid(e,t,i){const{type:n,multiple:r,max:s,weekStartsOn:a,timePickerOpts:l,defaultPickerValue:c,format:h,hideDisabledOptions:d,disabledTimePicker:u,renderDate:p,renderFullDate:g,startDateOffset:f,endDateOffset:m,autoSwitchDate:v,density:y,syncSwitchMonth:b,onPanelChange:_,timeZone:x,triggerRender:S,insetInput:w,presetPosition:C,yearAndMonthOpts:k,startYear:A,endYear:E}=this.props,{cachedSelectedValue:T,rangeInputFocus:O}=this.state,P=T;return o.createElement(rc,{ref:this.monthGrid,locale:e,localeCode:t,dateFnsLocale:i,weekStartsOn:a,type:n,multiple:r,max:s,format:h,disabledDate:this.disabledDisposeDate,hideDisabledOptions:d,disabledTimePicker:u,disabledTime:this.disabledDisposeTime,defaultValue:P,defaultPickerValue:c,timePickerOpts:l,isControlledComponent:!this.adapter.needConfirm()&&this.isControlled("value"),onChange:this.handleSelectedChange,renderDate:p,renderFullDate:g,startDateOffset:f,endDateOffset:m,autoSwitchDate:v,density:y,rangeInputFocus:O,setRangeInputFocus:this.handleSetRangeFocus,isAnotherPanelHasOpened:this.isAnotherPanelHasOpened,syncSwitchMonth:b,onPanelChange:_,timeZone:x,focusRecordsRef:this.focusRecordsRef,triggerRender:S,insetInput:w,presetPosition:C,renderQuickControls:this.renderQuickControls(),renderDateInput:this.renderDateInput(),yearAndMonthOpts:k,startYear:A,endYear:E})}renderQuickControls(){const{presets:e,type:t,presetPosition:i,insetInput:n,locale:r}=this.props;return o.createElement(lc,{type:t,presets:e,insetInput:n,presetPosition:i,onPresetClick:(e,t)=>this.foundation.handlePresetClick(e,t),locale:r})}renderDateInput(){const{insetInput:e,dateFnsLocale:t,density:i,type:n,format:r,rangeSeparator:s,defaultPickerValue:a}=this.props,{insetInputValue:l,value:c}=this.state,h={dateFnsLocale:t,format:r,insetInputValue:l,rangeSeparator:s,type:n,value:c,handleInsetDateFocus:this.handleInsetDateFocus,handleInsetTimeFocus:this.handleInsetTimeFocus,onInsetInputChange:this.handleInsetInputChange,rangeInputStartRef:this.rangeInputStartRef,rangeInputEndRef:this.rangeInputEndRef,density:i,defaultPickerValue:a};return e?o.createElement(uo,Object.assign({},h,{insetInput:e})):null}renderInner(e){const{clearIcon:t,type:i,format:n,multiple:r,disabled:s,showClear:a,insetLabel:l,insetLabelId:c,placeholder:h,validateStatus:u,inputStyle:p,prefix:g,locale:f,dateFnsLocale:m,triggerRender:v,size:y,inputReadOnly:b,rangeSeparator:_,insetInput:x,defaultPickerValue:S,borderless:w}=this.props,{value:C,inputValue:k,rangeInputFocus:A,triggerDisabled:E}=this.state,T=this.isRangeType(i,v),O=s||x&&E,P=d()("".concat(Gi.PREFIX,"-input"),{["".concat(Gi.PREFIX,"-range-input")]:T,["".concat(Gi.PREFIX,"-range-input-").concat(y)]:T&&y,["".concat(Gi.PREFIX,"-range-input-active")]:T&&A&&!O,["".concat(Gi.PREFIX,"-range-input-disabled")]:T&&O,["".concat(Gi.PREFIX,"-range-input-").concat(u)]:T&&u,["".concat(Gi.PREFIX,"-borderless")]:w}),M=h||f.placeholder[i],I=Object.assign(Object.assign({},e),{showClearIgnoreDisabled:Boolean(x),placeholder:M,clearIcon:t,disabled:O,inputValue:k,value:C,defaultPickerValue:S,onChange:this.handleInputChange,onEnterPress:this.handleInputComplete,block:!0,inputStyle:p,showClear:a,insetLabel:l,insetLabelId:c,type:i,format:n,multiple:r,validateStatus:u,inputReadOnly:b||Boolean(x),onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onClear:this.handleInputClear,prefix:g,size:y,autofocus:this.state.autofocus,dateFnsLocale:m,rangeInputFocus:A,rangeSeparator:_,onRangeBlur:this.handleRangeInputBlur,onRangeClear:this.handleRangeInputClear,onRangeEndTabPress:this.handleRangeEndTabPress,rangeInputStartRef:x?null:this.rangeInputStartRef,rangeInputEndRef:x?null:this.rangeInputEndRef,inputRef:this.inputRef});return o.createElement("div",{role:"combobox","aria-label":Array.isArray(C)&&C.length?"Change date":"Choose date","aria-disabled":s,onClick:this.handleTriggerWrapperClick,className:P},"function"===typeof v?o.createElement(ue,Object.assign({},I,{triggerRender:v,componentName:"DatePicker",componentProps:Object.assign({},this.props)})):o.createElement(uo,Object.assign({},I)))}render(){const e=this.props,{style:t,className:i,prefixCls:n,type:r}=e,s=hc(e,["style","className","prefixCls","type"]),a=Object.assign({style:t,className:d()(i,{[n]:!0}),ref:this.setTriggerRef,"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"]},this.getDataAttr(s)),l=[];r.toLowerCase().includes("range")||l.push("borderless");const c=this.renderInner(qi()(this.props,l)),h=this.wrapPopover(c);return o.createElement("div",Object.assign({},a),h)}}dc.contextType=en.A,dc.propTypes={"aria-describedby":c().string,"aria-errormessage":c().string,"aria-invalid":c().bool,"aria-labelledby":c().string,"aria-required":c().bool,borderless:c().bool,type:c().oneOf(Ki.TYPE_SET),size:c().oneOf(Ki.SIZE_SET),clearIcon:c().node,density:c().oneOf(Ki.DENSITY_SET),defaultValue:c().oneOfType([c().string,c().number,c().object,c().array]),value:c().oneOfType([c().string,c().number,c().object,c().array]),defaultPickerValue:c().oneOfType([c().string,c().number,c().object,c().array]),disabledTime:c().func,disabledTimePicker:c().bool,hideDisabledOptions:c().bool,format:c().string,disabled:c().bool,multiple:c().bool,max:c().number,placeholder:c().oneOfType([c().string,c().array]),presets:c().array,presetPosition:c().oneOf(Ki.PRESET_POSITION_SET),onChange:c().func,onChangeWithDateFirst:c().bool,weekStartsOn:c().number,disabledDate:c().func,timePickerOpts:c().object,showClear:c().bool,onOpenChange:c().func,open:c().bool,defaultOpen:c().bool,motion:c().oneOfType([c().bool,c().func,c().object]),className:c().string,prefixCls:c().string,prefix:c().node,insetLabel:c().node,insetLabelId:c().string,zIndex:c().number,position:c().oneOf(P.P$.POSITION_SET),getPopupContainer:c().func,onCancel:c().func,onConfirm:c().func,needConfirm:c().bool,inputStyle:c().object,timeZone:c().oneOfType([c().string,c().number]),triggerRender:c().func,stopPropagation:c().oneOfType([c().bool,c().string]),autoAdjustOverflow:c().bool,onBlur:c().func,onFocus:c().func,onClear:c().func,style:c().object,autoFocus:c().bool,inputReadOnly:c().bool,validateStatus:c().oneOf(Ki.STATUS),renderDate:c().func,renderFullDate:c().func,spacing:c().oneOfType([c().number,c().object]),startDateOffset:c().func,endDateOffset:c().func,autoSwitchDate:c().bool,dropdownClassName:c().string,dropdownStyle:c().object,dropdownMargin:c().oneOfType([c().number,c().object]),topSlot:c().node,bottomSlot:c().node,dateFnsLocale:c().object,syncSwitchMonth:c().bool,onPanelChange:c().func,rangeSeparator:c().string,preventScroll:c().bool,yearAndMonthOpts:c().object,onClickOutSide:c().func},dc.__SemiComponentName__="DatePicker",dc.defaultProps=(0,$.bQ)(dc.__SemiComponentName__,{onChangeWithDateFirst:!0,borderless:!1,autoAdjustOverflow:!0,stopPropagation:!0,motion:!0,prefixCls:Gi.PREFIX,presetPosition:"bottom",zIndex:P.nL.DEFAULT_Z_INDEX,type:"date",size:"default",density:"default",multiple:!1,defaultOpen:!1,disabledHours:r(),disabledMinutes:r(),disabledSeconds:r(),hideDisabledOptions:!1,onBlur:r(),onFocus:r(),onClear:r(),onCancel:r(),onConfirm:r(),onChange:r(),onOpenChange:r(),onPanelChange:r(),onPresetClick:r(),weekStartsOn:Yi.WEEK_START_ON,disabledDate:Ji(),disabledTime:Ji(),inputReadOnly:!1,spacing:Yi.SPACING,autoSwitchDate:!0,syncSwitchMonth:!1,rangeSeparator:Ki.DEFAULT_SEPARATOR_RANGE,insetInput:!1,onClickOutSide:r()});const uc=Ui(o.forwardRef(((e,t)=>{const i=Object.assign({},e),{type:n,format:r,rangeSeparator:s}=i;return"string"===typeof r&&r&&(/[Hhms]+/.test(r)||("dateTime"===n?i.type="date":"dateTimeRange"===n&&(i.type="dateRange"))),s&&"string"===typeof s&&(i.rangeSeparator=" ".concat(s.trim()," ")),i.insetInput&&(i.position||(i.position=Ki.POSITION_INLINE_INPUT),i.position.includes("Over")&&!i.spacing&&(i.spacing=Yi.SPACING_INSET_INPUT)),o.createElement(en.A.Consumer,null,(e=>{let{timeZone:n}=e;return o.createElement(pe.A,{componentName:"DatePicker"},((e,r,s)=>o.createElement(dc,Object.assign({timeZone:n,localeCode:r,locale:e,dateFnsLocale:s},i,{ref:t}))))}))})),dc);var pc=i(12322),gc=i.n(pc);const fc={PREFIX:"".concat(p._,"-descriptions")},mc=["left","justify","plain","center"],vc=["small","medium","large"],yc=["horizontal","vertical"],bc=o.createContext(null);var _c=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const xc=fc.PREFIX,Sc="".concat(xc,"-key"),wc="".concat(xc,"-value");class Cc extends o.PureComponent{render(){const e=this.props,{itemKey:t,hidden:i,className:n,span:r,style:s,children:a}=e,l=_c(e,["itemKey","hidden","className","span","style","children"]),{align:c,layout:h}=this.context;if(i)return null;const d=o.createElement("td",{className:"".concat(xc,"-item"),colSpan:r||1},o.createElement("span",{className:Sc},t,":"),o.createElement("span",{className:wc},"function"===typeof a?a():a)),u=o.createElement(o.Fragment,null,o.createElement("th",{className:"".concat(xc,"-item ").concat(xc,"-item-th")},o.createElement("span",{className:Sc},t)),o.createElement("td",{className:"".concat(xc,"-item ").concat(xc,"-item-td"),colSpan:r?2*r-1:1},o.createElement("span",{className:wc},"function"===typeof a?a():a))),p="plain"===c?o.createElement("tr",Object.assign({className:n,style:s},(0,Qt.A)(l)),d):o.createElement("tr",Object.assign({className:n,style:s},(0,Qt.A)(l)),u);return"horizontal"===h?"plain"===c?d:u:p}}Cc.propTypes={itemKey:c().node,hidden:c().bool,className:c().string,style:c().object},Cc.contextType=bc;class kc extends k.A{constructor(e){super(Object.assign({},e))}getHorizontalList(){const{column:e,data:t,children:i}=this.getProps(),n=this._adapter.getColumns(),r=[],s={totalSpan:0,itemList:[]};for(const a of n)s.totalSpan+=a.span||1,s.itemList.push(a),s.totalSpan>=e&&(r.push(s.itemList),s.itemList=[],s.totalSpan=0);if(0!=s.itemList.length){const t=s.itemList[s.itemList.length-1];if(isNaN(t.span)){let i=0;s.itemList.forEach((e=>i+=isNaN(e.span)?1:e.span)),i<e&&(t.span=e-i+1)}r.push(s.itemList)}return r}}var Ac=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Ec=fc.PREFIX;class Tc extends M.A{constructor(e){super(e),this.renderChildrenList=()=>{const e=this.props,{layout:t,data:i,children:n}=e;if("horizontal"===t){return this.foundation.getHorizontalList().map(((e,t)=>o.createElement("tr",{key:t},e.map(((e,i)=>gc()(e)?o.createElement(Cc,Object.assign({itemKey:e.key},e,{key:t+"-"+i}),e.value):null)))))}return i&&i.length?i.map(((e,t)=>gc()(e)?o.createElement(Cc,Object.assign({itemKey:e.key},e,{key:t}),e.value):null)):n},this.foundation=new kc(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{getColumns:()=>{var e,t;return(null===(e=this.props.data)||void 0===e?void 0:e.length)?this.props.data:this.props.children?null===(t=o.Children.toArray(this.props.children))||void 0===t?void 0:t.map((e=>(0,o.isValidElement)(e)?Object.assign({value:e.props.children},e.props):[])):[]}})}render(){const e=this.props,{align:t,row:i,size:n,className:r,style:s,children:a,data:l,layout:c}=e,h=Ac(e,["align","row","size","className","style","children","data","layout"]),u=d()(Ec,r,{["".concat(Ec,"-").concat(t)]:!i,["".concat(Ec,"-double")]:i,["".concat(Ec,"-double-").concat(n)]:i,["".concat(Ec,"-horizontal")]:"horizontal"===c,["".concat(Ec,"-vertical")]:"vertical"===c});return o.createElement("div",Object.assign({className:u,style:s},(0,Qt.A)(h)),o.createElement("table",null,o.createElement("tbody",null,o.createElement(bc.Provider,{value:{align:t,layout:c}},this.renderChildrenList()))))}}Tc.Item=Cc,Tc.contextType=bc,Tc.propTypes={align:c().oneOf(mc),row:c().bool,size:c().oneOf(vc),style:c().object,className:c().string,data:c().arrayOf(c().shape({key:c().node,value:c().oneOfType([c().node,c().func]),hidden:c().bool,className:c().string,style:c().object})),layout:c().oneOf(yc),column:c().number},Tc.defaultProps={align:"center",row:!1,size:"medium",data:[],layout:"vertical",column:3};const Oc=Tc,Pc={PREFIX:"".concat(p._)};var Mc=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Ic=Pc.PREFIX,Rc=e=>{const{layout:t="horizontal",dashed:i,align:n="center",className:r,margin:s,style:a,children:l}=e,c=Mc(e,["layout","dashed","align","className","margin","style","children"]),h=d()("".concat(Ic,"-divider"),r,{["".concat(Ic,"-divider-horizontal")]:"horizontal"===t,["".concat(Ic,"-divider-vertical")]:"vertical"===t,["".concat(Ic,"-divider-dashed")]:!!i,["".concat(Ic,"-divider-with-text")]:l&&"horizontal"===t,["".concat(Ic,"-divider-with-text-").concat(n)]:l&&"horizontal"===t});let u={};return void 0!==s&&("vertical"===t?u={marginLeft:s,marginRight:s}:"horizontal"===t&&(u={marginTop:s,marginBottom:s})),o.createElement("div",Object.assign({},c,{className:h,style:Object.assign(Object.assign({},u),a)}),l&&"horizontal"===t?"string"===typeof l?o.createElement("span",{className:"".concat(Ic,"-divider_inner-text"),"x-semi-prop":"children"},l):l:null)},Dc={DIALOG:"".concat(p._,"-modal")},Lc=["small","medium","large","full-width"],jc=["ltr","rtl"];function Fc(e){return null!==(t=e)&&"object"===typeof t&&"function"===typeof e.then;var t}class Bc extends k.A{constructor(e){super(Object.assign({},e)),this.toggleDisplayNone=(e,t)=>{this._adapter.toggleDisplayNone(e,t)}}destroy(){this.afterHide()}handleCancel(e){var t;const i=this._adapter.notifyCancel(e);Fc(i)&&(this._adapter.setState({onCancelReturnPromiseStatus:"pending"}),null===(t=null===i||void 0===i?void 0:i.then((()=>{this._adapter.setState({onCancelReturnPromiseStatus:"fulfilled"})})))||void 0===t||t.catch((e=>{throw this._adapter.setState({onCancelReturnPromiseStatus:"rejected"}),e})))}handleOk(e){var t;const i=this._adapter.notifyOk(e);Fc(i)&&(this._adapter.setState({onOKReturnPromiseStatus:"pending"}),null===(t=null===i||void 0===i?void 0:i.then((()=>{this._adapter.setState({onOKReturnPromiseStatus:"fulfilled"})})))||void 0===t||t.catch((e=>{throw this._adapter.setState({onOKReturnPromiseStatus:"rejected"}),e})))}beforeShow(){this._adapter.disabledBodyScroll()}afterHide(){this._adapter.enabledBodyScroll(),this._adapter.notifyClose()}enabledBodyScroll(){this._adapter.enabledBodyScroll()}}var Nc=i(42459),zc=i(61902);class Hc extends k.A{constructor(e){super(Object.assign(Object.assign({},Hc.defaultAdapter),e)),this.handleKeyDown=e=>{const{closeOnEsc:t}=this.getProps();if(t&&e.keyCode===E.Ay.ESC)return e.stopPropagation(),void this.close(e)}}destroy(){this.handleKeyDownEventListenerUnmount(),this.modalDialogBlur(),this.prevFocusElementReFocus()}handleDialogMouseDown(){this._adapter.notifyDialogMouseDown()}handleMaskMouseUp(){this._adapter.notifyDialogMouseUp()}handleKeyDownEventListenerMount(){this._adapter.addKeyDownEventListener()}handleKeyDownEventListenerUnmount(){this._adapter.removeKeyDownEventListener()}getMouseState(){this._adapter.getMouseState()}handleMaskClick(e){const{dialogMouseDown:t}=this.getStates();e.target!==e.currentTarget||t||this.close(e)}close(e){this._adapter.notifyClose(e)}modalDialogFocus(){this._adapter.modalDialogFocus()}modalDialogBlur(){this._adapter.modalDialogBlur()}prevFocusElementReFocus(){this._adapter.prevFocusElementReFocus()}}var Vc=i(16757),Uc=i.n(Vc);class Wc{constructor(e,t){var i;this.addFocusRedirectListener=e=>(this.focusRedirectListenerList.push(e),()=>this.removeFocusRedirectListener(e)),this.removeFocusRedirectListener=e=>{this.focusRedirectListenerList=Uc()(this.focusRedirectListenerList,e)},this.destroy=()=>{var e;null===(e=this.container)||void 0===e||e.removeEventListener("keydown",this.onKeyPress)},this.shouldFocusRedirect=e=>{if(!this.enable)return!1;for(const t of this.focusRedirectListenerList){if(!t(e))return!1}return!0},this.focusElement=(e,t)=>{const{preventScroll:i}=this.options;null===e||void 0===e||e.focus({preventScroll:i}),t.preventDefault()},this.onKeyPress=e=>{if(e&&"Tab"===e.key){const t=Wc.getFocusableElements(this.container);t.length&&(e.shiftKey?this.handleContainerShiftTabKeyDown(t,e):this.handleContainerTabKeyDown(t,e))}},this.handleContainerTabKeyDown=(e,t)=>{const i=Wc.getActiveElement(),n=e[e.length-1]===i,r=e[0];n&&this.shouldFocusRedirect(r)&&this.focusElement(r,t)},this.handleContainerShiftTabKeyDown=(e,t)=>{const i=Wc.getActiveElement(),n=e[0]===i,r=e[e.length-1];n&&this.shouldFocusRedirect(r)&&this.focusElement(r,t)},Object.freeze(t),this.container=e,this.options=t,this.enable=null===(i=null===t||void 0===t?void 0:t.enable)||void 0===i||i,this.focusRedirectListenerList=(null===t||void 0===t?void 0:t.onFocusRedirectListener)?Array.isArray(t.onFocusRedirectListener)?[...t.onFocusRedirectListener]:[t.onFocusRedirectListener]:[],this.container.addEventListener("keydown",this.onKeyPress)}get enable(){return this._enable}set enable(e){this._enable=e}static getFocusableElements(e){if(!(0,gl.A)(e))return[];const t=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(e.querySelectorAll(t))}static getActiveElement(){return document?document.activeElement:null}}const Gc=Wc;var Kc=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};let Yc=0;class Xc extends M.A{constructor(e){super(e),this.onKeyDown=e=>{this.foundation.handleKeyDown(e)},this.onDialogMouseDown=()=>{this.foundation.handleDialogMouseDown()},this.onMaskMouseUp=()=>{this.foundation.handleMaskMouseUp()},this.onMaskClick=e=>{this.foundation.handleMaskClick(e)},this.close=e=>{this.foundation.close(e)},this.getMaskElement=()=>{const e=Kc(this.props,[]),{mask:t,maskClassName:i}=e;if(t){const t=d()("".concat(Dc.DIALOG,"-mask"),{});return o.createElement("div",Object.assign({key:"mask"},this.props.maskExtraProps,{className:d()(t,i),style:e.maskStyle}))}return null},this.renderCloseBtn=()=>{const{closable:e,closeIcon:t}=this.props;let i;if(e){const e=t||o.createElement(pt,{"x-semi-prop":"closeIcon"});i=o.createElement($e,{"aria-label":"close",className:"".concat(Dc.DIALOG,"-close"),key:"close-btn",onClick:this.close,type:"tertiary",icon:e,theme:"borderless",size:"small"})}return i},this.renderIcon=()=>{const{icon:e}=this.props;return e?o.createElement("span",{className:"".concat(Dc.DIALOG,"-icon-wrapper"),"x-semi-prop":"icon"},e):null},this.renderHeader=()=>{if("header"in this.props)return this.props.header;const{title:e}=this.props,t=this.renderCloseBtn(),i=this.renderIcon();return null===e||void 0===e?null:o.createElement("div",{className:"".concat(Dc.DIALOG,"-header")},i,o.createElement(ut.Title,{heading:5,className:"".concat(Dc.DIALOG,"-title"),id:"".concat(Dc.DIALOG,"-title"),"x-semi-prop":"title"},e),t)},this.renderBody=()=>{const{bodyStyle:e,children:t,title:i}=this.props,n=d()("".concat(Dc.DIALOG,"-body"),{["".concat(Dc.DIALOG,"-withIcon")]:this.props.icon}),r=this.renderCloseBtn(),s=this.renderIcon();return null!==i&&void 0!==i||"header"in this.props?o.createElement("div",{className:n,id:"".concat(Dc.DIALOG,"-body"),style:e,"x-semi-prop":"children"},t):o.createElement("div",{className:"".concat(Dc.DIALOG,"-body-wrapper")},s,o.createElement("div",{className:n,style:e,"x-semi-prop":"children"},t),r)},this.getDialogElement=()=>{const e=Kc(this.props,[]),t={},i=d()("".concat(Dc.DIALOG),{["".concat(Dc.DIALOG,"-centered")]:e.centered,["".concat(Dc.DIALOG,"-").concat(e.size)]:e.size});e.width&&(t.width=e.width),e.height&&(t.height=e.height),e.isFullScreen&&(t.width="100%",t.height="100%",t.margin="unset");const n=this.renderBody(),r=this.renderHeader(),s=e.footer?o.createElement("div",{className:"".concat(Dc.DIALOG,"-footer"),"x-semi-prop":"footer"},e.footer):null;return o.createElement("div",{key:"dialog-element",className:i,onMouseDown:this.onDialogMouseDown,style:Object.assign(Object.assign({},e.style),t),id:this.dialogId},o.createElement("div",{role:"dialog",ref:this.modalDialogRef,"aria-modal":"true","aria-labelledby":"".concat(Dc.DIALOG,"-title"),"aria-describedby":"".concat(Dc.DIALOG,"-body"),onAnimationEnd:e.onAnimationEnd,className:d()(["".concat(Dc.DIALOG,"-content"),e.contentClassName,{["".concat(Dc.DIALOG,"-content-fullScreen")]:e.isFullScreen}])},r,n,s))},this.state={dialogMouseDown:!1,prevFocusElement:Gc.getActiveElement()},this.foundation=new Hc(this.adapter),this.dialogId="dialog-".concat(Yc++),this.modalDialogRef=o.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyClose:e=>{this.props.onClose(e)},notifyDialogMouseDown:()=>{this.setState({dialogMouseDown:!0})},notifyDialogMouseUp:()=>{this.state.dialogMouseDown&&(this.timeoutId=setTimeout((()=>{this.setState({dialogMouseDown:!1})}),0))},addKeyDownEventListener:()=>{this.props.closeOnEsc&&document.addEventListener("keydown",this.foundation.handleKeyDown)},removeKeyDownEventListener:()=>{this.props.closeOnEsc&&document.removeEventListener("keydown",this.foundation.handleKeyDown)},getMouseState:()=>this.state.dialogMouseDown,modalDialogFocus:()=>{var e,t,i;const{preventScroll:n}=this.props;let r;if(this.modalDialogRef){const t=Gc.getActiveElement();r=this.modalDialogRef.current.contains(t),null===(e=this.focusTrapHandle)||void 0===e||e.destroy(),this.focusTrapHandle=new Gc(this.modalDialogRef.current,{preventScroll:n})}r||null===(i=null===(t=this.modalDialogRef)||void 0===t?void 0:t.current)||void 0===i||i.focus({preventScroll:n})},modalDialogBlur:()=>{var e,t;null===(e=this.modalDialogRef)||void 0===e||e.current.blur(),null===(t=this.focusTrapHandle)||void 0===t||t.destroy()},prevFocusElementReFocus:()=>{const{prevFocusElement:e}=this.state,{preventScroll:t}=this.props,i=Fi()(e,"focus");G()(i)&&e.focus({preventScroll:t})}})}componentDidMount(){var e;this.foundation.handleKeyDownEventListenerMount(),this.foundation.modalDialogFocus();const t=Gc.getFocusableElements(this.modalDialogRef.current);this.modalDialogRef.current.contains(document.activeElement)||null===(e=t[0])||void 0===e||e.focus()}componentWillUnmount(){clearTimeout(this.timeoutId),this.foundation.destroy()}render(){const e=this.props,{maskClosable:t,className:i,getPopupContainer:n,maskFixed:r,getContainerContext:s}=e,a=Kc(e,["maskClosable","className","getPopupContainer","maskFixed","getContainerContext"]),{direction:l}=this.context,c=d()(i,{["".concat(Dc.DIALOG,"-popup")]:n&&!r,["".concat(Dc.DIALOG,"-fixed")]:r,["".concat(Dc.DIALOG,"-rtl")]:"rtl"===l}),h=s(),u=this.getDataAttr(a),p=o.createElement("div",Object.assign({className:c},u),this.getMaskElement(),o.createElement("div",Object.assign({role:"none",className:d()({["".concat(Dc.DIALOG,"-wrap")]:!0,["".concat(Dc.DIALOG,"-wrap-center")]:this.props.centered}),onClick:t?this.onMaskClick:null,onMouseUp:t?this.onMaskMouseUp:null},this.props.contentExtraProps),this.getDialogElement()));return h&&h.Provider?o.createElement(h.Provider,{value:h.value},p):p}}Xc.contextType=en.A,Xc.propTypes={close:c().func,getContainerContext:c().func,contentClassName:c().string,maskClassName:c().string,onAnimationEnd:c().func,preventScroll:c().bool},Xc.defaultProps={close:r(),getContainerContext:r(),contentClassName:"",maskClassName:""};var qc=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Zc=e=>{const[t,i]=(0,o.useState)(!0),[n,r]=(0,o.useState)(),[s,a]=(0,o.useState)(),{direction:l}=e,{title:c,content:h,icon:u,type:p,onCancel:g,onOk:f,className:m}=e,v=qc(e,["title","content","icon","type","onCancel","onOk","className"]),y=(0,o.useCallback)((e=>{const t=f&&f(e);t&&t.then?(r(!0),t.then((function(){i(!1),r(!1)}),(e=>{r(!1)}))):i(!1)}),[f]),b=(0,o.useCallback)((e=>{const t=g&&g(e);t&&t.then?(a(!0),t.then((function(){i(!1),a(!1)}),(e=>{a(!1)}))):i(!1)}),[g]),_="".concat(Dc.DIALOG,"-confirm"),x=d()(m,_,{["".concat(_,"-rtl")]:"rtl"===l}),S=d()("".concat(Dc.DIALOG,"-").concat(p)),w=(0,$.uR)(u)?o.cloneElement(u,{className:"".concat(_,"-icon ").concat(S,"-icon"),size:"extra-large"}):u,C=null==c?null:o.createElement("span",{className:"".concat(_,"-title-text")},c),k=d()("".concat(_,"-content"),{["".concat(_,"-content-withIcon")]:e.icon});return o.createElement(dh,Object.assign({className:x,title:C,confirmLoading:n,cancelLoading:s,onOk:y,onCancel:b,icon:w,visible:t},v),o.createElement("div",{className:k,"x-semi-prop":"content"},h))};var Qc=i(23463);function $c(e){const t=document.createElement("div");document.body.appendChild(t);let i=Object.assign({},e);const n=()=>{ye.unmountComponentAtNode(t)&&t.parentNode&&t.parentNode.removeChild(t);for(let e=0;e<ch.length;e++){if(ch[e]===s){ch.splice(e,1);break}}};function r(i){const{afterClose:r}=i;ye.render(o.createElement(Zc,Object.assign({},i,{afterClose:function(){null===r||void 0===r||r(...arguments),n()},motion:e.motion})),t)}function s(){i=Object.assign(Object.assign({},i),{visible:!1}),r(i)}return r(i),ch.push(s),{destroy:s,update:function(e){i=Object.assign(Object.assign({},i),e),r(i)}}}function Jc(e){return Object.assign({type:"info",icon:o.createElement(mt,null)},e)}function eh(e){return Object.assign({type:"success",icon:o.createElement(ft,null)},e)}function th(e){return Object.assign({type:"warning",icon:o.createElement(gt,null)},e)}function ih(e){return Object.assign({type:"error",icon:o.createElement(vt,null),okButtonProps:Object.assign({type:"danger"},e.okButtonProps)},Ue()(e,["okButtonProps"]))}function nh(e){return Object.assign({type:"confirm",icon:o.createElement(Qc.A,null)},e)}var rh=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const sh=(e,t)=>{var{afterClose:i,config:n}=e;rh(e,["afterClose","config"]);const[r,s]=o.useState(n);o.useImperativeHandle(t,(()=>({destroy:()=>{s((e=>Object.assign(Object.assign({},e),{visible:!1})))},update:e=>{s((t=>Object.assign(Object.assign({},t),e)))}})));return o.createElement(Zc,Object.assign({},r,{afterClose:()=>{var e;null===(e=null===n||void 0===n?void 0:n.afterClose)||void 0===e||e.call(n),i()}}))},ah=o.forwardRef(sh);let oh=0;var lh=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};let ch=[];class hh extends M.A{constructor(e){super(e),this.bodyOverflow=null,this.handleCancel=e=>{this.foundation.handleCancel(e)},this.handleOk=e=>{this.foundation.handleOk(e)},this.updateState=()=>{const{visible:e}=this.props;this.foundation.toggleDisplayNone(!e)},this.renderFooter=()=>{const{okText:e,okType:t,cancelText:i,confirmLoading:n,cancelLoading:r,hasCancel:s,footerFill:a}=this.props,l=e=>{var t;return s?o.createElement(St,Object.assign({"aria-label":"cancel",onClick:this.handleCancel,loading:void 0===r?"pending"===this.state.onCancelReturnPromiseStatus:r,type:"tertiary",block:a,autoFocus:!0},this.props.cancelButtonProps,{style:Object.assign(Object.assign({},a?{marginLeft:"unset"}:{}),null===(t=this.props.cancelButtonProps)||void 0===t?void 0:t.style),"x-semi-children-alias":"cancelText"}),i||e.cancel):null};return o.createElement(pe.A,{componentName:"Modal"},((i,r)=>o.createElement("div",{className:d()({["".concat(Dc.DIALOG,"-footerfill")]:a})},l(i),o.createElement(St,Object.assign({"aria-label":"confirm",type:t,theme:"solid",block:a,loading:void 0===n?"pending"===this.state.onOKReturnPromiseStatus:n,onClick:this.handleOk},this.props.okButtonProps,{"x-semi-children-alias":"okText"}),e||i.confirm))))},this.renderDialog=()=>{let e=this.props,{footer:t,className:i,motion:n,maskStyle:r,keepDOM:s,style:a,zIndex:l,getPopupContainer:c,visible:h,modalContentClass:u}=e,p=lh(e,["footer","className","motion","maskStyle","keepDOM","style","zIndex","getPopupContainer","visible","modalContentClass"]),g=a;const f=r,m="footer"in this.props?t:this.renderFooter();let v={zIndex:l};c&&(v={zIndex:l,position:"static"});const y=d()(i,{["".concat(Dc.DIALOG,"-displayNone")]:s&&this.state.displayNone}),b=this.props.visible||this.props.keepDOM&&(!this.props.lazyRender||this._haveRendered)||this.props.motion&&!this.state.displayNone;return b&&(this._haveRendered=!0),o.createElement(Nc.A,{motion:this.props.motion,animationState:h?"enter":"leave",startClassName:"".concat(Dc.DIALOG,h?"-content-animate-show":"-content-animate-hide"),onAnimationEnd:()=>{this.updateState()}},(e=>{let{animationClassName:t,animationEventsNeedBind:i}=e;return o.createElement(Nc.A,{motion:this.props.motion,animationState:h?"enter":"leave",startClassName:"".concat(Dc.DIALOG,h?"-mask-animate-show":"-mask-animate-hide"),onAnimationEnd:()=>{this.updateState()}},(e=>{let{animationClassName:n,animationEventsNeedBind:r}=e;return b?o.createElement(zc.A,{style:v,getPopupContainer:c}," ",o.createElement(Xc,Object.assign({},p,{contentExtraProps:i,maskExtraProps:r,isFullScreen:this.state.isFullScreen,contentClassName:"".concat(t," ").concat(u),maskClassName:n,className:y,getPopupContainer:c,maskStyle:f,style:g,ref:this.modalRef,footer:m,onClose:this.handleCancel}))):o.createElement(o.Fragment,null)}))}))},this.state={displayNone:!e.visible,isFullScreen:e.fullScreen},this.foundation=new Bc(this.adapter),this.modalRef=o.createRef(),this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{getProps:()=>this.props,disabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;this.bodyOverflow=document.body.style.overflow||"",e||"hidden"===this.bodyOverflow||(document.body.style.overflow="hidden",document.body.style.width="calc(".concat(this.originBodyWidth||"100%"," - ").concat(this.scrollBarWidth,"px)"))},enabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;e||null===this.bodyOverflow||"hidden"===this.bodyOverflow||(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>this.props.onCancel(e),notifyOk:e=>this.props.onOk(e),notifyClose:()=>{this.props.afterClose()},toggleDisplayNone:(e,t)=>{e!==this.state.displayNone&&this.setState({displayNone:e},t||r())},notifyFullScreen:e=>{e!==this.state.isFullScreen&&this.setState({isFullScreen:e})}})}static getDerivedStateFromProps(e,t){const i={};return e.fullScreen!==t.isFullScreen&&(i.isFullScreen=e.fullScreen),e.visible&&t.displayNone&&(i.displayNone=!1),i}componentDidMount(){this.scrollBarWidth=(0,$.XJ)(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t,i){!e.visible&&this.props.visible&&this.foundation.beforeShow(),!t.displayNone&&this.state.displayNone&&this.foundation.afterHide()}componentWillUnmount(){this.props.visible?this.foundation.destroy():this.foundation.enabledBodyScroll()}render(){const{visible:e,keepDOM:t,lazyRender:i}=this.props;return this.renderDialog()}}hh.propTypes={mask:c().bool,closable:c().bool,centered:c().bool,visible:c().bool,width:c().oneOfType([c().string,c().number]),height:c().oneOfType([c().string,c().number]),confirmLoading:c().bool,cancelLoading:c().bool,okText:c().string,okType:c().string,cancelText:c().string,maskClosable:c().bool,onCancel:c().func,onOk:c().func,afterClose:c().func,okButtonProps:c().object,cancelButtonProps:c().object,style:c().object,className:c().string,maskStyle:c().object,bodyStyle:c().object,zIndex:c().number,title:c().node,icon:c().node,header:c().node,footer:c().node,hasCancel:c().bool,motion:c().bool,children:c().node,getPopupContainer:c().func,getContainerContext:c().func,maskFixed:c().bool,closeIcon:c().node,closeOnEsc:c().bool,size:c().oneOf(Lc),keepDOM:c().bool,lazyRender:c().bool,direction:c().oneOf(jc),fullScreen:c().bool,footerFill:c().bool},hh.__SemiComponentName__="Modal",hh.defaultProps=(0,$.bQ)(hh.__SemiComponentName__,{zIndex:1e3,motion:!0,mask:!0,centered:!1,closable:!0,visible:!1,okType:"primary",maskClosable:!0,hasCancel:!0,onCancel:r(),onOk:r(),afterClose:r(),maskFixed:!1,closeOnEsc:!0,size:"small",keepDOM:!1,lazyRender:!0,fullScreen:!1}),hh.useModal=function(){const[e,t]=function(){const[e,t]=o.useState([]);return[e,function(e){return t((t=>[...t,e])),()=>{t((t=>t.filter((t=>t!==e))))}}]}();function i(e){return function(i){oh+=1;const n=o.createRef();let r;const s=o.createElement(ah,{key:"semi-modal-".concat(oh),config:e(i),ref:n,afterClose:()=>{r()}});return r=t(s),{destroy:()=>{n.current&&n.current.destroy()},update:e=>{n.current&&n.current.update(e)}}}}return[{info:i(Jc),success:i(eh),error:i(ih),warning:i(th),confirm:i(nh)},o.createElement(o.Fragment,null,e)]},hh.info=function(e){return $c(Jc(e))},hh.success=function(e){return $c(eh(e))},hh.error=function(e){return $c(ih(e))},hh.warning=function(e){return $c(th(e))},hh.confirm=function(e){return $c(nh(e))},hh.destroyAll=function(){for(let e=0,t=ch.length;e<t;e++){const t=ch[e];t&&t()}ch=[]};const dh=hh,uh=dh,ph={PREFIX:"".concat(p._,"-dropdown"),SELECTED:"".concat(p._,"-dropdown-item-selected"),DISABLED:"".concat(p._,"-dropdown-item-disabled")},gh={POSITION_SET:u.P$.POSITION_SET,TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_LEAVE_DELAY:100,ITEM_TYPE:["primary","secondary","tertiary","warning","danger"]},fh=4,mh=2;var vh=i(11646);class yh extends k.A{handleVisibleChange(e){this._adapter.setPopVisible(e),this._adapter.notifyVisibleChange(e);const{trigger:t}=this.getProps();if(e&&"click"===t){const e=this._adapter.getPopupId();this.setFocusToFirstMenuItem(e)}}getMenuItemNodes(e){const t=document.getElementById(e);return t?Array.from(t.getElementsByTagName("li")).filter((e=>"false"===e.ariaDisabled)):null}setFocusToFirstMenuItem(e){const t=this.getMenuItemNodes(e);t&&(0,Me.jV)(t)}setFocusToLastMenuItem(e){const t=this.getMenuItemNodes(e);t&&(0,Me.xN)(t)}handleKeyDown(e){var t,i;const n=null===(i=null===(t=e.target)||void 0===t?void 0:t.attributes["data-popupid"])||void 0===i?void 0:i.value,{visible:r}=this._adapter.getStates();switch(e.key){case" ":case"Enter":e.target.click();break;case"ArrowDown":this.setFocusToFirstMenuItem(n),r&&(0,Me.jK)(e);break;case"ArrowUp":this.setFocusToLastMenuItem(n),r&&(0,Me.jK)(e)}}}class bh extends k.A{constructor(){super(...arguments),this.menuItemNodes=null,this.firstChars=[]}handleEscape(e){if("custom"===this._adapter.getContext("trigger")){(e&&(0,Me.OQ)(document.querySelectorAll("[data-popupid]"),e.id)).focus()}}setFocusByFirstCharacter(e,t){const i=(0,Me._z)(this.menuItemNodes,e,this.firstChars,t);i>=0&&(0,Me.l5)(this.menuItemNodes,this.menuItemNodes[i])}onMenuKeydown(e){const t=(0,Me.ne)(e.target,"tooltip");this.menuItemNodes||(this.menuItemNodes=[...e.target.parentNode.getElementsByTagName("li")].filter((e=>"true"!==e.ariaDisabled))),0===this.firstChars.length&&this.menuItemNodes.forEach((e=>{var t;this.firstChars.push(null===(t=e.textContent.trim()[0])||void 0===t?void 0:t.toLowerCase())}));const i=this.menuItemNodes.find((e=>0===e.tabIndex));switch(e.key){case" ":case"Enter":e.target.click();break;case"Escape":this.handleEscape(t);break;case"ArrowUp":(0,Me.xy)(this.menuItemNodes,i),(0,Me.jK)(e);break;case"ArrowDown":(0,Me.r$)(this.menuItemNodes,i),(0,Me.jK)(e);break;default:(0,Me.P2)(e.key)&&this.setFocusByFirstCharacter(i,e.key)}}}const _h=o.createContext({level:0});var xh=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Sh=ph.PREFIX;class wh extends M.A{constructor(e){super(e),this.foundation=new bh(this.adapter)}get adapter(){return Object.assign({},super.adapter)}render(){const e=this.props,{children:t,className:i,style:n}=e,r=xh(e,["children","className","style"]);return o.createElement("ul",Object.assign({role:"menu","aria-orientation":"vertical"},r,{className:d()("".concat(Sh,"-menu"),i),style:n,onKeyDown:e=>this.foundation.onMenuKeydown(e)}),t)}}wh.propTypes={children:c().node,className:c().string,style:c().object},wh.contextType=_h;const Ch=wh,kh=ph.PREFIX;class Ah extends M.A{render(){const{children:e,disabled:t,className:i,forwardRef:n,style:r,type:s,active:a,icon:l,onKeyDown:c,showTick:h,hover:u}=this.props,{showTick:p}=this.context,g=null!==p&&void 0!==p?p:h,f=d()(i,{["".concat(kh,"-item")]:!0,["".concat(kh,"-item-disabled")]:t,["".concat(kh,"-item-hover")]:u,["".concat(kh,"-item-withTick")]:g,["".concat(kh,"-item-").concat(s)]:s,["".concat(kh,"-item-active")]:a}),m={};t||["onClick","onMouseEnter","onMouseLeave","onContextMenu"].forEach((e=>{1!==this.context.level&&"onClick"===e?m.onMouseDown=t=>{var i,n;0===t.button&&(null===(n=(i=this.props)[e])||void 0===n||n.call(i,t))}:m[e]=this.props[e]}));let v=null;switch(!0){case g&&a:v=o.createElement(ge.A,null);break;case g&&!a:v=o.createElement(ge.A,{style:{color:"transparent"}});break;default:v=null}let y=null;return l&&(y=o.createElement("div",{className:"".concat(kh,"-item-icon")},l)),o.createElement("li",Object.assign({role:"menuitem",tabIndex:-1,"aria-disabled":t},m,{onKeyDown:c,ref:e=>n(e),className:f,style:r},this.getDataAttr(this.props)),v,y,e)}}Ah.propTypes={children:c().oneOfType([c().string,c().node]),name:c().string,disabled:c().bool,selected:c().bool,onClick:c().func,onMouseEnter:c().func,onMouseLeave:c().func,onContextMenu:c().func,className:c().string,style:c().object,forwardRef:c().func,type:c().oneOf(gh.ITEM_TYPE),active:c().bool,icon:c().node},Ah.contextType=_h,Ah.defaultProps={disabled:!1,divided:!1,selected:!1,onMouseEnter:r(),onMouseLeave:r(),forwardRef:r()},Ah.elementType="Dropdown.Item";const Eh=Ah,Th=ph.PREFIX,Oh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{style:t,className:i}=e;return o.createElement("div",{className:d()("".concat(Th,"-divider"),i),style:t})};Oh.propTypes={style:c().object,className:c().string};const Ph=Oh,Mh=ph.PREFIX;class Ih extends o.PureComponent{render(){const{className:e,style:t,children:i}=this.props,{showTick:n}=this.context,r=d()({["".concat(Mh,"-title")]:!0,["".concat(Mh,"-title-withTick")]:n},e);return o.createElement("div",{className:r,style:t},i)}}Ih.propTypes={children:c().node,className:c().string,style:c().object},Ih.contextType=_h;const Rh=Ih;var Dh=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Lh=gh.POSITION_SET,jh=gh.TRIGGER_SET;class Fh extends M.A{constructor(e){super(e),this.handleVisibleChange=e=>this.foundation.handleVisibleChange(e),this.state={popVisible:e.visible},this.foundation=new yh(this.adapter),this.tooltipRef=o.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPopVisible:e=>this.setState({popVisible:e}),notifyVisibleChange:e=>this.props.onVisibleChange(e),getPopupId:()=>this.tooltipRef.current.getPopupId()})}renderContent(){const{render:e,menu:t,contentClassName:i,style:n,showTick:r,prefixCls:s,trigger:a}=this.props,l=d()(s,i),{level:c=0}=this.context,h={showTick:r,level:c+1,trigger:a};let u=null;return o.isValidElement(e)?u=e:Array.isArray(t)&&(u=this.renderMenu()),o.createElement(_h.Provider,{value:h},o.createElement("div",{className:l,style:n},o.createElement("div",{className:"".concat(s,"-content"),"x-semi-prop":"render"},u)))}renderMenu(){const{menu:e}=this.props,t=e.map(((e,t)=>{switch(e.node){case"title":{const{name:i,node:n}=e,r=Dh(e,["name","node"]);return o.createElement(Fh.Title,Object.assign({},r,{key:n+i+t}),i)}case"item":{const{node:i,name:n}=e,r=Dh(e,["node","name"]);return o.createElement(Fh.Item,Object.assign({},r,{key:i+n+t}),n)}case"divider":return o.createElement(Fh.Divider,{key:e.node+t});default:return null}}));return o.createElement(Fh.Menu,null,t)}renderPopCard(){const{render:e,contentClassName:t,style:i,showTick:n,prefixCls:r}=this.props,s=d()(r,t),{level:a=0}=this.context,l={showTick:n,level:a+1};return o.createElement(_h.Provider,{value:l},o.createElement("div",{className:s,style:i},o.createElement("div",{className:"".concat(r,"-content")},e)))}render(){const e=this.props,{children:t,position:i,trigger:n,onVisibleChange:r,zIndex:s,className:a,motion:l,margin:c,style:h,prefixCls:u}=e,p=Dh(e,["children","position","trigger","onVisibleChange","zIndex","className","motion","margin","style","prefixCls"]);let{spacing:g}=this.props;const{level:f}=this.context,{popVisible:m}=this.state,v=this.renderContent();return f>0?g="number"===typeof g?g:mh:null!==g&&"undefined"!==typeof g||(g=fh),o.createElement(vh.A,Object.assign({zIndex:s,motion:l,margin:c,content:v,className:a,prefixCls:u,spacing:g,position:i,trigger:n,onVisibleChange:this.handleVisibleChange,showArrow:!1,returnFocusOnClose:!0,ref:this.tooltipRef},p),o.isValidElement(t)?o.cloneElement(t,{className:d()(Fi()(t,"props.className"),{["".concat(u,"-showing")]:m}),"aria-haspopup":!0,"aria-expanded":m,onKeyDown:e=>{this.foundation.handleKeyDown(e);const i=Fi()(t,"props.onKeyDown");i&&i(e)}}):t)}}Fh.Menu=Ch,Fh.Item=Eh,Fh.Divider=Ph,Fh.Title=Rh,Fh.contextType=_h,Fh.propTypes={children:c().node,contentClassName:c().oneOfType([c().string,c().array]),className:c().string,getPopupContainer:c().func,margin:c().oneOfType([c().number,c().object]),mouseEnterDelay:c().number,mouseLeaveDelay:c().number,menu:c().array,motion:c().oneOfType([c().bool,c().func,c().object]),onVisibleChange:c().func,prefixCls:c().string,position:c().oneOf(Lh),rePosKey:c().oneOfType([c().string,c().number]),render:c().node,spacing:c().oneOfType([c().number,c().object]),showTick:c().bool,style:c().object,trigger:c().oneOf(jh),visible:c().bool,zIndex:c().number},Fh.__SemiComponentName__="Dropdown",Fh.defaultProps=(0,$.bQ)(Fh.__SemiComponentName__,{onVisibleChange:r(),prefixCls:ph.PREFIX,zIndex:u.nL.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",position:"bottom",mouseLeaveDelay:gh.DEFAULT_LEAVE_DELAY,showTick:!1,closeOnEsc:!0,onEscKeyDown:r()});const Bh=Fh,Nh={PREFIX:"".concat(p._)};var zh=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Hh=["xxl","xl","lg","md","sm","xs"],Vh=o.createContext(null),Uh={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class Wh extends o.Component{constructor(){super(...arguments),this.state={screens:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},this.unRegisters=[]}componentDidMount(){this.unRegisters=Object.keys(Uh).map((e=>(0,$.ot)(Uh[e],{match:()=>{"object"===typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!0})})))},unmatch:()=>{"object"===typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!1})})))}})))}componentWillUnmount(){this.unRegisters.forEach((e=>e()))}getGutter(){const{gutter:e=0}=this.props,t=[0,0];return(Array.isArray(e)?e.slice(0,2):[e,0]).forEach(((e,i)=>{if("object"===typeof e)for(let n=0;n<Hh.length;n++){const r=Hh[n];if(this.state.screens[r]&&void 0!==e[r]){t[i]=e[r];break}}else t[i]=e||0})),t}render(){const e=this.props,{prefixCls:t,type:i,justify:n,align:r,className:s,style:a,children:l}=e,c=zh(e,["prefixCls","type","justify","align","className","style","children"]),h=this.getGutter(),u="".concat(t,"-row"),p=d()({[u]:"flex"!==i,["".concat(u,"-").concat(i)]:i,["".concat(u,"-").concat(i,"-").concat(n)]:i&&n,["".concat(u,"-").concat(i,"-").concat(r)]:i&&r},s),g=Object.assign(Object.assign(Object.assign({},h[0]>0?{marginLeft:h[0]/-2,marginRight:h[0]/-2}:{}),h[1]>0?{marginTop:h[1]/-2,marginBottom:h[1]/-2}:{}),a),f=Object.assign({},c);return delete f.gutter,o.createElement(Vh.Provider,{value:{gutters:h}},o.createElement("div",Object.assign({},f,{className:p,style:g,"x-semi-prop":"children"}),l))}}Wh.propTypes={type:c().oneOf(["flex"]),align:c().oneOf(["top","middle","bottom"]),justify:c().oneOf(["start","end","center","space-around","space-between"]),className:c().string,style:c().object,children:c().node,gutter:c().oneOfType([c().object,c().number,c().array]),prefixCls:c().string},Wh.defaultProps={prefixCls:Nh.PREFIX},Wh.RowContext={gutters:c().any};const Gh=Wh;var Kh=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Yh=c().oneOfType([c().object,c().number]);class Xh extends o.Component{render(){const{props:e}=this,{prefixCls:t,span:i,order:n,offset:r,push:s,pull:a,className:l,children:c}=e,h=Kh(e,["prefixCls","span","order","offset","push","pull","className","children"]);let u={};const p="".concat(t,"-col");["xs","sm","md","lg","xl","xxl"].forEach((t=>{let i={};"number"===typeof e[t]?i.span=e[t]:"object"===typeof e[t]&&(i=e[t]||{}),delete h[t],u=Object.assign(Object.assign({},u),{["".concat(p,"-").concat(t,"-").concat(i.span)]:void 0!==i.span,["".concat(p,"-").concat(t,"-order-").concat(i.order)]:i.order||0===i.order,["".concat(p,"-").concat(t,"-offset-").concat(i.offset)]:i.offset||0===i.offset,["".concat(p,"-").concat(t,"-push-").concat(i.push)]:i.push||0===i.push,["".concat(p,"-").concat(t,"-pull-").concat(i.pull)]:i.pull||0===i.pull})}));const g=d()(p,{["".concat(p,"-").concat(i)]:void 0!==i,["".concat(p,"-order-").concat(n)]:n,["".concat(p,"-offset-").concat(r)]:r,["".concat(p,"-push-").concat(s)]:s,["".concat(p,"-pull-").concat(a)]:a},l,u);let f,{style:m}=h;try{f=this.context.gutters}catch(v){throw new Error("please make sure <Col> inside <Row>")}return m=Object.assign(Object.assign(Object.assign({},f[0]>0?{paddingLeft:f[0]/2,paddingRight:f[0]/2}:{}),f[1]>0?{paddingTop:f[1]/2,paddingBottom:f[1]/2}:{}),m),o.createElement("div",Object.assign({},h,{style:m,className:g,"x-semi-prop":"children"}),c)}}Xh.contextType=Vh,Xh.propTypes={span:c().number,order:c().number,offset:c().number,push:c().number,pull:c().number,className:c().string,children:c().node,xs:Yh,sm:Yh,md:Yh,lg:Yh,xl:Yh,xxl:Yh,prefixCls:c().string},Xh.defaultProps={prefixCls:Nh.PREFIX};const qh=Xh,Zh={PREFIX:"".concat(p._,"-layout")},Qh=o.createContext({siderHook:{addSider:Pe.l,removeSider:Pe.l}});var $h=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Jh={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},ed=(()=>{let e=0;return()=>(e+=1,"".concat(Zh.PREFIX,"-sider-").concat(e))})(),td=["xs","sm","md","lg","xl","xxl"];class id extends o.PureComponent{constructor(e){super(e),this.unRegisters=[],this.uniqueId="",this.uniqueId=ed()}componentDidMount(){const{breakpoint:e}=this.props,t=Object.keys(Jh).filter((t=>e&&-1!==e.indexOf(t))).map((e=>(0,$.ot)(Jh[e],{match:()=>{this.responsiveHandler(e,!0)},unmatch:()=>{this.responsiveHandler(e,!1)}})));this.unRegisters=t,this.context.siderHook&&this.context.siderHook.addSider(this.uniqueId)}componentWillUnmount(){this.unRegisters.forEach((e=>e())),this.context.siderHook&&this.context.siderHook.removeSider(this.uniqueId)}responsiveHandler(e,t){const{onBreakpoint:i}=this.props;i&&i(e,t)}render(){const e=this.props,{prefixCls:t,className:i,children:n,style:r}=e,s=$h(e,["prefixCls","className","children","style"]),a=d()(i,{["".concat(t,"-sider")]:!0});return o.createElement("aside",Object.assign({className:a,"aria-label":this.props["aria-label"],style:r},(0,Qt.A)(s)),o.createElement("div",{className:"".concat(t,"-sider-children")},n))}}id.propTypes={prefixCls:c().string,style:c().object,className:c().string,breakpoint:c().arrayOf(c().oneOf(td)),onBreakpoint:c().func,"aria-label":c().string,role:c().string},id.defaultProps={prefixCls:Zh.PREFIX},id.contextType=Qh,id.elementType="Layout.Sider";const nd=id;var rd=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const sd={Header:"header",Footer:"footer",Content:"main",Layout:"section"};function ad(e){const t=sd[e],i=e.toLowerCase();return e=>class extends o.PureComponent{render(){return o.createElement(e,Object.assign({role:this.props.role,"aria-label":this.props["aria-label"],type:i,tagName:t},this.props))}}}class od extends o.PureComponent{render(){const e=this.props,{prefixCls:t,type:i,className:n,children:r,tagName:s}=e,a=rd(e,["prefixCls","type","className","children","tagName"]),l=d()(n,"".concat(t,"-").concat(i));return o.createElement(s,Object.assign({className:l},a),r)}}od.propTypes={prefixCls:c().string,style:c().object,className:c().string},od.defaultProps={prefixCls:Zh.PREFIX};const ld=ad("Header")(od),cd=ad("Footer")(od),hd=ad("Content")(od);class dd extends o.Component{constructor(e){super(e),this.state={siders:[]}}getSiderHook(){return{addSider:e=>{this.setState((t=>({siders:[...t.siders,e]})))},removeSider:e=>{this.setState((t=>({siders:t.siders.filter((t=>t!==e))})))}}}render(){const e=this.props,{prefixCls:t,className:i,children:n,hasSider:r,tagName:s}=e,a=rd(e,["prefixCls","className","children","hasSider","tagName"]),{siders:l}=this.state,c=d()(i,t,{["".concat(t,"-has-sider")]:"boolean"===typeof r&&r||l.length>0||o.Children.toArray(n).some((e=>o.isValidElement(e)&&e.type&&"Layout.Sider"===e.type.elementType))}),h=s;return o.createElement(Qh.Provider,{value:{siderHook:this.getSiderHook()}},o.createElement(h,Object.assign({className:c},a),n))}}dd.propTypes={prefixCls:c().string,style:c().object,className:c().string},dd.defaultProps={prefixCls:Zh.PREFIX,tagName:"section"},dd.Header=ld,dd.Footer=cd,dd.Content=hd,dd.Sider=nd;const ud=J.A;let pd=null;const gd={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},fd=e=>{Object.keys(gd).forEach((t=>{e.style.setProperty(t,gd[t],"important")}))},md=(e,t)=>{const i=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?i+t.borderSize:i-t.paddingSize};const vd=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],yd=e=>{const t=window.getComputedStyle(e);if(null===t)return null;const i=qi()(t,vd),{boxSizing:n}=i;if(""===n)return null;return{sizingStyle:i,paddingSize:parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),borderSize:parseFloat(i.borderBottomWidth)+parseFloat(i.borderTopWidth)}};class bd extends k.A{static get textAreaDefaultAdapter(){return{notifyChange:r(),setValue:r(),toggleFocusing:r(),toggleHovering:r(),notifyFocus:r(),notifyBlur:r(),notifyKeyDown:r(),notifyEnterPress:r()}}constructor(e){super(Object.assign(Object.assign({},bd.textAreaDefaultAdapter),e)),this.resizeTextarea=()=>{var e;const{height:t}=this.getStates(),{rows:i,autosize:n}=this.getProps(),r=this._adapter.getRef(),s=yd(r);if(!s)return;const[a,o]=null!==n&&"object"===typeof n?[null!==(e=null===n||void 0===n?void 0:n.minRows)&&void 0!==e?e:i,null===n||void 0===n?void 0:n.maxRows]:[i],l=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;pd||(pd=document.createElement("textarea"),pd.setAttribute("tab-index","-1"),pd.setAttribute("aria-hidden","true"),fd(pd)),null===pd.parentNode&&document.body.appendChild(pd);const{paddingSize:r,borderSize:s,sizingStyle:a}=e,{boxSizing:o}=a;Object.keys(a).forEach((e=>{pd.style[e]=a[e]})),fd(pd),pd.value=t;let l=md(pd,e);pd.value="x";const c=md(pd,e)-r-s;let h=c*i;"border-box"===o&&(h=h+r+s),l=Math.max(h,l);let d=c*n;return"border-box"===o&&(d=d+r+s),l=Math.min(d,l),l}(s,r.value||r.placeholder||"x",a,o);return t!==l?(this._adapter.notifyHeightUpdate(l),void(r.style.height="".concat(l,"px"))):void 0}}destroy(){}handleValueChange(e){this._adapter.setValue(e)}handleChange(e,t){const{maxLength:i,minLength:n,getValueLength:r}=this._adapter.getProps();let s=e;i&&G()(r)&&(s=this.handleVisibleMaxLength(e)),n&&G()(r)&&this.handleVisibleMinLength(s),this._isControlledComponent()||this._adapter.setValue(s),this._adapter.notifyChange(s,t)}handleVisibleMinLength(e){const{minLength:t,getValueLength:i}=this._adapter.getProps(),{minLength:n}=this._adapter.getStates();if(S()(t)&&t>=0&&G()(i)&&C()(e)){const r=i(e);if(r<t){const i=e.length+(t-r);i!==n&&this._adapter.setMinLength(i)}else n!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:i}=this._adapter.getProps();if(S()(t)&&t>=0&&C()(e)){if(G()(i)){if(i(e)>t){console.warn("[Semi TextArea] The input character is truncated because the input length exceeds the maximum length limit");return this.handleTruncateValue(e,t)}}else if(e.length>t)return console.warn("[Semi TextArea] The input character is truncated because the input length exceeds the maximum length limit"),e.slice(0,t);return e}}handleTruncateValue(e,t){const{getValueLength:i}=this._adapter.getProps();if(G()(i)){let n="";for(let r=1,s=e.length;r<=s;r++){const s=e.slice(0,r);if(i(s)>t)return n;n=s}return n}return e.slice(0,t)}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleBlur(e){const{value:t}=this.getStates(),{maxLength:i}=this.getProps();let n=t;i&&(n=this.handleVisibleMaxLength(t),n!==t&&(this._isControlledComponent()||this._adapter.setValue(n),this._adapter.notifyChange(n,e))),this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(n,e)}handleKeyDown(e){this._adapter.notifyKeyDown(e),13===e.keyCode&&this._adapter.notifyPressEnter(e)}handleMouseEnter(e){this._adapter.toggleHovering(!0)}handleMouseLeave(e){this._adapter.toggleHovering(!1)}isAllowClear(){const{value:e,isFocus:t,isHover:i}=this._adapter.getStates(),{showClear:n,disabled:r,readonly:s}=this._adapter.getProps();return e&&n&&!r&&(t||i)&&!s}handleClear(e){const{isFocus:t}=this.getStates();this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),t&&this._adapter.notifyBlur("",e),this._adapter.notifyChange("",e),this._adapter.notifyClear(e),this.stopPropagation(e)}}var _d=i(42881),xd=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Sd=X.PREFIX;class wd extends M.A{constructor(e){super(e),this.handleClear=e=>{this.foundation.handleClear(e)},this.setRef=e=>{this.libRef.current=e;const{forwardRef:t}=this.props;"function"===typeof t?t(e):t&&"object"===typeof t&&(t.current=e)};const t="value"in e?e.value:e.defaultValue;this.state={value:t,isFocus:!1,isHover:!1,height:0,minLength:e.minLength,cachedValue:e.value},this.focusing=!1,this.foundation=new bd(this.adapter),this.libRef=o.createRef(),this.throttledResizeTextarea=cl()(this.foundation.resizeTextarea,10)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e},(()=>{this.props.autosize&&this.foundation.resizeTextarea()})),getRef:()=>this.libRef.current,toggleFocusing:e=>this.setState({isFocus:e}),toggleHovering:e=>this.setState({isHover:e}),notifyChange:(e,t)=>{this.props.onChange(e,t)},notifyClear:e=>this.props.onClear(e),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyKeyDown:e=>{this.props.onKeyDown(e)},notifyHeightUpdate:e=>{this.setState({height:e}),this.props.onResize({height:e})},notifyPressEnter:e=>{this.props.onEnterPress&&this.props.onEnterPress(e)},setMinLength:e=>this.setState({minLength:e})})}static getDerivedStateFromProps(e,t){const i={};return e.value!==t.cachedValue&&(i.value=e.value,i.cachedValue=e.value),i}componentWillUnmount(){var e,t;this.throttledResizeTextarea&&(null===(t=null===(e=this.throttledResizeTextarea)||void 0===e?void 0:e.cancel)||void 0===t||t.call(e),this.throttledResizeTextarea=null)}componentDidUpdate(e,t){this.props.value===e.value&&this.props.placeholder===e.placeholder||!this.props.autosize||this.foundation.resizeTextarea()}renderClearBtn(){const{showClear:e}=this.props,t=this.foundation.isAllowClear(),i=d()("".concat(Sd,"-clearbtn"),{["".concat(Sd,"-clearbtn-hidden")]:!t});return e?o.createElement("div",{className:i,onClick:this.handleClear},o.createElement(ee,null)):null}renderCounter(){let e,t,i,n;const{showCounter:r,maxCount:s,getValueLength:a}=this.props;if(r||s){const{value:r}=this.state;t=r?G()(a)?a(r):r.length:0,i=s||null,n=d()("".concat(Sd,"-textarea-counter"),{["".concat(Sd,"-textarea-counter-exceed")]:t>i}),e=o.createElement("div",{className:n},t,i?"/":null,i)}else e=null;return e}render(){const e=this.props,{autosize:t,placeholder:i,onEnterPress:n,onResize:r,disabled:s,readonly:a,className:l,showCounter:c,validateStatus:h,maxCount:u,defaultValue:p,style:g,forwardRef:f,getValueLength:m,maxLength:v,minLength:b,showClear:x,borderless:S,autoFocus:w}=e,C=xd(e,["autosize","placeholder","onEnterPress","onResize","disabled","readonly","className","showCounter","validateStatus","maxCount","defaultValue","style","forwardRef","getValueLength","maxLength","minLength","showClear","borderless","autoFocus"]),{isFocus:k,value:A,minLength:E}=this.state,T=d()(l,"".concat(Sd,"-textarea-wrapper"),{["".concat(Sd,"-textarea-borderless")]:S,["".concat(Sd,"-textarea-wrapper-disabled")]:s,["".concat(Sd,"-textarea-wrapper-readonly")]:a,["".concat(Sd,"-textarea-wrapper-").concat(h)]:Boolean(h),["".concat(Sd,"-textarea-wrapper-focus")]:k}),O=d()("".concat(Sd,"-textarea"),{["".concat(Sd,"-textarea-disabled")]:s,["".concat(Sd,"-textarea-readonly")]:a,["".concat(Sd,"-textarea-autosize")]:y()(t)?_()(null===t||void 0===t?void 0:t.maxRows):t,["".concat(Sd,"-textarea-showClear")]:x}),P=Object.assign(Object.assign({},Ue()(C,"insetLabel","insetLabelId","getValueLength","onClear","showClear")),{autoFocus:w||this.props.autofocus,className:O,disabled:s,readOnly:a,placeholder:i||null,onChange:e=>this.foundation.handleChange(e.target.value,e),onFocus:e=>this.foundation.handleFocus(e),onBlur:e=>this.foundation.handleBlur(e.nativeEvent),onKeyDown:e=>this.foundation.handleKeyDown(e),value:null===A||void 0===A?"":A});return G()(m)||(P.maxLength=v),E&&(P.minLength=E),o.createElement("div",{className:T,style:g,onMouseEnter:e=>this.foundation.handleMouseEnter(e),onMouseLeave:e=>this.foundation.handleMouseLeave(e)},t?o.createElement(_d.A,{onResize:this.throttledResizeTextarea},o.createElement("textarea",Object.assign({},P,{ref:this.setRef}))):o.createElement("textarea",Object.assign({},P,{ref:this.setRef})),this.renderClearBtn(),this.renderCounter())}}wd.propTypes={autosize:c().oneOfType([c().bool,c().object]),borderless:c().bool,placeholder:c().string,value:c().string,rows:c().number,cols:c().number,maxCount:c().number,onEnterPress:c().func,validateStatus:c().string,className:c().string,style:c().object,showClear:c().bool,onClear:c().func,onResize:c().func,getValueLength:c().func},wd.defaultProps={autosize:!1,borderless:!1,rows:4,cols:20,showCounter:!1,showClear:!1,onEnterPress:r(),onChange:r(),onBlur:r(),onFocus:r(),onKeyDown:r(),onResize:r(),onClear:r()};const Cd=o.forwardRef(((e,t)=>o.createElement(wd,Object.assign({},e,{forwardRef:t}))));var kd=i(35268),Ad=i.n(kd);const Ed=(e,t)=>{const{isNaN:i}=Number;return i(e)&&i(t)};var Td=i(41069),Od=i.n(Td),Pd=i(40801),Md=i.n(Pd);const Id=Object.assign({},X),Rd=Object.assign(Object.assign({},{}),{DEFAULT_STEP:1,DEFAULT_SHIFT_STEP:10,DEFAULT_PRESS_TIMEOUT:250,DEFAULT_PRESS_INTERVAL:0,MOUSE_BUTTON_LEFT:0}),Dd=Object.assign({},q);function Ld(e,t){return function(e,t){const i=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,r=Math.pow(10,Math.max(i,n));return(e*r+t*r)/r}(e,-t)}class jd extends k.A{init(){this._setInitValue()}destroy(){this._unregisterInterval(),this._unregisterTimer(),this._adapter.unregisterGlobalEvent("mouseup")}isControlled(){return this._isControlledComponent("value")}_doInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e,r=e,s=!0;const a=this.isControlled();"number"!==typeof e&&(r=this.doParse(e,!1),s=!isNaN(r)),s&&(n=r,a||this._adapter.setNumber(r)),a||this._adapter.setValue(e,i),this.getProp("keepFocus")&&this._adapter.setFocusing(!0,(()=>{this._adapter.setClickUpOrDown(!0)})),this.notifyChange(n,t)}_registerInterval(e){const t=this.getProp("pressInterval")||Rd.DEFAULT_PRESS_INTERVAL;this._intervalHasRegistered=!0,this._interval=setInterval((()=>{"function"===typeof e&&this._intervalHasRegistered&&e()}),t)}_unregisterInterval(){this._interval&&(this._intervalHasRegistered=!1,clearInterval(this._interval),this._interval=null)}_registerTimer(e){const t=this.getProp("pressTimeout")||Rd.DEFAULT_PRESS_TIMEOUT;this._timerHasRegistered=!0,this._timer=setTimeout((()=>{this._timerHasRegistered&&"function"===typeof e&&e()}),t)}_unregisterTimer(){this._timer&&(this._timerHasRegistered=!1,clearTimeout(this._timer),this._timer=null)}handleInputFocus(e){this.getState("value");this._adapter.recordCursorPosition(),this._adapter.setFocusing(!0,null),this._adapter.setClickUpOrDown(!1),this._adapter.notifyFocus(e)}handleInputChange(e,t){const i=this.doParse(e,!0,!0,!0),n=this.doParse(e,!1,!1,!1),r=this.afterParser(e);let s;this._adapter.recordCursorPosition();let a=n,o=e;if(""===e)this.isControlled()||(a=null);else if(this.isValidNumber(n)&&this.isValidNumber(i))s=n,o=this.doFormat(n,!1);else{if("number"!==typeof n||isNaN(n))o=this.doFormat(r,!1);else{o=this.doFormat(n,!1);const e=r.lastIndexOf("."),t=r.length-1-e,i=this._getPrecLen(n);if(i){if(i<t)for(let n=0;n<t-i;n++)o+="0"}else{o+=e>-1?r.slice(e):""}a=n}s=r}this.isControlled()||null!==a&&("number"!==typeof a||isNaN(a))||this._adapter.setNumber(a),this._adapter.setValue(this.isControlled()?o:this.doFormat(r,!1),(()=>{this._adapter.restoreCursor()})),this.notifyChange(s,t)}handleInputKeyDown(e){const t=e.keyCode;if(t===E.Ay.UP||t===E.Ay.DOWN){this._adapter.setClickUpOrDown(!0),this._adapter.recordCursorPosition();const i=t===E.Ay.UP?this.add(null,e):this.minus(null,e);this._doInput(i,e,(()=>{this._adapter.restoreCursor()})),e.preventDefault()}this._adapter.notifyKeyDown(e)}handleInputBlur(e){const t=Od()(this.getState("value"));let i=this.getState("number");if(null!=i||null!=t&&""!==t){const n=this.doParse(t,!1,!0,!0);let r,s,a=!1,o=!1;this.isValidNumber(n)&&i!==n&&(r=n,this.isControlled()||(i=r),a=!0);const l=this.doFormat(i,!0);if(l!==t&&(s=l,o=!0),o||a){const t=null!=s?s:r;null!=s&&this._adapter.setValue(s),null!=r&&(this._isControlledComponent("value")||this._adapter.setNumber(r)),this.notifyChange(t,e)}}this._adapter.setFocusing(!1),this._adapter.notifyBlur(e)}handleInputMouseEnter(e){this._adapter.setHovering(!0)}handleInputMouseLeave(e){this._adapter.setHovering(!1)}handleInputMouseMove(e){this._adapter.setHovering(!0)}handleMouseUp(e){this._unregisterInterval(),this._unregisterTimer(),this._adapter.unregisterGlobalEvent("mouseup")}handleUpClick(e){const{readonly:t}=this.getProps();this._isMouseButtonLeft(e)&&!t&&(this._adapter.setClickUpOrDown(!0),e&&(this._persistEvent(e),e.stopPropagation(),this._preventDefault(e)),this.upClick(e),this._registerTimer((()=>{this._registerInterval((()=>{this.upClick(e)}))})))}handleDownClick(e){const{readonly:t}=this.getProps();this._isMouseButtonLeft(e)&&!t&&(this._adapter.setClickUpOrDown(!0),e&&(this._persistEvent(e),e.stopPropagation(),this._preventDefault(e)),this.downClick(e),this._registerTimer((()=>{this._registerInterval((()=>{this.downClick(e)}))})))}_isMouseButtonLeft(e){return Fi()(e,"button")===Rd.MOUSE_BUTTON_LEFT}_preventDefault(e){const t=this._adapter.getProp("keepFocus"),i=this._adapter.getProp("innerButtons");(t||i)&&e.preventDefault()}handleMouseLeave(e){this._adapter.registerGlobalEvent("mouseup",(()=>{this.handleMouseUp(e)}))}upClick(e){const t=this.add(null,e);this._doInput(t,e),this._adapter.notifyUpClick(t,e)}downClick(e){const t=this.minus(null,e);this._doInput(t,e),this._adapter.notifyDownClick(t,e)}_setInitValue(){const{defaultValue:e,value:t}=this.getProps(),i=this._isControlledComponent("value")?t:e,n=this.doParse(Od()(i),!1,!0,!0);let r=null;"number"!==typeof n||isNaN(n)||(r=n);const s="number"===typeof r?this.doFormat(r,!0):"";this._adapter.setNumber(r),this._adapter.setValue(s),C()(s)&&s!==String(null!==i&&void 0!==i?i:"")&&this.notifyChange(s,null)}add(e,t){const i=t&&t.shiftKey?this.getProp("shiftStep"):this.getProp("step");e=null==e?i:Number(e);const n=Math.abs(Md()(e)),r=this.getState("number");let s=this.toNumber(r)||0;const a=this.getProp("min"),o=this.getProp("max"),l=this._getPrecLen(a),c=this._getPrecLen(o),h=this._getPrecLen(s),d=this._getPrecLen(e),u=Math.pow(10,Math.max(l,c,h,d));return e<0?Math.abs(Ld(a,s))>=n&&(s=(s*u+e*u)/u):e>0&&Math.abs(Ld(o,s))>=n&&(s=(s*u+e*u)/u),"number"===typeof a&&a>s&&(s=a),"number"===typeof o&&o<s&&(s=o),this.doFormat(s,!0)}minus(e,t){const i=t&&t.shiftKey?this.getProp("shiftStep"):this.getProp("step");return e=null==e?i:Number(e),this.add(-e,t)}_getPrecLen(e){"string"!==typeof e&&(e=String(Math.abs(Number(e||""))));const t=e.indexOf(".")+1;return t?e.length-t:0}_adjustPrec(e){const t=this.getProp("precision");return"number"!==typeof t||""===e||null===e||Number.isNaN(Number(e))||(e=Number(e).toFixed(t)),Od()(e)}doFormat(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.getProp("formatter");return e=i?this._adjustPrec(t):Od()(t),"function"===typeof n&&(e=n(e)),e}fetchMinOrMax(e){const{min:t,max:i}=this.getProps();return e<t?t:e>i?i:e}doParse(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("number"===typeof e)return n&&(e=this.fetchMinOrMax(e)),i&&(e=this._adjustPrec(e)),Md()(e);const r=this.getProp("parser");if("function"===typeof r&&(e=r(e)),t&&"string"===typeof e){const t=-1===e.indexOf(".")||e.indexOf(".")>-1&&("0"===e||e.lastIndexOf("0")<e.length-1),i=e.lastIndexOf(".")<e.length-1&&e.split("").filter((e=>"."===e)).length<2;if(!t||!i)return NaN}return i&&(e=this._adjustPrec(e)),"string"===typeof e&&e.length?n?this.fetchMinOrMax(Md()(e)):Md()(e):NaN}afterParser(e){const t=this.getProp("parser");return"string"===typeof e&&"function"===typeof t?Od()(t(e)):Od()(e)}toNumber(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("number"===typeof e)return e;if("string"===typeof e){const i=this.getProp("parser");"function"===typeof i&&(e=i(e)),t&&(e=this._adjustPrec(e))}return Md()(e)}isValidNumber(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("number"===typeof e&&!isNaN(e)){const{min:i,max:n,precision:r}=this.getProps(),s=this._getPrecLen(e);if(e>=i&&e<=n&&(!t||("number"===typeof r&&s<=r||"number"!==typeof r)))return!0}return!1}isValidString(e){if("string"===typeof e&&e.length){const t=this.doParse(e);return this.isValidNumber(t)}return!1}notifyChange(e,t){if(null==e||""===e)this._adapter.notifyChange("",t);else{const i=this.toNumber(e,!0);"number"!==typeof i||isNaN(i)?this._adapter.notifyChange(this.afterParser(e),t):(this._adapter.notifyChange(i,t),this.notifyNumberChange(i,t))}}notifyNumberChange(e,t){const{number:i}=this.getStates();this.isValidNumber(e)&&e!==i&&this._adapter.notifyNumberChange(e,t)}updateStates(e,t){this._adapter.updateStates(e,t)}}const Fd=jd;const Bd=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.637 16.4369C19.0513 17.0227 18.1015 17.0227 17.5157 16.4369L11.8589 10.7801L6.20202 16.4369C5.61623 17.0227 4.66648 17.0227 4.0807 16.4369C3.49491 15.8511 3.49491 14.9014 4.0807 14.3156L10.7982 7.59809C11.384 7.01231 12.3337 7.01231 12.9195 7.59809L19.637 14.3156C20.2228 14.9014 20.2228 15.8511 19.637 16.4369Z",fill:"currentColor"}))}),"chevron_up");const Nd=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.08045 7.59809C4.66624 7.01231 5.61599 7.01231 6.20177 7.59809L11.8586 13.2549L17.5155 7.59809C18.1013 7.01231 19.051 7.01231 19.6368 7.59809C20.2226 8.18388 20.2226 9.13363 19.6368 9.71941L12.9193 16.4369C12.3335 17.0227 11.3838 17.0227 10.798 16.4369L4.08045 9.71941C3.49467 9.13363 3.49467 8.18388 4.08045 7.59809Z",fill:"currentColor"}))}),"chevron_down");var zd=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Hd extends M.A{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{setValue:(e,t)=>this.setState({value:e},t),setNumber:(e,t)=>this.setState({number:e},t),setFocusing:(e,t)=>this.setState({focusing:e},t),setHovering:e=>this.setState({hovering:e}),notifyChange:function(){return e.props.onChange(...arguments)},notifyNumberChange:function(){return e.props.onNumberChange(...arguments)},notifyBlur:e=>this.props.onBlur(e),notifyFocus:e=>this.props.onFocus(e),notifyUpClick:(e,t)=>this.props.onUpClick(e,t),notifyDownClick:(e,t)=>this.props.onDownClick(e,t),notifyKeyDown:e=>this.props.onKeyDown(e),registerGlobalEvent:(e,t)=>{e&&"function"===typeof t&&(this.adapter.unregisterGlobalEvent(e),this.adapter.setCache(e,t),document.addEventListener(e,t))},unregisterGlobalEvent:e=>{if(e){const t=this.adapter.getCache(e);document.removeEventListener(e,t),this.adapter.setCache(e,null)}},recordCursorPosition:()=>{try{this.inputNode&&(this.cursorStart=this.inputNode.selectionStart,this.cursorEnd=this.inputNode.selectionEnd,this.currentValue=this.inputNode.value,this.cursorBefore=this.inputNode.value.substring(0,this.cursorStart),this.cursorAfter=this.inputNode.value.substring(this.cursorEnd))}catch(Ey){console.warn(Ey)}},restoreByAfter:e=>{if((0,L.A)(e))return!1;const t=this.inputNode.value,i=t.lastIndexOf(e);return-1!==i&&(i+e.length===t.length&&(this.adapter.fixCaret(i,i),!0))},restoreCursor:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.cursorAfter;return!(0,L.A)(t)&&Array.prototype.some.call(t,((i,n)=>{const r=t.substring(n);return e.adapter.restoreByAfter(r)}))},fixCaret:(e,t)=>{if(void 0!==e&&void 0!==t&&this.inputNode&&this.inputNode.value)try{const i=this.inputNode.selectionStart,n=this.inputNode.selectionEnd;e===i&&t===n||this.inputNode.setSelectionRange(e,t)}catch(Ey){}},setClickUpOrDown:e=>{this.clickUpOrDown=e},updateStates:(e,t)=>{this.setState(e,t)}})}constructor(e){super(e),this.setInputRef=e=>{const{forwardedRef:t}=this.props;this.inputNode=e,t&&"object"===typeof t?t.current=e:"function"===typeof t&&t(e)},this.handleInputFocus=e=>this.foundation.handleInputFocus(e),this.handleInputChange=(e,t)=>this.foundation.handleInputChange(e,t),this.handleInputBlur=e=>this.foundation.handleInputBlur(e),this.handleInputKeyDown=e=>this.foundation.handleInputKeyDown(e),this.handleInputMouseEnter=e=>this.foundation.handleInputMouseEnter(e),this.handleInputMouseLeave=e=>this.foundation.handleInputMouseLeave(e),this.handleInputMouseMove=e=>this.foundation.handleInputMouseMove(e),this.handleUpClick=e=>this.foundation.handleUpClick(e),this.handleDownClick=e=>this.foundation.handleDownClick(e),this.handleMouseUp=e=>this.foundation.handleMouseUp(e),this.handleMouseLeave=e=>this.foundation.handleMouseLeave(e),this.renderButtons=()=>{const{prefixCls:e,disabled:t,innerButtons:i,max:n,min:s}=this.props,{hovering:a,focusing:l,number:c}=this.state,h=t||c===n,u=t||c===s,p=d()("".concat(e,"-number-suffix-btns"),{["".concat(e,"-number-suffix-btns-inner")]:i,["".concat(e,"-number-suffix-btns-inner-hover")]:i&&a&&!l}),g=d()("".concat(e,"-number-button"),"".concat(e,"-number-button-up"),{["".concat(e,"-number-button-up-disabled")]:t,["".concat(e,"-number-button-up-not-allowed")]:h}),f=d()("".concat(e,"-number-button"),"".concat(e,"-number-button-down"),{["".concat(e,"-number-button-down-disabled")]:t,["".concat(e,"-number-button-down-not-allowed")]:u});return o.createElement("div",{className:p},o.createElement("span",{className:g,onMouseDown:h?r():this.handleUpClick,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave},o.createElement(Bd,{size:"extra-small"})),o.createElement("span",{className:f,onMouseDown:u?r():this.handleDownClick,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave},o.createElement(Nd,{size:"extra-small"})))},this.renderSuffix=()=>{const{innerButtons:e,suffix:t}=this.props,{hovering:i,focusing:n}=this.state;if(e&&(i||n)){return this.renderButtons()}return t},this.state={value:"",number:null,focusing:Boolean(e.autofocus)||!1,hovering:!1},this.inputNode=null,this.foundation=new Fd(this.adapter),this.clickUpOrDown=!1}componentDidUpdate(e){const{value:t,preventScroll:i}=this.props,{focusing:n}=this.state;let r;if(t!==e.value&&!Ed(t,e.value)){if((0,L.A)(t)||""===t)r="",this.foundation.updateStates({value:r,number:null});else{let e=t;"number"===typeof t&&(e=this.foundation.doFormat(t));const i=this.foundation.doParse(e,!1,!0,!0),s="number"===typeof t?t:this.foundation.doParse(e,!1,!1,!1);if(n)if(this.foundation.isValidNumber(i)&&i!==this.state.number){const e={number:i};this.clickUpOrDown&&(e.value=this.foundation.doFormat(e.number,!0),r=e.value),this.foundation.updateStates(e,(()=>this.adapter.restoreCursor()))}else Ad()(s)?this.foundation.updateStates({value:e}):(r=this.foundation.doFormat(s,!1),this.foundation.updateStates({value:r}));else this.foundation.isValidNumber(i)?(r=this.foundation.doFormat(i),this.foundation.updateStates({number:i,value:r})):(r="",this.foundation.updateStates({number:null,value:r}))}r&&C()(r)&&r!==String(this.props.value)&&this.foundation.notifyChange(r,null)}this.clickUpOrDown&&this.props.keepFocus&&this.state.focusing&&document.activeElement!==this.inputNode&&this.inputNode.focus({preventScroll:i})}render(){const e=this.props,{disabled:t,className:i,prefixCls:n,min:r,max:s,step:a,shiftStep:l,precision:c,formatter:h,parser:u,forwardedRef:p,onUpClick:g,onDownClick:f,pressInterval:m,pressTimeout:v,suffix:y,size:b,hideButtons:_,innerButtons:x,style:S,onNumberChange:w,keepFocus:C,defaultValue:k}=e,A=zd(e,["disabled","className","prefixCls","min","max","step","shiftStep","precision","formatter","parser","forwardedRef","onUpClick","onDownClick","pressInterval","pressTimeout","suffix","size","hideButtons","innerButtons","style","onNumberChange","keepFocus","defaultValue"]),{value:E,number:T}=this.state,O=d()(i,"".concat(n,"-number"),{["".concat(n,"-number-size-").concat(b)]:b}),P=this.renderButtons(),M={"aria-disabled":t,step:a};T&&(M["aria-valuenow"]=T),s!==1/0&&(M["aria-valuemax"]=s),r!==-1/0&&(M["aria-valuemin"]=r);const I=o.createElement("div",{className:O,style:S,onMouseMove:e=>this.handleInputMouseMove(e),onMouseEnter:e=>this.handleInputMouseEnter(e),onMouseLeave:e=>this.handleInputMouseLeave(e)},o.createElement(ce,Object.assign({role:"spinbutton"},M,A,{size:b,disabled:t,ref:this.setInputRef,value:E,onFocus:this.handleInputFocus,onChange:this.handleInputChange,onBlur:this.handleInputBlur,onKeyDown:this.handleInputKeyDown,suffix:this.renderSuffix()})),_||x?null:P);return I}}Hd.propTypes={"aria-label":c().string,"aria-labelledby":c().string,"aria-invalid":c().bool,"aria-errormessage":c().string,"aria-describedby":c().string,"aria-required":c().bool,autofocus:c().bool,clearIcon:c().node,className:c().string,defaultValue:c().oneOfType([c().number,c().string]),disabled:c().bool,formatter:c().func,forwardedRef:c().any,hideButtons:c().bool,innerButtons:c().bool,insetLabel:c().node,insetLabelId:c().string,keepFocus:c().bool,max:c().number,min:c().number,parser:c().func,precision:c().number,prefixCls:c().string,pressInterval:c().number,pressTimeout:c().number,preventScroll:c().bool,shiftStep:c().number,step:c().number,style:c().object,suffix:c().any,value:c().oneOfType([c().number,c().string]),onBlur:c().func,onChange:c().func,onDownClick:c().func,onKeyDown:c().func,onNumberChange:c().func,onUpClick:c().func},Hd.defaultProps={forwardedRef:r(),innerButtons:!1,keepFocus:!1,max:1/0,min:-1/0,prefixCls:Id.PREFIX,pressInterval:Rd.DEFAULT_PRESS_TIMEOUT,pressTimeout:Rd.DEFAULT_PRESS_TIMEOUT,shiftStep:Rd.DEFAULT_SHIFT_STEP,size:Dd.DEFAULT_SIZE,step:Rd.DEFAULT_STEP,onBlur:r(),onChange:r(),onDownClick:r(),onFocus:r(),onKeyDown:r(),onNumberChange:r(),onUpClick:r()};const Vd=Ui(o.forwardRef((function(e,t){return o.createElement(Hd,Object.assign({},e,{forwardedRef:t}))})),Hd),Ud="horizontal",Wd="vertical",Gd={PREFIX:"".concat(p._,"-navigation")},Kd={MODE:[Wd,Ud],MODE_VERTICAL:Wd,MODE_HORIZONTAL:Ud,ICON_POS_LEFT:"left",ICON_POS_RIGHT:"right",DEFAULT_LOGO_ICON_SIZE:"extra-large",TOGGLE_ICON_LEFT:"left",TOGGLE_ICON_RIGHT:"right"},Yd=999,Xd=0,qd=100,Zd=0,Qd=100,$d={open:"chevron_up",closed:"chevron_down"};class Jd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=e&&"object"===typeof e||(e={text:e,itemKey:e,maxHeight:Yd,link:null,items:null,icon:"",indent:!1});for(const t of Object.keys(e))this[t]=e[t];e.items&&Array.isArray(e.items)&&e.items.length?(this.items=e.items.map((e=>new Jd(e))),this.toggleIcon="toggleIcon"in e&&Jd.isValidToggleIcon(e.toggleIcon)?Object.assign({},e.toggleIcon):Object.assign({},$d)):this.items=null}static isValidToggleIcon(e){return Boolean(e&&"object"===typeof e&&"string"===typeof e.open&&e.open.length&&"string"===typeof e.closed&&e.closed.length)}}class eu extends k.A{constructor(e){super(Object.assign({},e))}static getZeroParentKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];if(n.length)for(const s of n)if(Array.isArray(e[s])&&e[s].length){const i=e[s][0];(0,L.A)(i)||t.push(i)}return t}static buildItemKeysMap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"itemKey";if(Array.isArray(e)&&e.length)for(const r of e)if(Array.isArray(r))eu.buildItemKeysMap(r,t,[...i],n);else{let e;if(r&&"object"===typeof r&&(e=r[n]||r.props&&r.props[n]),e)if(t[e]=[...i],Array.isArray(r.items)&&r.items.length)eu.buildItemKeysMap(r.items,t,[...i,e],n);else if(r.props&&r.props.children){const s=Array.isArray(r.props.children)?r.props.children:[r.props.children];eu.buildItemKeysMap(s,t,[...i,e],n)}}return t}init(e){const{defaultSelectedKeys:t,selectedKeys:i}=this.getProps();let n=i||t||[];const{itemKeysMap:r,willOpenKeys:s,formattedItems:a}=this.getCalcState(),o=this.selectLevelZeroParentKeys(r,n);if(n=n.concat(o),"constructor"===e)return{selectedKeys:n,itemKeysMap:r,openKeys:s,items:a};this._adapter.updateSelectedKeys(n,!1),this._adapter.setItemKeysMap(r),this._adapter.updateOpenKeys(s),this._adapter.updateItems(a),this._adapter.setItemsChanged(!0)}getCalcState(){const{itemKeysMap:e,formattedItems:t}=this.getFormattedItems();return{itemKeysMap:e,willOpenKeys:this.getWillOpenKeys(e),formattedItems:t}}getFormattedItems(){const{items:e,children:t}=this.getProps(),i=this.formatItems(e),n=Array.isArray(e)&&e.length?i:t;return{itemKeysMap:eu.buildItemKeysMap(n),formattedItems:i}}getWillOpenKeys(e){const{defaultOpenKeys:t,openKeys:i,defaultSelectedKeys:n,selectedKeys:r,mode:s}=this.getProps(),{openKeys:a=[]}=this.getStates();let o=i||t||[];if(!Array.isArray(t)&&!Array.isArray(i)&&s===Kd.MODE_VERTICAL&&(Array.isArray(n)||Array.isArray(r))){const t=Array.isArray(r)?r:n;o=a.concat(this.getShouldOpenKeys(e,t)),o=Array.from(new Set(o))}return[...o]}getShouldOpenKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=new Set;return Array.isArray(t)&&t.length&&t.forEach((t=>{if(t){const n=Fi()(e,t);Array.isArray(n)&&n.forEach((e=>i.add(e)))}})),[...i]}destroy(){}selectLevelZeroParentKeys(e,t){const i=(0,L.A)(e)?this.getState("itemKeysMap"):e,n=[];if(t.length)for(const r of t)if(Array.isArray(i[r])&&i[r].length){const e=i[r][0];(0,L.A)(e)||n.push(e)}return n.length?n:[]}formatItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];for(const i of e)t.push(new Jd(i));return t}handleSelect(e){this._adapter.notifySelect(e)}judgeIfOpen(e,t){let i=!1;const n=Array.isArray(e)?e:e&&[e];if(n&&Array.isArray(t)&&t.length)for(const r of t)if(i=n.includes(r.itemKey)||this.judgeIfOpen(n,r.items),i)break;return i}handleCollapseChange(){const e=!this.getState("isCollapsed");this._isControlledComponent("isCollapsed")||this._adapter.setIsCollapsed(e),this._adapter.notifyCollapseChange(e)}handleItemsChange(e){this._adapter.setItemsChanged(e)}}const tu=function(){const e=new Set(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.forEach((t=>t&&e.add(t))),Array.from(e)},iu=function(){const e=new Set(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.forEach((t=>t&&e.delete(t))),Array.from(e)};class nu extends k.A{constructor(e){super(Object.assign({},e))}init(){this._timer=null}destroy(){this.clearDelayTimer()}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}isValidKey(e){return null!=e&&("number"===typeof e||"string"===typeof e)}handleDropdownVisibleChange(e){const t=this.getProp("itemKey"),i=this._adapter.getOpenKeysIsControlled(),n=this._adapter.getCanUpdateOpenKeys(),r=this._adapter.getOpenKeys(),s=e?tu(r,t):iu(r,t);this.clearDelayTimer(),i||n&&this._adapter.updateOpen(e),this._adapter.notifyGlobalOpenChange({itemKey:t,openKeys:s,isOpen:e})}handleClick(e,t){const{itemKey:i,disabled:n}=this.getProps();if(n)return;const r=t&&t.contains(e.target);let s=Boolean(this._adapter.getIsOpen());s=!!r&&!s;const a={itemKey:i,openKeys:s?tu(this._adapter.getOpenKeys(),i):iu(this._adapter.getOpenKeys(),i),isOpen:s,domEvent:e},o=this._adapter.getOpenKeysIsControlled(),l=this._adapter.getCanUpdateOpenKeys();!o&&l&&this._adapter.updateOpen(s),this._adapter.notifyGlobalOpenChange(a),this._adapter.notifyGlobalOnClick(a)}handleKeyPress(e,t){(0,gi.A)(e)&&this.handleClick(e,t)}}class ru extends k.A{constructor(e){super(Object.assign({},e))}init(){this._timer=null,this._mounted=!0}destroy(){this._mounted=!1}isValidKey(e){return null!=e&&("string"===typeof e||"number"===typeof e)}handleClick(e){const{isSubNav:t,itemKey:i,text:n,disabled:r}=this.getProps();if(r)return;t||!this.isValidKey(i)||this._adapter.getSelectedKeysIsControlled()||this._adapter.getSelected()||this._adapter.updateSelected(!0);const s=[i];if(!t){if(!this._adapter.getSelected()){const t=[this._adapter.cloneDeep(this.getProps())];this._adapter.notifyGlobalOnSelect({itemKey:i,selectedKeys:s,selectedItems:t,domEvent:e})}this._adapter.notifyGlobalOnClick({itemKey:i,text:n,domEvent:e})}this._adapter.notifyClick({itemKey:i,text:n,domEvent:e})}handleKeyPress(e){if((0,gi.A)(e)){const{link:t,linkOptions:i}=this.getProps(),n=Fi()(i,"target","_self");this.handleClick(e),"string"===typeof t&&("_blank"===n?window.open(t):window.location.href=t)}}}const su=o.createContext({isCollapsed:!1,selectedKeys:[],openKeys:[]}),au="".concat(Gd.PREFIX,"-item");class ou extends M.A{constructor(e){super(e),this.setItemRef=e=>{this.props.forwardRef&&this.props.forwardRef(e)},this.wrapTooltip=e=>{const{text:t,tooltipHideDelay:i,tooltipShowDelay:n}=this.props,r=null!==i&&void 0!==i?i:this.context.tooltipHideDelay,s=null!==n&&void 0!==n?n:this.context.tooltipShowDelay;return o.createElement(vh.A,{content:t,position:"right",trigger:"hover",mouseEnterDelay:s,mouseLeaveDelay:r},e)},this.handleClick=e=>this.foundation.handleClick(e),this.handleKeyPress=e=>this.foundation.handleKeyPress(e),this.state={tooltipShow:!1},this.foundation=new ru(this.adapter)}_invokeContextFunc(e){if(e&&this.context&&"function"===typeof this.context[e]){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return this.context[e](...i)}return null}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{cloneDeep:$.mg,updateTooltipShow:e=>this.setState({tooltipShow:e}),updateSelected:e=>this._invokeContextFunc("updateSelectedKeys",[this.props.itemKey]),updateGlobalSelectedKeys:e=>this._invokeContextFunc("updateSelectedKeys",[...e]),getSelectedKeys:()=>this.context&&this.context.selectedKeys,getSelectedKeysIsControlled:()=>this.context&&this.context.selectedKeysIsControlled,notifyGlobalOnSelect:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e._invokeContextFunc("onSelect",...i)},notifyGlobalOnClick:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e._invokeContextFunc("onClick",...i)},notifyClick:function(){return e.props.onClick(...arguments)},notifyMouseEnter:function(){return e.props.onMouseEnter(...arguments)},notifyMouseLeave:function(){return e.props.onMouseLeave(...arguments)},getIsCollapsed:()=>this.props.isCollapsed||Boolean(this.context&&this.context.isCollapsed)||!1,getSelected:()=>Boolean(this.context&&this.context.selectedKeys&&this.context.selectedKeys.includes(this.props.itemKey)),getIsOpen:()=>Boolean(this.context&&this.context.openKeys&&this.context.openKeys.includes(this.props.itemKey))})}renderIcon(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(this.props.isSubNav)return null;if(!e&&this.context.mode===Kd.MODE_HORIZONTAL)return null;let r="large";t===Kd.ICON_POS_RIGHT&&(r="default");const s=d()("".concat(au,"-icon"),{["".concat(au,"-icon-toggle-").concat(this.context.toggleIconPosition)]:i,["".concat(au,"-icon-info")]:!i});return o.createElement("i",{className:s,key:n},(0,$.uR)(e)?o.cloneElement(e,{size:e.props.size||r}):e)}render(){const{text:e,children:t,icon:i,toggleIcon:n,className:r,isSubNav:s,style:a,indent:l,onMouseEnter:c,onMouseLeave:h,link:u,linkOptions:p,disabled:g,level:f=0,tabIndex:m}=this.props,{mode:v,isInSubNav:y,prefixCls:b,limitIndent:_}=this.context,x=this.adapter.getIsCollapsed(),S=this.adapter.getSelected();let w=null;if((0,L.A)(t)){let t=null;if(v===Kd.MODE_VERTICAL&&!_&&!x){const e=i&&!l?f:f-1;t=tl()(e,(e=>this.renderIcon(null,Kd.ICON_POS_RIGHT,!1,e)))}w=o.createElement(o.Fragment,null,t,this.context.toggleIconPosition===Kd.TOGGLE_ICON_LEFT&&this.renderIcon(n,Kd.ICON_POS_RIGHT,!0,"key-toggle-pos-right"),i||l||y?this.renderIcon(i,Kd.ICON_POS_LEFT,!1,"key-position-left"):null,(0,L.A)(e)?"":o.createElement("span",{className:"".concat(Gd.PREFIX,"-item-text")},e),this.context.toggleIconPosition===Kd.TOGGLE_ICON_RIGHT&&this.renderIcon(n,Kd.ICON_POS_RIGHT,!0,"key-toggle-pos-right"))}else w=t;"string"===typeof u&&(w=o.createElement("a",Object.assign({className:"".concat(b,"-item-link"),href:u,tabIndex:-1},p),w));let C="";if(y&&(x||v===Kd.MODE_HORIZONTAL)){const e=d()({[au]:!0,["".concat(au,"-sub")]:s,["".concat(au,"-selected")]:S,["".concat(au,"-collapsed")]:x,["".concat(au,"-disabled")]:g});C=o.createElement(Bh.Item,{selected:S,active:S,forwardRef:this.setItemRef,className:e,onClick:this.handleClick,onMouseEnter:c,onMouseLeave:h,disabled:g,onKeyDown:this.handleKeyPress},w)}else{const e=d()("".concat(r||"".concat(au,"-normal")),{[au]:!0,["".concat(au,"-sub")]:s,["".concat(au,"-selected")]:S&&!s,["".concat(au,"-collapsed")]:x,["".concat(au,"-disabled")]:g,["".concat(au,"-has-link")]:"string"===typeof u}),t={"aria-disabled":g};if(s){const e=this.adapter.getIsOpen();t["aria-expanded"]=e}C=o.createElement("li",Object.assign({role:s?null:"menuitem",tabIndex:s?-1:m},t,{style:a,ref:this.setItemRef,className:e,onClick:this.handleClick,onMouseEnter:c,onMouseLeave:h,onKeyPress:this.handleKeyPress},this.getDataAttr(this.props)),w)}return(x&&!y&&!s||x&&s&&g)&&(C=this.wrapTooltip(C)),"function"===typeof this.context.renderWrapper?this.context.renderWrapper({itemElement:C,isSubNav:s,isInSubNav:y,props:this.props}):C}}ou.contextType=su,ou.propTypes={text:c().oneOfType([c().string,c().node]),itemKey:c().oneOfType([c().string,c().number]),onClick:c().func,onMouseEnter:c().func,onMouseLeave:c().func,children:c().node,icon:c().oneOfType([c().node]),className:c().string,toggleIcon:c().string,style:c().object,forwardRef:c().func,indent:c().oneOfType([c().bool,c().number]),isCollapsed:c().bool,isSubNav:c().bool,link:c().string,linkOptions:c().object,disabled:c().bool,tabIndex:c().number},ou.defaultProps={isSubNav:!1,indent:!1,forwardRef:r(),isCollapsed:!1,onClick:r(),onMouseEnter:r(),onMouseLeave:r(),disabled:!1,tabIndex:0};class lu extends k.A{constructor(e){super(Object.assign({},e)),this.updateDOMInRenderTree=e=>{this._adapter.setDOMInRenderTree(e)},this.updateDOMHeight=e=>{this._adapter.setDOMHeight(e)},this.updateVisible=e=>{this._adapter.setVisible(e)},this.updateIsTransitioning=e=>{this._adapter.setIsTransitioning(e)}}}const cu=lu,hu={PREFIX:"".concat(p._,"-collapsible")};class du extends M.A{constructor(e){super(e),this.domRef=o.createRef(),this.hasBeenRendered=!1,this.handleResize=e=>{const t=e[0];if(t){const e=du.getEntryInfo(t);this.foundation.updateDOMHeight(e.height),this.foundation.updateDOMInRenderTree(e.isShown)}},this.isChildrenInRenderTree=()=>!!this.domRef.current&&this.domRef.current.offsetHeight>0,this.state={domInRenderTree:!1,domHeight:0,visible:this.props.isOpen,isTransitioning:!1},this.foundation=new cu(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setDOMInRenderTree:e=>{this.state.domInRenderTree!==e&&this.setState({domInRenderTree:e})},setDOMHeight:e=>{this.state.domHeight!==e&&this.setState({domHeight:e})},setVisible:e=>{this.state.visible!==e&&this.setState({visible:e})},setIsTransitioning:e=>{this.state.isTransitioning!==e&&this.setState({isTransitioning:e})}})}componentDidMount(){super.componentDidMount(),this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.domRef.current);const e=this.isChildrenInRenderTree();this.foundation.updateDOMInRenderTree(e),e&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight)}componentDidUpdate(e,t,i){const n=Object.keys(this.props).filter((t=>!a()(this.props[t],e[t]))),r=Object.keys(this.state).filter((e=>!a()(this.state[e],t[e])));n.includes("reCalcKey")&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),r.includes("domInRenderTree")&&this.state.domInRenderTree&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),n.includes("isOpen")&&(!this.props.isOpen&&this.props.motion||this.foundation.updateVisible(this.props.isOpen)),this.props.motion&&e.isOpen!==this.props.isOpen&&this.foundation.updateIsTransitioning(!0)}componentWillUnmount(){super.componentWillUnmount(),this.resizeObserver.disconnect()}render(){const e=Object.assign({overflow:"hidden",height:this.props.isOpen?this.state.domHeight:this.props.collapseHeight,opacity:this.props.isOpen||!this.props.fade||0!==this.props.collapseHeight?1:0,transitionDuration:"".concat(this.props.motion&&this.state.isTransitioning?this.props.duration:0,"ms")},this.props.style),t=d()("".concat(hu.PREFIX,"-wrapper"),{["".concat(hu.PREFIX,"-transition")]:this.props.motion&&this.state.isTransitioning},this.props.className),i=this.props.keepDOM&&(!this.props.lazyRender||this.hasBeenRendered)||0!==this.props.collapseHeight||this.state.visible||this.props.isOpen;return i&&!this.hasBeenRendered&&(this.hasBeenRendered=!0),o.createElement("div",Object.assign({className:t,style:e,onTransitionEnd:()=>{var e,t;this.props.isOpen||this.foundation.updateVisible(!1),this.foundation.updateIsTransitioning(!1),null===(t=(e=this.props).onMotionEnd)||void 0===t||t.call(e)}},this.getDataAttr(this.props)),o.createElement("div",{"x-semi-prop":"children",ref:this.domRef,style:{overflow:"hidden"},id:this.props.id},i&&this.props.children))}}du.__SemiComponentName__="Collapsible",du.defaultProps=(0,$.bQ)(du.__SemiComponentName__,{isOpen:!1,duration:250,motion:!0,keepDOM:!1,lazyRender:!1,collapseHeight:0,fade:!1}),du.getEntryInfo=e=>{let t;t=e.borderBoxSize?!(0===e.borderBoxSize[0].blockSize&&0===e.borderBoxSize[0].inlineSize):!(0===e.contentRect.height&&0===e.contentRect.width);let i=0;if(e.borderBoxSize)i=Math.ceil(e.borderBoxSize[0].blockSize);else{i=e.target.clientHeight}return{isShown:t,height:i}},du.propTypes={motion:c().bool,children:c().node,isOpen:c().bool,duration:c().number,keepDOM:c().bool,collapseHeight:c().number,style:c().object,className:c().string,reCalcKey:c().oneOfType([c().string,c().number])};const uu=du;class pu extends M.A{constructor(e){super(e),this.setItemRef=e=>{e&&e.current?this.itemRef=e:this.itemRef={current:e}},this.setTitleRef=e=>{e&&e.current?this.titleRef=e:this.titleRef={current:e}},this.handleClick=e=>{this.foundation.handleClick(e&&e.nativeEvent,this.titleRef&&this.titleRef.current)},this.handleKeyPress=e=>{this.foundation.handleKeyPress(e&&e.nativeEvent,this.titleRef&&this.titleRef.current)},this.handleDropdownVisible=e=>this.foundation.handleDropdownVisibleChange(e),this.state={isHovered:!1},this.adapter.setCache("firstMounted",!0),this.titleRef=o.createRef(),this.itemRef=o.createRef(),this.foundation=new nu(this.adapter)}_invokeContextFunc(e){if(e&&this.context&&"function"===typeof this.context[e]){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return this.context[e](...i)}return null}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{updateIsHovered:e=>this.setState({isHovered:e}),getOpenKeys:()=>this.context&&this.context.openKeys,getOpenKeysIsControlled:()=>this.context&&this.context.openKeysIsControlled,getCanUpdateOpenKeys:()=>this.context&&this.context.canUpdateOpenKeys,updateOpen:e=>this._invokeContextFunc(e?"addOpenKeys":"removeOpenKeys",this.props.itemKey),notifyGlobalOpenChange:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e._invokeContextFunc("onOpenChange",...i)},notifyGlobalOnSelect:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e._invokeContextFunc("onSelect",...i)},notifyGlobalOnClick:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e._invokeContextFunc("onClick",...i)},getIsSelected:e=>Boolean(!(0,L.A)(e)&&Fi()(this.context,"selectedKeys",[]).includes(String(e))),getIsOpen:()=>Boolean(this.context&&this.context.openKeys&&this.context.openKeys.includes(String(this.props.itemKey)))})}renderIcon(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const{prefixCls:s}=this.context;let a="large";t===Kd.ICON_POS_RIGHT&&(a="default");const l=d()("".concat(s,"-item-icon"),{["".concat(s,"-item-icon-toggle-").concat(this.context.toggleIconPosition)]:n,["".concat(s,"-item-icon-info")]:!n}),c=this.adapter.getIsOpen(),h=o.isValidElement(e)?i?o.createElement(Nc.A,{animationState:c?"enter":"leave",startClassName:"".concat(Gd.PREFIX,"-icon-rotate-").concat(c?"180":"0")},(t=>{let{animationClassName:i}=t;return o.cloneElement(e,{size:a,className:i})})):o.cloneElement(e,{size:a}):null;return o.createElement("i",{key:r,className:l},h)}renderTitleDiv(){const{text:e,icon:t,itemKey:i,indent:n,disabled:r,level:s,expandIcon:a}=this.props,{mode:l,isInSubNav:c,isCollapsed:h,prefixCls:u,subNavMotion:p,limitIndent:g}=this.context,f=this.adapter.getIsOpen(),m=d()("".concat(u,"-sub-title"),{["".concat(u,"-sub-title-selected")]:this.adapter.getIsSelected(i),["".concat(u,"-sub-title-disabled")]:r});let v=!1,y="";h?y=c?o.createElement(jo,null):null:l===Kd.MODE_HORIZONTAL?y=c?o.createElement(jo,{"aria-hidden":!0}):a||o.createElement(Nd,{"aria-hidden":!0}):(p&&(v=!0),y=a||o.createElement(Nd,{"aria-hidden":!0}));let b=null;if(l===Kd.MODE_VERTICAL&&!g&&!h){const e=t&&!n?s:s-1;b=tl()(e,(e=>this.renderIcon(null,Kd.ICON_POS_RIGHT,!1,!1,e)))}const _=!h&&c&&l===Kd.MODE_HORIZONTAL||h&&c;return o.createElement("div",{role:"menuitem",tabIndex:_?-1:0,ref:this.setTitleRef,className:m,onClick:this.handleClick,onKeyPress:this.handleKeyPress,"aria-expanded":f?"true":"false"},o.createElement("div",{className:"".concat(u,"-item-inner")},b,this.context.toggleIconPosition===Kd.TOGGLE_ICON_LEFT&&this.renderIcon(y,Kd.ICON_POS_RIGHT,v,!0,"key-toggle-position-left"),t||n||c&&l!==Kd.MODE_HORIZONTAL?this.renderIcon(t,Kd.ICON_POS_LEFT,!1,!1,"key-inSubNav-position-left"):null,o.createElement("span",{className:"".concat(u,"-item-text")},e),this.context.toggleIconPosition===Kd.TOGGLE_ICON_RIGHT&&this.renderIcon(y,Kd.ICON_POS_RIGHT,v,!0,"key-toggle-position-right")))}renderSubUl(){const{children:e,maxHeight:t}=this.props,{isCollapsed:i,mode:n,subNavMotion:r,prefixCls:s}=this.context,a=this.adapter.getIsOpen(),l=n===Kd.MODE_HORIZONTAL,c=d()("".concat(s,"-sub"),{["".concat(s,"-sub-open")]:a,["".concat(s,"-sub-popover")]:i||l});return l?null:r?o.createElement(uu,{motion:r,isOpen:a,keepDOM:!1,fade:!0},i?null:o.createElement("ul",{className:c},e)):a&&!i?o.createElement("ul",{className:c},e):null}wrapDropdown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{children:t,dropdownStyle:i,disabled:n}=this.props,{mode:r,isInSubNav:s,isCollapsed:a,subNavCloseDelay:l,subNavOpenDelay:c,prefixCls:h,getPopupContainer:u}=this.context,p=this.adapter.getIsOpen(),g=this.adapter.getOpenKeysIsControlled(),f=d()({["".concat(h,"-popover")]:a}),m={trigger:"hover",style:i};return g&&(m.trigger="custom",m.visible=p),u&&(m.getPopupContainer=u),(a||r===Kd.MODE_HORIZONTAL)&&(e=n?e:o.createElement(Bh,Object.assign({className:f,render:o.createElement(Bh.Menu,null,t),position:r!==Kd.MODE_HORIZONTAL||s?"rightTop":"bottomLeft",mouseEnterDelay:c,mouseLeaveDelay:l,onVisibleChange:this.handleDropdownVisible},m),e)),e}render(){const{itemKey:e,style:t,onMouseEnter:i,onMouseLeave:n,disabled:r,text:s}=this.props,{mode:a,isCollapsed:l,prefixCls:c}=this.context;let h=this.renderTitleDiv();const d=this.renderSubUl();return(l||a===Kd.MODE_HORIZONTAL)&&(h=this.wrapDropdown(h)),o.createElement(ou,{style:t,isSubNav:!0,itemKey:e,forwardRef:this.setItemRef,isCollapsed:l,className:"".concat(c,"-sub-wrap"),onMouseEnter:i,onMouseLeave:n,disabled:r,text:s},o.createElement(su.Provider,{value:Object.assign(Object.assign({},this.context),{isInSubNav:!0})},h,d))}}pu.contextType=su,pu.propTypes={itemKey:c().oneOfType([c().string,c().number]),text:c().oneOfType([c().string,c().node]),isOpen:c().bool,isCollapsed:c().bool,indent:c().oneOfType([c().bool,c().number]),children:c().node,style:c().object,icon:c().node,maxHeight:c().number,onMouseEnter:c().func,onMouseLeave:c().func,disabled:c().bool,level:c().number},pu.defaultProps={level:0,indent:!1,isCollapsed:!1,isOpen:!1,maxHeight:Yd,disabled:!1};const gu=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5C3.34315 22 2 20.6569 2 19V5C2 3.34315 3.34315 2 5 2ZM6 4C5.44772 4 5 4.44772 5 5V19C5 19.5523 5.44772 20 6 20H9C9.55229 20 10 19.5523 10 19V5C10 4.44772 9.55229 4 9 4H6Z",fill:"currentColor"}))}),"sidebar");function fu(e){let{prefixCls:t,locale:i,collapseText:n,isCollapsed:s,onClick:a=r()}=e;const l={icon:o.createElement(gu,null),type:"tertiary",theme:"borderless",onClick:()=>{"function"===typeof a&&a(!s)}};let c=s?null===i||void 0===i?void 0:i.expandText:null===i||void 0===i?void 0:i.collapseText;return"function"===typeof n&&(c=n(s)),o.createElement("div",{className:"".concat(t,"-collapse-btn")},s?o.createElement(vh.A,{content:c,position:"right"},o.createElement(St,Object.assign({},l))):o.createElement(St,Object.assign({},l),c))}class mu extends o.PureComponent{constructor(){super(...arguments),this.renderCollapseButton=()=>{const{collapseButton:e,collapseText:t}=this.props;if(o.isValidElement(e))return e;const{onCollapseChange:i,prefixCls:n,locale:r,isCollapsed:s}=this.context;return o.createElement(fu,{prefixCls:n,isCollapsed:s,locale:r,onClick:i,collapseText:t})}}render(){const{style:e,className:t,collapseButton:i,onClick:n}=this.props;let{children:r}=this.props;const{isCollapsed:s,mode:a}=this.context;!o.isValidElement(r)&&i&&a!==Kd.MODE_HORIZONTAL&&(r=this.renderCollapseButton());const l=d()(t,"".concat(Gd.PREFIX,"-footer"),{["".concat(Gd.PREFIX,"-footer-collapsed")]:s});return o.createElement("div",{className:l,style:e,onClick:n},r)}}mu.contextType=su,mu.propTypes={children:c().node,style:c().object,className:c().string,collapseButton:c().oneOfType([c().node,c().bool]),collapseText:c().func,onClick:c().func},mu.defaultProps={collapseButton:!1,onClick:r()},mu.elementType="NavFooter";class vu extends o.PureComponent{renderLogo(e){return o.isValidElement(e)?e:null}render(){const{children:e,style:t,className:i,logo:n,text:r,link:s,linkOptions:a,prefixCls:l}=this.props,{isCollapsed:c}=this.context,h=d()(i,"".concat(Gd.PREFIX,"-header"),{["".concat(Gd.PREFIX,"-header-collapsed")]:c});let u=o.createElement(o.Fragment,null,n?o.createElement("i",{className:"".concat(Gd.PREFIX,"-header-logo")},this.renderLogo(n)):null,(0,L.A)(r)||c?null:o.createElement("span",{className:"".concat(Gd.PREFIX,"-header-text")},r),e);return"string"===typeof s&&(u=o.createElement("a",Object.assign({className:"".concat(l,"-header-link"),href:s},a),u)),o.createElement("div",{className:h,style:t},u)}}vu.contextType=su,vu.propTypes={prefixCls:c().string,logo:c().oneOfType([c().string,c().object,c().node]),text:c().oneOfType([c().string,c().node]),children:c().node,style:c().object,className:c().string,link:c().string,linkOptions:c().object},vu.defaultProps={prefixCls:Gd.PREFIX},vu.elementType="NavHeader";var yu=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function bu(e,t){return function(){const i=new Set(e.state[t]);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];r.forEach((e=>e&&i.add(e))),e.setState({[t]:Array.from(i)})}}function _u(e,t){return function(){const i=new Set(e.state[t]);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];r.forEach((e=>e&&i.delete(e))),e.setState({[t]:Array.from(i)})}}const{hasOwnProperty:xu}=Object.prototype;class Su extends M.A{constructor(e){super(e),this.onCollapseChange=()=>{this.foundation.handleCollapseChange()},this.foundation=new eu(this.adapter),this.itemsChanged=!0;const{isCollapsed:t,defaultIsCollapsed:i,items:n,children:r}=e,s={isCollapsed:Boolean(this.isControlled("isCollapsed")?t:i),openKeys:[],items:[],itemKeysMap:{},selectedKeys:[]};if(this.state=Object.assign({},s),n&&n.length||r){const e=this.foundation.init("constructor");this.state=Object.assign(Object.assign({},s),e)}}static getDerivedStateFromProps(e,t){const i={};return xu.call(e,"isCollapsed")&&e.isCollapsed!==t.isCollapsed&&(i.isCollapsed=e.isCollapsed),i}componentDidMount(){}componentDidUpdate(e){if(e.items!==this.props.items||e.children!==this.props.children)this.foundation.init();else{if(this.foundation.handleItemsChange(!1),this.props.selectedKeys&&!a()(e.selectedKeys,this.props.selectedKeys)){this.adapter.updateSelectedKeys(this.props.selectedKeys);const e=this.foundation.getWillOpenKeys(this.state.itemKeysMap);this.adapter.updateOpenKeys(e)}this.props.openKeys&&!a()(e.openKeys,this.props.openKeys)&&this.adapter.updateOpenKeys(this.props.openKeys)}}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifySelect:function(){return e.props.onSelect(...arguments)},notifyOpenChange:function(){return e.props.onOpenChange(...arguments)},setIsCollapsed:e=>this.setState({isCollapsed:e}),notifyCollapseChange:function(){return e.props.onCollapseChange(...arguments)},updateItems:e=>this.setState({items:[...e]}),setItemKeysMap:e=>this.setState({itemKeysMap:Object.assign({},e)}),addSelectedKeys:bu(this,"selectedKeys"),removeSelectedKeys:_u(this,"selectedKeys"),updateSelectedKeys:function(t){let i=t;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){const n=e.foundation.selectLevelZeroParentKeys(null,t);i=Array.from(new Set(t.concat(n)))}e.setState({selectedKeys:i})},updateOpenKeys:e=>this.setState({openKeys:[...e]}),addOpenKeys:bu(this,"openKeys"),removeOpenKeys:_u(this,"openKeys"),setItemsChanged:e=>{this.itemsChanged=e}})}renderItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{expandIcon:i}=this.props;return o.createElement(o.Fragment,null,e.map(((e,n)=>Array.isArray(e.items)&&e.items.length?o.createElement(pu,Object.assign({key:e.itemKey||String(t)+n},e,{level:t,expandIcon:i}),this.renderItems(e.items,t+1)):o.createElement(ou,Object.assign({key:e.itemKey||String(t)+n},e,{level:t})))))}render(){const e=this.props,{children:t,mode:i,onOpenChange:n,onSelect:r,onClick:s,style:a,className:l,subNavCloseDelay:c,subNavOpenDelay:h,subNavMotion:u,tooltipShowDelay:p,tooltipHideDelay:g,prefixCls:f,bodyStyle:m,footer:v,header:y,toggleIconPosition:b,limitIndent:_,renderWrapper:x,getPopupContainer:S}=e,w=yu(e,["children","mode","onOpenChange","onSelect","onClick","style","className","subNavCloseDelay","subNavOpenDelay","subNavMotion","tooltipShowDelay","tooltipHideDelay","prefixCls","bodyStyle","footer","header","toggleIconPosition","limitIndent","renderWrapper","getPopupContainer"]),{selectedKeys:C,openKeys:k,items:A,isCollapsed:E}=this.state,{updateOpenKeys:T,addOpenKeys:O,removeOpenKeys:P,updateSelectedKeys:M,addSelectedKeys:I,removeSelectedKeys:R}=this.adapter,D=Object.assign({},a);let L=o.Children.toArray(t);const j=[],F=[];if(o.isValidElement(v)?j.push(o.createElement(mu,{key:0},v)):v&&"object"===typeof v&&j.push(o.createElement(mu,Object.assign({key:0},v))),o.isValidElement(y)?F.push(o.createElement(vu,{key:0},y)):y&&"object"===typeof y&&F.push(o.createElement(vu,Object.assign({key:0},y))),Array.isArray(L)&&L.length){L=[...L];let e=L.length;for(let t=0;t<e;t++){const i=L[t];i.type===mu||"NavFooter"===Fi()(i,"type.elementType")?(j.push(i),L.splice(t,1),t--,e--):i.type!==vu&&"NavHeader"!==Fi()(i,"type.elementType")||(F.push(i),L.splice(t,1),t--,e--)}}const B=d()(f,l,{["".concat(f,"-collapsed")]:E,["".concat(f,"-horizontal")]:"horizontal"===i,["".concat(f,"-vertical")]:"vertical"===i}),N=d()("".concat(f,"-header-list-outer"),{["".concat(f,"-header-list-outer-collapsed")]:E});return this.itemsChanged&&this.adapter.setCache("itemElems",this.renderItems(A)),o.createElement(pe.A,{componentName:"Navigation"},(e=>o.createElement(su.Provider,{value:{subNavCloseDelay:c,subNavOpenDelay:h,subNavMotion:u,tooltipShowDelay:p,tooltipHideDelay:g,openKeys:k,openKeysIsControlled:this.isControlled("openKeys")&&"vertical"===i&&!E,canUpdateOpenKeys:!0,selectedKeys:C,selectedKeysIsControlled:this.isControlled("selectedKeys"),isCollapsed:E,onCollapseChange:this.onCollapseChange,mode:i,onSelect:r,onOpenChange:n,updateOpenKeys:T,addOpenKeys:O,removeOpenKeys:P,updateSelectedKeys:M,addSelectedKeys:I,removeSelectedKeys:R,onClick:s,locale:e,prefixCls:f,toggleIconPosition:b,limitIndent:_,renderWrapper:x,getPopupContainer:S}},o.createElement("div",Object.assign({className:B,style:D},this.getDataAttr(w)),o.createElement("div",{className:"".concat(f,"-inner")},o.createElement("div",{className:N},F,o.createElement("div",{style:m,className:"".concat(f,"-list-wrapper")},o.createElement("ul",{role:"menu","aria-orientation":i,className:"".concat(f,"-list")},this.adapter.getCache("itemElems"),L))),j)))))}}Su.Sub=pu,Su.Item=ou,Su.Header=vu,Su.Footer=mu,Su.propTypes={collapseIcon:c().node,defaultOpenKeys:c().arrayOf(c().oneOfType([c().string,c().number])),openKeys:c().arrayOf(c().oneOfType([c().string,c().number])),defaultSelectedKeys:c().arrayOf(c().oneOfType([c().string,c().number])),expandIcon:c().node,selectedKeys:c().arrayOf(c().oneOfType([c().string,c().number])),mode:c().oneOf([...Kd.MODE]),onSelect:c().func,onClick:c().func,onOpenChange:c().func,items:c().array,isCollapsed:c().bool,defaultIsCollapsed:c().bool,onCollapseChange:c().func,multiple:c().bool,onDeselect:c().func,subNavMotion:c().oneOfType([c().bool,c().object,c().func]),subNavCloseDelay:c().number,subNavOpenDelay:c().number,tooltipShowDelay:c().number,tooltipHideDelay:c().number,children:c().node,style:c().object,bodyStyle:c().object,className:c().string,toggleIconPosition:c().string,prefixCls:c().string,header:c().oneOfType([c().node,c().object]),footer:c().oneOfType([c().node,c().object]),limitIndent:c().bool,getPopupContainer:c().func},Su.__SemiComponentName__="Navigation",Su.defaultProps=(0,$.bQ)(Su.__SemiComponentName__,{subNavCloseDelay:Qd,subNavOpenDelay:Zd,tooltipHideDelay:qd,tooltipShowDelay:Xd,onCollapseChange:r(),onSelect:r(),onClick:r(),onOpenChange:r(),toggleIconPosition:"right",limitIndent:!0,prefixCls:Gd.PREFIX,subNavMotion:!0,mode:Kd.MODE_VERTICAL});const wu=Su,Cu={PREFIX:"".concat(p._,"-popconfirm"),POPOVER:"".concat(p._,"-popconfirm-popover")};class ku extends k.A{init(){}destroy(){}handleCancel(e){const t=this._adapter.notifyCancel(e);Fc(t)?(this._adapter.updateCancelLoading(!0),t.then((e=>{this.handleVisibleChange(!1),this._adapter.updateCancelLoading(!1)}),(e=>{this._adapter.updateCancelLoading(!1)}))):this.handleVisibleChange(!1)}handleConfirm(e){const t=this._adapter.notifyConfirm(e);Fc(t)?(this._adapter.updateConfirmLoading(!0),t.then((e=>{this._adapter.updateConfirmLoading(!1),this.handleVisibleChange(!1)}),(e=>{this._adapter.updateConfirmLoading(!1)}))):this.handleVisibleChange(!1)}handleClickOutSide(e){this._adapter.notifyClickOutSide(e)}handleVisibleChange(e){this._isControlledComponent("visible")||this._adapter.setVisible(e),e?this.handleFocusOperateButton():this._adapter.focusPrevFocusElement(),this._adapter.notifyVisibleChange(e)}handleFocusOperateButton(){const{cancelButtonProps:e,okButtonProps:t}=this._adapter.getProps();Fi()(e,"autoFocus")&&!Fi()(e,"disabled")?this._adapter.focusCancelButton():Fi()(t,"autoFocus")&&!Fi()(t,"disabled")&&this._adapter.focusOkButton()}}var Au=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Eu extends M.A{constructor(e){super(e),this.handleCancel=e=>this.foundation.handleCancel(e&&e.nativeEvent),this.handleConfirm=e=>this.foundation.handleConfirm(e&&e.nativeEvent),this.handleVisibleChange=e=>this.foundation.handleVisibleChange(e),this.handleClickOutSide=e=>this.foundation.handleClickOutSide(e),this.stopImmediatePropagation=e=>e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation(),this.renderConfirmPopCard=e=>{let{initialFocusRef:t}=e;const{content:i,title:n,className:r,style:s,cancelType:a,icon:l,prefixCls:c,showCloseIcon:h}=this.props,{direction:u}=this.context,p=d()(c,r,{["".concat(c,"-rtl")]:"rtl"===u}),g=null!==n&&"undefined"!==typeof n,f=!(null===i||"undefined"===typeof i),m=o.isValidElement(l),v=d()({["".concat(c,"-body")]:!0,["".concat(c,"-body-withIcon")]:m});return o.createElement("div",{className:p,onClick:this.stopImmediatePropagation,style:s},o.createElement("div",{className:"".concat(c,"-inner")},o.createElement("div",{className:"".concat(c,"-header")},m?o.createElement("i",{className:"".concat(c,"-header-icon"),"x-semi-prop":"icon"},l):null,o.createElement("div",{className:"".concat(c,"-header-body")},g?o.createElement("div",{className:"".concat(c,"-header-title"),"x-semi-prop":"title"},n):null),h?o.createElement(St,{className:"".concat(c,"-btn-close"),icon:o.createElement(pt,null),size:"small",theme:"borderless",type:a,onClick:this.handleCancel}):null),f?o.createElement("div",{className:v,"x-semi-prop":"content"},G()(i)?i({initialFocusRef:t}):i):null,o.createElement("div",{className:"".concat(c,"-footer"),ref:this.footerRef},this.renderControls())))},this.state={cancelLoading:!1,confirmLoading:!1,visible:e.defaultVisible||!1},this.foundation=new ku(this.adapter),this.footerRef=o.createRef(),this.popoverRef=o.createRef()}static getDerivedStateFromProps(e,t){const i={},{hasOwnProperty:n}=Object.prototype;return n.call(e,"visible")&&(i.visible=e.visible),i}get adapter(){return Object.assign(Object.assign({},super.adapter),{setVisible:e=>this.setState({visible:e}),updateConfirmLoading:e=>this.setState({confirmLoading:e}),updateCancelLoading:e=>this.setState({cancelLoading:e}),notifyConfirm:e=>this.props.onConfirm(e),notifyCancel:e=>this.props.onCancel(e),notifyVisibleChange:e=>this.props.onVisibleChange(e),notifyClickOutSide:e=>this.props.onClickOutSide(e),focusCancelButton:()=>{var e,t;const i=null===(t=null===(e=this.footerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.querySelector("[data-type=cancel]");null===i||void 0===i||i.focus({preventScroll:!0})},focusOkButton:()=>{var e,t;const i=null===(t=null===(e=this.footerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.querySelector("[data-type=ok]");null===i||void 0===i||i.focus({preventScroll:!0})},focusPrevFocusElement:()=>{var e;null===(e=this.popoverRef.current)||void 0===e||e.focusTrigger()}})}renderControls(){const{okText:e,cancelText:t,okType:i,cancelType:n,cancelButtonProps:r,okButtonProps:s}=this.props,{cancelLoading:a,confirmLoading:l}=this.state;return o.createElement(pe.A,{componentName:"Popconfirm"},((c,h)=>o.createElement(o.Fragment,null,o.createElement(St,Object.assign({"data-type":"cancel",type:n,onClick:this.handleCancel,loading:a},Ue()(r,"autoFocus")),t||Fi()(c,"cancel")),o.createElement(St,Object.assign({"data-type":"ok",type:i,theme:"solid",onClick:this.handleConfirm,loading:l},Ue()(s,"autoFocus")),e||Fi()(c,"confirm")))))}render(){const{direction:e}=this.context,t="rtl"===e?"bottomRight":"bottomLeft",i=this.props,{className:n,prefixCls:r,disabled:s,children:a,style:l,position:c=t}=i,h=Au(i,["className","prefixCls","disabled","children","style","position"]);if(s)return a;const{visible:d}=this.state,u={onVisibleChange:this.handleVisibleChange,className:Cu.POPOVER,onClickOutSide:this.handleClickOutSide};return this.isControlled("visible")&&(u.trigger="custom"),o.createElement(U.A,Object.assign({ref:this.popoverRef},h,{content:e=>{let{initialFocusRef:t}=e;return this.renderConfirmPopCard({initialFocusRef:t})},visible:d,position:c},u),a)}}Eu.contextType=en.A,Eu.propTypes={motion:c().oneOfType([c().bool,c().func,c().object]),disabled:c().bool,content:c().oneOfType([c().node,c().func]),title:c().any,prefixCls:c().string,className:c().string,style:c().object,icon:c().node,okText:c().string,okType:c().string,cancelText:c().string,cancelType:c().string,onCancel:c().func,onConfirm:c().func,onClickOutSide:c().func,onVisibleChange:c().func,visible:c().bool,defaultVisible:c().bool,okButtonProps:c().object,cancelButtonProps:c().object,stopPropagation:c().oneOfType([c().bool,c().string]),showCloseIcon:c().bool,zIndex:c().number,trigger:c().string,position:c().string},Eu.__SemiComponentName__="Popconfirm",Eu.defaultProps=(0,$.bQ)(Eu.__SemiComponentName__,{stopPropagation:!0,trigger:"click",onVisibleChange:r(),disabled:!1,icon:o.createElement(gt,{size:"extra-large"}),okType:"primary",cancelType:"tertiary",prefixCls:Cu.PREFIX,zIndex:1030,showCloseIcon:!0,onCancel:r(),onConfirm:r(),onClickOutSide:r()});const Tu={PREFIX:"".concat(p._,"-progress")},Ou={types:["line","circle"],DEFAULT_TYPE:"line",STROKE_DEFAULT:"var(--semi-color-success)",strokeLineCap:["square","round"],DEFAULT_LINECAP:"round",sizes:["default","small","large"],DEFAULT_SIZE:"default",directions:["vertical","horizontal"],DEFAULT_DIRECTION:"horizontal"};function Pu(e,t,i){try{const n=function(e,t,i){if(e.sort(((e,t)=>e.percent-t.percent)),e[0].percent>t)return Ou.STROKE_DEFAULT;const n=e[e.length-1];if(n.percent<t)return Iu(n.color);for(const[r,s]of e.entries()){if(s.percent===t)return Iu(s.color);if(t>s.percent)continue;const n=e[r-1];return i?Mu({startColor:Iu(n.color),endColor:Iu(s.color),size:s.percent-n.percent-1},t-n.percent-1):Iu(n.color)}return}(e,t,i);if(0!==n.length)return n}catch(Ey){return}}function Mu(e,t){const{startColor:i,endColor:n,size:r}=e,s=i.split(""),a=n.split(""),o=[parseInt("".concat(s[1]).concat(s[2]),16),parseInt("".concat(a[1]).concat(a[2]),16)],l=[parseInt("".concat(s[3]).concat(s[4]),16),parseInt("".concat(a[3]).concat(a[4]),16)],c=[parseInt("".concat(s[5]).concat(s[6]),16),parseInt("".concat(a[5]).concat(a[6]),16)],h=[parseInt("".concat(s[7]).concat(s[8]),16),parseInt("".concat(a[7]).concat(a[8]),16)],d=(o[0]-o[1])/(r+1),u=(l[0]-l[1])/(r+1),p=(c[0]-c[1])/(r+1),g=(h[0]-h[1])/(r+1);function f(e){const t=Math.round(o[0]-d*(e+1)).toString(16),i=Math.round(l[0]-u*(e+1)).toString(16),n=Math.round(c[0]-p*(e+1)).toString(16),r="".concat(m(t)).concat(m(i)).concat(m(n)),s=Math.floor(g*(e+1)+h[1]).toString(16);return Ru.Hex("#".concat(r),s)}function m(e){return 1===e.length?"0".concat(e):0===e.length?"00":e}if("undefined"===typeof t){const e=[i];for(let t=0;t<r;t+=1)e.push(f(t));return e}return f(t)}function Iu(e){return e=e.trim().toLowerCase(),Du.hex.test(e)?Ru.Hex(e,void 0):Du.hslA.test(e)?Ru.Hex(Ru.HslA(e),void 0):Du.rgbA.test(e)?Ru.Hex(Ru.RgbA(e),void 0):Du.semiDesignTokens.test(e)?-1!==Lu.ALONG.indexOf(e)?Ru.SemiDesignToken(e):-1!==Lu.SEQUENCE.indexOf(e)?Ru.SemiDesignToken("".concat(e,"-5")):Ru.SemiDesignToken("".concat(e)):void 0}const Ru={Hex:(e,t)=>8===(e=e.replace("#","")).length?"#".concat(e):(6===e.length||3===e.length&&(e=e.split("").map((e=>e+e)).join("")),"#".concat(e).concat(t||"ff")),SemiDesignToken(e){if("undefined"===typeof window)return;const t=getComputedStyle(document.body).getPropertyValue("--semi-".concat(e));if(""===t)return;const i="rgba(".concat(t,", 1)");return Ru.RgbA(i)},HslA(e){const t=Du.hslA.exec(e),i=parseInt(t[2]),n=parseInt(t[3])/100,r=parseInt(t[4])/100,s=t[5],a=(1-Math.abs(2*r-1))*n,o=a*(1-Math.abs(i/60%2-1)),l=r-a/2;let c=0,h=0,d=0;return 0<=i&&i<60?(c=a,h=o,d=0):60<=i&&i<120?(c=o,h=a,d=0):120<=i&&i<180?(c=0,h=a,d=o):180<=i&&i<240?(c=0,h=o,d=a):240<=i&&i<300?(c=o,h=0,d=a):300<=i&&i<360&&(c=a,h=0,d=o),c=Math.round(255*(c+l)).toString(16),h=Math.round(255*(h+l)).toString(16),d=Math.round(255*(d+l)).toString(16),Ru.utils.pAL(c,h,d,s)},RgbA(e){const t=Du.rgbA.exec(e),i=parseInt(t[2],10).toString(16),n=parseInt(t[3],10).toString(16),r=parseInt(t[4],10).toString(16),s=t[5];return Ru.utils.pAL(i,n,r,s)},utils:{pAL:(e,t,i,n)=>(1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"undefined"!==typeof n?(1==(n=Math.round(255*parseInt(n)).toString(16)).length&&(n="0"+n),"#"+e+t+i+n):"#"+e+t+i)}},Du={hex:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,hslA:/(hsl)a?\(\s*?(\d+),?\s*?(\d+)%,?\s*?(\d+)%,?\s*?\/?(\s*?[\d.]+)?\s*?\)/,rgbA:/(rgb)a?\(\s*?(\d+),?\s*?(\d+),?\s*?(\d+),?\s*?\/?(\s*?[\d.]+)?\s*?\)/,semiDesignTokens:/(\w+)?-?(\w+)-?(\d)?/},Lu={ALONG:["black","white"],SEQUENCE:["amber","blue","cyan","green","grey","indigo","light-blue","light-green","lime","orange","pink","purple","red","teal","violet","yellow"]};var ju=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Fu=Tu.PREFIX;class Bu extends o.Component{constructor(e){super(e),this._mounted=!0,this._mounted=!0,this.state={percentNumber:this.props.percent}}componentDidUpdate(e){if(isNaN(this.props.percent)||isNaN(e.percent))throw new Error("[Semi Progress]:percent can not be NaN");if(e.percent!==this.props.percent){if(!this.props.motion)return void this.setState({percentNumber:this.props.percent});this.animation&&this.animation.destroy&&this.animation.destroy(),this.animation=new Il({from:{value:e.percent},to:{value:this.props.percent}},{easing:"linear",duration:300}),this.animation.on("frame",(e=>{if(!1===this._mounted)return;const t=parseInt(e.value);this.setState({percentNumber:t})})),this.animation.on("rest",(()=>{!1!==this._mounted&&this.setState({percentNumber:this.props.percent})})),this.animation.start()}}componentWillUnmount(){this.animation&&this.animation.destroy(),this._mounted=!1}renderCircleProgress(){const e=this.props,{strokeLinecap:t,style:i,className:n,strokeWidth:r,format:s,size:a,stroke:l,strokeGradient:c,showInfo:h,percent:u,orbitStroke:p,id:g}=e,f=ju(e,["strokeLinecap","style","className","strokeWidth","format","size","stroke","strokeGradient","showInfo","percent","orbitStroke","id"]),m=this.props["aria-label"],v=this.props["aria-labelledby"],y=this.props["aria-valuetext"],{percentNumber:b}=this.state,_={wrapper:d()("".concat(Fu,"-circle"),n),svg:d()("".concat(Fu,"-circle-ring")),circle:d()("".concat(Fu,"-circle-ring-inner"))},x=this.calcPercent(u),S=this.calcPercent(b);let w;w=this.props.width?this.props.width:a===Ou.DEFAULT_SIZE?72:24;const C=this.selectStroke(l,u,c),k=w/2,A=w/2,E=(w-r)/2,T=2*E*Math.PI,O=(1-x/100)*T,P="".concat(T," ").concat(T),M=s(S);return o.createElement("div",Object.assign({id:g,className:_.wrapper,style:i,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":S,"aria-labelledby":v,"aria-label":m,"aria-valuetext":y},(0,Qt.A)(f)),o.createElement("svg",{key:a,className:_.svg,height:w,width:w,"aria-hidden":!0},o.createElement("circle",{strokeDashoffset:0,strokeWidth:r,strokeDasharray:P,strokeLinecap:t,fill:"transparent",stroke:p,r:E,cx:A,cy:k,"aria-hidden":!0}),o.createElement("circle",{className:_.circle,strokeDashoffset:O,strokeWidth:r,strokeDasharray:P,strokeLinecap:t,fill:"transparent",stroke:C,r:E,cx:A,cy:k,"aria-hidden":!0})),h&&"small"!==a?o.createElement("span",{className:"".concat(Fu,"-circle-text")},M):null)}calcPercent(e){let t;return t=e>100?100:e<0?0:e,t}selectStroke(e,t,i){if("string"===typeof e)return e;const n=Pu(e,t,i);return"undefined"!==typeof n?n:Ou.STROKE_DEFAULT}renderLineProgress(){const e=this.props,{className:t,style:i,stroke:n,strokeGradient:r,direction:s,format:a,showInfo:l,size:c,percent:h,orbitStroke:u,id:p}=e,g=ju(e,["className","style","stroke","strokeGradient","direction","format","showInfo","size","percent","orbitStroke","id"]),f=this.props["aria-label"],m=this.props["aria-labelledby"],v=this.props["aria-valuetext"],{percentNumber:y}=this.state,b=d()(Fu,t,{["".concat(Fu,"-horizontal")]:s===Ou.DEFAULT_DIRECTION,["".concat(Fu,"-vertical")]:s!==Ou.DEFAULT_DIRECTION,["".concat(Fu,"-large")]:"large"===c}),_=d()({["".concat(Fu,"-track")]:!0}),x=d()("".concat(Fu,"-track-inner")),S=this.calcPercent(h),w=this.calcPercent(y),C={background:this.selectStroke(n,h,r)};s===Ou.DEFAULT_DIRECTION?C.width="".concat(S,"%"):C.height="".concat(S,"%");const k=a(w);return o.createElement("div",Object.assign({id:p,className:b,style:i,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":S,"aria-labelledby":m,"aria-label":f,"aria-valuetext":v},(0,Qt.A)(g)),o.createElement("div",{className:_,style:u?{backgroundColor:u}:{},"aria-hidden":!0},o.createElement("div",{className:x,style:C,"aria-hidden":!0})),l?o.createElement("div",{className:"".concat(Fu,"-line-text")},k):null)}render(){const{type:e}=this.props;return"line"===e?this.renderLineProgress():this.renderCircleProgress()}}Bu.propTypes={"aria-label":c().string,"aria-labelledby":c().string,"aria-valuetext":c().string,className:c().string,direction:c().oneOf(Ou.directions),format:c().oneOfType([c().func,c().node]),id:c().string,motion:c().oneOfType([c().bool,c().func,c().object]),orbitStroke:c().string,percent:c().number,scale:c().number,showInfo:c().bool,size:c().oneOf(Ou.sizes),stroke:c().oneOfType([c().string,c().arrayOf(c().shape({percent:c().number,color:c().string}))]),strokeGradient:c().bool,strokeLinecap:c().oneOf(Ou.strokeLineCap),strokeWidth:c().number,style:c().object,type:c().oneOf(Ou.types),width:c().number},Bu.defaultProps={className:"",direction:Ou.DEFAULT_DIRECTION,format:e=>"".concat(e,"%"),motion:!0,orbitStroke:"var(--semi-color-fill-0)",percent:0,showInfo:!1,size:Ou.DEFAULT_SIZE,stroke:Ou.STROKE_DEFAULT,strokeGradient:!1,strokeLinecap:Ou.DEFAULT_LINECAP,strokeWidth:4,style:{},type:Ou.DEFAULT_TYPE};const Nu=Bu;var zu=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Hu extends k.A{constructor(e){super(Object.assign({},e)),this._keydownHandler=null}init(){this._setDropdownWidth();const e=this.getProp("defaultOpen"),t=this.getProp("open"),i=this._collectOptions();this._setDefaultSelection(i),(e||t)&&this.open(void 0,i);this.getProp("autoFocus")&&this.focus()}focus(){const e=this._isFilterable(),t=this._isMultiple();this._adapter.updateFocusState(!0),this._adapter.setIsFocusInContainer(!1),e&&t?this.focusInput():e&&!t?this.toggle2SearchInput(!0):this._focusTrigger()}_focusTrigger(){this._adapter.focusTrigger()}destroy(){this._adapter.unregisterClickOutsideHandler()}_setDropdownWidth(){const{style:e,dropdownMatchSelectWidth:t}=this.getProps();let i;t&&(i=e&&S()(e.width)||e&&C()(e.width)&&!e.width.includes("%")?e.width:this._adapter.getTriggerWidth(),this._adapter.setOptionWrapperWidth(i))}_collectOptions(){const e=this._adapter.getOptionsFromChildren();return this._adapter.updateOptions(e),this._adapter.rePositionDropdown(),e}_setDefaultSelection(e){let{value:t}=this.getProps();const{defaultValue:i}=this.getProps();this._isControlledComponent()||(t=i),this._update(t,e)}handleOptionListChange(){const e=this._collectOptions(),{selections:t}=this.getStates();this.updateOptionsActiveStatus(t,e);const{defaultActiveFirstOption:i}=this.getProps();i&&this._adapter.updateFocusIndex(0)}handleOptionListChangeHadDefaultValue(){const e=this.getState("selections");let t;const{onChangeWithObject:i}=this.getProps(),n=this._isMultiple();switch(!0){case n&&Boolean(e.size):try{t=[...e].map((e=>i?e[1]:e[1].value))}catch(s){t=[]}break;case n&&!e.size:t=[];break;case!n&&Boolean(e.size):try{t=i?[...e][0][1]:[...e][0][1].value}catch(s){}case!n&&!e.size:}const r=this._adapter.getOptionsFromChildren();this._update(t,r)}handleValueChange(e){const{allowCreate:t,autoClearSearchValue:i,remote:n}=this.getProps(),{inputValue:r}=this.getStates();let s;t&&this._isControlledComponent()?(s=this.getState("options"),s.forEach((e=>e._show=!0))):s=this._adapter.getOptionsFromChildren(),this._adapter.rePositionDropdown(),this._isFilterable()&&!i&&r&&!n&&(s=this._filterOption(s,r)),this._update(e,s)}_update(e,t){let i;this._isMultiple()?(i=this._updateMultiple(e,t),this.updateOverflowItemCount(i.size)):i=this._updateSingle(e,t),this._adapter.updateSelection(i),this.updateOptionsActiveStatus(i,t)}_updateSingle(e,t){const i=new Map,{onChangeWithObject:n}=this.getProps(),r=n&&"undefined"!==typeof e?e.value:e,s=t.filter((e=>e.value===r)),a=!s.length&&"undefined"!==typeof r&&null!==r;if(s.length){const e=s[0],t=Object.assign({},e);i.set(t.label,t)}else if(a){let t={value:e,label:e,_notExist:!0,_scrollIndex:-1};n&&(t=Object.assign(Object.assign({},e),{_notExist:!0,_scrollIndex:-1})),i.set(t.label,t)}return i}_updateMultiple(e,t){const i=this.getState("selections");let n=[];const r=Array.isArray(e);this.checkMultipleProps(),i.size&&(n=[...i].map((e=>e[1])));const s=new Map;let o=e;const{onChangeWithObject:l}=this.getProps();return l&&r&&(o=e.map((e=>e.value))),r&&o.length&&o.forEach(((i,r)=>{const o=t.findIndex((e=>e.value===i));if(-1!==o)s.set(t[o].label,t[o]);else{const t=n.findIndex((e=>e.value===i));if(-1!==t){const i=n[t];if(l){const t=Object.assign({},e[r]);a()(t,i)?s.set(i.label,i):s.set(t.label,t)}else s.set(i.label,i)}else{let t={value:i,label:i,_notExist:!0};l&&(t=Object.assign(Object.assign({},e[r]),{_notExist:!0})),s.set(t.label,Object.assign(Object.assign({},t),{_scrollIndex:-1}))}}})),s}_isMultiple(){return this.getProp("multiple")}_isDisabled(){return this.getProp("disabled")}_isFilterable(){return Boolean(this.getProp("filter"))}handleClick(e){const{clickToHide:t}=this.getProps(),{isOpen:i}=this.getStates();this._isDisabled()||(i?i&&t?this.close({event:e}):i&&!t&&this.focusInput():(this.open(),this._notifyFocus(e)))}open(e,t){const i=this._isFilterable(),n=t||this.getState("options");if(i){const e="",t=this._filterOption(n,e).filter((e=>!e._inputCreateOnly));this._adapter.updateOptions(t),this.toggle2SearchInput(!0)}else this._adapter.updateFocusState(!0);this._adapter.openMenu(),this._setDropdownWidth(),this._adapter.notifyDropdownVisibleChange(!0),this.bindKeyBoardEvent(),this._adapter.registerClickOutsideHandler((e=>{this.close({event:e}),this._notifyBlur(e),this._adapter.updateFocusState(!1)}))}toggle2SearchInput(e){e?this._adapter.toggleInputShow(e,(()=>this.focusInput())):this._adapter.toggleInputShow(e,(()=>{}))}close(e){const{event:t,closeCb:i,notToggleInput:n}=e||{};this._adapter.closeMenu(),this._adapter.notifyDropdownVisibleChange(!1),this._adapter.setIsFocusInContainer(!1),this._adapter.unregisterClickOutsideHandler();const r=this._isFilterable();r&&!n&&this.toggle2SearchInput(!1),this._adapter.once("popoverClose",(()=>{r&&this.clearInput(t),i&&i()}))}onSelect(e,t,i){if(this._isDisabled())return;e._inputCreateOnly&&this._adapter.notifyCreate(e);this._isMultiple()?this._handleMultipleSelect(e,i):(this._handleSingleSelect(e,i),this._focusTrigger()),this._adapter.updateFocusIndex(t)}_handleSingleSelect(e,t){var{value:i,label:n}=e,r=zu(e,["value","label"]);const s=(new Map).set(n,Object.assign({value:i,label:n},r));this._notifySelect(i,Object.assign({value:i,label:n},r));const a=this._isFilterable();this._isControlledComponent()?this.close({event:t,notToggleInput:!0,closeCb:()=>{this._notifyChange(s),a&&this.toggle2SearchInput(!1)}}):(this._adapter.updateSelection(s),this._notifyChange(s),this.close({event:t,closeCb:()=>{this.updateOptionsActiveStatus(s)}}))}_handleMultipleSelect(e,t){var{value:i,label:n}=e,r=zu(e,["value","label"]);const s=this._adapter.getMaxLimit(),a=this._adapter.getSelections(),{autoClearSearchValue:o}=this.getProps();if(a.has(n))this._notifyDeselect(i,Object.assign({value:i,label:n},r)),a.delete(n);else{if(s&&a.size===s)return void this._adapter.notifyMaxLimit(Object.assign({value:i,label:n},Ue()(r,"_scrollIndex")));this._notifySelect(i,Object.assign({value:i,label:n},r)),a.set(n,Object.assign({value:i,label:n},r))}if(this._isControlledComponent())this._notifyChange(a),this._isFilterable()&&(o&&this.clearInput(t),this.focusInput());else{this._adapter.updateSelection(a),this.updateOverflowItemCount(a.size),this._adapter.rePositionDropdown();let{options:e}=this.getStates();if(this._isFilterable()){if(o){this.clearInput(t);const i="";e=this._filterOption(e,i)}this.focusInput()}this.updateOptionsActiveStatus(a,e),this._notifyChange(a)}}clearSelected(){const e=new Map;this._isControlledComponent()?(this._notifyChange(e),this._adapter.notifyClear()):(this._adapter.updateSelection(e),this.updateOptionsActiveStatus(e),this._notifyChange(e),this._adapter.notifyClear());const{isOpen:t}=this.getStates();t&&this._adapter.rePositionDropdown()}updateOptionsActiveStatus(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getState("options");const{allowCreate:i}=this.getProps(),n=t.map((t=>(e.has(t.label)?(t._selected=!0,i&&delete t._inputCreateOnly):(t._inputCreateOnly&&(t._show=!1),t._selected=!1),t)));this._adapter.updateOptions(n)}removeTag(e){const t=this._adapter.getSelections();t.delete(e.label),this._isControlledComponent()?(this._notifyDeselect(e.value,e),this._notifyChange(t)):(this._notifyDeselect(e.value,e),this._adapter.updateSelection(t),this.updateOverflowItemCount(t.size),this.updateOptionsActiveStatus(t),this._adapter.rePositionDropdown(),this._notifyChange(t))}clearInput(e){const{inputValue:t}=this.getStates();if(""!==t){this._adapter.updateInputValue(""),this._adapter.notifySearch("",e);const{options:t}=this.getStates(),{remote:i}=this.getProps();let n=t;i||(n=this._filterOption(t,"")),this._adapter.updateOptions(n)}}focusInput(){this._adapter.focusInput(),this._adapter.updateFocusState(!0),this._adapter.setIsFocusInContainer(!1)}handleInputChange(e,t){this._adapter.updateInputValue(e);const{options:i,isOpen:n}=this.getStates(),{allowCreate:r,remote:s}=this.getProps();let a=i;s||(a=this._filterOption(i,e)),a=this._createOptionByInput(r,a,e),this._adapter.updateOptions(a),this._adapter.notifySearch(e,t),this._isMultiple()&&this._adapter.rePositionDropdown()}_filterOption(e,t){const i=this.getProp("filter");if(!i)return e;if("boolean"===typeof i&&i){const i=t.toLowerCase();return e.map((e=>{const t=e.label.toString().toLowerCase(),n=e._parentGroup&&e._parentGroup.label,r=t.includes(i),s=C()(n)&&n.toLowerCase().includes(i);return e._show=!(!r&&!s),e}))}return"function"===typeof i?e.map((e=>(i(t,e)?e._show=!0:e._show=!1,e))):void 0}_createOptionByInput(e,t,i){if(e)if(i){const e={_show:!0,_selected:!1,value:i,label:i,_inputCreateOnly:!0};let n=-1,r=-1;t.forEach(((e,t)=>{(e._show||e._inputCreateOnly)&&(e.label===i&&(r=t),e._inputCreateOnly&&(n=t,e.value=i,e.label=i,e._show=!0))})),-1===n&&-1===r&&t.push(e),-1!==r&&(t=t.filter((e=>!e._inputCreateOnly)))}else t=t.filter((e=>!e._inputCreateOnly));return t}bindKeyBoardEvent(){this._keydownHandler=e=>{this._handleKeyDown(e)},this._adapter.registerKeyDown(this._keydownHandler)}unBindKeyBoardEvent(){this._keydownHandler&&this._adapter.unregisterKeyDown()}_handleKeyDown(e){const t=e.keyCode,{loading:i,filter:n,multiple:r,disabled:s}=this.getProps(),{isOpen:a}=this.getStates();if(!i&&!s)switch(t){case E.Ay.UP:e.preventDefault(),this._handleArrowKeyDown(-1);break;case E.Ay.DOWN:e.preventDefault(),this._handleArrowKeyDown(1);break;case E.Ay.BACKSPACE:this._handleBackspaceKeyDown();break;case E.Ay.ENTER:(0,Me.jK)(e),this._handleEnterKeyDown(e);break;case E.Ay.ESC:a&&this.close({event:e}),n&&!r&&this._focusTrigger();break;case E.Ay.TAB:this._handleTabKeyDown(e)}}handleContainerKeyDown(e){const t=e.keyCode,{isOpen:i}=this.getStates();if(t===E.Ay.TAB)i&&this._handleTabKeyDown(e)}_getEnableFocusIndex(e){const{focusIndex:t,options:i}=this.getStates(),n=i.filter((e=>e._show)),r=n.length;let s=t+e;if(s<0&&(s=r-1),s>=r&&(s=0),e>0){let e=-1;for(let t=0;t<n.length;t++){if(!n[t].disabled&&(e=t),e>=s)break}s=e}else{let e=n.length;for(let t=r-1;t>=0;t--){if(!n[t].disabled&&(e=t),e<=s)break}s=e}this._adapter.updateFocusIndex(s),this._adapter.updateScrollTop(s)}_handleArrowKeyDown(e){const{isOpen:t}=this.getStates();t?this._getEnableFocusIndex(e):this.open()}_handleTabKeyDown(e){const{isOpen:t}=this.getStates();if(this._adapter.updateFocusState(!1),t){const t=this._adapter.getContainer(),i=this._adapter.getFocusableElements(t);i.length>0?e.shiftKey?this._handlePanelOpenShiftTabKeyDown(i,e):this._handlePanelOpenTabKeyDown(i,e):(this.close({event:e}),this._notifyBlur(e))}else this._notifyBlur(e)}_handlePanelOpenTabKeyDown(e,t){const i=this._adapter.getActiveElement();this._adapter.getIsFocusInContainer()?i===e[e.length-1]&&(this._focusTrigger(),this.close({event:t}),(0,Me.jK)(t)):(e[0].focus(),this._adapter.setIsFocusInContainer(!0),(0,Me.jK)(t))}_handlePanelOpenShiftTabKeyDown(e,t){const i=this._adapter.getActiveElement();this._adapter.getIsFocusInContainer()?i===e[0]&&(this._focusTrigger(),this._adapter.setIsFocusInContainer(!1),(0,Me.jK)(t)):(this.close({event:t}),this._notifyBlur(t))}_handleEnterKeyDown(e){const{isOpen:t,options:i,focusIndex:n}=this.getStates();if(t)if(-1!==n){const t=i.filter((e=>e._show)),{length:r}=t;if(r<=n)return;if(t&&r){const i=t[n];if(i.disabled)return;this.onSelect(i,n,e)}}else this.close({event:e});else this.open()}_handleBackspaceKeyDown(){if(this._isMultiple()){const e=this._adapter.getSelections(),{inputValue:t}=this.getStates(),i=e.size;if(i&&!t){const t=[...e.keys()];let n=i-1,r=t[n],s=e.get(r),a=!1;if(s.disabled&&0===n)return;for(;s.disabled&&0!==n;)n-=1,r=t[n],s=e.get(r),0==n&&s.disabled&&(a=!0);a||this.removeTag(s)}}}_notifyChange(e){const{onChangeWithObject:t}=this.getProps(),i=this.getState("selections");let n;const r=[...e.values()],s=this._isMultiple();if(this._diffSelections(e,i,s))switch(!0){case t:this._notifyChangeWithObject(e);break;case!t&&!s:n=r.length?r[0].value:void 0,this._adapter.notifyChange(n);break;case!t&&s:n=r.length?r.map((e=>e.value)):[],this._adapter.notifyChange(n)}}_removeInternalKey(e){let t=Object.assign({},e);return delete t._parentGroup,delete t._show,delete t._selected,delete t._scrollIndex,delete t._keyInJsx,"_keyInOptionList"in t&&(t.key=t._keyInOptionList,delete t._keyInOptionList),t}_notifySelect(e,t){const i=this._removeInternalKey(t);this._adapter.notifySelect(e,i)}_notifyDeselect(e,t){const i=this._removeInternalKey(t);this._adapter.notifyDeselect(e,i)}_diffSelections(e,t,i){let n=!0;if(!i){const i=[...e.values()],r=[...t.values()],s=i[0]?i[0].label:i[0],o=r[0]?r[0].label:r[0];n=!a()(s,o)}return n}_notifyChangeWithObject(e){this.getState("selections");const t=[];for(const i of e.entries()){let e=Object.assign({label:i[0]},i[1]);e=this._removeInternalKey(e),t.push(e)}this._isMultiple()?this._adapter.notifyChange(t):this._adapter.notifyChange(t[0])}_notifyBlur(e){this._adapter.notifyBlur(e)}_notifyFocus(e){this._adapter.notifyFocus(e)}handleMouseEnter(e){this._adapter.updateHovering(!0),this._adapter.notifyMouseEnter(e)}handleMouseLeave(e){this._adapter.updateHovering(!1),this._adapter.notifyMouseLeave(e)}handleClearClick(e){const{filter:t}=this.getProps();t&&this.clearInput(e),this.focus(),this.clearSelected(),e.stopPropagation()}handleKeyPress(e){e&&e.key===E.jD&&this.handleClick(e)}handleClearBtnEnterPress(e){(0,gi.A)(e)&&this.handleClearClick(e)}handleOptionMouseEnter(e){this._adapter.updateFocusIndex(e)}handleListScroll(e){this._adapter.notifyListScroll(e)}handleTriggerFocus(e){this.bindKeyBoardEvent(),this._adapter.setIsFocusInContainer(!1)}handleTriggerBlur(e){const{filter:t,autoFocus:i}=this.getProps(),{isOpen:n,isFocus:r}=this.getStates();r&&!n&&(this._notifyBlur(e),this._adapter.updateFocusState(!1))}handleInputBlur(e){const{filter:t,autoFocus:i}=this.getProps(),n=this._isMultiple();i&&t&&!n&&this.toggle2SearchInput(!1)}selectAll(){const{options:e}=this.getStates(),{onChangeWithObject:t}=this.getProps();let i=[];this._isMultiple()?(i=t?e:e.map((e=>e.value)),this.handleValueChange(i),this._adapter.notifyChange(i)):console.warn("[Semi Select]: It seems that you have called the selectAll method in the single-selection Select.\n                Please note that this is not a legal way to use it")}checkMultipleProps(e){if(this._isMultiple()){const t=e||this.getProps(),{defaultValue:i,value:n}=t,r=n||i;(0,L.A)(r)||Array.isArray(r)||(0,A.A)(!0,"[Semi Select] defaultValue/value should be array type in multiple mode")}}updateScrollTop(){this._adapter.updateScrollTop()}updateOverflowItemCount(e,t){const{maxTagCount:i,ellipsisTrigger:n}=this.getProps();n&&(t?this._adapter.updateOverflowItemCount(t):"number"===typeof i&&(e-i>0?this._adapter.updateOverflowItemCount(e-i):this._adapter.updateOverflowItemCount(0)))}updateIsFullTags(){const{isFullTags:e}=this.getStates();e||this._adapter.setState({isFullTags:!0})}handlePopoverClose(){this._adapter.emit("popoverClose")}handleSlotMouseEnter(){this._adapter.updateFocusIndex(-1)}}const Vu={PREFIX:"".concat(p._,"-select"),PREFIX_OPTION:"".concat(p._,"-select-option"),PREFIX_GROUP:"".concat(p._,"-select-group")},Uu={SIZE_SET:["small","large","default"],POSITION_SET:u.P$.POSITION_SET,MODE_SELECT:"select",MODE_AUTOCOMPLETE:"autoComplete",STATUS:g},Wu=270,Gu={PREFIX:"".concat(p._,"-tag")},Ku=["default","small","large"],Yu=["square","circle"];var Xu=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const qu=Gu.PREFIX,Zu=["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],Qu=Ku,$u=["light","solid","ghost"],Ju=Yu;class ep extends o.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,t,i){const{onClose:n}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n&&n(t,e,i),e.defaultPrevented||this.setVisible(!1)}handleKeyDown(e){const{closable:t,onClick:i,onKeyDown:n}=this.props;switch(e.key){case"Backspace":case"Delete":t&&this.close(e,this.props.children,this.props.tagKey),(0,Me.jK)(e);break;case"Enter":i(e),(0,Me.jK)(e);break;case"Escape":e.target.blur()}n&&n(e)}renderAvatar(){const{avatarShape:e,avatarSrc:t}=this.props;return o.createElement(Ne,{src:t,shape:e})}render(){const e=this.props,{tagKey:t,children:i,size:n,color:r,closable:s,visible:a,onClose:l,onClick:c,className:h,type:u,shape:p,avatarSrc:g,avatarShape:f,tabIndex:m,prefixIcon:v,suffixIcon:y}=e,b=Xu(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex","prefixIcon","suffixIcon"]),{visible:_}=this.state,x=c!==ep.defaultProps.onClick||s,S={role:"button",tabIndex:m||0,onKeyDown:this.handleKeyDown},w=Object.assign(Object.assign({},b),{onClick:c,tabIndex:m,className:d()(qu,{["".concat(qu,"-default")]:"default"===n,["".concat(qu,"-small")]:"small"===n,["".concat(qu,"-large")]:"large"===n,["".concat(qu,"-square")]:"square"===p,["".concat(qu,"-circle")]:"circle"===p,["".concat(qu,"-").concat(u)]:u,["".concat(qu,"-").concat(r,"-").concat(u)]:r&&u,["".concat(qu,"-closable")]:s,["".concat(qu,"-invisible")]:!_,["".concat(qu,"-avatar-").concat(f)]:g},h)}),k=x?Object.assign(Object.assign({},w),S):w,A=s?o.createElement("div",{className:"".concat(qu,"-close"),onClick:e=>this.close(e,i,t)},o.createElement(pt,{size:"small"})):null,E=C()(i),T=d()("".concat(qu,"-content"),"".concat(qu,"-content-").concat(E?"ellipsis":"center"));return o.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||E?"".concat(s?"Closable ":"","Tag: ").concat(i):""},k),v?o.createElement("div",{className:"".concat(qu,"-prefix-icon")},v):null,g?this.renderAvatar():null,o.createElement("div",{className:T},i),y?o.createElement("div",{className:"".concat(qu,"-suffix-icon")},y):null,A)}}ep.defaultProps={size:Qu[0],color:Zu[0],closable:!1,type:$u[0],onClose:()=>{},onClick:()=>{},onMouseEnter:()=>{},style:{},className:"",shape:"square",avatarShape:"square",prefixIcon:null,suffixIcon:null},ep.propTypes={children:c().node,tagKey:c().oneOfType([c().string,c().number]),size:c().oneOf(Qu),color:c().oneOf(Zu),type:c().oneOf($u),closable:c().bool,visible:c().bool,onClose:c().func,onClick:c().func,prefixIcon:c().node,suffixIcon:c().node,style:c().object,className:c().string,avatarSrc:c().string,avatarShape:c().oneOf(Ju),"aria-label":c().string};const tp=Gu.PREFIX,ip=Ku,np=Yu;class rp extends o.PureComponent{renderNTag(e,t){const{size:i,showPopover:n,popoverProps:r,onPlusNMouseEnter:s}=this.props;let a=o.createElement(ep,{closable:!1,size:i,color:"grey",style:{backgroundColor:"transparent"},key:"_+n",onMouseEnter:s},"+",e);return n&&(a=o.createElement(U.A,Object.assign({showArrow:!0,content:t,trigger:"hover",position:"top",autoAdjustOverflow:!0,className:"".concat(tp,"-rest-group-popover")},r,{key:"_+n_Popover"}),a)),a}renderMergeTags(e){const{maxTagCount:t,tagList:i,restCount:n}=this.props,r=n||i.length-t;let s=e;const a=e.slice(0,t),o=e.slice(t);let l=null;return r>0&&(l=this.renderNTag(r,o),a.push(l),s=a),s}renderAllTags(){const{tagList:e,size:t,mode:i,avatarShape:n,onTagClose:r}=this.props,s=e.map((e=>{if("custom"===i)return e;const s=Object.assign({},e);return s.size||(s.size=t),s.avatarShape||(s.avatarShape=n),s.tagKey||("string"===typeof s.children||"number"===typeof s.children?s.tagKey=s.children:s.tagKey=Math.random()),o.createElement(ep,Object.assign({},s,{key:s.tagKey,onClose:(e,t,i)=>{s.onClose&&s.onClose(e,t,i),r&&r(e,t,i)}}))}));return s}render(){const{style:e,className:t,maxTagCount:i,size:n}=this.props,r=d()({["".concat(tp,"-group")]:!0,["".concat(tp,"-group-max")]:i,["".concat(tp,"-group-small")]:"small"===n,["".concat(tp,"-group-large")]:"large"===n},t),s=this.renderAllTags(),a="undefined"===typeof i?s:this.renderMergeTags(s);return o.createElement("div",{style:e,className:r},a)}}rp.defaultProps={style:{},className:"",size:ip[0],avatarShape:"square",onTagClose:()=>{},onPlusNMouseEnter:()=>{}},rp.propTypes={children:c().node,style:c().object,className:c().string,maxTagCount:c().number,restCount:c().number,tagList:c().array,size:c().oneOf(ip),mode:c().string,onTagClose:c().func,showPopover:c().bool,popoverProps:c().object,avatarShape:c().oneOf(np)};const sp={PREFIX:p._+"-overflow-list"},ap={COLLAPSE:"collapse",SCROLL:"scroll"},op={START:"start",END:"end"},lp={BOUNDARY_SET:Object.values(op),POSITION_SET:["vertical","horizontal"],MODE_SET:Object.values(ap),MODE_MAP:ap,BOUNDARY_MAP:op,OVERFLOW_DIR:{NONE:0,GROW:1,SHRINK:2}},cp=4;var hp=i(54320),dp=i.n(hp);class up extends o.PureComponent{componentDidMount(){const{items:e}=this.props;this.cachedKeys=Object.keys(e);const{root:t,threshold:i,rootMargin:n,option:r,onIntersect:s}=this.props;this.observer=new IntersectionObserver(s,Object.assign({root:t,threshold:i,rootMargin:n},r)),this.observeElement()}componentDidUpdate(){const{items:e}=this.props,t=Object.keys(e);a()(this.cachedKeys,t)||(this.observeElement(!0),this.cachedKeys=t)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null)}observeElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{items:t}=this.props;dp()(t)?this.observer.disconnect():(e&&this.observer.disconnect(),Object.keys(t).forEach((e=>{const i=t[e];i&&(0,gl.A)(i)&&this.observer.observe(i)})))}render(){const{children:e}=this.props;return e}}up.propTypes={onIntersect:c().func,option:c().object,root:c().any,threshold:c().number,rootMargin:c().string,items:c().object},up.defaultProps={onIntersect:()=>{},threshold:.75,rootMargin:"0px",option:{},items:{}};const pp=lp.BOUNDARY_MAP;class gp extends k.A{constructor(e){super(Object.assign({},e)),this.previousY=void 0,this.isScrollMode=()=>{const{renderMode:e}=this.getProps();return"scroll"===e},this.getReversedItems=()=>{const{items:e}=this.getProps();return no(e).reverse()}}getOverflowItem(){const{items:e}=this.getProps(),{visibleState:t,overflow:i}=this.getStates();if(!this.isScrollMode())return i;const n=e.map((e=>{let{key:i}=e;return Boolean(t.get(i))})),r=n.indexOf(!0),s=n.lastIndexOf(!0),a=[];return a[0]=r>=0?e.slice(0,r):[],a[1]=s>=0?e.slice(s+1,e.length):e,a}handleIntersect(e){const t=no(this.getState("visibleState")),i={};e.forEach((e=>{const n=Fi()(e,"target.dataset.scrollkey"),r=e.isIntersecting;i[n]=e,t.set(n,r)}));let n=!1;for(const o of t.values())if(o){n=!0;break}const r=n,[s]=e,a=s.boundingClientRect.y;r||void 0===this.previousY||a===this.previousY?(this.previousY=a,this._adapter.updateVisibleState(t),this._adapter.notifyIntersect(i)):this.previousY=a}handleCollapseOverflow(){const{minVisibleItems:e,collapseFrom:t}=this.getProps(),{overflowWidth:i,containerWidth:n,pivot:r,overflowStatus:s}=this.getStates(),{items:a,onOverflow:o}=this.getProps();let l=i,c=0,h=!1;for(const d of this._adapter.getItemSizeMap().values()){if(l+=d,l>n){h=!0;break}if(c===a.length-1){this._adapter.updateStates({overflowStatus:"normal",pivot:a.length-1,visible:a,overflow:[]});break}c++}if(h){const i=Math.max(e,c),n=t===pp.START,s=n?this.getReversedItems().slice(0,i).reverse():a.slice(0,i),l=n?this.getReversedItems().slice(i).reverse():a.slice(i);return this._adapter.updateStates({overflowStatus:"overflowed",pivot:i,visible:s,overflow:l}),void(r!==i&&o(l))}}}const fp=gp,mp=sp.PREFIX,vp=lp.BOUNDARY_MAP,yp=lp.OVERFLOW_DIR,bp=lp.MODE_MAP;class _p extends M.A{constructor(e){var t;super(e),t=this,this.scroller=null,this.spacer=null,this.isScrollMode=()=>{const{renderMode:e}=this.props;return e===bp.SCROLL},this.resize=function(){var e;const i=null===(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[0])||void 0===e?void 0:e.target.clientWidth;t.setState({containerWidth:i,overflowStatus:"calculating"})},this.reintersect=e=>{this.foundation.handleIntersect(e)},this.mergeRef=(e,t,i)=>{this.itemRefs[i]=t,"function"===typeof e?e(t):"object"===typeof e&&e&&"current"in e&&(e.current=t)},this.renderOverflow=()=>{const e=this.foundation.getOverflowItem();return this.props.overflowRenderer(e)},this.getItemKey=(e,t)=>{const{itemKey:i}=this.props;return G()(i)?i(e):Fi()(e,i||"key",t)},this.renderItemList=()=>{const{className:e,wrapperClassName:t,wrapperStyle:i,style:n,visibleItemRenderer:r,renderMode:s,collapseFrom:a}=this.props,{visible:l,overflowStatus:c}=this.state;let h=this.renderOverflow();if(!this.isScrollMode()&&(Array.isArray(h)&&(h=o.createElement(o.Fragment,null,h)),o.isValidElement(h))){const e=o.cloneElement(h);h=o.createElement(_d.A,{onResize:e=>{let[t]=e;this.setState({overflowWidth:t.target.clientWidth,overflowStatus:"calculating"})}},o.createElement("div",{className:"".concat(mp,"-overflow")},e))}const u=s===bp.SCROLL?[h[0],o.createElement("div",{className:d()(t,"".concat(mp,"-scroll-wrapper")),ref:e=>{this.scroller=e},style:Object.assign({},i),key:"".concat(mp,"-scroll-wrapper")},l.map(r).map((e=>{const{forwardRef:t,key:i}=e;return o.cloneElement(e,{ref:e=>this.mergeRef(t,e,i),"data-scrollkey":"".concat(i),key:i})}))),h[1]]:[a===vp.START?h:null,l.map(((e,t)=>{const{key:i}=e,n=r(e,t),s=o.cloneElement(n);return o.createElement(_d.A,{key:null!==i&&void 0!==i?i:t,onResize:i=>{let[n]=i;return this.onItemResize(n,e,t)}},o.createElement("div",{key:null!==i&&void 0!==i?i:t,className:"".concat(mp,"-item")},s))})),a===vp.END?h:null];return o.createElement("div",{className:d()("".concat(mp),e),style:Object.assign(Object.assign({},n),s===bp.COLLAPSE?{maxWidth:"100%",visibility:"calculating"===c?"hidden":"visible"}:null)},...u)},this.onItemResize=(e,t,i)=>{const n=this.getItemKey(t,i),r=this.itemSizeMap.get(n);r?r!==e.target.clientWidth&&(this.itemSizeMap.set(n,e.target.clientWidth),this.setState({overflowStatus:"calculating"})):this.itemSizeMap.set(n,e.target.clientWidth);const{maxCount:s}=this.state;this.itemSizeMap.size===s&&this.setState({overflowStatus:"calculating"})},this.state={direction:yp.GROW,lastOverflowCount:0,overflow:[],visible:[],containerWidth:0,visibleState:new Map,itemSizeMap:new Map,overflowStatus:"calculating",pivot:-1,overflowWidth:0,maxCount:0},this.foundation=new fp(this.adapter),this.previousWidths=new Map,this.itemRefs={},this.itemSizeMap=new Map}static getDerivedStateFromProps(e,t){const{prevProps:i}=t,n={};n.prevProps=e;const r=t=>!i&&t in e||i&&!a()(i[t],e[t]);if(r("items")||r("style")){if(n.direction=yp.GROW,n.lastOverflowCount=0,n.maxCount=0,e.renderMode===bp.SCROLL)n.visible=e.items,n.overflow=[];else{let i=e.items.length;0!==Math.floor(t.containerWidth/cp)&&(i=Math.min(i,Math.floor(t.containerWidth/cp)));const r=e.collapseFrom===vp.START,s=r?(0,$.mg)(e.items).reverse().slice(0,i):e.items.slice(0,i),a=r?(0,$.mg)(e.items).reverse().slice(i):e.items.slice(i);n.visible=s,n.overflow=a,n.maxCount=i}n.pivot=-1,n.overflowStatus="calculating"}return n}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateVisibleState:e=>{this.setState({visibleState:e})},updateStates:e=>{this.setState(Object.assign({},e))},notifyIntersect:e=>{this.props.onIntersect&&this.props.onIntersect(e)},getItemSizeMap:()=>this.itemSizeMap})}componentDidUpdate(e,t){const i=e.items.map((e=>e.key)),n=this.props.items.map((e=>e.key));a()(i,n)||(this.itemRefs={},this.setState({visibleState:new Map}));const{overflow:r,containerWidth:s,visible:o,overflowStatus:l}=this.state;this.isScrollMode()||"calculating"!==l||this.foundation.handleCollapseOverflow()}render(){const e=this.renderItemList(),{renderMode:t}=this.props;return t===bp.SCROLL?o.createElement(up,{onIntersect:this.reintersect,root:this.scroller,threshold:this.props.threshold,items:this.itemRefs},e):o.createElement(_d.A,{onResize:this.resize},e)}}_p.__SemiComponentName__="OverflowList",_p.defaultProps=(0,$.bQ)(_p.__SemiComponentName__,{collapseFrom:"end",minVisibleItems:0,overflowRenderer:()=>null,renderMode:"collapse",threshold:.75,visibleItemRenderer:()=>null,onOverflow:()=>null}),_p.propTypes={className:c().string,collapseFrom:c().oneOf(lp.BOUNDARY_SET),direction:c().oneOf(lp.POSITION_SET),items:c().array,minVisibleItems:c().number,onIntersect:c().func,onOverflow:c().func,overflowRenderer:c().func,renderMode:c().oneOf(lp.MODE_SET),style:c().object,threshold:c().number,visibleItemRenderer:c().func,wrapperClassName:c().string,wrapperStyle:c().object};const xp=_p;var Sp=i(28813),wp=i(58168),Cp=i(77387),kp=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function Ap(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(n=e[i],r=t[i],!(n===r||kp(n)&&kp(r)))return!1;var n,r;return!0}const Ep=function(e,t){var i;void 0===t&&(t=Ap);var n,r=[],s=!1;return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return s&&i===this&&t(a,r)||(n=e.apply(this,a),s=!0,i=this,r=a),n}};var Tp="object"===typeof performance&&"function"===typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function Op(e){cancelAnimationFrame(e.id)}function Pp(e,t){var i=Tp();var n={id:requestAnimationFrame((function r(){Tp()-i>=t?e.call(null):n.id=requestAnimationFrame(r)}))};return n}var Mp=-1;function Ip(e){if(void 0===e&&(e=!1),-1===Mp||e){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",document.body.appendChild(t),Mp=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Mp}var Rp=null;function Dp(e){if(void 0===e&&(e=!1),null===Rp||e){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",i.direction="rtl";var n=document.createElement("div"),r=n.style;return r.width="100px",r.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?Rp="positive-descending":(t.scrollLeft=1,Rp=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Rp}return Rp}var Lp=function(e,t){return e};function jp(e){var t,i=e.getItemOffset,n=e.getEstimatedTotalSize,r=e.getItemSize,s=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,l=e.getStopIndexForStartIndex,c=e.initInstanceProps,h=e.shouldResetStyleCacheOnItemSizeChange,d=e.validateProps;return t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=c(n.props,(0,Sr.A)(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:(0,Sr.A)(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"===typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=Ep((function(e,t,i,r){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:i,visibleStopIndex:r})})),n._callOnScroll=void 0,n._callOnScroll=Ep((function(e,t,i){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:i})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,s=n.props,a=s.direction,o=s.itemSize,l=s.layout,c=n._getItemStyleCache(h&&o,h&&l,h&&a);if(c.hasOwnProperty(e))t=c[e];else{var d=i(n.props,e,n._instanceProps),u=r(n.props,e,n._instanceProps),p="horizontal"===a||"horizontal"===l,g="rtl"===a,f=p?d:0;c[e]=t={position:"absolute",left:g?void 0:f,right:g?f:void 0,top:p?0:d,height:p?"100%":u,width:p?u:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=Ep((function(e,t,i){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,i=t.clientWidth,r=t.scrollLeft,s=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===r)return null;var t=n.props.direction,a=r;if("rtl"===t)switch(Dp()){case"negative":a=-r;break;case"positive-descending":a=s-i-r}return a=Math.max(0,Math.min(a,s-i)),{isScrolling:!0,scrollDirection:e.scrollOffset<a?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,i=t.clientHeight,r=t.scrollHeight,s=t.scrollTop;n.setState((function(e){if(e.scrollOffset===s)return null;var t=Math.max(0,Math.min(s,r-i));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"===typeof t?t(e):null!=t&&"object"===typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&Op(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=Pp(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}(0,Cp.A)(t,e),t.getDerivedStateFromProps=function(e,t){return Fp(e,t),d(e),null};var u=t.prototype;return u.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},u.scrollToItem=function(e,t){void 0===t&&(t="auto");var i=this.props,n=i.itemCount,r=i.layout,a=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1));var o=0;if(this._outerRef){var l=this._outerRef;o="vertical"===r?l.scrollWidth>l.clientWidth?Ip():0:l.scrollHeight>l.clientHeight?Ip():0}this.scrollTo(s(this.props,e,t,a,this._instanceProps,o))},u.componentDidMount=function(){var e=this.props,t=e.direction,i=e.initialScrollOffset,n=e.layout;if("number"===typeof i&&null!=this._outerRef){var r=this._outerRef;"horizontal"===t||"horizontal"===n?r.scrollLeft=i:r.scrollTop=i}this._callPropsCallbacks()},u.componentDidUpdate=function(){var e=this.props,t=e.direction,i=e.layout,n=this.state,r=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var s=this._outerRef;if("horizontal"===t||"horizontal"===i)if("rtl"===t)switch(Dp()){case"negative":s.scrollLeft=-r;break;case"positive-ascending":s.scrollLeft=r;break;default:var a=s.clientWidth,o=s.scrollWidth;s.scrollLeft=o-a-r}else s.scrollLeft=r;else s.scrollTop=r}this._callPropsCallbacks()},u.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&Op(this._resetIsScrollingTimeoutId)},u.render=function(){var e=this.props,t=e.children,i=e.className,r=e.direction,s=e.height,a=e.innerRef,l=e.innerElementType,c=e.innerTagName,h=e.itemCount,d=e.itemData,u=e.itemKey,p=void 0===u?Lp:u,g=e.layout,f=e.outerElementType,m=e.outerTagName,v=e.style,y=e.useIsScrolling,b=e.width,_=this.state.isScrolling,x="horizontal"===r||"horizontal"===g,S=x?this._onScrollHorizontal:this._onScrollVertical,w=this._getRangeToRender(),C=w[0],k=w[1],A=[];if(h>0)for(var E=C;E<=k;E++)A.push((0,o.createElement)(t,{data:d,key:p(E,d),index:E,isScrolling:y?_:void 0,style:this._getItemStyle(E)}));var T=n(this.props,this._instanceProps);return(0,o.createElement)(f||m||"div",{className:i,onScroll:S,ref:this._outerRefSetter,style:(0,wp.A)({position:"relative",height:s,width:b,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:r},v)},(0,o.createElement)(l||c||"div",{children:A,ref:a,style:{height:x?"100%":T,pointerEvents:_?"none":void 0,width:x?T:"100%"}}))},u._callPropsCallbacks=function(){if("function"===typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],i=e[1],n=e[2],r=e[3];this._callOnItemsRendered(t,i,n,r)}if("function"===typeof this.props.onScroll){var s=this.state,a=s.scrollDirection,o=s.scrollOffset,l=s.scrollUpdateWasRequested;this._callOnScroll(a,o,l)}},u._getRangeToRender=function(){var e=this.props,t=e.itemCount,i=e.overscanCount,n=this.state,r=n.isScrolling,s=n.scrollDirection,o=n.scrollOffset;if(0===t)return[0,0,0,0];var c=a(this.props,o,this._instanceProps),h=l(this.props,c,o,this._instanceProps),d=r&&"backward"!==s?1:Math.max(1,i),u=r&&"forward"!==s?1:Math.max(1,i);return[Math.max(0,c-d),Math.max(0,Math.min(t-1,h+u)),c,h]},t}(o.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Fp=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},Bp=function(e,t,i){var n=e.itemSize,r=i.itemMetadataMap,s=i.lastMeasuredIndex;if(t>s){var a=0;if(s>=0){var o=r[s];a=o.offset+o.size}for(var l=s+1;l<=t;l++){var c=n(l);r[l]={offset:a,size:c},a+=c}i.lastMeasuredIndex=t}return r[t]},Np=function(e,t,i,n,r){for(;n<=i;){var s=n+Math.floor((i-n)/2),a=Bp(e,s,t).offset;if(a===r)return s;a<r?n=s+1:a>r&&(i=s-1)}return n>0?n-1:0},zp=function(e,t,i,n){for(var r=e.itemCount,s=1;i<r&&Bp(e,i,t).offset<n;)i+=s,s*=2;return Np(e,t,Math.min(i,r-1),Math.floor(i/2),n)},Hp=function(e,t){var i=e.itemCount,n=t.itemMetadataMap,r=t.estimatedItemSize,s=t.lastMeasuredIndex,a=0;if(s>=i&&(s=i-1),s>=0){var o=n[s];a=o.offset+o.size}return a+(i-s-1)*r},Vp=jp({getItemOffset:function(e,t,i){return Bp(e,t,i).offset},getItemSize:function(e,t,i){return i.itemMetadataMap[t].size},getEstimatedTotalSize:Hp,getOffsetForIndexAndAlignment:function(e,t,i,n,r,s){var a=e.direction,o=e.height,l=e.layout,c=e.width,h="horizontal"===a||"horizontal"===l?c:o,d=Bp(e,t,r),u=Hp(e,r),p=Math.max(0,Math.min(u-h,d.offset)),g=Math.max(0,d.offset-h+d.size+s);switch("smart"===i&&(i=n>=g-h&&n<=p+h?"auto":"center"),i){case"start":return p;case"end":return g;case"center":return Math.round(g+(p-g)/2);default:return n>=g&&n<=p?n:n<g?g:p}},getStartIndexForOffset:function(e,t,i){return function(e,t,i){var n=t.itemMetadataMap,r=t.lastMeasuredIndex;return(r>0?n[r].offset:0)>=i?Np(e,t,r,0,i):zp(e,t,Math.max(0,r),i)}(e,i,t)},getStopIndexForStartIndex:function(e,t,i,n){for(var r=e.direction,s=e.height,a=e.itemCount,o=e.layout,l=e.width,c="horizontal"===r||"horizontal"===o?l:s,h=Bp(e,t,n),d=i+c,u=h.offset+h.size,p=t;p<a-1&&u<d;)p++,u+=Bp(e,p,n).size;return p},initInstanceProps:function(e,t){var i={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,n){void 0===n&&(n=!0),i.lastMeasuredIndex=Math.min(i.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),n&&t.forceUpdate()},i},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),Up=jp({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,i,n,r,s){var a=e.direction,o=e.height,l=e.itemCount,c=e.itemSize,h=e.layout,d=e.width,u="horizontal"===a||"horizontal"===h?d:o,p=Math.max(0,l*c-u),g=Math.min(p,t*c),f=Math.max(0,t*c-u+c+s);switch("smart"===i&&(i=n>=f-u&&n<=g+u?"auto":"center"),i){case"start":return g;case"end":return f;case"center":var m=Math.round(f+(g-f)/2);return m<Math.ceil(u/2)?0:m>p+Math.floor(u/2)?p:m;default:return n>=f&&n<=g?n:n<f?f:g}},getStartIndexForOffset:function(e,t){var i=e.itemCount,n=e.itemSize;return Math.max(0,Math.min(i-1,Math.floor(t/n)))},getStopIndexForStartIndex:function(e,t,i){var n=e.direction,r=e.height,s=e.itemCount,a=e.itemSize,o=e.layout,l=e.width,c=t*a,h="horizontal"===n||"horizontal"===o?l:r,d=Math.ceil((h+i-c)/a);return Math.max(0,Math.min(s-1,t+d-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});var Wp=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Gp=(e,t,i,n)=>{const r=e.props;if(!e||!r)return null;const s=Object.assign(Object.assign({value:r.value,label:r.label||r.children||r.value,_show:!0,_selected:!1,_scrollIndex:i},r),{_parentGroup:t});return s._keyInJsx=n||e.key,s},Kp=e=>{let{index:t,data:i,style:n}=e;const{visibleOptions:r,renderOption:s}=i;return s(r[t],t,n)};var Yp=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Xp extends o.PureComponent{onClick(e,t){var{value:i,label:n,children:r}=e,s=Yp(e,["value","label","children"]);const{props:a}=this;a.disabled||a.onSelect(Object.assign(Object.assign({},s),{value:i,label:n||r}),t)}renderOptionContent(e){let{config:t,children:i,inputValue:n,prefixCls:r}=e;return C()(i)&&n?(0,$.TA)(t):i}render(){const e=this.props,{children:t,disabled:i,value:n,selected:r,label:s,empty:a,emptyContent:l,onSelect:c,focused:h,showTick:u,className:p,style:g,onMouseEnter:f,prefixCls:m,renderOptionItem:v,inputValue:y,semiOptionId:b}=e,_=Yp(e,["children","disabled","value","selected","label","empty","emptyContent","onSelect","focused","showTick","className","style","onMouseEnter","prefixCls","renderOptionItem","inputValue","semiOptionId"]),x=d()(m,{["".concat(m,"-disabled")]:i,["".concat(m,"-selected")]:r,["".concat(m,"-focused")]:h,["".concat(m,"-empty")]:a,[p]:p}),S=d()(["".concat(m,"-icon")]);if(a)return null===l?null:o.createElement(pe.A,{componentName:"Select"},(e=>o.createElement("div",{className:x,"x-semi-prop":"emptyContent"},l||e.emptyText)));if("function"===typeof v)return v(Object.assign({disabled:i,focused:h,selected:r,style:g,label:s,value:n,inputValue:y,onMouseEnter:e=>f(e),onClick:e=>this.onClick(Object.assign({value:n,label:s,children:t},_),e),className:p},_));const w={searchWords:y,sourceString:t,option:{highlightClassName:"".concat(m,"-keyword")}};return o.createElement("div",{className:x,onClick:e=>{this.onClick(Object.assign({value:n,label:s,children:t},_),e)},onMouseEnter:e=>f&&f(e),role:"option",id:b,"aria-selected":r?"true":"false","aria-disabled":i?"true":"false",style:g},u?o.createElement("div",{className:S},o.createElement(ge.A,null)):null,C()(t)?o.createElement("div",{className:"".concat(m,"-text")},this.renderOptionContent({children:t,config:w,inputValue:y,prefixCls:m})):t)}}Xp.isSelectOption=!0,Xp.propTypes={children:c().node,disabled:c().bool,value:c().oneOfType([c().string,c().number]),selected:c().bool,label:c().node,empty:c().bool,emptyContent:c().node,onSelect:c().func,focused:c().bool,showTick:c().bool,className:c().string,style:c().object,onMouseEnter:c().func,prefixCls:c().string,renderOptionItem:c().func,inputValue:c().string},Xp.defaultProps={prefixCls:Vu.PREFIX_OPTION};const qp=Xp,Zp=Vu.PREFIX_GROUP;class Qp extends M.A{render(){const{label:e,className:t,style:i}=this.props,n=d()(t,{[Zp]:!0});return e||"number"===typeof e?o.createElement("div",{className:n,style:i},e):null}}Qp.isSelectOptionGroup=!0,Qp.propTypes={children:c().oneOfType([c().array,c().node]),label:c().node,className:c().string,style:c().object};const $p=Qp;var Jp=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const eg=Vu.PREFIX;class tg extends M.A{constructor(e){super(e),this.setOptionContainerEl=e=>this.optionContainerEl={current:e},this.handleInputChange=(e,t)=>this.foundation.handleInputChange(e,t),this.getTagItem=(e,t,i)=>{const{size:n,disabled:r}=this.props,s=e[0],{value:a}=e[1],l=e[1].disabled||r,c=(e,t)=>{t&&"function"===typeof t.preventDefault&&t.preventDefault(),this.foundation.removeTag({label:s,value:a})},{content:h,isRenderInTag:d}=i(e[1],{index:t,disabled:l,onClose:c}),u={disabled:l,closable:!l,onClose:c};return d?o.createElement(ep,Object.assign({},u,{color:"white",size:n||"large",key:a,tabIndex:-1}),h):o.createElement(o.Fragment,{key:a},h)},this.state={isOpen:!1,isFocus:!1,options:[],selections:new Map,dropdownMinWidth:null,optionKey:0,inputValue:"",showInput:!1,focusIndex:e.defaultActiveFirstOption?0:-1,keyboardEventSet:{},optionGroups:[],isHovering:!1,isFocusInContainer:!1,isFullTags:!1,overflowItemCount:0},this.selectOptionListID="",this.selectID="",this.virtualizeListRef=o.createRef(),this.inputRef=o.createRef(),this.triggerRef=o.createRef(),this.optionsRef=o.createRef(),this.optionContainerEl=o.createRef(),this.clickOutsideHandler=null,this.onSelect=this.onSelect.bind(this),this.onClear=this.onClear.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.renderOption=this.renderOption.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.eventManager=new Sp.A,this.foundation=new Hu(this.adapter)}get adapter(){var e=this;const t={registerKeyDown:e=>{const t={onKeyDown:e};this.setState({keyboardEventSet:t})},unregisterKeyDown:()=>{this.setState({keyboardEventSet:{}})},updateFocusIndex:e=>{this.setState({focusIndex:e})},scrollToFocusOption:()=>{}},i={updateInputValue:e=>{this.setState({inputValue:e})},toggleInputShow:(e,t)=>{this.setState({showInput:e},(()=>{t()}))},focusInput:()=>{const{preventScroll:e}=this.props;this.inputRef&&this.inputRef.current&&this.inputRef.current.focus({preventScroll:e})}},n={notifyMaxLimit:e=>this.props.onExceed(e),getMaxLimit:()=>this.props.max,registerClickOutsideHandler:e=>{const t=t=>{const i=this.optionsRef&&this.optionsRef.current,n=this.triggerRef&&this.triggerRef.current,r=ye.findDOMNode(i),s=t.target,a=t.composedPath&&t.composedPath()||[s];r&&r.contains(s)||n&&n.contains(s)||a.includes(n)||a.includes(r)||e(t)};this.clickOutsideHandler=t,document.addEventListener("mousedown",t,!1)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(document.removeEventListener("mousedown",this.clickOutsideHandler,!1),this.clickOutsideHandler=null)},rePositionDropdown:()=>{let{optionKey:e}=this.state;e+=1,this.setState({optionKey:e})},notifyDeselect:(e,t)=>{delete t._parentGroup,this.props.onDeselect(e,t)}};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),t),i),n),{on:(e,t)=>this.eventManager.on(e,t),off:e=>this.eventManager.off(e),once:(e,t)=>this.eventManager.once(e,t),emit:e=>this.eventManager.emit(e),getOptionsFromChildren:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.children,i=[],n=[];const{optionList:r}=e.props;if(r&&r.length)n=r.map(((e,t)=>Object.assign({_show:!0,_selected:!1,_scrollIndex:t},e))),i[0]={children:n,label:""};else{const e=(e=>{let t=[],i=[];const n={label:"",children:[],_show:!1};let r=o.Children.toArray(e);r=r.filter((e=>e&&e.props));let s="",a=-1;return r.forEach((e=>{if(e.type.isSelectOption){s="option",a++;const t=Gp(e,void 0,a);n.children.push(t),i.push(t)}else if(e.type.isSelectOptionGroup){s="group";let n=e.props,{children:r}=n,l=Wp(n,["children"]),c=[];Array.isArray(r)?c=r.map((e=>e.key)):c.push(r.key),r=o.Children.toArray(r);const h=r.map(((t,i)=>{let n=t.key;return null===c[i]&&(n=e.key+""+t.key),a++,Gp(t,l,a,n)})),d=Object.assign(Object.assign({},e.props),{children:h,key:e.key});t.push(d),i=i.concat(h)}else(0,A.A)(!0,"[Semi Select] The children of `Select` should be `Select.Option` or `Select.OptionGroup`")})),"option"===s&&(t=[n]),{optionGroups:t,options:i}})(t);i=e.optionGroups,n=e.options}return e.setState({optionGroups:i}),n},updateOptions:e=>{this.setState({options:e})},openMenu:()=>{this.setState({isOpen:!0})},closeMenu:()=>{this.setState({isOpen:!1})},getTriggerWidth:()=>{const e=this.triggerRef.current;return e&&e.getBoundingClientRect().width},setOptionWrapperWidth:e=>{this.setState({dropdownMinWidth:e})},updateSelection:e=>{this.setState({selections:e})},getSelections:()=>new Map(this.state.selections),notifyChange:e=>{this.props.onChange(e)},notifySelect:(e,t)=>{delete t._parentGroup,this.props.onSelect(e,t)},notifyDropdownVisibleChange:e=>{this.props.onDropdownVisibleChange(e)},notifySearch:(e,t)=>{this.props.onSearch(e,t)},notifyCreate:e=>{this.props.onCreate(e)},notifyMouseEnter:e=>{this.props.onMouseEnter(e)},notifyMouseLeave:e=>{this.props.onMouseLeave(e)},notifyFocus:e=>{this.props.onFocus(e)},notifyBlur:e=>{this.props.onBlur(e)},notifyClear:()=>{this.props.onClear()},notifyListScroll:e=>{this.props.onListScroll(e)},updateHovering:e=>{this.setState({isHovering:e})},updateFocusState:e=>{this.setState({isFocus:e})},updateOverflowItemCount:e=>{this.setState({overflowItemCount:e})},focusTrigger:()=>{try{const{preventScroll:e}=this.props;this.triggerRef.current.focus({preventScroll:e})}catch(e){}},getContainer:()=>this.optionContainerEl&&this.optionContainerEl.current,getFocusableElements:e=>(0,$.iq)(e),getActiveElement:()=>(0,$.bq)(),setIsFocusInContainer:e=>{this.setState({isFocusInContainer:e})},getIsFocusInContainer:()=>this.state.isFocusInContainer,updateScrollTop:e=>{let t=".".concat(eg,"-option-selected");void 0!==e&&(t=".".concat(eg,"-option:nth-child(").concat(e,")"));let i=document.querySelector("#".concat(eg,"-").concat(this.selectOptionListID," ").concat(t));if(Array.isArray(i)&&(i=i[0]),i){const e=i.parentNode;e.scrollTop=i.offsetTop-e.offsetTop-e.clientHeight/2+i.clientHeight/2}}})}componentDidMount(){this.foundation.init(),this.selectOptionListID=(0,Ie.Ae)(),this.selectID=this.props.id||(0,Ie.Ae)()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e,t){const i=o.Children.toArray(e.children).map((e=>e.key)),n=o.Children.toArray(this.props.children).map((e=>e.key));let r=!1;a()(i,n)&&a()(e.optionList,this.props.optionList)||(r=!0,this.foundation.handleOptionListChange()),a()(this.props.value,e.value)&&!r||("value"in this.props?this.foundation.handleValueChange(this.props.value):this.foundation.handleOptionListChangeHadDefaultValue())}renderInput(){const{size:e,multiple:t,disabled:i,inputProps:n,filter:r}=this.props,s=Fi()(n,"className"),a=d()("".concat(eg,"-input"),{["".concat(eg,"-input-single")]:!t,["".concat(eg,"-input-multiple")]:t},s),{inputValue:l,focusIndex:c}=this.state,h=Object.assign({value:l,disabled:i,className:a,onChange:this.handleInputChange},n);let u={};return t&&(u={width:l?"".concat(16*l.length,"px"):"2px"},h.style=u),o.createElement(ce,Object.assign({ref:this.inputRef,size:e,"aria-activedescendant":-1!==c?"".concat(this.selectID,"-option-").concat(c):"",onFocus:e=>{t&&Boolean(r)&&this.setState({isFocus:!0}),e.stopPropagation()},onBlur:e=>this.foundation.handleInputBlur(e)},h))}close(){this.foundation.close()}open(){this.foundation.open()}clearInput(){this.foundation.clearInput()}selectAll(){this.foundation.selectAll()}deselectAll(){this.foundation.clearSelected()}focus(){this.foundation.focus()}onSelect(e,t,i){this.foundation.onSelect(e,t,i)}onClear(e){e.nativeEvent.stopImmediatePropagation(),this.foundation.handleClearClick(e)}search(e,t){this.handleInputChange(e,t)}renderEmpty(){return o.createElement(qp,{empty:!0,emptyContent:this.props.emptyContent})}renderLoading(){const e="".concat(eg,"-loading-wrapper");return o.createElement("div",{className:e},o.createElement(V,null))}renderOption(e,t,i){const{focusIndex:n,inputValue:r}=this.state,{renderOptionItem:s}=this.props;let a;const l=t===n;let c=i||{};return e.style&&(c=Object.assign(Object.assign({},c),e.style)),e._inputCreateOnly?a=this.renderCreateOption(e,l,t,i):("key"in e&&(e._keyInOptionList=e.key),a=o.createElement(qp,Object.assign({showTick:!0},e,{selected:e._selected,onSelect:(e,i)=>this.onSelect(e,t,i),focused:l,onMouseEnter:()=>this.onOptionHover(t),style:c,key:e._keyInOptionList||e._keyInJsx||e.label+e.value+t,renderOptionItem:s,inputValue:r,semiOptionId:"".concat(this.selectID,"-option-").concat(t)}),e.label)),a}renderCreateOption(e,t,i,n){const{renderCreateItem:r}=this.props;if("undefined"===typeof r){const r=o.createElement(qp,Object.assign({key:e.key||e.label+e.value,onSelect:(e,t)=>this.onSelect(e,i,t),onMouseEnter:()=>this.onOptionHover(i),showTick:!0},e,{focused:t,style:n}),o.createElement(pe.A,{componentName:"Select"},(t=>o.createElement(o.Fragment,null,o.createElement("span",{className:"".concat(eg,"-create-tips")},t.createText),e.value))));return r}const s=r(e.value,t,n);return o.createElement("div",{role:"button","aria-label":"Use the input box to create an optional item",onClick:t=>this.onSelect(e,i,t),key:e.key||e.label},s)}onOptionHover(e){this.foundation.handleOptionMouseEnter(e)}renderWithGroup(e){const t=[],i=new Map;return e.forEach(((e,n)=>{const r=e._parentGroup,s=this.renderOption(e,n);if(r&&!i.has(r.label)){const e=o.createElement($p,Object.assign({},r,{key:r.label}));i.set(r.label,!0),t.push(e)}t.push(s)})),t}renderVirtualizeList(e){const{virtualize:t}=this.props,{direction:i}=this.context,{height:n,width:r,itemSize:s}=t;return o.createElement(Up,{ref:this.virtualizeListRef,height:n||Wu,itemCount:e.length,itemSize:s,itemData:{visibleOptions:e,renderOption:this.renderOption},width:r||"100%",style:{direction:i}},Kp)}renderOptions(e){const{dropdownMinWidth:t,options:i,selections:n}=this.state,{maxHeight:r,dropdownClassName:s,dropdownStyle:a,outerTopSlot:l,innerTopSlot:c,outerBottomSlot:h,innerBottomSlot:u,loading:p,virtualize:g,multiple:f,emptyContent:m}=this.props,v=i.filter((e=>e._show));let y=this.renderWithGroup(v);g&&(y=this.renderVirtualizeList(v));const b=Object.assign({minWidth:t},a),_=d()({["".concat(eg,"-option-list")]:!0,["".concat(eg,"-option-list-chosen")]:n.size}),x=!i.length||!i.some((e=>e._show));return o.createElement("div",{id:"".concat(eg,"-").concat(this.selectOptionListID),className:d()({["".concat(eg,"-option-list-wrapper")]:!(x&&null===m)},s),style:b,ref:this.setOptionContainerEl,onKeyDown:e=>this.foundation.handleContainerKeyDown(e)},l?o.createElement("div",{className:"".concat(eg,"-option-list-outer-top-slot"),onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},l):null,o.createElement("div",{style:{maxHeight:"".concat(r,"px")},className:_,role:"listbox","aria-multiselectable":f,onScroll:e=>this.foundation.handleListScroll(e)},c?o.createElement("div",{className:"".concat(eg,"-option-list-inner-top-slot"),onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},c):null,p?this.renderLoading():x?this.renderEmpty():y,u?o.createElement("div",{className:"".concat(eg,"-option-list-inner-bottom-slot"),onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},u):null),h?o.createElement("div",{className:"".concat(eg,"-option-list-outer-bottom-slot"),onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},h):null)}renderSingleSelection(e,t){let{renderSelectedItem:i}=this.props;const{placeholder:n}=this.props,{showInput:r,inputValue:s}=this.state;let a="";const l=[...e];if("undefined"===typeof i&&(i=e=>e.label),l.length){a=i(l[0][1])}const c=d()({["".concat(eg,"-selection-text")]:!0,["".concat(eg,"-selection-placeholder")]:!a&&0!==a,["".concat(eg,"-selection-text-hide")]:s&&r,["".concat(eg,"-selection-text-inactive")]:!s&&r}),h="".concat(eg,"-content-wrapper");return o.createElement(o.Fragment,null,o.createElement("div",{className:h},o.createElement("span",{className:c,"x-semi-prop":"placeholder"},a||0===a?a:n),t&&r?this.renderInput():null))}renderTag(e,t,i){const{size:n,disabled:r}=this.props;let{renderSelectedItem:s}=this.props;const a=e[0],{value:l}=e[1],c=e[1].disabled||r,h=(e,t)=>{t&&"function"===typeof t.preventDefault&&t.preventDefault(),this.foundation.removeTag({label:a,value:l})};"undefined"===typeof s&&(s=e=>({isRenderInTag:!0,content:e.label}));const{content:d,isRenderInTag:u}=s(e[1],{index:t,disabled:c,onClose:h}),p={disabled:c,closable:!c,onClose:h},g=i&&!G()(this.props.renderSelectedItem)?o.createElement(it.A,{size:"small",ellipsis:{rows:1,showTooltip:{type:"popover",opts:{style:{width:"auto",fontSize:12}}}}},d):d;return u?o.createElement(ep,Object.assign({},p,{color:"white",size:n||"large",key:l,style:{maxWidth:"100%"}}),g):o.createElement(o.Fragment,{key:l},g)}renderNTag(e,t){const{size:i,showRestTagsPopover:n,restTagsPopoverProps:r}=this.props;let s=o.createElement(ep,{closable:!1,size:i||"large",color:"grey",className:"".concat(eg,"-content-wrapper-collapse-tag"),key:"_+".concat(e),style:{marginRight:0,flexShrink:0}},"+",e);return n&&(s=o.createElement(U.A,Object.assign({showArrow:!0,content:o.createElement(ei,{spacing:2,wrap:!0,style:{maxWidth:"400px"}},t.map(((e,t)=>this.renderTag(e,t)))),trigger:"hover",position:"top",autoAdjustOverflow:!0},r,{key:"_+".concat(e,"_Popover")}),s)),s}renderOverflow(e,t){return e.length&&e[0]?this.renderTag(e[0],t,!0):null}handleOverflow(e){const{overflowItemCount:t,selections:i}=this.state,{maxTagCount:n}=this.props,r=i.size-n>0?i.size-n+e.length-1:e.length-1;t!==r&&this.foundation.updateOverflowItemCount(i.size,r)}renderCollapsedTags(e,t){const{overflowItemCount:i}=this.state,n="number"===typeof t?e.slice(0,t):e;return o.createElement("div",{className:"".concat(eg,"-content-wrapper-collapse")},o.createElement(xp,{items:n,key:String(e.length),overflowRenderer:e=>this.renderOverflow(e,t-1),onOverflow:e=>this.handleOverflow(e),visibleItemRenderer:(e,t)=>this.renderTag(e,t)}),i>0&&this.renderNTag(i,e.slice(e.length-i)))}renderOneLineTags(e,t){let{renderSelectedItem:i}=this.props;const{showRestTagsPopover:n,restTagsPopoverProps:r,maxTagCount:s}=this.props,{isFullTags:a}=this.state;let l;if("undefined"===typeof i&&(i=e=>({isRenderInTag:!0,content:e.label})),n){const c=(a?e:e.slice(0,s)).map(((e,t)=>this.getTagItem(e,t,i)));l=o.createElement(rp,{tagList:c,maxTagCount:t,restCount:a?void 0:e.length-s,size:"large",mode:"custom",showPopover:n,popoverProps:r,onPlusNMouseEnter:()=>{this.foundation.updateIsFullTags()}})}else{const n=e.slice(0,s).map(((e,t)=>this.getTagItem(e,t,i)));l=o.createElement(rp,{tagList:n,maxTagCount:t,restCount:e.length-s,size:"large",mode:"custom"})}return l}renderMultipleSelection(e,t){let{renderSelectedItem:i}=this.props;const{placeholder:n,maxTagCount:r,expandRestTagsOnClick:s,ellipsisTrigger:a}=this.props,{inputValue:l,isOpen:c}=this.state,h=[...e];"undefined"===typeof i&&(i=e=>({isRenderInTag:!0,content:e.label}));const u=d()({["".concat(eg,"-content-wrapper")]:!0,["".concat(eg,"-content-wrapper-one-line")]:r&&!c,["".concat(eg,"-content-wrapper-empty")]:!h.length}),p=d()({["".concat(eg,"-selection-text")]:!0,["".concat(eg,"-selection-placeholder")]:!h.length,["".concat(eg,"-selection-text-hide")]:h&&h.length}),g=n&&!l?o.createElement("span",{className:p},n):null,f=h.length>r?r:void 0,m=!r,v=a?this.renderCollapsedTags(h,f):this.renderOneLineTags(h,f),y=m||s&&c?h.map(((e,t)=>this.renderTag(e,t))):v;return o.createElement(o.Fragment,null,o.createElement("div",{className:u},h&&h.length?y:g,t?this.renderInput():null))}onMouseEnter(e){this.foundation.handleMouseEnter(e)}onMouseLeave(e){this.foundation.handleMouseLeave(e)}onKeyPress(e){this.foundation.handleKeyPress(e)}handlePopoverVisibleChange(e){const{virtualize:t}=this.props,{selections:i}=this.state;if(e)if(t){let e=-1;if(i.forEach((t=>{const i=Fi()(t,"_scrollIndex");S()(i)&&i>=0&&(e=-1!==e&&e<i?e:i)})),-1!==e)try{this.virtualizeListRef.current.scrollToItem(e,"center")}catch(n){}}else this.foundation.updateScrollTop()}renderSuffix(){const{suffix:e}=this.props,t=d()({["".concat(eg,"-suffix")]:!0,["".concat(eg,"-suffix-text")]:e&&C()(e),["".concat(eg,"-suffix-icon")]:(0,$.uR)(e)});return o.createElement("div",{className:t,"x-semi-prop":"suffix"},e)}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:i}=this.props,n=e||t,r=d()({["".concat(eg,"-prefix")]:!0,["".concat(eg,"-inset-label")]:t,["".concat(eg,"-prefix-text")]:n&&C()(n),["".concat(eg,"-prefix-icon")]:(0,$.uR)(n)});return o.createElement("div",{className:r,id:i,"x-semi-prop":"prefix,insetLabel"},n)}renderSelection(){const e=this.props,{disabled:t,multiple:i,filter:n,style:r,id:s,size:a,className:l,validateStatus:c,showArrow:h,suffix:u,prefix:p,insetLabel:g,placeholder:f,triggerRender:m,arrowIcon:v,clearIcon:y,borderless:b}=e,_=Jp(e,["disabled","multiple","filter","style","id","size","className","validateStatus","showArrow","suffix","prefix","insetLabel","placeholder","triggerRender","arrowIcon","clearIcon","borderless"]),{selections:x,isOpen:S,keyboardEventSet:w,inputValue:C,isHovering:k,isFocus:A,showInput:E,focusIndex:T}=this.state,O="function"===typeof m,P=Boolean(n),M=O?d()(l):d()(eg,l,{["".concat(eg,"-borderless")]:b,["".concat(eg,"-open")]:S,["".concat(eg,"-focus")]:A,["".concat(eg,"-disabled")]:t,["".concat(eg,"-single")]:!i,["".concat(eg,"-multiple")]:i,["".concat(eg,"-filterable")]:P,["".concat(eg,"-small")]:"small"===a,["".concat(eg,"-large")]:"large"===a,["".concat(eg,"-error")]:"error"===c,["".concat(eg,"-warning")]:"warning"===c,["".concat(eg,"-no-arrow")]:!h,["".concat(eg,"-with-prefix")]:p||g,["".concat(eg,"-with-suffix")]:u}),I=this.props.showClear&&(x.size||C)&&!t&&(k||S),R=h?o.createElement("div",{className:"".concat(eg,"-arrow"),"x-semi-prop":"arrowIcon"},v):o.createElement("div",{className:"".concat(eg,"-arrow-empty")}),D=y||o.createElement(ee,null),L=O?o.createElement(ue,{value:Array.from(x.values()),inputValue:C,onChange:this.handleInputChange,onSearch:this.handleInputChange,onRemove:e=>this.foundation.removeTag(e),onClear:this.onClear,disabled:t,triggerRender:m,placeholder:f,componentName:"Select",componentProps:Object.assign({},this.props)}):[o.createElement(o.Fragment,{key:"prefix"},p||g?this.renderPrefix():null),o.createElement(o.Fragment,{key:"selection"},o.createElement("div",{className:d()("".concat(eg,"-selection"))},i?this.renderMultipleSelection(x,P):this.renderSingleSelection(x,P))),o.createElement(o.Fragment,{key:"clearicon"},I?o.createElement("div",{className:d()("".concat(eg,"-clear")),onClick:this.onClear},D):R),o.createElement(o.Fragment,{key:"suffix"},u?this.renderSuffix():null)],j=t||P&&E||P&&i?-1:0;return o.createElement("div",Object.assign({role:"combobox","aria-disabled":t,"aria-expanded":S,"aria-controls":"".concat(eg,"-").concat(this.selectOptionListID),"aria-haspopup":"listbox","aria-label":x.size?"selected":"","aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"],className:M,ref:e=>this.triggerRef.current=e,onClick:e=>this.foundation.handleClick(e),style:r,id:this.selectID,tabIndex:j,"aria-activedescendant":-1!==T?"".concat(this.selectID,"-option-").concat(T):"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:e=>this.foundation.handleTriggerFocus(e),onBlur:e=>this.foundation.handleTriggerBlur(e),onKeyPress:this.onKeyPress},w,this.getDataAttr(_)),L)}render(){const{direction:e}=this.context,t="rtl"===e?"bottomRight":"bottomLeft",{children:i,position:n=t,zIndex:r,getPopupContainer:s,motion:a,autoAdjustOverflow:l,mouseLeaveDelay:c,mouseEnterDelay:h,spacing:d,stopPropagation:u,dropdownMargin:p}=this.props,{isOpen:g,optionKey:f}=this.state,m=this.renderOptions(i),v=this.renderSelection();return o.createElement(U.A,{getPopupContainer:s,motion:a,margin:p,autoAdjustOverflow:l,mouseLeaveDelay:c,mouseEnterDelay:h,zIndex:r,ref:this.optionsRef,content:m,visible:g,trigger:"custom",rePosKey:f,position:n,spacing:d,stopPropagation:u,disableArrowKeyDown:!0,onVisibleChange:e=>this.handlePopoverVisibleChange(e),afterClose:()=>this.foundation.handlePopoverClose()},v)}}tg.contextType=en.A,tg.Option=qp,tg.OptGroup=$p,tg.propTypes={"aria-describedby":c().string,"aria-errormessage":c().string,"aria-invalid":c().bool,"aria-labelledby":c().string,"aria-required":c().bool,autoFocus:c().bool,autoClearSearchValue:c().bool,borderless:c().bool,children:c().node,clearIcon:c().node,defaultValue:c().oneOfType([c().string,c().number,c().array,c().object]),ellipsisTrigger:c().bool,value:c().oneOfType([c().string,c().number,c().array,c().object]),placeholder:c().node,onChange:c().func,multiple:c().bool,filter:c().oneOfType([c().func,c().bool]),max:c().number,maxTagCount:c().number,maxHeight:c().oneOfType([c().string,c().number]),style:c().object,className:c().string,size:c().oneOf(Uu.SIZE_SET),disabled:c().bool,emptyContent:c().node,expandRestTagsOnClick:c().bool,onDropdownVisibleChange:c().func,zIndex:c().number,position:c().oneOf(Uu.POSITION_SET),onSearch:c().func,getPopupContainer:c().func,dropdownClassName:c().string,dropdownStyle:c().object,dropdownMargin:c().oneOfType([c().number,c().object]),outerTopSlot:c().node,innerTopSlot:c().node,inputProps:c().object,outerBottomSlot:c().node,innerBottomSlot:c().node,optionList:c().array,dropdownMatchSelectWidth:c().bool,loading:c().bool,defaultOpen:c().bool,validateStatus:c().oneOf(Uu.STATUS),defaultActiveFirstOption:c().bool,triggerRender:c().func,stopPropagation:c().bool,motion:c().bool,onChangeWithObject:c().bool,suffix:c().node,prefix:c().node,insetLabel:c().node,insetLabelId:c().string,showClear:c().bool,showArrow:c().bool,renderSelectedItem:c().func,allowCreate:c().bool,renderCreateItem:c().func,onMouseEnter:c().func,onMouseLeave:c().func,clickToHide:c().bool,onExceed:c().func,onCreate:c().func,remote:c().bool,onDeselect:c().func,onSelect:c().func,autoAdjustOverflow:c().bool,mouseEnterDelay:c().number,mouseLeaveDelay:c().number,spacing:c().oneOfType([c().number,c().object]),onBlur:c().func,onFocus:c().func,onClear:c().func,virtualize:c().object,renderOptionItem:c().func,onListScroll:c().func,arrowIcon:c().node,preventScroll:c().bool},tg.__SemiComponentName__="Select",tg.defaultProps=(0,$.bQ)(tg.__SemiComponentName__,{stopPropagation:!0,motion:!0,borderless:!1,zIndex:P.nL.DEFAULT_Z_INDEX,filter:!1,multiple:!1,disabled:!1,defaultOpen:!1,allowCreate:!1,placeholder:"",onDropdownVisibleChange:r(),onChangeWithObject:!1,onChange:r(),onSearch:r(),onMouseEnter:r(),onMouseLeave:r(),onDeselect:r(),onSelect:r(),onCreate:r(),onExceed:r(),onFocus:r(),onBlur:r(),onClear:r(),onListScroll:r(),maxHeight:Wu,dropdownMatchSelectWidth:!0,defaultActiveFirstOption:!0,showArrow:!0,showClear:!1,remote:!1,autoAdjustOverflow:!0,autoClearSearchValue:!0,arrowIcon:o.createElement(Nd,{"aria-label":""}),showRestTagsPopover:!1,restTagsPopoverProps:{},expandRestTagsOnClick:!1,ellipsisTrigger:!1});const ig=tg,ng={PREFIX:"".concat(p._,"-sidesheet"),DIALOG:"".concat(p._,"-modal")},rg=["top","right","bottom","left"],sg=["small","medium","large"],ag=448;var og=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};let lg=0;const cg=ng.PREFIX;class hg extends o.PureComponent{constructor(){super(...arguments),this.onMaskClick=e=>{e.target===e.currentTarget&&this.close(e)},this.close=e=>{const{onClose:t}=this.props;t&&t(e)}}componentDidMount(){this.sideSheetId="sidesheet-".concat(lg++)}componentWillUnmount(){clearTimeout(this.timeoutId)}getMaskElement(){var e;const{mask:t,maskStyle:i,maskClosable:n}=this.props;return t?o.createElement("div",Object.assign({"aria-hidden":!0,key:"mask",className:d()("".concat(cg,"-mask"),null!==(e=this.props.maskClassName)&&void 0!==e?e:""),style:i,onClick:n?this.onMaskClick:null},this.props.maskExtraProps)):null}renderHeader(){const{title:e,closable:t,headerStyle:i,closeIcon:n}=this.props;let r,s;if(e&&(r=o.createElement("div",{className:"".concat(cg,"-title"),"x-semi-prop":"title"},this.props.title)),t){const e=n||o.createElement(pt,null);s=o.createElement($e,{className:"".concat(cg,"-close"),key:"close-btn",onClick:this.close,type:"tertiary",icon:e,theme:"borderless",size:"small"})}return o.createElement("div",{className:"".concat(cg,"-header"),role:"heading","aria-level":1,style:Object.assign({},i)},r,s)}getDialogElement(){var e;const t=og(this.props,[]),i={};t.width&&(i.width=t.width,t.mask||(i.width="100%")),t.height&&(i.height=t.height);const n=this.renderHeader();return o.createElement("div",Object.assign({key:"dialog-element",role:"dialog",tabIndex:-1,className:d()("".concat(cg,"-inner"),"".concat(cg,"-inner-wrap"),null!==(e=this.props.dialogClassName)&&void 0!==e?e:"","".concat(cg,"-size-").concat(t.size)),style:Object.assign(Object.assign({},t.style),i)},this.props.wrapperExtraProps),o.createElement("div",{className:"".concat(cg,"-content")},n,o.createElement("div",{className:"".concat(cg,"-body"),style:t.bodyStyle,"x-semi-prop":"children"},t.children),t.footer?o.createElement("div",{className:"".concat(cg,"-footer"),"x-semi-prop":"footer"},t.footer):null))}render(){const e=this.props,{mask:t,className:i,width:n,onClose:r,maskStyle:s,maskClosable:a,maskClassName:l,title:c,closable:h,headerStyle:u,height:p,style:g,size:f,bodyStyle:m,dialogClassName:v,children:y,footer:b,maskExtraProps:_,wrapperExtraProps:x}=e,S=og(e,["mask","className","width","onClose","maskStyle","maskClosable","maskClassName","title","closable","headerStyle","height","style","size","bodyStyle","dialogClassName","children","footer","maskExtraProps","wrapperExtraProps"]),w=d()(i,{["".concat(cg,"-fixed")]:!t,["".concat(cg,"-size-").concat(this.props.size)]:!t}),C={};!t&&n&&(C.width=n);const k=(0,Qt.A)(S);return o.createElement("div",Object.assign({className:w,style:C},k),this.getMaskElement(),this.getDialogElement())}}hg.propTypes={onClose:c().func,closeIcon:c().node},hg.defaultProps={onClose:r()};class dg extends k.A{constructor(e){super(Object.assign(Object.assign({},dg.defaultAdapter),e)),this.toggleDisplayNone=e=>{this._adapter.toggleDisplayNone(e)}}get defaultAdapter(){return{handleCancel:r(),beforeShow:r(),afterHide:r()}}destroy(){this.afterHide()}handleCancel(e){this._adapter.notifyCancel(e)}beforeShow(){this.getProp("disableScroll")&&this._adapter.disabledBodyScroll(),this._adapter.setOnKeyDownListener()}afterHide(){this.getProp("disableScroll")&&this._adapter.enabledBodyScroll(),this._adapter.removeKeyDownListener()}handleKeyDown(e){const{closeOnEsc:t}=this.getProps();if(t&&e.keyCode===E.Ay.ESC)return e.stopPropagation(),void this.handleCancel(e)}onVisibleChange(e){this._adapter.notifyVisibleChange(e)}}var ug=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const pg=ng.PREFIX,gg=ag;class fg extends M.A{constructor(e){super(e),this.handleCancel=e=>{this.foundation.handleCancel(e)},this.handleKeyDown=e=>{this.foundation.handleKeyDown(e)},this.updateState=()=>{this.foundation.toggleDisplayNone(!this.props.visible)},this.state={displayNone:!this.props.visible},this.foundation=new dg(this.adapter),this.bodyOverflow="",this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{disabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;this.bodyOverflow=document.body.style.overflow||"",e||"hidden"===this.bodyOverflow||(document.body.style.overflow="hidden",document.body.style.width="calc(".concat(this.originBodyWidth||"100%"," - ").concat(this.scrollBarWidth,"px)"))},enabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;e||"hidden"===this.bodyOverflow||(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>{this.props.onCancel&&this.props.onCancel(e)},notifyVisibleChange:e=>{this.props.afterVisibleChange(e)},setOnKeyDownListener:()=>{window&&window.addEventListener("keydown",this.handleKeyDown)},removeKeyDownListener:()=>{window&&window.removeEventListener("keydown",this.handleKeyDown)},toggleDisplayNone:e=>{e!==this.state.displayNone&&this.setState({displayNone:e})}})}static getDerivedStateFromProps(e,t){const i={};return e.visible&&t.displayNone&&(i.displayNone=!1),e.visible||e.motion||t.displayNone||(i.displayNone=!0),i}componentDidMount(){this.scrollBarWidth=(0,$.XJ)(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t,i){!e.visible&&this.props.visible&&this.foundation.beforeShow(),e.visible&&!this.props.visible&&this.foundation.afterHide(),t.displayNone!==this.state.displayNone&&this.foundation.onVisibleChange(!this.state.displayNone)}componentWillUnmount(){this.props.visible&&this.foundation.destroy()}renderContent(){const e=this.props,{placement:t,className:i,children:n,width:r,height:s,motion:a,visible:l,style:c,maskStyle:h,size:u,zIndex:p,getPopupContainer:g,keepDOM:f}=e,m=ug(e,["placement","className","children","width","height","motion","visible","style","maskStyle","size","zIndex","getPopupContainer","keepDOM"]);let v={zIndex:p};g&&(v={zIndex:p,position:"static"});const{direction:y}=this.context,b="left"===t||"right"===t,_="top"===t||"bottom"===t,x=_?s||gg:"100%",S=d()(pg,i,{["".concat(pg,"-").concat(t)]:t,["".concat(pg,"-popup")]:g,["".concat(pg,"-horizontal")]:_,["".concat(pg,"-rtl")]:"rtl"===y,["".concat(pg,"-hidden")]:f&&this.state.displayNone}),w=Object.assign(Object.assign(Object.assign({},b?r?{width:r}:{}:{width:"100%"}),m),{visible:l,motion:!1,size:u,className:S,height:x,onClose:this.handleCancel}),C=this.props.visible||this.props.keepDOM||this.props.motion&&!this.state.displayNone;return o.createElement(Nc.A,{motion:this.props.motion,animationState:l?"enter":"leave",startClassName:"".concat(pg,l?"-animation-mask_show":"-animation-mask_hide"),onAnimationEnd:this.updateState},(e=>{let{animationClassName:t,animationEventsNeedBind:i}=e;return o.createElement(Nc.A,{motion:this.props.motion,animationState:l?"enter":"leave",startClassName:l?"".concat(pg,"-animation-content_show_").concat(this.props.placement):"".concat(pg,"-animation-content_hide_").concat(this.props.placement),onAnimationEnd:this.updateState},(e=>{let{animationClassName:r,animationStyle:s,animationEventsNeedBind:a}=e;return C?o.createElement(zc.A,{getPopupContainer:g,style:v},o.createElement(hg,Object.assign({},w,{maskExtraProps:i,wrapperExtraProps:a,dialogClassName:r,maskClassName:t,maskStyle:Object.assign({},h),style:Object.assign(Object.assign({},s),c)}),n)):o.createElement(o.Fragment,null)}))}))}render(){const{zIndex:e,getPopupContainer:t,visible:i}=this.props;return this.renderContent()}}fg.contextType=en.A,fg.propTypes={bodyStyle:c().object,headerStyle:c().object,children:c().node,className:c().string,closable:c().bool,disableScroll:c().bool,getPopupContainer:c().func,height:c().oneOfType([c().number,c().string]),mask:c().bool,maskClosable:c().bool,maskStyle:c().object,motion:c().oneOfType([c().bool,c().object,c().func]),onCancel:c().func,placement:c().oneOf(rg),size:c().oneOf(sg),style:c().object,title:c().node,visible:c().bool,width:c().oneOfType([c().number,c().string]),zIndex:c().number,afterVisibleChange:c().func,closeOnEsc:c().bool,footer:c().node,keepDOM:c().bool,"aria-label":c().string},fg.__SemiComponentName__="SideSheet",fg.defaultProps=(0,$.bQ)(fg.__SemiComponentName__,{visible:!1,motion:!0,mask:!0,placement:"right",closable:!0,footer:null,zIndex:1e3,maskClosable:!0,size:"small",disableScroll:!0,closeOnEsc:!1,afterVisibleChange:r(),keepDOM:!1});const mg=ze.PREFIX;class vg extends M.A{constructor(){super(...arguments),this.containerRef=o.createRef(),this.mutationObserver=null}componentDidMount(){const e=()=>{const e=this.containerRef.current.querySelectorAll("button"),t=e[0],i=e[e.length-1];(null===t||void 0===t?void 0:t.classList.contains("".concat(mg,"-first")))||null===t||void 0===t||t.classList.add("".concat(mg,"-first")),(null===i||void 0===i?void 0:i.classList.contains("".concat(mg,"-last")))||null===i||void 0===i||i.classList.add("".concat(mg,"-last"))};if(this.containerRef.current){e();const t=new MutationObserver(((t,i)=>{for(const n of t)("attributes"===n.type&&"class"===n.attributeName||"childList"===n.type&&Array.from(n.addedNodes).some((e=>"BUTTON"===e.nodeName)))&&e()}));t.observe(this.containerRef.current,{attributes:!0,childList:!0,subtree:!0}),this.mutationObserver=t}}componentWillUnmount(){var e;super.componentWillUnmount(),null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){const{children:e,style:t,className:i}=this.props,n=d()("".concat(mg,"-split"),i);return o.createElement("div",{ref:this.containerRef,className:n,style:t,role:"group","aria-label":this.props["aria-label"]},e)}}vg.propTypes={style:c().object,className:c().string,"aria-label":c().string};class yg extends k.A{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(i){(0,A.A)(!0,"Warning: [Semi Switch] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){const{disabled:e}=this.getProps();this.setDisabled(e)}setChecked(e){this._adapter.setNativeControlChecked(e)}setDisabled(e){this._adapter.setNativeControlDisabled(e)}handleChange(e,t){"undefined"!==typeof this.getProps().checked||this._adapter.setNativeControlChecked(e),this._adapter.notifyChange(e,t)}destroy(){}}const bg={PREFIX:"".concat(p._,"-switch"),FOCUS:"".concat(p._,"-switch-focus"),LARGE:"".concat(p._,"-switch-large"),SMALL:"".concat(p._,"-switch-small"),CHECKED:"".concat(p._,"-switch-checked"),DISABLED:"".concat(p._,"-switch-disabled"),ACTIVE:"".concat(p._,"-switch-active"),KNOB:"".concat(p._,"-switch-knob"),NATIVE_CONTROL:"".concat(p._,"-switch-native-control"),CHECKED_TEXT:"".concat(p._,"-switch-checked-text"),UNCHECKED_TEXT:"".concat(p._,"-switch-unchecked-text"),LOADING_SPIN:"".concat(p._,"-switch-loading-spin"),LOADING:"".concat(p._,"-switch-loading")};var _g=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class xg extends M.A{constructor(e){super(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.state={nativeControlChecked:e.defaultChecked||e.checked,nativeControlDisabled:!1,focusVisible:!1},this.switchRef=o.createRef(),this.foundation=new yg(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){this.props.checked!==e.checked&&this.foundation.setChecked(this.props.checked),this.props.disabled!==e.disabled&&this.foundation.setDisabled(this.props.disabled)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({nativeControlChecked:e})},setNativeControlDisabled:e=>{this.setState({nativeControlDisabled:e})},setFocusVisible:e=>{this.setState({focusVisible:e})},notifyChange:(e,t)=>{this.props.onChange(e,t)}})}render(){const{nativeControlChecked:e,nativeControlDisabled:t,focusVisible:i}=this.state,n=this.props,{className:r,style:s,onMouseEnter:a,onMouseLeave:l,size:c,checkedText:h,uncheckedText:u,loading:p,id:g}=n,f=_g(n,["className","style","onMouseEnter","onMouseLeave","size","checkedText","uncheckedText","loading","id"]),m=d()(r,{[bg.PREFIX]:!0,[bg.CHECKED]:e,[bg.DISABLED]:t,[bg.LARGE]:"large"===c,[bg.SMALL]:"small"===c,[bg.LOADING]:p,[bg.FOCUS]:i}),v={type:"checkbox",className:bg.NATIVE_CONTROL,disabled:t||p,checked:e||!1},y=h&&e&&"small"!==c,b=u&&!e&&"small"!==c;return o.createElement("div",Object.assign({className:m,style:s,onMouseEnter:a,onMouseLeave:l},this.getDataAttr(f)),p?o.createElement(V,{wrapperClassName:bg.LOADING_SPIN,size:"default"===c?"middle":c}):o.createElement("div",{className:bg.KNOB,"aria-hidden":!0}),y?o.createElement("div",{className:bg.CHECKED_TEXT,"x-semi-prop":"checkedText"},h):null,b?o.createElement("div",{className:bg.UNCHECKED_TEXT,"x-semi-prop":"uncheckedText"},u):null,o.createElement("input",Object.assign({},v,{ref:this.switchRef,id:g,role:"switch","aria-checked":e,"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-disabled":this.props.disabled,onChange:e=>this.foundation.handleChange(e.target.checked,e),onFocus:e=>this.handleFocusVisible(e),onBlur:e=>this.handleBlur(e)})))}}xg.propTypes={"aria-label":c().string,"aria-labelledby":c().string,"aria-invalid":c().bool,"aria-errormessage":c().string,"aria-describedby":c().string,className:c().string,checked:c().bool,checkedText:c().node,defaultChecked:c().bool,disabled:c().bool,loading:c().bool,onChange:c().func,onMouseEnter:c().func,onMouseLeave:c().func,style:c().object,size:c().oneOf(["default","small","large"]),uncheckedText:c().node,id:c().string},xg.defaultProps={disabled:!1,className:"",onChange:r(),loading:!1,onMouseEnter:r(),onMouseLeave:r(),size:"default"};const Sg=xg;var wg=i(88458),Cg=i.n(wg),kg=i(62580),Ag=i.n(kg),Eg=i(63517),Tg=i.n(Eg),Og=i(24597),Pg=i.n(Og),Mg=i(50723),Ig=i.n(Mg),Rg=i(56641),Dg=i.n(Rg);const Lg={PREFIX:"".concat(p._,"-table"),TABLE:"".concat(p._,"-table"),WRAP:"".concat(p._,"-table-wrapper"),THEAD:"".concat(p._,"-table-thead"),TR:"".concat(p._,"-table-row"),TH:"".concat(p._,"-table-row-head"),TD:"".concat(p._,"-table-row-cell")},jg={SIZE_SMALL:"small",SIZE_MIDDLE:"middle",SIZES:["small","default","middle"],LAYOUTS:["","auto","fixed"],PAGINATION_POSITIONS:["bottom","top","both"],FOOTER_POSITIONS:[!1,!0,"left","right"],SORT_DIRECTIONS:["ascend","descend"],FIXED_SET:[!1,!0,"left","right"],ALIGNS:["left","right","center"],SCROLL_HORIZONTAL_POSITIONS:["left","middle","right"],DEFAULT_KEY_COLUMN_SELECTION:"column-selection",DEFAULT_KEY_COLUMN_EXPAND:"column-expand",DEFAULT_KEY_COLUMN_TITLE:"column-title",DEFAULT_KEY_COLUMN_SORTER:"column-sorter",DEFAULT_KEY_COLUMN_FILTER:"column-filter",DEFAULT_KEY_COLUMN_SCROLLBAR:"column-scrollbar",DEFAULT_COMPONENTS:{table:"table",header:{outer:"table",wrapper:"thead",row:"tr",cell:"th"},body:{outer:"table",wrapper:"tbody",row:"tr",cell:"td"},footer:{wrapper:"tfoot",row:"tr",cell:"td"}},EXPAND_RELATED_PROPS:["expandedRowRender","dataSource","hideExpandedColumn","childrenRecordName","rowExpandable"]},Fg={DEFAULT_PAGE_SIZE:10,DEFAULT_WIDTH_COLUMN_EXPAND:60,DEFAULT_WIDTH_COLUMN_SELECTION:60,DEFAULT_INDENT_WIDTH:20,DEFAULT_CELL_PADDING_LEFT:16,DEFAULT_CELL_PADDING_RIGHT:16,DEFAULT_CELL_PADDING_TOP:16,DEFAULT_CELL_PADDING_BOTTOM:16,DEFAULT_CELL_MIDDLE_PADDING_TOP:12,DEFAULT_CELL_MIDDLE_PADDING_BOTTOM:12,DEFAULT_CELL_SMALL_PADDING_TOP:8,DEFAULT_CELL_SMALL_PADDING_BOTTOM:8,DEFAULT_CELL_BORDER_WIDTH_LEFT:1,DEFAULT_CELL_BORDER_WIDTH_RIGHT:1,DEFAULT_CELL_BORDER_WITH_BOTTOM:1,DEFAULT_CELL_LINE_HEIGHT:20,DEFAULT_VIRTUALIZED_BODY_HEIGHT:600,DEFAULT_VIRTUALIZED_SECTION_ROW_HEIGHT:53,DEFAULT_VIRTUALIZED_ROW_HEIGHT:53,DEFAULT_VIRTUALIZED_ROW_MIN_HEIGHT:33,DEFAULT_VIRTUALIZED_SECTION_ROW_MIDDLE_HEIGHT:45,DEFAULT_VIRTUALIZED_ROW_MIDDLE_HEIGHT:45,DEFAULT_VIRTUALIZED_ROW_MIDDLE_MIN_HEIGHT:25,DEFAULT_VIRTUALIZED_SECTION_ROW_SMALL_HEIGHT:37,DEFAULT_VIRTUALIZED_ROW_SMALL_HEIGHT:37,DEFAULT_VIRTUALIZED_ROW_SMALL_MIN_HEIGHT:17};const Bg=class{constructor(e){this._prefix=e}_isEmpty(e){return null===e||void 0===e||""===e}_baseLog(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"log";if("function"===typeof console[e]){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const r=[...i];this._isEmpty(this._prefix)||r.unshift(this._prefix,":"),console[e](...r)}}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._baseLog("log",...t)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._baseLog("warn",...t)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._baseLog("error",...t)}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._baseLog("info",...t)}};function Ng(e,t){t=Array.isArray(t)?t:["key","dataIndex"];let i=null;return Ag()(t,(t=>{if(i=Fi()(e,t),null!=i)return!1})),i}function zg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;t=t<0||"number"!==typeof t?0:t,i=i>e.length||"number"!==typeof i?e.length:i;let n=0;return Ag()(e,((e,r)=>{r>=t&&r<i&&(n+="number"!==typeof e||isNaN(e)?0:e)})),n}function Hg(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["key"];const n=Ig()(e,(e=>!0===e.fixed||"left"===e.fixed)),r=nl()(n,(e=>i.every((i=>null!=e[i]&&e[i]===t[i]))));return n.length>0&&r===n.length-1}function Vg(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["key"];const n=Ig()(e,(e=>"right"===e.fixed)),r=nl()(n,(e=>i.every((i=>null!=e[i]&&e[i]===t[i]))));return n.length>0&&0===r}function Ug(e){return["left",!0].includes(Fi()(e,"fixed"))}function Wg(e){return["right"].includes(Fi()(e,"fixed"))}function Gg(e){return Fi()(e,"key")===jg.DEFAULT_KEY_COLUMN_EXPAND}function Kg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[jg.DEFAULT_KEY_COLUMN_SCROLLBAR];return Ig()(e,(e=>!t.includes(e.key)))}function Yg(e,t){return void 0===t&&(t="key"),"function"===typeof t?t(e):Fi()(e,t)}function Xg(e,t){return null!=t&&yo()(e,t)}function qg(e,t){return null!==t&&e.has(t)}function Zg(e,t){return null!==t&&e.has(t)}function Qg(e,t,i){return void 0===i&&(i="key"),ol()(e,(e=>null!=t&&""!==t&&Yg(e,i)===t))}function $g(){let e=arguments.length>1?arguments[1]:void 0;return void 0===e&&(e="__expanded_row"),(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+e}function Jg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children";const i=[];if(Array.isArray(e)&&e.length)for(const n of e)Array.isArray(n[t])&&n[t].length?i.push(...Jg(n[t],t)):(af(n),i.push(n));return i}function ef(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=[];return Ag()(e,((e,r)=>{if(null==e.key){const t=e.dataIndex||r;e.key="".concat(i,"-").concat(t)}Array.isArray(e[t])&&e[t].length&&n.push(...e[t])})),n.length&&ef(n,t,i+1),e}function tf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=[];return Array.isArray(e)&&e.length&&n<=t&&e.forEach((e=>{const s=e[i];Array.isArray(s)&&s.length&&n<t?r.push(...tf(s,t,i,n+1)):r.push(e)})),r}function nf(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children";return Ag()(e,(e=>{if(e&&null!=e.key&&!i&&e.key===t.key&&(i=e),e&&Array.isArray(e[n])&&!i&&(i=nf(e[n],t,n)),i)return!1})),i}function rf(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=i.findIndex((i=>e.dataIndex===i.dataIndex&&(t=Object.assign(Object.assign({},i),e),!0)));return n>-1?i.splice(n,1,t):i.push(t),[...i]}function sf(e){let{dataSource:t,getCheckboxProps:i,childrenRecordName:n,rowKey:r}=e;const s=[];if(Array.isArray(t)&&t.length&&"function"===typeof i)for(const a of t){const e=i(a),t="function"===typeof r?r(a):Fi()(a,r);e&&e.disabled&&s.push(t);const o=Fi()(a,n);if(Array.isArray(o)&&o.length){const e=sf({dataSource:o,getCheckboxProps:i});s.push(...e)}}return s}function af(e){if("object"===typeof e&&null!==e){const{filters:t,sorter:i,dataIndex:n,onFilter:r}=e,s=new Bg("[@douyinfe/semi-ui Table]");(Array.isArray(t)||G()(r)||G()(i))&&(0,L.A)(n)&&s.warn("The column with sorter or filter must pass the 'dataIndex' prop")}}function of(e){let{dataSource:t,childrenRecordName:i="children"}=e,n=!1;if(Array.isArray(t))for(const r of t){const e=Fi()(r,i);if(Array.isArray(e)&&e.length){n=!0;break}}return n}function lf(e,t){if("rtl"===t)switch(e){case"left":return"right";case"right":return"left";default:return e}return e}function cf(e){return!0===e||Fi()(e,"showTitle",!0)}const hf=class{constructor(e){this._state=Object.assign({},e),this._listeners=[]}subscribe(e){this._listeners.push(e);return()=>{const t=this._listeners.indexOf(e);t>-1&&this._listeners.splice(t,1)}}setState(e){Object.assign(this._state,Object.assign({},e));for(const t of this._listeners)"function"===typeof t&&t(this._state)}getState(){return this._state}};var df=i(57887),uf=i.n(df),pf=i(92394),gf=i.n(pf),ff=i(34677),mf=i.n(ff);function vf(e,t){if(e===t&&(t=function(e){return new Set(e)}(t)),mo()(e)&&e.size&&mo()(t)&&t.size){for(const i of t)e.has(i)&&e.delete(i);return e}return e}function yf(e,t){if(null!==e&&e.length&&null!==t&&t.length){const i=vf(new Set(e),new Set(t));return Array.from(i)}return e}class bf extends k.A{static initColumnsFilteredValueAndSorterOrder(e){return e.forEach((e=>{bf.initFilteredValue(e),bf.initSorterOrder(e)})),e}static initFilteredValue(e){const{defaultFilteredValue:t,filteredValue:i}=e;_()(i)&&(Array.isArray(t)&&t.length?e.filteredValue=t:e.filteredValue=[])}static initSorterOrder(e){const{defaultSortOrder:t,sortOrder:i,sorter:n}=e;n&&_()(i)&&(_()(t)?e.sortOrder=!1:e.sortOrder=t)}constructor(e){super(Object.assign({},e)),this.setPage=(e,t)=>{e=e||this._adapter.getCurrentPage();const i=this.getState("pagination"),{dataSource:n,pagination:r,disabledRowKeys:s,allRowKeys:a}=this.getCurrentPageData(null,Object.assign(Object.assign({},i),{currentPage:e,pageSize:t}));!this._pagerIsControlled()&&e>0&&(this._adapter.setDisabledRowKeys(s),this._adapter.setAllRowKeys(a),this._adapter.setPagination(r),this._adapter.setDataSource(n)),this._notifyChange(r)},this.setCachedFilteredSortedDataSource=e=>{this._adapter.setCachedFilteredSortedDataSource(e);const t=this.getAllRowKeys(e);this._adapter.setCachedFilteredSortedRowKeys(t)},this.isSortOrderValid=e=>jg.SORT_DIRECTIONS.includes(e)||!1===e;const t=this._adapter.getHandleColumns(),i=this._adapter.getMergePagination();this.memoizedWithFnsColumns=Ep(t,a()),this.memoizedFilterColumns=Ep(Kg),this.memoizedFlattenFnsColumns=Ep(Jg),this.memoizedPagination=Ep(i,a())}init(){const e=[...this.getProp("dataSource")],{queries:t}=this._adapter.getStates(),i=this.getFilteredSortedDataSource(e,t),n=this.getAllDisabledRowKeys(i),r=this.getCurrentPageData(i);this.setAdapterPageData(r),this.initExpandedRowKeys(r),this.initSelectedRowKeys(r),this.setCachedFilteredSortedDataSource(i),this.setAllDisabledRowKeys(n)}initExpandedRowKeys(){let{groups:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{defaultExpandAllRows:t,defaultExpandedRowKeys:i=[],expandedRowKeys:n=[],dataSource:r=[],expandAllRows:s,defaultExpandAllGroupRows:a,expandAllGroupRows:o}=this.getProps(),l=[];t||s?this._addNoDuplicatedItemsToArr(l,this.getAllRowKeys(r),e&&uf()(e)&&e.size?Array.from(e.keys()):[]):a||o?this._addNoDuplicatedItemsToArr(l,n,e&&uf()(e)&&e.size?Array.from(e.keys()):[]):Array.isArray(i)&&i.length?this._addNoDuplicatedItemsToArr(l,i):Array.isArray(n)&&n.length&&this._addNoDuplicatedItemsToArr(l,n),this._adapter.setExpandedRowKeys(l)}initSelectedRowKeys(e){let{disabledRowKeys:t}=e;const i=this.getProp("rowSelection"),n=[];if(i){const e=Fi()(i,"selectedRowKeys"),r=Fi()(i,"defaultSelectedRowKeys");Array.isArray(e)?this._addNoDuplicatedItemsToArr(n,e):Array.isArray(r)&&this._addNoDuplicatedItemsToArr(n,r),Array.isArray(t)&&t.length&&gf()(n,...t),this._adapter.setSelectedRowKeys(n)}}getFilteredSortedDataSource(e,t){const i=this.filterDataSource(e,t.filter((e=>{const t=e.filteredValue?e.filteredValue:e.defaultFilteredValue;return G()(e.onFilter)&&Array.isArray(t)&&t.length})));return this.sortDataSource(i,t.filter((e=>e&&G()(e.sorter))))}getCurrentPageData(e,t,i){const n=this._adapter.getCachedFilteredSortedDataSource();let r;if(e=null==e?[...n]:e,t=null==t?this.getState("pagination")&&Object.assign({},this.getState("pagination")):t,i=null==i?[...this.getState("queries")]:i,null!=this.getProp("groupBy")){const{groups:t,dataSource:i}=this.groupDataSource(e);e=i,r=t}t=this.normalizePagination(t,e);return{dataSource:e=this.limitPageDataSource(e,t),groups:r,pagination:t,disabledRowKeys:this.getAllDisabledRowKeys(e),allRowKeys:this.getAllRowKeys(e),queries:i}}groupDataSource(e,t){t=null==t?this.getProp("groupBy"):t;const i=new Map,n=[];return null!=t&&Ag()(e,((e,n)=>{const r="function"===typeof t?t(e):Fi()(e,t);if(null!=r&&""!==r){const t=this.getRecordKey(e);let n=i.get(r);mo()(n)?n.add(t):(n=new Set([t]),i.set(r,n))}})),i&&i.size?i.forEach(((e,t)=>{mo()(e)&&e.forEach((e=>{n.push(this._getRecord(e))}))})):n.push(...e),{groups:i,dataSource:n}}sortDataSource(e,t){return Ag()(t,(t=>{const{sorter:i,sortOrder:n,defaultSortOrder:r,sortChildrenRecord:s}=t,a=this.isSortOrderValid(n)?n:r;if(G()(i)&&a&&jg.SORT_DIRECTIONS.includes(a)){if(s){const i=this.getProp("childrenRecordName");e=e&&e.map((e=>{const n=this._getRecordChildren(e);return Array.isArray(n)&&n.length?Object.assign(Object.assign({},e),{[i]:this.sortDataSource(n,[t])}):e}))}return e.sort(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ascend";return"descend"===t?(i,n)=>{const r=Number(e(i,n,t));return 0!==r?-r:r}:(i,n)=>e(i,n,t)}(i,a)),!1}})),e}filterDataSource(e,t){let i=null,n=!1;const r=this.getProp("childrenRecordName");return Ag()(t,(t=>{const{onFilter:s,filteredValue:a,filterChildrenRecord:o,defaultFilteredValue:l}=t,c=Array.isArray(a)?a:l;"function"===typeof s&&Array.isArray(c)&&c.length&&(n=!0,null===i||(e=Array.from(i&&i.values())),i=new Map,Ag()(e,(e=>{Ag()(c,(n=>{const a=Fi()(e,r),l=this.getRecordKey(e);let c;if(Array.isArray(a)&&a.length&&o&&(c=this.filterDataSource(a,[t])),Array.isArray(c)&&c.length){if(null!=l){const t=Fi()(i.get(l),r,[]);i.set(l,Object.assign(Object.assign({},e),{[r]:c.reduce(((e,t)=>(null==e.find((e=>this.getRecordKey(e)===this.getRecordKey(t)))&&e.push(t),e)),[...t])}))}}else s(n,e)&&i.set(l,e)}))})))})),n&&(e=Array.from(i&&i.values())),e}limitPageDataSource(e,t){e=null==e?this.getProp("dataSource"):e,t=null==t?this.getState("pagination"):t;let i=e;const n=Fi()(t,"currentPage");if(!1!==this.getProp("pagination")&&n&&e&&t&&!this._pagerIsControlled()){const{pageSize:r=Fg.DEFAULT_PAGE_SIZE}=t,s=(n-1)*r,a=n*r;i=pl()(e,s,a)}return i}normalizePagination(e,t){e=null==e?this._getPagination():e,t=null==t?this._getDataSource():t;const i=this.getProp("pagination");if(e&&(e="object"===typeof e?Object.assign({},e):{},e=mf()({total:t&&t.length||0,pageSize:Fg.DEFAULT_PAGE_SIZE,currentPage:Fi()(i,"defaultCurrentPage",1),position:jg.PAGINATION_POSITIONS[0]},e),!this._pagerIsControlled())){const n=Fi()(i,"total",t.length),{currentPage:r,pageSize:s}=e,a=Math.ceil(n/s);e.total=n,r>a&&(e.currentPage=1)}return e}setAdapterPageData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pagination:t,dataSource:i,disabledRowKeys:n,allRowKeys:r,groups:s}=e;this._adapter.setDisabledRowKeys(n),this._adapter.setAllRowKeys(r),this._adapter.setPagination(t),this._adapter.setGroups(s),this._adapter.setDataSource(i)}destroy(){}setAllDisabledRowKeys(e){this._adapter.setAllDisabledRowKeys(e)}handleClick(e){}handleMouseEnter(e){}handleMouseLeave(e){}stopPropagation(e){this._adapter.stopPropagation(e)}_addNoDuplicatedItemsToArr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const r of i)if(Array.isArray(r))for(const t of r)e.includes(t)||e.push(t);return e}_notifyChange(e,t,i,n){e=null==e?this._getPagination():e,t=null==t?this._getAllFilters():t,i=null==i?this._getAllSorters()[0]:i,Fi()(this.getProp("scroll"),"scrollToFirstRowOnChange")&&this._adapter.resetScrollY(),this._adapter.notifyChange({pagination:Object.assign({},e),filters:[...t],sorter:i,extra:Object.assign({},n)})}_rowExpansionIsControlled(){return Array.isArray(this.getProp("expandedRowKeys"))}_pagerIsControlled(){return null!=Fi()(this.getProp("pagination"),"currentPage")}_selectionIsControlled(){return Array.isArray(Fi()(this.getProp("rowSelection"),"selectedRowKeys"))}_sorterIsControlled(e){const t=e&&this.getQuery(e,this.getState("flattenColumns"));return Boolean(t&&null!=t.sortOrder)}_filterIsControlled(e){const t=e&&this.getQuery(e,this.getState("flattenColumns"));return Boolean(t&&Array.isArray(t.filteredValue))}_filterShowIsControlled(e){const t=e&&this.getQuery(e,this.getState("flattenColumns"));return Boolean(t&&(!0===t.filterDropdownVisible||!1===t.filterDropdownVisible))}_getSelectedRowKeys(){const e=this.getState("rowSelection");return[...Fi()(e,"selectedRowKeys",[])]}_getSelectedRowKeysSet(){const e=this.getState("rowSelection");return Fi()(e,"selectedRowKeysSet",new Set)}_getDataSource(){return this.getProp("dataSource")||[]}_getRecord(e){return ol()(this.getProp("dataSource"),(t=>null!=e&&""!==e&&this.getRecordKey(t)===e))}_getRecordChildren(e){return Fi()(e,this.getProp("childrenRecordName"))}_getPagination(){return this.getState("pagination")||{}}_getAllFilters(e){e=e||this.getState("queries");const t=[];return Ag()(e,(e=>{Array.isArray(e.filteredValue)&&(e.filteredValue.length||this._filterIsControlled(e.dataIndex))&&t.push(e)})),t}_getAllSorters(e){return e=e||this.getState("queries"),Ig()(e,(e=>e.sorter&&e.sortOrder))}_filterQueries(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["dataIndex"];t=null==t?this.getState("queries"):t;const n=[],r=[];return Ag()(t,((t,s)=>{Pg()(i,(i=>i&&null!=e[i]&&e[i]===t[i]))&&(n.push(t),r.push(s))})),{filteredQueries:n,filteredIndexes:r}}_mergeToQueries(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["dataIndex"];t=null==t?this.getState("queries"):t,t=[...t],e=Object.assign({},e);const{filteredQueries:n,filteredIndexes:r}=this._filterQueries(e,t,i);return Ag()(n,((i,n)=>{t[r[n]]=Object.assign({},e)})),t}getRecordKey(e){if(!e)return;const t=this.getProp("rowKey");return"function"===typeof t?t(e):Fi()(e,t)}isEmpty(e){return e=null==e?this.getProp("dataSource"):e,!(Array.isArray(e)&&e.length>0)}handleSelectRow(e,t,i){if(this.stopPropagation(i),"boolean"===typeof t&&null!=e){const n=this._getSelectedRowKeys();let r=-1;const s=this.getSelectedRows(null,[e])[0];let a;(r=n.indexOf(e))>-1&&!1===t?(n.splice(r,1),a=this.getSelectedRows(null,n),this._selectionIsControlled()||this._adapter.setSelectedRowKeys(n),this._adapter.notifySelect(s,t,a,i),this._adapter.notifySelectionChange(n,a)):-1===n.indexOf(e)&&!0===t&&(n.push(e),a=this.getSelectedRows(null,n),this._selectionIsControlled()||this._adapter.setSelectedRowKeys(n),this._adapter.notifySelect(s,t,a,i),this._adapter.notifySelectionChange(n,a))}}handleSelectAllRow(e,t){if(this.stopPropagation(t),"boolean"===typeof e){const i=this._getSelectedRowKeys();let n=[...i];const r=this._getSelectedRowKeysSet();let s=[...this._adapter.getCachedFilteredSortedRowKeys()];const a=this._adapter.getAllDisabledRowKeys(),o=this._adapter.getAllDisabledRowKeysSet();let l;if(e){for(const e of s)o.has(e)||r.has(e)||n.push(e);s=yf(s,[...a,...i]),l=[...s]}else n=yf(n,s),l=[...i];const c=this.getSelectedRows(null,l||[]),h=this.getSelectedRows(null,n||[]);this._selectionIsControlled()||this._adapter.setSelectedRowKeys(n),this._adapter.notifySelectAll(e,h,c,t),this._adapter.notifySelectionChange(n,h)}}getSelectedRows(e,t,i){e=null==e?this._getDataSource():e,t=null==t?this._getSelectedRowKeys():t,mo()(i)||(i=new Set(t));const n=this.getProp("childrenRecordName"),r=[];if(mo()(i)&&i.size&&Array.isArray(e)&&e.length&&(r.push(...e.filter((e=>i.has(this.getRecordKey(e))))),r.length<t.length))for(const s of e){const e=Fi()(s,n);if(Array.isArray(e)&&e.length){const n=this.getSelectedRows(e,t,i);r.push(...n)}}return r}getAllDisabledRowKeys(e,t){e=null==e?this._getDataSource():e,t=null==t?Fi()(this.getProp("rowSelection"),"getCheckboxProps"):t;const i=this.getProp("childrenRecordName"),n=[];if(Array.isArray(e)&&e.length&&"function"===typeof t)for(const r of e){const e=t(r);e&&e.disabled&&n.push(this.getRecordKey(r));const s=Fi()(r,i);if(Array.isArray(s)&&s.length){const e=this.getAllDisabledRowKeys(s,t);n.push(...e)}}return n}getAllRowKeys(e){e=null==e?this._getDataSource():e;const t=this.getProp("childrenRecordName"),i=[];if(Array.isArray(e)&&e.length)for(const n of e){const e=[],r=Fi()(n,t);Array.isArray(r)&&r.length&&e.push(...this.getAllRowKeys(r)),i.push(this.getRecordKey(n),...e)}return i}hasRowSelected(e,t){return Boolean(Array.isArray(e)&&e.length&&mo()(t)&&t.size&&e.filter((e=>t.has(e))).length)}handleRowExpanded(e,t,i){this.stopPropagation(i);const n=[...this.getState("expandedRowKeys")],r=n.indexOf(t),s="string"===typeof t||"number"===typeof t;s&&e&&-1===r?n.push(t):s&&!e&&r>-1&&n.splice(r,1),this._rowExpansionIsControlled()||this._adapter.setExpandedRowKeys(n);const a=this.getSelectedRows(null,n);let o=this.getSelectedRows(null,[t])[0];const l=this._getGroups();if(l){l.has(t)&&(o={groupKey:t});for(let e=0,i=n.length;e<i;e++)l.has(t)&&a.push({groupKey:n[e]})}this._adapter.notifyExpand(e,o,i),this._adapter.notifyExpandedRowsChange(a)}_getGroups(){if(null!==this._adapter.getProp("groupBy")){return this._adapter.getState("groups")}return null}allIsSelected(e,t,i){const n=Ig()(i,(e=>null!=e&&!t.has(e)));if(n&&n.length){for(const t of n)if(null!=t&&!e.has(t))return!1;return!0}return i.length&&i.every((t=>e.has(t)))||!1}allIsNotSelected(e,t){for(const i of t)if(null!=i&&Array.isArray(e)&&e.includes(i))return!0;return!1}formatPaginationInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="";const n=Fi()(this.getProp("pagination"),"formatPageText"),{total:r,pageSize:s,currentPage:a}=e,o=Math.min((a-1)*s+1,r),l=Math.min(a*s,r);return(n||!1!==n&&t&&r>0)&&(i="function"===typeof n?n({currentStart:o,currentEnd:l,total:r}):t.replace("${currentStart}",o).replace("${currentEnd}",l).replace("${total}",r)),i}toggleShowFilter(e,t){let i=this.getQuery(e);const n=t;i=Object.assign(Object.assign({},i),{filterDropdownVisible:n}),this._filterShowIsControlled(),this._adapter.notifyFilterDropdownVisibleChange(n,e)}handleFilterSelect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getQuery(e),n=[...this._adapter.getState("queries")];const{filteredValue:r}=t;i=Object.assign(Object.assign({},i),{filteredValue:r}),n=rf(i,n);const s=this._mergeToQueries(i,null),a=this._getAllFilters(s);this._filterIsControlled(e)||(this._adapter.setQueries(n),this.handleClickFilterOrSorter(n)),this._notifyChange(null,a)}handleSort(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.stopPropagation(t);const{dataIndex:i}=e;let n=this.getState("queries"),r=null;n=[...n],Ag()(n,((e,t,n)=>{if(e.sorter){const s=Object.assign({},e),a=Fi()(s,"sortOrder"),o=Fi()(s,"defaultSortOrder",!1);let l=this.isSortOrderValid(a)?a:o;l=!(!i||i!==s.dataIndex)&&(l===jg.SORT_DIRECTIONS[0]?jg.SORT_DIRECTIONS[1]:l!==jg.SORT_DIRECTIONS[1]&&jg.SORT_DIRECTIONS[0]),n[t]=Object.assign(Object.assign({},s),{sortOrder:l}),i===s.dataIndex&&(r=n[t])}})),this._sorterIsControlled(i)||(this._adapter.setQueries(n),this.handleClickFilterOrSorter(n)),this._notifyChange(null,null,r,null)}handleClickFilterOrSorter(e){const t=[...this.getProp("dataSource")],i=this.getFilteredSortedDataSource(t,e),n=this.getAllDisabledRowKeys(i);this.setCachedFilteredSortedDataSource(i),this.setAllDisabledRowKeys(n);const r=this.getCurrentPageData(i);this.setAdapterPageData(r)}getQuery(e,t){if(t=t||this.getState("queries"),null!=e)return ol()(t,(t=>t.dataIndex===e))}getCellWidths(e,t,i){return this._adapter.getCellWidths(e,t,i)}setHeadWidths(e,t){return this._adapter.setHeadWidths(e,t)}getHeadWidths(e){return this._adapter.getHeadWidths(e)}mergedRowExpandable(e){return this._adapter.mergedRowExpandable(e)}setBodyHasScrollbar(e){this._adapter.setBodyHasScrollbar(e)}}const _f=bf,xf={align:c().oneOf(jg.ALIGNS),className:c().string,colSpan:c().number,dataIndex:c().string,defaultSortOrder:c().oneOf(jg.SORT_DIRECTIONS),filterChildrenRecord:c().bool,filterDropdownProps:c().object,filterDropdown:c().node,filterDropdownVisible:c().bool,filterIcon:c().func,filterMultiple:c().bool,filteredValue:c().arrayOf(c().any),filters:c().array,fixed:c().oneOf(jg.FIXED_SET),onCell:c().func,onFilter:c().func,onFilterDropdownVisibleChange:c().func,onHeaderCell:c().func,onSorterChange:c().func,render:c().func,renderFilterDropdownItem:c().func,sortChildrenRecord:c().bool,sortDirections:c().arrayOf(c().string),sortOrder:c().oneOfType([c().bool,c().string]),sorter:c().oneOfType([c().bool,c().func]),title:c().oneOfType([c().func,c().node]),useFullRender:c().bool,width:c().oneOfType([c().number,c().string])};class Sf extends o.PureComponent{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}render(){return null}}function wf(e){if(e){const t=[];return o.Children.forEach(e,(e=>{if(o.isValidElement(e)&&(e.type===Sf||"Column"===Fi()(e,"type.elementType"))){const i=Ue()(e.props,["children"]);Array.isArray(e.props.children)&&e.props.children.length&&(i.children=wf(e.props.children)),t.push(Object.assign({key:e.key},i))}})),t}return[]}Sf.propTypes=Object.assign({},xf),Sf.elementType="Column";const Cf=o.createContext({headWidths:[],setHeadWidths:r(),handleRowExpanded:r()}),kf=e=>{let{children:t,anyColumnFixed:i,flattenedColumns:n,tableWidth:r,headWidths:s,setHeadWidths:a,getHeadWidths:l,getCellWidths:c,handleRowExpanded:h,renderExpandIcon:d,renderSelection:u,getVirtualizedListRef:p,setBodyHasScrollbar:g,direction:f}=e;const m=(0,o.useMemo)((()=>({anyColumnFixed:i,flattenedColumns:n,renderExpandIcon:d,renderSelection:u,setHeadWidths:a,getHeadWidths:l,getCellWidths:c,headWidths:s,tableWidth:r,handleRowExpanded:h,getVirtualizedListRef:p,setBodyHasScrollbar:g,direction:f})),[i,n,d,u,a,l,c,s,r,h,p,g,f]);return o.createElement(Cf.Provider,{value:m},t)};class Af extends k.A{handleChange(e){const t=e.target.checked;this._adapter.notifyChange(t,e)}}class Ef extends M.A{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifyChange:function(){return e.props.onChange(...arguments)}})}constructor(e){super(e),this.handleChange=e=>this.foundation.handleChange(e),this.foundation=new Af(this.adapter)}render(){const{selected:e,getCheckboxProps:t,indeterminate:i,disabled:n,prefixCls:r,className:s}=this.props,a=this.props["aria-label"];let l={onChange:this.handleChange,disabled:n,indeterminate:i,checked:e};"function"===typeof t&&(l=Object.assign(Object.assign({},l),t()));const c=d()("".concat(r,"-selection-wrap"),{["".concat(r,"-selection-disabled")]:n},s);return o.createElement("span",{className:c},o.createElement(wi,Object.assign({"aria-label":a},l)))}}Ef.propTypes={columnTitle:c().string,getCheckboxProps:c().func,type:c().string,onChange:c().func,selected:c().bool,disabled:c().bool,indeterminate:c().bool,prefixCls:c().string,className:c().string,"aria-label":c().string},Ef.defaultProps={disabled:!1,onChange:r(),prefixCls:Lg.PREFIX};const Tf={PREFIX:"".concat(p._,"-page")},Of={PAGE_SHOW_MAX:7,REST_PAGE_SHOW_MAX:5,DEFAULT_PAGE_SIZE:10,PAGE_SIZE_OPTION:[10,20,40,100],REST_PAGE_MAX_SIZE:1e6};class Pf extends k.A{constructor(e){super(Object.assign({},e))}init(){const{currentPage:e,total:t,pageSize:i}=this.getStates();this._updateDisabled({currentPage:e,total:t,pageSize:i}),this._updatePageList({currentPage:e,total:t,pageSize:i}),this._registerEventHandler()}destroy(){this._unregisterEventHandler()}_registerEventHandler(){this._adapter.registerKeyDownHandler(this.handleKeyDown)}_unregisterEventHandler(){this._adapter.unregisterKeyDownHandler(this.handleKeyDown)}_updateDisabled(e){const{currentPage:t,total:i,pageSize:n}=e,r=this._getTotalPageNumber(i,n);let s=!1,a=!1;1===t?(s=!0,a=r<2):t===r&&(s=!1,a=!0),this._adapter.setDisabled(s,a)}goPage(e){if("..."===e)return;const{pageSize:t,currentPage:i}=this.getStates(),n=this._isInProps("currentPage");e!==i&&(n?(this._adapter.notifyPageChange(e),this._adapter.notifyChange(e,t)):(this.updatePage(e),this._adapter.notifyPageChange(e),this._adapter.notifyChange(e,t)))}updatePage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;null!==t&&"undefined"!==typeof t||(t=this.getState("total")),null!==i&&"undefined"!==typeof i||(i=this.getState("pageSize")),this._updateDisabled({currentPage:e,total:t,pageSize:i}),this._updatePageList({currentPage:e,total:t,pageSize:i}),this._adapter.updateTotal(t),this._adapter.setCurrentPage(e),this._adapter.updatePageSize(i)}updateAllPageNumbers(e,t){const{size:i,hoverShowPageSelect:n,disabled:r}=this.getProps();if("small"===i&&n&&!r){const i=Array.from({length:Math.ceil(e/t)},((e,t)=>t+1));this._adapter.updateAllPageNumbers(i)}}goPrev(){const{currentPage:e}=this.getStates();e>1&&this.goPage(e-1)}goNext(){const{currentPage:e,total:t,pageSize:i}=this.getStates();e<=this._getTotalPageNumber(t,i)-1&&this.goPage(e+1)}_updatePageList(e){const{currentPage:t,total:i,pageSize:n}=e;let r=[],s=[],a=[];const o=this._getTotalPageNumber(i,n),{PAGE_SHOW_MAX:l,REST_PAGE_MAX_SIZE:c}=Of;if(o<=l)r=Array.from({length:o},((e,t)=>t+1)),s=[],a=[];else switch(!0){case t<4:r=[1,2,3,4,"...",o-1,o],a=Array.from({length:Math.min(o-6,c)},((e,t)=>t+5)),s=[];break;case 4===t:r=[1,2,3,4,5,"...",o],a=Array.from({length:Math.min(o-6,c)},((e,t)=>t+6)),s=[];break;case 4<t&&t<o-3:const e=Array.from({length:3},((e,i)=>t+(i-1)));r=[1].concat("...",e,"...",o),a=Array.from({length:Math.min(o-t-2,c)},((e,i)=>t+i+2)),s=Array.from({length:Math.min(t-3,c)},((e,t)=>t+2));break;case t-3<=t&&t<=o:const i=Array.from({length:5},((e,t)=>o-(4-t)));r=[1,"..."].concat(i),a=[],s=Array.from({length:Math.min(i[0]-2,c)},((e,t)=>t+2))}this._adapter.setPageList({pageList:r,restLeftPageList:s,restRightPageList:a})}changePageSize(e){const{pageSize:t}=this.getStates();this._adapter.updatePageSize(e),this._adapter.notifyPageSizeChange(e);const{total:i,currentPage:n}=this.getStates(),r=(n-1)*t+1,s=Math.ceil(r/e);this.updatePage(s,i,e),n!==s&&this._adapter.notifyPageChange(s),this._adapter.notifyChange(s,e)}handleKeyDown(){}pageSizeInOpts(){const{pageSizeOpts:e}=this.getProps(),{pageSize:t}=this.getStates(),i=[...e];if(-1===i.indexOf(t)){const e=i.findIndex((e=>e>t));i.splice(e,0,t)}return i}handleQuickJumpNumberChange(e){this._adapter.updateQuickJumpPage(e)}_handleQuickJump(e){let t=Number(e);const{pageSize:i,total:n}=this.getStates(),r=this._getTotalPageNumber(n,i);Number.isNaN(t)||(t>r&&(t=r),t<=0&&(t=1),this._adapter.updateQuickJumpPage(""),this.goPage(t))}handleQuickJumpBlur(){const{quickJumpPage:e}=this.getStates();("string"===typeof e&&e||"number"===typeof e)&&this._handleQuickJump(e)}handleQuickJumpEnterPress(e){this._handleQuickJump(e)}_getTotalPageNumber(e,t){return Math.ceil(e/t)}}const Mf=Pf;var If=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Rf=Tf.PREFIX,{Option:Df}=ig;class Lf extends M.A{constructor(e){super(e);const t=e.total,i=e.pageSize||e.pageSizeOpts[0]||Of.DEFAULT_PAGE_SIZE,n="small"===e.size&&e.hoverShowPageSelect&&!e.disabled;this.state={total:t,showTotal:e.showTotal,currentPage:e.currentPage||e.defaultCurrentPage,pageSize:i,pageList:[],prevDisabled:!1,nextDisabled:!1,restLeftPageList:[],restRightPageList:[],quickJumpPage:"",allPageNumbers:n?Array.from({length:Math.ceil(t/i)},((e,t)=>t+1)):[]},this.foundation=new Mf(this.adapter),this.renderDefaultPage=this.renderDefaultPage.bind(this),this.renderSmallPage=this.renderSmallPage.bind(this),(0,A.A)(Boolean(e.showSizeChanger&&e.hideOnSinglePage),"[Semi Pagination] You should not use showSizeChanger and hideOnSinglePage in ths same time. At this time, hideOnSinglePage no longer takes effect, otherwise there may be a problem that the switch entry disappears")}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPageList:e=>{const{pageList:t,restLeftPageList:i,restRightPageList:n}=e;this.setState({pageList:t,restLeftPageList:i,restRightPageList:n})},setDisabled:(e,t)=>{this.setState({prevDisabled:e,nextDisabled:t})},updateTotal:e=>this.setState({total:e}),updatePageSize:e=>this.setState({pageSize:e}),updateQuickJumpPage:e=>this.setState({quickJumpPage:e}),updateAllPageNumbers:e=>this.setState({allPageNumbers:e}),setCurrentPage:e=>{this.setState({currentPage:e})},registerKeyDownHandler:e=>{document.addEventListener("keydown",e)},unregisterKeyDownHandler:e=>{document.removeEventListener("keydown",e)},notifyPageChange:e=>{this.props.onPageChange(e)},notifyPageSizeChange:e=>{this.props.onPageSizeChange(e)},notifyChange:(e,t)=>{this.props.onChange(e,t)}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e){const t={currentPage:this.props.currentPage,total:this.props.total,pageSize:this.props.pageSize};let i=!1,n=!1;e.currentPage!==this.props.currentPage&&(i=!0),e.total!==this.props.total&&(i=!0,n=!0),e.pageSize!==this.props.pageSize&&(i=!0,n=!0),i&&this.foundation.updatePage(t.currentPage,t.total,t.pageSize),n&&this.foundation.updateAllPageNumbers(t.total,t.pageSize)}renderPrevBtn(){const{prevText:e,disabled:t}=this.props,{prevDisabled:i}=this.state,n=i||t,r=d()({["".concat(Rf,"-item")]:!0,["".concat(Rf,"-prev")]:!0,["".concat(Rf,"-item-disabled")]:n});return o.createElement("li",{role:"button","aria-disabled":!!n,"aria-label":"Previous",onClick:e=>!n&&this.foundation.goPrev(e),className:r,"x-semi-prop":"prevText"},e||o.createElement(Lo,{size:"large"}))}renderNextBtn(){const{nextText:e,disabled:t}=this.props,{nextDisabled:i}=this.state,n=i||t,r=d()({["".concat(Rf,"-item")]:!0,["".concat(Rf,"-item-disabled")]:n,["".concat(Rf,"-next")]:!0});return o.createElement("li",{role:"button","aria-disabled":!!n,"aria-label":"Next",onClick:e=>!n&&this.foundation.goNext(e),className:r,"x-semi-prop":"nextText"},e||o.createElement(jo,{size:"large"}))}renderPageSizeSwitch(e){const{direction:t}=this.context,i="rtl"===t?"bottomRight":"bottomLeft",{showSizeChanger:n,popoverPosition:r=i,disabled:s,popoverZIndex:a}=this.props,{pageSize:l}=this.state,c=d()("".concat(Rf,"-switch"));if(!n)return null;const h=this.foundation.pageSizeInOpts(),u=e.pageSize,p=h.map((e=>o.createElement(Df,{value:e,key:e},o.createElement("span",null,u.replace("${pageSize}",e.toString())))));return o.createElement("div",{className:c},o.createElement(ig,{"aria-label":"Page size selector",disabled:s,onChange:e=>this.foundation.changePageSize(e),value:l,key:l,position:r||"bottomRight",clickToHide:!0,zIndex:a,dropdownClassName:"".concat(Rf,"-select-dropdown")},p))}renderQuickJump(e){const{showQuickJumper:t,disabled:i}=this.props,{quickJumpPage:n,total:r,pageSize:s}=this.state;if(!t)return null;const a=1===this.foundation._getTotalPageNumber(r,s)||i,l=d()({["".concat(Rf,"-quickjump")]:!0,["".concat(Rf,"-quickjump-disabled")]:a});return o.createElement("div",{className:l},o.createElement("span",null,e.jumpTo),o.createElement(Vd,{value:n,className:"".concat(Rf,"-quickjump-input-number"),hideButtons:!0,disabled:a,onBlur:e=>this.foundation.handleQuickJumpBlur(),onEnterPress:e=>this.foundation.handleQuickJumpEnterPress(e.target.value),onChange:e=>this.foundation.handleQuickJumpNumberChange(e)}),o.createElement("span",null,e.page))}renderPageList(){const{pageList:e,currentPage:t,restLeftPageList:i,restRightPageList:n}=this.state,{popoverPosition:r,popoverZIndex:s,disabled:a}=this.props;return e.map(((e,l)=>{const c=d()("".concat(Rf,"-item"),{["".concat(Rf,"-item-active")]:t===e,["".concat(Rf,"-item-all-disabled")]:a,["".concat(Rf,"-item-all-disabled-active")]:t===e&&a}),h=o.createElement("li",{key:"".concat(e).concat(l),onClick:()=>!a&&this.foundation.goPage(e,l),className:c,"aria-label":"..."===e?"More":"Page ".concat(e),"aria-current":t===e&&"page"},e);if("..."===e&&!a){let t;return t=l<3?i:n,o.createElement(U.A,{trigger:"hover",content:this.renderRestPageList(t),key:"".concat(e).concat(l),position:r,zIndex:s},h)}return h}))}renderRestPageList(e){const{direction:t}=this.context,i=d()("".concat(Rf,"-rest-item")),n=e.length,r=t=>{const{index:n,style:r}=t,s=e[n];return o.createElement("div",{role:"listitem",key:"".concat(s).concat(n),className:i,onClick:()=>this.foundation.goPage(s,n),style:r,"aria-label":"".concat(s)},s)},s=n>=5?160:32*n;return o.createElement(Up,{className:"".concat(Rf,"-rest-list"),itemData:e,itemSize:32,width:78,itemCount:n,height:s,style:{direction:t}},r)}renderSmallPageSelect(e){const t=this.state.allPageNumbers,i=this.renderRestPageList(t);return o.createElement(U.A,{content:i},e)}renderSmallPage(e){const t=this.props,{className:i,style:n,hideOnSinglePage:r,hoverShowPageSelect:s,showSizeChanger:a,disabled:l}=t,c=If(t,["className","style","hideOnSinglePage","hoverShowPageSelect","showSizeChanger","disabled"]),h=d()("".concat(Rf,"-small"),Rf,i,{["".concat(Rf,"-disabled")]:l}),{currentPage:u,total:p,pageSize:g}=this.state,f=Math.ceil(p/g);if(f<2&&r&&!a)return null;const m=d()({["".concat(Rf,"-item")]:!0,["".concat(Rf,"-item-small")]:!0,["".concat(Rf,"-item-all-disabled")]:l}),v=o.createElement("div",{className:m},u,"/",f," ");return o.createElement("div",Object.assign({className:h,style:n},this.getDataAttr(c)),this.renderPrevBtn(),s&&!l?this.renderSmallPageSelect(v):v,this.renderNextBtn(),this.renderQuickJump(e))}renderDefaultPage(e){const{total:t,pageSize:i}=this.state,n=this.props,{showTotal:r,className:s,style:a,hideOnSinglePage:l,showSizeChanger:c,disabled:h}=n,u=If(n,["showTotal","className","style","hideOnSinglePage","showSizeChanger","disabled"]),p=d()(s,"".concat(Rf),{["".concat(Rf,"-disabled")]:h}),g="".concat(Rf,"-total");if(Math.ceil(t/i)<2&&l&&!c)return null;const f=Math.ceil(t/i),m=e.total.replace("${total}",f.toString());return o.createElement("ul",Object.assign({className:p,style:a},this.getDataAttr(u)),r?o.createElement("span",{className:g},m):null,this.renderPrevBtn(),this.renderPageList(),this.renderNextBtn(),this.renderPageSizeSwitch(e),this.renderQuickJump(e))}render(){const{size:e}=this.props;return o.createElement(pe.A,{componentName:"Pagination"},(t=>"small"===e?this.renderSmallPage(t):this.renderDefaultPage(t)))}}Lf.contextType=en.A,Lf.propTypes={total:c().number,showTotal:c().bool,pageSize:c().number,pageSizeOpts:c().array,size:c().string,currentPage:c().number,defaultCurrentPage:c().number,onPageChange:c().func,onPageSizeChange:c().func,onChange:c().func,prevText:c().node,nextText:c().node,showSizeChanger:c().bool,popoverZIndex:c().number,popoverPosition:c().string,style:c().object,className:c().string,hideOnSinglePage:c().bool,hoverShowPageSelect:c().bool,showQuickJumper:c().bool,disabled:c().bool},Lf.defaultProps={total:1,popoverZIndex:P.nL.DEFAULT_Z_INDEX,showTotal:!1,pageSize:null,pageSizeOpts:Of.PAGE_SIZE_OPTION,defaultCurrentPage:1,size:"default",onPageChange:r(),onPageSizeChange:r(),onChange:r(),showSizeChanger:!1,className:"",hideOnSinglePage:!1,showQuickJumper:!1,disabled:!1};class jf extends o.PureComponent{render(){const{pagination:e,prefixCls:t,info:i,renderPagination:n}=this.props,r=Fi()(e,"total"),s=n&&G()(n)?n(e):null;return o.createElement("div",{className:"".concat(t,"-pagination-outer")},(0,o.isValidElement)(s)?s:o.createElement(o.Fragment,null,o.createElement("span",{className:"".concat(t,"-pagination-info")},i),o.createElement("span",{className:"".concat(t,"-pagination-wrapper")},r>0?o.createElement(Lf,Object.assign({},e,{key:Fi()(e,"pageSize","pagination")})):null)))}}jf.propTypes={style:c().object,prefixCls:c().string,pagination:c().object,info:c().oneOfType([c().string,c().node]),renderPagination:c().func},jf.defaultProps={prefixCls:Lg.PREFIX};const Ff=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.0929 2.57912C1.25675 2.22596 1.61069 2 2.00001 2H22C22.3893 2 22.7433 2.22596 22.9071 2.57912C23.071 2.93229 23.015 3.34845 22.7636 3.64573L14.5654 12.8261V21C14.5654 21.3466 14.386 21.6684 14.0911 21.8507C13.7963 22.0329 13.4282 22.0494 13.1182 21.8944L10.0528 19.8944C9.71401 19.725 9.5 19.3788 9.5 19V12.8261L1.23644 3.64573C0.985045 3.34845 0.929036 2.93229 1.0929 2.57912Z",fill:"currentColor"}))}),"filter");class Bf extends k.A{constructor(){super(...arguments),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(i){(0,A.A)(!0,"Warning: [Semi Radio] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){const{children:e,extra:t,extraId:i,addonId:n}=this._adapter.getProps();e&&!n&&this._adapter.setAddonId(),t&&!i&&this._adapter.setExtraId()}setHover(e){this._adapter.setHover(e)}setChecked(e){this._adapter.setChecked(e)}}const Nf={PREFIX:"".concat(p._,"-radio"),INNER:"".concat(p._,"-radio-inner"),TEXT:"".concat(p._,"-radio-text"),INPUT:"".concat(p._,"-radio-input"),CHECKED:"".concat(p._,"-radio-checked"),DISABLED:"".concat(p._,"-radio-disabled"),BUTTON:"".concat(p._,"-radio-button")},zf={PREFIX:"".concat(p._,"-radioGroup"),INNER:"".concat(p._,"-radioGroup-inner"),TEXT:"".concat(p._,"-radioGroup-text"),INPUT:"".concat(p._,"-radioGroup-input"),CHECKED:"".concat(p._,"-radioGroup-checked"),DISABLED:"".concat(p._,"-radioGroup-disabled")},Hf=["horizontal","vertical"],Vf="horizontal",Uf=["advanced",""],Wf="default",Gf="button",Kf="card",Yf="pureCard",Xf=["middle","small","large"];class qf extends k.A{constructor(e){super(Object.assign({},e))}init(){const e=this._adapter.getProp("checked"),t=this._adapter.getProp("defaultChecked");this.setChecked(e||t)}setChecked(e){this._adapter.setNativeControlChecked(e)}getChecked(){return this._adapter.getProp("checked")}handleChange(e){const t="checked"in this.getProps(),{checked:i}=e.target,n={target:Object.assign(Object.assign({},this.getProps()),{checked:i}),stopPropagation:()=>{e.stopPropagation()},preventDefault:()=>{e.preventDefault()}};t||this.setChecked(i),this._adapter.notifyChange(n)}destroy(){}}const Zf=o.createContext(null);const Qf=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("circle",{cx:12,cy:12,r:5,fill:"currentColor"}))}),"radio");class $f extends M.A{constructor(e){super(e),this.state={checked:!1},this.foundation=new qf(this.adapter),this.onChange=this.onChange.bind(this)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{this.props.onChange(e)}})}componentDidMount(){this.foundation.init()}componentDidUpdate(e){e.checked!==this.props.checked&&this.foundation.setChecked(this.props.checked)}componentWillUnmount(){this.foundation.destroy()}blur(){this.inputEntity.blur()}focus(){const{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}onChange(e){this.foundation.handleChange(e)}render(){const{disabled:e,mode:t,autoFocus:i,name:n,isButtonRadio:r,isPureCardRadioGroup:s,addonId:a,extraId:l,"aria-label":c,focusInner:h,onInputFocus:u,onInputBlur:p}=this.props,{checked:g}=this.state,f=this.props.prefixCls||Nf.PREFIX,m=d()({["".concat(f,"-inner")]:!0,["".concat(f,"-inner-checked")]:Boolean(g),["".concat(f,"-inner-buttonRadio")]:r,["".concat(f,"-inner-pureCardRadio")]:s}),v=d()({["".concat(f,"-focus")]:h,["".concat(f,"-focus-border")]:h&&!g,["".concat(f,"-inner-display")]:!r});return o.createElement("span",{className:m},o.createElement("input",{ref:e=>{this.inputEntity=e},autoFocus:i,type:"advanced"===t?"checkbox":"radio",checked:Boolean(g),disabled:e,onChange:this.onChange,name:n,"aria-label":c,"aria-labelledby":a,"aria-describedby":l,onFocus:u,onBlur:p}),o.createElement("span",{className:v},g?o.createElement(Qf,null):null))}}$f.contextType=Zf,$f.propTypes={checked:c().bool,disabled:c().bool,isButtonRadio:c().bool,onChange:c().func,mode:c().oneOf(["advanced",""]),"aria-label":c().string,focusInner:c().bool,onInputFocus:c().func,onInputBlur:c().func,preventScroll:c().bool},$f.defaultProps={onChange:r(),isButtonRadio:!1};const Jf=$f;var em=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class tm extends M.A{constructor(e){super(e),this.onChange=e=>{const{onChange:t}=this.props;if(this.isInGroup()){const{radioGroup:t}=this.context;t.onChange&&t.onChange(e)}!("checked"in this.props)&&this.foundation.setChecked(e.target.checked),t&&t(e)},this.handleMouseEnter=e=>{this.props.onMouseEnter(e),this.foundation.setHover(!0)},this.handleMouseLeave=e=>{this.props.onMouseLeave(e),this.foundation.setHover(!1)},this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.state={hover:!1,addonId:e.addonId,extraId:e.extraId,checked:e.checked||e.defaultChecked||!1},this.foundation=new Bf(this.adapter),this.radioEntity=null}componentDidUpdate(e){this.props.checked!==e.checked&&(_()(this.props.checked)?this.foundation.setChecked(!1):ai()(this.props.checked)&&this.foundation.setChecked(this.props.checked))}get adapter(){return Object.assign(Object.assign({},super.adapter),{setHover:e=>{this.setState({hover:e})},setAddonId:()=>{this.setState({addonId:(0,Ie.Ae)({prefix:"addon"})})},setChecked:e=>{this.setState({checked:e})},setExtraId:()=>{this.setState({extraId:(0,Ie.Ae)({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})}})}isInGroup(){return this.context&&this.context.radioGroup}focus(){this.radioEntity.focus()}blur(){this.radioEntity.blur()}render(){const e=this.props,{addonClassName:t,addonStyle:i,disabled:n,style:r,className:s,prefixCls:a,displayMode:l,children:c,extra:h,mode:u,type:p,value:g,name:f}=e,m=em(e,["addonClassName","addonStyle","disabled","style","className","prefixCls","displayMode","children","extra","mode","type","value","name"]);let v,y,b,_,x,S,w,C,k;const{hover:A,addonId:E,extraId:T,focusVisible:O,checked:P}=this.state,M={checked:P,disabled:n};this.isInGroup()?(v=this.context.radioGroup.value===g,y=n||this.context.radioGroup.disabled,b=this.context.mode,_=this.context.radioGroup.isButtonRadio,x=this.context.radioGroup.isCardRadio,S=this.context.radioGroup.isPureCardRadio,C=this.context.radioGroup.buttonSize,k=a||this.context.radioGroup.prefixCls,M.checked=v,M.disabled=y):(v=P,y=n,b=u,w="button"===p,k=a,_=p===Gf,S=p===Yf,x=p===Kf||S);const I="undefined"===typeof _?w:_,R=k||Nf.PREFIX,D=x||S||I,L=d()(R,{["".concat(R,"-disabled")]:y,["".concat(R,"-checked")]:v,["".concat(R,"-").concat(l)]:Boolean(l),["".concat(R,"-buttonRadioComponent")]:w,["".concat(R,"-buttonRadioGroup")]:_,["".concat(R,"-buttonRadioGroup-").concat(C)]:_&&C,["".concat(R,"-cardRadioGroup")]:x,["".concat(R,"-cardRadioGroup_disabled")]:y&&x,["".concat(R,"-cardRadioGroup_checked")]:x&&v&&!y,["".concat(R,"-cardRadioGroup_checked_disabled")]:x&&v&&y,["".concat(R,"-cardRadioGroup_hover")]:x&&!v&&A&&!y,[s]:Boolean(s),["".concat(R,"-focus")]:O&&(x||S)}),j=this.isInGroup()&&this.context.radioGroup.name,F=d()({["".concat(R,"-addon")]:!I,["".concat(R,"-addon-buttonRadio")]:I,["".concat(R,"-addon-buttonRadio-checked")]:I&&v,["".concat(R,"-addon-buttonRadio-disabled")]:I&&y,["".concat(R,"-addon-buttonRadio-hover")]:I&&!v&&!y&&A,["".concat(R,"-addon-buttonRadio-").concat(C)]:I&&C,["".concat(R,"-focus")]:O&&I},t);return o.createElement("label",Object.assign({style:r,className:L,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.getDataAttr(m)),o.createElement(Jf,Object.assign({},this.props,M,{mode:b,name:null!==f&&void 0!==f?f:j,isButtonRadio:I,isPureCardRadioGroup:S,onChange:this.onChange,ref:e=>{this.radioEntity=e},addonId:c&&E,extraId:h&&T,focusInner:O&&!D,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),c||h?o.createElement("div",{className:d()(["".concat(R,"-content"),{["".concat(R,"-isCardRadioGroup_content")]:x}])},c?o.createElement("span",{className:F,style:i,id:E,"x-semi-prop":"children"},c):null,h&&!I?o.createElement("div",{className:"".concat(R,"-extra"),id:T,"x-semi-prop":"extra"},h):null):null)}}tm.contextType=Zf,tm.propTypes={autoFocus:c().bool,checked:c().bool,defaultChecked:c().bool,value:c().any,style:c().object,className:c().string,disabled:c().bool,prefixCls:c().string,displayMode:c().oneOf(["vertical",""]),onChange:c().func,onMouseEnter:c().func,onMouseLeave:c().func,mode:c().oneOf(Uf),extra:c().node,addonStyle:c().object,addonClassName:c().string,type:c().oneOf([Wf,Gf,Kf,Yf]),"aria-label":c().string,preventScroll:c().bool},tm.defaultProps={autoFocus:!1,defaultChecked:!1,value:void 0,style:void 0,onMouseEnter:r(),onMouseLeave:r(),mode:"",type:"default"},tm.elementType="Radio";const im=tm;function nm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{filterMultiple:n=!0,filters:s=[],filteredValue:a=[],filterDropdownVisible:l,onSelect:c=r(),onFilterDropdownVisibleChange:h=r(),trigger:d="click",position:u="bottom",renderFilterDropdown:p,renderFilterDropdownItem:g}=null!==e&&void 0!==e?e:{},f=qi()(e,["tempFilteredValue","setTempFilteredValue","confirm","clear","close","filters"]),m="function"===typeof p?p(f):o.createElement(Bh.Menu,null,Array.isArray(s)&&s.map(((t,r)=>{const s=e=>{const i=e&&e.nativeEvent;i&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault());let r=[...a];const s=r.includes(t.value),o=r.indexOf(t.value);return o>-1?r.splice(o,1):n?r.push(t.value):r=[t.value],c({value:t.value,filteredValue:r,included:!s,domEvent:i})},l=a.includes(t.value),{text:h}=t,{value:d}=t,u="".concat(i,"_").concat(r),p="function"===typeof g?g({onChange:s,filterMultiple:n,value:d,text:h,checked:l,filteredValue:a,level:i}):null;let f=p&&o.isValidElement(p)?o.cloneElement(p,{key:u}):o.createElement(Bh.Item,{key:u,onClick:s},n?o.createElement(wi,{checked:l},h):o.createElement(im,{checked:l},h));if(Array.isArray(t.children)&&t.children.length){const n=Object.assign(Object.assign({},e),{filters:t.children,trigger:"hover",position:"right"});delete n.filterDropdownVisible,f=nm(n,f,i+1)}return f}))),v=Object.assign(Object.assign({},e),{onVisibleChange:e=>h(e),trigger:d,position:u,render:m});return null!=l&&(v.visible=l),o.createElement(Bh,Object.assign({},v,{key:"Dropdown_level_".concat(i),className:"".concat(Lg.PREFIX,"-column-filter-dropdown")}),t)}function rm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{prefixCls:t=Lg.PREFIX,filteredValue:i,filterIcon:n="filter",filterDropdownProps:r,onSelect:s,filterDropdownVisible:l,renderFilterDropdown:c,onFilterDropdownVisibleChange:h}=e;let{filterDropdown:u=null}=e;const p="undefined"!==typeof l,g=!p&&"function"===typeof c,[f,m]=(0,o.useState)(i),v=!g&&l,[y,b]=(0,o.useState)(v);(0,o.useEffect)((()=>{"undefined"!==typeof l&&b(l)}),[l]),(0,o.useEffect)((()=>{m(i)}),[i]);const _={tempFilteredValue:f,setTempFilteredValue:m,confirm:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(null===e||void 0===e?void 0:e.filteredValue)||f;a()(t,i)||s({filteredValue:t}),e.closeDropdown&&b(!1)},clear:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m([]),s({filteredValue:[]}),e.closeDropdown&&b(!1)},close:()=>{b(!1)}},x=d()("".concat(t,"-column-filter"),{on:Array.isArray(i)&&i.length});let S;S="function"===typeof n?n(Array.isArray(i)&&i.length>0):(0,o.isValidElement)(n)?n:o.createElement("div",{className:x},"\u200b",o.createElement(Ff,{role:"button","aria-label":"Filter data with this column","aria-haspopup":"listbox",tabIndex:-1,size:"default"}));const w=Object.assign(Object.assign(Object.assign(Object.assign({},e),r),_),{filterDropdownVisible:p?l:y,onFilterDropdownVisibleChange:e=>{g&&b(e),h(e)}});return u=o.isValidElement(u)?u:nm(w,S),u}const sm=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M6.45096 8.34102L11.247 2.86102C11.3408 2.75361 11.4566 2.66753 11.5865 2.60854C11.7163 2.54956 11.8573 2.51904 12 2.51904C12.1426 2.51904 12.2836 2.54956 12.4135 2.60854C12.5433 2.66753 12.6591 2.75361 12.753 2.86102L17.549 8.34102C18.115 8.98802 17.655 10 16.796 10H7.20396C6.34396 10 5.88496 8.98802 6.45096 8.34102Z",fill:"currentColor"}))}),"caretup");const am=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M17.549 15.659L12.753 21.139C12.6591 21.2464 12.5434 21.3325 12.4135 21.3915C12.2836 21.4505 12.1427 21.481 12 21.481C11.8574 21.481 11.7164 21.4505 11.5865 21.3915C11.4566 21.3325 11.3409 21.2464 11.247 21.139L6.45101 15.659C5.88501 15.011 6.34501 14 7.20401 14H16.796C17.656 14 18.115 15.012 17.549 15.659Z",fill:"currentColor"}))}),"caretdown");class om extends o.PureComponent{render(){const{prefixCls:e,onClick:t,sortOrder:i,style:n,title:r,sortIcon:s}=this.props,a="default",l=d()("".concat(e,"-column-sorter-up"),{on:i===jg.SORT_DIRECTIONS[0]}),c=d()("".concat(e,"-column-sorter-down"),{on:i===jg.SORT_DIRECTIONS[1]}),h={"aria-label":"Current sort order is ".concat(i?"".concat(i,"ing"):"none"),"aria-roledescription":"Sort data with this column"};return o.createElement("div",Object.assign({role:"button"},h,{tabIndex:-1,className:"".concat(e,"-column-sorter-wrapper"),onClick:t,onKeyPress:e=>(0,gi.A)(e)&&t(e)}),r,"function"===typeof s?s({sortOrder:i}):o.createElement("div",{style:n,className:"".concat(e,"-column-sorter")},o.createElement("span",{className:"".concat(l)},o.createElement(sm,{size:a})),o.createElement("span",{className:"".concat(c)},o.createElement(am,{size:a}))))}}om.propTypes={className:c().string,style:c().object,onClick:c().func,prefixCls:c().string,sortOrder:c().oneOfType([c().string,c().bool]),sortIcon:c().func},om.defaultProps={prefixCls:Lg.PREFIX,onClick:r(),sortOrder:!1};var lm=i(73304);const cm=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M9.65618 3.44015L18.6322 11.2454C19.0906 11.644 19.0906 12.356 18.6322 12.7546L9.65618 20.5598C9.00895 21.1226 8 20.6629 8 19.8052V4.19475C8 3.33705 9.00895 2.87734 9.65618 3.44015Z",fill:"currentColor"}))}),"tree_triangle_right");function hm(e){const{expanded:t,componentType:i,onClick:n=r(),onMouseEnter:s=r(),onMouseLeave:a=r(),expandIcon:l,prefixCls:c=Lg.PREFIX,motion:h=!0}=e;let d;d=o.isValidElement(l)?l:"function"===typeof l?l(t):"tree"===i?t&&!h?o.createElement(lm.A,{size:"small"}):o.createElement(cm,{size:"small"}):t&&!h?o.createElement(Nd,null):o.createElement(jo,null);const u=(0,o.useCallback)((e=>{"function"===typeof n&&n(!t,e)}),[t]);if(h){const e=d;d=o.createElement(Nc.A,{animationState:t?"enter":"leave",startClassName:"".concat(Lg.PREFIX,"-expandedIcon-").concat(t?"show":"hide")},(t=>{let{animationClassName:i}=t;return o.cloneElement(e,{className:(e.props.className||"")+" "+i})}))}return o.createElement("span",{role:"button","aria-label":"Expand this row",tabIndex:-1,onClick:u,onMouseEnter:s,onMouseLeave:a,className:"".concat(c,"-expand-icon"),onKeyPress:e=>(0,gi.A)(e)&&u(e)},d)}hm.propTypes={expanded:c().bool,componentType:c().oneOf(["tree","expand"]),onClick:c().func,onMouseEnter:c().func,onMouseLeave:c().func,expandIcon:c().oneOfType([c().node,c().func]),prefixCls:c().string,motion:c().bool},hm.defaultProps={componentType:"expand",onClick:r(),onMouseEnter:r(),onMouseLeave:r(),prefixCls:Lg.PREFIX};class dm extends o.PureComponent{render(){const{columns:e,className:t,style:i,prefixCls:n,components:r}=this.props,s=Fi()(r,"colgroup.wrapper","colgroup"),a=Fi()(r,"colgroup.col","col"),l=Jg(e).map(((e,t)=>{const i={};return e.width&&(i.width=e.width,i.minWidth=i.width),o.createElement(a,{className:d()("".concat(n,"-col"),e.className),key:e.key||e.dataIndex||t,style:i})})),c=d()("".concat(n,"-colgroup"),t);return o.createElement(s,{className:c,style:i},l)}}dm.propTypes={columns:c().array,prefixCls:c().string,className:c().string,style:c().object,components:c().object},dm.defaultProps={columns:[],prefixCls:Lg.PREFIX};var um=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class pm extends M.A{get adapter(){return Object.assign({},super.adapter)}constructor(e){super(e),this.cacheRef=e=>{if(this.headerNode=e,e&&this.context.setHeadWidths){const{prefixCls:t,row:i,index:n}=this.props,r=".".concat(t,"-row-head"),s=e&&e.querySelectorAll&&e.querySelectorAll(r);this.context.setHeadWidths(sl()(s,((e,t)=>{let n=Fi()(i,[t,"column","width"]);const r=Fi()(i,[t,"column","key"]);return"number"!==typeof n&&(n=e&&e.getBoundingClientRect().width||0),{width:n,key:r}})),n)}},this.headerNode=null}componentDidUpdate(e){e.columns!==this.props.columns&&this.headerNode&&this.cacheRef(this.headerNode)}render(){const{components:e,row:t,prefixCls:i,onHeaderRow:n,index:r,style:s,columns:a}=this.props,{getCellWidths:l,direction:c}=this.context,h="rtl"===c,u=tf(a,r),p=l(u),g=Fi()(e,"header.row","tr"),f=Fi()(e,"header.cell","th"),m=n(a,r)||{};Y()(m,"className",d()(Fi()(m,"className"),"".concat(i,"-row")));const v=sl()(t,((e,t)=>{const{column:n}=e,s=um(e,["column"]),a="function"===typeof n.onHeaderCell?n.onHeaderCell(n,t,r):{};let l,g,m,v,y=Object.assign({},a.style);if(n.align){const e=lf(n.align,c);y=Object.assign(Object.assign({},y),{textAlign:e}),a.className=d()(a.className,n.className,{["".concat(i,"-align-").concat(e)]:Boolean(e)})}if(h?(l=Wg(n),g=Ug(n),m=Vg(u,n),v=Hg(u,n)):(l=Ug(n),g=Wg(n),m=Hg(u,n),v=Vg(u,n)),a.className=d()("".concat(i,"-row-head"),n.className,a.className,{["".concat(i,"-cell-fixed-left")]:l,["".concat(i,"-cell-fixed-left-last")]:m,["".concat(i,"-cell-fixed-right")]:g,["".concat(i,"-cell-fixed-right-first")]:v,["".concat(i,"-row-head-ellipsis")]:n.ellipsis}),p.length&&u.length){const e=nl()(u,(e=>e&&null!=e.key&&e.key===n.key));if(e>-1)if(Ug(n)){const t=h?"right":"left";y=Object.assign(Object.assign({},y),{position:"sticky",[t]:zg(p,0,e)})}else if(Wg(n)){const t=h?"left":"right";y=Object.assign(Object.assign({},y),{position:"sticky",[t]:zg(p,e+1)})}}Object.assign(s,{resize:n.resize});const b=Ue()(Object.assign(Object.assign({},s),a),["colStart","colEnd","hasSubColumns","parents","level"]),{rowSpan:_,colSpan:x}=b;return 0===_||0===x?null:o.createElement(f,Object.assign({role:"columnheader","aria-colindex":t+1},b,{style:y,key:n.key||n.dataIndex||t}))}));return o.createElement(g,Object.assign({role:"row","aria-rowindex":r+1},m,{style:s,ref:this.cacheRef}),v)}}pm.contextType=Cf,pm.propTypes={components:c().object,row:c().array,prefixCls:c().string,onHeaderRow:c().func,index:c().oneOfType([c().string,c().number]),style:c().object,columns:c().array,fixed:c().oneOfType([c().bool,c().string]),selectedRowKeysSet:c().instanceOf(Set).isRequired},pm.defaultProps={onHeaderRow:r(),prefixCls:Lg.PREFIX,columns:[],components:{header:{wrapper:"thead",row:"tr",cell:"th"}}};class gm extends M.A{get adapter(){return Object.assign({},super.adapter)}render(){const{components:e,columns:t,prefixCls:i,fixed:n,onHeaderRow:r,forwardedRef:s,selectedRowKeysSet:a}=this.props,l=function(e){const t=[];!function e(i,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;t[s]=t[s]||[];let o=n;return i.map((i=>{const n={key:i.key,className:i.className||"",children:G()(i.title)?i.title():i.title,column:i,colStart:o,level:a,parents:r};let l=1;const c=i.children;return c&&c.length>0&&(l=e(c,o,[...r,n],s+1,a+1).reduce(((e,t)=>e+t),0),n.hasSubColumns=!0),"colSpan"in i&&({colSpan:l}=i),"rowSpan"in i&&(n.rowSpan=i.rowSpan),i.key===jg.DEFAULT_KEY_COLUMN_SCROLLBAR&&(n["x-type"]=jg.DEFAULT_KEY_COLUMN_SCROLLBAR),n.colSpan=l,n.colEnd=n.colStart+l-1,t[s].push(n),o+=l,cf(null===i||void 0===i?void 0:i.ellipsis)&&"string"===typeof n.children&&(n.title=n.children),l}))}(e,0);const i=t.length;for(let n=0;n<i;n+=1)t[n].forEach((e=>{"rowSpan"in e||e.hasSubColumns||(e.rowSpan=i-n)}));return t}(t),c=e.header.wrapper;return o.createElement(c,{className:"".concat(i,"-thead"),ref:s},l.map(((s,l)=>o.createElement(pm,{prefixCls:i,key:l,index:l,fixed:n,columns:t,row:s,components:e,onHeaderRow:r,selectedRowKeysSet:a}))))}}gm.propTypes={components:c().any,columns:c().array,columnManager:c().object,prefixCls:c().string,onHeaderRow:c().func,onDidUpdate:c().func,fixed:c().oneOfType([c().bool,c().string]),selectedRowKeysSet:c().instanceOf(Set).isRequired},gm.defaultProps={columns:[],prefixCls:Lg.PREFIX,onHeaderRow:r(),onDidUpdate:r(),components:{header:{wrapper:"thead",row:"tr",cell:"th"}}};const fm=o.forwardRef(((e,t)=>o.createElement(gm,Object.assign({},e,{forwardedRef:t}))));class mm extends o.PureComponent{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedRowKeysSet:new Set})}render(){const{scroll:e,prefixCls:t,fixed:i,forwardedRef:n,handleBodyScroll:r,columns:s,components:a,onDidUpdate:l,showHeader:c,tableLayout:h,bodyHasScrollBar:u,sticky:p}=this.props,g=Fi()(a,"header.outer","table"),f=Fi()(e,"x"),m={},v={};f&&!i&&(v.width=f),u&&(m.overflowY="scroll");const y=o.createElement(dm,{columns:s,prefixCls:t}),b=o.createElement(fm,Object.assign({},this.props,{columns:s,components:a,onDidUpdate:l})),_=d()("".concat(t,"-header"),{["".concat(t,"-header-sticky")]:p,["".concat(t,"-header-hidden")]:!c}),x=Fi()(p,"top",0);return"number"===typeof x&&(m.top=x),o.createElement("div",{key:"headTable",style:m,className:_,ref:n,onScroll:r},o.createElement(g,{style:v,className:d()(t,{["".concat(t,"-fixed")]:"fixed"===h})},y,b))}}mm.propTypes={tableLayout:c().string,bodyHasScrollBar:c().bool,columns:c().array,components:c().object,dataSource:c().array,fixed:c().oneOfType([c().bool,c().string]),handleBodyScroll:c().func,prefixCls:c().string,forwardedRef:c().oneOfType([c().object,c().func]),scroll:c().shape({x:c().oneOfType([c().number,c().string,c().bool]),y:c().oneOfType([c().number,c().string])}),selectedRowKeysSet:c().instanceOf(Set).isRequired,showHeader:c().bool,onDidUpdate:c().func,onHeaderRow:c().func},mm.defaultProps={handleBodyScroll:r()};const vm=o.forwardRef(((e,t)=>o.createElement(mm,Object.assign({},e,{forwardedRef:t}))));var ym=i(89124),bm=i.n(ym),_m=i(35640),xm=i.n(_m),Sm=i(21844),wm=i.n(Sm);class Cm extends k.A{init(){this.initVirtualizedData(),this.initExpandBtnShouldInRow()}destroy(){this.unobserveBodyResize()}initVirtualizedData(e){this._adapter.setVirtualizedData(this.flattenData(this.getProp("dataSource")),e)}initExpandBtnShouldInRow(e){const t=this.getProps(),i=function(e){const{expandedRowRender:t,dataSource:i,hideExpandedColumn:n,childrenRecordName:r,rowExpandable:s}=e,a="function"===typeof t;return n&&a||!a&&i.some((e=>{const t=Fi()(e,r);return!!(Array.isArray(t)&&t.length||s(e))}))}(t);if(this._adapter.setCachedExpandBtnShouldInRow(i),!y()(e)&&!e){e=jg.EXPAND_RELATED_PROPS.map((e=>Fi()(t,e,void 0)))}this._adapter.setCachedExpandRelatedProps(e)}flattenData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const r=[],{rowKey:s,childrenRecordName:a,expandedRowRender:o,expandedRowKeys:l,groups:c}=this.getProps();return 0===t&&uf()(c)?c.forEach(((a,o)=>{const c=e.findIndex((e=>a.has(Yg(e,s))));if(c>-1){const h=wm()(e,(e=>a.has(Yg(e,s)))),d=yo()(l,o);r.push({key:o,level:t,sectionRow:!0,group:a,groupKey:o,expanded:d}),d&&r.push(...this.flattenData(e.slice(c,h+1),t+1,[...i],[...n]))}})):e.forEach(((e,c)=>{const h=Yg(e,s),d=function(e,t){return void 0===t&&(t="children"),Fi()(e,t)}(e,a);t&&n.push(h);const u={key:h,record:e,level:t,parentKeys:[...i],childrenKeys:[...n]};r.push(u);const p=[];yo()(l,h)&&(Array.isArray(d)&&d.length?p.push(...this.flattenData(d,t+1,[...u.parentKeys],[...u.childrenKeys])):o&&p.push({key:$g(h),level:t,expandedRow:!0,record:e}),r.push(...p))})),r}observeBodyResize(e){const{scroll:t}=this.getProps();if(Fi()(t,"y"))return this._adapter.observeBodyResize(e)}unobserveBodyResize(){return this._adapter.unobserveBodyResize()}}var km=i(41740),Am=i.n(km);let Em,Tm;const Om={position:"absolute",top:"-9999px",width:"50px",height:"50px"};function Pm(e){return"number"===typeof e?e-Fg.DEFAULT_CELL_PADDING_LEFT-Fg.DEFAULT_CELL_PADDING_RIGHT-Fg.DEFAULT_CELL_BORDER_WIDTH_LEFT-Fg.DEFAULT_CELL_BORDER_WIDTH_RIGHT-function(){if("undefined"===typeof document||"undefined"===typeof window)return 0;const e="vertical"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vertical");if(e&&Em)return Em;if(!e&&Tm)return Tm;const t=document.createElement("div");Object.keys(Om).forEach((e=>{t.style[e]=Om[e]})),e?t.style.overflowY="scroll":t.style.overflowX="scroll",document.body.appendChild(t);let i=0;return e?(i=t.offsetWidth-t.clientWidth,Em=i):(i=t.offsetHeight-t.clientHeight,Tm=i),document.body.removeChild(t),i}("vertical"):void 0}function Mm(e,t){return mf()({},{table:"table",header:{outer:"table",wrapper:"thead",row:"tr",cell:"th"},body:t?{outer:"div",wrapper:"div",row:"div",cell:"div",colgroup:{wrapper:"div",col:"div"}}:{outer:"table",wrapper:"tbody",row:"tr",cell:"td",colgroup:{wrapper:"colgroup",col:"col"}},footer:{wrapper:"tfoot",row:"tr",cell:"td"}},e)}const Im=new Bg("[@douyinfe/semi-ui Table]");function Rm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=[],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3]?$.mg:Am();return sl()(t,(t=>{const s=Ng(t=Object.assign({},t),i),a=null!=s&&ol()(e,(e=>Ng(e,i)===s));a?n.push(r(Object.assign(Object.assign({},a),t))):n.push(r(t))})),n}var Dm=i(19269),Lm=i.n(Dm);class jm extends k.A{handleClick(e){const{expanded:t,rowKey:i}=this.getProps();this._adapter.notifyClick(i,e,t)}handleDoubleClick(e){this._adapter.notifyDoubleClick(this.getProp("record"),e)}handleMouseEnter(e){const t=this.getProp("record");this._adapter.notifyMouseEnter(t,e)}handleMouseLeave(e){const t=this.getProp("record");this._adapter.notifyMouseLeave(t,e)}}class Fm extends k.A{handleClick(e){this._adapter.notifyClick(this.getProp("record"),e)}}function Bm(e){return e&&!o.isValidElement(e)&&"[object Object]"===Object.prototype.toString.call(e)}class Nm extends M.A{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifyClick:function(){const{onClick:t}=e.props;"function"===typeof t&&t(...arguments)}})}constructor(e){super(e),this.setRef=e=>this.ref=e,this.handleClick=e=>{this.foundation.handleClick(e);const t=this.adapter.getCache("customCellProps");t&&"function"===typeof t.onClick&&t.onClick(e)},this.ref=(0,o.createRef)(),this.foundation=new Fm(this.adapter)}shouldComponentUpdate(e){const t=this.props,{column:i,expandIcon:n}=t,r=function(e){return Fi()(e,"key")===jg.DEFAULT_KEY_COLUMN_SELECTION}(i),s=Gg(i)||n;if((r||s)&&!a()(e,this.props))return!0;{const i=["selected","expanded","expandIcon","disabled"],n=Ue()(t,i),r=Ue()(e,i);if(!a()(r,n))return!0}return!1}componentDidUpdate(){this.props.onDidUpdate(this.ref)}getTdProps(){const{record:e,index:t,column:i={},fixedLeft:n,fixedRight:r,width:s,height:a}=this.props;let o={},l={};const{direction:c}=this.context,h="rtl"===c,d=r||"number"===typeof r;if(n||"number"===typeof n?Y()(o,h?"style.right":"style.left","number"===typeof n?n:0):d&&Y()(o,h?"style.left":"style.right","number"===typeof r?r:0),null!=s&&Y()(o,"style.width",s),null!=a&&Y()(o,"style.height",a),i.onCell){l=i.onCell(e,t),this.adapter.setCache("customCellProps",Object.assign({},l)),o=Object.assign(Object.assign({},o),Ue()(l,["style","className","onClick"]));const n=Fi()(l,"style")||{};o.style=Object.assign(Object.assign({},o.style),n)}if(i.align){const e=lf(i.align,c);o.style=Object.assign(Object.assign({},o.style),{textAlign:e})}return{tdProps:o,customCellProps:l}}renderText(e){const{record:t,indentSize:i,prefixCls:n,indent:r,index:s,expandIcon:a,renderExpandIcon:l,column:c={}}=this.props,{dataIndex:h,render:d,useFullRender:u}=c;let p,g,f;p="number"===typeof h||h&&0!==h.length?Fi()(t,h):t;const m=r&&i?o.createElement("span",{style:{paddingLeft:"".concat(i*r,"px")},className:"".concat(n,"-row-indent indent-level-").concat(r)}):null,v="function"===typeof l?l(t):a;if(d){const i={expandIcon:v};if(u){const{renderSelection:e}=this.context,n="function"===typeof e?e(t):null;Object.assign(i,{selection:n,indentText:m})}p=d(p,t,s,i),Bm(p)&&(g=(e=p.props?mf()(e,p.props):e).colSpan,f=e.rowSpan,p=p.children)}return{text:p,indentText:m,rowSpan:f,colSpan:g,realExpandIcon:v,tdProps:e}}renderInner(e,t,i){const{prefixCls:n,isSection:r,expandIcon:s,column:a={}}=this.props,{tableWidth:l,anyColumnFixed:c}=this.context,{useFullRender:h}=a;let u=null;return u=h?e:[o.createElement(o.Fragment,{key:"indentText"},t),o.createElement(o.Fragment,{key:"expandIcon"},s?i:null),o.createElement(o.Fragment,{key:"text"},e)],r&&(u=o.createElement("div",{className:d()("".concat(n,"-section-inner")),style:{width:c?Pm(l):void 0}},u)),u}render(){const{prefixCls:e,column:t={},component:i,fixedLeft:n,fixedRight:r,lastFixedLeft:s,firstFixedRight:a,colIndex:l}=this.props,{direction:c}=this.context,h="rtl"===c,{className:u,ellipsis:p}=t,g=n||"number"===typeof n,f=r||"number"===typeof r,{tdProps:m,customCellProps:v}=this.getTdProps(),y=this.renderText(m);let{text:b}=y;const{indentText:_,rowSpan:x,colSpan:S,realExpandIcon:w,tdProps:C}=y;let k;if(cf(p)&&"string"===typeof b&&(k=b),0===x||0===S)return null;Bm(b)&&(b=null);const A=this.renderInner(b,_,w);let E,T,O,P;h?(E=f,T=a,O=g,P=s):(E=g,T=s,O=f,P=a);const M=d()(u,"".concat(e,"-row-cell"),Fi()(v,"className"),{["".concat(e,"-cell-fixed-left")]:E,["".concat(e,"-cell-fixed-left-last")]:T,["".concat(e,"-cell-fixed-right")]:O,["".concat(e,"-cell-fixed-right-first")]:P,["".concat(e,"-row-cell-ellipsis")]:p});return o.createElement(i,Object.assign({role:"gridcell","aria-colindex":l+1,className:M,onClick:this.handleClick,title:k},C,{ref:this.setRef}),A)}}Nm.contextType=Cf,Nm.defaultProps={indent:0,indentSize:Fg.DEFAULT_INDENT_WIDTH,onClick:r(),prefixCls:Lg.PREFIX,component:"td",onDidUpdate:r(),column:{}},Nm.propTypes={record:c().object,prefixCls:c().string,index:c().number,fixedLeft:c().oneOfType([c().bool,c().number]),lastFixedLeft:c().bool,fixedRight:c().oneOfType([c().bool,c().number]),firstFixedRight:c().bool,indent:c().number,indentSize:c().number,column:c().object,expandIcon:c().any,renderExpandIcon:c().func,hideExpandedColumn:c().bool,component:c().any,onClick:c().func,onDidUpdate:c().func,isSection:c().bool,width:c().oneOfType([c().string,c().number]),height:c().oneOfType([c().string,c().number]),selected:c().bool,expanded:c().bool,colIndex:c().number};var zm=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Hm={anyColumnFixed:c().bool,cellWidths:c().array.isRequired,className:c().string,columns:c().array.isRequired,components:c().object.isRequired,disabled:c().bool,expandIcon:c().oneOfType([c().bool,c().func,c().node]),expandableRow:c().bool,expanded:c().bool,displayNone:c().bool,expandedRow:c().bool,fixed:c().oneOfType([c().string,c().bool]),height:c().oneOfType([c().string,c().number]),hideExpandedColumn:c().bool,hovered:c().bool.isRequired,indent:c().number,indentSize:c().number,index:c().number,isSection:c().bool,level:c().number,onDidUpdate:c().func,onHover:c().func,onRow:c().func,onRowClick:c().func,onRowContextMenu:c().func,onRowDoubleClick:c().func,onRowMouseEnter:c().func,onRowMouseLeave:c().func,prefixCls:c().string,record:c().object,renderExpandIcon:c().func,replaceClassName:c().string,rowExpandable:c().func,rowKey:c().oneOfType([c().string,c().number]).isRequired,selected:c().bool,store:c().object,style:c().object,virtualized:c().oneOfType([c().object,c().bool]),visible:c().bool.isRequired};class Vm extends M.A{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifyClick:function(){return e.props.onRowClick(...arguments)},notifyDoubleClick:function(){return e.props.onRowDoubleClick(...arguments)},notifyMouseLeave:function(){e.props.onHover(!1,e.props.rowKey),e.props.onRowMouseEnter(...arguments)},notifyMouseEnter:function(){e.props.onHover(!0,e.props.rowKey),e.props.onRowMouseEnter(...arguments)}})}constructor(e){super(e),this.renderExpandIcon=e=>{const{renderExpandIcon:t}=this.props;return t(e,!0)},this.handleMouseEnter=e=>{this.foundation.handleMouseEnter(e);const t=this.adapter.getCache("customRowProps");"function"===typeof(null===t||void 0===t?void 0:t.onMouseEnter)&&t.onMouseEnter(e)},this.handleMouseLeave=e=>{this.foundation.handleMouseLeave(e);const t=this.adapter.getCache("customRowProps");"function"===typeof(null===t||void 0===t?void 0:t.onMouseLeave)&&t.onMouseLeave(e)},this.handleClick=e=>{this.foundation.handleClick(e);const t=this.adapter.getCache("customRowProps");t&&"function"===typeof t.onClick&&t.onClick(e)},this.foundation=new jm(this.adapter)}componentDidMount(){const{onRow:e,index:t,record:i}=this.props;if("undefined"===typeof this.adapter.getCache("customRowProps")){const n=e(i,t)||{},{className:r,style:s}=n,a=zm(n,["className","style"]);this.adapter.setCache("customRowProps",Object.assign({},a))}}shouldComponentUpdate(e){const t=["cellWidths"],i=function(e,t){if(e===t)return!0;if(!e||!t)return!1;const i=Object.keys(e),n=Object.keys(t),r=i.length;if(n.length!==r)return!1;for(let s=0;s<r;s++){const n=i[s];if(e[n]!==t[n]||!Object.prototype.hasOwnProperty.call(t,n))return!1}return!0}(Ue()(e,t),Ue()(this.props,t));return!i||!a()(qi()(e,t),qi()(this.props,t))}renderCells(){const{columns:e,record:t,index:i,prefixCls:n,fixed:r,components:s,expandableRow:a,level:l,expandIcon:c,rowExpandable:h,isSection:d,expandedRow:u,virtualized:p,indentSize:g,hideExpandedColumn:f,cellWidths:m,selected:v,expanded:y,disabled:b,onDidUpdate:_}=this.props,x=Fi()(s,"body.cell",jg.DEFAULT_COMPONENTS.body.cell),S=[],w=h(t);let C=0;return Ag()(e,((s,h)=>{const k=Fi()(s,"key"),A={};if("right"!==r&&(function(e){return[jg.DEFAULT_KEY_COLUMN_EXPAND,jg.DEFAULT_KEY_COLUMN_SCROLLBAR,jg.DEFAULT_KEY_COLUMN_SELECTION].includes(e)}(k)&&C++,a&&h===C&&(A.renderExpandIcon=this.renderExpandIcon,(f||d)&&(A.expandIcon=null==c||c)),null!=l&&h===C&&(A.indent=l,!a&&f&&(A.indent=l+1))),Gg(s)&&!w)S.push(o.createElement(Nm,{key:h,colIndex:h,isSection:d}));else if(!function(e){return Fi()(e,"key")===jg.DEFAULT_KEY_COLUMN_SCROLLBAR}(s)){const r={};x!==jg.DEFAULT_COMPONENTS.body.cell&&p&&!u&&(r.width=Fi()(m,h)),S.push(o.createElement(Nm,Object.assign({colIndex:h},A,r,{hideExpandedColumn:f,indentSize:g,isSection:d,prefixCls:"".concat(n),column:s,key:h,index:i,record:t,component:x,fixedLeft:Ug(s)&&zg(m,0,h),lastFixedLeft:Hg(e,s),fixedRight:Wg(s)&&zg(m,h+1),firstFixedRight:Vg(e,s),selected:v,expanded:y,disabled:b,onDidUpdate:_})))}})),S}render(){const{style:e}=this.props,{components:t,prefixCls:i,selected:n,onRow:r,index:s,className:a,replaceClassName:l,record:c,hovered:h,expanded:u,displayNone:p,expandableRow:g,level:f,expandedRow:m,isSection:v,rowKey:y}=this.props,b=t.body.row,_=r(c,s)||{},{className:x,style:S}=_,w=zm(_,["className","style"]);this.adapter.setCache("customRowProps",Object.assign({},w));const C=Object.assign(Object.assign({},e),S),k="string"===typeof l&&l.length?d()(l,x):d()(a,"".concat(i,"-row"),{["".concat(i,"-row-selected")]:n,["".concat(i,"-row-expanded")]:u,["".concat(i,"-row-hovered")]:h,["".concat(i,"-row-hidden")]:p},x),A={};return"number"===typeof s&&(A["aria-rowindex"]=s+1),g&&(A["aria-expanded"]=u),(u||m)&&(A["aria-level"]=2),"number"===typeof f&&(A["aria-level"]=f+1),v&&(A["aria-level"]=1),o.createElement(b,Object.assign({role:"row"},A,w,{style:C,className:k,"data-row-key":y,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick}),this.renderCells())}}Vm.propTypes=Hm,Vm.defaultProps={columns:[],rowExpandable:Lm(),components:{body:{row:"tr",cell:"td"}},prefixCls:Lg.PREFIX,onRow:r(),onRowClick:r(),onRowDoubleClick:r(),onRowMouseEnter:r(),onRowMouseLeave:r(),onHover:r(),onDidUpdate:r(),visible:!0,hovered:!1,selected:!1,disabled:!1};var Um=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Wm extends o.PureComponent{render(){const{record:e,columns:t=[],prefixCls:i,className:n,expanded:r,expandedRowRender:s,renderExpandIcon:a,index:l,store:c,components:h,style:u,virtualized:p,indentSize:g,cellWidths:f,displayNone:m}=this.props,{tableWidth:v,anyColumnFixed:y,getCellWidths:b}=this.context,_=s(e,l,r);let x=null;const S={};let w={};if(bm()(_))return null;if((0,o.isValidElement)(_))x=_;else if(_&&"[object Object]"===Object.prototype.toString.call(_)){const e=_,{children:t,fixed:i}=e,n=Um(e,["children","fixed"]);x=t,w=Object.assign({},n)}Fi()(h,"body.cell")!==jg.DEFAULT_COMPONENTS.body.cell?(p&&Y()(S,"style.height","100%"),Y()(S,"style.display","block"),Y()(S,"style.width",zg(f,0,t.length))):S.colSpan=Kg(t).length;const C=[Object.assign({render:()=>({props:S,children:o.createElement("div",{className:d()("".concat(i,"-expand-inner")),style:{width:y?Pm(v):void 0}},x)})},w)],k=d()(n,"".concat(i,"-row-expand")),A=b(C);return o.createElement(Vm,{style:u,components:h,className:k,expandedRow:!0,renderExpandIcon:a,rowKey:"".concat(e.key,"-expanded-row"),columns:C,store:c,virtualized:p,indentSize:g,cellWidths:A,displayNone:m})}}Wm.contextType=Cf,Wm.propTypes={cellWidths:c().array.isRequired,className:c().string,columns:c().array,components:c().object,defaultExpandAllRows:c().bool,defaultExpandedRowKeys:c().array,expandIcon:c().oneOfType([c().object,c().node,c().func]),expandRowByClick:c().bool,expanded:c().bool,expandedRowKeys:c().array,expandedRowRender:c().func,indentSize:c().number,index:c().oneOfType([c().string,c().number]),onExpand:c().func,onExpandedRowsChange:c().func,prefixCls:c().string,record:c().object,renderExpandIcon:c().func,store:c().object,style:c().object,virtualized:c().oneOfType([c().bool,c().object])},Wm.defaultProps={record:{},prefixCls:Lg.PREFIX};var Gm=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Km={record:c().object,index:c().number,columns:c().array,group:c().object.isRequired,groupKey:c().oneOfType([c().string,c().number]).isRequired,data:c().array,renderGroupSection:c().func,onGroupedRow:c().func,clickGroupedRowToExpand:c().bool,components:c().object,expanded:c().bool,prefixCls:c().string,onExpand:c().func,virtualized:c().oneOfType([c().bool,c().object]),style:c().object,renderExpandIcon:c().func,className:c().string,store:c().object,rowKey:c().oneOfType([c().string,c().number,c().func])};class Ym extends o.PureComponent{constructor(){var e;super(...arguments),e=this,this.onRow=function(){const{onGroupedRow:t,clickGroupedRowToExpand:i,onExpand:n,groupKey:r,expanded:s}=e.props,a={};return"function"===typeof t&&Object.assign(a,t(...arguments)),Object.assign(Object.assign({},a),{onClick:e=>{"function"===typeof n&&i&&n(!s,r,e),"function"===typeof a.onClick&&a.onClick(e)}})},this.collectGroupedData=()=>{const{data:e,group:t,rowKey:i}=this.props;return Array.isArray(e)&&e.length&&mo()(t)?e.filter((e=>{const n="function"===typeof i?i(e):Fi()(e,i);return null!=n&&""!==n&&t.has(n)})):[]},this.renderExpandIcon=e=>{const{renderExpandIcon:t,groupKey:i}=this.props;return"function"===typeof t?t(e,!1,i):null}}isInnerColumnKey(e){return null!=e&&[jg.DEFAULT_KEY_COLUMN_EXPAND,jg.DEFAULT_KEY_COLUMN_SELECTION].includes(e)}render(){const{record:e,columns:t=[],prefixCls:i,className:n,expanded:r,renderGroupSection:s,components:a,index:l,store:c,group:h,groupKey:u,virtualized:p,style:g}=this.props,f={};let m={},v=null;const y="function"===typeof s?s(u,[...h]):null;if((0,o.isValidElement)(y))v=y;else if(y&&"[object Object]"===Object.prototype.toString.call(y)){const e=y,{children:t}=e,i=Gm(e,["children"]);v=t,m=Object.assign({},i)}f.colSpan=Kg(t).length;const b=[Object.assign({render:()=>({props:f,children:v})},m)],_=d()(n,"".concat(i,"-row-section"),{on:r}),{getCellWidths:x}=this.context,S=x(b,null,!0);return o.createElement(Vm,{components:a,virtualized:p,index:l,onRow:this.onRow,expanded:r,expandIcon:!0,isSection:!0,record:e,replaceClassName:_,expandableRow:!0,renderExpandIcon:this.renderExpandIcon,rowKey:u,columns:b,store:c,style:g,cellWidths:S})}}Ym.contextType=Cf,Ym.propTypes=Km,Ym.defaultProps={prefixCls:Lg.PREFIX,components:{body:{row:"tr",cell:"td"}}};const Xm=Ym;var qm=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Zm extends M.A{constructor(e,t){var i;super(e),i=this,this.forwardRef=e=>{const{forwardedRef:t}=this.props;this.ref.current=e,this.foundation.observeBodyResize(e),"function"===typeof t?t(e):t&&"object"===typeof t&&(t.current=e)},this.itemSize=e=>{const{virtualized:t,size:i}=this.props,{virtualizedData:n}=this.state,r=Fi()(n,e),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={};return"small"===e?(i.height=t?Fg.DEFAULT_VIRTUALIZED_SECTION_ROW_SMALL_HEIGHT:Fg.DEFAULT_VIRTUALIZED_ROW_SMALL_HEIGHT,i.minHeight=Fg.DEFAULT_VIRTUALIZED_ROW_SMALL_MIN_HEIGHT):"middle"===e?(i.height=t?Fg.DEFAULT_VIRTUALIZED_SECTION_ROW_MIDDLE_HEIGHT:Fg.DEFAULT_VIRTUALIZED_ROW_MIDDLE_HEIGHT,i.minHeight=Fg.DEFAULT_VIRTUALIZED_ROW_MIDDLE_MIN_HEIGHT):(i.height=t?Fg.DEFAULT_VIRTUALIZED_SECTION_ROW_HEIGHT:Fg.DEFAULT_VIRTUALIZED_ROW_HEIGHT,i.minHeight=Fg.DEFAULT_VIRTUALIZED_ROW_MIN_HEIGHT),i}(i,r.sectionRow),a=Fi()(t,"itemSize",s.height);let o=a;return"function"===typeof a&&(o=a(e,{expandedRow:Fi()(r,"expandedRow",!1),sectionRow:Fi()(r,"sectionRow",!1)})),o<s.minHeight&&Im.warn("The computed real `itemSize` cannot be less than ".concat(s.minHeight)),o},this.itemKey=(e,t)=>Fi()(t,[e,"key"],e),this.handleRowClick=(e,t,i)=>{const{handleRowExpanded:n}=this.context;n(!i,e,t)},this.handleVirtualizedScroll=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Fi()(i.props.virtualized,"onScroll");"function"===typeof t&&t(e)},this.handleVirtualizedBodyScroll=e=>{const{handleBodyScroll:t}=this.props,i=Fi()(e,"nativeEvent.target.scrollLeft"),n=Fi()(e,"nativeEvent.target.scrollTop");n===this.state.cache.virtualizedScrollTop&&this.handleVirtualizedScroll({horizontalScrolling:!0}),this.state.cache.virtualizedScrollLeft=i,this.state.cache.virtualizedScrollTop=n,"function"===typeof t&&t(e)},this.getVirtualizedRowWidth=()=>{const{getCellWidths:e}=this.context,{columns:t}=this.props;return zg(e(t),0,xm()(t))},this.renderVirtualizedRow=e=>{const{index:t,style:i}=e,{virtualizedData:n,cachedExpandBtnShouldInRow:r}=this.state,{flattenedColumns:s}=this.context,a=Fi()(n,[t],{}),{key:o,parentKeys:l,expandedRow:c,sectionRow:h}=a,d=qm(a,["key","parentKeys","expandedRow","sectionRow"]),u=this.getVirtualizedRowWidth(),p=r,g=Object.assign(Object.assign(Object.assign(Object.assign({},this.props),{style:Object.assign(Object.assign({},i),{width:u})}),d),{columns:s,index:t,expandBtnShouldInRow:p});return h?this.renderSectionRow(g):c?this.renderExpandedRow(g):this.renderBaseRow(g)},this.renderTbody=o.forwardRef((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return o.createElement("div",Object.assign({},e,{onScroll:function(){e.onScroll&&e.onScroll(...arguments)},className:d()(e.className,"".concat(i.props.prefixCls,"-tbody")),style:Object.assign({},e.style),ref:t}))})),this.renderOuter=o.forwardRef(((e,t)=>{const{children:n}=e,r=qm(e,["children"]),{handleWheel:s,prefixCls:a,emptySlot:l,dataSource:c}=this.props,h=this.getVirtualizedRowWidth(),u=d()("".concat(a),"".concat(a,"-fixed"));return o.createElement("div",Object.assign({},r,{ref:t,onWheel:function(){s&&s(...arguments),r.onWheel&&r.onWheel(...arguments)},onScroll:function(){i.handleVirtualizedBodyScroll(...arguments),r.onScroll&&r.onScroll(...arguments)}}),o.createElement("div",{style:{width:h},className:u},n),0===xm()(c)&&l)})),this.onItemsRendered=e=>{this.state.cache.virtualizedScrollLeft&&this.ref.current&&(this.ref.current.scrollLeft=this.state.cache.virtualizedScrollLeft)},this.renderVirtualizedBody=e=>{const{scroll:t,prefixCls:i,virtualized:n,columns:r}=this.props,{virtualizedData:s}=this.state,{getCellWidths:a}=this.context,l=a(r);if(!xm()(l))return null;const c=Fi()(t,"y"),h="number"===typeof c,u=h?c:600;h||Im.warn('You have to specific "scroll.y" which must be a number for table virtualization!');const p={width:"100%",height:(null===s||void 0===s?void 0:s.length)?u:null,overflowX:"auto",overflowY:"auto"},g=d()("".concat(i,"-body"));return o.createElement(Vp,Object.assign({},"object"===typeof n?n:{},{initialScrollOffset:this.state.cache.virtualizedScrollTop,onScroll:this.handleVirtualizedScroll,onItemsRendered:this.onItemsRendered,ref:this.listRef,className:g,outerRef:this.forwardRef,height:(null===s||void 0===s?void 0:s.length)?u:0,width:p.width,itemData:s,itemSize:this.itemSize,itemCount:s.length,itemKey:this.itemKey,innerElementType:this.renderTbody,outerElementType:this.renderOuter,style:Object.assign(Object.assign({},p),{direction:e}),direction:e}),this.renderVirtualizedRow)},this.renderSectionRow=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{groupKey:void 0};const{dataSource:t,rowKey:n,group:r,groupKey:s,index:a}=e,l=Object.keys(Km),c=qi()(e,l),{handleRowExpanded:h}=i.context;return o.createElement(Xm,Object.assign({},c,{record:{groupKey:s,records:[...r].map((e=>Qg(t,e,n)))},index:a,onExpand:h,data:t,key:s||a}))},this.renderExpandedRow=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{renderExpandIcon:()=>null};const{style:t,components:n,renderExpandIcon:r,expandedRowRender:s,record:a,columns:l,expanded:c,index:h,rowKey:d,virtualized:u,displayNone:p}=e;let g=Yg(a,d);null==g&&(g=h);const{flattenedColumns:f,getCellWidths:m}=i.context;return f!==i.flattenedColumns&&(i.flattenedColumns=f,i.cellWidths=m(f)),o.createElement(Wm,{style:t,components:n,renderExpandIcon:r,expandedRowRender:s,record:a,columns:l,expanded:c,index:h,virtualized:u,key:$g(g),cellWidths:i.cellWidths,displayNone:p})},this.renderGroupedRows=()=>{const{groups:e,dataSource:t,rowKey:i,expandedRowKeys:n,keepDOM:r}=this.props,{flattenedColumns:s}=this.context,a=new Map,o=[];null!=e&&Array.isArray(t)&&t.length&&t.forEach((t=>{const n=Yg(t,i);e.forEach(((e,t)=>{if(e.has(n))return a.has(t)||a.set(t,new Set([])),a.get(t).add(n),!1}))}));let l=-1;return a.forEach(((e,a)=>{const c=Xg(n,a);if(o.push(this.renderSectionRow(Object.assign(Object.assign({},this.props),{columns:s,index:++l,group:e,groupKey:a,expanded:c}))),c||r){const n=[];e.forEach((e=>{const r=Qg(t,e,i);null!=r&&n.push(r)})),o.push(this.renderBodyRows(n,void 0,[],!c))}})),o},this.renderBody=e=>{const{scroll:t,prefixCls:i,columns:n,components:r,fixed:s,handleWheel:a,headerRef:l,handleBodyScroll:c,anyColumnFixed:h,showHeader:u,emptySlot:p,includeHeader:g,dataSource:f,onScroll:m,groups:v,expandedRowRender:y,tableLayout:b}=this.props,_=Fi()(t,"x"),x=Fi()(t,"y"),S={},w={},C=Fi()(r,"body.outer","table"),k=Fi()(r,"body.wrapper")||"tbody";x&&(S.maxHeight=x),_&&(w.width=_),h&&xm()(f)&&(S.overflow="auto",S.WebkitTransform="translate3d (0, 0, 0)");const A=o.createElement(dm,{components:Fi()(r,"body"),columns:n,prefixCls:i}),E="".concat(i,"-body"),T=o.createElement("div",{key:"bodyTable",className:E,style:S,ref:this.forwardRef,onWheel:a,onScroll:c},o.createElement(C,{role:uf()(v)||G()(y)||of({dataSource:f})?"treegrid":"grid","aria-rowcount":f&&f.length,"aria-colcount":n&&n.length,style:w,className:d()(i,{["".concat(i,"-fixed")]:"fixed"===b})},A,g&&u?o.createElement(fm,Object.assign({},this.props,{ref:l,components:r,columns:n})):null,o.createElement(k,{className:"".concat(i,"-tbody"),onScroll:m},uf()(v)?this.renderGroupedRows():this.renderBodyRows(f))),p);return s&&n.length?o.createElement("div",{key:"bodyTable",className:"".concat(i,"-body-outer")},T):T},this.ref=o.createRef(),this.state={virtualizedData:[],cache:{virtualizedScrollTop:null,virtualizedScrollLeft:null},cachedExpandBtnShouldInRow:null,cachedExpandRelatedProps:[]},this.listRef=o.createRef();const{getVirtualizedListRef:n,flattenedColumns:r,getCellWidths:s}=t;n&&(e.virtualized?n(this.listRef):console.warn("getVirtualizedListRef only works with virtualized. See https://semi.design/en-US/show/table for more information.")),this.foundation=new Cm(this.adapter),this.flattenedColumns=r,this.cellWidths=s(r),this.observer=null}get adapter(){return Object.assign(Object.assign({},super.adapter),{setVirtualizedData:(e,t)=>this.setState({virtualizedData:e},t),setCachedExpandBtnShouldInRow:e=>this.setState({cachedExpandBtnShouldInRow:e}),setCachedExpandRelatedProps:e=>this.setState({cachedExpandRelatedProps:e}),observeBodyResize:e=>{const{setBodyHasScrollbar:t}=this.context,i=()=>{(window.requestAnimationFrame||window.setTimeout)((()=>{const{offsetWidth:i,clientWidth:n}=e;t(n<i)}))};e&&(Fi()(window,"ResizeObserver")?(this.observer&&(this.observer.unobserve(e),this.observer=null),this.observer=new ResizeObserver(i),this.observer.observe(e)):Im.warn("The current browser does not support ResizeObserver,and the table may be misaligned after plugging and unplugging the mouse and keyboard.You can try to refresh it."))},unobserveBodyResize:()=>{const e=this.ref.current;this.observer&&(this.observer.unobserve(e),this.observer=null)}})}componentDidUpdate(e,t){const{virtualized:i,dataSource:n,expandedRowKeys:r,columns:s,scroll:o}=this.props;i&&(e.dataSource===n&&e.expandedRowKeys===r&&e.columns===s||this.foundation.initVirtualizedData());const l=jg.EXPAND_RELATED_PROPS.map((e=>Fi()(this.props,e,void 0)));a()(l,t.cachedExpandRelatedProps)||this.foundation.initExpandBtnShouldInRow(l);const c=Fi()(o,"y"),h=this.ref.current;c&&c!==Fi()(e,"scroll.y")&&this.foundation.observeBodyResize(h)}renderBaseRow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{rowKey:t,columns:i,expandedRowKeys:n,rowExpandable:r,record:s,index:a,level:l,expandBtnShouldInRow:c,selectedRowKeysSet:h,disabledRowKeysSet:d,expandRowByClick:u}=e,p=Object.keys(Hm),g=qi()(e,p);let f=Yg(s,t);null==f&&(f=a);const m=Xg(n,f),v=r&&r(s),y={level:void 0,expanded:m};(v||c)&&(y.level=l,y.expandableRow=v,u&&(y.onRowClick=this.handleRowClick));const b={selected:qg(h,f),disabled:Zg(d,f)},{getCellWidths:_}=this.context,x=_(i,null,!0);return o.createElement(Vm,Object.assign({},g,y,b,{key:f,rowKey:f,cellWidths:x}))}renderBodyRows(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{rowKey:r,expandedRowRender:s,expandedRowKeys:a,childrenRecordName:o,rowExpandable:l,keepDOM:c}=this.props,h="function"===typeof s,d=this.state.cachedExpandBtnShouldInRow,{flattenedColumns:u}=this.context;return Ag()(e,((e,s)=>{let p=Yg(e,r);null==p&&(p=s);const g=Fi()(e,o),f=Boolean(Array.isArray(g)&&g.length);i.push(this.renderBaseRow(Object.assign(Object.assign({},this.props),{columns:u,expandBtnShouldInRow:d,displayNone:n,record:e,key:p,level:t,index:s})));const m=Xg(a,p),v=m||c;if(h&&l&&l(e)&&v){const r=this.renderExpandedRow(Object.assign(Object.assign({},this.props),{columns:u,level:t,index:s,record:e,expanded:m,displayNone:n||!m}));bm()(r)||i.push(r)}if(f&&v){const e=this.renderBodyRows(g,t+1,[],n||!m);i.push(...e)}})),i}render(){const{virtualized:e}=this.props,{direction:t}=this.context;return e?this.renderVirtualizedBody(t):this.renderBody(t)}}Zm.contextType=Cf,Zm.propTypes={anyColumnFixed:c().bool,childrenRecordName:c().string,columns:c().array,components:c().object,dataSource:c().array,disabledRowKeysSet:c().instanceOf(Set).isRequired,emptySlot:c().node,expandRowByClick:c().bool,expandedRowKeys:c().array,expandedRowRender:c().func,fixed:c().oneOfType([c().string,c().bool]),forwardedRef:c().oneOfType([c().object,c().func]),groups:c().instanceOf(Map),handleBodyScroll:c().func,handleWheel:c().func,headerRef:c().oneOfType([c().object,c().func]),includeHeader:c().bool,onScroll:c().func,prefixCls:c().string,renderExpandIcon:c().func,rowExpandable:c().func,rowKey:c().oneOfType([c().string,c().bool,c().func]),scroll:c().object,selectedRowKeysSet:c().instanceOf(Set).isRequired,showHeader:c().bool,size:c().string,store:c().object,virtualized:c().oneOfType([c().bool,c().object])};const Qm=o.forwardRef((function(e,t){return o.createElement(Zm,Object.assign({},e,{forwardedRef:t}))}));var $m=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Jm extends M.A{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{resetScrollY:()=>{this.bodyWrapRef.current&&(this.bodyWrapRef.current.scrollTop=0)},setSelectedRowKeys:e=>{this.setState({rowSelection:Object.assign(Object.assign({},this.state.rowSelection),{selectedRowKeys:[...e],selectedRowKeysSet:new Set(e)})})},setDisabledRowKeys:e=>{this.setState({disabledRowKeys:e,disabledRowKeysSet:new Set(e)})},setCurrentPage:e=>{const{pagination:t}=this.state;"object"===typeof t?this.setState({pagination:Object.assign(Object.assign({},t),{currentPage:e})}):this.setState({pagination:{currentPage:e}})},setPagination:e=>this.setState({pagination:e}),setGroups:e=>this.setState({groups:e}),setDataSource:e=>this.setState({dataSource:e}),setExpandedRowKeys:e=>this.setState({expandedRowKeys:[...e]}),setQuery:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=[...e.state.queries];i=rf(t,i),e.setState({queries:i})},setQueries:e=>this.setState({queries:e}),setFlattenData:e=>this.setState({flattenData:e}),setAllRowKeys:e=>this.setState({allRowKeys:e}),setHoveredRowKey:e=>{this.store.setState({hoveredRowKey:e})},setCachedFilteredSortedDataSource:e=>{this.cachedFilteredSortedDataSource=e},setCachedFilteredSortedRowKeys:e=>{this.cachedFilteredSortedRowKeys=e,this.cachedFilteredSortedRowKeysSet=new Set(e)},setAllDisabledRowKeys:e=>{const t=new Set(e);this.setState({allDisabledRowKeys:e,allDisabledRowKeysSet:t})},getCurrentPage:()=>Fi()(this.state,"pagination.currentPage",1),getCurrentPageSize:()=>Fi()(this.state,"pagination.pageSize",Fg.DEFAULT_PAGE_SIZE),getCachedFilteredSortedDataSource:()=>this.cachedFilteredSortedDataSource,getCachedFilteredSortedRowKeys:()=>this.cachedFilteredSortedRowKeys,getCachedFilteredSortedRowKeysSet:()=>this.cachedFilteredSortedRowKeysSet,getAllDisabledRowKeys:()=>this.state.allDisabledRowKeys,getAllDisabledRowKeysSet:()=>this.state.allDisabledRowKeysSet,notifyFilterDropdownVisibleChange:(e,t)=>this._invokeColumnFn(t,"onFilterDropdownVisibleChange",e),notifyChange:function(){return e.props.onChange(...arguments)},notifyExpand:function(){return e.props.onExpand(...arguments)},notifyExpandedRowsChange:function(){return e.props.onExpandedRowsChange(...arguments)},notifySelect:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e._invokeRowSelection("onSelect",...i)},notifySelectAll:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e._invokeRowSelection("onSelectAll",...i)},notifySelectInvert:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e._invokeRowSelection("onSelectInvert",...i)},notifySelectionChange:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e._invokeRowSelection("onChange",...i)},isAnyColumnFixed:e=>Pg()(this.getColumns(e||this.props.columns,this.props.children),(e=>Boolean(e.fixed))),useFixedHeader:()=>{const{scroll:e,sticky:t}=this.props;return!!Fi()(e,"y")||!!t},getTableLayout:()=>{let e=!1;const{flattenColumns:t}=this.state;return Array.isArray(t)&&(e=t.some((e=>Boolean(e.ellipsis)||Boolean(e.fixed)))),this.adapter.useFixedHeader()&&(e=!0),e?"fixed":"auto"},setHeadWidths:function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n,r,s;n=e.state.headWidths[i],r=t,Dg()(n,r,(function(e,t){if("function"===typeof e&&"function"===typeof t)return Od()(e)===Od()(t);if("function"===typeof s){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return s(e,t,...n)}}))||e.setState((e=>{const n=[...e.headWidths];return n[i]=[...t],{headWidths:n}}))},getHeadWidths:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e.state.headWidths.length&&"number"===typeof t){return(e.state.headWidths[t]||[]).map((e=>e.width))}return[]},getCellWidths:function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Array.isArray(t)&&t.length&&(i=null==i&&e.state.headWidths.length?Tg()(e.state.headWidths):[],Array.isArray(i)&&i.length)?t.reduce(((e,t)=>{const r=t.key===jg.DEFAULT_KEY_COLUMN_SCROLLBAR&&n?null:ol()(i,(e=>e&&null!=e.key&&e.key===t.key));return r&&e.push(r.width),e}),[]):[]},mergedRowExpandable:e=>{const{expandedRowRender:t,childrenRecordName:i,rowExpandable:n}=this.props,r=Fi()(e,i),s="function"===typeof t,a="function"===typeof n,o=Array.isArray(r)&&r.length,l=a&&n(e);return(s||o)&&(!a||l)||!(s||o)&&l},isAnyColumnUseFullRender:e=>Pg()(e,(e=>Boolean(e.useFullRender))),getNormalizeColumns:()=>this.normalizeColumns,getHandleColumns:()=>this.handleColumns,getMergePagination:()=>this.mergePagination,setBodyHasScrollbar:e=>{e!==this.state.bodyHasScrollBar&&this.setState({bodyHasScrollBar:e})},stopPropagation(e){e&&"object"===typeof e&&("function"===typeof e.stopPropagation&&e.stopPropagation(),e.nativeEvent&&"function"===typeof e.nativeEvent.stopPropagation?e.nativeEvent.stopPropagation():"function"===typeof e.stopImmediatePropagation&&e.stopImmediatePropagation())}})}constructor(e,t){var i;super(e),i=this,this._warnIfNoKey=()=>{(this.props.rowSelection||this.props.expandedRowRender)&&Pg()(this.props.dataSource,(e=>null==this.foundation.getRecordKey(e)))&&Im.error('You must specify a key for each element in the dataSource or use "rowKey" to specify an attribute name as the primary key!')},this._invokeRowSelection=function(e){const t=Fi()(i.state,["rowSelection",e]);if("function"===typeof t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];t(...r)}},this._invokeColumnFn=function(e,t){if(e&&t){const a=i.foundation.getQuery(e),o=Fi()(a,t,null);if("function"===typeof o){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];o(...r)}}},this._cacheHeaderRef=e=>{this.headerWrapRef.current=e},this.getCurrentPageData=()=>{const e=this.foundation.getCurrentPageData(),t=["dataSource","groups"].reduce(((t,i)=>(e[i]&&(t[i]=e[i]),t)),{});return(0,$.mg)(t)},this.getColumns=(e,t)=>Array.isArray(e)&&e&&e.length?e:wf(t),this.getCellWidths=function(){return i.foundation.getCellWidths(...arguments)},this.setHeadWidths=function(){return i.foundation.setHeadWidths(...arguments)},this.getHeadWidths=function(){return i.foundation.getHeadWidths(...arguments)},this.mergedRowExpandable=function(){return i.foundation.mergedRowExpandable(...arguments)},this.setBodyHasScrollbar=function(){return i.foundation.setBodyHasScrollbar(...arguments)},this.handleWheel=e=>{const{scroll:t={}}=this.props;if(window.navigator.userAgent.match(/Trident\/7\./)&&t.y){e.preventDefault();const t=e.deltaY,{target:i}=e,n=this.bodyWrapRef.current;let r=0;r=this.lastScrollTop?this.lastScrollTop+t:t,n&&i!==n&&(n.scrollTop=r)}},this.handleBodyScrollLeft=e=>{if(e.currentTarget!==e.target)return;const{target:t}=e,i=this.headerWrapRef.current,n=this.bodyWrapRef.current;t.scrollLeft!==this.lastScrollLeft&&(t===n&&i?i.scrollLeft=t.scrollLeft:t===i&&n&&(n.scrollLeft=t.scrollLeft),this.setScrollPositionClassName()),this.lastScrollLeft=t.scrollLeft},this.handleWindowResize=()=>{this.syncTableWidth(),this.setScrollPositionClassName()},this.handleBodyScrollTop=e=>{const{target:t}=e;if(e.currentTarget!==t)return;const{scroll:i={}}=this.props,n=this.headerWrapRef.current,r=this.bodyWrapRef.current;if(t.scrollTop!==this.lastScrollTop&&i.y&&t!==n){const{scrollTop:e}=t;r&&t!==r&&(r.scrollTop=e)}this.lastScrollTop=t.scrollTop},this.handleBodyScroll=e=>{this.handleBodyScrollLeft(e),this.handleBodyScrollTop(e)},this.setScrollPosition=e=>{const{prefixCls:t}=this.props,i=["".concat(t,"-scroll-position-both"),"".concat(t,"-scroll-position-middle"),"".concat(t,"-scroll-position-left"),"".concat(t,"-scroll-position-right")];this.scrollPosition=e;const n=this.wrapRef.current;if(n&&n.nodeType)if("both"===e){const e=["".concat(t,"-scroll-position-left"),"".concat(t,"-scroll-position-right")];n.classList.remove(...Cg()(i,e)),n.classList.add(...e)}else{const r=["".concat(t,"-scroll-position-").concat(e)];n.classList.remove(...Cg()(i,r)),n.classList.add(...r)}},this.setScrollPositionClassName=()=>{const e=this.bodyWrapRef.current;if(e&&e.children&&e.children.length){const t=0===e.scrollLeft,i=Math.abs(e.scrollLeft)+1>=e.children[0].getBoundingClientRect().width-e.getBoundingClientRect().width;t&&i?this.setScrollPosition("both"):t?this.setScrollPosition("left"):i?this.setScrollPosition("right"):"middle"!==this.scrollPosition&&this.setScrollPosition("middle")}},this.syncTableWidth=()=>{this.rootWrapRef&&this.rootWrapRef.current&&this.setState({tableWidth:this.rootWrapRef.current.getBoundingClientRect().width})},this.renderSelection=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{rowSelection:r,allDisabledRowKeysSet:s}=i.state;if(r&&"object"===typeof r){const{selectedRowKeys:a=[],selectedRowKeysSet:l=new Set,getCheckboxProps:c,disabled:h,renderCell:d}=r,u=i.cachedFilteredSortedRowKeys,p=i.cachedFilteredSortedRowKeysSet,g=i.foundation.allIsSelected(l,s,u),f=i.foundation.hasRowSelected(a,p)&&!g;if(t){const n=Fi()(r,"key",jg.DEFAULT_KEY_COLUMN_SELECTION),s=o.createElement(Ef,{"aria-label":"".concat(g?"Deselect":"Select"," all rows"),disabled:h,key:n,selected:g,indeterminate:f,onChange:(e,t)=>{i.toggleSelectAllRow(e,t)}}),a=(e,t)=>i.toggleSelectAllRow(e,t);return G()(d)?d({selected:g,record:e,originNode:s,inHeader:t,disabled:h,indeterminate:f,selectAll:a}):s}{const t=i.foundation.getRecordKey(e),r=l.has(t),s=()=>"function"===typeof c?c(e):{},a=o.createElement(Ef,{"aria-label":"".concat(r?"Deselect":"Select"," this row"),getCheckboxProps:s,selected:r,onChange:(e,n)=>i.toggleSelectRow(e,t,n)}),u=(e,n)=>i.toggleSelectRow(e,t,n);return G()(d)?d({selected:r,record:e,index:n,originNode:a,inHeader:!1,disabled:h,indeterminate:f,selectRow:u}):a}}return null},this.renderRowSelectionCallback=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return i.renderSelection(t,!1,n)},this.renderTitleSelectionCallback=()=>this.renderSelection(void 0,!0),this.normalizeSelectionColumn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{rowSelection:t,prefixCls:n}=e;let r={};if(t){const e=["selectedRowKeys","selectedRowKeysSet"];r={key:jg.DEFAULT_KEY_COLUMN_SELECTION},y()(t)&&(r=Object.assign(Object.assign({},r),Ue()(t,e))),r.className=d()(r.className,"".concat(n,"-column-selection")),r.title=i.renderTitleSelectionCallback,r.render=i.renderRowSelectionCallback}return r},this.normalizeScrollbarColumn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{scrollbarWidth:t=0}=e;return{key:jg.DEFAULT_KEY_COLUMN_SCROLLBAR,width:t,fixed:"right"}},this.renderExpandIcon=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{expandedRowKeys:r}=i.state,{expandIcon:s}=i.props,a="string"===typeof n||"number"===typeof n?n:i.foundation.getRecordKey(e);return o.createElement(hm,{key:a,componentType:t?"tree":"expand",expanded:yo()(r,a),expandIcon:s,onClick:(e,t)=>i.handleRowExpanded(e,a,t)})},this.handleRowExpanded=function(){return i.foundation.handleRowExpanded(...arguments)},this.normalizeExpandColumn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null;const{prefixCls:n,expandCellFixed:r,expandIcon:s}=e;return t={fixed:r,key:jg.DEFAULT_KEY_COLUMN_EXPAND},t.className=d()(t.className,"".concat(n,"-column-expand")),t.render=!1!==s?function(){let e=arguments.length>1?arguments[1]:void 0;return i.adapter.mergedRowExpandable(e)?i.renderExpandIcon(e):null}:()=>null,t},this.addFnsInColumn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{prefixCls:t}=i.props;if(e&&(e.sorter||e.filters||e.onFilter||e.useFullRender)){let n=!1;const{dataIndex:r,title:s,useFullRender:a}=e,l=i.foundation.getQuery(r),c={},h=[];a&&(c.selection=i.renderSelection(null,!0));const d=Fi()(l,"sortOrder"),u=Fi()(l,"defaultSortOrder",!1),p=i.foundation.isSortOrderValid(d)?d:u,g=cf(e.ellipsis),f="function"!==typeof s&&o.createElement("span",{className:"".concat(t,"-row-head-title"),key:jg.DEFAULT_KEY_COLUMN_TITLE,title:g&&"string"===typeof s?s:void 0},s);if("function"===typeof e.sorter||!0===e.sorter){const t=o.createElement(om,{key:jg.DEFAULT_KEY_COLUMN_SORTER,sortOrder:p,sortIcon:e.sortIcon,onClick:t=>i.foundation.handleSort(e,t),title:f});a&&(c.sorter=t),n=!0,h.push(t)}else h.push(f);const m=Fi()(l,"filteredValue"),v=Fi()(l,"defaultFilteredValue"),y=m||v;if(Array.isArray(e.filters)&&e.filters.length||(0,o.isValidElement)(e.filterDropdown)||"function"===typeof e.renderFilterDropdown){const e=o.createElement(rm,Object.assign({key:jg.DEFAULT_KEY_COLUMN_FILTER},Ue()(l,"children"),{filteredValue:y,onFilterDropdownVisibleChange:e=>i.foundation.toggleShowFilter(r,e),onSelect:e=>i.foundation.handleFilterSelect(r,e)}));a&&(c.filter=e),n=!0,h.push(e)}const b="function"===typeof s?()=>s(c):n?o.createElement("div",{className:"".concat(t,"-operate-wrapper")},h):h;e=Object.assign(Object.assign({},e),{title:b})}return e},this.toggleSelectRow=(e,t,i)=>{this.foundation.handleSelectRow(t,e,i)},this.toggleSelectAllRow=(e,t)=>{this.foundation.handleSelectAllRow(e,t)},this.renderPagination=(e,t)=>{if(!e)return null;const i=this.foundation.memoizedPagination(e);return o.createElement(pe.A,{componentName:"Table"},(e=>{const n=this.foundation.formatPaginationInfo(i,e.pageText);return o.createElement(jf,{info:n,pagination:i,renderPagination:t})}))},this.renderTitle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{title:t}=e;const{prefixCls:i,dataSource:n}=e;return"function"===typeof t&&(t=t(n)),(0,o.isValidElement)(t)||"string"===typeof t?o.createElement("div",{className:"".concat(i,"-title"),"x-semi-prop":"title"},t):null},this.renderEmpty=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{prefixCls:t,empty:n,dataSource:r}=e,s="".concat(t,"-placeholder");return i.foundation.isEmpty(r)?o.createElement(pe.A,{componentName:"Table",key:"emptyText"},((e,i)=>o.createElement("div",{className:s},o.createElement("div",{className:"".concat(t,"-empty"),"x-semi-prop":"empty"},n||e.emptyText)))):null},this.renderFooter=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{footer:t}=e;const{prefixCls:i,dataSource:n}=e;return"function"===typeof t&&(t=t(n)),(0,o.isValidElement)(t)||"string"===typeof t?o.createElement("div",{className:"".concat(i,"-footer"),key:"footer","x-semi-prop":"footer"},t):null},this.renderMainTable=e=>{const t=this.adapter.useFixedHeader(),i=this.renderEmpty(e);return[this.renderTable(Object.assign(Object.assign({},e),{fixed:!1,useFixedHeader:t,headerRef:this._cacheHeaderRef,bodyRef:this.bodyWrapRef,includeHeader:!t,emptySlot:i})),this.renderFooter(e)]},this.renderTable=e=>{const{columns:t,filteredColumns:i,fixed:n,useFixedHeader:r,scroll:s,prefixCls:a,anyColumnFixed:l,includeHeader:c,showHeader:h,components:d,headerRef:u,bodyRef:p,onHeaderRow:g,rowSelection:f,dataSource:m,bodyHasScrollBar:v,disabledRowKeysSet:y,sticky:b}=e,_=Fi()(f,"selectedRowKeysSet",new Set),x=this.adapter.getTableLayout();return[n||r?o.createElement(vm,{key:"head",tableLayout:x,ref:u,columns:i,prefixCls:a,fixed:n,handleBodyScroll:this.handleBodyScrollLeft,components:d,scroll:s,showHeader:h,selectedRowKeysSet:_,onHeaderRow:g,dataSource:m,bodyHasScrollBar:v,sticky:b}):null,o.createElement(Qm,Object.assign({},Ue()(e,["rowSelection","headWidths"]),{key:"body",ref:p,columns:i,fixed:n,prefixCls:a,handleWheel:this.handleWheel,handleBodyScroll:this.handleBodyScroll,anyColumnFixed:l,tableLayout:x,includeHeader:c,showHeader:h,scroll:s,components:d,store:this.store,selectedRowKeysSet:_,disabledRowKeysSet:y}))]},this.handleColumns=(e,t)=>{const{hideExpandedColumn:n,scroll:r,prefixCls:s,expandCellFixed:a,expandIcon:o,rowSelection:l}=this.props,c="children";let h=(0,$.mg)(t);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(e)&&e.length&&Ag()(e,((e,t,n)=>{const r=i.addFnsInColumn(e),s=e[c];if(Array.isArray(s)&&s.length){const e=[...s];d(e),r[c]=e}n[t]=r}))};if(d(h),!n){const e=this.normalizeExpandColumn({prefixCls:s,expandCellFixed:a,expandIcon:o}),t=nl()(h,(e=>e.key===jg.DEFAULT_KEY_COLUMN_EXPAND));e&&(t>-1?h[t]=Object.assign(Object.assign({},e),h[t]):h="right"===e.fixed?[...h,e]:[e,...h])}if(l&&!Fi()(l,"hidden")){const e=nl()(h,(e=>e.key===jg.DEFAULT_KEY_COLUMN_SELECTION)),t=this.normalizeSelectionColumn({rowSelection:l,prefixCls:s});e>-1?h[e]=Object.assign(Object.assign({},t),h[e]):h="right"===t.fixed?[...h,t]:[t,...h]}return ef(h),h},this.normalizeColumns=(e,t)=>(0,$.mg)(this.getColumns(e,t)),this.mergePagination=e=>Object.assign({onChange:this.foundation.setPage},e),this.foundation=new _f(this.adapter);const n=this.getColumns(e.columns,e.children),r=Jg(n),s=_f.initColumnsFilteredValueAndSorterOrder((0,$.mg)(r)),a=this.foundation.getFilteredSortedDataSource(this.props.dataSource,s),l=gc()(this.props.pagination)?this.props.pagination:{},c=this.foundation.getCurrentPageData(a,l,s);this.state={cachedColumns:n,cachedChildren:e.children,flattenColumns:r,components:Mm(e.components,e.virtualized),queries:s,dataSource:c.dataSource,flattenData:[],expandedRowKeys:[...e.expandedRowKeys||[],...e.defaultExpandedRowKeys||[]],rowSelection:e.rowSelection?y()(e.rowSelection)?Object.assign({},e.rowSelection):{}:null,pagination:c.pagination,groups:null,allRowKeys:[],disabledRowKeys:[],disabledRowKeysSet:new Set,allDisabledRowKeys:[],allDisabledRowKeysSet:new Set,headWidths:[],bodyHasScrollBar:!1,prePropRowSelection:void 0,prePagination:void 0},this.rootWrapRef=(0,o.createRef)(),this.wrapRef=(0,o.createRef)(),this.bodyWrapRef=(0,o.createRef)(),this.headerWrapRef=(0,o.createRef)(),this.store=new hf({hoveredRowKey:null}),this.debouncedWindowResize=dl()(this.handleWindowResize,150),this.cachedFilteredSortedDataSource=[],this.cachedFilteredSortedRowKeys=[],this.cachedFilteredSortedRowKeysSet=new Set}static getDerivedStateFromProps(e,t){const i={},{rowSelection:n,dataSource:r,childrenRecordName:s,rowKey:a,pagination:o}=e;if(e.columns&&e.children&&Im.warn("columns should not given by object and children at the same time"),e.columns&&e.columns!==t.cachedColumns){const n=Jg(e.columns);i.flattenColumns=n,i.queries=Rm(t.queries,n,null,!1),i.cachedColumns=e.columns,i.cachedChildren=null}else if(e.children&&e.children!==t.cachedChildren){const n=wf(e.children),r=Jg(n),s=Rm(t.queries,r,null,!1);i.flattenColumns=r,i.queries=[...s],i.cachedColumns=[...n],i.cachedChildren=e.children}if(n!==t.prePropRowSelection){let e={};y()(t.rowSelection)&&(e=Object.assign(Object.assign({},e),t.rowSelection)),y()(n)&&(e=Object.assign(Object.assign({},e),n));const o=Fi()(n,"selectedRowKeys"),l=Fi()(n,"getCheckboxProps");if(o&&Array.isArray(o)&&(e.selectedRowKeysSet=new Set(o)),G()(l)){const e=sf({dataSource:r,getCheckboxProps:l,childrenRecordName:s,rowKey:a}),t=new Set(e);i.disabledRowKeys=e,i.disabledRowKeysSet=t,i.allDisabledRowKeys=e,i.allDisabledRowKeysSet=t}i.rowSelection=e,i.prePropRowSelection=n}if(o!==t.prePagination){let e={};y()(t.pagination)&&(e=Object.assign(Object.assign({},e),t.pagination)),y()(o)&&(e=Object.assign(Object.assign({},e),o)),i.pagination=e,i.prePagination=o}return i}componentDidMount(){super.componentDidMount(),this.setScrollPosition("left"),(this.adapter.isAnyColumnFixed()||this.props.showHeader&&this.adapter.useFixedHeader())&&(this.handleWindowResize(),window.addEventListener("resize",this.debouncedWindowResize))}componentDidUpdate(e,t){const{dataSource:i,expandedRowKeys:n,expandAllRows:r,expandAllGroupRows:s,virtualized:a,components:o,pagination:l}=this.props,{pagination:c,queries:h,cachedColumns:d,cachedChildren:u,groups:p}=this.state,g={};if(this._warnIfNoKey(),Array.isArray(n)&&n!==e.expandedRowKeys&&this.setState({expandedRowKeys:n}),o===e.components&&a===e.virtualized||this.setState({components:Mm(o,a)}),r===e.expandAllRows&&s===e.expandAllGroupRows||this.foundation.initExpandedRowKeys({groups:p}),i!==e.dataSource||d!==t.cachedColumns||u!==t.cachedChildren){const e=[...i],t=this.foundation.getFilteredSortedDataSource(e,h),n=this.foundation.getAllDisabledRowKeys(t);this.foundation.setCachedFilteredSortedDataSource(t),this.foundation.setAllDisabledRowKeys(n),g.dataSource=t,this.props.groupBy&&(g.groups=null)}if(i!==e.dataSource&&(g.pagination=y()(c)?Object.assign(Object.assign({},c),{currentPage:y()(l)&&l.currentPage?l.currentPage:1}):c),Object.keys(g).length){const{pagination:e=null,queries:t=null,dataSource:i=null}=g,n=this.foundation.getCurrentPageData(i,e,t);this.adapter.setAllRowKeys(n.allRowKeys),this.adapter.setDisabledRowKeys(n.disabledRowKeys),"dataSource"in g&&((this.props.defaultExpandAllRows&&n.groups&&n.groups.size||this.props.expandAllRows||this.props.expandAllGroupRows)&&this.foundation.initExpandedRowKeys(n),g.pagination=n.pagination);const r=Object.keys(g);for(const s of r)this.setState({[s]:n[s]})}(this.adapter.isAnyColumnFixed()||this.props.showHeader&&this.adapter.useFixedHeader())&&(this.debouncedWindowResize||window.addEventListener("resize",this.debouncedWindowResize))}componentWillUnmount(){super.componentWillUnmount(),this.debouncedWindowResize&&(window.removeEventListener("resize",this.debouncedWindowResize),this.debouncedWindowResize.cancel(),this.debouncedWindowResize=null)}render(){let e,t=this.props,{scroll:i,prefixCls:n,className:r,style:s={},bordered:a,id:l,pagination:c,virtualized:h,size:u,renderPagination:p,getVirtualizedListRef:g,loading:f,hideExpandedColumn:m,rowSelection:v}=t,y=$m(t,["scroll","prefixCls","className","style","bordered","id","pagination","virtualized","size","renderPagination","getVirtualizedListRef","loading","hideExpandedColumn","rowSelection"]),{rowSelection:b,expandedRowKeys:_,headWidths:x,tableWidth:S,pagination:w,dataSource:C,queries:k,cachedColumns:A,bodyHasScrollBar:E}=this.state;if(s=Object.assign({},s),this.adapter.isAnyColumnUseFullRender(k))e=this.handleColumns(k,A);else{const t=v&&!Fi()(v,"hidden");e=this.foundation.memoizedWithFnsColumns(k,A,t,m,E)}const T=this.foundation.memoizedFilterColumns(e),O=this.foundation.memoizedFlattenFnsColumns(e),P=this.adapter.isAnyColumnFixed(e),M=Object.assign(Object.assign(Object.assign({},y),this.state),{virtualized:h,scroll:i,prefixCls:n,size:u,hideExpandedColumn:m,columns:e,anyColumnFixed:P,rowExpandable:this.mergedRowExpandable,pagination:w,dataSource:C,rowSelection:b,expandedRowKeys:_,renderExpandIcon:this.renderExpandIcon,filteredColumns:T}),I=Fi()(i,"x"),R=Fi()(i,"y");h&&"number"!==typeof s.width&&(s.width=I);const D=d()({["".concat(n,"-").concat(jg.SIZE_SMALL)]:u===jg.SIZE_SMALL,["".concat(n,"-").concat(jg.SIZE_MIDDLE)]:u===jg.SIZE_MIDDLE,["".concat(n,"-virtualized")]:Boolean(h),["".concat(n,"-bordered")]:a,["".concat(n,"-fixed-header")]:Boolean(R),["".concat(n,"-scroll-position-left")]:["both","left"].includes(this.position),["".concat(n,"-scroll-position-right")]:["both","right"].includes(this.position)}),L=w&&c?this.renderPagination(w,p):null,j=Fi()(c,"position","bottom"),F=Object.assign(Object.assign({},this.context),{headWidths:x,tableWidth:S,anyColumnFixed:P,flattenedColumns:O,renderExpandIcon:this.renderExpandIcon,renderSelection:this.renderSelection,setHeadWidths:this.setHeadWidths,getHeadWidths:this.getHeadWidths,getCellWidths:this.getCellWidths,handleRowExpanded:this.handleRowExpanded,getVirtualizedListRef:g,setBodyHasScrollbar:this.setBodyHasScrollbar}),B=this.getDataAttr(y);return o.createElement("div",Object.assign({ref:this.rootWrapRef,className:d()(r,"".concat(n,"-wrapper"),"".concat(n,"-wrapper-").concat(M.direction)),"data-column-fixed":P,style:s,id:l},B),o.createElement(kf,Object.assign({},F,{direction:M.direction}),o.createElement(V,{spinning:f,size:"large"},o.createElement("div",{ref:this.wrapRef,className:D},o.createElement(o.Fragment,{key:"pagination-top"},["top","both"].includes(j)?L:null),this.renderTitle({title:M.title,dataSource:M.dataSource,prefixCls:M.prefixCls}),o.createElement("div",{className:"".concat(n,"-container")},this.renderMainTable(Object.assign({},M))),o.createElement(o.Fragment,{key:"pagination-bottom"},["bottom","both"].includes(j)?L:null)))))}}Jm.contextType=Cf,Jm.propTypes={className:c().string,style:c().object,prefixCls:c().string,components:c().any,bordered:c().bool,loading:c().bool,size:c().oneOf(jg.SIZES),tableLayout:c().oneOf(jg.LAYOUTS),columns:c().arrayOf(c().shape(xf)),hideExpandedColumn:c().bool,id:c().string,expandIcon:c().oneOfType([c().bool,c().func,c().node]),expandCellFixed:c().oneOf(jg.FIXED_SET),title:c().oneOfType([c().string,c().node,c().func]),onHeaderRow:c().func,showHeader:c().bool,indentSize:c().number,rowKey:c().oneOfType([c().func,c().string,c().number]),onRow:c().func,onExpandedRowsChange:c().func,onExpand:c().func,rowExpandable:c().func,expandedRowRender:c().func,expandedRowKeys:c().array,defaultExpandAllRows:c().bool,expandAllRows:c().bool,defaultExpandAllGroupRows:c().bool,expandAllGroupRows:c().bool,defaultExpandedRowKeys:c().array,pagination:c().oneOfType([c().object,c().bool]),renderPagination:c().func,footer:c().oneOfType([c().func,c().string,c().node]),empty:c().node,dataSource:c().array,childrenRecordName:c().string,rowSelection:c().oneOfType([c().object,c().bool]),onChange:c().func,scroll:c().shape({x:c().oneOfType([c().number,c().string,c().bool]),y:c().oneOfType([c().number,c().string])}),groupBy:c().oneOfType([c().string,c().number,c().func]),renderGroupSection:c().oneOfType([c().func]),onGroupedRow:c().func,clickGroupedRowToExpand:c().bool,virtualized:c().oneOfType([c().object,c().bool]),dropdownPrefixCls:c().string,expandRowByClick:c().bool,getVirtualizedListRef:c().func},Jm.defaultProps={tableLayout:"",dataSource:[],prefixCls:Lg.PREFIX,rowSelection:null,className:"",childrenRecordName:"children",size:"default",loading:!1,bordered:!1,expandCellFixed:!1,hideExpandedColumn:!0,showHeader:!0,indentSize:Fg.DEFAULT_INDENT_WIDTH,onChange:r(),pagination:!0,rowKey:"key",defaultExpandedRowKeys:[],defaultExpandAllRows:!1,defaultExpandAllGroupRows:!1,expandAllRows:!1,expandAllGroupRows:!1,onFilterDropdownVisibleChange:r(),onExpand:r(),onExpandedRowsChange:r(),expandRowByClick:!1};const ev=Jm;var tv=i(55357),iv=i.n(tv);function nv(e){const t=iv()(e,/\s+/);for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];const s=Ig()(n,(e=>!t.includes(e)));return d()(e,...s)}function rv(e){const t=iv()(e,/\s+/);for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return sl()(n,(e=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)})),d()(...t)}var sv=i(55003),av=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class ov extends o.PureComponent{render(){const e=this.props,{onResize:t,onResizeStart:i,onResizeStop:n,width:r,resize:s}=e,a=av(e,["onResize","onResizeStart","onResizeStop","width","resize"]);if("number"!==typeof r||!1===s)return o.createElement("th",Object.assign({},a));let{children:l}=a;return l=o.Children.map(l,((e,t)=>o.createElement(o.Fragment,{key:t},e))),o.createElement(sv.Resizable,{width:r,height:0,onResize:t,onResizeStart:i,onResizeStop:n,draggableOpts:{enableUserSelectHack:!1},axis:"x"},o.createElement("th",Object.assign({},a),l))}}const lv=ov;var cv=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const hv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const{components:i,columns:n,resizable:s}=e,a=cv(e,["components","columns","resizable"]),l="children",c=Fi()(s,"onResize",r()),h=Fi()(s,"onResizeStart",r()),d=Fi()(s,"onResizeStop",r()),u=Array.isArray(n)&&n.length?n:wf(e.children),p=ef((0,$.mg)(u),l),g=ef((0,$.mg)(u),l);"function"!==typeof e.expandedRowRender||e.hideExpandedColumn||ol()(p,(e=>e.key===jg.DEFAULT_KEY_COLUMN_EXPAND))||g.unshift({key:jg.DEFAULT_KEY_COLUMN_EXPAND,width:Fg.DEFAULT_WIDTH_COLUMN_EXPAND}),!e.rowSelection||Fi()(e.rowSelection,"hidden")||ol()(p,(e=>e.key===jg.DEFAULT_KEY_COLUMN_SELECTION))||g.unshift({width:Fi()(e,"rowSelection.width",Fg.DEFAULT_WIDTH_COLUMN_SELECTION),key:jg.DEFAULT_KEY_COLUMN_SELECTION});const[f,m]=(0,o.useState)(g);(0,o.useEffect)((()=>{const e=function(e,t){const i=[...t];for(const n of e)if(!(0,L.A)(n.width)){const e=n.key,t=nl()(i,(t=>t.key===e));-1!==t&&(i[t].width=Fi()(n,"width"))}return i}(f,g);m(Rm(f,e))}),[n,e.expandedRowRender,e.hideExpandedColumn,e.rowSelection]);const v=(0,o.useMemo)((()=>mf()({header:{cell:lv}},i)),[i]),y=Fi()(s,"handlerClassName","resizing"),b=e=>(t,i)=>{let{size:n}=i;const r=(0,$.mg)(f),s=nf(r,e,l);let a=Object.assign(Object.assign({},s),{width:n.width});const o=c(a)||{};a=Object.assign(Object.assign({},a),o),Object.assign(s,a),m(r)},_=e=>t=>{const i=(0,$.mg)(f),n=nf(i,e,l);let r=Object.assign(Object.assign({},n),{className:nv(n.className,y)});const s=h(r)||{};r=Object.assign(Object.assign({},r),s),Object.assign(n,r),m(i)},x=e=>t=>{const i=(0,$.mg)(f),n=nf(i,e,l);let r=Object.assign(Object.assign({},n),{className:rv(n.className,y)});const s=d(r)||{};r=Object.assign(Object.assign({},r),s),Object.assign(n,r),m(i)},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.isArray(e)&&e.length?e.map(((e,i)=>{var n,r;const s=null!==(r=null===(n=e.onHeaderCell)||void 0===n?void 0:n.call(e,e,i,t))&&void 0!==r?r:{};Object.assign(e,function(e,t){let i=arguments.length>3?arguments[3]:void 0;return Object.assign(Object.assign({},e),{onHeaderCell:e=>Object.assign(Object.assign({},i),{width:e.width,onResize:b(e),onResizeStart:_(e),onResizeStop:x(e)})})}(e,i,t,s));const a=e[l];return Array.isArray(a)&&a.length&&(e[l]=S(a,t+1)),e})):[]},w=(0,o.useMemo)((()=>S(f)),[f]);return o.createElement(ev,Object.assign({},a,{columns:w,components:v,ref:t}))},dv=o.forwardRef(hv);class uv extends o.PureComponent{constructor(e){super(e),this.getCurrentPageData=()=>this.tableRef.current&&this.tableRef.current.getCurrentPageData(),this.tableRef=o.createRef()}render(){var e;const t=this.props,i=null!==(e=this.props.direction)&&void 0!==e?e:this.context.direction;return t.resizable?o.createElement(dv,Object.assign({},t,{ref:this.tableRef,direction:i})):o.createElement(ev,Object.assign({},t,{ref:this.tableRef,direction:i}))}}uv.Column=Sf,uv.DEFAULT_KEY_COLUMN_SELECTION=jg.DEFAULT_KEY_COLUMN_SELECTION,uv.DEFAULT_KEY_COLUMN_EXPAND=jg.DEFAULT_KEY_COLUMN_EXPAND,uv.propTypes=Object.assign(Object.assign({},ev.propTypes),{resizable:c().oneOfType([c().bool,c().object])}),uv.defaultProps={hideExpandedColumn:!0},uv.contextType=en.A;const pv=uv,gv={TABS:"".concat(p._,"-tabs"),TABS_BAR:"".concat(p._,"-tabs-bar"),TABS_BAR_LINE:"".concat(p._,"-tabs-bar-line"),TABS_BAR_CARD:"".concat(p._,"-tabs-bar-card"),TABS_BAR_BUTTON:"".concat(p._,"-tabs-bar-button"),TABS_BAR_EXTRA:"".concat(p._,"-tabs-bar-extra"),TABS_TAB:"".concat(p._,"-tabs-tab"),TABS_TAB_ACTIVE:"".concat(p._,"-tabs-tab-active"),TABS_TAB_DISABLED:"".concat(p._,"-tabs-tab-disabled"),TABS_CONTENT:"".concat(p._,"-tabs-content"),TABS_CONTENT_ANIMATED:"".concat(p._,"-tabs-content-animated"),TABS_CONTENT_NO_ANIMATED:"".concat(p._,"-tabs-content-no-animated"),TABS_PANE:"".concat(p._,"-tabs-pane"),TABS_PANE_INACTIVE:"".concat(p._,"-tabs-pane-inactive"),TABS_PANE_ACTIVE:"".concat(p._,"-tabs-pane-active"),TABS_PANE_MOTION_OVERLAY:"".concat(p._,"-tabs-pane-motion-overlay"),TABS_PANE_ANIMATING:"".concat(p._,"-tabs-pane-animating"),TABS_PANE_ANIMATE_LEFT_SHOW:"".concat(p._,"-tabs-pane-animate-leftShow"),TABS_PANE_ANIMATE_RIGHT_SHOW:"".concat(p._,"-tabs-pane-animate-rightShow"),TABS_PANE_ANIMATE_TOP_SHOW:"".concat(p._,"-tabs-pane-animate-topShow"),TABS_PANE_ANIMATE_BOTTOM_SHOW:"".concat(p._,"-tabs-pane-animate-bottomShow")},fv=["line","card","button"],mv=["small","medium","large"],vv=["top","left"];class yv extends k.A{constructor(e){super(Object.assign({},e)),this.destroy=r(),this.handlePrevent=e=>{e.stopPropagation(),e.preventDefault()},this.handleKeyDown=(e,t,i)=>{const{preventScroll:n}=this.getProps(),r=[...e.target.parentNode.childNodes].filter((e=>Fi()(e,"attributes.data-tabkey.value","").includes("semiTab")&&"true"!==Fi()(e,"attributes.aria-disabled.value","")));switch(e.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.determineOrientation(e,r);break;case"Backspace":case"Delete":this.handleDeleteKeyDown(e,r,t,i);break;case"Enter":case" ":this.handleTabClick(t,e),this.handlePrevent(e);break;case"Home":r[0].focus({preventScroll:n}),this.handlePrevent(e);break;case"End":r[r.length-1].focus({preventScroll:n}),this.handlePrevent(e)}}}init(){this._adapter.collectPane()}_notifyChange(e){const{activeKey:t}=this.getStates();t!==e&&this._adapter.notifyChange(e)}handleTabClick(e,t){this._isInProps("activeKey")?this._notifyChange(e):(this._notifyChange(e),this.handleNewActiveKey(e)),this._adapter.notifyTabClick(e,t)}handleNewActiveKey(e){const{activeKey:t}=this.getStates();t!==e&&this._adapter.setNewActiveKey(e)}getDefaultActiveKey(){let e;const t=this.getProps();return e="activeKey"in t?t.activeKey:"defaultActiveKey"in t?t.defaultActiveKey:this._adapter.getDefaultActiveKeyFromChildren(),e}handleTabListChange(){this._adapter.collectPane()}handleTabPanesChange(){this._adapter.collectPane(),this._adapter.collectActiveKey()}handleTabDelete(e){this._adapter.notifyTabDelete(e)}determineOrientation(e,t){const{tabPosition:i}=this.getProps();"left"===i?"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(this.switchTabOnArrowPress(e,t),this.handlePrevent(e)):"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(this.switchTabOnArrowPress(e,t),this.handlePrevent(e))}handleDeleteKeyDown(e,t,i,n){const{preventScroll:r}=this.getProps();if(n){this.handleTabDelete(i);const n=t.indexOf(e.target);1!==t.length&&t[n+1>=t.length?n-1:n+1].focus({preventScroll:r})}}switchTabOnArrowPress(e,t){const{preventScroll:i}=this.getProps(),n=t.indexOf(e.target),r={ArrowLeft:-1,ArrowUp:-1,ArrowRight:1,ArrowDown:1};r[e.key]&&void 0!==n&&(t[n+r[e.key]]?t[n+r[e.key]].focus({preventScroll:i}):"ArrowLeft"===e.key||"ArrowUp"===e.key?t[t.length-1].focus({preventScroll:i}):"ArrowRight"!==e.key&&"ArrowDown"!=e.key||t[0].focus({preventScroll:i}))}}const bv=yv;var _v=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const xv=(e,t)=>{const{tab:i,size:n,type:r,icon:s,selected:a,closable:l,disabled:c,itemKey:h,deleteTabItem:u,tabPosition:p,handleKeyDown:g,onClick:f}=e,m=_v(e,["tab","size","type","icon","selected","closable","disabled","itemKey","deleteTabItem","tabPosition","handleKeyDown","onClick"]),v=(0,o.useMemo)((()=>"card"===r&&l?o.createElement(pt,{"aria-label":"Close",role:"button",className:"".concat(gv.TABS_TAB,"-icon-close"),onClick:e=>u(h,e)}):null),[r,l,u,h]),y=(0,o.useCallback)((e=>o.createElement("span",{className:"".concat(gv.TABS_BAR,"-icon")},e)),[]),b=(0,o.useCallback)((e=>{g&&g(e,h,l)}),[g,h,l]),_=(0,o.useCallback)((e=>{!c&&f&&f(h,e)}),[h,c,f]),x=s?y(s):null,S=d()(gv.TABS_TAB,"".concat(gv.TABS_TAB,"-").concat(r),"".concat(gv.TABS_TAB,"-").concat(p),"".concat(gv.TABS_TAB,"-single"),{[gv.TABS_TAB_ACTIVE]:a,[gv.TABS_TAB_DISABLED]:c,["".concat(gv.TABS_TAB,"-small")]:"small"===n,["".concat(gv.TABS_TAB,"-medium")]:"medium"===n});return o.createElement("div",Object.assign({role:"tab",id:"semiTab".concat(h),"data-tabkey":"semiTab".concat(h),"aria-controls":"semiTabPanel".concat(h),"aria-disabled":c?"true":"false","aria-selected":a?"true":"false",tabIndex:a?0:-1,onKeyDown:b,onClick:_,className:S},m,{ref:t}),x,i,v)},Sv=(0,o.forwardRef)(xv);Sv.elementType="Tabs.TabItem";const wv=Sv;var Cv=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class kv extends o.Component{constructor(e){var t;super(e),t=this,this.handleItemClick=(e,t)=>{this.props.onTabClick(e,t)},this.handleKeyDown=(e,t,i)=>{this.props.handleKeyDown(e,t,i)},this.renderTabItem=e=>{const{size:t,type:i,deleteTabItem:n,handleKeyDown:r,tabPosition:s}=this.props,a=this._isActive(e.itemKey);return o.createElement(wv,Object.assign({},qi()(e,["disabled","icon","itemKey","tab","closable"]),{key:this._getItemKey(e.itemKey),selected:a,size:t,type:i,tabPosition:s,handleKeyDown:r,deleteTabItem:n,onClick:this.handleItemClick}))},this.scrollTabItemIntoViewByKey=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest";const n=document.querySelector('[data-uuid="'.concat(t.state.uuid,'"] .').concat(gv.TABS_TAB,'[data-scrollkey="').concat(e,'"]'));null===n||void 0===n||n.scrollIntoView({behavior:"smooth",block:i,inline:i})},this.scrollActiveTabItemIntoView=e=>{const t=this._getItemKey(this.props.activeKey);this.scrollTabItemIntoViewByKey(t,e)},this.renderTabComponents=e=>e.map((e=>this.renderTabItem(e))),this.handleArrowClick=(e,t)=>{const i="start"===t?e.pop():e.shift();if(!i)return;const n=this._getItemKey(i.itemKey);this.scrollTabItemIntoViewByKey(n)},this.renderCollapse=(e,t,i)=>{if(dp()(e))return o.createElement(St,{disabled:!0,icon:t,theme:"borderless"});const{dropdownClassName:n,dropdownStyle:r}=this.props,{rePosKey:s}=this.state,a=!e.length,l=o.createElement(Bh.Menu,null,e.map((e=>{const{icon:t,tab:i,itemKey:n}=e,r=t?this.renderIcon(e.icon):null;return o.createElement(Bh.Item,{key:n,onClick:e=>this.handleItemClick(n,e),active:this._isActive(n)},r,i)}))),c=d()({["".concat(gv.TABS_BAR,"-arrow-").concat(i)]:i,["".concat(gv.TABS_BAR,"-arrow")]:!0}),h=d()(n,{["".concat(gv.TABS_BAR,"-dropdown")]:!0});return o.createElement(Bh,{className:h,clickToHide:!0,clickTriggerToHide:!0,key:"".concat(s,"-").concat(i),position:"start"===i?"bottomLeft":"bottomRight",render:a?null:l,showTick:!0,style:r,trigger:"hover",disableFocusListener:!0},o.createElement("div",{role:"presentation",className:c,onClick:t=>this.handleArrowClick(e,i)},o.createElement(St,{disabled:a,icon:t,theme:"borderless"})))},this.renderOverflow=e=>e.map(((e,t)=>{const i=0===t?o.createElement(Lo,null):o.createElement(jo,null),n=0===t?"start":"end";return this.renderCollapse(e,i,n)})),this.renderCollapsedTab=()=>{const{list:e}=this.props,t=e.map((e=>{const{itemKey:t}=e;return Object.assign({key:this._getItemKey(t),active:this._isActive(t)},e)}));return o.createElement(xp,{items:t,overflowRenderer:this.renderOverflow,renderMode:"scroll",className:"".concat(gv.TABS_BAR,"-overflow-list"),visibleItemRenderer:this.renderTabItem})},this.renderWithMoreTrigger=()=>{const{list:e,more:t}=this.props;let i,n=[],r=o.createElement("div",{className:d()({["".concat(gv.TABS_BAR,"-more-trigger")]:!0,["".concat(gv.TABS_BAR,"-more-trigger-").concat(this.props.type)]:!0})},o.createElement(pe.A,{componentName:"Tabs"},((e,t)=>o.createElement("div",{className:"".concat(gv.TABS_BAR,"-more-trigger-content")},o.createElement("div",null,e.more),o.createElement(Nd,{className:"".concat(gv.TABS_BAR,"-more-trigger-content-icon")})))));if("number"===typeof t)i=e.length-Math.min(t,e.length),n=e.slice(0,i).map((e=>this.renderTabItem(e)));else if("object"===typeof t)i=e.length-Math.min(t.count,e.length),n=e.slice(0,i).map((e=>this.renderTabItem(e))),t.render&&(r=t.render());else if(void 0!==t)throw new Error("[Semi Tabs]: invalid tab props format: more");return o.createElement(o.Fragment,null,n,this.renderMoreDropdown(e.slice(i),null===t||void 0===t?void 0:t.dropdownProps,r))},this.renderMoreDropdown=(e,t,i)=>o.createElement(Bh,Object.assign({trigger:"hover",showTick:!0,position:"bottomLeft",className:"".concat(gv.TABS_BAR,"-more-dropdown-").concat(this.props.type),clickToHide:!0,menu:e.map((e=>({node:"item",name:e.tab,icon:e.icon,onClick:t=>this.props.onTabClick(e.itemKey,t),active:this.props.activeKey===e.itemKey})))},t),i),this._isActive=e=>e===this.props.activeKey,this._getItemKey=e=>"".concat(e,"-bar"),this.state={endInd:e.list.length,rePosKey:0,startInd:0,uuid:""}}componentDidMount(){this.setState({uuid:(0,Ie.i7)()})}componentDidUpdate(e){e.activeKey!==this.props.activeKey&&this.props.collapsible&&this.scrollActiveTabItemIntoView()}renderIcon(e){return o.createElement("span",null,e)}renderExtra(){const{tabBarExtraContent:e,type:t,size:i}=this.props,n={float:"right"},r=e&&e.props?e.props.style:{},s=d()(gv.TABS_BAR_EXTRA,{["".concat(gv.TABS_BAR,"-").concat(t,"-extra")]:t,["".concat(gv.TABS_BAR,"-").concat(t,"-extra-").concat(i)]:i});if(e){const t=Object.assign(Object.assign({},n),r);return o.createElement("div",{className:s,style:t,"x-semi-prop":"tabBarExtraContent"},e)}return null}render(){const e=this.props,{type:t,style:i,className:n,list:r,tabPosition:s,more:a,collapsible:l}=e,c=Cv(e,["type","style","className","list","tabPosition","more","collapsible"]),h=d()(n,{[gv.TABS_BAR]:!0,[gv.TABS_BAR_LINE]:"line"===t,[gv.TABS_BAR_CARD]:"card"===t,[gv.TABS_BAR_BUTTON]:"button"===t,["".concat(gv.TABS_BAR,"-").concat(s)]:s,["".concat(gv.TABS_BAR,"-collapse")]:l}),u=this.renderExtra(),p=l?this.renderCollapsedTab():a?this.renderWithMoreTrigger():this.renderTabComponents(r);return o.createElement("div",Object.assign({role:"tablist","aria-orientation":"left"===s?"vertical":"horizontal",className:h,style:i},(0,Qt.A)(c),{"data-uuid":this.state.uuid}),p,u)}}kv.propTypes={activeKey:c().string,className:c().string,collapsible:c().bool,list:c().array,onTabClick:c().func,size:c().oneOf(mv),style:c().object,tabBarExtraContent:c().node,tabPosition:c().oneOf(vv),type:c().oneOf(fv),closable:c().bool,deleteTabItem:c().func,more:c().oneOfType([c().number,c().object])};const Av=kv,Ev=o.createContext({});var Tv=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Ov extends o.PureComponent{constructor(){super(...arguments),this.ref=(0,o.createRef)(),this.getDirection=(e,t,i,n)=>{if(null!==t&&null!==e&&Array.isArray(i)&&i.length){const r=i.findIndex((t=>t.itemKey===e)),s=i.findIndex((e=>e.itemKey===t)),a=i.findIndex((e=>e.itemKey===n));return r===s?a>r:s<r}return!1},this.shouldRender=()=>{const{itemKey:e}=this.props,{activeKey:t,lazyRender:i}=this.context,n=t===e;return this._active=this._active||n,!i||this._active}}render(){const{tabPaneMotion:e,tabPosition:t,prevActiveKey:i}=this.context,n=this.props,{className:r,style:s,children:a,itemKey:l,tabIndex:c}=n,h=Tv(n,["className","style","children","itemKey","tabIndex"]),u=this.context.activeKey===l,p=d()(r,{[gv.TABS_PANE_INACTIVE]:!u,[gv.TABS_PANE_ACTIVE]:u,[gv.TABS_PANE]:!0}),g=this.shouldRender(),f=(()=>{const e=this.getDirection(this.context.activeKey,l,this.context.panes,i);return"top"===t?e?gv.TABS_PANE_ANIMATE_RIGHT_SHOW:gv.TABS_PANE_ANIMATE_LEFT_SHOW:e?gv.TABS_PANE_ANIMATE_BOTTOM_SHOW:gv.TABS_PANE_ANIMATE_TOP_SHOW})(),m=!this.context.panes.find((e=>e.itemKey===i)),v=e&&u&&!m&&!this.context.forceDisableMotion;return o.createElement("div",Object.assign({ref:this.ref,role:"tabpanel",id:"semiTabPanel".concat(l),"aria-labelledby":"semiTab".concat(l),className:p,style:s,"aria-hidden":u?"false":"true",tabIndex:c||0},(0,Qt.A)(h),{"x-semi-prop":"children"}),o.createElement(Nc.A,{motion:v,animationState:u?"enter":"leave",startClassName:f},(e=>{let{animationClassName:t,animationEventsNeedBind:i}=e;return o.createElement("div",Object.assign({className:d()(gv.TABS_PANE_MOTION_OVERLAY,t),"x-semi-prop":"children"},i),g?a:null)})))}}Ov.isTabPane=!0,Ov.contextType=Ev,Ov.propTypes={className:c().string,style:c().object,children:c().node,disabled:c().bool,itemKey:c().string,tab:c().node,icon:c().node,closable:c().bool};const Pv=Ov;var Mv=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Iv=["className","style","disabled","itemKey","tab","icon"];class Rv extends M.A{constructor(e){super(e),this.setContentRef=e=>{this.contentRef={current:e}},this.getPanes=()=>{const{tabList:e,children:t}=this.props;return Array.isArray(e)&&e.length?e:o.Children.map(t,(e=>{if(e){const{tab:t,icon:i,disabled:n,itemKey:r,closable:s}=e.props;return{tab:t,icon:i,disabled:n,itemKey:r,closable:s}}}))},this.onTabClick=(e,t)=>{this.foundation.handleTabClick(e,t)},this.rePosChildren=(e,t)=>{const i=[],n=o.Children.toArray(e);return e.length&&(i.push(...n.filter((e=>e.props&&e.props.itemKey===t))),i.push(...n.filter((e=>e.props&&e.props.itemKey!==t)))),i},this.getActiveItem=()=>{const{activeKey:e}=this.state,{children:t,tabList:i}=this.props;return i||!Array.isArray(t)?t:o.Children.toArray(t).filter((t=>!((0,o.isValidElement)(t)&&t.type&&t.type.isTabPane)||t.props.itemKey===e))},this.deleteTabItem=(e,t)=>{t.stopPropagation(),this.foundation.handleTabDelete(e)},this.foundation=new bv(this.adapter),this.state={activeKey:this.foundation.getDefaultActiveKey(),panes:this.getPanes(),prevActiveKey:null,forceDisableMotion:!1},this.contentRef=(0,o.createRef)(),this.contentHeight="auto"}get adapter(){return Object.assign(Object.assign({},super.adapter),{collectPane:()=>{const e=this.getPanes();this.setState({panes:e})},collectActiveKey:()=>{const{tabList:e,children:t,activeKey:i}=this.props;if("undefined"!==typeof i)return;const{activeKey:n}=this.state,r=this.getPanes();-1===r.findIndex((e=>e.itemKey===n))&&(r.length>0?this.setState({activeKey:r[0].itemKey}):this.setState({activeKey:""}))},notifyTabClick:(e,t)=>{this.props.onTabClick(e,t)},notifyChange:e=>{this.props.onChange(e)},setNewActiveKey:e=>{this.setState({activeKey:e})},getDefaultActiveKeyFromChildren:()=>{const{tabList:e,children:t}=this.props;let i="";return(e||o.Children.toArray(t).map((e=>(0,o.isValidElement)(e)?e.props:null))).forEach((e=>{!e||i||e.disabled||(i=e.itemKey)})),i},notifyTabDelete:e=>{this.props.onTabClose&&this.props.onTabClose(e)}})}static getDerivedStateFromProps(e,t){const i={};return(0,L.A)(e.activeKey)||e.activeKey===t.activeKey||(t.prevActiveKey=t.activeKey,i.activeKey=e.activeKey),i}componentDidUpdate(e,t){const i=o.Children.toArray(e.children).map((e=>qi()((0,o.isValidElement)(e)?e.props:null,Iv))),n=o.Children.toArray(this.props.children).map((e=>qi()((0,o.isValidElement)(e)?e.props:null,Iv))),r=this.props.tabList||e.tabList;if(a()(this.props.tabList,e.tabList)||this.foundation.handleTabListChange(),t.activeKey!==this.state.activeKey&&t.activeKey!==this.state.prevActiveKey&&this.setState({prevActiveKey:t.activeKey}),e.activeKey!==this.props.activeKey){const e=(()=>{const e=new Set(i.map((e=>e.itemKey)));return n.map((e=>e.itemKey)).filter((t=>!e.has(t)))})();this.setState({forceDisableMotion:e.includes(this.props.activeKey)})}a()(i,n)||r||this.foundation.handleTabPanesChange()}render(){const e=this.props,{children:t,className:i,collapsible:n,contentStyle:r,keepDOM:s,lazyRender:a,renderTabBar:l,size:c,style:h,tabBarClassName:u,tabBarExtraContent:p,tabBarStyle:g,tabPaneMotion:f,tabPosition:m,type:v,more:y}=e,b=Mv(e,["children","className","collapsible","contentStyle","keepDOM","lazyRender","renderTabBar","size","style","tabBarClassName","tabBarExtraContent","tabBarStyle","tabPaneMotion","tabPosition","type","more"]),{panes:_,activeKey:x}=this.state,S=d()(i,{[gv.TABS]:!0,["".concat(gv.TABS,"-").concat(m)]:m}),w=d()({[gv.TABS_CONTENT]:!0,["".concat(gv.TABS_CONTENT,"-").concat(m)]:m}),C={activeKey:x,className:u,collapsible:n,list:_,onTabClick:this.onTabClick,size:c,style:g,tabBarExtraContent:p,tabPosition:m,type:v,deleteTabItem:this.deleteTabItem,handleKeyDown:this.foundation.handleKeyDown,more:y},k=l?l(C,Av):o.createElement(Av,Object.assign({},C)),A=s?t:this.getActiveItem();return o.createElement("div",Object.assign({className:S,style:h},this.getDataAttr(b)),k,o.createElement(Ev.Provider,{value:{activeKey:x,lazyRender:a,panes:_,tabPaneMotion:f,tabPosition:m,prevActiveKey:this.state.prevActiveKey,forceDisableMotion:this.state.forceDisableMotion}},o.createElement("div",{ref:this.setContentRef,className:w,style:Object.assign({},r)},A)))}}Rv.TabPane=Pv,Rv.TabItem=wv,Rv.propTypes={activeKey:c().string,className:c().string,collapsible:c().bool,contentStyle:c().oneOfType([c().object]),defaultActiveKey:c().string,keepDOM:c().bool,lazyRender:c().bool,onChange:c().func,onTabClick:c().func,renderTabBar:c().func,size:c().oneOf(mv),style:c().object,tabBarClassName:c().string,tabBarExtraContent:c().node,tabBarStyle:c().object,tabList:c().array,tabPaneMotion:c().bool,tabPosition:c().oneOf(vv),type:c().oneOf(fv),onTabClose:c().func,preventScroll:c().bool,more:c().oneOfType([c().number,c().object])},Rv.__SemiComponentName__="Tabs",Rv.defaultProps=(0,$.bQ)(Rv.__SemiComponentName__,{children:[],collapsible:!1,keepDOM:!0,lazyRender:!1,onChange:()=>{},onTabClick:()=>{},size:"large",tabPaneMotion:!0,tabPosition:"top",type:"line",onTabClose:()=>{}});const Dv=Rv;class Lv extends k.A{constructor(e){super(Object.assign(Object.assign({},Lv.defaultAdapter),e)),this.handleMouseInSideChange=e=>{this._adapter.handleMouseInSideChange(e)},this.getInputWrapperRect=()=>this._adapter.getInputWrapperRect()}hasToast(e){return this._adapter.getState("list").map((e=>{let{id:t}=e;return t})).includes(e)}addToast(e){const t=this._adapter.getState("list");t.push(e),this._adapter.updateToast(t,[],[])}updateToast(e,t){let i=this._adapter.getState("list");i=i.map((i=>i.id===e?Object.assign(Object.assign({},i),t):i));const n=i.filter((t=>t.id===e));this._adapter.updateToast(i,[],n)}removeToast(e){let t=this._adapter.getState("list");const i=[];t=t.filter((t=>t.id!==e||(i.push(t),!1))),this._adapter.updateToast(t,i,[])}destroyAll(){const e=this._adapter.getState("list");e.length>0&&this._adapter.updateToast([],e,[])}}const jv="".concat(p._,"-toast"),Fv={PREFIX:jv,WRAPPER:"".concat(jv,"-wrapper"),LIST:"".concat(jv,"-list")},Bv={types:["warning","success","info","error","default"],themes:["normal","light"],directions:["ltr","rtl"]};class Nv extends k.A{constructor(e){super(Object.assign(Object.assign({},Nv.defaultAdapter),e)),this._timer=null,this._id=null}init(){this.startCloseTimer_(),this._id=this._adapter.getProp("id")}destroy(){this.clearCloseTimer_()}startCloseTimer_(){const e=this._adapter.getProp("duration");e&&S()(e)&&(this._timer=setTimeout((()=>{this.close()}),1e3*e))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}clearCloseTimer_(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this.clearCloseTimer_(),this.startCloseTimer_()}}const zv=Fv.PREFIX;class Hv extends M.A{constructor(e){super(e),this.toastEle=o.createRef(),this.clearCloseTimer=()=>{this.foundation.clearCloseTimer_()},this.startCloseTimer=()=>{this.foundation.startCloseTimer_()},this.restartCloseTimer=()=>{this.foundation.restartCloseTimer()},this.state={},this.foundation=new Nv(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose()}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}close(e){this.foundation.close(e)}renderIcon(){const{type:e,icon:t}=this.props,i={warning:o.createElement(gt,null),success:o.createElement(ft,null),info:o.createElement(mt,null),error:o.createElement(vt,null)}[e],n="large",r=d()("".concat(zv,"-icon"),"".concat(zv,"-icon-").concat(e));return t?(0,$.uR)(t)?o.cloneElement(t,{size:n,className:"".concat(zv,"-icon")}):t:e&&i?o.cloneElement(i,{size:n,className:r}):null}render(){const{content:e,type:t,theme:i,showClose:n,textMaxWidth:r,className:s,style:a}=this.props,l=this.props.direction||this.context.direction,c=d()(zv,s,{["".concat(zv,"-").concat(t)]:!0,["".concat(zv,"-").concat(i)]:"light"===i,["".concat(zv,"-rtl")]:"rtl"===l}),h={};h.maxWidth=r;const u=this.props.positionInList?this.props.positionInList.length-this.props.positionInList.index-1:0,p=o.createElement("div",{ref:this.toastEle,role:"alert","aria-label":"".concat(t||"default"," type"),className:c,style:Object.assign(Object.assign({},a),{transform:"translate3d(0,0,".concat(-10*u,"px)")}),onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onAnimationStart:this.props.onAnimationStart,onAnimationEnd:this.props.onAnimationEnd},o.createElement("div",{className:"".concat(zv,"-content")},this.renderIcon(),o.createElement("span",{className:"".concat(zv,"-content-text"),style:h,"x-semi-prop":"content"},e),n&&o.createElement("div",{className:"".concat(zv,"-close-button")},o.createElement($e,{onClick:e=>this.close(e),type:"tertiary",icon:o.createElement(pt,{"x-semi-prop":"icon"}),theme:"borderless",size:"small"}))));if(this.props.stack){const e=this.props.stackExpanded&&this.toastEle.current&&getComputedStyle(this.toastEle.current).height||0;return o.createElement("div",{className:"".concat(zv,"-zero-height-wrapper"),style:{height:e}},p)}return p}}Hv.contextType=en.A,Hv.propTypes={onClose:c().func,content:c().node,close:c().func,duration:c().number,theme:c().oneOf(Bv.themes),type:c().oneOf(Bv.types),textMaxWidth:c().oneOfType([c().string,c().number]),style:c().object,className:c().string,showClose:c().bool,stack:c().bool,stackExpanded:c().bool,icon:c().node,direction:c().oneOf(Bv.directions)},Hv.__SemiComponentName__="Toast",Hv.defaultProps=(0,$.bQ)(Hv.__SemiComponentName__,{onClose:r(),content:"",close:r(),duration:3,textMaxWidth:450,showClose:!0,stack:!1,stackExpanded:!1,theme:"normal"});const Vv=Hv;var Uv=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Wv=(e,t)=>{var{afterClose:i}=e,n=Uv(e,["afterClose"]);const[r,s]=(0,o.useState)(!0);return o.useImperativeHandle(t,(()=>({close:()=>{s(!1)}}))),(0,o.useEffect)((()=>{r||i(n.id)}),[r]),r?o.createElement(Vv,Object.assign({},n,{close:()=>{s(!1)}})):null},Gv=o.forwardRef(Wv),Kv={motion:!0,zIndex:1010,duration:3};function Yv(){const[e,t]=function(){const[e,t]=o.useState([]);return[e,function(e,i){return t((t=>[{element:e,config:i},...t])),e=>{t((t=>t.filter((t=>{let{config:i}=t;return i.id!==e}))))}}]}(),i=(0,o.useRef)(new Map),n=e=>{const n=(0,Ie.Ay)("semi_toast_"),s=Object.assign(Object.assign({},e),{id:n});let a;const l=o.createElement(Gv,Object.assign({},s,{key:n,afterClose:e=>a(e),ref:e=>{var t;i.current.set(n,{close:null!==(t=null===e||void 0===e?void 0:e.close)&&void 0!==t?t:r()})}}));return a=t(l,Object.assign({},s)),n};return[{success:e=>n(Object.assign(Object.assign(Object.assign({},Kv),e),{type:"success"})),info:e=>n(Object.assign(Object.assign(Object.assign({},Kv),e),{type:"info"})),error:e=>n(Object.assign(Object.assign(Object.assign({},Kv),e),{type:"error"})),warning:e=>n(Object.assign(Object.assign(Object.assign({},Kv),e),{type:"warning"})),open:e=>n(Object.assign(Object.assign(Object.assign({},Kv),e),{type:"default"})),close:e=>(e=>{var t;const{close:n}=null!==(t=i.current.get(e))&&void 0!==t?t:{};null===n||void 0===n||n()})(e)},o.createElement(o.Fragment,null,Array.isArray(e)&&e.length?o.createElement(o.Fragment,null,e.map((e=>e.element))):null)]}const Xv=()=>{var e;return e=class e extends M.A{constructor(e){super(e),this.stack=!1,this.innerWrapperRef=o.createRef(),this.handleMouseEnter=e=>{this.stack&&this.foundation.handleMouseInSideChange(!0)},this.handleMouseLeave=e=>{var t;if(this.stack){(null===(t=this.foundation.getInputWrapperRect())||void 0===t?void 0:t.height)&&this.foundation.handleMouseInSideChange(!1)}},this.state={list:[],removedItems:[],updatedItems:[],mouseInSide:!1},this.foundation=new Lv(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateToast:(e,t,i)=>{this.setState({list:e,removedItems:t,updatedItems:i})},handleMouseInSideChange:e=>{this.setState({mouseInSide:e})},getInputWrapperRect:()=>{var e;return null===(e=this.innerWrapperRef.current)||void 0===e?void 0:e.getBoundingClientRect()}})}static create(t){var i;const n=null!==(i=t.id)&&void 0!==i?i:(0,Ie.Ay)("toast");if(e.ref){const i=document.querySelector("#".concat(this.wrapperId));["top","left","bottom","right"].map((e=>{e in t&&(i.style[e]="number"===typeof t[e]?"".concat(t[e],"px"):t[e])})),Boolean(t.stack)!==e.ref.stack&&(e.ref.stack=Boolean(t.stack)),e.ref.has(n)?e.ref.update(n,Object.assign(Object.assign({},t),{id:n})):e.ref.add(Object.assign(Object.assign({},t),{id:n}))}else{const i=document.createElement("div");if(this.wrapperId||(this.wrapperId=(0,Ie.Ay)("toast-wrapper").slice(0,26)),i.className=Fv.WRAPPER,i.id=this.wrapperId,i.style.zIndex=String("number"===typeof t.zIndex?t.zIndex:e.defaultOpts.zIndex),["top","left","bottom","right"].map((n=>{if(n in e.defaultOpts||n in t){const r=t[n]?t[n]:e.defaultOpts[n];i.style[n]="number"===typeof r?"".concat(r,"px"):r}})),e.defaultOpts.getPopupContainer){e.defaultOpts.getPopupContainer().appendChild(i)}else document.body.appendChild(i);ye.render(o.createElement(e,{ref:t=>e.ref=t}),i,(()=>{e.ref.add(Object.assign(Object.assign({},t),{id:n})),e.ref.stack=Boolean(t.stack)}))}return n}static close(t){e.ref&&e.ref.remove(t)}static destroyAll(){if(e.ref){e.ref.destroyAll();const t=document.querySelector("#".concat(this.wrapperId));ye.unmountComponentAtNode(t),t&&t.parentNode.removeChild(t),e.ref=null,this.wrapperId=null}}static getWrapperId(){return this.wrapperId}static info(t){return"string"===typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"info"}))}static warning(t){return"string"===typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"warning"}))}static error(t){return"string"===typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"error"}))}static success(t){return"string"===typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"success"}))}static config(t){["top","left","bottom","right"].forEach((i=>{i in t&&(e.defaultOpts[i]=t[i])})),"string"===typeof t.theme&&Bv.themes.includes(t.theme)&&(e.defaultOpts.theme=t.theme),"number"===typeof t.zIndex&&(e.defaultOpts.zIndex=t.zIndex),"number"===typeof t.duration&&(e.defaultOpts.duration=t.duration),"function"===typeof t.getPopupContainer&&(e.defaultOpts.getPopupContainer=t.getPopupContainer)}has(e){return this.foundation.hasToast(e)}add(e){return this.foundation.addToast(e)}update(e,t){return this.foundation.updateToast(e,t)}remove(e){return this.foundation.removeToast(e)}destroyAll(){return this.foundation.destroyAll()}render(){let{list:e}=this.state;const{removedItems:t,updatedItems:i}=this.state;e=Array.from(new Set([...e,...t]));const n=i.map((e=>{let{id:t}=e;return t})),r=e=>{var t;(null===(t=null===e||void 0===e?void 0:e.foundation)||void 0===t?void 0:t._id)&&n.includes(e.foundation._id)&&e.foundation.restartCloseTimer()};return o.createElement(o.Fragment,null,o.createElement("div",{className:d()({["".concat(Fv.PREFIX,"-innerWrapper")]:!0,["".concat(Fv.PREFIX,"-innerWrapper-hover")]:this.state.mouseInSide}),ref:this.innerWrapperRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},e.map(((i,n)=>{const s=void 0!==t.find((e=>e.id===i.id));return o.createElement(Nc.A,{key:i.id,motion:i.motion,animationState:s?"leave":"enter",startClassName:"".concat(Fv.PREFIX,s?"-animation-hide":"-animation-show")},(t=>{let{animationClassName:a,animationEventsNeedBind:l,isAnimating:c}=t;return s&&!c?null:o.createElement(Vv,Object.assign({},i,{stack:this.stack,stackExpanded:this.state.mouseInSide,positionInList:{length:e.length,index:n},className:d()({[i.className]:Boolean(i.className),[a]:!0})},l,{style:Object.assign({},i.style),close:e=>this.remove(e),ref:r}))}))}))))}},e.defaultOpts={motion:!0,zIndex:1010,content:""},e.propTypes={content:c().node,duration:c().number,onClose:c().func,icon:c().node,direction:c().oneOf(Bv.directions),stack:c().bool},e.defaultProps={},e};const qv=class{static create(e){const t=Xv();return t.useToast=Yv,e&&t.config(e),t}}.create();function Zv(){return Zv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Zv.apply(this,arguments)}function Qv(e){return Qv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qv(e)}function $v(e,t){return $v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$v(e,t)}function Jv(e,t,i){return Jv=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Ey){return!1}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&$v(r,i.prototype),r},Jv.apply(null,arguments)}function ey(e){var t="function"===typeof Map?new Map:void 0;return ey=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Jv(e,arguments,Qv(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),$v(n,e)},ey(e)}var ty=/%[sdj%]/g;function iy(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var i=e.field;t[i]=t[i]||[],t[i].push(e)})),t}function ny(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=1,r=t[0],s=t.length;return"function"===typeof r?r.apply(null,t.slice(1)):"string"===typeof r?String(r).replace(ty,(function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(t[n++]);case"%d":return Number(t[n++]);case"%j":try{return JSON.stringify(t[n++])}catch(i){return"[Circular]"}break;default:return e}})):r}function ry(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!==typeof e||e))}function sy(e,t,i){var n=0,r=e.length;!function s(a){if(a&&a.length)i(a);else{var o=n;n+=1,o<r?t(e[o],s):i([])}}([])}var ay=function(e){var t,i;function n(t,i){var n;return(n=e.call(this,"Async Validation Error")||this).errors=t,n.fields=i,n}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,$v(t,i),n}(ey(Error));function oy(e,t,i,n){if(t.first){var r=new Promise((function(t,r){var s=function(e){var t=[];return Object.keys(e).forEach((function(i){t.push.apply(t,e[i])})),t}(e);sy(s,i,(function(e){return n(e),e.length?r(new ay(e,iy(e))):t()}))}));return r.catch((function(e){return e})),r}var s=t.firstFields||[];!0===s&&(s=Object.keys(e));var a=Object.keys(e),o=a.length,l=0,c=[],h=new Promise((function(t,r){var h=function(e){if(c.push.apply(c,e),++l===o)return n(c),c.length?r(new ay(c,iy(c))):t()};a.length||(n(c),t()),a.forEach((function(t){var n=e[t];-1!==s.indexOf(t)?sy(n,i,h):function(e,t,i){var n=[],r=0,s=e.length;function a(e){n.push.apply(n,e),++r===s&&i(n)}e.forEach((function(e){t(e,a)}))}(n,i,h)}))}));return h.catch((function(e){return e})),h}function ly(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"===typeof t?t():t,field:t.field||e.fullField}}}function cy(e,t){if(t)for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];"object"===typeof n&&"object"===typeof e[i]?e[i]=Zv({},e[i],n):e[i]=n}return e}function hy(e,t,i,n,r,s){!e.required||i.hasOwnProperty(e.field)&&!ry(t,s||e.type)||n.push(ny(r.messages.required,e.fullField))}var dy={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},uy={integer:function(e){return uy.number(e)&&parseInt(e,10)===e},float:function(e){return uy.number(e)&&!uy.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(Ey){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!uy.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&!!e.match(dy.email)&&e.length<255},url:function(e){return"string"===typeof e&&!!e.match(dy.url)},hex:function(e){return"string"===typeof e&&!!e.match(dy.hex)}};var py="enum";var gy={required:hy,whitespace:function(e,t,i,n,r){(/^\s+$/.test(t)||""===t)&&n.push(ny(r.messages.whitespace,e.fullField))},type:function(e,t,i,n,r){if(e.required&&void 0===t)hy(e,t,i,n,r);else{var s=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(s)>-1?uy[s](t)||n.push(ny(r.messages.types[s],e.fullField,e.type)):s&&typeof t!==e.type&&n.push(ny(r.messages.types[s],e.fullField,e.type))}},range:function(e,t,i,n,r){var s="number"===typeof e.len,a="number"===typeof e.min,o="number"===typeof e.max,l=t,c=null,h="number"===typeof t,d="string"===typeof t,u=Array.isArray(t);if(h?c="number":d?c="string":u&&(c="array"),!c)return!1;u&&(l=t.length),d&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),s?l!==e.len&&n.push(ny(r.messages[c].len,e.fullField,e.len)):a&&!o&&l<e.min?n.push(ny(r.messages[c].min,e.fullField,e.min)):o&&!a&&l>e.max?n.push(ny(r.messages[c].max,e.fullField,e.max)):a&&o&&(l<e.min||l>e.max)&&n.push(ny(r.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,i,n,r){e[py]=Array.isArray(e[py])?e[py]:[],-1===e[py].indexOf(t)&&n.push(ny(r.messages[py],e.fullField,e[py].join(", ")))},pattern:function(e,t,i,n,r){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||n.push(ny(r.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){new RegExp(e.pattern).test(t)||n.push(ny(r.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};function fy(e,t,i,n,r){var s=e.type,a=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t,s)&&!e.required)return i();gy.required(e,t,n,a,r,s),ry(t,s)||gy.type(e,t,n,a,r)}i(a)}var my={string:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t,"string")&&!e.required)return i();gy.required(e,t,n,s,r,"string"),ry(t,"string")||(gy.type(e,t,n,s,r),gy.range(e,t,n,s,r),gy.pattern(e,t,n,s,r),!0===e.whitespace&&gy.whitespace(e,t,n,s,r))}i(s)},method:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t)&&!e.required)return i();gy.required(e,t,n,s,r),void 0!==t&&gy.type(e,t,n,s,r)}i(s)},number:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(""===t&&(t=void 0),ry(t)&&!e.required)return i();gy.required(e,t,n,s,r),void 0!==t&&(gy.type(e,t,n,s,r),gy.range(e,t,n,s,r))}i(s)},boolean:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t)&&!e.required)return i();gy.required(e,t,n,s,r),void 0!==t&&gy.type(e,t,n,s,r)}i(s)},regexp:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t)&&!e.required)return i();gy.required(e,t,n,s,r),ry(t)||gy.type(e,t,n,s,r)}i(s)},integer:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t)&&!e.required)return i();gy.required(e,t,n,s,r),void 0!==t&&(gy.type(e,t,n,s,r),gy.range(e,t,n,s,r))}i(s)},float:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t)&&!e.required)return i();gy.required(e,t,n,s,r),void 0!==t&&(gy.type(e,t,n,s,r),gy.range(e,t,n,s,r))}i(s)},array:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if((void 0===t||null===t)&&!e.required)return i();gy.required(e,t,n,s,r,"array"),void 0!==t&&null!==t&&(gy.type(e,t,n,s,r),gy.range(e,t,n,s,r))}i(s)},object:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t)&&!e.required)return i();gy.required(e,t,n,s,r),void 0!==t&&gy.type(e,t,n,s,r)}i(s)},enum:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t)&&!e.required)return i();gy.required(e,t,n,s,r),void 0!==t&&gy.enum(e,t,n,s,r)}i(s)},pattern:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t,"string")&&!e.required)return i();gy.required(e,t,n,s,r),ry(t,"string")||gy.pattern(e,t,n,s,r)}i(s)},date:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t,"date")&&!e.required)return i();var a;if(gy.required(e,t,n,s,r),!ry(t,"date"))a=t instanceof Date?t:new Date(t),gy.type(e,a,n,s,r),a&&gy.range(e,a.getTime(),n,s,r)}i(s)},url:fy,hex:fy,email:fy,required:function(e,t,i,n,r){var s=[],a=Array.isArray(t)?"array":typeof t;gy.required(e,t,n,s,r,a),i(s)},any:function(e,t,i,n,r){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(ry(t)&&!e.required)return i();gy.required(e,t,n,s,r)}i(s)}};function vy(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var yy=vy();function by(e){this.rules=null,this._messages=yy,this.define(e)}by.prototype={messages:function(e){return e&&(this._messages=cy(vy(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");var t,i;for(t in this.rules={},e)e.hasOwnProperty(t)&&(i=e[t],this.rules[t]=Array.isArray(i)?i:[i])},validate:function(e,t,i){var n=this;void 0===t&&(t={}),void 0===i&&(i=function(){});var r,s,a=e,o=t,l=i;if("function"===typeof o&&(l=o,o={}),!this.rules||0===Object.keys(this.rules).length)return l&&l(),Promise.resolve();if(o.messages){var c=this.messages();c===yy&&(c=vy()),cy(c,o.messages),o.messages=c}else o.messages=this.messages();var h={};(o.keys||Object.keys(this.rules)).forEach((function(t){r=n.rules[t],s=a[t],r.forEach((function(i){var r=i;"function"===typeof r.transform&&(a===e&&(a=Zv({},a)),s=a[t]=r.transform(s)),(r="function"===typeof r?{validator:r}:Zv({},r)).validator=n.getValidationMethod(r),r.field=t,r.fullField=r.fullField||t,r.type=n.getType(r),r.validator&&(h[t]=h[t]||[],h[t].push({rule:r,value:s,source:a,field:t}))}))}));var d={};return oy(h,o,(function(e,t){var i,n=e.rule,r=("object"===n.type||"array"===n.type)&&("object"===typeof n.fields||"object"===typeof n.defaultField);function s(e,t){return Zv({},t,{fullField:n.fullField+"."+e})}function a(i){void 0===i&&(i=[]);var a=i;if(Array.isArray(a)||(a=[a]),!o.suppressWarning&&a.length&&by.warning("async-validator:",a),a.length&&void 0!==n.message&&(a=[].concat(n.message)),a=a.map(ly(n)),o.first&&a.length)return d[n.field]=1,t(a);if(r){if(n.required&&!e.value)return void 0!==n.message?a=[].concat(n.message).map(ly(n)):o.error&&(a=[o.error(n,ny(o.messages.required,n.field))]),t(a);var l={};if(n.defaultField)for(var c in e.value)e.value.hasOwnProperty(c)&&(l[c]=n.defaultField);for(var h in l=Zv({},l,e.rule.fields))if(l.hasOwnProperty(h)){var u=Array.isArray(l[h])?l[h]:[l[h]];l[h]=u.map(s.bind(null,h))}var p=new by(l);p.messages(o.messages),e.rule.options&&(e.rule.options.messages=o.messages,e.rule.options.error=o.error),p.validate(e.value,e.rule.options||o,(function(e){var i=[];a&&a.length&&i.push.apply(i,a),e&&e.length&&i.push.apply(i,e),t(i.length?i:null)}))}else t(a)}r=r&&(n.required||!n.required&&e.value),n.field=e.field,n.asyncValidator?i=n.asyncValidator(n,e.value,a,e.source,o):n.validator&&(!0===(i=n.validator(n,e.value,a,e.source,o))?a():!1===i?a(n.message||n.field+" fails"):i instanceof Array?a(i):i instanceof Error&&a(i.message)),i&&i.then&&i.then((function(){return a()}),(function(e){return a(e)}))}),(function(e){!function(e){var t,i=[],n={};function r(e){var t;Array.isArray(e)?i=(t=i).concat.apply(t,e):i.push(e)}for(t=0;t<e.length;t++)r(e[t]);i.length?n=iy(i):(i=null,n=null),l(i,n)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!my.hasOwnProperty(e.type))throw new Error(ny("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),i=t.indexOf("message");return-1!==i&&t.splice(i,1),1===t.length&&"required"===t[0]?my.required:my[this.getType(e)]||!1}},by.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");my[e]=t},by.warning=function(){},by.messages=yy,by.validators=my;const _y=by,xy={PREFIX:"".concat(p._,"-form")},Sy={LAYOUT:["horizontal","vertical"],LABEL_POS:["left","top","inset"],LABEL_ALIGN:["left","right"],EXTRA_POS:["middle","bottom"],DEFAULT_TRIGGER:"change"};var wy=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function Cy(e){let t=!0;return"string"===typeof e&&e.length?t=!1:Array.isArray(e)&&e.length?t=e.every((e=>Cy(e))):"boolean"===typeof e?t=e:e&&"symbol"===typeof e.$$typeof&&"Symbol(react.element)"===e.$$typeof.toString()&&(t=!1),t}function ky(e){let t=Object.assign(Object.assign({},{allowEmptyString:!1,allowEmpty:!1,emptyValue:"",noLabel:!1,noErrorMessage:!1,isInInputGroup:!1}),e),{field:i,label:n,labelPosition:r,labelWidth:s,labelAlign:a,labelCol:o,wrapperCol:l,initValue:c,validate:h,validateStatus:d,trigger:u,allowEmptyString:p,allowEmpty:g,emptyValue:f,rules:m,onChange:v,keepState:y,transform:b,name:_,fieldClassName:x,fieldStyle:S,noLabel:w,noErrorMessage:C,isInInputGroup:k,stopValidateWithError:A,convert:E,showValidateIcon:T,helpText:O,extraText:P,extraTextPosition:M,pure:I,id:R}=t,D=wy(t,["field","label","labelPosition","labelWidth","labelAlign","labelCol","wrapperCol","initValue","validate","validateStatus","trigger","allowEmptyString","allowEmpty","emptyValue","rules","onChange","keepState","transform","name","fieldClassName","fieldStyle","noLabel","noErrorMessage","isInInputGroup","stopValidateWithError","convert","showValidateIcon","helpText","extraText","extraTextPosition","pure","id"]);delete D.defaultChecked,delete D.defaultValue,delete D.checked,"undefined"!==typeof c&&(c=no(c));const L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!1;return"object"===typeof e&&"required"in e?t=e.required:Array.isArray(e)&&e.length&&e.forEach((e=>{e.required&&(t=!0)})),t}(m);return f="undefined"!==typeof f?f:"",{field:i,label:n,labelPosition:r,labelWidth:s,labelAlign:a,labelCol:o,wrapperCol:l,noLabel:w,noErrorMessage:C,isInInputGroup:k,initValue:c,validate:h,validateStatus:d,trigger:u,allowEmptyString:p,allowEmpty:g,emptyValue:f,rules:m,required:L,keepState:y,transform:b,name:_,fieldClassName:x,fieldStyle:S,convert:E,stopValidateWithError:A,showValidateIcon:T,helpText:O,extraText:P,extraTextPosition:M,pure:I,rest:D,id:R}}function Ay(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function Ey(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function Ty(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var i=getComputedStyle(e,null);return Ey(i.overflowY,t)||Ey(i.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function Oy(e,t,i,n,r,s,a,o){return s<e&&a>t||s>e&&a<t?0:s<=e&&o<=i||a>=t&&o>=i?s-e-n:a>t&&o<i||s<e&&o>i?a-t+r:0}var Py=function(e,t){var i=window,n=t.scrollMode,r=t.block,s=t.inline,a=t.boundary,o=t.skipOverflowHiddenElements,l="function"==typeof a?a:function(e){return e!==a};if(!Ay(e))throw new TypeError("Invalid target");for(var c,h,d=document.scrollingElement||document.documentElement,u=[],p=e;Ay(p)&&l(p);){if((p=null==(h=(c=p).parentElement)?c.getRootNode().host||null:h)===d){u.push(p);break}null!=p&&p===document.body&&Ty(p)&&!Ty(document.documentElement)||null!=p&&Ty(p,o)&&u.push(p)}for(var g=i.visualViewport?i.visualViewport.width:innerWidth,f=i.visualViewport?i.visualViewport.height:innerHeight,m=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,y=e.getBoundingClientRect(),b=y.height,_=y.width,x=y.top,S=y.right,w=y.bottom,C=y.left,k="start"===r||"nearest"===r?x:"end"===r?w:x+b/2,A="center"===s?C+_/2:"end"===s?S:C,E=[],T=0;T<u.length;T++){var O=u[T],P=O.getBoundingClientRect(),M=P.height,I=P.width,R=P.top,D=P.right,L=P.bottom,j=P.left;if("if-needed"===n&&x>=0&&C>=0&&w<=f&&S<=g&&x>=R&&w<=L&&C>=j&&S<=D)return E;var F=getComputedStyle(O),B=parseInt(F.borderLeftWidth,10),N=parseInt(F.borderTopWidth,10),z=parseInt(F.borderRightWidth,10),H=parseInt(F.borderBottomWidth,10),V=0,U=0,W="offsetWidth"in O?O.offsetWidth-O.clientWidth-B-z:0,G="offsetHeight"in O?O.offsetHeight-O.clientHeight-N-H:0,K="offsetWidth"in O?0===O.offsetWidth?0:I/O.offsetWidth:0,Y="offsetHeight"in O?0===O.offsetHeight?0:M/O.offsetHeight:0;if(d===O)V="start"===r?k:"end"===r?k-f:"nearest"===r?Oy(v,v+f,f,N,H,v+k,v+k+b,b):k-f/2,U="start"===s?A:"center"===s?A-g/2:"end"===s?A-g:Oy(m,m+g,g,B,z,m+A,m+A+_,_),V=Math.max(0,V+v),U=Math.max(0,U+m);else{V="start"===r?k-R-N:"end"===r?k-L+H+G:"nearest"===r?Oy(R,L,M,N,H+G,k,k+b,b):k-(R+M/2)+G/2,U="start"===s?A-j-B:"center"===s?A-(j+I/2)+W/2:"end"===s?A-D+z+W:Oy(j,D,I,B,z+W,A,A+_,_);var X=O.scrollLeft,q=O.scrollTop;k+=q-(V=Math.max(0,Math.min(q+V/Y,O.scrollHeight-M/Y+G))),A+=X-(U=Math.max(0,Math.min(X+U/K,O.scrollWidth-I/K+W)))}E.push({el:O,top:V,left:U})}return E};function My(e){return e===Object(e)&&0!==Object.keys(e).length}const Iy=function(e,t){var i=e.isConnected||e.ownerDocument.documentElement.contains(e);if(My(t)&&"function"===typeof t.behavior)return t.behavior(i?Py(e,t):[]);if(i){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:My(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var i="scrollBehavior"in document.body.style;e.forEach((function(e){var n=e.el,r=e.top,s=e.left;n.scroll&&i?n.scroll({top:r,left:s,behavior:t}):(n.scrollTop=r,n.scrollLeft=s)}))}(Py(e,n),n.behavior)}};class Ry extends k.A{constructor(e){super(Object.assign({},e));let{initValues:t}=this._adapter.getProps();t=this._adapter.cloneDeep(t),this.data={values:t||{},errors:{},touched:{}},this.fields=new Map,this.registered={},this.registeredArrayField=new Map,this.register=this.register.bind(this),this.unRegister=this.unRegister.bind(this),this.registerArrayField=this.registerArrayField.bind(this),this.unRegisterArrayField=this.unRegisterArrayField.bind(this),this.getArrayField=this.getArrayField.bind(this),this.updateArrayField=this.updateArrayField.bind(this),this.getField=this.getField.bind(this),this.setValues=this.setValues.bind(this),this.updateStateValue=this.updateStateValue.bind(this),this.updateStateError=this.updateStateError.bind(this),this.updateStateTouched=this.updateStateTouched.bind(this),this.getFormState=this.getFormState.bind(this),this.getValue=this.getValue.bind(this),this.getError=this.getError.bind(this),this.getTouched=this.getTouched.bind(this),this.getInitValues=this.getInitValues.bind(this),this.getInitValue=this.getInitValue.bind(this),this.getFormProps=this.getFormProps.bind(this),this.getFieldExist=this.getFieldExist.bind(this),this.scrollToField=this.scrollToField.bind(this)}init(){this._adapter.initFormId()}getField(e){return this.fields.get(e)}register(e,t,i){this.registered[e];if(this.registered[e]=!0,this.fields.set(e,i),i.keepState);else{const n=i.allowEmpty||!1,r={notNotify:!0,notUpdate:!1,allowEmpty:n};let s=t.value;n||""!==s||(s=void 0),this.updateStateValue(e,s,r),t.error&&this.updateStateError(e,t.error,r)}}unRegister(e){const t=this.fields.get(e);try{t.keepState||(Hi(this.data.values,e),Hi(this.data.errors,e),Hi(this.data.touched,e))}catch(i){console.error("some thing wrong when unregister field:".concat(e))}this.fields.delete(e),this._adapter.notifyChange(this.data),this._adapter.forceUpdate()}registerArrayField(e,t){this.updateArrayField(e,{updateKey:(new Date).valueOf(),initValue:t})}unRegisterArrayField(e){this.registeredArrayField.delete(e)}getArrayField(e){return this.registeredArrayField.get(e)}updateArrayField(e,t){const i=Object.assign(Object.assign({},this.registeredArrayField.get(e)),t);this.registeredArrayField.set(e,i)}validate(e){const{validateFields:t}=this.getProps();return t&&G()(t)?this._formValidate():this._fieldsValidate(e)}_formValidate(){const{values:e}=this.data,{validateFields:t}=this.getProps();return new Promise(((i,n)=>{let r;try{r=t(e)}catch(s){r=s}if(r)Fc(r)?r.then((t=>{if(t)this.data.errors=t,this._adapter.notifyChange(this.data),this.injectErrorToField(t),this._adapter.forceUpdate(),this._autoScroll(100),n(t);else{const t=this._adapter.cloneDeep(e);i(t),this.injectErrorToField({})}}),(e=>{this._autoScroll(100),n(e)})):(this.data.errors=r,this.injectErrorToField(r),this._adapter.notifyChange(this.data),this._adapter.forceUpdate(),this._autoScroll(100),n(r));else{const t=this._adapter.cloneDeep(e);i(t),this.injectErrorToField({})}}))}_fieldsValidate(e){const{values:t}=this.data;return new Promise(((i,n)=>{let r=[];const s=this._getOperateFieldMap(e);s.forEach(((e,t)=>{const i=this.getValue(t),n={notNotify:!0,notUpdate:!0},s=e.fieldApi.validate(i,n);r.push(s),e.fieldApi.setTouched(!0,n)})),Promise.all(r).then((()=>{this._adapter.notifyChange(this.data),this._adapter.forceUpdate();const e=this.getError();if(this._isValid(s)){const e=this._adapter.cloneDeep(t);i(e)}else this._autoScroll(),n(e)}))}))}submit(e){const{values:t}=this.data;this.validate().then((t=>{const i=this._adapter.cloneDeep(t);this._adapter.notifySubmit(i,e)})).catch((i=>{const n=this._adapter.cloneDeep(i),r=this._adapter.cloneDeep(t);this._adapter.notifySubmitFail(n,r,e)}))}_getNestedField(e){const t=this.fields,i=[...t].map((e=>e[0]));let n=new Map;return i.forEach((i=>{let r=Li()(i),s=Li()(e);if(s.every(((e,t)=>s[t]===r[t]))){const e=t.get(i);n.set(i,e)}})),n}_getOperateFieldMap(e){let t=new Map;return _()(e)?t=this.fields:e.forEach((e=>{const i=this.fields.get(e);if(_()(i)){const i=this._getNestedField(e);t=new Map([...t,...i])}else t.set(e,i)})),t}reset(e){this._getOperateFieldMap(e).forEach((e=>{e.fieldApi.reset()})),this.registeredArrayField.size&&this._resetArrayField(),this._adapter.notifyChange(this.data),this._adapter.forceUpdate(),this._adapter.notifyReset()}_resetArrayField(){[...this.registeredArrayField.keys()].forEach((e=>{const t=this.registeredArrayField.get(e).initValue;this.updateStateValue(e,t,{notNotify:!0,notUpdate:!0}),this.updateArrayField(e,{updateKey:(new Date).valueOf()})}))}injectErrorToField(e){this.fields.forEach((t=>{const i=zi(e,t.field);t.fieldApi.setError(i,{notNotify:!0,notUpdate:!0})}))}getValue(e,t){const i="undefined"===typeof e,n=t&&t.needClone;let r,s;switch(!0){case!i&&!n:r=zi(this.data.values,e);break;case!i&&n:s=zi(this.data.values,e),r=this._adapter.cloneDeep(s);break;case i&&!n:r=Object.assign({},this.data.values);break;case i&&n:r=this._adapter.cloneDeep(this.data.values)}return r}setValues(e,t){let{isOverride:i=!1}=t;const n=this._adapter.cloneDeep(e);if(this.fields.forEach((e=>{const t=zi(n,e.field);e.fieldApi.setValue(t,{notNotify:!0,notUpdate:!0})})),this.registeredArrayField.size){[...this.registeredArrayField.keys()].forEach((e=>{this.updateArrayField(e,{updateKey:(new Date).valueOf()})}))}i&&(this.data.values=n),this._adapter.notifyChange(this.data),this._adapter.notifyValueChange(this.data.values,Object.assign({},e)),this._adapter.forceUpdate()}updateStateValue(e,t,i,n){const r=i&&i.notNotify,s=i&&i.notUpdate,a=i&&i.fieldAllowEmpty,o=this.getProp("allowEmpty"),l=a||o;Vi(this.data.values,e,t,l),r||(this._adapter.notifyChange(this.data),this._adapter.notifyValueChange(this.data.values,{[e]:t})),s||this._adapter.forceUpdate(n)}getTouched(e){return"undefined"===typeof e?this.data.touched:zi(this.data.touched,e)}updateStateTouched(e,t,i,n){const r=i&&i.notNotify,s=i&&i.notUpdate;Vi(this.data.touched,e,t),r||this._adapter.notifyChange(this.data),s||this._adapter.forceUpdate(n)}getError(e){return"undefined"===typeof e?this.data.errors:zi(this.data.errors,e)}updateStateError(e,t,i,n){const r=i&&i.notNotify,s=i&&i.notUpdate;Vi(this.data.errors,e,t),r||this._adapter.notifyChange(this.data),s||this._adapter.forceUpdate(n)}getFieldSetterApi(){return{setValue:(e,t,i)=>{const n=this.fields.get(e)?this.fields.get(e).fieldApi:void 0,r=this._adapter.cloneDeep(t);n?n.setValue(r,i):(this.updateStateValue(e,r,i,(()=>{let t=this._getNestedField(e);t.size&&t.forEach((e=>{let t=e.field,i=zi(this.data.values,t);e.fieldApi.setValue(i,{notNotify:!0,notUpdate:!0})}))})),this.getArrayField(e)&&this.updateArrayField(e,{updateKey:(new Date).valueOf()}))},setError:(e,t,i)=>{const n=this.fields.get(e)?this.fields.get(e).fieldApi:void 0,r=this._adapter.cloneDeep(t);n?n.setError(r,i):(this.updateStateError(e,r,i,(()=>{let t=this._getNestedField(e);t.size&&t.forEach((e=>{let t=e.field,i=zi(this.data.errors,t);e.fieldApi.setError(i,{notNotify:!0,notUpdate:!0})}))})),this.getArrayField(e)&&this.updateArrayField(e,{updateKey:(new Date).valueOf()}))},setTouched:(e,t,i)=>{const n=this.fields.get(e)?this.fields.get(e).fieldApi:void 0;n?n.setTouched(t,i):(this.updateStateTouched(e,t,i,(()=>{let t=this._getNestedField(e);t.size&&t.forEach((e=>{let t=e.field,i=zi(this.data.touched,t);e.fieldApi.setTouched(i,{notNotify:!0,notUpdate:!0})}))})),this.getArrayField(e)&&this.updateArrayField(e,{updateKey:(new Date).valueOf()}))}}}getModifyFormStateApi(){return{register:this.register,unRegister:this.unRegister,updateStateValue:this.updateStateValue,updateStateError:this.updateStateError,updateStateTouched:this.updateStateTouched,getValue:this.getValue,getError:this.getError,getTouched:this.getTouched,getInitValues:this.getInitValues,getInitValue:this.getInitValue,getFormProps:this.getFormProps,getField:this.getField,registerArrayField:this.registerArrayField,unRegisterArrayField:this.unRegisterArrayField,getArrayField:this.getArrayField,updateArrayField:this.updateArrayField}}getFormApi(){const e=this.getFieldSetterApi();return Object.assign(Object.assign({},e),{reset:e=>this.reset(e),validate:e=>this.validate(e),getValue:e=>this.getValue(e,{needClone:!0}),getValues:()=>this.getValue(void 0,{needClone:!0}),getFormState:()=>this.getFormState(!0),getFormProps:e=>this.getFormProps(e),getInitValue:e=>this.getInitValue(e),getInitValues:()=>this.getInitValues(),getTouched:e=>this.getTouched(e),getError:e=>this.getError(e),setValues:(e,t)=>this.setValues(e,t||{isOverride:!1}),submitForm:()=>this.submit(),getFieldExist:e=>this.getFieldExist(e),scrollToField:(e,t)=>this.scrollToField(e,t)})}getFormState(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this._adapter.cloneDeep(this.data):Object.assign({},this.data)}_isValid(e){let t=!0;if(e){[...e.keys()].forEach((e=>{Cy(zi(this.data.errors,e))||(t=!1)}))}else t=Boolean(function(e){return 0===Mi()(e).length}(this.data.errors));return t}getInitValues(){return this._adapter.getInitValues()}getInitValue(e){return"undefined"===typeof e?this._adapter.getInitValues():zi(this._adapter.getInitValues(),e)}getFormProps(e){return this._adapter.getFormProps(e)}getFieldExist(e){return Boolean(this.fields.has(e))}_autoScroll(e){const{autoScrollToError:t}=this.getFormProps();if(!t)return;let i={behavior:"smooth",block:"start"};"object"===typeof t&&(i=t),e?setTimeout((()=>this._getErrorFieldAndScroll(i)),100):this._getErrorFieldAndScroll(i)}_getErrorFieldAndScroll(e){const t=this._adapter.getAllErrorDOM();if(t&&t.length)try{const i=t[0].parentNode.parentNode;Iy(i,e)}catch(i){}}scrollToField(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth",block:"start"};if(this.getFieldExist(e)){const i=this._adapter.getFieldDOM(e);Iy(i,t)}}}const Dy=o.createContext({});Dy.displayName="FormState";const Ly=o.createContext({});Ly.displayName="FormApi";const jy=o.createContext({});jy.displayName="FormUpdater";const Fy=o.createContext({shouldUseInitValue:!0});function By(e){return o.isValidElement(e)}function Ny(e){return 0===o.Children.count(e)}const zy=xy.PREFIX;class Hy extends o.PureComponent{render(){const{children:e,required:t,text:i,disabled:n,name:r,width:s,align:a,style:l,className:c,extra:h,id:u,optional:p}=this.props,g=d()(c,{["".concat(zy,"-field-label")]:!0,["".concat(zy,"-field-label-left")]:"left"===a,["".concat(zy,"-field-label-right")]:"right"===a,["".concat(zy,"-field-label-required")]:t,["".concat(zy,"-field-label-disabled")]:n,["".concat(zy,"-field-label-with-extra")]:h}),f=l||{};s&&(f.width=s);const m=o.createElement(pe.A,{componentName:"Form"},(e=>o.createElement("span",{className:"".concat(zy,"-field-label-optional-text")},e.optional))),v=o.createElement("div",{className:"".concat(zy,"-field-label-text"),"x-semi-prop":"label"},"undefined"!==typeof i?i:e,p?m:null),y=o.createElement(o.Fragment,null,v,o.createElement("div",{className:"".concat(zy,"-field-label-extra")},h));return o.createElement("label",{className:g,htmlFor:r,style:f,id:u},h?y:v)}}Hy.defaultProps={required:!1,name:"",align:"left",className:"",optional:!1},Hy.propTypes={id:c().string,children:c().node,required:c().bool,text:c().node,disabled:c().bool,name:c().string,align:c().string,width:c().oneOfType([c().number,c().string]),style:c().object,className:c().string,extra:c().node,optional:c().bool};const Vy=xy.PREFIX;class Uy extends o.PureComponent{generatorText(e){const{helpTextId:t,errorMessageId:i}=this.props;let n=i;if(this.props.error||(n=t),"string"===typeof e)return o.createElement("span",{id:n},e);if(Array.isArray(e)){const t=e.filter((e=>e));return t.length?o.createElement("span",{id:n},t.join(", ")):null}return o.isValidElement(e)?e:null}render(){const{error:e,className:t,style:i,validateStatus:n,helpText:r,showValidateIcon:s,isInInputGroup:a}=this.props,l=d()({[Vy+"-field-error-message"]:Boolean(e),[Vy+"-field-help-text"]:Boolean(r)},t);if(!e&&!r)return null;const c={warning:o.createElement(gt,null),error:o.createElement(vt,null)},h=e?this.generatorText(e):this.generatorText(r),u="".concat(Vy,"-field-validate-status-icon");let p=null;return a?p=o.createElement(vt,{className:u}):c[n]&&(p=o.cloneElement(c[n],{className:u})),o.createElement("div",{className:l,style:i},s&&h?p:null,h)}}Uy.propTypes={error:c().oneOfType([c().bool,c().string,c().array,c().node]),className:c().string,style:c().object,validateStatus:c().string,showValidateIcon:c().bool,helpText:c().node,isInInputGroup:c().bool,errorMessageId:c().string,helpTextId:c().string};var Wy=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Gy=xy.PREFIX,Ky=e=>{let t,i,n,r,s,a="top";try{const e=(0,o.useContext)(jy).getFormProps(["labelPosition","labelWidth","labelAlign","labelCol","wrapperCol"]);t=e.labelCol,i=e.wrapperCol,n=e.labelWidth,r=e.labelAlign,a=e.labelPosition?e.labelPosition:a}catch(p){}e.labelPosition&&(a=e.labelPosition);let{children:l,label:c,className:h,style:u,error:p,noLabel:g}=e;Wy(e,["children","label","className","style","error","noLabel"]);const f=t&&i,m=d()({["".concat(Gy,"-field")]:!0,["".concat(Gy,"-slot")]:!0},h),v=d()({["".concat(Gy,"-col-").concat(r)]:!0});switch(!0){case y()(c)&&!o.isValidElement(c):break;case C()(c)||S()(c):case o.isValidElement(c):c={text:c}}let b=null;if(void 0!==typeof p){let e={};switch(!0){case y()(p)&&!o.isValidElement(p):e=p;break;case C()(p)||S()(p):case o.isValidElement(p):e={error:p}}b=o.createElement(Uy,Object.assign({},e))}let _=Object.assign({align:r,width:n},c),x=d()({["".concat(Gy,"-field-main")]:!0,["".concat(Gy,"-slot-main")]:!0});switch(!0){case!f&&!g:s=o.createElement(o.Fragment,null,o.createElement(Hy,Object.assign({},_)),o.createElement("div",{className:x},l,b));break;case!f&&g:s=o.createElement(o.Fragment,null,o.createElement("div",{className:x},l,b));break;case f&&"top"===a:s=o.createElement(o.Fragment,null,o.createElement("div",{style:{overflow:"hidden"}},o.createElement(qh,Object.assign({},t,{className:v}),o.createElement(Hy,Object.assign({},_)))),o.createElement(qh,null,l,b));break;case f&&"top"!==a:s=o.createElement(o.Fragment,null,o.createElement(qh,Object.assign({},t,{className:v}),o.createElement(Hy,Object.assign({},_))),o.createElement(qh,null,l,b))}return o.createElement("div",{className:m,"x-label-pos":a,style:u},s)},Yy=xy.PREFIX;class Xy extends o.PureComponent{render(){const{text:e,className:t,style:i,children:n}=this.props,r=d()({[Yy+"-section"]:!0},t),s=Yy+"-section-text";return o.createElement("section",{className:r,style:i},o.createElement("h5",{className:s},e),n)}}Xy.propTypes={text:c().node,className:c().string,style:c().object,children:c().node};const qy=function(){return(0,o.useContext)(Dy)};var Zy=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Qy=X.PREFIX,$y=q.SIZE;class Jy extends M.A{renderGroupWithLabel(e){const t=this.props,{size:i,className:n,label:r,labelPosition:s}=t,a=(Zy(t,["size","className","label","labelPosition"]),d()({["".concat(Qy,"-group-wrapper")]:!0,["".concat(Qy,"-group-wrapper-with-top-label")]:"top"===s,["".concat(Qy,"-group-wrapper-with-left-label")]:"left"===s})),l=d()("".concat(Qy,"-group"),n,{["".concat(Qy,"-").concat(i)]:"default"!==i}),c="input-group";return o.createElement("div",{className:a},r&&r.text?o.createElement(Hy,Object.assign({name:c},r)):null,o.createElement("span",{role:"group","aria-disabled":this.props.disabled,id:r&&r.name||c,className:l,style:this.props.style,onFocus:this.props.onFocus,onBlur:this.props.onBlur},e))}render(){const e=this.props,{size:t,style:i,className:n,children:r,label:s,onBlur:a,onFocus:l,disabled:c}=e,h=Zy(e,["size","style","className","children","label","onBlur","onFocus","disabled"]),u=d()("".concat(Qy,"-group"),{["".concat(Qy,"-").concat(t)]:"default"!==t},n);let p;return r&&(p=(Array.isArray(r)?r:[r]).map(((e,i)=>{if(e){const{onBlur:n,onFocus:r,disabled:s}=e.props,d=G()(n)&&"noop"!==Fi()(n,"name")?n:a,u=G()(r)&&"noop"!==Fi()(r,"name")?r:l,p="boolean"===typeof s?s:c;return o.cloneElement(e,Object.assign(Object.assign({key:i},h),{size:t,onBlur:d,onFocus:u,disabled:p}))}return null}))),s&&s.text?this.renderGroupWithLabel(p):o.createElement("span",{role:"group","aria-label":"Input group","aria-disabled":this.props.disabled,className:u,style:i,onFocus:this.props.onFocus,onBlur:this.props.onBlur},p)}}Jy.propTypes={className:c().string,children:c().node,size:c().oneOf($y),style:c().object,onBlur:c().func,onFocus:c().func,label:c().object,labelPosition:c().string},Jy.defaultProps={size:"default",className:"",onBlur:Pe.l,onFocus:Pe.l};var eb=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const tb=xy.PREFIX,ib=e=>{const{fieldSet:t}=e,i=qy(),n=t.map((e=>zi(i.errors,e)));return Cy(n)?null:o.createElement(Uy,{error:n,showValidateIcon:e.showValidateIcon,isInInputGroup:e.isInInputGroup})};class nb extends o.Component{renderLabel(e,t){return e?C()(e)?o.createElement(Hy,{width:t.labelWidth,text:e}):o.createElement(Hy,Object.assign({width:t.labelWidth},e)):null}render(){const e=this.props,{children:t,label:i,extraText:n,extraTextPosition:r}=e,s=eb(e,["children","label","extraText","extraTextPosition"]),a=this.context.getFormProps(["labelPosition","labelWidth","labelAlign","showValidateIcon","wrapperCol","labelCol","disabled"]),l=this.props.labelPosition||a.labelPosition,c=[],h=o.Children.map(t,(e=>e&&e.props&&e.props.field?(c.push(e.props.field),o.cloneElement(e,{isInInputGroup:!0})):null)),u=d()({["".concat(tb,"-field-group")]:!0}),p=a.labelCol,g=a.wrapperCol,f=a.labelAlign,m=p&&g,v=p?"".concat(tb,"-col-").concat(f):"",y=this.renderLabel(i,a),b=o.createElement(Jy,Object.assign({disabled:a.disabled},s),h),_=o.createElement(ib,{fieldSet:c,showValidateIcon:a.showValidateIcon,isInInputGroup:!0}),x=d()("".concat(tb,"-field-extra"),{["".concat(tb,"-field-extra-string")]:"string"===typeof n,["".concat(tb,"-field-extra-middle")]:"middle"===r,["".concat(tb,"-field-extra-bottom")]:"bottom"===r}),S=n?o.createElement("div",{className:x,"x-semi-prop":"extraText"},n):null;let w;switch(!0){case!m:w=o.createElement(o.Fragment,null,y,o.createElement("div",null,"middle"===r?S:null,b,"bottom"===r?S:null,_));break;case m&&"top"===l:w=o.createElement(o.Fragment,null,o.createElement("div",{style:{overflow:"hidden"}},o.createElement(qh,Object.assign({},p,{className:v}),y)),o.createElement(qh,Object.assign({},g),"middle"===r?S:null,b,"bottom"===r?S:null,_));break;case m&&"top"!==l:w=o.createElement(o.Fragment,null,o.createElement(qh,Object.assign({},p,{className:v}),y),o.createElement(qh,Object.assign({},g),"middle"===r?S:null,b,"bottom"===r?S:null,_))}return o.createElement("div",{"x-label-pos":l,className:u},w)}}nb.contextType=jy;const rb=nb;const sb=function(){return(0,o.useContext)(Fy)};function ab(e){const t=(0,o.useRef)(),[i,n]=(0,o.useState)(e);t.current=i;return[i,e=>{t.current=e,n(e)},()=>t.current]}const ob=xy.PREFIX,lb="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;const cb=function(e,t){let i=(i,n)=>{let{field:r,label:s,labelPosition:a,labelWidth:l,labelAlign:c,labelCol:h,wrapperCol:u,noLabel:p,noErrorMessage:g,isInInputGroup:f,initValue:m,validate:v,validateStatus:y,trigger:b,allowEmptyString:x,allowEmpty:S,emptyValue:w,rules:C,required:k,keepState:E,transform:T,name:O,fieldClassName:P,fieldStyle:M,convert:I,stopValidateWithError:R,helpText:D,extraText:L,extraTextPosition:j,pure:F,id:B,rest:N}=ky(i),{options:z,shouldInject:H}=function(e,t){const i=Object.assign(Object.assign({},{valueKey:"value",onKeyChangeFnName:"onChange",valuePath:"",maintainCursor:!1,shouldInject:!0,shouldMemo:!0}),e);return{options:i,shouldInject:"field"in t||i.shouldInject}}(t,i);if((0,A.A)("undefined"===typeof r&&z.shouldInject,"[Semi Form]: 'field' is required, please check your props of Field Component"),!H)return o.createElement(e,Object.assign({},N,{ref:n}));qy();const V=(0,o.useContext)(jy);if(!V.getFormProps)return(0,A.A)(!0,"[Semi Form]: Field Component must be use inside the Form, please check your dom declaration"),null;let U,W=V.getFormProps(["labelPosition","labelWidth","labelAlign","labelCol","wrapperCol","disabled","showValidateIcon","extraTextPosition","stopValidateWithError","trigger"]),G=a||W.labelPosition,K=l||W.labelWidth,Y=c||W.labelAlign,X=h||W.labelCol,q=u||W.wrapperCol,Z=j||W.extraTextPosition||"bottom",Q=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _()(e)?_()(t)?i:t:e}(R,W.stopValidateWithError,!1),$=function(e,t){let i=[],n=[];return i=_()(e)?_()(t)?Sy.DEFAULT_TRIGGER:t:e,Array.isArray(i)&&(n=i),"string"===typeof i&&(n[0]=i),n}(b,W.trigger),J="undefined"!==typeof r?V.getValue(r):void 0,ee="undefined"!==typeof m?m:J;try{U=sb(),U&&(ee=U.shouldUseInitValue&&"undefined"!==typeof m?m:J)}catch(Le){}const[te,ie,ne]=ab(void 0!==typeof ee?ee:null),re=$.includes("mount");S=S||V.getFormProps().allowEmpty;const[se,ae,oe]=ab(),[le,ce]=(0,o.useState)(),[he,de,ue]=ab(0),[pe,ge]=(0,o.useState)(y),fe=(0,o.useRef)(!1),me=(0,o.useRef)(C),ve=(0,o.useRef)(v),ye=(0,o.useRef)(null),be=(e,t)=>{ce(e),V.updateStateTouched(r,e,t)},_e=(e,t)=>{fe.current||e!==oe()&&(ae(e),V.updateStateError(r,e,t),Cy(e)?ge("success"):ge("error"))},xe=(e,t)=>{ie(e);let i=Object.assign(Object.assign({},t),{allowEmpty:S});V.updateStateValue(r,e,i)},Se=(e,t)=>{let i=me.current||[];const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i={};return i[e]=t,new _y(i)}(r,i),s={[r]:e},a=new Promise(((e,i)=>{n.validate(s,{first:Q},((e,t)=>{})).then((i=>{fe.current||ye.current!==a||(ge("success"),_e(void 0,t),e({}))})).catch((i=>{if(fe.current||ye.current!==a)return;let{errors:n,fields:r}=i;if(!n||!r)throw ge("error"),_e(i.message,t),e(i.message),i;{let i=n.map((e=>e.message));1===i.length&&(i=i[0]),_e(i,t),Cy(i)||(ge("error"),e(n))}}))}));return ye.current=a,a},we=(e,t)=>{let i=e,n=me.current;return T&&(i=T(e)),ve.current?((e,t,i)=>{const n=new Promise((r=>{let s;try{s=ve.current(e,t)}catch(Le){s=Le}void 0===s?(r({}),_e(void 0,i)):Fc(s)?s.then((e=>{fe.current||ye.current!==n||(Cy(e)?(_e(void 0,i),r(null)):(_e(e,i),r(e)))})):Cy(s)?(_e(void 0,i),r(null)):(_e(s,i),r(s))}));return ye.current=n,n})(i,V.getValue(),t):n?Se(i,t):null},Ce=function(e,t){let n;if(z.onKeyChangeFnName in i&&"function"===typeof i[z.onKeyChangeFnName]){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];i[z.onKeyChangeFnName](e,t,...s)}n=z.valuePath?zi(e,z.valuePath):e,"function"===typeof I&&(n=I(n)),x||S||n===w&&(n=void 0);try{t&&t.target&&t.target.selectionStart&&de(t.target.selectionStart)}catch(Le){}be(!0,{notNotify:!0,notUpdate:!0}),xe(n),$.includes("change")&&we(n)},ke=function(){if(i.onBlur&&i.onBlur(...arguments),le||be(!0),$.includes("blur")){let e=ne();we(e)}},Ae={setValue:xe,setTouched:be,setError:_e,reset:()=>{let e={notNotify:!0,notUpdate:!0};xe(null!==ee?ee:void 0,e),_e(void 0,e),be(void 0,e),ge("default")},validate:we},Ee={value:te,error:se,touched:le,status:pe};lb((()=>{me.current=C,ve.current=v}),[C,v]),lb((()=>(fe.current=!1,re&&we(te),()=>{fe.current=!0})),[]),lb((()=>{if("undefined"===typeof r)return()=>{};const e=ne();return V.register(r,{value:e,error:se,touched:le,status:pe},{field:r,fieldApi:Ae,keepState:E,allowEmpty:S||x}),()=>{V.unRegister(r)}}),[r]);const Te=B||r,Oe="".concat(Te,"-label"),Pe="".concat(Te,"-helpText"),Me="".concat(Te,"-extraText"),Ie="".concat(Te,"-errormessage"),Re=()=>{let t=y||pe;const i=d()("".concat(ob,"-field-extra"),{["".concat(ob,"-field-extra-string")]:"string"===typeof L,["".concat(ob,"-field-extra-middle")]:"middle"===Z,["".concat(ob,"-field-extra-bottom")]:"bottom"===Z}),a=L?o.createElement("div",{className:i,id:Me,"x-semi-prop":"extraText"},L):null;let l=Object.assign(Object.assign({id:Te,disabled:W.disabled},N),{ref:n,onBlur:ke,[z.onKeyChangeFnName]:Ce,[z.valueKey]:te,validateStatus:t,"aria-required":k,"aria-labelledby":Oe});O&&(l.name=O),D&&(l["aria-describedby"]=L?"".concat(Pe," ").concat(Me):Pe),L&&(l["aria-describedby"]=D?"".concat(Pe," ").concat(Me):Me),"error"===pe&&(l["aria-errormessage"]=Ie,l["aria-invalid"]=!0);const c=d()({["".concat(ob,"-field")]:!0,["".concat(ob,"-field-").concat(O)]:Boolean(O),[P]:Boolean(P)}),h=d()({["".concat(ob,"-field-main")]:!0});"inset"!==G||p||(l.insetLabel=s||r,l.insetLabelId=Oe,"object"!==typeof s||By(s)||(l.insetLabel=s.text,l.insetLabelId=Oe));const u=o.createElement(e,Object.assign({},l));if(f)return u;if(F){let t=d()(N.className,{["".concat(ob,"-field-pure")]:!0,["".concat(ob,"-field-").concat(O)]:Boolean(O),[P]:Boolean(P)});return l.className=t,o.createElement(e,Object.assign({},l))}let m=X&&q;const v=Y?"".concat(ob,"-col-").concat(Y):"";let b=null;if(!p&&"inset"!==G){let e="object"!==typeof s||By(s)?{}:s;b=o.createElement(Hy,Object.assign({text:s||r,id:Oe,required:k,name:Te||O||r,width:K,align:Y},e))}const _=o.createElement("div",{className:h},"middle"===Z?a:null,u,g?null:o.createElement(Uy,{error:se,validateStatus:t,helpText:D,helpTextId:Pe,errorMessageId:Ie,showValidateIcon:W.showValidateIcon}),"bottom"===Z?a:null),x=o.createElement(o.Fragment,null,"top"===G?o.createElement("div",{style:{overflow:"hidden"}},o.createElement(qh,Object.assign({},X,{className:v}),b)):o.createElement(qh,Object.assign({},X,{className:v}),b),o.createElement(qh,Object.assign({},q),_));return o.createElement("div",{className:c,style:M,"x-label-pos":G,"x-field-id":r,"x-extra-pos":Z},m?x:o.createElement(o.Fragment,null,b,_))},De=[...Object.values(Ee),...Object.values(i),r,G,Y,W.disabled];return z.shouldMemo?(0,o.useMemo)(Re,[...De]):Re()};return i=(0,o.forwardRef)(i),i.displayName=function(e){const t=e.displayName||e.name;return t?"SemiField".concat(t):"SemiField"}(e),i};class hb extends k.A{constructor(e){super(Object.assign({},e))}init(){const e=this._getDisplayValue();this._setValue(e)}_getDisplayValue(){const{value:e,defaultValue:t}=this.getProps();let i;return"value"in this.getProps()?i=e:"defaultValue"in this.getProps()&&(i=t),i}handleChange(e){const t=this.getProp("mode"),i=this.getState("value"),{checked:n,value:r}=e.target,s=this._adapter.isInProps("value"),a=Object.assign(Object.assign({},e),{target:Object.assign(Object.assign({},e.target),{value:r})});"advanced"!==t||n||(a.target.value=void 0),s||("advanced"!==t||n?this._setValue(r):this._setValue(void 0)),"advanced"!==t&&i===r||this._adapter.notifyChange(a)}handlePropValueChange(e){this._setValue(e)}_setValue(e){this._adapter.setValue(e)}destroy(){}}var db=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class ub extends M.A{constructor(e){super(e),this.onChange=e=>{this.foundation.handleChange(e)},this.getFormatName=()=>this.props.name||"default",this.state={value:e.value||e.defaultValue},this.foundation=new hb(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){"number"===typeof e.value&&isNaN(e.value)&&"number"===typeof this.props.value&&isNaN(this.props.value)||e.value!==this.props.value&&this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>{this.setState({value:e})},getProps:()=>this.props,isInProps:e=>Boolean(e in this.props),notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}render(){const e=this.props,{children:t,options:i,mode:n,prefixCls:r,className:s,style:a,direction:l,type:c,buttonSize:h,id:u}=e,p=db(e,["children","options","mode","prefixCls","className","style","direction","type","buttonSize","id"]),g=c===Gf,f=c===Yf,m=c===Kf||f,v=c===Wf,y=r||zf.PREFIX,b=d()(s,{[y]:!0,["".concat(y,"-wrapper")]:!0,["".concat(y,"-").concat(l)]:l&&!g,["".concat(y,"-").concat(l,"-default")]:l&&v,["".concat(y,"-").concat(l,"-card")]:l&&m,["".concat(y,"-buttonRadio")]:g}),_=this.state.value;let x;return i?x=(i||[]).map(((e,t)=>"string"===typeof e?o.createElement(im,{key:t,disabled:this.props.disabled,value:e},e):o.createElement(im,{key:t,disabled:e.disabled||this.props.disabled,value:e.value,extra:e.extra,className:e.className,style:e.style},e.label))):t&&(x=o.Children.map(t,((e,t)=>o.isValidElement(e)?o.cloneElement(e,{key:t}):null))),o.createElement("div",Object.assign({className:b,style:a,id:u,"aria-label":this.props["aria-label"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"]},this.getDataAttr(p)),o.createElement(Zf.Provider,{value:{radioGroup:{onChange:this.onChange,value:_,disabled:this.props.disabled,name:this.getFormatName(),isButtonRadio:g,isCardRadio:m,isPureCardRadio:f,buttonSize:h,prefixCls:r},mode:n}},x))}}ub.propTypes={defaultValue:c().any,disabled:c().bool,name:c().string,options:c().array,buttonSize:c().oneOf(Xf),type:c().oneOf([Wf,Gf,Kf,Yf]),value:c().any,onChange:c().func,children:c().node,prefixCls:c().string,className:c().string,style:c().object,direction:c().oneOf(Hf),mode:c().oneOf(Uf),"aria-label":c().string,"aria-describedby":c().string,"aria-errormessage":c().string,"aria-invalid":c().bool,"aria-labelledby":c().string,"aria-required":c().bool,id:c().string},ub.defaultProps={disabled:!1,onChange:r(),direction:Vf,mode:"",type:Wf,buttonSize:"middle"};const pb=ub,gb={PREFIX:"".concat(p._,"-slider"),DISABLED:"".concat(p._,"-slider-disabled"),VERTICAL:"".concat(p._,"-slider-vertical"),TRACK:"".concat(p._,"-slider-track"),DOTS:"".concat(p._,"-slider-dots"),MARKS:"".concat(p._,"-slider-marks"),HANDLE:"".concat(p._,"-slider-handle"),HANDLE_DOT:"".concat(p._,"-slider-handle-dot")},fb=(e,t)=>{if(!globalThis.Touch||!(e instanceof Touch))return e;return["stopPropagation","preventDefault"].forEach((i=>{let n=t[i];n&&("function"===typeof n&&(n=function(){return t[i](...arguments)}),e[i]?(0,A.A)(!0,'"The key '.concat(i,'" exist in Touch.')):e[i]=n)})),e};class mb extends k.A{constructor(e){var t;super(Object.assign(Object.assign({},mb.defaultAdapter),e)),t=this,this.getMinAndMaxPercent=e=>{const{range:t,min:i,max:n}=this._adapter.getProps(),r=t?(e[0]-i)/(n-i):(e-i)/(n-i),s=t?(e[1]-i)/(n-i):1;return{min:this._checkValidity(r),max:this._checkValidity(s)}},this._checkValidity=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e>i?i:e<t?t:e},this.computeHandleVisibleVal=(e,t,i)=>{const{focusPos:n,currentValue:r}=this._adapter.getStates(),s={min:!1,max:!1};let a;a=t?{min:t(i?this.outPutValue(r[0]):this.outPutValue(r)),max:i?t(this.outPutValue(r[1])):null}:{min:i?this.outPutValue(r[0]):this.outPutValue(r),max:i?this.outPutValue(r[1]):null},e?(s.min=!0,s.max=!0):"undefined"===typeof e&&t&&("min"===n?s.min=!0:"max"===n&&(s.max=!0));return{tipVisible:s,tipChildren:a}},this.valueFormatIsCorrect=e=>Array.isArray(e)?"number"===typeof e[0]&&"number"===typeof e[0]:"number"===typeof e,this.handleMousePos=(e,t)=>{const i=this._adapter.getParentRect(),n=this._adapter.getScrollParentVal(),r=i?i.left:0,s=i?i.top:0;return{x:e-r+n.scrollLeft,y:t-s+n.scrollTop}},this.getScrollParent=e=>{const t=/(auto|scroll)/,i=(e,t)=>window.getComputedStyle(e,null).getPropertyValue(t),n=e=>e&&e!==document.body&&e instanceof Element?(e=>t.test(i(e,"overflow")+i(e,"overflow-y")+i(e,"overflow-x")))(e)?e:n(e.parentNode):document.body;return n(e)},this.checkMeetMinMax=e=>{const{vertical:t,verticalReverse:i,range:n}=this._adapter.getProps(),r=this._adapter.getState("currentValue"),{sliderX:s,sliderY:a,sliderWidth:o,sliderHeight:l}=(this.transValueToPos(r),this._adapter.getSliderLengths()),{chooseMovePos:c,isDrag:h}=this._adapter.getStates();let d,u;return d=t&&i?a+(t?l:o):t?a:s,u=t&&i?a:t?a+l:s+o,t&&i?e>=d?e=d:e<=u&&(e=u):e<=d?e=d:e>=u&&(e=u),e},this.transPosToValue=(e,t)=>{const i=this.checkMeetMinMax(e),{min:n,max:r,currentValue:s}=this._adapter.getStates(),{range:a,vertical:o,step:l,verticalReverse:c}=this._adapter.getProps(),{sliderX:h,sliderY:d,sliderWidth:u,sliderHeight:p}=this._adapter.getSliderLengths(),g=o?d:h,f=o?p:u;let m,v;return m=o&&c?(g+f-i)/f*(r-n)+n:(i-g)/f*(r-n)+n,v=a?t?s[0]:s[1]:s,1!==l&&(m=Math.round(m/l)*l),a&&m!==v?t?[m,s[1]]:[s[0],m]:!a&&m!==v&&m},this.transValueToPos=e=>{const{min:t,max:i}=this._adapter.getStates(),{vertical:n,range:r,verticalReverse:s}=this._adapter.getProps(),{sliderX:a,sliderY:o,sliderWidth:l,sliderHeight:c}=this._adapter.getSliderLengths(),h=n?o:a,d=n?c:l;return r?[(e[0]-t)*d/(i-t)+h,(e[1]-t)*d/(i-t)+h]:(e-t)*d/(i-t)+h},this.isMarkActive=e=>{const{min:t,max:i,range:n,included:r}=this._adapter.getProps(),s=this._adapter.getState("currentValue");return"number"===typeof(e/1)&&e>=t&&e<=i&&(n?(e>s[1]||e<s[0])&&r?"unActive":"active":e<=s&&r?"active":"unActive")},this.outPutValue=e=>{const t=this._adapter.getProp("step"),i=(()=>{const e=(e=>{var t,i;return/^\d+(\.\d+)?$/.test(String(e))&&null!==(i=null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)&&void 0!==i?i:0})(t),i=Math.pow(10,e);return e=>Math.round(e*i)/i})();return Array.isArray(e)?[i(e[0]),i(e[1])]:i(e)},this.handleDisabledChange=e=>{this._adapter.updateDisabled(e)},this.checkAndUpdateIsInRenderTreeState=()=>this._adapter.checkAndUpdateIsInRenderTreeState(),this.calculateOutputValue=(e,t)=>{const i=this.transPosToValue(e,t);if(!1!==i)return this.outPutValue(i)},this.handleValueChange=(e,t)=>{const{min:i,max:n}=this._adapter.getStates();let r=null;const s={};this.valueFormatIsCorrect(t)?(Array.isArray(e)&&Array.isArray(t)&&(t=[t[0]<i?i:t[0],t[1]>n?n:t[1]],r=Object.assign(s,{currentValue:t})),"number"===typeof e&&"number"===typeof t&&(t=t>n?n:t<i?i:t,r=Object.assign(s,{currentValue:t}))):r=s,r&&this._adapter.transNewPropsToState(r)},this.onHandleDown=(e,t)=>{this._adapter.onHandleDown(e);const i=this._adapter.getState("disabled"),{vertical:n}=this._adapter.getProps(),{dragging:r}=this._adapter.getOverallVars();if(i)return!1;this._adapter.setStateVal("isDrag",!0),this._adapter.setStateVal("chooseMovePos",t),"min"===t?this._adapter.setDragging([!0,r[1]]):this._adapter.setDragging([r[0],!0]);const s=this.handleMousePos(e.clientX,e.clientY);let a=n?s.y:s.x;if(this._adapter.isEventFromHandle(e)){const t=this._getHandleCenterPosition(n,e.target);this._dragOffset=a-t,a=t}else this._dragOffset=0;return!0},this.onHandleMove=e=>{this._adapter.setEventDefault(e);const{disabled:t,chooseMovePos:i}=this._adapter.getStates(),{vertical:n}=this._adapter.getProps(),{dragging:r}=this._adapter.getOverallVars();if(t)return!1;this.onHandleEnter(i);const s=this.handleMousePos(e.clientX,e.clientY);let a=n?s.y:s.x;if(a-=this._dragOffset,"min"===i&&r[0]||"max"===i&&r[1]){const e=this.calculateOutputValue(a,"min"===i);if(void 0===e)return!1;this._adapter.notifyChange(e),this._adapter.onHandleMove(a,"min"===i,void 0,!1,e)}return!0},this.onHandleTouchStart=(e,t)=>{const i=this._adapter.getMinHandleEl(),n=this._adapter.getMaxHandleEl();if(e.target===i||e.target===n){(0,Me.jK)(e);const i=fb(e.touches[0],e);this.onHandleDown(i,t)}},this.onHandleTouchMove=e=>{const t=this._adapter.getMinHandleEl(),i=this._adapter.getMaxHandleEl();if(e.target===t||e.target===i){const t=fb(e.touches[0],e);this.onHandleMove(t)}},this.onHandleEnter=e=>{const{disabled:t,focusPos:i}=this._adapter.getStates();t||i||e===i||this._adapter.onHandleEnter(e)},this.onHandleLeave=()=>{const e=this._adapter.getState("disabled"),t=this._adapter.getState("isDrag");e||t||this._adapter.onHandleLeave()},this.onHandleUp=e=>{this._adapter.onHandleUpBefore(e);const{disabled:t,chooseMovePos:i}=this._adapter.getStates(),{dragging:n}=this._adapter.getOverallVars();return!t&&("min"===i?this._adapter.setDragging([!1,n[1]]):this._adapter.setDragging([n[0],!1]),this._adapter.setStateVal("isDrag",!1),this._adapter.onHandleLeave(),this._adapter.onHandleUpAfter(),!0)},this._handleValueDecreaseWithKeyBoard=(e,t)=>{const{min:i,currentValue:n}=this.getStates(),{range:r}=this.getProps();if("min"===t){if(r){let t=n[0]-e;return t=t<i?i:t,[t,n[1]]}{let t=n-e;return t=t<i?i:t,t}}{let t=n[1]-e;return t=t<n[0]?n[0]:t,[n[0],t]}},this._handleValueIncreaseWithKeyBoard=(e,t)=>{const{max:i,currentValue:n}=this.getStates(),{range:r}=this.getProps();if("min"===t){if(r){let t=n[0]+e;return t=t>n[1]?n[1]:t,[t,n[1]]}{let t=n+e;return t=t>i?i:t,t}}{let t=n[1]+e;return t=t>i?i:t,[n[0],t]}},this._handleHomeKey=e=>{const{min:t,currentValue:i}=this.getStates(),{range:n}=this.getProps();return"min"===e?n?[t,i[1]]:t:[i[0],i[0]]},this._handleEndKey=e=>{const{max:t,currentValue:i}=this.getStates(),{range:n}=this.getProps();return"min"===e?n?[i[1],i[1]]:t:[i[0],t]},this.handleKeyDown=(e,t)=>{const{min:i,max:n,currentValue:r}=this.getStates(),{step:s,range:a}=this.getProps();let o;switch(e.key){case"ArrowLeft":case"ArrowDown":o=this._handleValueDecreaseWithKeyBoard(s,t);break;case"ArrowRight":case"ArrowUp":o=this._handleValueIncreaseWithKeyBoard(s,t);break;case"PageUp":o=this._handleValueIncreaseWithKeyBoard(10*s,t);break;case"PageDown":o=this._handleValueDecreaseWithKeyBoard(10*s,t);break;case"Home":o=this._handleHomeKey(t);break;case"End":o=this._handleEndKey(t)}if(["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","PageUp","PageDown","Home","End"].includes(e.key)){let t=!0;t=Array.isArray(r)?!(r[0]===o[0]&&r[1]===o[1]):r!==o,t&&(this._adapter.updateCurrentValue(o),this._adapter.notifyChange(o)),(0,Me.jK)(e)}},this.onFocus=(e,t)=>{(0,Me.jK)(e);const{target:i}=e;try{i.matches(":focus-visible")&&("min"===t?this._adapter.setStateVal("firstDotFocusVisible",!0):this._adapter.setStateVal("secondDotFocusVisible",!0))}catch(n){(0,A.A)(!0,"Warning: [Semi Slider] The current browser does not support the focus-visible")}},this.onBlur=(e,t)=>{const{firstDotFocusVisible:i,secondDotFocusVisible:n}=this.getStates();"min"===t?i&&this._adapter.setStateVal("firstDotFocusVisible",!1):n&&this._adapter.setStateVal("secondDotFocusVisible",!1)},this.handleWrapClick=e=>{const{disabled:t,isDrag:i}=this._adapter.getStates();if(i||t||this._adapter.isEventFromHandle(e))return;const{vertical:n}=this.getProps(),r=this.handleMousePos(e.clientX,e.clientY),s=n?r.y:r.x,a=this.checkWhichHandle(s),o=this.calculateOutputValue(s,a);void 0!==o&&(this._adapter.notifyChange(o),this._isControlledComponent()||this.setHandlePos(s,a,!0,o))},this.setHandlePos=function(e,i){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;t._adapter.onHandleMove(e,i,(()=>t._adapter.onHandleUpAfter()),n,r)},this.checkWhichHandle=e=>{const{vertical:t,verticalReverse:i}=this.getProps(),{currentValue:n}=this._adapter.getStates(),r=this.transValueToPos(n);let s=!0;return Array.isArray(r)&&(e>r[1]||Math.abs(e-r[0])>Math.abs(e-r[1]))&&(s=!1),t&&i&&(s=!s),s},this.handleWrapperEnter=()=>{this._adapter.setStateVal("showBoundary",!0)},this.handleWrapperLeave=()=>{this._adapter.setStateVal("showBoundary",!1)}}init(){this._checkCurrentValue(),this._dragOffset=0}_checkCurrentValue(){const{currentValue:e,min:t,max:i}=this.getStates();let n;Array.isArray(e)?(n=[],n[0]=this._checkValidity(e[0],t,i),n[1]=this._checkValidity(e[1],t,i)):n=this._checkValidity(e,t,i),this._adapter.updateCurrentValue(n)}destroy(){this._adapter.unSubscribeEventListener()}_getHandleCenterPosition(e,t){const i=t.getBoundingClientRect(),{x:n,y:r}=this.handleMousePos(i.left+.5*i.width,i.top+.5*i.height);return e?r:n}}var vb=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const yb=gb.PREFIX;class bb extends M.A{constructor(e){super(e),this.renderHandle=()=>{var e,t,i,n,r,s,a,l;const{vertical:c,range:h,tooltipVisible:u,tipFormatter:p,"aria-label":g,"aria-labelledby":f,"aria-valuetext":m,getAriaValueText:v,disabled:y}=this.props,{chooseMovePos:b,isDrag:_,isInRenderTree:x,firstDotFocusVisible:S,secondDotFocusVisible:w}=this.state,C=c?"top":"left",k=this.foundation.getMinAndMaxPercent(this.state.currentValue),A=k.min,E=k.max,{tipVisible:T,tipChildren:O}=this.foundation.computeHandleVisibleVal(u&&x,p,h),P=d()(gb.HANDLE,{["".concat(gb.HANDLE,"-clicked")]:"min"===b&&_}),M=d()(gb.HANDLE,{["".concat(gb.HANDLE,"-clicked")]:"max"===b&&_}),{min:I,max:R,currentValue:D}=this.state,L={"aria-label":null!==g&&void 0!==g?g:y?"Disabled Slider":void 0,"aria-labelledby":f,"aria-disabled":y};c&&Object.assign(L,{"aria-orientation":"vertical"});const j=h?o.createElement(o.Fragment,null,o.createElement(vh.A,{content:O.min,position:"top",trigger:"custom",rePosKey:A,visible:x&&(T.min||S),className:"".concat(gb.HANDLE,"-tooltip")},o.createElement("span",Object.assign({ref:this.minHanleEl,className:P,style:{[C]:"".concat(100*A,"%"),zIndex:"min"===b?2:1},onMouseDown:e=>{this.foundation.onHandleDown(e,"min")},onMouseEnter:()=>{this.foundation.onHandleEnter("min")},onTouchStart:e=>{this.foundation.onHandleTouchStart(e,"min")},onMouseLeave:()=>{this.foundation.onHandleLeave()},onKeyUp:e=>{this.foundation.onHandleUp(e)},onTouchEnd:e=>{this.foundation.onHandleUp(e)},onKeyDown:e=>{this.foundation.handleKeyDown(e,"min")},onFocus:e=>{this.foundation.onFocus(e,"min")},onBlur:e=>{this.foundation.onBlur(e,"min")},role:"slider",tabIndex:y?-1:0},L,{"aria-valuetext":v?v(D[0],0):m,"aria-valuenow":D[0],"aria-valuemax":D[1],"aria-valuemin":I}),(null===(i=this.props.handleDot)||void 0===i?void 0:i[0])&&o.createElement("div",{className:gb.HANDLE_DOT,style:Object.assign(Object.assign({},(null===(n=this.props.handleDot[0])||void 0===n?void 0:n.size)?{width:this.props.handleDot[0].size,height:this.props.handleDot[0].size}:{}),(null===(r=this.props.handleDot[0])||void 0===r?void 0:r.color)?{backgroundColor:this.props.handleDot[0].color}:{})}))),o.createElement(vh.A,{content:O.max,position:"top",trigger:"custom",rePosKey:E,visible:x&&(T.max||w),className:"".concat(gb.HANDLE,"-tooltip")},o.createElement("span",Object.assign({ref:this.maxHanleEl,className:M,style:{[C]:"".concat(100*E,"%"),zIndex:"max"===b?2:1},onMouseDown:e=>{this.foundation.onHandleDown(e,"max")},onMouseEnter:()=>{this.foundation.onHandleEnter("max")},onMouseLeave:()=>{this.foundation.onHandleLeave()},onKeyUp:e=>{this.foundation.onHandleUp(e)},onTouchStart:e=>{this.foundation.onHandleTouchStart(e,"max")},onTouchEnd:e=>{this.foundation.onHandleUp(e)},onKeyDown:e=>{this.foundation.handleKeyDown(e,"max")},onFocus:e=>{this.foundation.onFocus(e,"max")},onBlur:e=>{this.foundation.onBlur(e,"max")},role:"slider",tabIndex:y?-1:0},L,{"aria-valuetext":v?v(D[1],1):m,"aria-valuenow":D[1],"aria-valuemax":R,"aria-valuemin":D[0]}),(null===(s=this.props.handleDot)||void 0===s?void 0:s[1])&&o.createElement("div",{className:gb.HANDLE_DOT,style:Object.assign(Object.assign({},(null===(a=this.props.handleDot[1])||void 0===a?void 0:a.size)?{width:this.props.handleDot[1].size,height:this.props.handleDot[1].size}:{}),(null===(l=this.props.handleDot[1])||void 0===l?void 0:l.color)?{backgroundColor:this.props.handleDot[1].color}:{})})))):o.createElement(vh.A,{content:O.min,showArrow:this.props.showArrow,position:"top",trigger:"custom",rePosKey:A,visible:x&&(T.min||S),className:"".concat(gb.HANDLE,"-tooltip")},o.createElement("span",Object.assign({onMouseOver:this.foundation.checkAndUpdateIsInRenderTreeState,ref:this.minHanleEl,className:P,style:{[C]:"".concat(100*A,"%"),zIndex:"min"===b&&_?2:1},onMouseDown:e=>{this.foundation.onHandleDown(e,"min")},onMouseEnter:()=>{this.foundation.onHandleEnter("min")},onTouchStart:e=>{this.foundation.onHandleTouchStart(e,"min")},onMouseLeave:()=>{this.foundation.onHandleLeave()},onKeyUp:e=>{this.foundation.onHandleUp(e)},onTouchEnd:e=>{this.foundation.onHandleUp(e)},onKeyDown:e=>{this.foundation.handleKeyDown(e,"min")},onFocus:e=>{this.foundation.onFocus(e,"min")},onBlur:e=>{this.foundation.onBlur(e,"min")},role:"slider","aria-valuetext":v?v(D,0):m,tabIndex:y?-1:0},L,{"aria-valuenow":D,"aria-valuemax":R,"aria-valuemin":I}),this.props.handleDot&&o.createElement("div",{className:gb.HANDLE_DOT,style:Object.assign(Object.assign({},(null===(e=this.props.handleDot)||void 0===e?void 0:e.size)?{width:this.props.handleDot.size,height:this.props.handleDot.size}:{}),(null===(t=this.props.handleDot)||void 0===t?void 0:t.color)?{backgroundColor:this.props.handleDot.color}:{})})));return j},this.renderTrack=()=>{const{range:e,included:t,vertical:i}=this.props,n=this.foundation.getMinAndMaxPercent(this.state.currentValue),r=n.min,s=n.max;let a=i?{height:"".concat(e?100*Math.abs(s-r):100*r,"%"),top:e?"".concat(100*Math.min(r,s),"%"):0}:{width:"".concat(e?100*Math.abs(s-r):100*r,"%"),left:e?"".concat(100*Math.min(r,s),"%"):0};return a=t?a:{},o.createElement("div",{className:gb.TRACK,style:a,onClick:this.foundation.handleWrapClick})},this.renderStepDot=()=>{const{min:e,max:t,vertical:i,marks:n}=this.props,r=i?"top":"left";return n&&Object.keys(n).length>0?o.createElement("div",{className:gb.DOTS},Object.keys(n).map((i=>{const s=this.foundation.isMarkActive(Number(i)),a=d()("".concat(yb,"-dot"),{["".concat(yb,"-dot-active")]:"active"===this.foundation.isMarkActive(Number(i))}),l=(Number(i)-e)/(t-e),c=o.createElement("span",{key:i,onClick:this.foundation.handleWrapClick,className:a,style:{[r]:"calc(".concat(100*l,"% - 2px)")}});return s?this.props.tooltipOnMark?o.createElement(vh.A,{content:n[i]},c):c:null}))):null},this.renderLabel=()=>{if(!this.props.showMarkLabel)return null;const{min:e,max:t,vertical:i,marks:n,verticalReverse:r}=this.props,s=i?"top":"left";return n&&Object.keys(n).length>0?o.createElement("div",{className:gb.MARKS+(i&&r?"-reverse":"")},Object.keys(n).map((a=>{const l=this.foundation.isMarkActive(Number(a)),c=(Number(a)-e)/(t-e);return l?o.createElement("span",{key:a,className:d()("".concat(yb,"-mark").concat(i&&r?"-reverse":"")),style:{[s]:"".concat(100*c,"%")},onClick:this.foundation.handleWrapClick},n[a]):null}))):null},this._getAriaValueText=(e,t)=>{const{getAriaValueText:i}=this.props;return i?i(e,t):e};let{value:t}=this.props;t||(t=this.props.defaultValue),this.state={currentValue:t||(this.props.range?[0,0]:0),min:this.props.min||0,max:this.props.max||0,focusPos:"",onChange:this.props.onChange,disabled:this.props.disabled||!1,chooseMovePos:"",isDrag:!1,clickValue:0,showBoundary:!1,isInRenderTree:!0,firstDotFocusVisible:!1,secondDotFocusVisible:!1},this.sliderEl=o.createRef(),this.minHanleEl=o.createRef(),this.maxHanleEl=o.createRef(),this.dragging=[!1,!1],this.foundation=new mb(this.adapter),this.eventListenerSet=new Set,this.handleDownEventListenerSet=new Set}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{getSliderLengths:()=>{var e;if(this.sliderEl&&this.sliderEl.current){const t=this.sliderEl.current.getBoundingClientRect(),i=null===(e=this.sliderEl.current.offsetParent)||void 0===e?void 0:e.getBoundingClientRect(),n={x:i?t.left-i.left:this.sliderEl.current.offsetLeft,y:i?t.top-i.top:this.sliderEl.current.offsetTop};return{sliderX:n.x,sliderY:n.y,sliderWidth:t.width,sliderHeight:t.height}}return{sliderX:0,sliderY:0,sliderWidth:0,sliderHeight:0}},getParentRect:()=>{const e=this.sliderEl&&this.sliderEl.current&&this.sliderEl.current.offsetParent;if(e)return e.getBoundingClientRect()},getScrollParentVal:()=>{const e=this.foundation.getScrollParent(this.sliderEl.current);return{scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}},isEventFromHandle:e=>{const t=[this.minHanleEl,this.maxHanleEl];let i=!1;return t.forEach((t=>{if(!t)return;const n=t&&t.current,r=ye.findDOMNode(n);r&&r.contains(e.target)&&(i=!0)})),i},getOverallVars:()=>({dragging:this.dragging}),updateDisabled:e=>{this.setState({disabled:e})},transNewPropsToState(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r();this.setState(e,t)},notifyChange:e=>{this.props.onChange(Array.isArray(e)?[...e].sort():e)},setDragging:e=>{this.dragging=e},updateCurrentValue:e=>{const{currentValue:t}=this.state;e!==t&&this.setState({currentValue:e})},setOverallVars:(e,t)=>{this[e]=t},getMinHandleEl:()=>this.minHanleEl.current,getMaxHandleEl:()=>this.maxHanleEl.current,onHandleDown:e=>{this.handleDownEventListenerSet.add(this._addEventListener(document.body,"mousemove",this.foundation.onHandleMove,!1)),this.handleDownEventListenerSet.add(this._addEventListener(window,"mouseup",this.foundation.onHandleUp,!1)),this.handleDownEventListenerSet.add(this._addEventListener(document.body,"touchmove",this.foundation.onHandleTouchMove,!1))},onHandleMove:function(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r(),s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;if(!e.foundation.checkAndUpdateIsInRenderTreeState())return;const{value:l}=e.props;let c=o;if(void 0===c){const n=e.foundation.transPosToValue(t,i);if(!1===n)return;c=e.foundation.outPutValue(n)}const{currentValue:h}=e.state;if(!a()(e.foundation.outPutValue(h),c)){if(!s&&e.foundation.valueFormatIsCorrect(l))return!1;e.setState({currentValue:c},n)}},setEventDefault:e=>{e.stopPropagation(),e.preventDefault()},setStateVal:(e,t)=>{this.setState({[e]:t})},checkAndUpdateIsInRenderTreeState:()=>{const e=function(e){return!!e&&Boolean(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(this.sliderEl.current);return e!==this.state.isInRenderTree&&this.setState({isInRenderTree:e}),e},onHandleEnter:e=>{this.setState({focusPos:e})},onHandleLeave:()=>{this.setState({focusPos:""})},onHandleUpBefore:e=>{var t,i;null===(i=(t=this.props).onMouseUp)||void 0===i||i.call(t,e),e.stopPropagation(),e.preventDefault(),Array.from(this.handleDownEventListenerSet).forEach((e=>e())),this.handleDownEventListenerSet.clear()},onHandleUpAfter:()=>{const{currentValue:e}=this.state,t=this.foundation.outPutValue(e);this.props.onAfterChange(t)},unSubscribeEventListener:()=>{Array.from(this.eventListenerSet).forEach((e=>e()))}})}componentDidMount(){this.foundation.init()}componentDidUpdate(e,t){const i=!a()(this.props.value,e.value);if(this.props.disabled!==e.disabled&&this.foundation.handleDisabledChange(this.props.disabled),i){const e=this.props.value,t=this.state.currentValue;this.foundation.handleValueChange(t,e),this.props.onAfterChange(this.props.value)}}componentWillUnmount(){this.foundation.destroy()}render(){const{disabled:e,currentValue:t,min:i,max:n}=this.state,r=this.props,{vertical:s,verticalReverse:a,style:l,railStyle:c,range:h,className:u}=r,p=vb(r,["vertical","verticalReverse","style","railStyle","range","className"]),g=d()("".concat(yb,"-wrapper"),{["".concat(yb,"-disabled")]:e,["".concat(gb.VERTICAL,"-wrapper")]:s,["".concat(yb,"-reverse")]:s&&a},u),f=d()("".concat(yb,"-boundary"),{["".concat(yb,"-boundary-show")]:this.props.showBoundary&&this.state.showBoundary}),m=d()({["".concat(yb)]:!s,[gb.VERTICAL]:s}),v=Array.isArray(t)?[...t].sort():t,y=h?"Range: ".concat(this._getAriaValueText(v[0],0)," to ").concat(this._getAriaValueText(v[1],1)):void 0,b=o.createElement("div",Object.assign({className:g,style:l,ref:this.sliderEl,"aria-label":y,onMouseEnter:()=>this.foundation.handleWrapperEnter(),onMouseLeave:()=>this.foundation.handleWrapperLeave()},this.getDataAttr(p)),o.createElement("div",{className:"".concat(yb,"-rail"),onClick:this.foundation.handleWrapClick,style:c}),this.renderTrack(),this.renderStepDot(),o.createElement("div",null,this.renderHandle()),this.renderLabel(),o.createElement("div",{className:f},o.createElement("span",{className:"".concat(yb,"-boundary-min")},i),o.createElement("span",{className:"".concat(yb,"-boundary-max")},n)));return s?b:o.createElement("div",{className:m},b)}_addEventListener(e,t,i){if(e.addEventListener){for(var n=arguments.length,s=new Array(n>3?n-3:0),a=3;a<n;a++)s[a-3]=arguments[a];e.addEventListener(t,i,...s);const r=()=>{null===e||void 0===e||e.removeEventListener(t,i),Promise.resolve().then((()=>{this.eventListenerSet.delete(r)}))};return this.eventListenerSet.add(r),r}return r()}}bb.propTypes={defaultValue:c().oneOfType([c().number,c().array]),disabled:c().bool,showMarkLabel:c().bool,included:c().bool,marks:c().object,max:c().number,min:c().number,range:c().bool,step:c().number,tipFormatter:c().func,value:c().oneOfType([c().number,c().array]),vertical:c().bool,onAfterChange:c().func,onChange:c().func,onMouseUp:c().func,tooltipOnMark:c().bool,tooltipVisible:c().bool,showArrow:c().bool,style:c().object,className:c().string,showBoundary:c().bool,railStyle:c().object,verticalReverse:c().bool,getAriaValueText:c().func,handleDot:c().oneOfType([c().shape({size:c().string,color:c().string}),c().arrayOf(c().shape({size:c().string,color:c().string}))])},bb.defaultProps={disabled:!1,showMarkLabel:!0,tooltipOnMark:!1,included:!0,max:100,min:0,range:!1,showArrow:!0,step:1,tipFormatter:e=>e,vertical:!1,showBoundary:!1,onAfterChange:e=>{},onChange:e=>{},verticalReverse:!1};var _b=i(88794);const xb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zo.DEFAULT_FORMAT,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_b.A;if(e instanceof Date)return e;if("number"===typeof e)return new Date(Md()(e));if("string"===typeof e){let n=new Date;return n=sa(e,t,n,{locale:i}),n}return"undefined"!==typeof e?new Date:void 0},Sb=function(e){return lr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zo.DEFAULT_FORMAT,{locale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:_b.A})},wb=e=>Array.isArray(e)?[...e]:[];class Cb extends k.A{constructor(e){super(Object.assign({},e))}init(){this.initDataFromDefaultValue();(this._isControlledComponent("open")?this.getProp("open"):this.getProp("defaultOpen"))&&!this._isControlledComponent("open")&&this._adapter.registerClickOutSide()}getPosition(){const e=this.getProp("position"),t=this.getProp("type")||Zo.DEFAULT_TYPE,i=this.getContext("direction");return e||("rtl"===i?"bottomRight":"")||Zo.DEFAULT_POSITION[t]}isDisabledHMS(e){let{hours:t,minutes:i,seconds:n}=e;const{disabledHours:r,disabledMinutes:s,disabledSeconds:a}=this.getProps(),o=!(0,L.A)(t)&&((e,t)=>{if("function"===typeof e){const i=e();if(Array.isArray(i)&&!(0,L.A)(t)&&i.some((e=>Md()(e)===Md()(t))))return!0}return!1})(r,t),l=!(0,L.A)(t)&&!(0,L.A)(i)&&((e,t,i)=>{if("function"===typeof e){const n=e(t);if(Array.isArray(n)&&!(0,L.A)(t)&&!(0,L.A)(i)&&n.some((e=>Md()(e)===Md()(i))))return!0}return!1})(s,t,i),c=!(0,L.A)(t)&&!(0,L.A)(i)&&!(0,L.A)(n)&&((e,t,i,n)=>{if("function"===typeof e){const r=e(t,i);if(Array.isArray(r)&&!(0,L.A)(t)&&!(0,L.A)(i)&&!(0,L.A)(n)&&r.some((e=>Md()(e)===Md()(n))))return!0}return!1})(a,t,i,n);return o||l||c}isValidTimeZone(e){return["string","number"].includes(typeof e)&&""!==e}getDefaultFormatIfNeed(){return this._isInProps("format")?this.getProp("format"):this.getProp("use12Hours")?Zo.DEFAULT_FORMAT_A:Zo.DEFAULT_FORMAT}initDataFromDefaultValue(){const e=this.getProp("defaultValue");let t=this.getProp("value");const i=this.getProp("timeZone"),n=this.getValidFormat(),{rangeSeparator:r,dateFnsLocale:s}=this.getProps();t=t||e,Array.isArray(t)||(t=t?[t]:[]);const a=[];let o=!1;t.forEach((e=>{const t=xb(e,n,s);isNaN(t.getTime())||a.push(this.isValidTimeZone(i)?vr(t,i):t)}));const l=[!0,!1];a.map(((e,t)=>{l[t]=function(e){return(0,nn.A)(1,arguments),(0,sn.A)(e).getHours()}(e)<12})),a.length===t.length?t=a:(t=[],t.length&&(o=!0));let c="";o||(c=t.map((e=>Sb(e,n,s))).join(r)),this.setState({isAM:l,value:t,inputValue:c,invalid:o})}getValidFormat(e){let t=e;return(0,L.A)(t)&&(t=this.getDefaultFormatIfNeed()),"string"!==typeof t&&(t=Zo.DEFAULT_FORMAT),t}handlePanelChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.getValidFormat(),n=this.getProp("dateFnsLocale"),r=this.getState("value");let s=this.getState("isAM");const a=wb(r);if(s=wb(s),e){const o=Boolean(e.isAM),l=xb(e.timeStampValue,i,n);a[t]=l,s[t]=o;const c=this.formatValue(a);if(this.getState("isAM")[t]!==e.isAM&&this.setState({isAM:s}),!this._isControlledComponent("value")){const e=this.validateDates(a);this.setState({isAM:s,value:a,inputValue:c,invalid:e})}this._hasChanged(a,r)&&this._notifyChange(a,c)}}refreshProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{value:t,timeZone:i,__prevTimeZone:n}=e;let r=this.parseValue(t),s=r.some((e=>isNaN(Number(e))));s||(this.isValidTimeZone(i)&&(r=r.map((e=>vr(this.isValidTimeZone(n)?yr(e,n):e,i)))),s=r.some((e=>this.isDisabledHMS({hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}))));const a=this.formatValue(r);this.setState({value:r,invalid:s,inputValue:a})}handleFocus(e){this.getState("open")||this.handlePanelOpen(),this._adapter.notifyFocus(e)}setPanel(e){this._adapter.togglePanel(e)}destroy(){this._adapter.unregisterClickOutSide()}handlePanelOpen(){this._isControlledComponent("open")||(this._adapter.registerClickOutSide(),this.setPanel(!0)),this._adapter.notifyOpenChange(!0)}handlePanelClose(e,t){this._isControlledComponent("open")||(this._adapter.unregisterClickOutSide(),this.setPanel(!1)),this._adapter.notifyOpenChange(!1),this._adapter.notifyBlur(t)}handleVisibleChange(e){this._isControlledComponent("open")||this._adapter.togglePanel(e),this._adapter.notifyOpenChange(e)}handleInputChange(e){this._adapter.setInputValue(e);const t=this.getProp("rangeSeparator"),i=iv()(e,t),n=this.getValidFormat();if(""!==e&&i.some((e=>!((e,t)=>{let i=!0;const n="BDEGHKLMOPQRSTXYabcehimopqstuwxyz",r=new RegExp("[".concat(n,"]"),"g"),s=new RegExp("[^".concat(n,"]"),"g"),a=/[H|m|s]{1,2}/,o=t.split(s),l=t.replace(r,""),c=new RegExp("[".concat(l,"]"),"g"),h=e.split(c);if(o.length!==h.length)i=!1;else for(let d=0,u=h.length;d<u;d++){const e=o[d],t=h[d];if(a.test(e)&&t.length<e.length){i=!1;break}}return i})(e,n))))return;const r=this.parseInput(e),s=this.validateDates(r),a={invalid:s},o=this.getState("value");let l=wb(o);s||(a.value=r,l=[...r]),this._isControlledComponent("value")||this.setState(a),this._hasChanged(l,o)&&this._notifyChange(l,e)}doValidate(e){return"string"===typeof e?this.validateStr(e):Array.isArray(e)?this.validateDates(e):void 0}validateStr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=this.parseInput(e);return this.validateDates(t)}validateDates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.some((e=>isNaN(Number(e))));return t||(t=e.some((e=>this.isDisabledHMS({hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()})))),t}handleInputBlur(e){const t=this.getState("invalid"),i=this.getState("inputValue"),n=this.getState("value");i?t?this.setState({inputValue:this.formatValue(n),invalid:!1}):this.setState({inputValue:this.formatValue(n)}):this.setState({inputValue:"",value:[],invalid:!1})}formatValue(e){const t=this.getValidFormat(),i=this.getProp("rangeSeparator"),n=this.getProp("dateFnsLocale");let r=e;if(r&&!Array.isArray(r)&&(r=r[r]),r&&Array.isArray(r)){const e=r.map((e=>{let i;return i=_()(e)?"":Sb(e,t,n),i}));return e.join(i)}}parseInput(e){const t=this.getValidFormat(),i=this.getProp("rangeSeparator"),n=this.getProp("dateFnsLocale");return e&&"string"===typeof e?iv()(e,i).map((e=>xb(e,t,n))):[]}parseValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.getValidFormat(),i=this.getProp("dateFnsLocale");let n=e;return Array.isArray(n)||(n=n?[n]:[]),Array.isArray(n)?n.map((e=>xb(e,t,i))):[]}_notifyChange(e,t){let i=t,n=e;const r=this.getProp("timeZone");if(this._adapter.isRangePicker()){const e=this.getProp("rangeSeparator");i=iv()(t,e)}else n=Array.isArray(n)?n[0]:n;if(this.isValidTimeZone(r)&&n){const e=this.getValidFormat();Array.isArray(n)?(n=n.map((e=>yr(e,r))),i=n.map((t=>lr(t,e)))):(n=yr(n,r),i=lr(n,e))}this.getProp("onChangeWithDateFirst")?this._adapter.notifyChange(n,i):this._adapter.notifyChange(i,n)}_hasChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=this.getValidFormat(),n=this.getProp("dateFnsLocale");return e.length!==t.length||e.some(((e,r)=>{const s=t[r];return!an(e)||!an(s)||Sb(e,i,n)!==Sb(s,i,n)}))}}const kb=Cb;class Ab extends k.A{constructor(e){super(Object.assign({},e))}init(){}destroy(){}handleFocus(e){this.storeCursor(),this._adapter.notifyFocus(e)}handleChange(e){this.storeCursor(),this._adapter.notifyChange(e)}handleBlur(e){this.clearCursor(),this._adapter.notifyBlur(e)}storeCursor(){const e=this.getCache("inputNode");if(e){const{selectionStart:t}=e;this.setCache("cursorIndex",t)}}restoreCursor(){const e=this.getCache("inputNode"),t=this.getCache("cursorIndex");e&&!(0,L.A)(t)&&(e.selectionStart=t,e.selectionEnd=t)}clearCursor(){this.setCache("cursorIndex",null),this.setCache("beforeStr",null),this.setCache("afterStr",null)}}const Eb=Ab;var Tb=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Ob extends M.A{constructor(e){super(e),this.setRef=e=>this.adapter.setCache("inputNode",e),this.handleClick=e=>this.props.onClick(e),this.handleFocus=e=>this.foundation.handleFocus(e),this.handleBlur=e=>this.foundation.handleBlur(e),this.handleChange=e=>this.foundation.handleChange(e),this.foundation=new Eb(this.adapter),this.state={}}componentDidMount(){super.componentDidMount();const{focusOnOpen:e,preventScroll:t}=this.props;if(e){(window.requestAnimationFrame||window.setTimeout)((()=>{const e=this.adapter.getCache("inputNode");e&&(e.focus({preventScroll:t}),e.select())}))}}componentDidUpdate(e){const{timeStampValue:t}=this.props;this.isControlled("timeStampValue")&&t!==this.state.timeStampValue&&this.foundation.restoreCursor(),this.props.value!==e.value&&this.foundation.restoreCursor()}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifyChange:function(){return e.props.onChange(...arguments)},notifyFocus:function(){return e.props.onFocus(...arguments)},notifyBlur:function(){return e.props.onBlur(...arguments)}})}getInput(){const e=this.props,{prefixCls:t,placeholder:i,inputReadOnly:n,onFocus:r,disabled:s,type:a,locale:l,localeCode:c,insetLabel:h,validateStatus:u,value:p,onChange:g,invalid:f,format:m,clearText:v,disabledHours:y,disabledMinutes:b,disabledSeconds:_,onEsc:x,defaultOpenValue:S,currentSelectPanel:w,focusOnOpen:C,timeStampValue:k,timeZone:A,defaultOpen:E,dateFnsLocale:T}=e,O=Tb(e,["prefixCls","placeholder","inputReadOnly","onFocus","disabled","type","locale","localeCode","insetLabel","validateStatus","value","onChange","invalid","format","clearText","disabledHours","disabledMinutes","disabledSeconds","onEsc","defaultOpenValue","currentSelectPanel","focusOnOpen","timeStampValue","timeZone","defaultOpen","dateFnsLocale"]),P=d()("".concat(t,"-input"),{["".concat(t,"-input-invalid")]:f,["".concat(t,"-input-readonly")]:n}),M=f?"error":u;return o.createElement(ce,Object.assign({},O,{hideSuffix:!0,className:P,ref:this.setRef,value:p,placeholder:i||l.placeholder[a],readonly:Boolean(n),onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,suffix:o.createElement(ic,{onClick:this.handleClick}),validateStatus:M,disabled:s,insetLabel:h}))}render(){const{prefixCls:e}=this.props;return o.createElement("div",{className:"".concat(e,"-input-wrap")},this.getInput())}}Ob.propTypes={borderless:c().bool,format:c().string,prefixCls:c().string,placeholder:c().string,clearText:c().string,inputReadOnly:c().bool,hourOptions:c().array,minuteOptions:c().array,secondOptions:c().array,disabledHours:c().func,disabledMinutes:c().func,disabledSeconds:c().func,onChange:c().func,onFocus:c().func,onBlur:c().func,onEsc:c().func,onClick:c().func,defaultOpenValue:c().object,currentSelectPanel:c().string,focusOnOpen:c().bool,timeStampValue:c().any,locale:c().object,localeCode:c().string,insetLabel:c().node,validateStatus:c().string,preventScroll:c().bool},Ob.defaultProps={borderless:!1,inputReadOnly:!1,onChange:r(),onBlur:r(),onFocus:r(),onClick:r(),disabledHours:r(),disabledMinutes:r(),disabledSeconds:r(),format:Zo.DEFAULT_FORMAT};const Pb=Ob,Mb={panelHeader:c().oneOfType([c().node,c().string]),panelFooter:c().oneOfType([c().node,c().string])},Ib=[c().string,c().number,c().instanceOf(Date)],Rb=c().oneOfType([...Ib,c().arrayOf(c().string),c().arrayOf(c().number),c().arrayOf(c().instanceOf(Date))]);var Db=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Lb extends M.A{constructor(e){var t;super(e),t=this,this.onCurrentSelectPanelChange=e=>{this.setState({currentSelectPanel:e})},this.handlePanelChange=(e,t)=>this.foundation.handlePanelChange(e,t),this.handleInput=e=>this.foundation.handleInputChange(e),this.createPanelProps=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{panels:i,panelFooter:n,panelHeader:r,locale:s}=t.props,a={panelHeader:r,panelFooter:n};if(t.adapter.isRangePicker()){const t={0:s.begin,1:s.end};a.panelHeader=Fi()(i,e,(0,L.A)(r)?Fi()(t,e,null):Array.isArray(r)?r[e]:r),a.panelFooter=Fi()(i,e,Array.isArray(n)?n[e]:n)}return a},this.handlePanelVisibleChange=e=>this.foundation.handleVisibleChange(e),this.openPanel=()=>{this.foundation.handlePanelOpen()},this.handleFocus=e=>{this.foundation.handleFocus(e)},this.handleBlur=e=>this.foundation.handleInputBlur(e),this.setTimePickerRef=e=>this.timePickerRef.current=e;const{format:i=Zo.DEFAULT_FORMAT}=e;this.state={open:e.open||e.defaultOpen||!1,value:[],inputValue:"",currentSelectPanel:0,isAM:[!0,!1],showHour:Boolean(i.match(/HH|hh|H|h/g)),showMinute:Boolean(i.match(/mm/g)),showSecond:Boolean(i.match(/ss/g)),invalid:void 0},this.foundation=new kb(this.adapter),this.timePickerRef=o.createRef(),this.savePanelRef=o.createRef(),this.useCustomTrigger="function"===typeof this.props.triggerRender}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{togglePanel:e=>{this.setState({open:e})},registerClickOutSide:()=>{this.clickOutSideHandler&&this.adapter.unregisterClickOutSide(),this.clickOutSideHandler=e=>{const t=this.savePanelRef&&this.savePanelRef.current,i=this.timePickerRef&&this.timePickerRef.current,n=e.target,r=e.composedPath&&e.composedPath()||[n];t&&t.contains(n)||i&&i.contains(n)||r.includes(i)||r.includes(t)||this.foundation.handlePanelClose(!0,e)},document.addEventListener("mousedown",this.clickOutSideHandler)},setInputValue:(e,t)=>this.setState({inputValue:e},t),unregisterClickOutSide:()=>{this.clickOutSideHandler&&(document.removeEventListener("mousedown",this.clickOutSideHandler),this.clickOutSideHandler=null)},notifyOpenChange:function(){return e.props.onOpenChange(...arguments)},notifyChange:(e,t)=>this.props.onChange&&this.props.onChange(e,t),notifyFocus:function(){return e.props.onFocus&&e.props.onFocus(...arguments)},notifyBlur:function(){return e.props.onBlur&&e.props.onBlur(...arguments)},isRangePicker:()=>this.props.type===Zo.TYPE_TIME_RANGE_PICKER})}static getDerivedStateFromProps(e,t){return"open"in e&&e.open!==t.open?{open:e.open}:null}componentDidUpdate(e){this.isControlled("value")&&this.props.value!==e.value?this.foundation.refreshProps(Object.assign({},this.props)):this.props.timeZone!==e.timeZone&&this.foundation.refreshProps({timeZone:this.props.timeZone,__prevTimeZone:e.timeZone,value:this.state.value})}getPanelElement(){const{prefixCls:e,type:t}=this.props,{isAM:i,value:n}=this.state,r=this.foundation.getDefaultFormatIfNeed(),s=[o.createElement(ql,Object.assign({},this.props,{key:0,format:r,isAM:i[0],timeStampValue:n[0],prefixCls:"".concat(e,"-panel"),onChange:e=>this.handlePanelChange(e,0),onCurrentSelectPanelChange:this.onCurrentSelectPanelChange},this.createPanelProps(0)))];t===Zo.TYPE_TIME_RANGE_PICKER&&s.push(o.createElement(ql,Object.assign({},this.props,{key:1,format:r,isAM:i[1],timeStampValue:n[1],prefixCls:"".concat(e,"-panel"),onChange:e=>this.handlePanelChange(e,1),onCurrentSelectPanelChange:this.onCurrentSelectPanelChange},this.createPanelProps(1))));const a=d()({[qo.RANGE_PANEL_LISTS]:this.adapter.isRangePicker()});return o.createElement("div",{ref:this.savePanelRef,className:a},s.map((e=>e)))}getPopupClassName(){const{use12Hours:e,prefixCls:t,popupClassName:i}=this.props,{showHour:n,showMinute:r,showSecond:s}=this.state;let a=0;return n&&(a+=1),r&&(a+=1),s&&(a+=1),e&&(a+=1),d()("".concat(t,"-panel"),i,{["".concat(t,"-panel-narrow")]:(!n||!r||!s)&&!e,[qo.RANGE_PICKER]:this.adapter.isRangePicker()},"".concat(t,"-panel-column-").concat(a))}focus(){}blur(){}render(){const e=this.props,{prefixCls:t,placeholder:i,disabled:n,defaultValue:r,dropdownMargin:s,className:a,popupStyle:l,size:c,style:h,locale:u,localeCode:p,zIndex:g,getPopupContainer:f,insetLabel:m,insetLabelId:v,inputStyle:y,showClear:b,panelHeader:_,panelFooter:x,rangeSeparator:S,onOpenChange:w,onChangeWithDateFirst:C,popupClassName:k,hideDisabledOptions:A,use12Hours:E,minuteStep:T,hourStep:O,secondStep:P,scrollItemProps:M,triggerRender:I,motion:R,autoAdjustOverflow:D,stopPropagation:L}=e,j=Db(e,["prefixCls","placeholder","disabled","defaultValue","dropdownMargin","className","popupStyle","size","style","locale","localeCode","zIndex","getPopupContainer","insetLabel","insetLabelId","inputStyle","showClear","panelHeader","panelFooter","rangeSeparator","onOpenChange","onChangeWithDateFirst","popupClassName","hideDisabledOptions","use12Hours","minuteStep","hourStep","secondStep","scrollItemProps","triggerRender","motion","autoAdjustOverflow","stopPropagation"]),F=this.foundation.getDefaultFormatIfNeed(),B=this.foundation.getPosition(),{open:N,inputValue:z,invalid:H,value:V}=this.state,W=this.getPopupClassName(),G=d()({["".concat(t,"-header")]:!0}),K=d()({["".concat(t,"-panel")]:!0,["".concat(t,"-panel-").concat(c)]:c}),Y=Object.assign(Object.assign({},j),{disabled:n,prefixCls:t,size:c,showClear:!n&&b,style:y,value:z,onFocus:this.handleFocus,insetLabel:m,insetLabelId:v,format:F,locale:u,localeCode:p,invalid:H,placeholder:i,onChange:this.handleInput,onBlur:this.handleBlur}),X={};return this.useCustomTrigger&&(X.onClick=this.openPanel),o.createElement("div",Object.assign({ref:this.setTimePickerRef,className:d()({[t]:!0},a),style:h},X),o.createElement(U.A,{getPopupContainer:f,zIndex:g,prefixCls:K,contentClassName:W,style:l,content:this.getPanelElement(),trigger:"custom",position:B,visible:!n&&Boolean(N),motion:R,margin:s,autoAdjustOverflow:D,stopPropagation:L},this.useCustomTrigger?o.createElement(ue,{triggerRender:I,disabled:n,value:V,inputValue:z,onChange:this.handleInput,placeholder:i,componentName:"TimePicker",componentProps:Object.assign({},this.props)}):o.createElement("span",{className:G},o.createElement(Pb,Object.assign({},Y)))))}}Lb.contextType=en.A,Lb.propTypes=Object.assign(Object.assign({"aria-labelledby":c().string,"aria-invalid":c().bool,"aria-errormessage":c().string,"aria-describedby":c().string,"aria-required":c().bool,prefixCls:c().string,borderless:c().bool,clearText:c().string,clearIcon:c().node,value:Rb,inputReadOnly:c().bool,disabled:c().bool,showClear:c().bool,defaultValue:Rb,open:c().bool,defaultOpen:c().bool,onOpenChange:c().func,position:c().any,getPopupContainer:c().func,placeholder:c().string,format:c().string,style:c().object,className:c().string,popupClassName:c().string,popupStyle:c().object,disabledHours:c().func,disabledMinutes:c().func,disabledSeconds:c().func,dropdownMargin:c().oneOfType([c().number,c().object]),hideDisabledOptions:c().bool,onChange:c().func,use12Hours:c().bool,hourStep:c().number,minuteStep:c().number,secondStep:c().number,focusOnOpen:c().bool,autoFocus:c().bool,size:c().oneOf(Zo.SIZE),stopPropagation:c().bool,panels:c().arrayOf(c().shape(Mb)),onFocus:c().func,onBlur:c().func,locale:c().object,localeCode:c().string,dateFnsLocale:c().object,zIndex:c().oneOfType([c().number,c().string]),insetLabel:c().node,insetLabelId:c().string,validateStatus:c().oneOf(Zo.STATUS),type:c().oneOf(Zo.TYPES),rangeSeparator:c().string,triggerRender:c().func,timeZone:c().oneOfType([c().string,c().number]),scrollItemProps:c().object,motion:c().oneOfType([c().bool,c().func,c().object]),autoAdjustOverflow:c().bool},Mb),{inputStyle:c().object,preventScroll:c().bool}),Lb.defaultProps=Object.assign({autoAdjustOverflow:!0,borderless:!1,getPopupContainer:()=>document.body,showClear:!0,zIndex:P.nL.DEFAULT_Z_INDEX,rangeSeparator:Zo.DEFAULT_RANGE_SEPARATOR,onOpenChange:r(),clearText:"clear",prefixCls:qo.PREFIX,inputReadOnly:!1,style:{},stopPropagation:!0,className:"",popupClassName:"",popupStyle:{left:"0px",top:"0px"},disabledHours:()=>[],disabledMinutes:()=>[],disabledSeconds:()=>[],hideDisabledOptions:!1,onFocus:r(),onBlur:r(),onChange:r(),onChangeWithDateFirst:!0,use12Hours:!1,focusOnOpen:!1,onKeyDown:r(),size:"default",type:Zo.DEFAULT_TYPE,motion:!0},{});class jb extends o.PureComponent{render(){const{type:e}=this.props;return o.createElement(en.A.Consumer,null,(t=>{let{timeZone:i}=t;return o.createElement(pe.A,{componentName:"TimePicker"},((t,n,r)=>o.createElement(Lb,Object.assign({timeZone:i,placeholder:Fi()(t,["placeholder",e])},this.props,{locale:t,localeCode:n,dateFnsLocale:r}))))}))}}jb.propTypes=Lb.propTypes,jb.__SemiComponentName__="TimePicker",jb.defaultProps=(0,$.bQ)(jb.__SemiComponentName__,Lb.defaultProps);const Fb={PREFIX:"".concat(p._,"-tree-select"),PREFIX_TREE:"".concat(p._,"-tree"),PREFIX_OPTION:"".concat(p._,"-tree-select-option")},Bb=["small","large","default"],Nb="dropdown",zb="trigger",Hb=g;var Vb=i(50539),Ub=i.n(Vb),Wb=i(9376),Gb=i.n(Wb);function Kb(e,t){return"".concat(e,"-").concat(t)}function Yb(e){return!bm()(e)&&!_()(e)}function Xb(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=[],s=Boolean(n),a=Fi()(i,"key","key"),o=Fi()(i,"children","children");return function e(l){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l.map(((h,d)=>{const u=Kb(c?c.pos:"0",d),p=h[a],g={};i&&Object.entries(Ue()(i,"children")).forEach((e=>{let[t,i]=e;const n=h[i];!_()(n)&&(g[t]=n)}));const f=Object.assign(Object.assign(Object.assign({},qi()(h,["key","label","value","icon","disabled","isLeaf"])),g),{parent:c,pos:u,children:null,data:h,_innerDataTag:!0,isEnd:[...c?c.isEnd:[],d===l.length-1]}),m="boolean"===typeof n;return(!s||!m&&n.has(p))&&r.push(f),t.has(p)&&(!s||!m&&n.has(p))?f.children=e(h[o]||[],f):f.children=[],f}))}(e),r}function qb(e,t){const i={},n={},r={},s={posEntities:i,keyEntities:n,valueEntities:r},a=Fi()(t,"value","value");return function(e,t,i){const n=Fi()(i,"key","key"),r=Fi()(i,"children","children"),s=(i,a,o)=>{const l=i?i[r]:e,c=i?Kb(o.pos,a):"0";if(i){const e=Fi()(i,n,null),r={data:Object.assign({},i),ind:a,pos:c,key:null!==e?e:c,parentPos:o.node?o.pos:null,level:Number(o.level)+1};t(r)}l&&l.forEach(((e,t)=>{s(e,t,{node:i,pos:c,level:o?Number(o.level)+1:-1})}))};s(null)}(e,(e=>{const{pos:t,key:s,parentPos:o}=e,l=Object.assign({},e),c=Fi()(l,"data.".concat(a),null);null!==c&&(r[c]=s),i[t]=l,n[s]=l,l.parent=i[o],l.parent&&(l.parent.children=l.parent.children||[],l.parent.children.push(l))}),t),s}function Zb(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Yb(e))return[];if(!i&&Array.isArray(e)?e=e.length?[e[0]]:[]:Array.isArray(e)||(e=[e]),dp()(t))return e;const n=[];return e.forEach((e=>{e in t?n.push(t[e]):e&&n.push(e)})),n}function Qb(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=[],r=e=>{if(!e)return;const{children:i}=e;Yb(i)&&i.forEach((e=>{n.push(e.key),r(t[e.key])}))};return e.forEach((e=>{i&&n.push(e),r(t[e])})),n}function $b(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=[];e.forEach((e=>{t[e]&&t[e].parent&&n.push(t[e].parent.key)}));const r=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=[];return e&&e.forEach((e=>{const r=t[e];r&&r.children&&r.children.forEach((e=>{i.length&&i.includes(e.key)||n.push(e.key)}))})),n}(Gb()(n),t,i?[]:e);return r}function Jb(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=[],r=e=>{e.parent&&(n.push(e.parent.key),r(e.parent))};return e.forEach((e=>{t[e]&&r(t[e]),i&&n.push(e)})),n}function e_(e,t){const i=Array.isArray(e)?e:[e],n=Qb(i,t,!0),r=new Set([...n]);let s=new Set([]),a=[];const o=function(e,t){const i={};return e.forEach((e=>{if(!t[e])return;const{level:n}=t[e];i[n]?i[n].push(e):i[n]=[e]})),i}(i,t),l=e=>{const{key:i,parent:n,level:l}=e;if(!n||a.includes(i))return;const c=$b([i],t);a=[...a,...c];if(c.every((e=>r.has(e))))r.add(n.key),l-1 in o&&l?o[l-1].push(n.key):o[l-1]=[n.key];else{const e=Jb([i],t,!1);s=new Set([...s,...e])}};for(;!dp()(o);){const e=Ub()(Object.keys(o).map((e=>Number(e))));o[e].forEach((e=>l(t[e]))),delete o[e]}return{checkedKeys:r,halfCheckedKeys:s}}function t_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(Array.isArray(e)||(e=[e]),i){const i=Jb(e,t,!0);return new Set(i)}return new Set(e)}function i_(e,t,i,n){const r=Zb(e,n,i);return new Set(Jb(r,t,!1))}function n_(e,t,i){let n="show";const r=[...e],s=[...t];if(1!==Math.abs(r.length-s.length))return{motionType:n,motionKeys:[]};let a=[];return r.length>s.length?(n="hide",a=Cg()(r,s)):a=Cg()(s,r),{motionType:1===a.length?n:"show",motionKeys:1===a.length?Qb(a,i,!1):[]}}function r_(e,t,i,n){if(!i)return!0;let r=i,s=t;return"boolean"===typeof i&&(r=(e,t)=>{const i=e.toLowerCase();return t.toString().toLowerCase().includes(i)}),n&&(s=t[n]),r(e,s,t)}function s_(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;const r=[],s=new Set(e);return i?e.forEach((e=>{t[e]&&!Yb(t[e].children)&&r.push(e),!t[e]&&n&&r.push(e)})):e.forEach((e=>{if(!t[e])return void(n&&r.push(e));const{parent:i}=t[e];i&&s.has(i.key)||r.push(e)})),r}function a_(e,t,i){const n=[],r=e=>{i[e].children&&i[e].children.forEach((e=>{const{key:i}=e;n.push(i),t.has(i)&&r(i)}))};return r(e),n}function o_(e,t,i,n){const r=Qb([e],t,!0),s=t[e];i=new Set([...i,e]);const a=e=>{if(!e.parent)return;const{key:r}=e;if($b([r],t).every((e=>i.has(e)))){const t=e.parent;i.add(t.key),a(t)}else{const e=Jb([r],t,!1);n=new Set([...n,...e])}};return a(s),{checkedKeys:new Set([...i,...r]),halfCheckedKeys:n}}function l_(e,t,i,n){const r=Qb([e],t,!0),s=t[e];r.forEach((e=>{i.has(e)&&i.delete(e),n.has(e)&&n.delete(e)}));const a=e=>{const r=e.parent;if(!r)return;if(!i.has(r.key)&&!n.has(r.key))return;const{key:s}=e,o=$b([s],t).some((e=>i.has(e)||n.has(e))),l=Jb([s],t,!1);o?l.forEach((e=>{i.has(e)&&(i.delete(e),n.add(e))})):(i.has(r.key)&&i.delete(r.key),n.has(r.key)&&n.delete(r.key),a(r))};return s&&a(s),{checkedKeys:i,halfCheckedKeys:n}}function c_(e,t){const i=Fi()(t,"value","value"),n=Fi()(t,"key","key");return Array.isArray(e)?e.map((e=>Fi()(e,i,e[n]))):Fi()(e,i,e[n])}function h_(e,t,i){return t&&Yb(e)?c_(e,i):e}function d_(e,t){return[...e].filter((e=>e in t))}function u_(e,t){const i=Fi()(t,"disabled","disabled"),n=Object.keys(e).filter((t=>e[t].data[i])),{checkedKeys:r}=e_(n,e);return r}class p_ extends k.A{constructor(e){super(Object.assign({},e)),this._registerClickOutsideHandler=e=>{this._adapter.registerClickOutsideHandler((e=>{this.handlerTriggerBlur(e),this.close(e)}))},this.clearInputValue=()=>{const{inputValue:e}=this.getStates();e&&this._adapter.updateInputValue("")}}init(){const{searchAutoFocus:e,searchPosition:t,filterTreeNode:i}=this.getProps(),n=e&&(t===zb&&i);this._setDropdownWidth();(this.getProp("defaultOpen")||n)&&!this._isDisabled()&&this.open(),n&&this.handleTriggerFocus(null)}destroy(){this._adapter.unregisterClickOutsideHandler()}_setDropdownWidth(){const{style:e,dropdownMatchSelectWidth:t}=this.getProps();let i;t&&(i=e&&S()(e.width)||e&&C()(e.width)&&!e.width.includes("%")?e.width:this._adapter.getTriggerWidth(),this._adapter.setOptionWrapperWidth(i))}_isMultiple(){return this.getProp("multiple")}_isAnimated(){return this.getProp("motionExpand")}_isDisabled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getProp("disabled")||e.disabled}_isExpandControlled(){return this.getProp("expandedKeys")}_isSelectToClose(){return!this.getProp("expandAction")}_isLoadControlled(){return this.getProp("loadedKeys")}_showFilteredOnly(){const{inputValue:e}=this.getStates(),{showFilteredOnly:t}=this.getProps();return Boolean(e)&&t}findDataForValue(e){const{value:t,defaultValue:i,keyMaps:n}=this.getProps(),r=Fi()(n,"value","value"),s=Fi()(n,"key","key");let a=[];return t?a=Array.isArray(t)?t:[t]:i&&(a=Array.isArray(i)?i:[i]),a.find((t=>t[r]===e||t[s]===e))}constructDataForValue(e){const{treeNodeLabelProp:t,keyMaps:i}=this.getProps(),n=Fi()(i,"key","key"),r=Fi()(i,"label",t);return{[n]:e,[r]:e}}getDataForKeyNotInKeyEntities(e){const{onChangeWithObject:t}=this.getProps();return t?this.findDataForValue(e):this.constructDataForValue(e)}getTreeNodeProps(e){const{expandedKeys:t=new Set([]),selectedKeys:i=[],checkedKeys:n=new Set([]),halfCheckedKeys:r=new Set([]),realCheckedKeys:s=new Set([]),keyEntities:a={},filteredKeys:o=new Set([]),inputValue:l="",loadedKeys:c,loadingKeys:h,filteredExpandedKeys:d=new Set([]),disabledKeys:u=new Set([])}=this.getStates(),{treeNodeFilterProp:p,checkRelation:g}=this.getProps(),f=a[e];if(!f)return null;let m=!1,v=!1;"related"===g?(m=n.has(e),v=r.has(e)):"unRelated"===g&&(m=s.has(e),v=!1);const y={eventKey:e,expanded:Boolean(l)?d.has(e):t.has(e),selected:i.includes(e),checked:m,halfChecked:v,pos:String(f?f.pos:""),level:f.level,filtered:o.has(e),keyword:l,treeNodeFilterProp:p,loading:h.has(e)&&!c.has(e),loaded:c.has(e)};return this.getProp("disableStrictly")&&u.has(e)&&(y.disabled=!0),y}handleNodeLoad(e,t,i,n){const{loadData:r}=this.getProps(),{key:s}=i;return!r||e.has(s)||t.has(s)?{}:(r(i).then((()=>{const e=new Set(this.getState("loadedKeys")),t=new Set(this.getState("loadingKeys")),r=e.add(s),a=new Set([...t]);a.delete(s),this._adapter.notifyLoad(r,i),this._isLoadControlled()||this._adapter.updateState({loadedKeys:r}),this._adapter.setState({loadingKeys:a}),n()})),{loadingKeys:t.add(s)})}focusInput(e){this._adapter.updateInputFocus(e)}_notifyMultipleChange(e,t){const{keyEntities:i}=this.getStates(),{leafOnly:n,checkRelation:r,keyMaps:s}=this.getProps();let a=[];"related"===r?a=s_(e,i,n,!0):"unRelated"===r&&(a=e);const o=a.map((e=>i[e]&&i[e].key===e?i[e].data:this.getDataForKeyNotInKeyEntities(e)));if(this.getProp("onChangeWithObject"))this._adapter.notifyChangeWithObject(o,t);else{const e=c_(o,s);this._adapter.notifyChange(e,o,t)}}_notifyChange(e,t){const{keyEntities:i}=this.getStates(),{keyMaps:n}=this.getProps();if(this._isMultiple()&&Array.isArray(e))this._notifyMultipleChange(e,t);else{const r=_()(e)?e:i[e].data,s=_()(e)?e:c_(r,n);this.getProp("onChangeWithObject")?this._adapter.notifyChangeWithObject(r,t):this._adapter.notifyChange(s,r,t)}}_notifyFocus(e){this._adapter.notifyFocus(e)}handleTriggerFocus(e){this._adapter.updateIsFocus(!0),this._notifyFocus(e),this._registerClickOutsideHandler(e)}_notifyBlur(e){this._adapter.notifyBlur(e)}handlerTriggerBlur(e){this._adapter.updateIsFocus(!1),this._notifyBlur(e),this._adapter.unregisterClickOutsideHandler()}toggleHoverState(e){this._adapter.toggleHovering(e)}open(){this._adapter.openMenu(),this._setDropdownWidth()}close(e){this._adapter.closeMenu(),this.getProp("motionExpand")&&this._adapter.updateState({motionKeys:new Set([])})}handleClick(e){const t=this._isDisabled(),{isOpen:i,inputValue:n,isFocus:r}=this.getStates(),{searchPosition:s,clickTriggerToHide:a}=this.getProps();if(!t)if(r||this.handleTriggerFocus(e),i){if("trigger"===s&&n)return;a&&this.close(e)}else this.open()}handleSelectionEnterPress(e){(0,gi.A)(e)&&this.handleClick(e)}handleClear(e){const{searchPosition:t,filterTreeNode:i}=this.getProps(),{inputValue:n,selectedKeys:r}=this.getStates(),s=this._isMultiple(),a=this._isControlledComponent(),o=s?[]:void 0;this._notifyChange(o,e),a||(this._adapter.rePositionDropdown(),this._adapter.updateState({selectedKeys:[],checkedKeys:new Set,halfCheckedKeys:new Set,realCheckedKeys:new Set([])})),i&&t===zb&&""!==n&&(dp()(r)?this.handleInputChange(""):this.clearInput()),this._adapter.notifyClear(e)}handleClearEnterPress(e){(0,gi.A)(e)&&this.handleClear(e)}removeTag(e){const{disableStrictly:t,checkRelation:i,keyMaps:n}=this.getProps(),{keyEntities:r,disabledKeys:s,realCheckedKeys:a}=this.getStates(),o=r[e]&&r[e].key===e?r[e].data:this.getDataForKeyNotInKeyEntities(e);if(!(o[Fi()(n,"disabled","disabled")]||t&&s.has(e))){if("unRelated"===i){const t=new Set(a);t.delete(e),this._notifyChange([...t],null),this._isControlledComponent()||(this._adapter.updateState({realCheckedKeys:t}),this._adapter.rePositionDropdown())}else if("related"===i){const{checkedKeys:t,halfCheckedKeys:i}=this.calcCheckedKeys(e,!1);this._notifyChange([...t],null),this._isControlledComponent()||(this._adapter.updateState({checkedKeys:t,halfCheckedKeys:i}),this._adapter.rePositionDropdown())}this._adapter.notifySelect(e,!1,o),this._adapter.rePositionDropdown()}}clearInput(){const{flattenNodes:e,expandedKeys:t,selectedKeys:i,keyEntities:n,treeData:r}=this.getStates(),{keyMaps:s}=this.getProps(),a=new Set(t),o=(this._isExpandControlled(),Jb(i,n,!1));o.forEach((e=>a.add(e)));const l=Xb(r,a,s);this._adapter.updateState({expandedKeys:a,flattenNodes:l,inputValue:"",motionKeys:new Set([]),filteredKeys:new Set([]),filteredExpandedKeys:new Set(o),filteredShownKeys:new Set([])}),this._adapter.rePositionDropdown()}handleInputChange(e){this._adapter.updateInputValue(e);const{flattenNodes:t,expandedKeys:i,selectedKeys:n,keyEntities:r,treeData:s}=this.getStates(),{showFilteredOnly:a,filterTreeNode:o,treeNodeFilterProp:l,keyMaps:c}=this.getProps(),h="label"!==l?l:Fi()(c,"label","label"),d=new Set(i);let u=[],p=[],g=[],f=[],m=new Set([]);if(e){const t=Object.values(r).filter((t=>{const{data:i}=t;return r_(e,i,o,h)}));u=t.map((e=>e.data)),p=t.map((e=>e.key)),g=Jb(p,r,!1);const i=Qb(p,r,!0);m=new Set([...i,...g]),f=Xb(s,new Set(g),c,a&&m)}else g=Jb(n,r,!1),g.forEach((e=>d.add(e))),f=Xb(s,d,c);const v=new Set(g);this._adapter.notifySearch(e,Array.from(v),u),this._adapter.updateState({expandedKeys:d,flattenNodes:f,motionKeys:new Set([]),filteredKeys:new Set(p),filteredExpandedKeys:v,filteredShownKeys:m}),this._adapter.rePositionDropdown()}handleNodeSelect(e,t){this._isDisabled(t)||(this._isMultiple()?this.handleMultipleSelect(e,t):this.handleSingleSelect(e,t))}handleSingleSelect(e,t){let i=[...this.getState("selectedKeys")];const{clickToHide:n}=this.getProps(),{selected:r,eventKey:s,data:a}=t;this._adapter.notifySelect(s,!0,a),i.includes(s)||r||(i=[s],this._notifyChange(s,e),this._isControlledComponent()||this._adapter.updateState({selectedKeys:i})),!n||!this._isSelectToClose()&&a.children||(this.close(e),this.handlerTriggerBlur(e))}calcCheckedKeys(e,t){const{keyEntities:i}=this.getStates(),n=new Set(this.getState("checkedKeys")),r=new Set(this.getState("halfCheckedKeys"));return t?o_(e,i,n,r):l_(e,i,n,r)}handleMultipleSelect(e,t){const{searchPosition:i,disableStrictly:n,checkRelation:r}=this.getProps(),{inputValue:s,realCheckedKeys:a}=this.getStates(),{checked:o,eventKey:l,data:c}=t;if("related"===r){const t=n?this.calcCheckedStatus(!o,l):!o,{checkedKeys:i,halfCheckedKeys:r}=n?this.calcNonDisabledCheckedKeys(l,t):this.calcCheckedKeys(l,t);this._adapter.notifySelect(l,t,c),this._notifyChange([...i],e),this._isControlledComponent()||(this._adapter.updateState({checkedKeys:i,halfCheckedKeys:r}),this._adapter.rePositionDropdown())}else if("unRelated"===r){const t=new Set(a);let i;a.has(l)?(t.delete(l),i=!1):(t.add(l),i=!0),this._adapter.notifySelect(l,i,c),this._notifyChange([...t],e),this._isControlledComponent()||(this._adapter.updateState({realCheckedKeys:t}),this._adapter.rePositionDropdown())}i===zb&&""!==s&&this._adapter.updateState({inputValue:""})}calcNonDisabledCheckedKeys(e,t){const{keyEntities:i,disabledKeys:n}=this.getStates(),r=new Set(this.getState("checkedKeys")),s=s_(Qb([e],i,!1),i,!0),a=s.some((e=>n.has(e)));if(!a)return this.calcCheckedKeys(e,t);const o=s.filter((e=>!n.has(e)));return e_(t?[...o,...r]:Cg()(s_([...r],i,!0,!0),o),i)}calcCheckedStatus(e,t){if(!e)return e;const{checkedKeys:i,keyEntities:n,disabledKeys:r}=this.getStates(),s=s_(Qb([t],n,!1),n,!0),a=s.some((e=>r.has(e)));if(!a)return e;const o=s.filter((e=>!r.has(e))),l=o.every((e=>i.has(e)));return!l}handleNodeExpandInSearch(e,t){const{treeData:i,filteredShownKeys:n,keyEntities:r,keyMaps:s}=this.getStates(),a=this._showFilteredOnly(),o=new Set(this.getState("filteredExpandedKeys"));let l="show";const{eventKey:c,expanded:h,data:d}=t;if(h?o.has(c)&&(o.delete(c),l="hide"):o.add(c),this._adapter.cacheFlattenNodes("hide"===l&&this._isAnimated()),!this._isExpandControlled()){const e=Xb(i,o,s,a&&n),t=this._isAnimated()?a_(c,o,r):[],h={filteredExpandedKeys:o,flattenNodes:e,motionKeys:new Set(t),motionType:l};this._adapter.updateState(h)}this._adapter.notifyExpand(o,{expanded:!h,node:d})}handleNodeExpand(e,t){const{loadData:i,keyMaps:n}=this.getProps(),{inputValue:r,keyEntities:s}=this.getStates(),a=Boolean(r);if(!i&&(!t.children||!t.children.length))return;const o=this._isExpandControlled();if(a)return void this.handleNodeExpandInSearch(e,t);const{treeData:l}=this.getStates(),c=new Set(this.getState("expandedKeys"));let h="show";const{eventKey:d,expanded:u,data:p}=t;if(u?c.has(d)&&(c.delete(d),h="hide"):c.add(d),this._adapter.cacheFlattenNodes("hide"===h&&this._isAnimated()),!o){const e=Xb(l,c,n),t=this._isAnimated()?a_(d,c,s):[],i={expandedKeys:c,flattenNodes:e,motionKeys:new Set(t),motionType:h};this._adapter.updateState(i)}this._adapter.notifyExpand(c,{expanded:!u,node:p})}getRenderTextInSingle(){const{renderSelectedItem:e,treeNodeLabelProp:t,keyMaps:i}=this.getProps(),{selectedKeys:n,keyEntities:r}=this.getStates(),s=Fi()(i,"label",t),a=G()(e)?e:e=>Fi()(e,s,null);let o;if(n.length){const e=n[0];o=r[e]&&r[e].key===e?r[e].data:this.getDataForKeyNotInKeyEntities(e)}return o?a(o):null}handleInputTriggerBlur(){this._adapter.updateState({inputTriggerFocus:!1})}handleInputTriggerFocus(){this.getState("inputValue")&&this.clearInput(),this._adapter.updateState({inputTriggerFocus:!0})}setLoadKeys(e,t){this._adapter.updateLoadKeys(e,t)}handlePopoverVisibleChange(e){const{filterTreeNode:t,searchAutoFocus:i,searchPosition:n}=this.getProps(),r=this.getState("inputValue");!1===e&&t&&(r&&this._adapter.setClearInputFlag(!0),this.clearInputValue()),t&&n===Nb&&e&&i&&this.focusInput(!0)}handleAfterClose(){const{filterTreeNode:e}=this.getProps(),t=this._adapter.getClearInputFlag();e&&t&&this.clearInput()}}const g_={PREFIX:"".concat(p._,"-tree"),PREFIX_OPTION:"".concat(p._,"-tree-option")},f_=g_.PREFIX;class m_ extends o.PureComponent{constructor(e){super(e),this._onResize=e=>{const t=e&&e[1]&&e[1].target;if(t){const e=Fi()(t,"offsetHeight")||0,i=window.getComputedStyle(t)||{},n=parseInt(Fi()(i,"paddingTop"),10)||0,r=parseInt(Fi()(i,"paddingBottom"),10)||0,s=e-n-r;this.state.height!==s&&this.setState({height:e-n-r})}},this.state={height:this.props.defaultHeight||0}}componentDidMount(){const{height:e}=this.state}render(){const{children:e,defaultWidth:t,defaultHeight:i}=this.props,{height:n}=this.state;let r=!1;return 0!==n&&"number"===typeof n||(r=!0),o.createElement(_d.A,{observeParent:!0,onResize:this._onResize},o.createElement("div",{style:{height:i,overflow:"visible"},className:"".concat(f_,"-auto-wrapper")},!r&&e({height:n,width:t})))}}m_.propTypes={defaultHeight:c().oneOfType([c().number,c().string]),defaultWidth:c().oneOfType([c().number,c().string])},m_.defaultProps={defaultHeight:"100%",defaultWidth:"100%"};const v_=o.createContext(null);const y_=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C12 1.44772 11.5523 1 11 1H6C4.89543 1 4 1.89543 4 3V21C4 22.1046 4.89543 23 6 23H18C19.1046 23 20 22.1046 20 21V10C20 9.44772 19.5523 9 19 9H14C12.8954 9 12 8.10457 12 7V2ZM7 8C7 7.44772 7.44772 7 8 7H9C9.55228 7 10 7.44772 10 8C10 8.55228 9.55228 9 9 9H8C7.44772 9 7 8.55228 7 8ZM7 13C7 12.4477 7.44772 12 8 12H16C16.5523 12 17 12.4477 17 13C17 13.5523 16.5523 14 16 14H8C7.44772 14 7 13.5523 7 13ZM8 17C7.44772 17 7 17.4477 7 18C7 18.5523 7.44772 19 8 19H16C16.5523 19 17 18.5523 17 18C17 17.4477 16.5523 17 16 17H8ZM19.0686 7.49999H14.5C13.9477 7.49999 13.5 7.05228 13.5 6.49999V1.93136C13.5 1.21864 14.3617 0.861707 14.8657 1.36568L19.6343 6.13431C20.1383 6.63828 19.7814 7.49999 19.0686 7.49999Z",fill:"currentColor"}))}),"file");const b_=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5C2 3.34315 3.34315 2 5 2H8.29844C8.75258 2 9.1932 2.15456 9.54783 2.43826L10.6783 3.34261C11.2102 3.76816 11.8711 4 12.5523 4H18C20 4 21 6 21 8H7.53361C6.62889 8 5.83683 8.60735 5.6021 9.48109L2.57151 20.7617C2.21202 20.2671 2 19.6583 2 19V5ZM22.1667 10H9.5C8.61111 10 7.82889 10.5867 7.58 11.44L4.87333 20.72C4.68667 21.36 5.16667 22 5.83333 22H18.5C19.3889 22 20.1711 21.4133 20.42 20.56L23.1267 11.28C23.3133 10.64 22.8333 10 22.1667 10Z",fill:"currentColor"}))}),"folder_open");const __=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M5 2C3.34315 2 2 3.34315 2 5V8H22C22 6 21 4 19 4H12.5523C11.8711 4 11.2102 3.76816 10.6783 3.34261L9.54783 2.43826C9.1932 2.15456 8.75258 2 8.29844 2H5Z",fill:"currentColor"}),o.createElement("path",{d:"M22 10H2V19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V10Z",fill:"currentColor"}))}),"folder"),x_=e=>{let{prefixcls:t,level:i,isEnd:n,showLine:r}=e;const s="".concat(t,"-indent-unit"),a=[];for(let l=0;l<i;l+=1)a.push(o.createElement("span",{key:l,className:d()(s,{["".concat(s,"-end")]:n[l]})}));return o.createElement("span",{"aria-hidden":"true",className:d()("".concat(t,"-indent"),{["".concat(t,"-indent-show-line")]:r})},a)},S_=o.memo(x_);var w_=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const C_=g_.PREFIX_OPTION;class k_ extends o.PureComponent{constructor(e){super(e),this.onSelect=e=>{const{onNodeSelect:t}=this.context;t(e,this.props)},this.onExpand=e=>{const{onNodeExpand:t}=this.context;e&&e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),t(e,this.props)},this.onCheck=e=>{var t,i;if(this.isDisabled())return;const{onNodeCheck:n}=this.context;e.stopPropagation(),null===(i=null===(t=e.nativeEvent)||void 0===t?void 0:t.stopImmediatePropagation)||void 0===i||i.call(t),n(e,this.props)},this.handleCheckEnterPress=e=>{(0,gi.A)(e)&&this.onCheck(e)},this.onContextMenu=e=>{const{onNodeRightClick:t}=this.context;t(e,this.props)},this.onClick=e=>{const{expandAction:t}=this.context;"doubleClick"!==t?(this.onSelect(e),"click"===t&&this.onExpand(e)):this.debounceSelect(e)},this.handleliEnterPress=e=>{(0,gi.A)(e)&&this.onClick(e)},this.onDoubleClick=e=>{const{expandAction:t,onNodeDoubleClick:i}=this.context;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),G()(i)&&i(e,this.props),"doubleClick"===t&&this.onExpand(e)},this.onDragStart=e=>{const{onNodeDragStart:t}=this.context;e.stopPropagation(),t(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}));try{e.dataTransfer.setData("text/plain","")}catch(i){}},this.onDragEnter=e=>{const{onNodeDragEnter:t}=this.context;e.preventDefault(),e.stopPropagation(),t(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDragOver=e=>{const{onNodeDragOver:t}=this.context;e.preventDefault(),e.stopPropagation(),t(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDragLeave=e=>{const{onNodeDragLeave:t}=this.context;e.stopPropagation(),t(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDragEnd=e=>{const{onNodeDragEnd:t}=this.context;e.stopPropagation(),t(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDrop=e=>{const{onNodeDrop:t}=this.context;e.preventDefault(),e.stopPropagation(),t(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.getNodeChildren=()=>{const{children:e}=this.props;return e||[]},this.isLeaf=()=>{const{isLeaf:e,loaded:t}=this.props,{loadData:i}=this.context,n=0!==this.getNodeChildren().length;return!1!==e&&(e||!i&&!n||i&&t&&!n)},this.isDisabled=()=>{const{disabled:e}=this.props,{treeDisabled:t}=this.context;return!1!==e&&Boolean(t||e)},this.renderSwitcher=()=>this.isLeaf()?o.createElement("span",{className:d()("".concat(C_,"-switcher"))},o.createElement("span",{className:"".concat(C_,"-switcher-leaf-line")})):null,this.renderRealLabel=()=>{const{renderLabel:e}=this.context,{label:t,keyword:i,data:n,filtered:r,treeNodeFilterProp:s}=this.props;return G()(e)?e(t,n):C()(t)&&r&&i?(0,$.TA)({sourceString:t,searchWords:[i],option:{highlightTag:"span",highlightClassName:"".concat(C_,"-highlight")}}):t},this.setRef=e=>{this.refNode=e},this.state={},this.debounceSelect=dl()(this.onSelect,500,{leading:!0,trailing:!1})}renderArrow(){const e=!this.isLeaf(),{loading:t,expanded:i,showLine:n}=this.props;return t?o.createElement(V,{wrapperClassName:"".concat(C_,"-spin-icon")}):e?o.createElement(lm.A,{role:"button","aria-label":"".concat(i?"Expand":"Collapse"," the tree item"),className:"".concat(C_,"-expand-icon"),size:"small",onClick:this.onExpand}):n?this.renderSwitcher():o.createElement("span",{className:"".concat(C_,"-empty-icon")})}renderCheckbox(){const{checked:e,halfChecked:t,eventKey:i}=this.props,n=this.isDisabled();return o.createElement("div",{role:"none",onClick:this.onCheck,onKeyPress:this.handleCheckEnterPress},o.createElement(wi,{"aria-label":"Toggle the checked state of checkbox",value:i,indeterminate:t,checked:e,disabled:Boolean(n)}))}renderIcon(){const{directory:e,treeIcon:t}=this.context,{expanded:i,icon:n,data:r}=this.props;if(n)return n;if(t)return"function"===typeof t?t(this.props):t;if(e){return!this.isLeaf()?i?o.createElement(b_,{className:"".concat(C_,"-item-icon")}):o.createElement(__,{className:"".concat(C_,"-item-icon")}):o.createElement(y_,{className:"".concat(C_,"-item-icon")})}return null}renderEmptyNode(){const{emptyContent:e}=this.props,t=d()(C_,{["".concat(C_,"-empty")]:!0});return o.createElement("ul",{className:t},o.createElement("li",{className:"".concat(C_,"-label ").concat(C_,"-label-empty"),"x-semi-prop":"emptyContent"},e))}render(){const e=this.props,{eventKey:t,expanded:i,selected:n,checked:r,halfChecked:s,loading:a,active:l,level:c,empty:h,filtered:u,treeNodeFilterProp:p,display:g,style:f,isEnd:m,showLine:v}=e,y=w_(e,["eventKey","expanded","selected","checked","halfChecked","loading","active","level","empty","filtered","treeNodeFilterProp","display","style","isEnd","showLine"]);if(h)return this.renderEmptyNode();const{multiple:b,draggable:_,renderFullLabel:x,dragOverNodeKey:S,dropPosition:w,labelEllipsis:k}=this.context,A=m[m.length-1],E=this.isDisabled(),T=S===t&&0===w,O=S===t&&-1===w,P=S===t&&1===w,M=d()(C_,{["".concat(C_,"-level-").concat(c+1)]:!0,["".concat(C_,"-fullLabel-level-").concat(c+1)]:x,["".concat(C_,"-collapsed")]:!i,["".concat(C_,"-disabled")]:Boolean(E),["".concat(C_,"-selected")]:n,["".concat(C_,"-active")]:!b&&l,["".concat(C_,"-ellipsis")]:k,["".concat(C_,"-drag-over")]:!E&&T,["".concat(C_,"-draggable")]:!E&&_&&!x,["".concat(C_,"-fullLabel-draggable")]:!E&&_&&x,["".concat(C_,"-fullLabel-drag-over-gap-top")]:!E&&O&&x,["".concat(C_,"-fullLabel-drag-over-gap-bottom")]:!E&&P&&x,["".concat(C_,"-tree-node-last-leaf")]:A}),I={onClick:this.onClick,onContextMenu:this.onContextMenu,onDoubleClick:this.onDoubleClick,className:M,onExpand:this.onExpand,data:y.data,level:c,onCheck:this.onCheck,style:f,expandIcon:this.renderArrow(),checkStatus:{checked:r,halfChecked:s},expandStatus:{expanded:i,loading:a},filtered:u,searchWord:y.keyword},R={onDoubleClick:this.onDoubleClick,onDragStart:_?this.onDragStart:void 0,onDragEnter:_?this.onDragEnter:void 0,onDragOver:_?this.onDragOver:void 0,onDragLeave:_?this.onDragLeave:void 0,onDrop:_?this.onDrop:void 0,onDragEnd:_?this.onDragEnd:void 0,draggable:!E&&_||void 0};if(x){const e=x(Object.assign({},I));return _?o.cloneElement(e,Object.assign({ref:this.setRef},R)):dp()(f)?e:o.cloneElement(e,{style:Object.assign(Object.assign({},Fi()(e,["props","style"])),f)})}const D=d()("".concat(C_,"-label"),{["".concat(C_,"-drag-over-gap-top")]:!E&&O,["".concat(C_,"-drag-over-gap-bottom")]:!E&&P}),L=Fi()(y,["data","children","length"]),j=C()(y.pos)?Number(y.pos.split("-")[c+1])+1:1;return o.createElement("li",Object.assign({className:M,role:"treeitem","aria-disabled":E,"aria-checked":r,"aria-selected":n,"aria-setsize":L,"aria-posinset":j,"aria-expanded":i,"aria-level":c+1,"data-key":t,onClick:this.onClick,onKeyPress:this.handleliEnterPress,onContextMenu:this.onContextMenu,onDoubleClick:this.onDoubleClick,ref:this.setRef,style:f},R),o.createElement(S_,{showLine:v,prefixcls:C_,level:c,isEnd:m}),this.renderArrow(),o.createElement("span",{className:D},b?this.renderCheckbox():null,this.renderIcon(),o.createElement("span",{className:"".concat(C_,"-label-text")},this.renderRealLabel())))}}k_.contextType=v_,k_.propTypes={expanded:c().bool,selected:c().bool,checked:c().bool,halfChecked:c().bool,active:c().bool,disabled:c().bool,loaded:c().bool,loading:c().bool,isLeaf:c().bool,pos:c().string,children:c().oneOfType([c().array,c().object]),icon:c().node,directory:c().bool,keyword:c().string,treeNodeFilterProp:c().string,selectedKey:c().string,motionKey:c().oneOfType([c().string,c().arrayOf(c().string)]),isEnd:c().arrayOf(c().bool),showLine:c().bool},k_.defaultProps={selectedKey:"",motionKey:""};var A_=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const E_=function(e){const{open:t,children:i}=e,n=A_(e,["open","children"]),[r,s]=(0,o.useState)(e.open);return(0,o.useEffect)((()=>{setTimeout((()=>{s(!e.open)}),0)}),[]),o.createElement(uu,Object.assign({},n,{isOpen:r}),i)},T_=e=>e.key;class O_ extends o.PureComponent{constructor(e){super(e),this.onMotionEnd=()=>{"function"===typeof this.props.onMotionEnd&&this.props.onMotionEnd(),this.setState({transitionNodes:[]})},this.state={transitionNodes:[]}}static getDerivedStateFromProps(e,t){const{flattenNodes:i=[],motionKeys:n,motionType:r,flattenList:s=[]}=e,o=!a()(t.cachedMotionKeys,n)||!a()(t.cachedData.map((e=>e.key)),i.map((e=>e.key))),l=[...n];if(!o||!l.length)return null;const c=[],h=[];let d=0,u={};return("hide"===r&&s?s:i).forEach(((e,t)=>{const i=T_(e);n.has(i)?(h.push(e),i===l[0]&&(d=t)):c.push(e)})),c.splice(d,0,h),u={transitionNodes:c,cachedData:i,cachedMotionKeys:n,cachedMotionType:r},u}render(){const{flattenNodes:e,motionType:t,searchTargetIsDeep:i,renderTreeNode:n}=this.props,{transitionNodes:r}=this.state;return(r.length&&!i?r:e).map((e=>{const i=Array.isArray(e);if(i&&!e.length)return null;if(i&&e.length){const i=T_(e[0]);return o.createElement(E_,{open:"hide"===t,duration:200,motion:Boolean(t),key:"motion-".concat(i),onMotionEnd:this.onMotionEnd},e.map((e=>n(e))))}return n(e)}))}}O_.contextType=v_;var P_=i(91054),M_=i.n(P_);function I_(e){return M_()(e,(e=>gc()(e)&&!e._innerDataTag||o.isValidElement(e)?e:void 0))}const R_={PREFIX:"".concat(p._,"-tagInput")},D_=["large","default","small"],L_=["success","default","error","warning"],j_=(e,t)=>{let i=[];if(C()(t)||S()(t))i=e.split(t);else if(Wt()(t)){const n=t[0];i=e;for(let e=1;e<t.length;e++)i=i.split(t[e]).join(n);i=i.split(n)}else i.push(e);return i};class F_ extends k.A{constructor(e){super(Object.assign({},e)),this.handleInputChange=e=>{const{value:t}=e.target,{entering:i}=this.getStates();(i||this._checkInputChangeValid(t))&&this._onInputChange(t,e)},this.handleInputCompositionStart=e=>{const{maxLength:t}=this.getProps();S()(t)&&this._adapter.setEntering(!0)},this.handleInputCompositionEnd=e=>{const{value:t}=e.target,{maxLength:i,onInputExceed:n,separator:r}=this.getProps();if(!S()(i))return;this._adapter.setEntering(!1);let s=!0;const a=j_(t,r);let o=0;for(;o<a.length;o++)if(a[o].length>i){s=!1,G()(n)&&n(t);break}if(s)this._adapter.setInputValue(t);else{const e=a.slice(0,o);o<a.length&&e.push(a[o].slice(0,i)),this._adapter.setInputValue(e.join(r))}},this._checkInputChangeValid=e=>{const{maxLength:t,onInputExceed:i,separator:n}=this._adapter.getProps(),{inputValue:r}=this._adapter.getStates();let s=!0;if(S()(t)){const a=j_(e,n),o=j_(r,n),l=Math.max(a.length,o.length);for(let n=0;n<l;n++)if(!_()(a[n])&&(_()(o[n])||a[n].length>o[n].length)&&a[n].length>t){s=!1,G()(i)&&i(e);break}}return s},this.handleKeyDown=e=>{const{inputValue:t,tagsArray:i}=this._adapter.getStates(),n=e.keyCode;n===E.Ay.ENTER&&(e.preventDefault(),""!==t&&this._handleAddTags(e));const{length:r}=i;if(n===E.Ay.BACKSPACE&&""===t&&r>0){const e=i.slice(0,r-1),t=i[r-1];this._onRemove(e,t,r-1)}this._adapter.notifyKeyDown(e)}}_handleAddTags(e){const{separator:t,max:i,onExceed:n,allowDuplicates:r}=this._adapter.getProps(),{inputValue:s,tagsArray:a}=this._adapter.getStates();let o=j_(s,t);o=o.filter(((e,t)=>!(!r&&(a.includes(e)||o.indexOf(e)!==t))&&(C()(e)&&""!==e.trim())));let l=a.concat(o);S()(i)&&l.length>i&&(G()(n)&&n(l),l=l.slice(0,i),o=o.slice(0,i-a.length)),o.length>0&&this._onAdd(l,o),this._onInputChange("",e)}handleInputBlur(e){const{addOnBlur:t}=this._adapter.getProps();!0===t&&this._handleAddTags(e),this._adapter.setFocusing(!1),this._adapter.notifyBlur(e)}handleInputFocus(e){this._adapter.setFocusing(!0),this._adapter.notifyFocus(e)}handleClearEnterPress(e){(0,gi.A)(e)&&this.handleClearBtn(e)}handleClearBtn(e){const{inputValue:t,tagsArray:i}=this._adapter.getStates();i.length>0&&(this._adapter.setTagsArray([]),this._adapter.notifyTagChange([])),t.length>0&&this._onInputChange("",e),e.stopPropagation()}handleTagClose(e){const{tagsArray:t}=this._adapter.getStates(),i=[...t];i.splice(e,1);const n=t[e];this._onRemove(i,n,e)}handleInputMouseEnter(){this._adapter.setHovering(!0)}handleInputMouseLeave(){this._adapter.setHovering(!1)}handleClick(e){const{disabled:t}=this.getProps();if(t)return;this._adapter.getClickOutsideHandler()||(this._adapter.setActive(!0),this._adapter.registerClickOutsideHandler((e=>this.clickOutsideCallBack())))}clickOutsideCallBack(){this._adapter.unregisterClickOutsideHandler(),this._adapter.setActive(!1)}handleClickPrefixOrSuffix(e){const{disabled:t}=this._adapter.getProps(),{isFocus:i}=this._adapter.getStates();t||i||this._adapter.toggleFocusing(!0)}handlePreventMouseDown(e){e&&G()(e.preventDefault)&&e.preventDefault()}_onRemove(e,t,i){this._isControlledComponent()||this._adapter.setTagsArray(e),this._adapter.notifyTagChange(e),this._adapter.notifyTagRemove(t,i)}_onAdd(e,t){this._isControlledComponent()||this._adapter.setTagsArray(e),this._adapter.notifyTagChange(e),this._adapter.notifyTagAdd(t)}_onInputChange(e,t){this._adapter.setInputValue(e),this._adapter.notifyInputChange(e,t)}handleSortEnd(e){const{oldIndex:t,newIndex:i}=e,{tagsArray:n}=this.getStates(),r=function(e,t,i){const n=e.slice();return n.splice(i<0?n.length+i:i,0,n.splice(t,1)[0]),n}(n,t,i);this._isControlledComponent()||this._adapter.setTagsArray(r),this._adapter.notifyTagChange(r)}}const B_=F_;const N_=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M9 7C10.1046 7 11 6.10457 11 5C11 3.89543 10.1046 3 9 3C7.89543 3 7 3.89543 7 5C7 6.10457 7.89543 7 9 7Z",fill:"currentColor"}),o.createElement("path",{d:"M9 14C10.1046 14 11 13.1046 11 12C11 10.8954 10.1046 10 9 10C7.89543 10 7 10.8954 7 12C7 13.1046 7.89543 14 9 14Z",fill:"currentColor"}),o.createElement("path",{d:"M11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 17.8954 7.89543 17 9 17C10.1046 17 11 17.8954 11 19Z",fill:"currentColor"}),o.createElement("path",{d:"M15 7C16.1046 7 17 6.10457 17 5C17 3.89543 16.1046 3 15 3C13.8954 3 13 3.89543 13 5C13 6.10457 13.8954 7 15 7Z",fill:"currentColor"}),o.createElement("path",{d:"M17 12C17 13.1046 16.1046 14 15 14C13.8954 14 13 13.1046 13 12C13 10.8954 13.8954 10 15 10C16.1046 10 17 10.8954 17 12Z",fill:"currentColor"}),o.createElement("path",{d:"M15 21C16.1046 21 17 20.1046 17 19C17 17.8954 16.1046 17 15 17C13.8954 17 13 17.8954 13 19C13 20.1046 13.8954 21 15 21Z",fill:"currentColor"}))}),"handle");const z_="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function H_(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function V_(e){return"nodeType"in e}function U_(e){var t,i;return e?H_(e)?e:V_(e)&&null!=(t=null==(i=e.ownerDocument)?void 0:i.defaultView)?t:window:window}function W_(e){const{Document:t}=U_(e);return e instanceof t}function G_(e){return!H_(e)&&e instanceof U_(e).HTMLElement}function K_(e){return e instanceof U_(e).SVGElement}function Y_(e){return e?H_(e)?e.document:V_(e)?W_(e)?e:G_(e)||K_(e)?e.ownerDocument:document:document:document}const X_=z_?o.useLayoutEffect:o.useEffect;function q_(e){const t=(0,o.useRef)(e);return X_((()=>{t.current=e})),(0,o.useCallback)((function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return null==t.current?void 0:t.current(...i)}),[])}function Z_(e,t){void 0===t&&(t=[e]);const i=(0,o.useRef)(e);return X_((()=>{i.current!==e&&(i.current=e)}),t),i}function Q_(e,t){const i=(0,o.useRef)();return(0,o.useMemo)((()=>{const t=e(i.current);return i.current=t,t}),[...t])}function $_(e){const t=q_(e),i=(0,o.useRef)(null),n=(0,o.useCallback)((e=>{e!==i.current&&(null==t||t(e,i.current)),i.current=e}),[]);return[i,n]}function J_(e){const t=(0,o.useRef)();return(0,o.useEffect)((()=>{t.current=e}),[e]),t.current}let ex={};function tx(e,t){return(0,o.useMemo)((()=>{if(t)return t;const i=null==ex[e]?0:ex[e]+1;return ex[e]=i,e+"-"+i}),[e,t])}function ix(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n.reduce(((t,i)=>{const n=Object.entries(i);for(const[r,s]of n){const i=t[r];null!=i&&(t[r]=i+e*s)}return t}),{...t})}}const nx=ix(1),rx=ix(-1);function sx(e){if(!e)return!1;const{KeyboardEvent:t}=U_(e.target);return t&&e instanceof t}function ax(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=U_(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:i}=e.touches[0];return{x:t,y:i}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:i}=e.changedTouches[0];return{x:t,y:i}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const ox=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:i}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(i?Math.round(i):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:i}=e;return"scaleX("+t+") scaleY("+i+")"}},Transform:{toString(e){if(e)return[ox.Translate.toString(e),ox.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:i,easing:n}=e;return t+" "+i+"ms "+n}}}),lx="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cx(e){return e.matches(lx)?e:e.querySelector(lx)}const hx={display:"none"};function dx(e){let{id:t,value:i}=e;return o.createElement("div",{id:t,style:hx},i)}function ux(e){let{id:t,announcement:i,ariaLiveType:n="assertive"}=e;return o.createElement("div",{id:t,style:{position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},i)}const px=(0,o.createContext)(null);const gx={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},fx={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:i}=e;return i?"Draggable item "+t.id+" was moved over droppable area "+i.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:i}=e;return i?"Draggable item "+t.id+" was dropped over droppable area "+i.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function mx(e){let{announcements:t=fx,container:i,hiddenTextDescribedById:n,screenReaderInstructions:r=gx}=e;const{announce:s,announcement:a}=function(){const[e,t]=(0,o.useState)("");return{announce:(0,o.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),l=tx("DndLiveRegion"),[c,h]=(0,o.useState)(!1);if((0,o.useEffect)((()=>{h(!0)}),[]),function(e){const t=(0,o.useContext)(px);(0,o.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}((0,o.useMemo)((()=>({onDragStart(e){let{active:i}=e;s(t.onDragStart({active:i}))},onDragMove(e){let{active:i,over:n}=e;t.onDragMove&&s(t.onDragMove({active:i,over:n}))},onDragOver(e){let{active:i,over:n}=e;s(t.onDragOver({active:i,over:n}))},onDragEnd(e){let{active:i,over:n}=e;s(t.onDragEnd({active:i,over:n}))},onDragCancel(e){let{active:i,over:n}=e;s(t.onDragCancel({active:i,over:n}))}})),[s,t])),!c)return null;const d=o.createElement(o.Fragment,null,o.createElement(dx,{id:n,value:r.draggable}),o.createElement(ux,{id:l,announcement:a}));return i?(0,ye.createPortal)(d,i):d}var vx;function yx(){}function bx(e,t){return(0,o.useMemo)((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(vx||(vx={}));const _x=Object.freeze({x:0,y:0});function xx(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Sx(e,t){const i=ax(e);if(!i)return"0 0";return(i.x-t.left)/t.width*100+"% "+(i.y-t.top)/t.height*100+"%"}function wx(e,t){let{data:{value:i}}=e,{data:{value:n}}=t;return i-n}function Cx(e,t){let{data:{value:i}}=e,{data:{value:n}}=t;return n-i}function kx(e){let{left:t,top:i,height:n,width:r}=e;return[{x:t,y:i},{x:t+r,y:i},{x:t,y:i+n},{x:t+r,y:i+n}]}function Ax(e,t){if(!e||0===e.length)return null;const[i]=e;return t?i[t]:i}function Ex(e,t,i){return void 0===t&&(t=e.left),void 0===i&&(i=e.top),{x:t+.5*e.width,y:i+.5*e.height}}const Tx=e=>{let{collisionRect:t,droppableRects:i,droppableContainers:n}=e;const r=Ex(t,t.left,t.top),s=[];for(const a of n){const{id:e}=a,t=i.get(e);if(t){const i=xx(Ex(t),r);s.push({id:e,data:{droppableContainer:a,value:i}})}}return s.sort(wx)};function Ox(e,t){const i=Math.max(t.top,e.top),n=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=r-n,o=s-i;if(n<r&&i<s){const i=t.width*t.height,n=e.width*e.height,r=a*o;return Number((r/(i+n-r)).toFixed(4))}return 0}const Px=e=>{let{collisionRect:t,droppableRects:i,droppableContainers:n}=e;const r=[];for(const s of n){const{id:e}=s,n=i.get(e);if(n){const i=Ox(n,t);i>0&&r.push({id:e,data:{droppableContainer:s,value:i}})}}return r.sort(Cx)};function Mx(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:_x}function Ix(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n.reduce(((t,i)=>({...t,top:t.top+e*i.y,bottom:t.bottom+e*i.y,left:t.left+e*i.x,right:t.right+e*i.x})),{...t})}}const Rx=Ix(1);function Dx(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const Lx={ignoreTransform:!1};function jx(e,t){void 0===t&&(t=Lx);let i=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:n}=U_(e).getComputedStyle(e);t&&(i=function(e,t,i){const n=Dx(t);if(!n)return e;const{scaleX:r,scaleY:s,x:a,y:o}=n,l=e.left-a-(1-r)*parseFloat(i),c=e.top-o-(1-s)*parseFloat(i.slice(i.indexOf(" ")+1)),h=r?e.width/r:e.width,d=s?e.height/s:e.height;return{width:h,height:d,top:c,right:l+h,bottom:c+d,left:l}}(i,t,n))}const{top:n,left:r,width:s,height:a,bottom:o,right:l}=i;return{top:n,left:r,width:s,height:a,bottom:o,right:l}}function Fx(e){return jx(e,{ignoreTransform:!0})}function Bx(e,t){const i=[];return e?function n(r){if(null!=t&&i.length>=t)return i;if(!r)return i;if(W_(r)&&null!=r.scrollingElement&&!i.includes(r.scrollingElement))return i.push(r.scrollingElement),i;if(!G_(r)||K_(r))return i;if(i.includes(r))return i;const s=U_(e).getComputedStyle(r);return r!==e&&function(e,t){void 0===t&&(t=U_(e).getComputedStyle(e));const i=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const n=t[e];return"string"===typeof n&&i.test(n)}))}(r,s)&&i.push(r),function(e,t){return void 0===t&&(t=U_(e).getComputedStyle(e)),"fixed"===t.position}(r,s)?i:n(r.parentNode)}(e):i}function Nx(e){const[t]=Bx(e,1);return null!=t?t:null}function zx(e){return z_&&e?H_(e)?e:V_(e)?W_(e)||e===Y_(e).scrollingElement?window:G_(e)?e:null:null:null}function Hx(e){return H_(e)?e.scrollX:e.scrollLeft}function Vx(e){return H_(e)?e.scrollY:e.scrollTop}function Ux(e){return{x:Hx(e),y:Vx(e)}}var Wx;function Gx(e){return!(!z_||!e)&&e===document.scrollingElement}function Kx(e){const t={x:0,y:0},i=Gx(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-i.width,y:e.scrollHeight-i.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(Wx||(Wx={}));const Yx={x:.2,y:.2};function Xx(e,t,i,n,r){let{top:s,left:a,right:o,bottom:l}=i;void 0===n&&(n=10),void 0===r&&(r=Yx);const{isTop:c,isBottom:h,isLeft:d,isRight:u}=Kx(e),p={x:0,y:0},g={x:0,y:0},f=t.height*r.y,m=t.width*r.x;return!c&&s<=t.top+f?(p.y=Wx.Backward,g.y=n*Math.abs((t.top+f-s)/f)):!h&&l>=t.bottom-f&&(p.y=Wx.Forward,g.y=n*Math.abs((t.bottom-f-l)/f)),!u&&o>=t.right-m?(p.x=Wx.Forward,g.x=n*Math.abs((t.right-m-o)/m)):!d&&a<=t.left+m&&(p.x=Wx.Backward,g.x=n*Math.abs((t.left+m-a)/m)),{direction:p,speed:g}}function qx(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:i,right:n,bottom:r}=e.getBoundingClientRect();return{top:t,left:i,right:n,bottom:r,width:e.clientWidth,height:e.clientHeight}}function Zx(e){return e.reduce(((e,t)=>nx(e,Ux(t))),_x)}function Qx(e,t){if(void 0===t&&(t=jx),!e)return;const{top:i,left:n,bottom:r,right:s}=t(e);Nx(e)&&(r<=0||s<=0||i>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const $x=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+Hx(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+Vx(t)),0)}]];class Jx{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Bx(t),n=Zx(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[r,s,a]of $x)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=a(i),s=n[r]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eS{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,i){var n;null==(n=this.target)||n.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function tS(e,t){const i=Math.abs(e.x),n=Math.abs(e.y);return"number"===typeof t?Math.sqrt(i**2+n**2)>t:"x"in t&&"y"in t?i>t.x&&n>t.y:"x"in t?i>t.x:"y"in t&&n>t.y}var iS,nS;function rS(e){e.preventDefault()}function sS(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(iS||(iS={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"}(nS||(nS={}));const aS={start:[nS.Space,nS.Enter],cancel:[nS.Esc],end:[nS.Space,nS.Enter]},oS=(e,t)=>{let{currentCoordinates:i}=t;switch(e.code){case nS.Right:return{...i,x:i.x+25};case nS.Left:return{...i,x:i.x-25};case nS.Down:return{...i,y:i.y+25};case nS.Up:return{...i,y:i.y-25}}};class lS{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new eS(Y_(t)),this.windowListeners=new eS(U_(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(iS.Resize,this.handleCancel),this.windowListeners.add(iS.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(iS.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&Qx(i),t(_x)}handleKeyDown(e){if(sx(e)){const{active:t,context:i,options:n}=this.props,{keyboardCodes:r=aS,coordinateGetter:s=oS,scrollBehavior:a="smooth"}=n,{code:o}=e;if(r.end.includes(o))return void this.handleEnd(e);if(r.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=i.current,c=l?{x:l.left,y:l.top}:_x;this.referenceCoordinates||(this.referenceCoordinates=c);const h=s(e,{active:t,context:i.current,currentCoordinates:c});if(h){const t=rx(h,c),n={x:0,y:0},{scrollableAncestors:r}=i.current;for(const i of r){const r=e.code,{isTop:s,isRight:o,isLeft:l,isBottom:c,maxScroll:d,minScroll:u}=Kx(i),p=qx(i),g={x:Math.min(r===nS.Right?p.right-p.width/2:p.right,Math.max(r===nS.Right?p.left:p.left+p.width/2,h.x)),y:Math.min(r===nS.Down?p.bottom-p.height/2:p.bottom,Math.max(r===nS.Down?p.top:p.top+p.height/2,h.y))},f=r===nS.Right&&!o||r===nS.Left&&!l,m=r===nS.Down&&!c||r===nS.Up&&!s;if(f&&g.x!==h.x){const e=i.scrollLeft+t.x,s=r===nS.Right&&e<=d.x||r===nS.Left&&e>=u.x;if(s&&!t.y)return void i.scrollTo({left:e,behavior:a});n.x=s?i.scrollLeft-e:r===nS.Right?i.scrollLeft-d.x:i.scrollLeft-u.x,n.x&&i.scrollBy({left:-n.x,behavior:a});break}if(m&&g.y!==h.y){const e=i.scrollTop+t.y,s=r===nS.Down&&e<=d.y||r===nS.Up&&e>=u.y;if(s&&!t.x)return void i.scrollTo({top:e,behavior:a});n.y=s?i.scrollTop-e:r===nS.Down?i.scrollTop-d.y:i.scrollTop-u.y,n.y&&i.scrollBy({top:-n.y,behavior:a});break}}this.handleMove(e,nx(rx(h,this.referenceCoordinates),n))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function cS(e){return Boolean(e&&"distance"in e)}function hS(e){return Boolean(e&&"delay"in e)}lS.activators=[{eventName:"onKeyDown",handler:(e,t,i)=>{let{keyboardCodes:n=aS,onActivation:r}=t,{active:s}=i;const{code:a}=e.nativeEvent;if(n.start.includes(a)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==r||r({event:e.nativeEvent}),!0)}return!1}}];class dS{constructor(e,t,i){var n;void 0===i&&(i=function(e){const{EventTarget:t}=U_(e);return e instanceof t?e:Y_(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:r}=e,{target:s}=r;this.props=e,this.events=t,this.document=Y_(s),this.documentListeners=new eS(this.document),this.listeners=new eS(i),this.windowListeners=new eS(U_(s)),this.initialCoordinates=null!=(n=ax(r))?n:_x,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(iS.Resize,this.handleCancel),this.windowListeners.add(iS.DragStart,rS),this.windowListeners.add(iS.VisibilityChange,this.handleCancel),this.windowListeners.add(iS.ContextMenu,rS),this.documentListeners.add(iS.Keydown,this.handleKeydown),t){if(null!=i&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(hS(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay));if(cS(t))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(iS.Click,sS,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(iS.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:n,props:r}=this,{onMove:s,options:{activationConstraint:a}}=r;if(!n)return;const o=null!=(t=ax(e))?t:_x,l=rx(n,o);if(!i&&a){if(cS(a)){if(null!=a.tolerance&&tS(l,a.tolerance))return this.handleCancel();if(tS(l,a.distance))return this.handleStart()}return hS(a)&&tS(l,a.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),s(o)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===nS.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const uS={move:{name:"pointermove"},end:{name:"pointerup"}};class pS extends dS{constructor(e){const{event:t}=e,i=Y_(t.target);super(e,uS,i)}}pS.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:i}=e,{onActivation:n}=t;return!(!i.isPrimary||0!==i.button)&&(null==n||n({event:i}),!0)}}];const gS={move:{name:"mousemove"},end:{name:"mouseup"}};var fS;!function(e){e[e.RightClick=2]="RightClick"}(fS||(fS={}));class mS extends dS{constructor(e){super(e,gS,Y_(e.event.target))}}mS.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:i}=e,{onActivation:n}=t;return i.button!==fS.RightClick&&(null==n||n({event:i}),!0)}}];const vS={move:{name:"touchmove"},end:{name:"touchend"}};class yS extends dS{constructor(e){super(e,vS)}static setup(){return window.addEventListener(vS.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(vS.move.name,e)};function e(){}}}var bS,_S;function xS(e){let{acceleration:t,activator:i=bS.Pointer,canScroll:n,draggingRect:r,enabled:s,interval:a=5,order:l=_S.TreeOrder,pointerCoordinates:c,scrollableAncestors:h,scrollableAncestorRects:d,delta:u,threshold:p}=e;const g=function(e){let{delta:t,disabled:i}=e;const n=J_(t);return Q_((e=>{if(i||!n||!e)return SS;const r={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Wx.Backward]:e.x[Wx.Backward]||-1===r.x,[Wx.Forward]:e.x[Wx.Forward]||1===r.x},y:{[Wx.Backward]:e.y[Wx.Backward]||-1===r.y,[Wx.Forward]:e.y[Wx.Forward]||1===r.y}}}),[i,t,n])}({delta:u,disabled:!s}),[f,m]=function(){const e=(0,o.useRef)(null);return[(0,o.useCallback)(((t,i)=>{e.current=setInterval(t,i)}),[]),(0,o.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),v=(0,o.useRef)({x:0,y:0}),y=(0,o.useRef)({x:0,y:0}),b=(0,o.useMemo)((()=>{switch(i){case bS.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case bS.DraggableRect:return r}}),[i,r,c]),_=(0,o.useRef)(null),x=(0,o.useCallback)((()=>{const e=_.current;if(!e)return;const t=v.current.x*y.current.x,i=v.current.y*y.current.y;e.scrollBy(t,i)}),[]),S=(0,o.useMemo)((()=>l===_S.TreeOrder?[...h].reverse():h),[l,h]);(0,o.useEffect)((()=>{if(s&&h.length&&b){for(const e of S){if(!1===(null==n?void 0:n(e)))continue;const i=h.indexOf(e),r=d[i];if(!r)continue;const{direction:s,speed:o}=Xx(e,r,b,t,p);for(const e of["x","y"])g[e][s[e]]||(o[e]=0,s[e]=0);if(o.x>0||o.y>0)return m(),_.current=e,f(x,a),v.current=o,void(y.current=s)}v.current={x:0,y:0},y.current={x:0,y:0},m()}else m()}),[t,x,n,m,s,a,JSON.stringify(b),JSON.stringify(g),f,h,S,d,JSON.stringify(p)])}yS.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:i}=e,{onActivation:n}=t;const{touches:r}=i;return!(r.length>1)&&(null==n||n({event:i}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(bS||(bS={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(_S||(_S={}));const SS={x:{[Wx.Backward]:!1,[Wx.Forward]:!1},y:{[Wx.Backward]:!1,[Wx.Forward]:!1}};var wS,CS;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(wS||(wS={})),function(e){e.Optimized="optimized"}(CS||(CS={}));const kS=new Map;function AS(e,t){return Q_((i=>e?i||("function"===typeof t?t(e):e):null),[t,e])}function ES(e){let{callback:t,disabled:i}=e;const n=q_(t),r=(0,o.useMemo)((()=>{if(i||"undefined"===typeof window||"undefined"===typeof window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(n)}),[i]);return(0,o.useEffect)((()=>()=>null==r?void 0:r.disconnect()),[r]),r}function TS(e){return new Jx(jx(e),e)}function OS(e,t,i){void 0===t&&(t=TS);const[n,r]=(0,o.useReducer)((function(n){if(!e)return null;var r;if(!1===e.isConnected)return null!=(r=null!=n?n:i)?r:null;const s=t(e);if(JSON.stringify(n)===JSON.stringify(s))return n;return s}),null),s=function(e){let{callback:t,disabled:i}=e;const n=q_(t),r=(0,o.useMemo)((()=>{if(i||"undefined"===typeof window||"undefined"===typeof window.MutationObserver)return;const{MutationObserver:e}=window;return new e(n)}),[n,i]);return(0,o.useEffect)((()=>()=>null==r?void 0:r.disconnect()),[r]),r}({callback(t){if(e)for(const i of t){const{type:t,target:n}=i;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){r();break}}}}),a=ES({callback:r});return X_((()=>{r(),e?(null==a||a.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==a||a.disconnect(),null==s||s.disconnect())}),[e]),n}const PS=[];function MS(e,t){void 0===t&&(t=[]);const i=(0,o.useRef)(null);return(0,o.useEffect)((()=>{i.current=null}),t),(0,o.useEffect)((()=>{const t=e!==_x;t&&!i.current&&(i.current=e),!t&&i.current&&(i.current=null)}),[e]),i.current?rx(e,i.current):_x}function IS(e){return(0,o.useMemo)((()=>e?function(e){const t=e.innerWidth,i=e.innerHeight;return{top:0,left:0,right:t,bottom:i,width:t,height:i}}(e):null),[e])}const RS=[];function DS(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return G_(t)?t:e}const LS=[{sensor:pS,options:{}},{sensor:lS,options:{}}],jS={current:{}},FS={draggable:{measure:Fx},droppable:{measure:Fx,strategy:wS.WhileDragging,frequency:CS.Optimized},dragOverlay:{measure:jx}};class BS extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,i;return null!=(t=null==(i=this.get(e))?void 0:i.node.current)?t:void 0}}const NS={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new BS,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:yx},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:FS,measureDroppableContainers:yx,windowRect:null,measuringScheduled:!1},zS={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:yx,draggableNodes:new Map,over:null,measureDroppableContainers:yx},HS=(0,o.createContext)(zS),VS=(0,o.createContext)(NS);function US(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new BS}}}function WS(e,t){switch(t.type){case vx.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case vx.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case vx.DragEnd:case vx.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case vx.RegisterDroppable:{const{element:i}=t,{id:n}=i,r=new BS(e.droppable.containers);return r.set(n,i),{...e,droppable:{...e.droppable,containers:r}}}case vx.SetDroppableDisabled:{const{id:i,key:n,disabled:r}=t,s=e.droppable.containers.get(i);if(!s||n!==s.key)return e;const a=new BS(e.droppable.containers);return a.set(i,{...s,disabled:r}),{...e,droppable:{...e.droppable,containers:a}}}case vx.UnregisterDroppable:{const{id:i,key:n}=t,r=e.droppable.containers.get(i);if(!r||n!==r.key)return e;const s=new BS(e.droppable.containers);return s.delete(i),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function GS(e){let{disabled:t}=e;const{active:i,activatorEvent:n,draggableNodes:r}=(0,o.useContext)(HS),s=J_(n),a=J_(null==i?void 0:i.id);return(0,o.useEffect)((()=>{if(!t&&!n&&s&&null!=a){if(!sx(s))return;if(document.activeElement===s.target)return;const e=r.get(a);if(!e)return;const{activatorNode:t,node:i}=e;if(!t.current&&!i.current)return;requestAnimationFrame((()=>{for(const e of[t.current,i.current]){if(!e)continue;const t=cx(e);if(t){t.focus();break}}}))}}),[n,t,r,a,s]),null}function KS(e,t){let{transform:i,...n}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...n})),i):i}const YS=(0,o.createContext)({..._x,scaleX:1,scaleY:1});var XS;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(XS||(XS={}));const qS=(0,o.memo)((function(e){var t,i,n,r;let{id:s,accessibility:a,autoScroll:l=!0,children:c,sensors:h=LS,collisionDetection:d=Px,measuring:u,modifiers:p,...g}=e;const f=(0,o.useReducer)(WS,void 0,US),[m,v]=f,[y,b]=function(){const[e]=(0,o.useState)((()=>new Set)),t=(0,o.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]),i=(0,o.useCallback)((t=>{let{type:i,event:n}=t;e.forEach((e=>{var t;return null==(t=e[i])?void 0:t.call(e,n)}))}),[e]);return[i,t]}(),[_,x]=(0,o.useState)(XS.Uninitialized),S=_===XS.Initialized,{draggable:{active:w,nodes:C,translate:k},droppable:{containers:A}}=m,E=w?C.get(w):null,T=(0,o.useRef)({initial:null,translated:null}),O=(0,o.useMemo)((()=>{var e;return null!=w?{id:w,data:null!=(e=null==E?void 0:E.data)?e:jS,rect:T}:null}),[w,E]),P=(0,o.useRef)(null),[M,I]=(0,o.useState)(null),[R,D]=(0,o.useState)(null),L=Z_(g,Object.values(g)),j=tx("DndDescribedBy",s),F=(0,o.useMemo)((()=>A.getEnabled()),[A]),B=(N=u,(0,o.useMemo)((()=>({draggable:{...FS.draggable,...null==N?void 0:N.draggable},droppable:{...FS.droppable,...null==N?void 0:N.droppable},dragOverlay:{...FS.dragOverlay,...null==N?void 0:N.dragOverlay}})),[null==N?void 0:N.draggable,null==N?void 0:N.droppable,null==N?void 0:N.dragOverlay]));var N;const{droppableRects:z,measureDroppableContainers:H,measuringScheduled:V}=function(e,t){let{dragging:i,dependencies:n,config:r}=t;const[s,a]=(0,o.useState)(null),{frequency:l,measure:c,strategy:h}=r,d=(0,o.useRef)(e),u=function(){switch(h){case wS.Always:return!1;case wS.BeforeDragging:return i;default:return!i}}(),p=Z_(u),g=(0,o.useCallback)((function(e){void 0===e&&(e=[]),p.current||a((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[p]),f=(0,o.useRef)(null),m=Q_((t=>{if(u&&!i)return kS;if(!t||t===kS||d.current!==e||null!=s){const t=new Map;for(let i of e){if(!i)continue;if(s&&s.length>0&&!s.includes(i.id)&&i.rect.current){t.set(i.id,i.rect.current);continue}const e=i.node.current,n=e?new Jx(c(e),e):null;i.rect.current=n,n&&t.set(i.id,n)}return t}return t}),[e,s,i,u,c]);return(0,o.useEffect)((()=>{d.current=e}),[e]),(0,o.useEffect)((()=>{u||g()}),[i,u]),(0,o.useEffect)((()=>{s&&s.length>0&&a(null)}),[JSON.stringify(s)]),(0,o.useEffect)((()=>{u||"number"!==typeof l||null!==f.current||(f.current=setTimeout((()=>{g(),f.current=null}),l))}),[l,u,g,...n]),{droppableRects:m,measureDroppableContainers:g,measuringScheduled:null!=s}}(F,{dragging:S,dependencies:[k.x,k.y],config:B.droppable}),U=function(e,t){const i=null!==t?e.get(t):void 0,n=i?i.node.current:null;return Q_((e=>{var i;return null===t?null:null!=(i=null!=n?n:e)?i:null}),[n,t])}(C,w),W=(0,o.useMemo)((()=>R?ax(R):null),[R]),G=function(){const e=!1===(null==M?void 0:M.autoScrollEnabled),t="object"===typeof l?!1===l.enabled:!1===l,i=S&&!e&&!t;if("object"===typeof l)return{...l,enabled:i};return{enabled:i}}(),K=function(e,t){return AS(e,t)}(U,B.draggable.measure);!function(e){let{activeNode:t,measure:i,initialRect:n,config:r=!0}=e;const s=(0,o.useRef)(!1),{x:a,y:l}="boolean"===typeof r?{x:r,y:r}:r;X_((()=>{if(!a&&!l||!t)return void(s.current=!1);if(s.current||!n)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const r=Mx(i(e),n);if(a||(r.x=0),l||(r.y=0),s.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){const t=Nx(e);t&&t.scrollBy({top:r.y,left:r.x})}}),[t,a,l,n,i])}({activeNode:w?C.get(w):null,config:G.layoutShiftCompensation,initialRect:K,measure:B.draggable.measure});const Y=OS(U,B.draggable.measure,K),X=OS(U?U.parentElement:null),q=(0,o.useRef)({activatorEvent:null,active:null,activeNode:U,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Z=A.getNodeFor(null==(t=q.current.over)?void 0:t.id),Q=function(e){let{measure:t}=e;const[i,n]=(0,o.useState)(null),r=ES({callback:(0,o.useCallback)((e=>{for(const{target:i}of e)if(G_(i)){n((e=>{const n=t(i);return e?{...e,width:n.width,height:n.height}:n}));break}}),[t])}),s=(0,o.useCallback)((e=>{const i=DS(e);null==r||r.disconnect(),i&&(null==r||r.observe(i)),n(i?t(i):null)}),[t,r]),[a,l]=$_(s);return(0,o.useMemo)((()=>({nodeRef:a,rect:i,setRef:l})),[i,a,l])}({measure:B.dragOverlay.measure}),$=null!=(i=Q.nodeRef.current)?i:U,J=S?null!=(n=Q.rect)?n:Y:null,ee=Boolean(Q.nodeRef.current&&Q.rect),te=Mx(ie=ee?null:Y,AS(ie));var ie;const ne=IS($?U_($):null),re=function(e){const t=(0,o.useRef)(e),i=Q_((i=>e?i&&i!==PS&&e&&t.current&&e.parentNode===t.current.parentNode?i:Bx(e):PS),[e]);return(0,o.useEffect)((()=>{t.current=e}),[e]),i}(S?null!=Z?Z:U:null),se=function(e,t){void 0===t&&(t=jx);const[i]=e,n=IS(i?U_(i):null),[r,s]=(0,o.useReducer)((function(){return e.length?e.map((e=>Gx(e)?n:new Jx(t(e),e))):RS}),RS),a=ES({callback:s});return e.length>0&&r===RS&&s(),X_((()=>{e.length?e.forEach((e=>null==a?void 0:a.observe(e))):(null==a||a.disconnect(),s())}),[e]),r}(re),ae=KS(p,{transform:{x:k.x-te.x,y:k.y-te.y,scaleX:1,scaleY:1},activatorEvent:R,active:O,activeNodeRect:Y,containerNodeRect:X,draggingNodeRect:J,over:q.current.over,overlayNodeRect:Q.rect,scrollableAncestors:re,scrollableAncestorRects:se,windowRect:ne}),oe=W?nx(W,k):null,le=function(e){const[t,i]=(0,o.useState)(null),n=(0,o.useRef)(e),r=(0,o.useCallback)((e=>{const t=zx(e.target);t&&i((e=>e?(e.set(t,Ux(t)),new Map(e)):null))}),[]);return(0,o.useEffect)((()=>{const t=n.current;if(e!==t){s(t);const a=e.map((e=>{const t=zx(e);return t?(t.addEventListener("scroll",r,{passive:!0}),[t,Ux(t)]):null})).filter((e=>null!=e));i(a.length?new Map(a):null),n.current=e}return()=>{s(e),s(t)};function s(e){e.forEach((e=>{const t=zx(e);null==t||t.removeEventListener("scroll",r)}))}}),[r,e]),(0,o.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>nx(e,t)),_x):Zx(e):_x),[e,t])}(re),ce=MS(le),he=MS(le,[Y]),de=nx(ae,ce),ue=J?Rx(J,ae):null,pe=O&&ue?d({active:O,collisionRect:ue,droppableRects:z,droppableContainers:F,pointerCoordinates:oe}):null,ge=Ax(pe,"id"),[fe,me]=(0,o.useState)(null),ve=function(e,t,i){return{...e,scaleX:t&&i?t.width/i.width:1,scaleY:t&&i?t.height/i.height:1}}(ee?ae:nx(ae,he),null!=(r=null==fe?void 0:fe.rect)?r:null,Y),be=(0,o.useCallback)(((e,t)=>{let{sensor:i,options:n}=t;if(null==P.current)return;const r=C.get(P.current);if(!r)return;const s=e.nativeEvent,a=new i({active:P.current,activeNode:r,event:s,options:n,context:q,onStart(e){const t=P.current;if(null==t)return;const i=C.get(t);if(!i)return;const{onDragStart:n}=L.current,r={active:{id:t,data:i.data,rect:T}};(0,ye.unstable_batchedUpdates)((()=>{null==n||n(r),x(XS.Initializing),v({type:vx.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:r})}))},onMove(e){v({type:vx.DragMove,coordinates:e})},onEnd:o(vx.DragEnd),onCancel:o(vx.DragCancel)});function o(e){return async function(){const{active:t,collisions:i,over:n,scrollAdjustedTranslate:r}=q.current;let a=null;if(t&&r){const{cancelDrop:o}=L.current;if(a={activatorEvent:s,active:t,collisions:i,delta:r,over:n},e===vx.DragEnd&&"function"===typeof o){await Promise.resolve(o(a))&&(e=vx.DragCancel)}}P.current=null,(0,ye.unstable_batchedUpdates)((()=>{v({type:e}),x(XS.Uninitialized),me(null),I(null),D(null);const t=e===vx.DragEnd?"onDragEnd":"onDragCancel";if(a){const e=L.current[t];null==e||e(a),y({type:t,event:a})}}))}}(0,ye.unstable_batchedUpdates)((()=>{I(a),D(e.nativeEvent)}))}),[C]),_e=(0,o.useCallback)(((e,t)=>(i,n)=>{const r=i.nativeEvent,s=C.get(n);if(null!==P.current||!s||r.dndKit||r.defaultPrevented)return;const a={active:s};!0===e(i,t.options,a)&&(r.dndKit={capturedBy:t.sensor},P.current=n,be(i,t))}),[C,be]),xe=function(e,t){return(0,o.useMemo)((()=>e.reduce(((e,i)=>{const{sensor:n}=i;return[...e,...n.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,i)})))]}),[])),[e,t])}(h,_e);!function(e){(0,o.useEffect)((()=>{if(!z_)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(h),X_((()=>{Y&&_===XS.Initializing&&x(XS.Initialized)}),[Y,_]),(0,o.useEffect)((()=>{const{onDragMove:e}=L.current,{active:t,activatorEvent:i,collisions:n,over:r}=q.current;if(!t||!i)return;const s={active:t,activatorEvent:i,collisions:n,delta:{x:de.x,y:de.y},over:r};(0,ye.unstable_batchedUpdates)((()=>{null==e||e(s),y({type:"onDragMove",event:s})}))}),[de.x,de.y]),(0,o.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:i,droppableContainers:n,scrollAdjustedTranslate:r}=q.current;if(!e||null==P.current||!t||!r)return;const{onDragOver:s}=L.current,a=n.get(ge),o=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,l={active:e,activatorEvent:t,collisions:i,delta:{x:r.x,y:r.y},over:o};(0,ye.unstable_batchedUpdates)((()=>{me(o),null==s||s(l),y({type:"onDragOver",event:l})}))}),[ge]),X_((()=>{q.current={activatorEvent:R,active:O,activeNode:U,collisionRect:ue,collisions:pe,droppableRects:z,draggableNodes:C,draggingNode:$,draggingNodeRect:J,droppableContainers:A,over:fe,scrollableAncestors:re,scrollAdjustedTranslate:de},T.current={initial:J,translated:ue}}),[O,U,pe,ue,C,$,J,z,A,fe,re,de]),xS({...G,delta:k,draggingRect:ue,pointerCoordinates:oe,scrollableAncestors:re,scrollableAncestorRects:se});const Se=(0,o.useMemo)((()=>({active:O,activeNode:U,activeNodeRect:Y,activatorEvent:R,collisions:pe,containerNodeRect:X,dragOverlay:Q,draggableNodes:C,droppableContainers:A,droppableRects:z,over:fe,measureDroppableContainers:H,scrollableAncestors:re,scrollableAncestorRects:se,measuringConfiguration:B,measuringScheduled:V,windowRect:ne})),[O,U,Y,R,pe,X,Q,C,A,z,fe,H,re,se,B,V,ne]),we=(0,o.useMemo)((()=>({activatorEvent:R,activators:xe,active:O,activeNodeRect:Y,ariaDescribedById:{draggable:j},dispatch:v,draggableNodes:C,over:fe,measureDroppableContainers:H})),[R,xe,O,Y,v,j,C,fe,H]);return o.createElement(px.Provider,{value:b},o.createElement(HS.Provider,{value:we},o.createElement(VS.Provider,{value:Se},o.createElement(YS.Provider,{value:ve},c)),o.createElement(GS,{disabled:!1===(null==a?void 0:a.restoreFocus)})),o.createElement(mx,{...a,hiddenTextDescribedById:j}))})),ZS=(0,o.createContext)(null),QS="button",$S="Droppable";function JS(e){let{id:t,data:i,disabled:n=!1,attributes:r}=e;const s=tx($S),{activators:a,activatorEvent:l,active:c,activeNodeRect:h,ariaDescribedById:d,draggableNodes:u,over:p}=(0,o.useContext)(HS),{role:g=QS,roleDescription:f="draggable",tabIndex:m=0}=null!=r?r:{},v=(null==c?void 0:c.id)===t,y=(0,o.useContext)(v?YS:ZS),[b,_]=$_(),[x,S]=$_(),w=function(e,t){return(0,o.useMemo)((()=>e.reduce(((e,i)=>{let{eventName:n,handler:r}=i;return e[n]=e=>{r(e,t)},e}),{})),[e,t])}(a,t),C=Z_(i);X_((()=>(u.set(t,{id:t,key:s,node:b,activatorNode:x,data:C}),()=>{const e=u.get(t);e&&e.key===s&&u.delete(t)})),[u,t]);return{active:c,activatorEvent:l,activeNodeRect:h,attributes:(0,o.useMemo)((()=>({role:g,tabIndex:m,"aria-disabled":n,"aria-pressed":!(!v||g!==QS)||void 0,"aria-roledescription":f,"aria-describedby":d.draggable})),[n,g,m,v,f,d.draggable]),isDragging:v,listeners:n?void 0:w,node:b,over:p,setNodeRef:_,setActivatorNodeRef:S,transform:y}}function ew(){return(0,o.useContext)(VS)}const tw="Droppable",iw={timeout:25};function nw(e){let{animation:t,children:i}=e;const[n,r]=(0,o.useState)(null),[s,a]=(0,o.useState)(null),l=J_(i);return i||n||!l||r(l),X_((()=>{if(!s)return;const e=null==n?void 0:n.key,i=null==n?void 0:n.props.id;null!=e&&null!=i?Promise.resolve(t(i,s)).then((()=>{r(null)})):r(null)}),[t,n,s]),o.createElement(o.Fragment,null,i,n?(0,o.cloneElement)(n,{ref:a}):null)}const rw={x:0,y:0,scaleX:1,scaleY:1};function sw(e){let{children:t}=e;return o.createElement(HS.Provider,{value:zS},o.createElement(YS.Provider,{value:rw},t))}const aw={position:"fixed",touchAction:"none"},ow=e=>sx(e)?"transform 250ms ease":void 0,lw=(0,o.forwardRef)(((e,t)=>{let{as:i,activatorEvent:n,adjustScale:r,children:s,className:a,rect:l,style:c,transform:h,transition:d=ow}=e;if(!l)return null;const u=r?h:{...h,scaleX:1,scaleY:1},p={...aw,width:l.width,height:l.height,top:l.top,left:l.left,transform:ox.Transform.toString(u),transformOrigin:r&&n?Sx(n,l):void 0,transition:"function"===typeof d?d(n):d,...c};return o.createElement(i,{className:a,style:p,ref:t},s)})),cw=e=>t=>{let{active:i,dragOverlay:n}=t;const r={},{styles:s,className:a}=e;if(null!=s&&s.active)for(const[e,o]of Object.entries(s.active))void 0!==o&&(r[e]=i.node.style.getPropertyValue(e),i.node.style.setProperty(e,o));if(null!=s&&s.dragOverlay)for(const[e,o]of Object.entries(s.dragOverlay))void 0!==o&&n.node.style.setProperty(e,o);return null!=a&&a.active&&i.node.classList.add(a.active),null!=a&&a.dragOverlay&&n.node.classList.add(a.dragOverlay),function(){for(const[e,t]of Object.entries(r))i.node.style.setProperty(e,t);null!=a&&a.active&&i.node.classList.remove(a.active)}},hw={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:i}}=e;return[{transform:ox.Transform.toString(t)},{transform:ox.Transform.toString(i)}]},sideEffects:cw({styles:{active:{opacity:"0"}}})};function dw(e){let{config:t,draggableNodes:i,droppableContainers:n,measuringConfiguration:r}=e;return q_(((e,s)=>{if(null===t)return;const a=i.get(e);if(!a)return;const o=a.node.current;if(!o)return;const l=DS(s);if(!l)return;const{transform:c}=U_(s).getComputedStyle(s),h=Dx(c);if(!h)return;const d="function"===typeof t?t:function(e){const{duration:t,easing:i,sideEffects:n,keyframes:r}={...hw,...e};return e=>{let{active:s,dragOverlay:a,transform:o,...l}=e;if(!t)return;const c={x:a.rect.left-s.rect.left,y:a.rect.top-s.rect.top},h={scaleX:1!==o.scaleX?s.rect.width*o.scaleX/a.rect.width:1,scaleY:1!==o.scaleY?s.rect.height*o.scaleY/a.rect.height:1},d={x:o.x-c.x,y:o.y-c.y,...h},u=r({...l,active:s,dragOverlay:a,transform:{initial:o,final:d}}),[p]=u,g=u[u.length-1];if(JSON.stringify(p)===JSON.stringify(g))return;const f=null==n?void 0:n({active:s,dragOverlay:a,...l}),m=a.node.animate(u,{duration:t,easing:i,fill:"forwards"});return new Promise((e=>{m.onfinish=()=>{null==f||f(),e()}}))}}(t);return Qx(o,r.draggable.measure),d({active:{id:e,data:a.data,node:o,rect:r.draggable.measure(o)},draggableNodes:i,dragOverlay:{node:s,rect:r.dragOverlay.measure(l)},droppableContainers:n,measuringConfiguration:r,transform:h})}))}let uw=0;const pw=o.memo((e=>{let{adjustScale:t=!1,children:i,dropAnimation:n,style:r,transition:s,modifiers:a,wrapperElement:l="div",className:c,zIndex:h=999}=e;const{activatorEvent:d,active:u,activeNodeRect:p,containerNodeRect:g,draggableNodes:f,droppableContainers:m,dragOverlay:v,over:y,measuringConfiguration:b,scrollableAncestors:_,scrollableAncestorRects:x,windowRect:S}=ew(),w=(0,o.useContext)(YS),C=(k=null==u?void 0:u.id,(0,o.useMemo)((()=>{if(null!=k)return uw++,uw}),[k]));var k;const A=KS(a,{activatorEvent:d,active:u,activeNodeRect:p,containerNodeRect:g,draggingNodeRect:v.rect,over:y,overlayNodeRect:v.rect,scrollableAncestors:_,scrollableAncestorRects:x,transform:w,windowRect:S}),E=AS(p),T=dw({config:n,draggableNodes:f,droppableContainers:m,measuringConfiguration:b}),O=E?v.setRef:void 0;return o.createElement(sw,null,o.createElement(nw,{animation:T},u&&C?o.createElement(lw,{key:C,id:u.id,ref:O,as:l,activatorEvent:d,adjustScale:t,className:c,transition:s,rect:E,style:{zIndex:h,...r},transform:A},i):null))}));function gw(e,t,i){const n=e.slice();return n.splice(i<0?n.length+i:i,0,n.splice(t,1)[0]),n}function fw(e,t){return e.reduce(((e,i,n)=>{const r=t.get(i);return r&&(e[n]=r),e}),Array(e.length))}function mw(e){return null!==e&&e>=0}const vw=e=>{let{rects:t,activeIndex:i,overIndex:n,index:r}=e;const s=gw(t,n,i),a=t[r],o=s[r];return o&&a?{x:o.left-a.left,y:o.top-a.top,scaleX:o.width/a.width,scaleY:o.height/a.height}:null};const yw="Sortable",bw=o.createContext({activeIndex:-1,containerId:yw,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:vw,disabled:{draggable:!1,droppable:!1}});function _w(e){let{children:t,id:i,items:n,strategy:r=vw,disabled:s=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:h,measureDroppableContainers:d}=ew(),u=tx(yw,i),p=Boolean(null!==l.rect),g=(0,o.useMemo)((()=>n.map((e=>"object"===typeof e&&"id"in e?e.id:e))),[n]),f=null!=a,m=a?g.indexOf(a.id):-1,v=h?g.indexOf(h.id):-1,y=(0,o.useRef)(g),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(g,y.current),_=-1!==v&&-1===m||b,x=function(e){return"boolean"===typeof e?{draggable:e,droppable:e}:e}(s);X_((()=>{b&&f&&d(g)}),[b,g,f,d]),(0,o.useEffect)((()=>{y.current=g}),[g]);const S=(0,o.useMemo)((()=>({activeIndex:m,containerId:u,disabled:x,disableTransforms:_,items:g,overIndex:v,useDragOverlay:p,sortedRects:fw(g,c),strategy:r})),[m,u,x.draggable,x.droppable,_,g,v,c,p,r]);return o.createElement(bw.Provider,{value:S},t)}const xw=e=>{let{id:t,items:i,activeIndex:n,overIndex:r}=e;return gw(i,n,r).indexOf(t)},Sw=e=>{let{containerId:t,isSorting:i,wasDragging:n,index:r,items:s,newIndex:a,previousItems:o,previousContainerId:l,transition:c}=e;return!(!c||!n)&&((o===s||r!==a)&&(!!i||a!==r&&t===l))},ww={duration:200,easing:"ease"},Cw="transform",kw=ox.Transition.toString({property:Cw,duration:0,easing:"linear"}),Aw={roleDescription:"sortable"};function Ew(e){let{animateLayoutChanges:t=Sw,attributes:i,disabled:n,data:r,getNewIndex:s=xw,id:a,strategy:l,resizeObserverConfig:c,transition:h=ww}=e;const{items:d,containerId:u,activeIndex:p,disabled:g,disableTransforms:f,sortedRects:m,overIndex:v,useDragOverlay:y,strategy:b}=(0,o.useContext)(bw),_=function(e,t){var i,n;if("boolean"===typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(i=null==e?void 0:e.draggable)?i:t.draggable,droppable:null!=(n=null==e?void 0:e.droppable)?n:t.droppable}}(n,g),x=d.indexOf(a),S=(0,o.useMemo)((()=>({sortable:{containerId:u,index:x,items:d},...r})),[u,r,x,d]),w=(0,o.useMemo)((()=>d.slice(d.indexOf(a))),[d,a]),{rect:C,node:k,isOver:A,setNodeRef:E}=function(e){let{data:t,disabled:i=!1,id:n,resizeObserverConfig:r}=e;const s=tx(tw),{active:a,dispatch:l,over:c,measureDroppableContainers:h}=(0,o.useContext)(HS),d=(0,o.useRef)({disabled:i}),u=(0,o.useRef)(!1),p=(0,o.useRef)(null),g=(0,o.useRef)(null),{disabled:f,updateMeasurementsFor:m,timeout:v}={...iw,...r},y=Z_(null!=m?m:n),b=ES({callback:(0,o.useCallback)((()=>{u.current?(null!=g.current&&clearTimeout(g.current),g.current=setTimeout((()=>{h(Array.isArray(y.current)?y.current:[y.current]),g.current=null}),v)):u.current=!0}),[v]),disabled:f||!a}),_=(0,o.useCallback)(((e,t)=>{b&&(t&&(b.unobserve(t),u.current=!1),e&&b.observe(e))}),[b]),[x,S]=$_(_),w=Z_(t);return(0,o.useEffect)((()=>{b&&x.current&&(b.disconnect(),u.current=!1,b.observe(x.current))}),[x,b]),X_((()=>(l({type:vx.RegisterDroppable,element:{id:n,key:s,disabled:i,node:x,rect:p,data:w}}),()=>l({type:vx.UnregisterDroppable,key:s,id:n}))),[n]),(0,o.useEffect)((()=>{i!==d.current.disabled&&(l({type:vx.SetDroppableDisabled,id:n,key:s,disabled:i}),d.current.disabled=i)}),[n,s,i,l]),{active:a,rect:p,isOver:(null==c?void 0:c.id)===n,node:x,over:c,setNodeRef:S}}({id:a,data:S,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...c}}),{active:T,activatorEvent:O,activeNodeRect:P,attributes:M,setNodeRef:I,listeners:R,isDragging:D,over:L,setActivatorNodeRef:j,transform:F}=JS({id:a,data:S,attributes:{...Aw,...i},disabled:_.draggable}),B=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,o.useMemo)((()=>e=>{t.forEach((t=>t(e)))}),t)}(E,I),N=Boolean(T),z=N&&!f&&mw(p)&&mw(v),H=!y&&D,V=H&&z?F:null,U=z?null!=V?V:(null!=l?l:b)({rects:m,activeNodeRect:P,activeIndex:p,overIndex:v,index:x}):null,W=mw(p)&&mw(v)?s({id:a,items:d,activeIndex:p,overIndex:v}):x,G=null==T?void 0:T.id,K=(0,o.useRef)({activeId:G,items:d,newIndex:W,containerId:u}),Y=d!==K.current.items,X=t({active:T,containerId:u,isDragging:D,isSorting:N,id:a,index:x,items:d,newIndex:K.current.newIndex,previousItems:K.current.items,previousContainerId:K.current.containerId,transition:h,wasDragging:null!=K.current.activeId}),q=function(e){let{disabled:t,index:i,node:n,rect:r}=e;const[s,a]=(0,o.useState)(null),l=(0,o.useRef)(i);return X_((()=>{if(!t&&i!==l.current&&n.current){const e=r.current;if(e){const t=jx(n.current,{ignoreTransform:!0}),i={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(i.x||i.y)&&a(i)}}i!==l.current&&(l.current=i)}),[t,i,n,r]),(0,o.useEffect)((()=>{s&&a(null)}),[s]),s}({disabled:!X,index:x,node:k,rect:C});return(0,o.useEffect)((()=>{N&&K.current.newIndex!==W&&(K.current.newIndex=W),u!==K.current.containerId&&(K.current.containerId=u),d!==K.current.items&&(K.current.items=d)}),[N,W,u,d]),(0,o.useEffect)((()=>{if(G===K.current.activeId)return;if(G&&!K.current.activeId)return void(K.current.activeId=G);const e=setTimeout((()=>{K.current.activeId=G}),50);return()=>clearTimeout(e)}),[G]),{active:T,activeIndex:p,attributes:M,data:S,rect:C,index:x,newIndex:W,items:d,isOver:A,isSorting:N,isDragging:D,listeners:R,node:k,overIndex:v,over:L,setNodeRef:B,setActivatorNodeRef:j,setDroppableNodeRef:E,setDraggableNodeRef:I,transform:null!=q?q:U,transition:function(){if(q||Y&&K.current.newIndex===x)return kw;if(H&&!sx(O)||!h)return;if(N||X)return ox.Transition.toString({...h,property:Cw});return}()}}function Tw(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"===typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Ow=[nS.Down,nS.Right,nS.Up,nS.Left];function Pw(e,t){return!(!Tw(e)||!Tw(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}const Mw="semi-sortable";function Iw(e){return o.createElement("div",Object.assign({style:{overflow:"auto"}},e))}const Rw={coordinateGetter:(e,t)=>{let{context:{active:i,collisionRect:n,droppableRects:r,droppableContainers:s,over:a,scrollableAncestors:o}}=t;if(Ow.includes(e.code)){if(e.preventDefault(),!i||!n)return;const t=[];s.getEnabled().forEach((i=>{if(!i||null!=i&&i.disabled)return;const s=r.get(i.id);if(s)switch(e.code){case nS.Down:n.top<s.top&&t.push(i);break;case nS.Up:n.top>s.top&&t.push(i);break;case nS.Left:n.left>s.left&&t.push(i);break;case nS.Right:n.left<s.left&&t.push(i)}}));const l=(e=>{let{collisionRect:t,droppableRects:i,droppableContainers:n}=e;const r=kx(t),s=[];for(const a of n){const{id:e}=a,t=i.get(e);if(t){const i=kx(t),n=r.reduce(((e,t,n)=>e+xx(i[n],t)),0),o=Number((n/4).toFixed(4));s.push({id:e,data:{droppableContainer:a,value:o}})}}return s.sort(wx)})({active:i,collisionRect:n,droppableRects:r,droppableContainers:t,pointerCoordinates:null});let c=Ax(l,"id");if(c===(null==a?void 0:a.id)&&l.length>1&&(c=l[1].id),null!=c){const e=s.get(i.id),t=s.get(c),a=t?r.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&a&&e&&t){const i=Bx(l).some(((e,t)=>o[t]!==e)),r=Pw(e,t),s=function(e,t){if(!Tw(e)||!Tw(t))return!1;if(!Pw(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=i||!r?{x:0,y:0}:{x:s?n.width-a.width:0,y:s?n.height-a.height:0},h={x:a.left,y:a.top};return c.x&&c.y?h:rx(h,c)}}}}};function Dw(e){let{items:t,onSortEnd:i,adjustScale:n,renderItem:r,transition:s,collisionDetection:a=Tx,strategy:l=vw,useDragOverlay:c=!0,dragOverlayCls:h,container:d=Iw,prefix:u=Mw}=e;const[p,g]=(0,o.useState)(null),f=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,o.useMemo)((()=>[...t].filter((e=>null!=e))),[...t])}(bx(mS),bx(yS),bx(lS,Rw)),m=(0,o.useCallback)((e=>t.indexOf(e)),[t]),v=(0,o.useMemo)((()=>p?m(p):-1),[m,p]),y=(0,o.useCallback)((e=>{let{active:t}=e;t&&g(t.id)}),[]),b=(0,o.useCallback)((e=>{let{over:t}=e;if(g(null),t){const e=m(t.id);v!==e&&i({oldIndex:v,newIndex:e})}}),[v,m,i]),_=(0,o.useCallback)((()=>{g(null)}),[]);return o.createElement(qS,{sensors:f,collisionDetection:a,onDragStart:y,onDragEnd:b,onDragCancel:_,autoScroll:{order:_S.ReversedTreeOrder}},o.createElement(_w,{items:t,strategy:l},o.createElement(d,null,t.map(((e,t)=>o.createElement(Lw,{key:e,id:e,index:t,renderItem:r,useDragOverlay:c,prefix:u,transition:s}))))),c?(0,ye.createPortal)(o.createElement(pw,{adjustScale:n,style:{zIndex:void 0},className:h},p?r({id:p,sortableHandle:e=>e}):null),document.body):null)}function Lw(e){let{animateLayoutChanges:t,id:i,renderItem:n,prefix:r,transition:s}=e;const{listeners:a,setNodeRef:l,transform:c,transition:h,active:u,isOver:p,attributes:g}=Ew({id:i,animateLayoutChanges:t,transition:s}),f=(0,o.useCallback)((e=>()=>o.createElement("span",Object.assign({},a,{style:{lineHeight:0},onMouseDown:e=>{a.onMouseDown(e),e.preventDefault(),e.stopPropagation()}}),o.createElement(e,null))),[a]),m=d()("".concat(r,"-sortable-item"),{["".concat(r,"-sortable-item-over")]:p,["".concat(r,"-sortable-item-active")]:(null===u||void 0===u?void 0:u.id)===i}),v=(0,o.useMemo)((()=>bm()(s)?void 0:{transform:ox.Transform.toString(Object.assign(Object.assign({},c),{scaleX:1,scaleY:1})),transition:h}),[s,c,h]);return o.createElement("div",Object.assign({ref:l,style:v,className:m},g),n({id:i,sortableHandle:f}))}var jw=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Fw=R_.PREFIX;function Bw(e){return o.createElement("div",Object.assign({className:"".concat(Fw,"-sortable-list")},e))}class Nw extends M.A{constructor(e){super(e),this.handleInputChange=e=>{this.foundation.handleInputChange(e)},this.handleKeyDown=e=>{this.foundation.handleKeyDown(e)},this.handleInputFocus=e=>{this.foundation.handleInputFocus(e)},this.handleInputBlur=e=>{this.foundation.handleInputBlur(e)},this.handleClearBtn=e=>{this.foundation.handleClearBtn(e)},this.handleClearEnterPress=e=>{this.foundation.handleClearEnterPress(e)},this.handleTagClose=e=>{this.foundation.handleTagClose(e)},this.handleInputMouseLeave=e=>{this.foundation.handleInputMouseLeave()},this.handleClick=e=>{this.foundation.handleClick(e)},this.handleInputMouseEnter=e=>{this.foundation.handleInputMouseEnter()},this.handleClickPrefixOrSuffix=e=>{this.foundation.handleClickPrefixOrSuffix(e)},this.handlePreventMouseDown=e=>{this.foundation.handlePreventMouseDown(e)},this.getAllTags=()=>{const{tagsArray:e}=this.state;return e.map(((e,t)=>this.renderTag(e,t)))},this.renderTag=(e,t,i)=>{const{size:n,disabled:r,renderTagItem:s,showContentTooltip:a,draggable:l}=this.props,{active:c}=this.state,h=c&&l,u=d()("".concat(Fw,"-wrapper-tag"),{["".concat(Fw,"-wrapper-tag-size-").concat(n)]:n,["".concat(Fw,"-wrapper-tag-icon")]:h}),p=d()("".concat(Fw,"-wrapper-typo"),{["".concat(Fw,"-wrapper-typo-disabled")]:r}),g=d()({["".concat(Fw,"-drag-item")]:h,["".concat(Fw,"-wrapper-tag-icon")]:h}),f=i&&i((()=>o.createElement(N_,{className:"".concat(Fw,"-drag-handler")}))),m=h?e:"".concat(t).concat(e),v=()=>{!r&&this.handleTagClose(t)};return G()(s)?o.createElement("div",{className:g,key:m},h&&i?o.createElement(f,null):null,s(e,t,v)):o.createElement(ep,{className:u,color:"white",size:"small"===n?"small":"large",type:"light",onClose:v,closable:!r,key:m,visible:!0,"aria-label":"".concat(r?"":"Closable ","Tag: ").concat(e)},h&&i?o.createElement(f,null):null,o.createElement(rt.A,{className:p,ellipsis:{showTooltip:a,rows:1}},e))},this.renderSortTag=e=>{const{id:t,sortableHandle:i}=e,{tagsArray:n}=this.state,r=n.indexOf(t);return this.renderTag(t,r,i)},this.onSortEnd=e=>{this.foundation.handleSortEnd(e)},this.handleInputCompositionStart=e=>{this.foundation.handleInputCompositionStart(e)},this.handleInputCompositionEnd=e=>{this.foundation.handleInputCompositionEnd(e)},this.foundation=new B_(this.adapter),this.state={tagsArray:e.defaultValue||[],inputValue:"",focusing:!1,hovering:!1,active:!1,entering:!1},this.inputRef=o.createRef(),this.tagInputRef=o.createRef(),this.clickOutsideHandler=null}static getDerivedStateFromProps(e,t){const{value:i,inputValue:n}=e,{tagsArray:r}=t;let s;return s=Wt()(i)?i:"value"in e&&!i?[]:r,{tagsArray:s,inputValue:C()(n)?n:t.inputValue}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setInputValue:e=>{this.setState({inputValue:e})},setTagsArray:e=>{this.setState({tagsArray:e})},setFocusing:e=>{this.setState({focusing:e})},toggleFocusing:e=>{const{preventScroll:t}=this.props,i=this.inputRef&&this.inputRef.current;e?i&&i.focus({preventScroll:t}):i&&i.blur(),this.setState({focusing:e})},setHovering:e=>{this.setState({hovering:e})},setActive:e=>{this.setState({active:e})},setEntering:e=>{this.setState({entering:e})},getClickOutsideHandler:()=>this.clickOutsideHandler,notifyBlur:e=>{this.props.onBlur(e)},notifyFocus:e=>{this.props.onFocus(e)},notifyInputChange:(e,t)=>{this.props.onInputChange(e,t)},notifyTagChange:e=>{this.props.onChange(e)},notifyTagAdd:e=>{this.props.onAdd(e)},notifyTagRemove:(e,t)=>{this.props.onRemove(e,t)},notifyKeyDown:e=>{this.props.onKeyDown(e)},registerClickOutsideHandler:e=>{const t=t=>{const i=this.tagInputRef&&this.tagInputRef.current,n=t.target,r=t.composedPath&&t.composedPath()||[n];!i||i.contains(n)||r.includes(i)||e(t)};this.clickOutsideHandler=t,document.addEventListener("click",t,!1)},unregisterClickOutsideHandler:()=>{document.removeEventListener("click",this.clickOutsideHandler,!1),this.clickOutsideHandler=null}})}componentDidMount(){const{disabled:e,autoFocus:t,preventScroll:i}=this.props;!e&&t&&(this.inputRef.current.focus({preventScroll:i}),this.foundation.handleClick()),this.foundation.init()}renderClearBtn(){const{hovering:e,tagsArray:t,inputValue:i}=this.state,{showClear:n,disabled:r,clearIcon:s}=this.props,a=d()("".concat(Fw,"-clearBtn"),{["".concat(Fw,"-clearBtn-invisible")]:!e||""===i&&0===t.length||r});return n?o.createElement("div",{role:"button",tabIndex:0,"aria-label":"Clear TagInput value",className:a,onClick:e=>this.handleClearBtn(e),onKeyPress:e=>this.handleClearEnterPress(e)},s||o.createElement(ee,null)):null}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:i}=this.props,n=e||t;if(bm()(n)||_()(n))return null;const r=d()("".concat(Fw,"-prefix"),{["".concat(Fw,"-inset-label")]:t,["".concat(Fw,"-prefix-text")]:n&&C()(n),["".concat(Fw,"-prefix-icon")]:(0,$.uR)(n)});return o.createElement("div",{className:r,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:i,"x-semi-prop":"prefix"},n)}renderSuffix(){const{suffix:e}=this.props;if(bm()(e)||_()(e))return null;const t=d()("".concat(Fw,"-suffix"),{["".concat(Fw,"-suffix-text")]:e&&C()(e),["".concat(Fw,"-suffix-icon")]:(0,$.uR)(e)});return o.createElement("div",{className:t,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},e)}renderTags(){const{disabled:e,maxTagCount:t,showRestTagsPopover:i,restTagsPopoverProps:n={},draggable:r,expandRestTagsOnClick:s}=this.props,{tagsArray:a,active:l}=this.state,c=d()("".concat(Fw,"-wrapper-n"),{["".concat(Fw,"-wrapper-n-disabled")]:e}),h=this.getAllTags();let u=[],p=[...h];(!l||!s)&&t&&t<h.length&&(p=h.slice(0,t),u=h.slice(t));const g=o.createElement("span",{className:c},"+",a.length-t),f=h.map(((e,t)=>({item:e,key:a[t]})));return l&&r&&f.length>0?o.createElement(Dw,{items:a,onSortEnd:this.onSortEnd,renderItem:this.renderSortTag,container:Bw,prefix:Fw,transition:null,dragOverlayCls:"".concat(Fw,"-right-item-drag-item-move")}):o.createElement(o.Fragment,null,p,u.length>0&&(i?o.createElement(U.A,Object.assign({content:u,showArrow:!0,trigger:"hover",position:"top",autoAdjustOverflow:!0},n),g):g))}blur(){this.inputRef.current.blur(),this.foundation.clickOutsideCallBack()}focus(){const{preventScroll:e,disabled:t}=this.props;this.inputRef.current.focus({preventScroll:e}),t||this.foundation.handleClick()}render(){const e=this.props,{size:t,style:i,className:n,disabled:r,placeholder:s,validateStatus:a,prefix:l,insetLabel:c,suffix:h}=e,u=jw(e,["size","style","className","disabled","placeholder","validateStatus","prefix","insetLabel","suffix"]),{focusing:p,hovering:g,tagsArray:f,inputValue:m,active:v}=this.state,y=d()(Fw,n,{["".concat(Fw,"-focus")]:p||v,["".concat(Fw,"-disabled")]:r,["".concat(Fw,"-hover")]:g&&!r,["".concat(Fw,"-error")]:"error"===a,["".concat(Fw,"-warning")]:"warning"===a,["".concat(Fw,"-small")]:"small"===t,["".concat(Fw,"-large")]:"large"===t,["".concat(Fw,"-with-prefix")]:!!l||!!c,["".concat(Fw,"-with-suffix")]:!!h}),b=d()("".concat(Fw,"-wrapper-input"),"".concat(Fw,"-wrapper-input-").concat(t)),_=d()("".concat(Fw,"-wrapper"));return o.createElement("div",Object.assign({ref:this.tagInputRef,style:i,className:y,"aria-disabled":r,"aria-label":this.props["aria-label"],"aria-invalid":"error"===a,onMouseEnter:e=>{this.handleInputMouseEnter(e)},onMouseLeave:e=>{this.handleInputMouseLeave(e)},onClick:e=>{this.handleClick(e)}},this.getDataAttr(u)),this.renderPrefix(),o.createElement("div",{className:_},this.renderTags(),o.createElement(ce,{"aria-label":"input value",ref:this.inputRef,className:b,disabled:r,value:m,size:t,placeholder:0===f.length?s:"",onKeyDown:e=>{this.handleKeyDown(e)},onChange:(e,t)=>{this.handleInputChange(t)},onBlur:e=>{this.handleInputBlur(e)},onFocus:e=>{this.handleInputFocus(e)},onCompositionStart:this.handleInputCompositionStart,onCompositionEnd:this.handleInputCompositionEnd})),this.renderClearBtn(),this.renderSuffix())}}Nw.propTypes={children:c().node,clearIcon:c().node,style:c().object,className:c().string,disabled:c().bool,allowDuplicates:c().bool,max:c().number,maxTagCount:c().number,maxLength:c().number,showRestTagsPopover:c().bool,restTagsPopoverProps:c().object,showContentTooltip:c().oneOfType([c().shape({type:c().string,opts:c().object}),c().bool]),defaultValue:c().array,value:c().array,inputValue:c().string,placeholder:c().string,separator:c().oneOfType([c().string,c().array]),showClear:c().bool,addOnBlur:c().bool,draggable:c().bool,expandRestTagsOnClick:c().bool,autoFocus:c().bool,renderTagItem:c().func,onBlur:c().func,onFocus:c().func,onChange:c().func,onInputChange:c().func,onExceed:c().func,onInputExceed:c().func,onAdd:c().func,onRemove:c().func,onKeyDown:c().func,size:c().oneOf(D_),validateStatus:c().oneOf(L_),prefix:c().oneOfType([c().string,c().node]),suffix:c().oneOfType([c().string,c().node]),"aria-label":c().string,preventScroll:c().bool},Nw.defaultProps={showClear:!1,addOnBlur:!1,allowDuplicates:!0,showRestTagsPopover:!0,autoFocus:!1,draggable:!1,expandRestTagsOnClick:!0,showContentTooltip:!0,separator:",",size:"default",validateStatus:"default",onBlur:r(),onFocus:r(),onChange:r(),onInputChange:r(),onExceed:r(),onInputExceed:r(),onAdd:r(),onRemove:r(),onKeyDown:r()};const zw=Nw;const Hw=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2C5.80558 2 2 5.80558 2 10.5C2 15.1944 5.80558 19 10.5 19C12.3054 19 13.9794 18.4371 15.356 17.4773L19.4393 21.5606C20.0251 22.1464 20.9749 22.1464 21.5606 21.5606C22.1464 20.9749 22.1464 20.0251 21.5606 19.4393L17.4773 15.356C18.4371 13.9794 19 12.3054 19 10.5C19 5.80558 15.1944 2 10.5 2ZM5 10.5C5 7.46243 7.46243 5 10.5 5C13.5376 5 16 7.46243 16 10.5C16 13.5376 13.5376 16 10.5 16C7.46243 16 5 13.5376 5 10.5Z",fill:"currentColor"}))}),"search");var Vw=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Uw=Fb.PREFIX,Ww=Fb.PREFIX_TREE;class Gw extends M.A{constructor(e){super(e),this.renderSuffix=()=>{const{suffix:e}=this.props,t=d()({["".concat(Uw,"-suffix")]:!0,["".concat(Uw,"-suffix-text")]:e&&C()(e),["".concat(Uw,"-suffix-icon")]:(0,$.uR)(e)});return o.createElement("div",{className:t,"x-semi-prop":"suffix"},e)},this.renderPrefix=()=>{const{prefix:e,insetLabel:t,insetLabelId:i}=this.props,n=e||t,r=d()({["".concat(Uw,"-prefix")]:!0,["".concat(Uw,"-inset-label")]:t,["".concat(Uw,"-prefix-text")]:n&&C()(n),["".concat(Uw,"-prefix-icon")]:(0,$.uR)(n)});return o.createElement("div",{className:r,id:i,"x-semi-prop":"prefix,insetLabel"},n)},this.renderContent=()=>{const{dropdownMinWidth:e}=this.state,{dropdownStyle:t,dropdownClassName:i}=this.props,n=Object.assign({minWidth:e},t),r=d()(i,"".concat(Uw,"-popover"));return o.createElement("div",{className:r,style:n},this.renderTree())},this.removeTag=e=>{this.foundation.removeTag(e)},this.handleClick=e=>{this.foundation.handleClick(e)},this.getDataForKeyNotInKeyEntities=e=>this.foundation.getDataForKeyNotInKeyEntities(e),this.handleSelectionEnterPress=e=>{this.foundation.handleSelectionEnterPress(e)},this.hasValue=()=>{const{multiple:e,checkRelation:t}=this.props,{realCheckedKeys:i,checkedKeys:n,selectedKeys:r}=this.state;let s=!1;return e?"related"===t?s=Boolean(n.size):"unRelated"===t&&(s=Boolean(i.size)):s=Boolean(r.length),s},this.showClearBtn=()=>{const{showClear:e,disabled:t,searchPosition:i}=this.props,{inputValue:n,isOpen:r,isHovering:s}=this.state,a=i===zb&&n;return e&&(this.hasValue()||a)&&!t&&(r||s)},this.renderTagList=()=>{const{checkedKeys:e,keyEntities:t,disabledKeys:i,realCheckedKeys:n}=this.state,{treeNodeLabelProp:r,leafOnly:s,disabled:a,disableStrictly:l,size:c,checkRelation:h,renderSelectedItem:d,keyMaps:u}=this.props,p=Fi()(u,"label",r),g=G()(d)?d:e=>({isRenderInTag:!0,content:Fi()(e,p,null)});let f=[];"related"===h?f=s_([...e],t,s,!0):"unRelated"===h&&Object.keys(t).length>0&&(f=[...n]);const m=[];return f.forEach(((e,n)=>{const r=t[e]&&t[e].key===e?t[e].data:this.getDataForKeyNotInKeyEntities(e),s=(t,i)=>{i&&"function"===typeof i.preventDefault&&i.preventDefault(),this.removeTag(e)},{content:h,isRenderInTag:d}=r?g(r,{index:n,onClose:s}):{};if(bm()(h)||_()(h))return;const u={closable:!(a||r.disabled||l&&i.has(r.key)),color:"white",visible:!0,onClose:s,key:"tag-".concat(e,"-").concat(n),size:"small"===c?"small":"large"};d?m.push(o.createElement(ep,Object.assign({},u),h)):m.push(h)})),m},this.renderSingleTriggerSearchItem=()=>{const{placeholder:e,disabled:t}=this.props,{inputTriggerFocus:i}=this.state,n=this.foundation.getRenderTextInSingle(),r=d()("".concat(Uw,"-selection-TriggerSearchItem"),{["".concat(Uw,"-selection-TriggerSearchItem-placeholder")]:(i||!n)&&!t,["".concat(Uw,"-selection-TriggerSearchItem-disabled")]:t});return o.createElement("span",{className:r},n||e)},this.renderSingleTriggerSearch=()=>{const{inputValue:e}=this.state;return o.createElement(o.Fragment,null,!e&&this.renderSingleTriggerSearchItem(),this.renderInput())},this.renderSelectContent=()=>{const{multiple:e,placeholder:t,maxTagCount:i,searchPosition:n,filterTreeNode:r,showRestTagsPopover:s,restTagsPopoverProps:a}=this.props;if(r&&n===zb)return e?this.renderTagInput():this.renderSingleTriggerSearch();if(!e||!this.hasValue()){const e=this.foundation.getRenderTextInSingle(),i=d()("".concat(Uw,"-selection-content"),{["".concat(Uw,"-selection-placeholder")]:!e});return o.createElement("span",{className:i},e||t)}const l=this.renderTagList();return o.createElement(rp,{maxTagCount:i,tagList:l,size:"large",mode:"custom",showPopover:s,popoverProps:a})},this.handleClear=e=>{e&&e.stopPropagation(),this.foundation.handleClear(e)},this.handleClearEnterPress=e=>{e&&e.stopPropagation(),this.foundation.handleClearEnterPress(e)},this.handleMouseOver=e=>{this.foundation.toggleHoverState(!0)},this.handleMouseLeave=e=>{this.foundation.toggleHoverState(!1)},this.search=e=>{const{isOpen:t}=this.state;t||this.foundation.open(),this.foundation.handleInputChange(e)},this.close=()=>{this.foundation.close(null)},this.renderArrow=()=>{const e=this.showClearBtn(),{arrowIcon:t}=this.props;return e?null:t?o.createElement("div",{className:d()("".concat(Uw,"-arrow")),"x-semi-prop":"arrowIcon"},t):null},this.renderClearBtn=()=>{const e=this.showClearBtn(),{clearIcon:t}=this.props,i=d()("".concat(Uw,"-clearbtn"));return e?o.createElement("div",{role:"button",tabIndex:0,"aria-label":"Clear TreeSelect value",className:i,onClick:this.handleClear,onKeyPress:this.handleClearEnterPress},t||o.createElement(ee,null)):null},this.renderSelection=()=>{const e=this.props,{disabled:t,multiple:i,filterTreeNode:n,validateStatus:r,prefix:s,suffix:a,style:l,size:c,insetLabel:h,className:u,placeholder:p,showClear:g,leafOnly:f,searchPosition:m,triggerRender:v,borderless:y,checkRelation:b}=e,_=Vw(e,["disabled","multiple","filterTreeNode","validateStatus","prefix","suffix","style","size","insetLabel","className","placeholder","showClear","leafOnly","searchPosition","triggerRender","borderless","checkRelation"]),{inputValue:x,selectedKeys:S,checkedKeys:w,keyEntities:C,isFocus:k,realCheckedKeys:A}=this.state,E=Boolean(n),T="function"===typeof v,O=g?{onMouseEnter:e=>this.handleMouseOver(e),onMouseLeave:e=>this.handleMouseLeave(e)}:{},P=m===zb&&E,M=P&&dp()(w),I=P&&!dp()(w),R=T?d()(u):d()(Uw,{["".concat(Uw,"-borderless")]:y,["".concat(Uw,"-focus")]:k,["".concat(Uw,"-disabled")]:t,["".concat(Uw,"-single")]:!i,["".concat(Uw,"-multiple")]:i,["".concat(Uw,"-multiple-tagInput-empty")]:i&&M,["".concat(Uw,"-multiple-tagInput-notEmpty")]:i&&I,["".concat(Uw,"-filterable")]:E,["".concat(Uw,"-error")]:"error"===r,["".concat(Uw,"-warning")]:"warning"===r,["".concat(Uw,"-small")]:"small"===c,["".concat(Uw,"-large")]:"large"===c,["".concat(Uw,"-with-prefix")]:s||h,["".concat(Uw,"-with-suffix")]:a,["".concat(Uw,"-with-suffix")]:a},u);let D;if(T){let e=[];i?"related"===b?e=s_([...w],C,f,!0):"unRelated"===b&&(e=[...A]):e=S,D=o.createElement(ue,{inputValue:x,value:e.map((e=>Fi()(C,[e,"data"]))),disabled:t,placeholder:p,onClear:this.handleClear,componentName:"TreeSelect",triggerRender:v,componentProps:Object.assign({},this.props),onSearch:this.search,onRemove:this.removeTag})}else D=[o.createElement(o.Fragment,{key:"prefix"},s||h?this.renderPrefix():null),o.createElement(o.Fragment,{key:"selection"},o.createElement("div",{className:"".concat(Uw,"-selection")},this.renderSelectContent())),o.createElement(o.Fragment,{key:"suffix"},a?this.renderSuffix():null),o.createElement(o.Fragment,{key:"clearBtn"},g||P&&x?this.renderClearBtn():null),o.createElement(o.Fragment,{key:"arrow"},this.renderArrow())];const L=t?null:0;return o.createElement("div",Object.assign({role:"combobox","aria-disabled":t,"aria-haspopup":"tree",tabIndex:L,className:R,style:l,ref:this.triggerRef,onClick:this.handleClick,onKeyPress:this.handleSelectionEnterPress,"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"]},O,this.getDataAttr(_)),D)},this.renderTagItem=(e,t)=>{const{keyEntities:i,disabledKeys:n}=this.state,{size:r,leafOnly:s,disabled:a,disableStrictly:l,renderSelectedItem:c,treeNodeLabelProp:h,keyMaps:u}=this.props,p=Fi()(u,"label",h),g=s_([e],i,s,!0).map((t=>i[e]&&i[e].key===e?i[e].data:this.getDataForKeyNotInKeyEntities(e))),f=c_(g,u),m=d()("".concat(Uw,"-selection-tag"),{["".concat(Uw,"-selection-tag-disabled")]:a}),v=!dp()(g)&&!dp()(g[0]),y=l&&v&&n.has(g[0].key),b=v&&!g[0].disabled&&!a&&!y,_=(t,i)=>{i.preventDefault(),this.removeTag(e)},x={size:"small"===r?"small":"large",key:"tag-".concat(f,"-").concat(t),color:"white",className:m,closable:b,onClose:_},S=g[0],w=G()(c)?c:e=>({isRenderInTag:!0,content:Fi()(e,p,null)});if(G()(w)){const{content:e,isRenderInTag:i}=S?w(S,{index:t,onClose:_}):{};return i?o.createElement(ep,Object.assign({},x),e):e}return o.createElement(ep,Object.assign({},x),f)},this.renderTagInput=()=>{const{leafOnly:e,disabled:t,size:i,searchAutoFocus:n,placeholder:r,maxTagCount:s,checkRelation:a,showRestTagsPopover:l,restTagsPopoverProps:c,searchPosition:h,filterTreeNode:d,preventScroll:u}=this.props,{keyEntities:p,checkedKeys:g,inputValue:f,realCheckedKeys:m}=this.state;let v=[];"related"===a?v=s_(g,p,e,!0):"unRelated"===a&&(v=[...m]);const y=d&&h===zb?n:void 0;return o.createElement(zw,{maxTagCount:s,disabled:t,onInputChange:e=>this.search(e),ref:this.tagInputRef,placeholder:r,value:v,inputValue:f,size:i,showRestTagsPopover:l,restTagsPopoverProps:c,autoFocus:y,renderTagItem:(e,t)=>this.renderTagItem(e,t),onRemove:e=>this.removeTag(e),expandRestTagsOnClick:!1,preventScroll:u})},this.renderInput=()=>{const{searchPlaceholder:e,searchRender:t,showSearchClear:i,searchPosition:n,searchAutoFocus:r,multiple:s,disabled:a,preventScroll:l}=this.props,c=n===Nb,h=d()({["".concat(Ww,"-input")]:c,["".concat(Uw,"-inputTrigger")]:!c}),{inputValue:u}=this.state,p={value:u,className:h,preventScroll:l,onChange:e=>this.search(e)},g=c?{showClear:i,prefix:o.createElement(Hw,null)}:{autofocus:r,onFocus:e=>this.foundation.handleInputTriggerFocus(),onBlur:e=>this.foundation.handleInputTriggerBlur(),disabled:a},f=d()({["".concat(Ww,"-search-wrapper")]:c,["".concat(Uw,"-triggerSingleSearch-wrapper")]:!c&&!s}),m="function"===typeof t||"boolean"===typeof t;return m&&!t?null:o.createElement("div",{className:f},o.createElement(pe.A,{componentName:"TreeSelect"},(i=>{const n=c?e||i.searchPlaceholder:"";return m?t(Object.assign(Object.assign(Object.assign({},g),p),{placeholder:n})):o.createElement(ce,Object.assign({"aria-label":"Filter TreeSelect item",ref:this.inputRef,placeholder:n},p,g))})))},this.renderEmpty=()=>{const{emptyContent:e}=this.props;return e?o.createElement(k_,{empty:!0,emptyContent:this.props.emptyContent}):o.createElement(pe.A,{componentName:"Tree"},(e=>o.createElement(k_,{empty:!0,emptyContent:e.emptyText})))},this.onNodeLoad=e=>new Promise((t=>this.foundation.setLoadKeys(e,t))),this.onNodeSelect=(e,t)=>{this.foundation.handleNodeSelect(e,t)},this.onNodeCheck=(e,t)=>{this.foundation.handleNodeSelect(e,t)},this.onNodeExpand=(e,t)=>{this.foundation.handleNodeExpand(e,t)},this.getTreeNodeRequiredProps=()=>{const{expandedKeys:e,selectedKeys:t,checkedKeys:i,halfCheckedKeys:n,keyEntities:r,filteredKeys:s}=this.state;return{expandedKeys:e||new Set,selectedKeys:t||[],checkedKeys:i||new Set,halfCheckedKeys:n||new Set,filteredKeys:s||new Set,keyEntities:r}},this.getTreeNodeKey=e=>{const{data:t}=e,{key:i}=t;return i},this.handlePopoverVisibleChange=e=>{this.foundation.handlePopoverVisibleChange(e)},this.afterClose=()=>{this.foundation.handleAfterClose()},this.renderTreeNode=(e,t,i)=>{const{data:n,key:r}=e,s=this.foundation.getTreeNodeProps(r),{showLine:a}=this.props;if(!s)return null;const l=qi()(e,["key","label","disabled","isLeaf","icon","isEnd"]),{keyMaps:c}=this.props,h=n[Fi()(c,"children","children")];return!_()(h)&&(l.children=h),o.createElement(k_,Object.assign({},s,n,l,{data:n,style:i,showLine:a}))},this.itemKey=(e,t)=>{const{visibleOptions:i}=t;return i[e].key},this.renderNodeList=()=>{const{flattenNodes:e,cachedFlattenNodes:t,motionKeys:i,motionType:n,filteredKeys:r}=this.state,{direction:s}=this.context,{virtualize:a,motionExpand:l}=this.props,c="expandedKeys"in this.props;if(!a||dp()(a))return o.createElement(O_,{flattenNodes:e,flattenList:t,motionKeys:l?i:new Set([]),motionType:n,searchTargetIsDeep:c&&l&&dp()(i)&&!dp()(r),onMotionEnd:this.onMotionEnd,renderTreeNode:this.renderTreeNode});const h={visibleOptions:e,renderOption:this.renderTreeNode};return o.createElement(m_,{defaultHeight:a.height,defaultWidth:a.width},(t=>{let{height:i,width:n}=t;return o.createElement(Up,{itemCount:e.length,itemSize:a.itemSize,height:i,width:n,itemKey:this.itemKey,itemData:h,className:"".concat(Ww,"-virtual-list"),style:{direction:s}},Kp)}))},this.renderTree=()=>{const{keyEntities:e,motionKeys:t,motionType:i,inputValue:n,filteredKeys:s,flattenNodes:a,checkedKeys:l,realCheckedKeys:c}=this.state,{loadData:h,filterTreeNode:u,disabled:p,multiple:g,showFilteredOnly:f,motionExpand:m,outerBottomSlot:v,outerTopSlot:y,expandAction:b,labelEllipsis:_,virtualize:x,optionListStyle:S,searchPosition:w,renderLabel:C,renderFullLabel:k,checkRelation:A}=this.props,E=d()("".concat(Ww,"-wrapper")),T=d()("".concat(Ww,"-option-list"),{["".concat(Ww,"-option-list-block")]:!0}),O=Boolean(n)&&!s.size,P=dp()(a)||f&&O,M=w===Nb;return o.createElement(v_.Provider,{value:{loadData:h,treeDisabled:p,motion:m,motionKeys:t,motionType:i,expandAction:b,filterTreeNode:u,keyEntities:e,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeRightClick:r(),onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,renderTreeNode:this.renderTreeNode,multiple:g,showFilteredOnly:f,isSearching:Boolean(n),renderLabel:C,renderFullLabel:k,labelEllipsis:"undefined"===typeof _?x:_}},o.createElement("div",{className:E},y,!y&&u&&M&&this.renderInput(),o.createElement("div",{className:T,role:"tree","aria-multiselectable":!!g,style:S},P?this.renderEmpty():g?o.createElement(Ei,{value:Array.from("related"===A?l:c)},this.renderNodeList()):this.renderNodeList()),v))},this.state={inputTriggerFocus:!1,isOpen:!1,isFocus:!1,rePosKey:0,dropdownMinWidth:null,inputValue:"",keyEntities:{},treeData:[],flattenNodes:[],cachedFlattenNodes:void 0,selectedKeys:[],checkedKeys:new Set,halfCheckedKeys:new Set,realCheckedKeys:new Set([]),disabledKeys:new Set,motionKeys:new Set([]),motionType:"hide",expandedKeys:new Set(e.expandedKeys),filteredKeys:new Set,filteredExpandedKeys:new Set,filteredShownKeys:new Set,prevProps:null,isHovering:!1,cachedKeyValuePairs:{},loadedKeys:new Set,loadingKeys:new Set},this.inputRef=o.createRef(),this.tagInputRef=o.createRef(),this.triggerRef=o.createRef(),this.optionsRef=o.createRef(),this.clickOutsideHandler=null,this.clearInputFlag=!1,this.foundation=new p_(this.adapter),this.treeSelectID=Math.random().toString(36).slice(2),this.onMotionEnd=()=>{this.adapter.rePositionDropdown()}}static getDerivedStateFromProps(e,t){const{prevProps:i,rePosKey:n}=t,{keyMaps:r}=e,s=t=>!i&&t in e||i&&!a()(i[t],e[t]);let o;const l=e.onChangeWithObject;let c=t.keyEntities||{},h=t.cachedKeyValuePairs||{};const d={prevProps:e},u=s("treeData"),p=s("expandedKeys"),g=Boolean(e.filterTreeNode&&t.inputValue&&t.inputValue.length);if(u){o=e.treeData,d.treeData=o;const t=qb(o,r);d.keyEntities=Object.assign({},t.keyEntities),c=d.keyEntities,d.cachedKeyValuePairs=Object.assign({},t.valueEntities),h=d.cachedKeyValuePairs}o&&e.motion&&!a()(Object.keys(d.keyEntities),Object.keys(t.keyEntities))&&i&&e.motion&&(d.motionKeys=new Set([]),d.motionType=null);const f=u&&e.expandAll;if(g){let n;if(o&&(n=function(e){const{showFilteredOnly:t,keyEntities:i,inputValue:n,treeData:r,filterTreeNode:s,filterProps:a,prevExpandedKeys:o,keyMaps:l}=e;let c=[];c=Object.values(i).filter((e=>r_(n,e.data,s,a))).map((e=>e.key));let h=Jb(c,i,!1);if(o.length){const e=o.filter((e=>Boolean(i[e])));h=h.concat(e)}const d=Qb(c,i,!0),u=new Set([...d,...h]);return{flattenNodes:Xb(r,new Set(h),l,t&&u),filteredKeys:new Set(c),filteredExpandedKeys:new Set(h),filteredShownKeys:u}}({treeData:o,inputValue:t.inputValue,filterTreeNode:e.filterTreeNode,filterProps:e.treeNodeFilterProp,showFilteredOnly:e.showFilteredOnly,keyEntities:d.keyEntities,prevExpandedKeys:[...t.filteredExpandedKeys],keyMaps:r}),d.flattenNodes=n.flattenNodes,d.motionKeys=new Set([]),d.filteredKeys=n.filteredKeys,d.filteredShownKeys=n.filteredShownKeys,d.filteredExpandedKeys=n.filteredExpandedKeys),e.expandedKeys){if(d.filteredExpandedKeys=t_(e.expandedKeys,c,e.autoExpandParent||!i),i&&e.motion){const i=t?t.filteredExpandedKeys:new Set([]);if(!o){const n=n_(i,d.filteredExpandedKeys,c);let{motionKeys:r}=n;const{motionType:s}=n;e.showFilteredOnly&&(r=r.filter((e=>t.filteredShownKeys.has(e)))),"hide"===s&&(d.cachedFlattenNodes=I_(t.flattenNodes)),d.motionKeys=new Set(r),d.motionType=s}}d.flattenNodes=Xb(o||t.treeData,d.filteredExpandedKeys||t.filteredExpandedKeys,r,e.showFilteredOnly&&t.filteredShownKeys)}}else{if(p||i&&s("autoExpandParent")){if(d.expandedKeys=t_(e.expandedKeys,c,e.autoExpandParent||!i),i&&e.motion&&!o){const{motionKeys:e,motionType:i}=n_(t.expandedKeys,d.expandedKeys,c);d.motionKeys=new Set(e),d.motionType=i,"hide"===i&&(d.cachedFlattenNodes=I_(t.flattenNodes))}}else!i&&(e.defaultExpandAll||e.expandAll)||f?d.expandedKeys=new Set(Object.keys(c)):!i&&e.defaultExpandedKeys?d.expandedKeys=t_(e.defaultExpandedKeys,c):!i&&e.defaultValue?d.expandedKeys=i_(h_(e.defaultValue,l,r),c,e.multiple,h):!i&&e.value&&(d.expandedKeys=i_(h_(e.value,l,r),c,e.multiple,h));if(d.expandedKeys||delete d.expandedKeys,o||d.expandedKeys){const e=Xb(o||t.treeData,d.expandedKeys||t.expandedKeys,r);d.flattenNodes=e}}const m=e.multiple;if(m){let n;if(s("value")?n=Zb(h_(e.value,l,r),h,m):!i&&e.defaultValue?n=Zb(h_(e.defaultValue,l,r),h,m):o&&(n=e.value?Zb(h_(e.value,l,r)||[],h,m):d_("related"===e.checkRelation?t.checkedKeys:t.realCheckedKeys,c)),n)if("unRelated"===e.checkRelation)d.realCheckedKeys=new Set(n);else if("related"===e.checkRelation){const{checkedKeys:e,halfCheckedKeys:t}=e_(n,c);d.checkedKeys=e,d.halfCheckedKeys=t}}else s("value")?d.selectedKeys=Zb(h_(e.value,l,r),h,m):!i&&e.defaultValue?d.selectedKeys=Zb(h_(e.defaultValue,l,r),h,m):o&&(e.value?d.selectedKeys=Zb(h_(e.value,l,r)||"",h,m):d.selectedKeys=d_(t.selectedKeys,c));return s("loadedKeys")&&(d.loadedKeys=new Set(e.loadedKeys)),(u||s("value"))&&(d.rePosKey=n+1),o&&e.disableStrictly&&"related"===e.checkRelation&&(d.disabledKeys=u_(c,r)),d}get adapter(){var e=this;const t={updateInputValue:e=>{this.setState({inputValue:e})}},i={registerClickOutsideHandler:e=>{const t=t=>{const i=this.optionsRef&&this.optionsRef.current,n=this.triggerRef&&this.triggerRef.current,r=ye.findDOMNode(i),s=t.target,a=t.composedPath&&t.composedPath()||[s];!r||r.contains(s)&&r.contains(s.parentNode)||!n||n.contains(s)||a.includes(n)||a.includes(r)||e(t)};this.clickOutsideHandler=t,document.addEventListener("mousedown",t,!1)},unregisterClickOutsideHandler:()=>{document.removeEventListener("mousedown",this.clickOutsideHandler,!1),this.clickOutsideHandler=null},rePositionDropdown:()=>{let{rePosKey:e}=this.state;e+=1,this.setState({rePosKey:e})}},n={updateState:e=>{this.setState(Object.assign({},e))},notifySelect:(e,t,i)=>{this.props.onSelect&&this.props.onSelect(e,t,i)},notifySearch:(e,t,i)=>{this.props.onSearch&&this.props.onSearch(e,t,i)},cacheFlattenNodes:e=>{this.setState({cachedFlattenNodes:e?I_(this.state.flattenNodes):void 0})},notifyLoad:(e,t)=>{const{onLoad:i}=this.props;G()(i)&&i(e,t)},notifyClear:e=>{this.props.onClear&&this.props.onClear(e)}};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),t),i),n),{updateLoadKeys:(e,t)=>{this.setState((i=>{let{loadedKeys:n,loadingKeys:r}=i;return this.foundation.handleNodeLoad(n,r,e,t)}))},updateState:e=>{this.setState(Object.assign({},e))},openMenu:()=>{this.setState({isOpen:!0},(()=>{this.props.onVisibleChange(!0)}))},closeMenu:e=>{this.setState({isOpen:!1},(()=>{e&&e(),this.props.onVisibleChange(!1)}))},getTriggerWidth:()=>{const e=this.triggerRef.current;return e&&e.getBoundingClientRect().width},setOptionWrapperWidth:e=>{this.setState({dropdownMinWidth:e})},notifyChange:(e,t,i)=>{this.props.onChange&&this.props.onChange(e,t,i)},notifyChangeWithObject:(e,t)=>{this.props.onChange&&this.props.onChange(e,t)},notifyExpand:(e,t)=>{let{expanded:i,node:n}=t;this.props.onExpand&&this.props.onExpand([...e],{expanded:i,node:n}),i&&this.props.loadData&&this.onNodeLoad(n)},notifyFocus:function(){e.props.onFocus&&e.props.onFocus(...arguments)},notifyBlur:function(){e.props.onBlur&&e.props.onBlur(...arguments)},toggleHovering:e=>{this.setState({isHovering:e})},updateInputFocus:e=>{if(e){if(this.inputRef&&this.inputRef.current){const{preventScroll:e}=this.props;this.inputRef.current.focus({preventScroll:e})}this.tagInputRef&&this.tagInputRef.current&&this.tagInputRef.current.focus()}else this.inputRef&&this.inputRef.current&&this.inputRef.current.blur(),this.tagInputRef&&this.tagInputRef.current&&this.tagInputRef.current.blur()},updateIsFocus:e=>{this.setState({isFocus:e})},setClearInputFlag:e=>{this.clearInputFlag=e},getClearInputFlag:()=>this.clearInputFlag})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}render(){const e=this.renderContent(),{motion:t,zIndex:i,mouseLeaveDelay:n,mouseEnterDelay:r,autoAdjustOverflow:s,stopPropagation:a,getPopupContainer:l,dropdownMargin:c,position:h}=this.props,{isOpen:d,rePosKey:u}=this.state,p=this.renderSelection(),g=h||"bottomLeft";return o.createElement(U.A,{stopPropagation:a,getPopupContainer:l,zIndex:i,motion:t,margin:c,ref:this.optionsRef,content:e,visible:d,trigger:"custom",rePosKey:u,position:g,autoAdjustOverflow:s,mouseLeaveDelay:n,mouseEnterDelay:r,onVisibleChange:this.handlePopoverVisibleChange,afterClose:this.afterClose},p)}}Gw.contextType=en.A,Gw.propTypes={"aria-describedby":c().string,"aria-errormessage":c().string,"aria-invalid":c().bool,"aria-labelledby":c().string,"aria-required":c().bool,borderless:c().bool,loadedKeys:c().arrayOf(c().string),loadData:c().func,onLoad:c().func,arrowIcon:c().node,clearIcon:c().node,defaultOpen:c().bool,defaultValue:c().oneOfType([c().string,c().array,c().object]),defaultExpandAll:c().bool,defaultExpandedKeys:c().array,expandAll:c().bool,disabled:c().bool,disableStrictly:c().bool,filterTreeNode:c().oneOfType([c().func,c().bool]),multiple:c().bool,searchPlaceholder:c().string,searchAutoFocus:c().bool,virtualize:c().object,treeNodeFilterProp:c().string,onChange:c().func,onClear:c().func,onSearch:c().func,onSelect:c().func,onExpand:c().func,onChangeWithObject:c().bool,onBlur:c().func,onFocus:c().func,value:c().oneOfType([c().string,c().number,c().array,c().object]),expandedKeys:c().array,autoExpandParent:c().bool,showClear:c().bool,showSearchClear:c().bool,autoAdjustOverflow:c().bool,showFilteredOnly:c().bool,showLine:c().bool,motionExpand:c().bool,emptyContent:c().node,keyMaps:c().object,leafOnly:c().bool,treeData:c().arrayOf(c().shape({key:c().string,value:c().oneOfType([c().string,c().number]),label:c().any})),dropdownClassName:c().string,dropdownStyle:c().object,dropdownMargin:c().oneOfType([c().number,c().object]),motion:c().bool,placeholder:c().string,maxTagCount:c().number,size:c().oneOf(Bb),className:c().string,style:c().object,treeNodeLabelProp:c().string,suffix:c().node,prefix:c().node,insetLabel:c().node,insetLabelId:c().string,zIndex:c().number,getPopupContainer:c().func,dropdownMatchSelectWidth:c().bool,validateStatus:c().oneOf(Hb),mouseEnterDelay:c().number,mouseLeaveDelay:c().number,triggerRender:c().func,stopPropagation:c().oneOfType([c().bool,c().string]),outerBottomSlot:c().node,outerTopSlot:c().node,onVisibleChange:c().func,expandAction:c().oneOf(["click","doubleClick",!1]),searchPosition:c().oneOf([Nb,zb]),clickToHide:c().bool,renderLabel:c().func,renderFullLabel:c().func,labelEllipsis:c().bool,optionListStyle:c().object,searchRender:c().oneOfType([c().func,c().bool]),renderSelectedItem:c().func,checkRelation:c().string,"aria-label":c().string,showRestTagsPopover:c().bool,restTagsPopoverProps:c().object,preventScroll:c().bool,clickTriggerToHide:c().bool},Gw.defaultProps={borderless:!1,searchPosition:Nb,arrowIcon:o.createElement(Nd,null),autoExpandParent:!1,autoAdjustOverflow:!0,stopPropagation:!0,motion:!0,motionExpand:!0,expandAll:!1,zIndex:P.nL.DEFAULT_Z_INDEX,disableStrictly:!1,multiple:!1,filterTreeNode:!1,size:"default",treeNodeFilterProp:"label",onChangeWithObject:!1,treeNodeLabelProp:"label",dropdownMatchSelectWidth:!0,defaultOpen:!1,showSearchClear:!0,showClear:!1,onVisibleChange:r(),expandAction:!1,clickToHide:!0,searchAutoFocus:!1,checkRelation:"related","aria-label":"TreeSelect",showRestTagsPopover:!1,restTagsPopoverProps:{},clickTriggerToHide:!0};const Kw=Gw;var Yw=i(13728),Xw=i.n(Yw);const qw={PREFIX:"".concat(p._,"-cascader"),PREFIX_OPTION:"".concat(p._,"-cascader-option")},Zw=["small","large","default"],Qw=["success","default","error","warning"],$w="click",Jw="hover",eC="leafOnly",tC="autoMergeValue",iC="none",nC="trigger",rC="_SEMI_CASCADER_SPLIT_";function sC(e){return e.join(rC)}function aC(e){const t={};return function(e,t){const i=(n,r,s)=>{const a=n?n.children:e;let o=null;if(n){const e=s?"".concat(s.key).concat(rC).concat(n.value):"".concat(n.value),i=s?function(e,t){return"".concat(e,"-").concat(t)}(s.pos,r):"".concat(r);o={data:Object.assign({},n),ind:r,key:e,pos:i,level:s?s.level+1:0,parentKey:s?s.key:null,path:s?[...s.path,e]:[e],valuePath:s?[...s.valuePath,n.value]:[n.value]},t(o)}a&&a.forEach(((e,t)=>{i(e,t,o)}))};i(null)}(e,(e=>{const{key:i,parentKey:n}=e,r=Object.assign({},e);t[i]=r,r.parent=t[n],r.parent&&(r.parent.children=r.parent.children||[],r.parent.children.push(r))})),t}function oC(e,t){let i;return i=t?eC:e?tC:iC,i}class lC extends k.A{constructor(e){super(Object.assign({},e)),this.updateSearching=e=>{this._adapter.updateStates({isSearching:!1})},this.handleTagRemoveByKey=e=>{var t,i;const{keyEntities:n}=this.getStates(),{disabled:r}=this.getProps();if(r)return;const s=null!==(t=n[e])&&void 0!==t?t:{};!(null===(i=null===s||void 0===s?void 0:s.data)||void 0===i?void 0:i.disable)&&this._handleMultipleSelect(s)},this.handleTagRemoveInTrigger=e=>{const{treeData:t}=this.getStates(),i=function(e,t){const i=e.split("-").map((e=>Number(e)));let n=t,r=[];return i.forEach(((e,t)=>{var i;n=0===t?n[e]:null===(i=null===n||void 0===n?void 0:n.children)||void 0===i?void 0:i[e],r.push(null===n||void 0===n?void 0:n.value)})),sC(r)}(e,t);this.handleTagRemoveByKey(i)}}init(){const e=this.getProp("open")||this.getProp("defaultOpen");this.collectOptions(!0),this._adapter.updateLoadingKeyRefValue(new Set),this._adapter.updateLoadedKeyRefValue(new Set),e&&!this._isDisabled()&&this.open()}destroy(){this._adapter.unregisterClickOutsideHandler()}_isDisabled(){return this.getProp("disabled")}_isFilterable(){return Boolean(this.getProp("filterTreeNode"))}_notifyChange(e){const{onChangeWithObject:t,multiple:i}=this.getProps(),n=t?[]:"value";if(i){const t=[];e.forEach((e=>{const i=this.getItemPropPath(e,n);t.push(i)})),this._adapter.notifyChange(t)}else{const t=_()(e)||!("key"in e)?[]:this.getItemPropPath(e.key,n);this._adapter.notifyChange(t)}}_isLeaf(e){return this.getProp("loadData")?Boolean(e.isLeaf):!e.children||!e.children.length}_clearInput(){this._adapter.updateInputValue("")}_notifyBlur(e){this._adapter.notifyBlur(e)}_notifyFocus(e){this._adapter.notifyFocus(e)}_isOptionDisabled(e,t){return Jb([e],t,!0).some((e=>t[e].data.disabled))}getItemPropPath(e,t,i){const n=i||this.getState("keyEntities"),r=n[e];let s=[];if(r)if(r._notExist)s=r.path;else{const e=r.path;s=Array.isArray(t)?e.map((e=>n[e].data)):e.map((e=>n[e].data[t]))}else;return s}_getCacheValue(e){const{selectedKeys:t}=this.getStates(),i=Array.from(t)[0];let n;if(dp()(e[i]))if(yo()(i,"not-exist-")){const t=i.match(/not-exist-(\S*)/)[1];n=dp()(e[t])?t:e[t].valuePath}else n=i;else n=e[i].valuePath;return n}collectOptions(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{treeData:t,value:i,defaultValue:n}=this.getProps(),r=aC(t);let s;this._adapter.rePositionDropdown(),e?s=n:dp()(r)||(s=this._getCacheValue(r));const a=this._isControlledComponent()?_()(i)?[]:i:s;var o;o=a,bm()(o)||_()(o)?this._adapter.updateStates({keyEntities:r}):this.updateSelectedKey(a,r)}handleValueChange(e){const{keyEntities:t}=this.getStates();this.updateSelectedKey(e,t)}_getClearSelectedKey(e){const t={},{searchPlaceholder:i,placeholder:n,multiple:r}=this.getProps();return t.selectedKeys=new Set([]),t.activeKeys=new Set([]),t.filteredKeys=new Set([]),e&&!r&&(t.inputPlaceHolder=i||n||"",t.inputValue=""),t}updateSelectedKey(e,t){const{changeOnSelect:i,onChangeWithObject:n,multiple:r}=this.getProps(),{activeKeys:s,loading:o,keyEntities:l,selectedKeys:c}=this.getStates(),h=this._adapter.getLoadingKeyRefValue(),d=this._isFilterable(),u=[...s].filter((e=>h.has(e))),p=(g=e,Array.isArray(g)?g:[g]);var g;const f=n&&y()(p[0])?p.map((e=>e.value)):p,m=function(e){return(null===e||void 0===e?void 0:e.length)?Array.isArray(e[0])?e.map((e=>sC(e))):[sC(e)]:[]}(f);let v={};const b=m.length>0?m[0]:void 0,_=b?t[b]:void 0;if(_)if(i||this._isLeaf(_.data)){if(v.selectedKeys=new Set([b]),u.length||(v.activeKeys=new Set(_.path)),d&&!r){const e=this.renderDisplayText(b,t);v.inputPlaceHolder=e}}else a()(m,Array.from(c))&&(v=this._getClearSelectedKey(d));else if(e&&e.length){const e=f[f.length-1],i="not-exist-".concat(e),n={data:{label:e,value:e},key:i,path:f,_notExist:!0};if(v.selectedKeys=new Set([i]),d&&!r){const e=this._defaultRenderText(f);v.inputPlaceHolder=e}t[i]=n}else{if(o)return v.keyEntities=Xw()(l,t),void this._adapter.updateStates(v);v=this._getClearSelectedKey(d)}v.keyEntities=t,this._adapter.updateStates(v)}open(){const e=this._isFilterable(),{multiple:t}=this.getProps();this._adapter.openMenu(),e&&(this._clearInput(),!t&&this.toggle2SearchInput(!0)),this._isControlledComponent()&&this.reCalcActiveKeys(),this._adapter.notifyDropdownVisibleChange(!0),this._adapter.registerClickOutsideHandler((e=>this.close(e)))}reCalcActiveKeys(){const{selectedKeys:e,activeKeys:t,keyEntities:i}=this.getStates(),n=i[[...e][0]];if(!n)return;const r=new Set(n.path);a()(r,t)||this._adapter.updateStates({activeKeys:r})}close(e,t){const{multiple:i}=this.getProps();if(this._adapter.closeMenu(),this._adapter.notifyDropdownVisibleChange(!1),this._adapter.unregisterClickOutsideHandler(),this._isFilterable()){const{selectedKeys:e,isSearching:n}=this.getStates();let r="";t&&!i?r=this.renderDisplayText(t):e.size&&!i&&(r=this.renderDisplayText([...e][0])),this._adapter.updateStates({inputValue:r}),!i&&this.toggle2SearchInput(!1),!i&&this._adapter.updateFocusState(!1)}this._notifyBlur(e)}focus(){const{filterTreeNode:e}=this.getProps();e&&this._adapter.focusInput(),this._adapter.updateFocusState(!0)}blur(){const{filterTreeNode:e}=this.getProps();e&&this._adapter.blurInput(),this._adapter.updateFocusState(!1)}toggle2SearchInput(e){e?this._adapter.toggleInputShow(e,(()=>this.focus())):this._adapter.toggleInputShow(e,(()=>{}))}handleItemClick(e,t){this._isDisabled()||(this.handleSingleSelect(e,t),this._adapter.rePositionDropdown())}handleItemHover(e,t){this._isDisabled()||this.handleShowNextByHover(t)}handleShowNextByHover(e){const{keyEntities:t}=this.getStates(),{data:i,key:n}=e,r=this._isLeaf(i),s=t[n].path;this._adapter.updateStates({activeKeys:new Set(s)}),r||this.notifyIfLoadData(e)}onItemCheckboxClick(e){this._isDisabled()||(this._handleMultipleSelect(e),this._adapter.rePositionDropdown())}handleClick(e){const t=this._isDisabled(),i=this._isFilterable(),{isOpen:n}=this.getStates();t||(n?n&&!i&&this.close(e):(this.open(),this._notifyFocus(e)))}handleSelectionEnterPress(e){(0,gi.A)(e)&&this.handleClick(e)}toggleHoverState(e){this._adapter.toggleHovering(e)}_defaultRenderText(e,t){const i=this.getProp("separator");return t&&"function"===typeof t?t(e):e.join(i)}renderDisplayText(e,t){const i=this.getProp("displayRender"),n=this.getProp("displayProp"),r=this.getItemPropPath(e,n,t);return this._defaultRenderText(r,i)}handleNodeLoad(e){const{data:t,key:i}=e,n=new Set(this._adapter.getLoadingKeyRefValue()),r=new Set(this._adapter.getLoadedKeyRefValue()).add(i),s=new Set([...n]);s.delete(i),this._adapter.notifyOnLoad(r,t),this._adapter.updateLoadingKeyRefValue(s),this._adapter.updateLoadedKeyRefValue(r),this._adapter.updateStates({loadingKeys:s,loadedKeys:r})}notifyIfLoadData(e){const{data:t,key:i}=e;if(this._adapter.updateStates({loading:!1}),!t.isLeaf&&!t.children&&this.getProp("loadData")){const t=this._adapter.getLoadedKeyRefValue(),n=new Set(this._adapter.getLoadingKeyRefValue());if(t.has(i)||n.has(i))return;this._adapter.updateStates({loading:!0});const{keyEntities:r}=this.getStates(),s=this.getItemPropPath(i,[],r),a=n.add(i);this._adapter.updateLoadingKeyRefValue(a),this._adapter.updateStates({loadingKeys:a}),this._adapter.notifyLoadData(s,this.handleNodeLoad.bind(this,e))}}handleSingleSelect(e,t){const{changeOnSelect:i,filterLeafOnly:n,multiple:r,enableLeafClick:s}=this.getProps(),{keyEntities:a,selectedKeys:o,isSearching:l}=this.getStates(),c=this._isFilterable(),{data:h,key:d}=t,u=this._isLeaf(h),p=a[d].path,g=[d],f=d!==[...o][0];if(!u&&!i&&!l)return this._adapter.updateStates({activeKeys:new Set(p)}),void this.notifyIfLoadData(t);if(r)this._adapter.updateStates({activeKeys:new Set(p)}),u&&s&&this.onItemCheckboxClick(t);else if(this._adapter.notifySelect(h.value),f){if(this._notifyChange(t),this.notifyIfLoadData(t),this._isControlledComponent())return this._adapter.updateStates({activeKeys:new Set(p)}),void(u&&this.close(e));this._adapter.updateStates({activeKeys:new Set(p),selectedKeys:new Set(g)});const i=this.renderDisplayText(d);c&&this._adapter.updateInputPlaceHolder(i),(u||!n&&l)&&this.close(e,d)}else this.close(e)}_handleMultipleSelect(e){const{key:t}=e,{checkedKeys:i,keyEntities:n,resolvedCheckedKeys:r}=this.getStates(),{autoMergeValue:s,max:a,disableStrictly:o,leafOnly:l}=this.getProps(),c=i.has(t),h=o?this.calcCheckedStatus(!c,t):!c,{checkedKeys:d,halfCheckedKeys:u}=o?this.calcNonDisabledCheckedKeys(t,h):this.calcCheckedKeys(t,h),p=oC(s,l),g=p===iC,f=new Set(s_(d,n,p===eC)),m=g?d:f;if(S()(a))if(g){if(i.size<d.size&&d.size>a){const e=[];return d.forEach((t=>{e.push(n[t])})),void this._adapter.notifyOnExceed(e)}}else if(r.size<f.size&&f.size>a){const e=[];return f.forEach((t=>{e.push(n[t])})),void this._adapter.notifyOnExceed(e)}this._isControlledComponent()||this._adapter.updateStates({checkedKeys:d,halfCheckedKeys:u,resolvedCheckedKeys:f}),this._notifyChange(m),h&&this._notifySelect(m),this._adapter.updateStates({inputValue:""})}calcNonDisabledCheckedKeys(e,t){const{keyEntities:i,disabledKeys:n}=this.getStates(),r=new Set(this.getState("checkedKeys")),s=s_(Qb([e],i,!1),i,!0),a=s.some((e=>n.has(e)));if(!a)return this.calcCheckedKeys(e,t);const o=s.filter((e=>!n.has(e)));return e_(t?[...o,...r]:Cg()(s_([...r],i,!0),o),i)}calcCheckedStatus(e,t){if(!e)return e;const{checkedKeys:i,keyEntities:n,disabledKeys:r}=this.getStates(),s=s_(Qb([t],n,!1),n,!0),a=s.some((e=>r.has(e)));if(!a)return e;const o=s.filter((e=>!r.has(e))),l=o.every((e=>i.has(e)));return!l}_notifySelect(e){const{keyEntities:t}=this.getStates(),i=[];e.forEach((e=>{var n,r;const s=null===(r=null===(n=t[e])||void 0===n?void 0:n.data)||void 0===r?void 0:r.value;void 0!==s&&i.push(s)}));const n=1===i.length?i[0]:i;this._adapter.notifySelect(n)}calcCheckedKeys(e,t){const{keyEntities:i}=this.getStates(),n=new Set(this.getState("checkedKeys")),r=new Set(this.getState("halfCheckedKeys"));return t?o_(e,i,n,r):l_(e,i,n,r)}handleInputChange(e){this._adapter.updateInputValue(e);const{keyEntities:t}=this.getStates(),{treeNodeFilterProp:i,filterTreeNode:n,filterLeafOnly:r}=this.getProps();let s=[];e&&(s=Object.values(t).filter((t=>{const{key:r,_notExist:s,data:a}=t;if(s)return!1;const o=this.getItemPropPath(r,i);return function(e,t,i,n){if(!i)return!0;let r,s=i;return"boolean"===typeof i?(s=(e,t)=>{const i=e.toLowerCase();return t.toLowerCase().includes(i)},r=n.join("")):r=n.join(),s(e,r,t)}(e,a,n,o)})).filter((e=>n&&!r||this._isLeaf(e))).map((e=>e.key))),this._adapter.updateStates({isSearching:Boolean(e),filteredKeys:new Set(s)}),this._adapter.notifyOnSearch(e)}handleClear(){const{isSearching:e}=this.getStates(),{searchPlaceholder:t,placeholder:i,multiple:n}=this.getProps(),r=this._isFilterable(),s=this._isControlledComponent(),a={};n?(a.isSearching=!1,this._adapter.updateInputValue(""),this._adapter.notifyOnSearch(""),a.checkedKeys=new Set([]),a.halfCheckedKeys=new Set([]),a.selectedKeys=new Set([]),a.activeKeys=new Set([]),a.resolvedCheckedKeys=new Set([]),this._adapter.notifyChange([])):r&&e?(a.isSearching=!1,this._adapter.updateInputValue(""),this._adapter.notifyOnSearch("")):(r&&(a.inputValue="",a.inputPlaceHolder=t||i||"",this._adapter.updateInputValue(""),this._adapter.notifyOnSearch("")),s||(a.selectedKeys=new Set([])),a.activeKeys=new Set([]),a.filteredKeys=new Set([]),this._adapter.notifyChange([])),this._adapter.updateStates(a),this._adapter.notifyClear(),this._adapter.rePositionDropdown()}handleClearEnterPress(e){(0,gi.A)(e)&&this.handleClear()}getRenderData(){const{keyEntities:e,isSearching:t}=this.getStates(),i=this._isFilterable();return t&&i?this.getFilteredData():Object.values(e).filter((e=>null===e.parentKey&&!e._notExist)).sort(((e,t)=>parseInt(e.ind,10)-parseInt(t.ind,10)))}getFilteredData(){const{treeNodeFilterProp:e,filterSorter:t}=this.getProps(),{filteredKeys:i,keyEntities:n,inputValue:r}=this.getStates(),s=[];return[...i].forEach((t=>{const i=n[t];if(!i)return;const r=this.getItemPropPath(t,[]),a=r.map((t=>t[e])),o=this._isOptionDisabled(t,n);s.push({data:i.data,pathData:r,key:t,disabled:o,searchText:a})})),G()(t)&&s.sort(((e,i)=>t(e.pathData,i.pathData,r))),s}handleListScroll(e,t){const{activeKeys:i,keyEntities:n}=this.getStates(),r=[...i][i.size-1],s=r?Fi()(n,[r,"data"],null):null;this._adapter.notifyListScroll(e,{panelIndex:t,activeNode:s})}}const cC=e=>{let{index:t,data:i,style:n}=e;const{visibleOptions:r,renderOption:s}=i;return s(r[t],t,n)},hC=qw.PREFIX_OPTION;class dC extends o.PureComponent{constructor(){super(...arguments),this.onClick=(e,t)=>{const{onItemClick:i}=this.props;t.data.disabled||"disabled"in t&&t.disabled||i(e,t)},this.handleItemEnterPress=(e,t)=>{(0,gi.A)(e)&&this.onClick(e,t)},this.onHover=(e,t)=>{const{showNext:i,onItemHover:n}=this.props;t.data.disabled||i===Jw&&n(e,t)},this.onCheckboxChange=(e,t)=>{const{onItemCheckboxClick:i}=this.props;e.stopPropagation(),e.nativeEvent&&"function"===typeof e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation(),i(t)},this.getItemStatus=e=>{const{activeKeys:t,selectedKeys:i,loadedKeys:n,loadingKeys:r}=this.props,s={active:!1,selected:!1,loading:!1};return t.has(e)&&(s.active=!0),i.has(e)&&(s.selected=!0),r.has(e)&&!n.has(e)&&(s.loading=!0),s},this.renderIcon=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e=>e+(t?" ".concat(hC,"-icon-left"):"");switch(e){case"child":return o.createElement(jo,{className:i("".concat(hC,"-icon ").concat(hC,"-icon-expand"))});case"tick":return o.createElement(ge.A,{className:i("".concat(hC,"-icon ").concat(hC,"-icon-active"))});case"loading":return o.createElement(V,{wrapperClassName:i("".concat(hC,"-spin-icon"))});case"empty":return o.createElement("span",{"aria-hidden":!0,className:i("".concat(hC,"-icon ").concat(hC,"-icon-empty"))});default:return null}},this.highlight=e=>{const t=[],{keyword:i,separator:n}=this.props;return e.forEach(((r,s)=>{"string"===typeof r&&yo()(r,i)?r.split(i).forEach(((e,n)=>{n>0&&t.push(o.createElement("span",{className:"".concat(hC,"-label-highlight"),key:"".concat(n,"-").concat(s)},i)),t.push(e)})):t.push(r),s!==e.length-1&&t.push(n)})),t},this.renderFlattenOptionItem=(e,t,i)=>{var n;const{multiple:r,selectedKeys:s,checkedKeys:a,halfCheckedKeys:l,keyword:c,filterRender:h,virtualize:u}=this.props,{searchText:p,key:g,disabled:f,pathData:m}=e,v=s.has(g),y=d()(hC,{["".concat(hC,"-flatten")]:!h,["".concat(hC,"-disabled")]:f,["".concat(hC,"-select")]:v&&!r}),b=t=>{this.onClick(t,e)},_=t=>this.onCheckboxChange(t,e);if(h){const t=h({className:y,inputValue:c,disabled:f,data:m,checkStatus:{checked:a.has(e.key),halfChecked:l.has(e.key)},selected:v,onClick:b,onCheck:_}),r=u?{key:g,style:Object.assign(Object.assign({},null!==(n=t.props.style)&&void 0!==n?n:{}),i)}:{key:g};return o.cloneElement(t,r)}return o.createElement("li",{role:"menuitem",className:y,style:i,key:g,onClick:b,onKeyPress:t=>this.handleItemEnterPress(t,e)},o.createElement("span",{className:"".concat(hC,"-label")},!r&&this.renderIcon("empty"),r&&o.createElement(Oi,{onChange:_,disabled:f,indeterminate:l.has(e.key),checked:a.has(e.key),className:"".concat(hC,"-label-checkbox")}),this.highlight(p)))},this.renderFlattenOption=e=>{const{virtualize:t}=this.props;return o.createElement("ul",{className:"".concat(hC,"-list"),key:"flatten-list"},t?this.renderVirtualizeList(e):e.map((e=>this.renderFlattenOptionItem(e))))},this.renderVirtualizeList=e=>{var t;const{direction:i}=this.context,{virtualize:n}=this.props;return o.createElement(Up,{height:n.height,itemCount:e.length,itemSize:n.itemSize,itemData:{visibleOptions:e,renderOption:this.renderFlattenOptionItem},width:null!==(t=n.width)&&void 0!==t?t:"100%",style:{direction:i}},cC)}}renderItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{multiple:i,checkedKeys:n,halfCheckedKeys:r}=this.props;let s;const a=t.length;return t.push(o.createElement("ul",{role:"menu",className:"".concat(hC,"-list"),key:e[0].key,onScroll:e=>this.props.onListScroll(e,a)},e.map((e=>{const{data:t,key:a,parentKey:l}=e,{children:c,label:h,disabled:u,isLeaf:p}=t,{active:g,selected:f,loading:m}=this.getItemStatus(a),v=Boolean(c)&&c.length,y=v||this.props.loadData&&!p;g&&v&&(s=e);const b=d()(hC,{["".concat(hC,"-active")]:g&&!f,["".concat(hC,"-select")]:f&&!i,["".concat(hC,"-disabled")]:u}),_=l?{"aria-owns":"cascaderItem-".concat(l)}:{};return o.createElement("li",Object.assign({role:"menuitem",id:"cascaderItem-".concat(a),"aria-expanded":g,"aria-haspopup":Boolean(y),"aria-disabled":u},_,{className:b,key:a,onClick:t=>{this.onClick(t,e)},onKeyPress:t=>this.handleItemEnterPress(t,e),onMouseEnter:t=>{this.onHover(t,e)}}),o.createElement("span",{className:"".concat(hC,"-label")},f&&!i&&this.renderIcon("tick"),!f&&!i&&this.renderIcon("empty"),i&&o.createElement(Oi,{onChange:t=>this.onCheckboxChange(t,e),disabled:u,indeterminate:r.has(e.key),checked:n.has(e.key),className:"".concat(hC,"-label-checkbox")}),o.createElement("span",null,h)),y?this.renderIcon(m?"loading":"child",!0):null)})))),s&&t.concat(this.renderItem(s.children,t)),t}renderEmpty(){const{emptyContent:e}=this.props;return o.createElement(pe.A,{componentName:"Cascader"},(t=>o.createElement("ul",{className:"".concat(hC," ").concat(hC,"-empty"),key:"empty-list"},o.createElement("span",{className:"".concat(hC,"-label"),"x-semi-prop":"emptyContent"},e||t.emptyText))))}render(){const{data:e,searchable:t}=this.props,{direction:i}=this.context,n=!e||!e.length;let r;const s=d()({["".concat(hC,"-lists")]:!0,["".concat(hC,"-lists-rtl")]:"rtl"===i,["".concat(hC,"-lists-empty")]:n});return r=n?this.renderEmpty():t?this.renderFlattenOption(e):this.renderItem(e),o.createElement("div",{className:s},r)}}dC.contextType=en.A,dC.propTypes={data:c().array,emptyContent:c().node,searchable:c().bool,onItemClick:c().func,onItemHover:c().func,multiple:c().bool,showNext:c().oneOf([$w,Jw]),checkedKeys:c().object,halfCheckedKeys:c().object,onItemCheckboxClick:c().func,separator:c().string,keyword:c().string,virtualize:c().object},dC.defaultProps={empty:!1};const uC=qw.PREFIX;class pC extends M.A{constructor(e){super(e),this.search=e=>{this.handleInputChange(e)},this.handleInputChange=e=>{this.foundation.handleInputChange(e)},this.handleTagRemoveInTrigger=e=>{this.foundation.handleTagRemoveInTrigger(e)},this.handleTagClose=(e,t,i)=>{t.preventDefault(),this.foundation.handleTagRemoveByKey(i)},this.renderTagItem=(e,t)=>{const{keyEntities:i,disabledKeys:n}=this.state,{size:r,disabled:s,displayProp:a,displayRender:l,disableStrictly:c}=this.props;if(i[e]){const h=s||i[e].data.disabled||c&&n.has(e),u=d()("".concat(uC,"-selection-tag"),{["".concat(uC,"-selection-tag-disabled")]:h});return G()(l)?l(i[e],t):o.createElement(ep,{size:"default"===r?"large":r,key:"tag-".concat(e,"-").concat(t),color:"white",tagKey:e,className:u,closable:!0,onClose:this.handleTagClose},i[e].data[a])}return null},this.onRemoveInTagInput=e=>{this.foundation.handleTagRemoveByKey(e)},this.handleItemClick=(e,t)=>{this.foundation.handleItemClick(e,t)},this.handleItemHover=(e,t)=>{this.foundation.handleItemHover(e,t)},this.onItemCheckboxClick=e=>{this.foundation.onItemCheckboxClick(e)},this.handleListScroll=(e,t)=>{this.foundation.handleListScroll(e,t)},this.renderContent=()=>{const{inputValue:e,isSearching:t,activeKeys:i,selectedKeys:n,checkedKeys:r,halfCheckedKeys:s,loadedKeys:a,loadingKeys:l}=this.state,{filterTreeNode:c,dropdownClassName:h,dropdownStyle:u,loadData:p,emptyContent:g,separator:f,topSlot:m,bottomSlot:v,showNext:y,multiple:b,filterRender:_,virtualizeInSearch:x}=this.props,S=Boolean(c)&&t,w=d()(h,"".concat(uC,"-popover")),C=this.foundation.getRenderData();return o.createElement("div",{className:w,role:"listbox",style:u},m,o.createElement(dC,{activeKeys:i,selectedKeys:n,separator:f,loadedKeys:a,loadingKeys:l,onItemClick:this.handleItemClick,onItemHover:this.handleItemHover,showNext:y,onItemCheckboxClick:this.onItemCheckboxClick,onListScroll:this.handleListScroll,searchable:S,keyword:e,emptyContent:g,loadData:p,data:C,multiple:b,checkedKeys:r,halfCheckedKeys:s,filterRender:_,virtualize:x}),v)},this.renderPlusN=e=>{const{disabled:t,showRestTagsPopover:i,restTagsPopoverProps:n}=this.props,r=d()("".concat(uC,"-selection-n"),{["".concat(uC,"-selection-n-disabled")]:t}),s=o.createElement("span",{className:r},"+",e.length);return i?o.createElement(U.A,Object.assign({content:e,showArrow:!0,trigger:"hover",position:"top",autoAdjustOverflow:!0},n),s):s},this.renderMultipleTags=()=>{const{autoMergeValue:e,maxTagCount:t}=this.props,{checkedKeys:i,resolvedCheckedKeys:n}=this.state,r=this.mergeType===iC?i:n,s=[],a=[];return[...r].forEach(((e,i)=>{const n=!S()(t)||t>=i+1,r=this.renderTagItem(e,i);n?s.push(r):a.push(r)})),o.createElement(o.Fragment,null,s,!dp()(a)&&this.renderPlusN(a))},this.renderDisplayText=()=>{const{displayProp:e,separator:t,displayRender:i}=this.props,{selectedKeys:n}=this.state;let r="";if(n.size){const s=this.foundation.getItemPropPath([...n][0],e);r=i&&"function"===typeof i?i(s):s.map(((e,i)=>o.createElement(o.Fragment,{key:"".concat(e,"-").concat(i)},i<s.length-1?o.createElement(o.Fragment,null,e,t):e)))}return r},this.renderSelectContent=()=>{const{placeholder:e,filterTreeNode:t,multiple:i,searchPosition:n}=this.props,{checkedKeys:r}=this.state;if(!(Boolean(t)&&n===nC)){if(i)return 0===r.size?o.createElement("span",{className:"".concat(uC,"-selection-placeholder")},e):this.renderMultipleTags();{const t=this.renderDisplayText(),i=d()({["".concat(uC,"-selection-placeholder")]:!t});return o.createElement("span",{className:i},t||e)}}return i?this.renderTagInput():this.renderInput()},this.renderSuffix=()=>{const{suffix:e}=this.props,t=d()({["".concat(uC,"-suffix")]:!0,["".concat(uC,"-suffix-text")]:e&&C()(e),["".concat(uC,"-suffix-icon")]:(0,$.uR)(e)});return o.createElement("div",{className:t,"x-semi-prop":"suffix"},e)},this.renderPrefix=()=>{const{prefix:e,insetLabel:t,insetLabelId:i}=this.props,n=e||t,r=d()({["".concat(uC,"-prefix")]:!0,["".concat(uC,"-inset-label")]:t,["".concat(uC,"-prefix-text")]:n&&C()(n),["".concat(uC,"-prefix-icon")]:(0,$.uR)(n)});return o.createElement("div",{className:r,id:i,"x-semi-prop":"prefix,insetLabel"},n)},this.renderCustomTrigger=()=>{var e;const{disabled:t,triggerRender:i,multiple:n}=this.props,{selectedKeys:r,inputValue:s,inputPlaceHolder:a,resolvedCheckedKeys:l,checkedKeys:c,keyEntities:h}=this.state;let d;return n?this.mergeType===iC?(d=new Set,c.forEach((e=>{var t;d.add(null===(t=h[e])||void 0===t?void 0:t.pos)}))):(d=new Set,l.forEach((e=>{var t;d.add(null===(t=h[e])||void 0===t?void 0:t.pos)}))):d=null===(e=h[[...r][0]])||void 0===e?void 0:e.pos,o.createElement(ue,{value:d,inputValue:s,onChange:this.handleInputChange,onClear:this.handleClear,placeholder:a,disabled:t,triggerRender:i,componentName:"Cascader",componentProps:Object.assign({},this.props),onSearch:this.handleInputChange,onRemove:this.handleTagRemoveInTrigger})},this.handleMouseOver=()=>{this.foundation.toggleHoverState(!0)},this.handleMouseLeave=()=>{this.foundation.toggleHoverState(!1)},this.handleClear=e=>{e&&e.stopPropagation(),this.foundation.handleClear()},this.handleClearEnterPress=e=>{e&&e.stopPropagation(),this.foundation.handleClearEnterPress(e)},this.showClearBtn=()=>{const{showClear:e,disabled:t,multiple:i}=this.props,{selectedKeys:n,isOpen:r,isHovering:s,checkedKeys:a,inputValue:o}=this.state,l=n.size,c=i&&a.size;return e&&(o||l||c)&&!t&&(r||s)},this.renderClearBtn=()=>{const e=d()("".concat(uC,"-clearbtn")),{clearIcon:t}=this.props;return this.showClearBtn()?o.createElement("div",{className:e,onClick:this.handleClear,onKeyPress:this.handleClearEnterPress,role:"button",tabIndex:0},t||o.createElement(ee,null)):null},this.renderArrow=()=>{const{arrowIcon:e}=this.props;return this.showClearBtn()?null:e?o.createElement("div",{className:d()("".concat(uC,"-arrow")),"x-semi-prop":"arrowIcon"},e):null},this.renderSelection=()=>{const{disabled:e,multiple:t,filterTreeNode:i,style:n,size:r,className:s,validateStatus:a,prefix:l,suffix:c,insetLabel:h,triggerRender:u,showClear:p,id:g,borderless:f}=this.props,{isOpen:m,isFocus:v,isInput:y,checkedKeys:b}=this.state,_=Boolean(i),x="function"===typeof u,S=x?d()(s):d()(uC,s,{["".concat(uC,"-borderless")]:f,["".concat(uC,"-focus")]:v||m&&!y,["".concat(uC,"-disabled")]:e,["".concat(uC,"-single")]:!0,["".concat(uC,"-filterable")]:_,["".concat(uC,"-error")]:"error"===a,["".concat(uC,"-warning")]:"warning"===a,["".concat(uC,"-small")]:"small"===r,["".concat(uC,"-large")]:"large"===r,["".concat(uC,"-with-prefix")]:l||h,["".concat(uC,"-with-suffix")]:c}),w=p?{onMouseEnter:()=>this.handleMouseOver(),onMouseLeave:()=>this.handleMouseLeave()}:{},C=d()("".concat(uC,"-selection"),{["".concat(uC,"-selection-multiple")]:t&&!dp()(b)}),k=x?this.renderCustomTrigger():[o.createElement(o.Fragment,{key:"prefix"},l||h?this.renderPrefix():null),o.createElement(o.Fragment,{key:"selection"},o.createElement("div",{className:C},this.renderSelectContent())),o.createElement(o.Fragment,{key:"clearbtn"},this.renderClearBtn()),o.createElement(o.Fragment,{key:"suffix"},c?this.renderSuffix():null),o.createElement(o.Fragment,{key:"arrow"},this.renderArrow())];return o.createElement("div",Object.assign({className:S,style:n,ref:this.triggerRef,onClick:e=>this.foundation.handleClick(e),onKeyPress:e=>this.foundation.handleSelectionEnterPress(e),"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"],id:g},w,{role:"combobox",tabIndex:0},this.getDataAttr(this.props)),k)},this.state={disabledKeys:new Set,isOpen:e.defaultOpen,rePosKey:0,keyEntities:{},selectedKeys:new Set([]),activeKeys:new Set([]),filteredKeys:new Set([]),inputValue:"",isSearching:!1,inputPlaceHolder:e.searchPlaceholder||e.placeholder,prevProps:{},isHovering:!1,checkedKeys:new Set([]),halfCheckedKeys:new Set([]),resolvedCheckedKeys:new Set([]),loadedKeys:new Set,loadingKeys:new Set,loading:!1,showInput:!1},this.options={},this.isEmpty=!1,this.mergeType=oC(e.autoMergeValue,e.leafOnly),this.inputRef=o.createRef(),this.triggerRef=o.createRef(),this.optionsRef=o.createRef(),this.clickOutsideHandler=null,this.foundation=new lC(this.adapter),this.loadingKeysRef=o.createRef(),this.loadedKeysRef=o.createRef()}get adapter(){var e=this;const t={updateInputValue:e=>{this.setState({inputValue:e})},updateInputPlaceHolder:e=>{this.setState({inputPlaceHolder:e})},focusInput:()=>{const{preventScroll:e}=this.props;this.inputRef&&this.inputRef.current&&this.inputRef.current.focus({preventScroll:e})},blurInput:()=>{this.inputRef&&this.inputRef.current&&this.inputRef.current.blur()}},i={registerClickOutsideHandler:e=>{const t=t=>{const i=this.optionsRef&&this.optionsRef.current,n=this.triggerRef&&this.triggerRef.current,r=ye.findDOMNode(i),s=t.target,a=t.composedPath&&t.composedPath()||[s];!r||r.contains(s)&&r.contains(s.parentNode)||!n||n.contains(s)||a.includes(n)||a.includes(r)||e(t)};this.clickOutsideHandler=t,document.addEventListener("mousedown",t,!1)},unregisterClickOutsideHandler:()=>{document.removeEventListener("mousedown",this.clickOutsideHandler,!1)},rePositionDropdown:()=>{let{rePosKey:e}=this.state;e+=1,this.setState({rePosKey:e})}};return Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),t),i),{updateStates:e=>{this.setState(Object.assign({},e))},openMenu:()=>{this.setState({isOpen:!0})},closeMenu:e=>{this.setState({isOpen:!1},(()=>{e&&e()}))},updateSelection:e=>this.setState({selectedKeys:e}),notifyChange:e=>{this.props.onChange&&this.props.onChange(e)},notifySelect:e=>{this.props.onSelect&&this.props.onSelect(e)},notifyOnSearch:e=>{this.props.onSearch&&this.props.onSearch(e)},notifyFocus:function(){e.props.onFocus&&e.props.onFocus(...arguments)},notifyBlur:function(){e.props.onBlur&&e.props.onBlur(...arguments)},notifyDropdownVisibleChange:e=>{this.props.onDropdownVisibleChange(e)},toggleHovering:e=>{this.setState({isHovering:e})},notifyLoadData:(e,t)=>{const{loadData:i}=this.props;i&&new Promise((n=>{i(e).then((()=>{t(),this.setState({loading:!1}),n()}))}))},notifyOnLoad:(e,t)=>{const{onLoad:i}=this.props;i&&i(e,t)},notifyListScroll:(e,t)=>{let{panelIndex:i,activeNode:n}=t;this.props.onListScroll(e,{panelIndex:i,activeNode:n})},notifyOnExceed:e=>this.props.onExceed(e),notifyClear:()=>this.props.onClear(),toggleInputShow:(e,t)=>{this.setState({showInput:e},(()=>{t()}))},updateFocusState:e=>{this.setState({isFocus:e})},updateLoadingKeyRefValue:e=>{this.loadingKeysRef.current=e},getLoadingKeyRefValue:()=>this.loadingKeysRef.current,updateLoadedKeyRefValue:e=>{this.loadedKeysRef.current=e},getLoadedKeyRefValue:()=>this.loadedKeysRef.current})}static getDerivedStateFromProps(e,t){const{multiple:i,value:n,defaultValue:r,onChangeWithObject:s,leafOnly:o,autoMergeValue:l}=e,{prevProps:c}=t;let h=t.keyEntities||{};const d={},u=t=>{const i=dp()(c)&&t in e,n=c&&!a()(c[t],e[t]);return i||n},p=(e,t)=>{let i=[];Array.isArray(e)?i=Array.isArray(e[0])?e:[e]:void 0!==e&&(i=[[e]]);const n=[];i.forEach((e=>{const t=s&&y()(e[0])?e.map((e=>null===e||void 0===e?void 0:e.value)):e;t.length>0&&n.push(t)}));const r=n.reduce(((e,i)=>{const n=sC(i);return t[n]&&e.push(n),e}),[]);return r};if(i){const i=u("treeData")||(()=>{const t=!c&&"treeData"in e,i=c&&c.treeData!==e.treeData;return t||i})(),s=u("value")||dp()(c)&&r;if(i||s){i&&(d.treeData=e.treeData,h=aC(e.treeData),d.keyEntities=h);let a=t.checkedKeys;if(s){a=p(u("value")?n:r,h)}else if(i&&"value"in e){a=p(n,h)}mo()(a)&&(a=[...a]);const c=e_(a,h),g=new Set(c.checkedKeys),f=new Set(c.halfCheckedKeys);e.disableStrictly&&(d.disabledKeys=u_(h));const m=oC(l,o)===eC;d.prevProps=e,d.checkedKeys=g,d.halfCheckedKeys=f,d.resolvedCheckedKeys=new Set(s_(g,h,m))}}return d}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e){if(this.props.multiple)return;let t=!1;a()(e.treeData,this.props.treeData)||(t=!0,this.foundation.collectOptions()),e.value===this.props.value||t||this.foundation.handleValueChange(this.props.value)}renderTagInput(){const{size:e,disabled:t,placeholder:i,maxTagCount:n,showRestTagsPopover:r,restTagsPopoverProps:s}=this.props,{inputValue:a,checkedKeys:l,keyEntities:c,resolvedCheckedKeys:h}=this.state,u=d()("".concat(uC,"-tagInput-wrapper")),p=this.mergeType===iC?l:h;return o.createElement(zw,{className:u,ref:this.inputRef,disabled:t,size:e,value:[...p],showRestTagsPopover:r,restTagsPopoverProps:s,maxTagCount:n,renderTagItem:this.renderTagItem,inputValue:a,onInputChange:this.handleInputChange,onRemove:this.onRemoveInTagInput,placeholder:i,expandRestTagsOnClick:!1})}renderInput(){const{size:e,disabled:t}=this.props,i=d()("".concat(uC,"-input")),{inputValue:n,inputPlaceHolder:r,showInput:s}=this.state,a={disabled:t,value:n,className:i,onChange:this.handleInputChange},l=d()({["".concat(uC,"-search-wrapper")]:!0,["".concat(uC,"-search-wrapper-").concat(e)]:"default"!==e}),c=this.renderDisplayText(),h=d()({["".concat(uC,"-selection-placeholder")]:!c,["".concat(uC,"-selection-text-hide")]:s&&n,["".concat(uC,"-selection-text-inactive")]:s&&!n});return o.createElement("div",{className:l},o.createElement("span",{className:h},c||r),s&&o.createElement(ce,Object.assign({ref:this.inputRef,size:e},a)))}close(){this.foundation.close()}open(){this.foundation.open()}focus(){this.foundation.focus()}blur(){this.foundation.blur()}render(){const{zIndex:e,getPopupContainer:t,autoAdjustOverflow:i,stopPropagation:n,mouseLeaveDelay:r,mouseEnterDelay:s,position:a,motion:l,dropdownMargin:c}=this.props,{isOpen:h,rePosKey:d}=this.state,{direction:u}=this.context,p=this.renderContent(),g=this.renderSelection(),f=null!==a&&void 0!==a?a:"rtl"===u?"bottomRight":"bottomLeft";return o.createElement(U.A,{getPopupContainer:t,zIndex:e,motion:l,margin:c,ref:this.optionsRef,content:p,visible:h,trigger:"custom",rePosKey:d,position:f,autoAdjustOverflow:i,stopPropagation:n,mouseLeaveDelay:r,mouseEnterDelay:s,afterClose:()=>this.foundation.updateSearching(!1)},g)}}pC.__SemiComponentName__="Cascader",pC.contextType=en.A,pC.propTypes={"aria-labelledby":c().string,"aria-invalid":c().bool,"aria-errormessage":c().string,"aria-describedby":c().string,"aria-required":c().bool,"aria-label":c().string,arrowIcon:c().node,borderless:c().bool,clearIcon:c().node,changeOnSelect:c().bool,defaultValue:c().oneOfType([c().string,c().array]),disabled:c().bool,dropdownClassName:c().string,dropdownStyle:c().object,dropdownMargin:c().oneOfType([c().number,c().object]),emptyContent:c().node,motion:c().bool,filterTreeNode:c().oneOfType([c().func,c().bool]),filterLeafOnly:c().bool,placeholder:c().string,searchPlaceholder:c().string,size:c().oneOf(Zw),style:c().object,className:c().string,treeData:c().arrayOf(c().shape({value:c().oneOfType([c().string,c().number]),label:c().any})),treeNodeFilterProp:c().string,suffix:c().node,prefix:c().node,insetLabel:c().node,insetLabelId:c().string,id:c().string,displayProp:c().string,displayRender:c().func,onChange:c().func,onSearch:c().func,onSelect:c().func,onBlur:c().func,onFocus:c().func,children:c().node,getPopupContainer:c().func,zIndex:c().number,value:c().oneOfType([c().string,c().number,c().array]),validateStatus:c().oneOf(Qw),showNext:c().oneOf([$w,Jw]),stopPropagation:c().oneOfType([c().bool,c().string]),showClear:c().bool,defaultOpen:c().bool,autoAdjustOverflow:c().bool,onDropdownVisibleChange:c().func,triggerRender:c().func,onListScroll:c().func,onChangeWithObject:c().bool,bottomSlot:c().node,topSlot:c().node,multiple:c().bool,autoMergeValue:c().bool,maxTagCount:c().number,showRestTagsPopover:c().bool,restTagsPopoverProps:c().object,max:c().number,separator:c().string,onExceed:c().func,onClear:c().func,loadData:c().func,onLoad:c().func,loadedKeys:c().array,disableStrictly:c().bool,leafOnly:c().bool,enableLeafClick:c().bool,preventScroll:c().bool,position:c().string,searchPosition:c().string},pC.defaultProps=(0,$.bQ)(pC.__SemiComponentName__,{borderless:!1,leafOnly:!1,arrowIcon:o.createElement(Nd,null),stopPropagation:!0,motion:!0,defaultOpen:!1,zIndex:P.nL.DEFAULT_Z_INDEX,showClear:!1,autoClearSearchValue:!0,changeOnSelect:!1,disableStrictly:!1,autoMergeValue:!0,multiple:!1,filterTreeNode:!1,filterLeafOnly:!0,showRestTagsPopover:!1,restTagsPopoverProps:{},separator:" / ",size:"default",treeNodeFilterProp:"label",displayProp:"label",treeData:[],showNext:$w,onExceed:r(),onClear:r(),onDropdownVisibleChange:r(),onListScroll:r(),enableLeafClick:!1,"aria-label":"Cascader",searchPosition:nC});const gC=pC,fC={PREFIX:"".concat(p._,"-rating")},mC=["default","small"];const vC=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M10.7525 1.90411C11.1451 0.698628 12.8549 0.698631 13.2475 1.90411L15.2395 8.01946H21.6858C22.9565 8.01946 23.4848 9.64143 22.4568 10.3865L17.2417 14.1659L19.2337 20.2813C19.6263 21.4868 18.2431 22.4892 17.2151 21.7442L12 17.9647L6.78489 21.7442C5.75687 22.4892 4.37368 21.4868 4.76635 20.2813L6.75834 14.1659L1.54323 10.3865C0.515206 9.64142 1.04354 8.01946 2.31425 8.01946H8.76048L10.7525 1.90411Z",fill:"currentColor"}))}),"star");class yC extends k.A{constructor(e){super(Object.assign(Object.assign({},yC.defaultAdapter),e)),this.handleStarFocusVisible=e=>{const{target:t}=e,{count:i}=this.getProps();try{t.matches(":focus-visible")&&this._adapter.setEmptyStarFocusVisible(!0)}catch(n){(0,A.A)(!0,"Warning: [Semi Rating] The current browser does not support the focus-visible")}},this.handleStarBlur=e=>{const{emptyStarFocusVisible:t}=this.getStates();t&&this._adapter.setEmptyStarFocusVisible(!1)}}init(){const{autoFocus:e,disabled:t}=this.getProps();e&&!t&&this._adapter.focus()}_getScroll(e,t){let i=t?e.pageYOffset:e.pageXOffset;const n=t?"scrollTop":"scrollLeft";if("number"!==typeof i){const t=e.document;i=t.documentElement[n],"number"!==typeof i&&(i=t.body[n])}return i}_getClientPosition(e){let t,i;const n=e.ownerDocument,{body:r}=n,s=n&&n.documentElement,a=e.getBoundingClientRect();return t=a.left,i=a.top,t-=s.clientLeft||r.clientLeft||0,i-=s.clientTop||r.clientTop||0,{left:t,top:i}}_getOffsetLeft(e){const t=this._getClientPosition(e),i=e.ownerDocument,n=i.defaultView||i.parentWindow;return t.left+=this._getScroll(n),t.left}getStarValue(e,t){const{allowHalf:i}=this.getProps(),n="rtl"===this._adapter.getContext("direction");let r=e+1;if(i){const i=this._adapter.getStarDOM(e),s=this._getOffsetLeft(i),a=i.clientWidth;(n&&t-s>a/2||!n&&t-s<a/2)&&(r-=.5)}return r}handleHover(e,t){const i=this.getStarValue(t,e.pageX),{clearedValue:n,hoverValue:r}=this.getStates();i!==r&&i!==n&&this._adapter.notifyHoverChange(i,null)}handleMouseLeave(){this._adapter.notifyHoverChange(void 0,null)}handleClick(e,t){const{allowClear:i}=this.getProps(),{value:n}=this.getStates(),r=this.getStarValue(t,e.pageX),s=!!i&&r===n;this._adapter.updateValue(s?0:r),s?this._adapter.notifyHoverChange(void 0,r):this._adapter.clearValue(null)}handleFocus(e){this._adapter.notifyFocus(e)}handleBlur(e){this._adapter.notifyBlur(e)}handleKeyDown(e,t){const{key:i}=e,{count:n,allowHalf:r}=this.getProps(),s="rtl"===this._adapter.getContext("direction"),a=r?.5:1;let o,l;"ArrowRight"===i||"ArrowUp"===i?o=t+(s?-a:a):"ArrowLeft"!==i&&"ArrowDown"!==i||(o=t+(s?a:-a)),l=o>n?0:o<0?n:o,["ArrowRight","ArrowUp","ArrowLeft","ArrowDown"].includes(i)&&(this._adapter.notifyKeyDown(e),this._adapter.updateValue(l),this.changeFocusStar(l,e),e.preventDefault(),this._adapter.notifyHoverChange(void 0,null))}changeFocusStar(e,t){const{count:i,allowHalf:n,preventScroll:r}=this.getProps(),s=Math.ceil(e)-1,a=[...t.currentTarget.childNodes].map((e=>e.childNodes[0].childNodes));s<0?a[i][0].focus({preventScroll:r}):a[s][n?10*e%10===5?0:1:0].focus({preventScroll:r})}}class bC extends k.A{constructor(e){super(Object.assign(Object.assign({},bC.defaultAdapter),e)),this.handleFocusVisible=(e,t)=>{const{target:i}=e;try{i.matches(":focus-visible")&&("first"===t?this._adapter.setFirstStarFocus(!0):this._adapter.setSecondStarFocus(!0))}catch(n){(0,A.A)(!0,"Warning: [Semi Rating] The current browser does not support the focus-visible")}},this.handleBlur=(e,t)=>{const{firstStarFocus:i,secondStarFocus:n}=this.getStates();"first"===t?i&&this._adapter.setFirstStarFocus(!1):n&&this._adapter.setSecondStarFocus(!1)}}}class _C extends M.A{constructor(e){super(e),this.firstStar=null,this.secondStar=null,this.onHover=e=>{const{onHover:t,index:i}=this.props;t(e,i)},this.onClick=e=>{const{onClick:t,index:i}=this.props;t(e,i)},this.onFocus=(e,t)=>{const{onFocus:i}=this.props;i&&i(e),this.foundation.handleFocusVisible(e,t)},this.onBlur=(e,t)=>{const{onBlur:i}=this.props;i&&i(e),this.foundation.handleBlur(e,t)},this.onKeyDown=e=>{const{onClick:t,index:i}=this.props;13===e.keyCode&&t(e,i)},this.starFocus=()=>{const{value:e,index:t,preventScroll:i}=this.props;e-t===.5?this.firstStar.focus({preventScroll:i}):this.secondStar.focus({preventScroll:i})},this.saveFirstStar=e=>{this.firstStar=e},this.saveSecondStar=e=>{this.secondStar=e},this.state={firstStarFocus:!1,secondStarFocus:!1},this.foundation=new bC(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setFirstStarFocus:e=>{this.setState({firstStarFocus:e})},setSecondStarFocus:e=>{this.setState({secondStarFocus:e})}})}render(){const{index:e,prefixCls:t,character:i,count:n,value:r,disabled:s,allowHalf:a,focused:l,size:c,ariaLabelPrefix:h}=this.props,{firstStarFocus:u,secondStarFocus:p}=this.state,g=e+1,f=g-r,m=a&&f<1&&f>0,v=1-f,y=g<=r,b="number"===typeof c,_=d()(t,{["".concat(t,"-half")]:m,["".concat(t,"-full")]:y,["".concat(t,"-").concat(c)]:!b}),x=b?{width:c,height:c,fontSize:c}:{},S=b?"inherit":"small"===c?"default":"extra-large",w=i||o.createElement(vC,{size:S,style:{display:"block"}}),C=e===n,k=d()("".concat(t,"-wrapper"),{["".concat(t,"-disabled")]:s,["".concat(fC.PREFIX,"-focus")]:(u||p)&&0!==r}),A={onClick:s?null:this.onClick,onKeyDown:s?null:this.onKeyDown,onMouseMove:s?null:this.onHover,className:k},E=a?2*n+1:n+1,T={ref:this.saveFirstStar,role:"radio","aria-checked":r===e+.5,"aria-posinset":2*e+1,"aria-setsize":E,"aria-disabled":s,"aria-label":"".concat(e+.5," ").concat(h,"s"),"aria-labelledby":this.props["aria-describedby"],"aria-describedby":this.props["aria-describedby"],className:d()("".concat(t,"-first"),"".concat(fC.PREFIX,"-no-focus")),tabIndex:s||r!==e+.5?-1:0,onFocus:e=>{this.onFocus(e,"first")},onBlur:e=>{this.onBlur(e,"first")}},O=!s&&(r===e+1||C&&0===r)?0:-1,P={ref:this.saveSecondStar,role:"radio","aria-checked":C?0===r:r===e+1,"aria-posinset":a?2*(e+1):e+1,"aria-setsize":E,"aria-disabled":s,"aria-label":"".concat(C?0:e+1," ").concat(h).concat(0===e?"":"s"),"aria-labelledby":this.props["aria-describedby"],"aria-describedby":this.props["aria-describedby"],className:d()("".concat(t,"-second"),"".concat(fC.PREFIX,"-no-focus")),tabIndex:O,onFocus:e=>{this.onFocus(e,"second")},onBlur:e=>{this.onBlur(e,"second")}};return o.createElement("li",{className:_,style:Object.assign({},x),key:e},o.createElement("div",Object.assign({},A),a&&!C&&o.createElement("div",Object.assign({},T,{style:{width:"".concat(100*v,"%")}}),w),o.createElement("div",Object.assign({},P,{"x-semi-prop":"character"}),w)))}}_C.propTypes={value:c().number,index:c().number,prefixCls:c().string,allowHalf:c().bool,onHover:c().func,onClick:c().func,character:c().node,focused:c().bool,disabled:c().bool,count:c().number,ariaLabelPrefix:c().string,size:c().oneOfType([c().oneOf(mC),c().number]),"aria-describedby":c().string,onFocus:c().func,onBlur:c().func,preventScroll:c().bool};var xC=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class SC extends M.A{constructor(e){super(e),this.rate=null,this.onHover=(e,t)=>{this.foundation.handleHover(e,t)},this.onMouseLeave=()=>{this.foundation.handleMouseLeave()},this.onClick=(e,t)=>{this.foundation.handleClick(e,t)},this.onFocus=e=>{this.foundation.handleFocus(e)},this.onBlur=e=>{this.foundation.handleBlur(e)},this.onKeyDown=e=>{const{value:t}=this.state;this.foundation.handleKeyDown(e,t)},this.focus=()=>{const{disabled:e,preventScroll:t}=this.props;e||this.rate.focus({preventScroll:t})},this.blur=()=>{const{disabled:e}=this.props;e||this.rate.blur()},this.saveRef=e=>t=>{this.stars[e]=t},this.saveRate=e=>{this.rate=e},this.handleStarFocusVisible=e=>{this.foundation.handleStarFocusVisible(e)},this.handleStarBlur=e=>{this.foundation.handleStarBlur(e)},this.getAriaLabelPrefix=()=>{if(this.props["aria-label"])return this.props["aria-label"];let e="star";const{character:t}=this.props;return"string"===typeof t&&(e=t),e},this.getItemList=e=>{const{count:t,allowHalf:i,prefixCls:n,disabled:r,character:s,size:a,tooltips:l}=this.props,{value:c,hoverValue:h,focused:d}=this.state;return[...Array(t+1).keys()].map((u=>{const p=o.createElement(_C,{ref:this.saveRef(u),index:u,count:t,prefixCls:"".concat(n,"-star"),allowHalf:i,value:void 0===h?c:h,onClick:r?Pe.l:this.onClick,onHover:r?Pe.l:this.onHover,key:u,disabled:r,character:s,focused:d,size:u===t?0:a,ariaLabelPrefix:e,onFocus:r||t!==u?Pe.l:this.handleStarFocusVisible,onBlur:r||t!==u?Pe.l:this.handleStarBlur});if(l){const e=l[u]?l[u]:"",t=h-1===u;return o.createElement(vh.A,{visible:t,trigger:"custom",content:e,key:"".concat(u,"-").concat(t)},p)}return p}))};const t=void 0===e.value?e.defaultValue:e.value;this.stars={},this.state={value:t,focused:!1,hoverValue:void 0,clearedValue:null,emptyStarFocusVisible:!1},this.foundation=new yC(this.adapter)}static getDerivedStateFromProps(e,t){return"value"in e&&void 0!==e.value?Object.assign(Object.assign({},t),{value:e.value}):t}get adapter(){return Object.assign(Object.assign({},super.adapter),{focus:()=>{const{disabled:e,count:t}=this.props,{value:i}=this.state;if(!e){const e=Math.ceil(i)-1;this.stars[e<0?t:e].starFocus()}},getStarDOM:e=>{const t=this.stars&&this.stars[e];return ye.findDOMNode(t)},notifyHoverChange:(e,t)=>{const{onHoverChange:i}=this.props;this.setState({hoverValue:e,clearedValue:t}),i(e)},updateValue:e=>{const{onChange:t}=this.props;"value"in this.props||this.setState({value:e}),t(e)},clearValue:e=>{this.setState({clearedValue:e})},notifyFocus:e=>{const{onFocus:t}=this.props;this.setState({focused:!0}),t&&t(e)},notifyBlur:e=>{const{onBlur:t}=this.props;this.setState({focused:!1}),t&&t(e)},notifyKeyDown:e=>{const{onKeyDown:t}=this.props;this.setState({focused:!1}),t&&t(e)},setEmptyStarFocusVisible:e=>{this.setState({emptyStarFocusVisible:e})}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}render(){const e=this.props,{style:t,prefixCls:i,disabled:n,className:r,id:s,count:a,tabIndex:l}=e,c=xC(e,["style","prefixCls","disabled","className","id","count","tabIndex"]),{value:h,emptyStarFocusVisible:u}=this.state,p=this.getAriaLabelPrefix(),g="Rating: ".concat(h," of ").concat(a," ").concat(p).concat(1===h?"":"s",","),f=this.getItemList(p),m=d()(i,{["".concat(i,"-disabled")]:n,["".concat(i,"-focus")]:u},r);return o.createElement("ul",Object.assign({"aria-label":g,"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],className:m,style:t,onMouseLeave:n?Pe.l:this.onMouseLeave,tabIndex:n?-1:l,onFocus:n?Pe.l:this.onFocus,onBlur:n?Pe.l:this.onBlur,onKeyDown:n?Pe.l:this.onKeyDown,ref:this.saveRate,id:s},this.getDataAttr(c)),f)}}SC.contextType=en.A,SC.propTypes={"aria-describedby":c().string,"aria-errormessage":c().string,"aria-invalid":c().bool,"aria-label":c().string,"aria-labelledby":c().string,"aria-required":c().bool,disabled:c().bool,value:c().number,defaultValue:c().number,count:c().number,allowHalf:c().bool,allowClear:c().bool,style:c().object,prefixCls:c().string,onChange:c().func,onHoverChange:c().func,className:c().string,character:c().node,tabIndex:c().number,onFocus:c().func,onBlur:c().func,onKeyDown:c().func,autoFocus:c().bool,size:c().oneOfType([c().oneOf(mC),c().number]),tooltips:c().arrayOf(c().string),id:c().string,preventScroll:c().bool},SC.defaultProps={defaultValue:0,count:5,allowHalf:!1,allowClear:!0,style:{},prefixCls:fC.PREFIX,onChange:Pe.l,onHoverChange:Pe.l,tabIndex:-1,size:"default"};const wC="".concat(p._,"-upload"),CC="picture",kC="list",AC={PREFIX:wC,LIST:"".concat(wC,"-list")},EC="auto",TC="custom",OC={FILE_STATUS_UPLOADING:"uploading",FILE_STATUS_SUCCESS:"success",FILE_STATUS_UPLOAD_FAIL:"uploadFail",FILE_STATUS_VALIDATING:"validating",FILE_STATUS_VALID_FAIL:"validateFail",FILE_STATUS_WAIT_UPLOAD:"wait",FILE_LIST_PIC:CC,FILE_LIST_DEFAULT:kC,LIST_TYPE:[CC,kC],imageTypes:["image","webp","png","svg","gif","jpg","jpeg","bmp","dpg"],DRAG_AREA_DEFAULT:"default",DRAG_AREA_LEGAL:"legal",DRAG_AREA_ILLEGAL:"illegal",TRIGGER_AUTO:EC,TRIGGER_CUSTOM:TC,UPLOAD_TRIGGER:[EC,TC],VALIDATE_STATUS:g,PROMPT_POSITION:["left","right","bottom"]},PC=.95;var MC=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(Ey){s(Ey)}}function o(e){try{l(n.throw(e))}catch(Ey){s(Ey)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const IC=1024,RC=1048576;function DC(e){return e<IC?"".concat((e/IC).toFixed(2),"KB"):e>=IC&&e<RC?"".concat((e/IC).toFixed(1),"KB"):e>=RC?"".concat((e/RC).toFixed(1),"MB"):void 0}function LC(e){return MC(this,void 0,void 0,(function*(){const t=[],i=(e,n)=>MC(this,void 0,void 0,(function*(){if(n=n||"",e.path=n,e.isFile)t.push(new Promise(((t,i)=>{e.file((i=>{e.fullPath&&!i.webkitRelativePath&&(Object.defineProperties(i,{webkitRelativePath:{writable:!0}}),i.webkitRelativePath=e.fullPath.replace(/^\//,""),Object.defineProperties(i,{webkitRelativePath:{writable:!1}})),t(i)}),i)})));else if(e.isDirectory){const t=yield function(e){return MC(this,void 0,void 0,(function*(){return new Promise(((t,i)=>{const n=e.createReader();let r=[];!function e(){n.readEntries((i=>{const n=Array.prototype.slice.apply(i);r=r.concat(n),n.length?e():t(r)}),i)}()}))}))}(e);for(let r=0;r<t.length;r++){const s=t[r];yield i(s,"".concat(n).concat(e.name,"/"))}}}));try{const n=e.map((e=>i(e.webkitGetAsEntry())));yield Promise.all(n);return yield Promise.all(t)}catch(n){return console.warn("Captured error while loop directory."),console.error(n),[]}}))}var jC=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(Ey){s(Ey)}}function o(e){try{l(n.throw(e))}catch(Ey){s(Ey)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const{FILE_STATUS_UPLOADING:FC,FILE_STATUS_SUCCESS:BC,FILE_STATUS_UPLOAD_FAIL:NC,FILE_STATUS_VALID_FAIL:zC,FILE_STATUS_WAIT_UPLOAD:HC,DRAG_AREA_DEFAULT:VC,DRAG_AREA_LEGAL:UC,TRIGGER_AUTO:WC}=OC;class GC extends k.A{constructor(e){super(Object.assign({},e))}init(){const{disabled:e,addOnPasting:t}=this.getProps();t&&!e&&this.bindPastingHandler()}destroy(){const{disabled:e,addOnPasting:t}=this.getProps();this.releaseMemory(),e||this.unbindPastingHandler()}getError(e){let{action:t,xhr:i,message:n,fileName:r}=e;const s=i?i.status:0,a=n||"cannot post ".concat(r," to ").concat(t,", xhr status: ").concat(s,"'"),o=new Error(a);return o.status=s,o.method="post",o.url=t,o}getBody(e){if(!e)return;const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(i){return t}}checkFileSize(e){const{size:t}=e,{maxSize:i,minSize:n}=this.getProps();let r=!1;return(t>i*IC||t<n*IC)&&(r=!0),r}handleChange(e){const t=[],{limit:i,transformFile:n,accept:r}=this.getProps(),{fileList:s}=this.getStates();let a=Array.from(e);if("undefined"!==typeof r&&(a=a.filter((e=>{const i=this.checkFileFormat(r,e);return i||t.push(e),i})),0!==t.length&&this._adapter.notifyAcceptInvalid(t),0===a.length))return;a=a.map((e=>(n&&(e=n(e)),e.uid||(e.uid=(0,Ie.i7)()),this.checkFileSize(e)&&(e._sizeInvalid=!0,e.status=zC,this._adapter.notifySizeError(e,s)),e)));const o=s.length+a.length;if("undefined"!==typeof i&&o>i){if(this._adapter.notifyExceed(a),1===i)return a=a.slice(-1),this._adapter.notifyFileSelect(a),this._adapter.resetInput(),void this.replaceFileList(a);const e=i-s.length;a=a.slice(0,e)}this._adapter.notifyFileSelect(a),this._adapter.resetInput(),this.addFilesToList(a)}handleReplaceChange(e){if(0===e.length)return;const{transformFile:t,uploadTrigger:i,accept:n}=this.getProps(),{replaceIdx:r,fileList:s}=this.getStates();let a=Array.from(e).pop();if("undefined"!==typeof n&&!this.checkFileFormat(n,a))return void this._adapter.notifyAcceptInvalid([a]);t&&(a=t(a)),a.uid||(a.uid=(0,Ie.i7)()),this.checkFileSize(a)&&(a._sizeInvalid=!0,a.status=zC,this._adapter.notifySizeError(a,s)),this._adapter.notifyFileSelect([a]);const o=this.buildFileItem(a,i),l=[...s];l.splice(r,1,o),this._adapter.notifyChange({currentFile:o,fileList:l}),this._adapter.updateFileList(l,(()=>{this._adapter.resetReplaceInput(),o._sizeInvalid||this.upload(o)}))}buildFileItem(e,t){const{_sizeInvalid:i,status:n}=e;try{delete e._sizeInvalid,delete e.status}catch(s){}const r={status:n||(t===WC?FC:HC),name:e.name,size:DC(e.size),uid:e.uid,percent:0,fileInstance:e,url:this._createURL(e)};return i&&(r._sizeInvalid=!0),this.isImage(e)&&(r.preview=!0),r}replaceFileList(e){const{uploadTrigger:t}=this.getProps(),i=e.map((e=>this.buildFileItem(e,t)));this._adapter.notifyChange({fileList:i,currentFile:i[0]}),this._adapter.updateFileList(i,(()=>{t===WC&&this.startUpload(i)}))}addFilesToList(e){const t=this.getState("fileList").slice(),{uploadTrigger:i}=this.getProps(),n=e.map((e=>this.buildFileItem(e,i)));n.forEach((e=>{const i=t.findIndex((t=>t.uid===e.uid));-1!==i?t[i]=e:(t.push(e),this._adapter.notifyChange({fileList:t,currentFile:e}))})),this._adapter.updateFileList(t,(()=>{i===WC&&this.startUpload(n)}))}insertFileToList(e,t){const{limit:i,transformFile:n,accept:r,uploadTrigger:s}=this.getProps(),{fileList:a}=this.getStates(),o=[];let l=Array.from(e);if("undefined"!==typeof r&&(l=l.filter((e=>{const t=this.checkFileFormat(r,e);return t||o.push(e),t})),0!==o.length&&this._adapter.notifyAcceptInvalid(o),0===l.length))return;l=l.map((e=>(e.uid||(e.uid=(0,Ie.i7)()),this.checkFileSize(e)&&(e._sizeInvalid=!0,e.status=zC,this._adapter.notifySizeError(e,a)),n&&(e=n(e)),e)));const c=a.length+l.length;if("undefined"!==typeof i&&c>i){if(1===i)return l=l.slice(-1),this._adapter.notifyFileSelect(l),this._adapter.resetInput(),void this.replaceFileList(l);const e=i-a.length;l=l.slice(0,e),this._adapter.notifyExceed(l)}const h=l.map((e=>this.buildFileItem(e,s))),d=a.slice();"undefined"!==typeof t?d.splice(t,0,...h):d.push(...h),this._adapter.notifyFileSelect(l),this._adapter.notifyChange({fileList:d,currentFile:null}),this._adapter.updateFileList(d,(()=>{s===WC&&this.startUpload(h)}))}manualUpload(){const e=this.getState("fileList").filter((e=>e.status===HC));this.startUpload(e)}startUpload(e){e.forEach((e=>{e._sizeInvalid||this.upload(e)}))}upload(e){const{beforeUpload:t}=this.getProps();if("undefined"!==typeof t){if("function"===typeof t){const{fileList:t}=this.getStates(),i=this._adapter.notifyBeforeUpload({file:e,fileList:t});switch(!0){case!0===i:this.post(e);break;case!1===i:{const t={shouldUpload:!1,status:OC.FILE_STATUS_VALID_FAIL};this.handleBeforeUploadResultInObject(t,e);break}case i&&Fc(i):Promise.resolve(i).then((t=>{let i={shouldUpload:!0};"Object"===Object.prototype.toString.call(t).slice(8,-1)&&(i=Object.assign(Object.assign({},i),t)),this.handleBeforeUploadResultInObject(i,e)}),(t=>{let i={shouldUpload:!1,status:OC.FILE_STATUS_VALID_FAIL};"Object"===Object.prototype.toString.call(t).slice(8,-1)&&(i=Object.assign(Object.assign({},i),t)),this.handleBeforeUploadResultInObject(i,e)}));break;case"object"===typeof i:this.handleBeforeUploadResultInObject(i,e)}}}else this.post(e)}handleBeforeUploadResultInObject(e,t){const{shouldUpload:i,status:n,autoRemove:r,validateMessage:s,fileInstance:a}=e;let o=this.getState("fileList").slice();if(r)o=o.filter((e=>e.uid!==t.uid));else{const e=this._getFileIndex(t,o);if(e<0)return;n&&(o[e].status=n),s&&(o[e].validateMessage=s),a&&(a.uid=t.uid,o[e].fileInstance=a,o[e].size=DC(a.size),o[e].name=a.name,o[e].url=this._createURL(a)),o[e].shouldUpload=i}this._adapter.updateFileList(o),this._adapter.notifyChange({fileList:o,currentFile:t}),i&&this.post(t)}post(e){const{fileInstance:t}=e,i=this.getProps();if("undefined"===typeof XMLHttpRequest)return;const n=new XMLHttpRequest,r=new FormData,{action:s}=i;let{data:a}=i;a&&("function"===typeof a&&(a=a(t)),Object.keys(a).forEach((e=>{r.append(e,a[e])})));const o=i.name||i.fileName||t.name;if(i.customRequest)return i.customRequest({fileName:o,data:a,file:e,fileInstance:t,onProgress:e=>this.handleProgress({e:e,fileInstance:t}),onError:(e,i)=>this.handleError({e:i,xhr:e,fileInstance:t}),onSuccess:(e,i)=>this.handleSuccess({response:e,fileInstance:t,e:i,isCustomRequest:!0}),withCredentials:i.withCredentials,action:i.action});r.append(o,t),n.open("post",s,!0),i.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0),n.upload&&(n.upload.onprogress=e=>this.handleProgress({e:e,fileInstance:t})),n.onload=e=>this.handleOnLoad({e:e,xhr:n,fileInstance:t}),n.onerror=e=>this.handleError({e:e,xhr:n,fileInstance:t});let l=i.headers||{};"function"===typeof l&&(l=l(t));for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&null!==l[c]&&n.setRequestHeader(c,l[c]);n.send(r)}handleProgress(e){let{e:t,fileInstance:i}=e;const{fileList:n}=this.getStates(),r=n.slice();let s=0;t.total>0&&(s=Number((t.loaded/t.total*100*PC).toFixed(0))||0);const a=this._getFileIndex(i,r);a<0||(r[a].percent=s,r[a].status=FC,this._adapter.notifyProgress(s,i,r),this._adapter.updateFileList(r),this._adapter.notifyChange({fileList:r,currentFile:r[a]}))}handleOnLoad(e){let{e:t,xhr:i,fileInstance:n}=e;const{fileList:r}=this.getStates(),s=this._getFileIndex(n,r);s<0||(i.status<200||i.status>=300?this.handleError({e:t,xhr:i,fileInstance:n}):this.handleSuccess({e:t,xhr:i,fileInstance:n,index:s}))}handleSuccess(e){let{e:t,fileInstance:i,isCustomRequest:n=!1,xhr:r,response:s}=e;const{fileList:a}=this.getStates();let o=null;const l=this._getFileIndex(i,a);if(l<0)return;o=n?s:this.getBody(r);const c=a.slice(),{afterUpload:h}=this.getProps();if(c[l].status=BC,c[l].percent=100,this._adapter.notifyProgress(100,i,c),c[l].response=o,t&&(c[l].event=t),h&&"function"===typeof h){const{autoRemove:e,status:t,validateMessage:i,name:n}=this._adapter.notifyAfterUpload({response:o,file:c[l],fileList:c})||{};t&&(c[l].status=t),i&&(c[l].validateMessage=i),n&&(c[l].name=n),e&&c.splice(l,1)}this._adapter.notifySuccess(o,i,c),this._adapter.notifyChange({fileList:c,currentFile:c[l]}),this._adapter.updateFileList(c)}_getFileIndex(e,t){return t.findIndex((t=>t.uid===e.uid))}handleRemove(e){const{disabled:t}=this.getProps();if(t)return;const{fileList:i}=this.getStates();Promise.resolve(this._adapter.notifyBeforeRemove(e,i)).then((t=>{if(!1===t)return;const n=i.slice(),r=this._getFileIndex(e,i);r<0||(n.splice(r,1),this._adapter.notifyRemove(e.fileInstance,n,e),this._adapter.updateFileList(n),this._adapter.notifyChange({fileList:n,currentFile:e}))}))}handleError(e){let{e:t,xhr:i,fileInstance:n}=e;const{fileList:r}=this.getStates(),s=this._getFileIndex(n,r);if(s<0)return;const{action:a}=this.getProps(),o=r.slice(),l=this.getError({action:a,xhr:i,fileName:n.name});o[s].status=NC,o[s].response=l,o[s].event=t,this._adapter.notifyError(l,n,o,i),this._adapter.updateFileList(o),this._adapter.notifyChange({currentFile:o[s],fileList:o})}handleClear(){const{disabled:e}=this.getProps(),{fileList:t}=this.getStates();e||Promise.resolve(this._adapter.notifyBeforeClear(t)).then((e=>{!1!==e&&(this._adapter.updateFileList([]),this._adapter.notifyClear(),this._adapter.notifyChange({fileList:[]}))})).catch((e=>{}))}_createURL(e){const t=URL.createObjectURL(e),{localUrls:i}=this.getStates(),n=i.slice();return n.push(t),this._adapter.updateLocalUrls(n),t}releaseMemory(){const{localUrls:e}=this.getStates();e.forEach((e=>{this._releaseBlob(e)}))}_releaseBlob(e){try{URL.revokeObjectURL(e)}catch(t){console.log(t)}}isImage(e){return/(webp|svg|png|gif|jpg|jpeg|bmp|dpg)$/i.test(e.type)}isMultiple(){return Boolean(this.getProp("multiple"))}handleDragEnter(e){e.preventDefault(),e.stopPropagation(),this._dragEnterTarget=e.currentTarget;const{disabled:t}=this.getProps();t||this._adapter.updateDragAreaStatus(UC)}handleDirectoryDrop(e){return jC(this,void 0,void 0,(function*(){const t=this.getState("fileList").slice(),i=[].slice.call(e.dataTransfer.items),n=yield LC(i);this.handleChange(n),this._adapter.updateDragAreaStatus(VC),this._adapter.notifyDrop(e,n,t)}))}handleDrop(e){e.preventDefault(),e.stopPropagation();const{disabled:t,directory:i}=this.getProps(),n=this.getState("fileList").slice();if(!t){if(i)return void this.handleDirectoryDrop(e);const t=Array.from(e.dataTransfer.files);this.handleChange(t),this._adapter.updateDragAreaStatus(VC),this._adapter.notifyDrop(e,t,n)}}handleDragOver(e){e.preventDefault(),e.stopPropagation()}handleDragLeave(e){e.preventDefault(),e.stopPropagation(),this._dragEnterTarget===e.target&&this._adapter.updateDragAreaStatus(VC)}checkFileFormat(e,t){const i=e.split(",").map((e=>e.trim())).filter((e=>e)),n=t.type||"",r=n.replace(/\/.*$/,"");return i.some((e=>{if("."===e.charAt(0)){const n=t.name||"",r=e.split(".").pop().toLowerCase();return i=n.toLowerCase(),s=r,-1!==i.indexOf(s,i.length-s.length)}var i,s;if(/\/\*$/.test(e)){const t=e.replace(/\/.*$/,"");return r===t}return!!/^[^\/]+\/[^\/]+$/.test(e)&&n===e}))}retry(e){const{onRetry:t}=this.getProps();t&&"function"===typeof t&&t(e),this.post(e)}handlePreviewClick(e){this._adapter.notifyPreviewClick(e)}readFileFromClipboard(e){for(const t of e)for(const e of t.types)e.startsWith("image")&&t.getType(e).then((e=>e.arrayBuffer())).then((t=>{const i=e.split("/")[1],n=new File([t],"upload.".concat(i),{type:e});this.handleChange([n])}))}handlePasting(e){const t=this._adapter.isMac()?e.metaKey:e.ctrlKey,{addOnPasting:i}=this.getProps();if(i&&t&&"KeyV"===e.code&&e.target===document.body){const e="clipboard-read";navigator.permissions.query({name:e}).then((e=>{"granted"===e.state||"prompt"===e.state?navigator.clipboard.read().then((e=>{this.readFileFromClipboard(e)})):this._adapter.notifyPastingError(e)})).catch((e=>{this._adapter.notifyPastingError(e)}))}}bindPastingHandler(){this._adapter.registerPastingHandler((e=>this.handlePasting(e)))}unbindPastingHandler(){this._adapter.unRegisterPastingHandler()}}const KC=GC;class YC extends k.A{constructor(e){super(Object.assign({},e))}handleImageError(e){this._adapter.updateFallbackPreview(!0)}}const XC=YC;const qC=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.49993 11.9998C4.49993 7.85775 7.85775 4.49993 11.9998 4.49993C14.6403 4.49993 16.9645 5.86506 18.3012 7.9305L16.2939 7.52902C15.4815 7.36656 14.6913 7.89337 14.5288 8.7057C14.3664 9.51803 14.8932 10.3083 15.7055 10.4707L20.7055 11.4707C21.4643 11.6225 22.214 11.1721 22.4363 10.4309L23.9363 5.43095C24.1744 4.63747 23.7241 3.80126 22.9307 3.56321C22.1372 3.32517 21.301 3.77543 21.0629 4.56891L20.6287 6.01635C18.7332 3.28781 15.5765 1.49998 11.9998 1.49998C6.20092 1.49998 1.49998 6.20092 1.49998 11.9998C1.49998 17.7987 6.20092 22.4997 11.9998 22.4997C16.5739 22.4997 20.4611 19.5757 21.9018 15.4996C22.1779 14.7186 21.7685 13.8616 20.9874 13.5855C20.2064 13.3095 19.3494 13.7189 19.0733 14.4999C18.0431 17.4149 15.263 19.4997 11.9998 19.4997C7.85775 19.4997 4.49993 16.1419 4.49993 11.9998Z",fill:"currentColor"}))}),"refresh"),ZC=AC.PREFIX,QC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.createElement("svg",Object.assign({focusable:!1,"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("circle",{cx:"7.99992",cy:"7.99992",r:"6.66667",fill:"white"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.3332 8.00008C15.3332 12.0502 12.0499 15.3334 7.99984 15.3334C3.94975 15.3334 0.666504 12.0502 0.666504 8.00008C0.666504 3.94999 3.94975 0.666748 7.99984 0.666748C12.0499 0.666748 15.3332 3.94999 15.3332 8.00008ZM8.99984 11.6667C8.99984 11.1145 8.55212 10.6667 7.99984 10.6667C7.44755 10.6667 6.99984 11.1145 6.99984 11.6667C6.99984 12.219 7.44755 12.6667 7.99984 12.6667C8.55212 12.6667 8.99984 12.219 8.99984 11.6667ZM7.99984 3.33341C7.27573 3.33341 6.7003 3.94171 6.74046 4.66469L6.94437 8.33495C6.97549 8.89513 7.4388 9.33341 7.99984 9.33341C8.56087 9.33341 9.02419 8.89513 9.05531 8.33495L9.25921 4.66469C9.29938 3.94171 8.72394 3.33341 7.99984 3.33341Z",fill:"#F93920"}))},$C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.createElement("svg",Object.assign({focusable:!1,"aria-hidden":!0,width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("circle",{cx:"14",cy:"14",r:"14",fill:"#16161A",fillOpacity:"0.6"}),o.createElement("path",{d:"M9 10.25V18.25L10.25 13.25H17.875V11.75C17.875 11.4739 17.6511 11.25 17.375 11.25H14L12.75 9.75H9.5C9.22386 9.75 9 9.97386 9 10.25Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("path",{d:"M18 18.25L19 13.25H10.2031L9 18.25H18Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}))},JC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.createElement("svg",Object.assign({focusable:!1,"aria-hidden":!0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M6 17V7.58824C6 7.26336 6.26863 7 6.6 7H10.5L12 8.76471H16.05C16.3814 8.76471 16.65 9.02806 16.65 9.35294V11.1176H7.5L6 17ZM6 17L7.44375 11.1176H18L16.8 17L6 17Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};class ek extends M.A{constructor(e){super(e),this.state={fallbackPreview:!1},this.foundation=new XC(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateFallbackPreview:e=>this.setState({fallbackPreview:e})})}transSize(e){return"number"===typeof e?DC(e):e}renderValidateMessage(){const{status:e,validateMessage:t}=this.props;let i=null;switch(!0){case"string"===typeof t&&e===OC.FILE_STATUS_VALIDATING:i=o.createElement(o.Fragment,null,o.createElement(V,{size:"small",wrapperClassName:"".concat(ZC,"-file-card-icon-loading")}),t);break;case"string"===typeof t:i=o.createElement(o.Fragment,null,o.createElement(vt,{className:"".concat(ZC,"-file-card-icon-error")}),t);break;case By(t):i=t}return i}renderPicValidateMsg(){const{status:e,validateMessage:t}=this.props;let i=null;switch(!0){case t&&e===OC.FILE_STATUS_VALIDATING:i=o.createElement(V,{size:"small",wrapperClassName:"".concat(ZC,"-picture-file-card-icon-loading")});break;case t&&(e===OC.FILE_STATUS_VALID_FAIL||e===OC.FILE_STATUS_UPLOAD_FAIL):i=o.createElement("div",{className:"".concat(ZC,"-picture-file-card-icon-error")},o.createElement(QC,null))}return i?o.createElement(vh.A,{content:t,trigger:"hover",position:"bottom"},i):null}renderPic(e){const{fallbackPreview:t}=this.state,{url:i,percent:n,status:r,disabled:s,style:a,onPreviewClick:l,showPicInfo:c,renderPicInfo:h,renderPicPreviewIcon:u,renderThumbnail:p,name:g,index:f,picHeight:m,picWidth:v}=this.props,y=r===OC.FILE_STATUS_UPLOADING&&100!==n,b=r===OC.FILE_STATUS_UPLOAD_FAIL&&this.props.showRetry,_=r===OC.FILE_STATUS_SUCCESS&&this.props.showReplace,x=r===OC.FILE_STATUS_SUCCESS&&!this.props.showReplace,S=d()({["".concat(ZC,"-picture-file-card")]:!0,["".concat(ZC,"-picture-file-card-preview-fallback")]:t,["".concat(ZC,"-picture-file-card-disabled")]:s,["".concat(ZC,"-picture-file-card-show-pointer")]:"undefined"!==typeof l,["".concat(ZC,"-picture-file-card-error")]:r===OC.FILE_STATUS_UPLOAD_FAIL,["".concat(ZC,"-picture-file-card-uploading")]:y}),w=o.createElement("div",{role:"button",tabIndex:0,className:"".concat(ZC,"-picture-file-card-retry"),onClick:e=>this.onRetry(e)},o.createElement(qC,{className:"".concat(ZC,"-picture-file-card-icon-retry")})),C=o.createElement(vh.A,{trigger:"hover",position:"top",content:e.replace,showArrow:!1,spacing:4},o.createElement("div",{role:"button",tabIndex:0,className:"".concat(ZC,"-picture-file-card-replace"),onClick:e=>this.onReplace(e)},o.createElement($C,{className:"".concat(ZC,"-picture-file-card-icon-replace")}))),k=o.createElement("div",{className:"".concat(ZC,"-picture-file-card-preview")},"function"===typeof u?u(this.props):null),A=o.createElement("div",{role:"button",tabIndex:0,className:"".concat(ZC,"-picture-file-card-close"),onClick:e=>this.onRemove(e)},o.createElement(ee,{className:"".concat(ZC,"-picture-file-card-icon-close")})),E="function"===typeof h?h(this.props):o.createElement("div",{className:"".concat(ZC,"-picture-file-card-pic-info")},f+1);let T={},O=a?Object.assign({},a):{};m&&(O.height=m,T.height=m),v&&(O.width=v,T.width=v);const P=t?o.createElement(y_,{size:"large"}):o.createElement("img",{src:i,alt:g,onError:e=>this.foundation.handleImageError(e),style:T}),M="function"===typeof p?p(this.props):P;return o.createElement("div",{role:"listitem",className:S,style:O,onClick:l},M,y?o.createElement(Nu,{percent:n,type:"circle",size:"small",orbitStroke:"#FFF","aria-label":"uploading file progress"}):null,b?w:null,_&&C,x&&k,c&&E,!s&&A,this.renderPicValidateMsg())}renderFile(e){const{name:t,size:i,percent:n,url:r,showRetry:s,showReplace:a,preview:l,previewFile:c,status:h,style:u,onPreviewClick:p,renderFileOperation:g}=this.props,{fallbackPreview:f}=this.state,m=d()({["".concat(ZC,"-file-card")]:!0,["".concat(ZC,"-file-card-fail")]:h===OC.FILE_STATUS_VALID_FAIL||h===OC.FILE_STATUS_UPLOAD_FAIL,["".concat(ZC,"-file-card-show-pointer")]:"undefined"!==typeof p}),v=d()({["".concat(ZC,"-file-card-preview")]:!0,["".concat(ZC,"-file-card-preview-placeholder")]:!l||c||f}),y="".concat(ZC,"-file-card-info"),b="".concat(ZC,"-file-card-close"),_="".concat(ZC,"-file-card-replace"),x=!(100===n||"undefined"===typeof n)&&h===OC.FILE_STATUS_UPLOADING,S=h===OC.FILE_STATUS_UPLOAD_FAIL&&s,w=h===OC.FILE_STATUS_SUCCESS&&a,C=this.transSize(i);let k=l&&!f?o.createElement("img",{src:r,alt:t,onError:e=>this.foundation.handleImageError(e)}):o.createElement(y_,{size:"large"});c&&(k=c(this.props));const A="function"===typeof g?g(this.props):o.createElement(St,{onClick:e=>this.onRemove(e),type:"tertiary",icon:o.createElement(pt,null),theme:"borderless",size:"small",className:b});return o.createElement("div",{role:"listitem",className:m,style:u,onClick:p},o.createElement("div",{className:v},k),o.createElement("div",{className:"".concat(y,"-main")},o.createElement("div",{className:"".concat(y,"-main-text")},o.createElement("span",{className:"".concat(y,"-name")},t),o.createElement("span",null,o.createElement("span",{className:"".concat(y,"-size")},C),w&&o.createElement(vh.A,{trigger:"hover",position:"top",showArrow:!1,content:e.replace},o.createElement(St,{onClick:e=>this.onReplace(e),type:"tertiary",theme:"borderless",size:"small",icon:o.createElement(JC,null),className:_})))),x?o.createElement(Nu,{percent:n,style:{width:"100%"},"aria-label":"uploading file progress"}):null,o.createElement("div",{className:"".concat(y,"-main-control")},o.createElement("span",{className:"".concat(y,"-validate-message")},this.renderValidateMessage()),S?o.createElement("span",{role:"button",tabIndex:0,className:"".concat(y,"-retry"),onClick:e=>this.onRetry(e)},e.retry):null)),A)}onRemove(e){e.stopPropagation(),this.props.onRemove()}onReplace(e){e.stopPropagation(),this.props.onReplace()}onRetry(e){e.stopPropagation(),this.props.onRetry()}render(){const{listType:e}=this.props;return e===OC.FILE_LIST_PIC?o.createElement(pe.A,{componentName:"Upload"},(e=>this.renderPic(e))):e===OC.FILE_LIST_DEFAULT?o.createElement(pe.A,{componentName:"Upload"},(e=>this.renderFile(e))):null}}ek.propTypes={className:c().string,disabled:c().bool,listType:c().string,name:c().string,onPreviewClick:c().func,onRemove:c().func,onReplace:c().func,onRetry:c().func,percent:c().number,preview:c().bool,previewFile:c().func,picWidth:c().oneOfType([c().number,c().string]),picHeight:c().oneOfType([c().number,c().string]),showReplace:c().bool,showRetry:c().bool,size:c().oneOfType([c().number,c().string]),status:c().string,style:c().object,url:c().string,validateMessage:c().node,index:c().number},ek.defaultProps={listType:OC.FILE_LIST_DEFAULT,name:"",onRemove:()=>{},onRetry:()=>{},preview:!1,size:""};const tk=ek;const ik=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.8395 8.05827C17.1837 5.16226 14.5944 3 11.5 3C7.91015 3 5 5.91015 5 9.5C5 10.0204 5.06115 10.5264 5.17665 11.0114C2.84229 11.1772 1 13.1234 1 15.5C1 17.9853 3.01469 20 5.49995 20H17C20.3137 20 23 17.3137 23 14C23 10.9712 20.7558 8.46659 17.8395 8.05827ZM12.3201 8.26674C12.1347 8.11222 11.8653 8.11222 11.6799 8.26674L6.53047 12.5579C6.35084 12.7076 6.45669 13 6.69051 13H10V17.5C10 17.7761 10.2239 18 10.5 18H13.5C13.7761 18 14 17.7761 14 17.5V13H17.3095C17.5433 13 17.6492 12.7076 17.4695 12.5579L12.3201 8.26674Z",fill:"currentColor"}))}),"upload");var nk=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const rk=AC.PREFIX;class sk extends M.A{constructor(e){super(e),this.inputRef=null,this.replaceInputRef=null,this.onClick=()=>{const{inputRef:e,props:t}=this,{onOpenFileDialog:i}=t;!Boolean(this.props.disabled)&&e&&e.current&&(e.current.click(),i&&i())},this.onChange=e=>{const{files:t}=e.target;this.foundation.handleChange(t)},this.replace=e=>{this.setState({replaceIdx:e},(()=>{this.replaceInputRef.current.click()}))},this.onReplaceChange=e=>{const{files:t}=e.target;this.foundation.handleReplaceChange(t)},this.clear=()=>{this.foundation.handleClear()},this.remove=e=>{this.foundation.handleRemove(e)},this.insert=(e,t)=>this.foundation.insertFileToList(e,t),this.upload=()=>{this.foundation.manualUpload()},this.openFileDialog=()=>{this.onClick()},this.renderFile=(e,t,i)=>{const{name:n,status:r,validateMessage:s,_sizeInvalid:a,uid:l}=e,{previewFile:c,listType:h,itemStyle:d,showPicInfo:u,renderPicInfo:p,renderPicPreviewIcon:g,renderFileOperation:f,renderFileItem:m,renderThumbnail:v,disabled:y,onPreviewClick:b,picWidth:_,picHeight:x}=this.props,S=Object.assign(Object.assign(Object.assign({},qi()(this.props,["showRetry","showReplace",""])),e),{previewFile:c,listType:h,onRemove:()=>this.remove(e),onRetry:()=>{this.foundation.retry(e)},index:t,key:l||"".concat(n).concat(t),style:d,disabled:y,showPicInfo:u,renderPicInfo:p,renderPicPreviewIcon:g,renderFileOperation:f,renderThumbnail:v,onReplace:()=>{this.replace(t)},onPreviewClick:"undefined"!==typeof b?()=>this.foundation.handlePreviewClick(e):void 0,picWidth:_,picHeight:x});return r!==OC.FILE_STATUS_UPLOAD_FAIL||s||(S.validateMessage=i.fail),a&&!s&&(S.validateMessage=i.illegalSize),"undefined"===typeof m?o.createElement(tk,Object.assign({},S)):m(S)},this.renderFileList=()=>{const{listType:e}=this.props;return e===OC.FILE_LIST_PIC?this.renderFileListPic():e===OC.FILE_LIST_DEFAULT?this.renderFileListDefault():null},this.renderFileListPic=()=>{const{showUploadList:e,limit:t,disabled:i,children:n,draggable:r,hotSpotLocation:s,picHeight:a,picWidth:l}=this.props,{fileList:c,dragAreaStatus:h}=this.state,u=this.props.fileList||c,p=!t||t>u.length,g="".concat(rk,"-drag-area"),f=d()("".concat(rk,"-add"),{["".concat(rk,"-picture-add")]:!0,["".concat(rk,"-picture-add-disabled")]:i}),m=d()("".concat(rk,"-file-list"),{["".concat(rk,"-picture-file-list")]:!0}),v=d()({["".concat(g,"-legal")]:h===OC.DRAG_AREA_LEGAL,["".concat(g,"-illegal")]:h===OC.DRAG_AREA_ILLEGAL}),y="".concat(rk,"-file-list-main"),b={role:"button",className:f,onClick:this.onClick,style:{height:a,width:l}},_={className:m},x={onDrop:this.onDrop,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDragEnter:this.onDragEnter};r&&Object.assign(b,x,{className:d()(f,v)});const S=o.createElement("div",Object.assign({},b,{"x-semi-prop":"children"}),n);return e&&u.length?o.createElement(pe.A,{componentName:"Upload"},(e=>o.createElement("div",Object.assign({},_),o.createElement("div",{className:y,role:"list","aria-label":"picture list"},p&&"start"===s?S:null,u.map(((t,i)=>this.renderFile(t,i,e))),p&&"end"===s?S:null)))):p?S:null},this.renderFileListDefault=()=>{const{showUploadList:e,limit:t,disabled:i}=this.props,{fileList:n}=this.state,r=this.props.fileList||n,s=d()("".concat(rk,"-file-list")),a="".concat(rk,"-file-list-title"),l="".concat(rk,"-file-list-main"),c=1!==t&&r.length,h=this.props.showClear&&!i,u={className:s};return e&&r.length?o.createElement(pe.A,{componentName:"Upload"},(e=>o.createElement("div",Object.assign({},u),c?o.createElement("div",{className:a},o.createElement("span",{className:"".concat(a,"-choosen")},e.selectedFiles),h?o.createElement("span",{role:"button",tabIndex:0,onClick:this.clear,className:"".concat(a,"-clear")},e.clear):null):null,o.createElement("div",{className:l,role:"list","aria-label":"file list"},r.map(((t,i)=>this.renderFile(t,i,e))))))):null},this.onDrop=e=>{this.foundation.handleDrop(e)},this.onDragOver=e=>{this.foundation.handleDragOver(e)},this.onDragLeave=e=>{this.foundation.handleDragLeave(e)},this.onDragEnter=e=>{this.foundation.handleDragEnter(e)},this.renderAddContent=()=>{const{draggable:e,children:t,listType:i,disabled:n}=this.props,r=d()("".concat(rk,"-add"));return i===OC.FILE_LIST_PIC?null:e?this.renderDragArea():o.createElement("div",{role:"button",tabIndex:0,"aria-disabled":n,className:r,onClick:this.onClick},t)},this.renderDragArea=()=>{const{dragAreaStatus:e}=this.state,{children:t,dragIcon:i,dragMainText:n,dragSubText:r,disabled:s}=this.props,a="".concat(rk,"-drag-area"),l=d()(a,{["".concat(a,"-legal")]:e===OC.DRAG_AREA_LEGAL,["".concat(a,"-illegal")]:e===OC.DRAG_AREA_ILLEGAL,["".concat(a,"-custom")]:t});return o.createElement(pe.A,{componentName:"Upload"},(c=>o.createElement("div",{role:"button",tabIndex:0,"aria-disabled":s,className:l,onDrop:this.onDrop,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDragEnter:this.onDragEnter,onClick:this.onClick},t||o.createElement(o.Fragment,null,o.createElement("div",{className:"".concat(a,"-icon"),"x-semi-prop":"dragIcon"},i||o.createElement(ik,{size:"extra-large"})),o.createElement("div",{className:"".concat(a,"-text")},o.createElement("div",{className:"".concat(a,"-main-text"),"x-semi-prop":"dragMainText"},n||c.mainText),o.createElement("div",{className:"".concat(a,"-sub-text"),"x-semi-prop":"dragSubText"},r),o.createElement("div",{className:"".concat(a,"-tips")},e===OC.DRAG_AREA_LEGAL&&o.createElement("span",{className:"".concat(a,"-tips-legal")},c.legalTips),e===OC.DRAG_AREA_ILLEGAL&&o.createElement("span",{className:"".concat(a,"-tips-illegal")},c.illegalTips)))))))},this.state={fileList:e.defaultFileList||[],replaceIdx:-1,inputKey:Math.random(),replaceInputKey:Math.random(),dragAreaStatus:"default",localUrls:[]},this.foundation=new KC(this.adapter),this.inputRef=o.createRef(),this.replaceInputRef=o.createRef()}static getDerivedStateFromProps(e){const{fileList:t}=e;return"fileList"in e?{fileList:t||[]}:null}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyFileSelect:e=>this.props.onFileChange(e),notifyError:(e,t,i,n)=>this.props.onError(e,t,i,n),notifySuccess:(e,t,i)=>this.props.onSuccess(e,t,i),notifyProgress:(e,t,i)=>this.props.onProgress(e,t,i),notifyRemove:(e,t,i)=>this.props.onRemove(e,t,i),notifySizeError:(e,t)=>this.props.onSizeError(e,t),notifyExceed:e=>this.props.onExceed(e),updateFileList:(e,t)=>{"function"===typeof t?this.setState({fileList:e},t):this.setState({fileList:e})},notifyBeforeUpload:e=>{let{file:t,fileList:i}=e;return this.props.beforeUpload({file:t,fileList:i})},notifyAfterUpload:e=>{let{response:t,file:i,fileList:n}=e;return this.props.afterUpload({response:t,file:i,fileList:n})},resetInput:()=>{this.setState((e=>({inputKey:Math.random()})))},resetReplaceInput:()=>{this.setState((e=>({replaceInputKey:Math.random()})))},isMac:()=>navigator.platform.toUpperCase().indexOf("MAC")>=0,registerPastingHandler:e=>{document.body.addEventListener("keydown",e),this.pastingCb=e},unRegisterPastingHandler:()=>{this.pastingCb&&document.body.removeEventListener("keydown",this.pastingCb)},notifyPastingError:e=>this.props.onPastingError(e),updateDragAreaStatus:e=>this.setState({dragAreaStatus:e}),notifyChange:e=>{let{currentFile:t,fileList:i}=e;return this.props.onChange({currentFile:t,fileList:i})},updateLocalUrls:e=>this.setState({localUrls:e}),notifyClear:()=>this.props.onClear(),notifyPreviewClick:e=>this.props.onPreviewClick(e),notifyDrop:(e,t,i)=>this.props.onDrop(e,t,i),notifyAcceptInvalid:e=>this.props.onAcceptInvalid(e),notifyBeforeRemove:(e,t)=>this.props.beforeRemove(e,t),notifyBeforeClear:e=>this.props.beforeClear(e)})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}render(){const e=this.props,{style:t,className:i,multiple:n,accept:r,disabled:s,children:a,capture:l,listType:c,prompt:h,promptPosition:u,draggable:p,validateMessage:g,validateStatus:f,directory:m}=e,v=nk(e,["style","className","multiple","accept","disabled","children","capture","listType","prompt","promptPosition","draggable","validateMessage","validateStatus","directory"]),y=d()(rk,{["".concat(rk,"-picture")]:c===OC.FILE_LIST_PIC,["".concat(rk,"-disabled")]:s,["".concat(rk,"-default")]:"default"===f,["".concat(rk,"-error")]:"error"===f,["".concat(rk,"-warning")]:"warning"===f,["".concat(rk,"-success")]:"success"===f},i),b=d()("".concat(rk,"-hidden-input")),_=d()("".concat(rk,"-hidden-input-replace")),x=d()("".concat(rk,"-prompt")),S=d()("".concat(rk,"-validate-message")),w=m?{directory:"directory",webkitdirectory:"webkitdirectory"}:{};return o.createElement("div",Object.assign({className:y,style:t,"x-prompt-pos":u},this.getDataAttr(v)),o.createElement("input",Object.assign({key:this.state.inputKey,capture:l,multiple:n,accept:r,onChange:this.onChange,type:"file",autoComplete:"off",tabIndex:-1,className:b,ref:this.inputRef},w)),o.createElement("input",{key:this.state.replaceInputKey,multiple:!1,accept:r,onChange:this.onReplaceChange,type:"file",autoComplete:"off",tabIndex:-1,className:_,ref:this.replaceInputRef}),this.renderAddContent(),h?o.createElement("div",{className:x,"x-semi-prop":"prompt"},h):null,g?o.createElement("div",{className:S,"x-semi-prop":"validateMessage"},g):null,this.renderFileList())}}sk.propTypes={accept:c().string,action:c().string.isRequired,addOnPasting:c().bool,afterUpload:c().func,beforeClear:c().func,beforeRemove:c().func,beforeUpload:c().func,children:c().node,className:c().string,customRequest:c().func,data:c().oneOfType([c().object,c().func]),defaultFileList:c().array,directory:c().bool,disabled:c().bool,dragIcon:c().node,dragMainText:c().node,dragSubText:c().node,draggable:c().bool,fileList:c().array,fileName:c().string,headers:c().oneOfType([c().object,c().func]),hotSpotLocation:c().oneOf(["start","end"]),itemStyle:c().object,limit:c().number,listType:c().oneOf(OC.LIST_TYPE),maxSize:c().number,minSize:c().number,multiple:c().bool,name:c().string,onAcceptInvalid:c().func,onChange:c().func,onClear:c().func,onDrop:c().func,onError:c().func,onExceed:c().func,onFileChange:c().func,onOpenFileDialog:c().func,onPreviewClick:c().func,onProgress:c().func,onRemove:c().func,onRetry:c().func,onSizeError:c().func,onSuccess:c().func,onPastingError:c().func,previewFile:c().func,prompt:c().node,promptPosition:c().oneOf(OC.PROMPT_POSITION),picWidth:c().oneOfType([c().number,c().string]),picHeight:c().oneOfType([c().number,c().string]),renderFileItem:c().func,renderPicPreviewIcon:c().func,renderFileOperation:c().func,renderPicInfo:c().func,renderThumbnail:c().func,showClear:c().bool,showPicInfo:c().bool,showReplace:c().bool,showRetry:c().bool,showUploadList:c().bool,style:c().object,timeout:c().number,transformFile:c().func,uploadTrigger:c().oneOf(OC.UPLOAD_TRIGGER),validateMessage:c().node,validateStatus:c().oneOf(OC.VALIDATE_STATUS),withCredentials:c().bool},sk.defaultProps={defaultFileList:[],disabled:!1,listType:"list",hotSpotLocation:"end",multiple:!1,onAcceptInvalid:r(),onChange:r(),beforeRemove:()=>!0,beforeClear:()=>!0,onClear:r(),onDrop:r(),onError:r(),onExceed:r(),onFileChange:r(),onOpenFileDialog:r(),onProgress:r(),onRemove:r(),onRetry:r(),onSizeError:r(),onSuccess:r(),onPastingError:r(),promptPosition:"right",showClear:!0,showPicInfo:!1,showReplace:!1,showRetry:!0,showUploadList:!0,uploadTrigger:"auto",withCredentials:!1},sk.FileCard=tk;const ak=sk,ok=cb(ce,{maintainCursor:!0}),lk=cb(Vd,{maintainCursor:!0}),ck=cb(Cd,{maintainCursor:!0}),hk=cb(ig);hk.Option=ig.Option,hk.OptGroup=ig.OptGroup;const dk=cb(Ei),uk=cb(wi,{valueKey:"checked",valuePath:"target.checked",shouldInject:!1}),pk=cb(pb,{valuePath:"target.value"}),gk=cb(im,{valueKey:"checked",valuePath:"target.checked",shouldInject:!1}),fk=cb(uc),mk=cb(Sg,{valueKey:"checked"}),vk=cb(bb),yk=cb(jb),bk=cb(Kw),_k=cb(gC),xk=cb(SC),Sk=cb(Ce,{valueKey:"value",onKeyChangeFnName:"onChange"}),wk=cb(ak,{valueKey:"fileList",valuePath:"fileList",onKeyChangeFnName:"onChange"}),Ck=cb(zw);var kk=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Ak=xy.PREFIX;class Ek extends M.A{constructor(e){super(e),this.state={formId:""},(0,A.A)(Boolean(e.component&&e.render),"[Semi Form] You should not use <Form component> and <Form render> in ths same time; <Form render> will be ignored"),(0,A.A)(e.component&&e.children&&!Ny(e.children),"[Semi Form] You should not use <Form component> and <Form>{children}</Form> in ths same time; <Form>{children}</Form> will be ignored"),(0,A.A)(e.render&&e.children&&!Ny(e.children),"[Semi Form] You should not use <Form render> and <Form>{children}</Form> in ths same time; <Form>{children}</Form> will be ignored"),this.submit=this.submit.bind(this),this.reset=this.reset.bind(this),this.foundation=new Ry(this.adapter),this.formApi=this.foundation.getFormApi(),this.props.getFormApi&&this.props.getFormApi(this.formApi)}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{cloneDeep:$.mg,notifySubmit:(e,t)=>{this.props.onSubmit(e,t)},notifySubmitFail:(e,t,i)=>{this.props.onSubmitFail(e,t,i)},forceUpdate:e=>{this.forceUpdate(e)},notifyChange:e=>{this.props.onChange(e)},notifyValueChange:(e,t)=>{this.props.onValueChange(e,t)},notifyReset:()=>{this.props.onReset()},initFormId:()=>{this.setState({formId:(0,Ie.i7)()})},getInitValues:()=>this.props.initValues,getFormProps:e=>{if("undefined"===typeof e)return this.props;if("string"===typeof e)return this.props[e];{const t={};return e.forEach((e=>{t[e]=this.props[e]})),t}},getAllErrorDOM:()=>{const{formId:e}=this.state,{id:t}=this.props,i=t||e;return document.querySelectorAll('form[x-form-id="'.concat(i,'"] .').concat(xy.PREFIX,"-field-error-message"))},getFieldDOM:e=>document.querySelector(".".concat(xy.PREFIX,'-field[x-field-id="').concat(e,'"]'))})}get content(){const{children:e,component:t,render:i}=this.props,n=this.foundation.getFormState(),r={formState:n,formApi:this.foundation.getFormApi(),values:n.values};return t?o.createElement(t,r):i?i(r):"function"===typeof e?e(r):e}submit(e){e.preventDefault(),this.foundation.submit(e)}reset(e){e.preventDefault(),this.foundation.reset()}render(){const e=this.foundation.getFormState(!1),t=this.foundation.getModifyFormStateApi(),{formId:i}=this.state,n=this.props,{children:r,getFormApi:s,onChange:a,onSubmit:l,onSubmitFail:c,onValueChange:h,component:u,render:p,validateFields:g,initValues:f,layout:m,style:v,className:y,labelPosition:b,labelWidth:_,labelAlign:x,labelCol:S,wrapperCol:w,allowEmpty:C,autoScrollToError:k,showValidateIcon:A,stopValidateWithError:E,extraTextPosition:T,id:O,trigger:P}=n,M=kk(n,["children","getFormApi","onChange","onSubmit","onSubmitFail","onValueChange","component","render","validateFields","initValues","layout","style","className","labelPosition","labelWidth","labelAlign","labelCol","wrapperCol","allowEmpty","autoScrollToError","showValidateIcon","stopValidateWithError","extraTextPosition","id","trigger"]),I=d()(Ak,y,{[Ak+"-vertical"]:"vertical"===m,[Ak+"-horizontal"]:"horizontal"===m}),R=w&&S,D=o.createElement("form",Object.assign({style:v},M,{onReset:this.reset,onSubmit:this.submit,className:I,"x-form-id":O||i}),this.content),L=o.createElement(Gh,null,D);return o.createElement(jy.Provider,{value:t},o.createElement(Ly.Provider,{value:this.formApi},o.createElement(Dy.Provider,{value:e},R?L:D)))}}Ek.propTypes={"aria-label":c().string,onSubmit:c().func,onSubmitFail:c().func,onChange:c().func,onReset:c().func,onValueChange:c().func,autoScrollToError:c().oneOfType([c().bool,c().object]),allowEmpty:c().bool,className:c().string,component:c().oneOfType([c().node,c().func]),disabled:c().bool,extraTextPosition:c().oneOf(Sy.EXTRA_POS),getFormApi:c().func,initValues:c().object,validateFields:c().func,layout:c().oneOf(Sy.LAYOUT),labelPosition:c().oneOf(Sy.LABEL_POS),labelWidth:c().oneOfType([c().number,c().string]),labelAlign:c().oneOf(Sy.LABEL_ALIGN),labelCol:c().object,render:c().func,style:c().object,showValidateIcon:c().bool,stopValidateWithError:c().bool,id:c().string,wrapperCol:c().object,trigger:c().oneOfType([c().oneOf(["blur","change","custom","mount"]),c().arrayOf(c().oneOf(["blur","change","custom","mount"]))])},Ek.defaultProps={onChange:r(),onSubmitFail:r(),onSubmit:r(),onReset:r(),onValueChange:r(),layout:"vertical",labelPosition:"top",allowEmpty:!1,autoScrollToError:!1,showValidateIcon:!0},Ek.Input=ok,Ek.TextArea=ck,Ek.InputNumber=lk,Ek.Select=hk,Ek.Checkbox=uk,Ek.CheckboxGroup=dk,Ek.Radio=gk,Ek.RadioGroup=pk,Ek.DatePicker=fk,Ek.TimePicker=yk,Ek.Switch=mk,Ek.Slider=vk,Ek.TreeSelect=bk,Ek.Cascader=_k,Ek.Rating=xk,Ek.AutoComplete=Sk,Ek.Upload=wk,Ek.TagInput=Ck,Ek.Slot=Ky,Ek.ErrorMessage=Uy,Ek.InputGroup=rb,Ek.Label=Hy,Ek.Section=Xy;const Tk=Ek,Ok={PREFIX:"".concat(p._,"-image")};const Pk=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.9998 12.0001C22.9998 18.0753 18.0749 23.0001 11.9998 23.0001C5.92463 23.0001 0.999756 18.0753 0.999756 12.0001C0.999756 5.92499 5.92463 1.00012 11.9998 1.00012C18.0749 1.00012 22.9998 5.92499 22.9998 12.0001ZM13.4998 17.5C13.4998 16.6718 12.8282 16.0001 11.9998 16.0001C11.1713 16.0001 10.4998 16.6718 10.4998 17.5C10.4998 18.3285 11.1713 19 11.9998 19C12.8282 19 13.4998 18.3285 13.4998 17.5ZM11.9998 5.00011C10.9136 5.00011 10.0505 5.91257 10.1107 6.99704L10.4166 12.5024C10.4632 13.3427 11.1582 14.0001 11.9998 14.0001C12.8413 14.0001 13.5363 13.3427 13.583 12.5024L13.8888 6.99704C13.9491 5.91257 13.0859 5.00011 11.9998 5.00011Z",fill:"currentColor"}))}),"upload_error");const Mk=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 12.8284 22.3284 13.5 21.5 13.5L6.12132 13.5L12.5607 19.9393C13.1464 20.5251 13.1464 21.4749 12.5607 22.0607C11.9749 22.6464 11.0251 22.6464 10.4393 22.0607L1.43934 13.0607C0.853554 12.4749 0.853554 11.5251 1.43934 10.9393L10.4393 1.93934C11.0251 1.35355 11.9749 1.35355 12.5607 1.93934C13.1464 2.52513 13.1464 3.47487 12.5607 4.06066L6.12132 10.5L21.5 10.5C22.3284 10.5 23 11.1716 23 12Z",fill:"currentColor"}))}),"arrow_left");const Ik=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 12C1 11.1716 1.67157 10.5 2.5 10.5L17.8787 10.5L11.4393 4.06066C10.8536 3.47487 10.8536 2.52513 11.4393 1.93934C12.0251 1.35355 12.9749 1.35355 13.5607 1.93934L22.5607 10.9393C23.1464 11.5251 23.1464 12.4749 22.5607 13.0607L13.5607 22.0607C12.9749 22.6464 12.0251 22.6464 11.4393 22.0607C10.8536 21.4749 10.8536 20.5251 11.4393 19.9393L17.8787 13.5L2.5 13.5C1.67157 13.5 1 12.8284 1 12Z",fill:"currentColor"}))}),"arrow_right"),Rk=(0,o.createContext)({}),Dk="".concat(Ok.PREFIX,"-preview-header"),Lk=(0,o.forwardRef)(((e,t)=>{let{onClose:i,titleStyle:n,className:r,renderHeader:s,closable:a}=e;return o.createElement(Rk.Consumer,null,(e=>{let l,{currentIndex:c,titles:h}=e;return h&&"number"===typeof c&&(l=h[c]),o.createElement("section",{ref:t,className:d()(Dk,r)},o.createElement("section",{className:"".concat(Dk,"-title"),style:n},s?s(l):l),a&&o.createElement("section",{className:"".concat(Dk,"-close"),onMouseUp:i},o.createElement(pt,null)))}))})),jk=Lk;const Fk=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M2 12C2 11.1716 2.67157 10.5 3.5 10.5H20.5C21.3284 10.5 22 11.1716 22 12C22 12.8284 21.3284 13.5 20.5 13.5H3.5C2.67157 13.5 2 12.8284 2 12Z",fill:"currentColor"}))}),"minus");const Bk=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M20.5 13.5C21.3284 13.5 22 12.8284 22 12C22 11.1716 21.3284 10.5 20.5 10.5L13.5 10.5L13.5 3.5C13.5 2.67157 12.8284 2 12 2C11.1716 2 10.5 2.67157 10.5 3.5L10.5 10.5L3.5 10.5C2.67157 10.5 2 11.1716 2 12C2 12.8284 2.67157 13.5 3.5 13.5L10.5 13.5V20.5C10.5 21.3284 11.1716 22 12 22C12.8284 22 13.5 21.3284 13.5 20.5V13.5L20.5 13.5Z",fill:"currentColor"}))}),"plus");const Nk=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6C1 4.89543 1.89543 4 3 4H21C22.1046 4 23 4.89543 23 6V18C23 19.1046 22.1046 20 21 20H3C1.89543 20 1 19.1046 1 18V6ZM21 6L3 6V18H21V6ZM5 9C5 8.44772 5.44772 8 6 8H7.5C8.05228 8 8.5 8.44772 8.5 9V15C8.5 15.5523 8.05228 16 7.5 16C6.94772 16 6.5 15.5523 6.5 15V10H6C5.44772 10 5 9.55228 5 9ZM16 8C15.4477 8 15 8.44772 15 9C15 9.55228 15.4477 10 16 10H16.5V15C16.5 15.5523 16.9477 16 17.5 16C18.0523 16 18.5 15.5523 18.5 15V9C18.5 8.44772 18.0523 8 17.5 8H16ZM13 10C13 10.5523 12.5523 11 12 11C11.4477 11 11 10.5523 11 10C11 9.44772 11.4477 9 12 9C12.5523 9 13 9.44772 13 10ZM12 15C12.5523 15 13 14.5523 13 14C13 13.4477 12.5523 13 12 13C11.4477 13 11 13.4477 11 14C11 14.5523 11.4477 15 12 15Z",fill:"currentColor"}))}),"real_size_stroked");const zk=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 3C14 2.44772 14.4477 2 15 2H21C21.5523 2 22 2.44772 22 3V9C22 9.55229 21.5523 10 21 10C20.4477 10 20 9.55229 20 9V4H15C14.4477 4 14 3.55229 14 3ZM10 21C10 21.5523 9.55229 22 9 22H3C2.44772 22 2 21.5523 2 21V15C2 14.4477 2.44772 14 3 14C3.55228 14 4 14.4477 4 15L4 20H9C9.55229 20 10 20.4477 10 21ZM2 9C2 9.55228 2.44772 10 3 10C3.55229 10 4 9.55228 4 9L4 4L9 4C9.55229 4 10 3.55228 10 3C10 2.44771 9.55229 2 9 2H3C2.44772 2 2 2.44772 2 3V9ZM21 14C21.5523 14 22 14.4477 22 15V21C22 21.5523 21.5523 22 21 22H15C14.4477 22 14 21.5523 14 21C14 20.4477 14.4477 20 15 20H20V15C20 14.4477 20.4477 14 21 14ZM8.5 7.5C7.94772 7.5 7.5 7.94772 7.5 8.5V15.5C7.5 16.0523 7.94772 16.5 8.5 16.5H15.5C16.0523 16.5 16.5 16.0523 16.5 15.5V8.5C16.5 7.94772 16.0523 7.5 15.5 7.5H8.5ZM9.5 14.5V9.5H14.5V14.5H9.5Z",fill:"currentColor"}))}),"window_adaption_stroked");const Hk=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{d:"M14.2071 2.20711C14.5976 1.81658 14.5976 1.18342 14.2071 0.792893C13.8166 0.402369 13.1834 0.402369 12.7929 0.792893L10.2929 3.29289C9.90237 3.68342 9.90237 4.31658 10.2929 4.70711L12.7929 7.20711C13.1834 7.59763 13.8166 7.59763 14.2071 7.20711C14.5976 6.81658 14.5976 6.18342 14.2071 5.79289L13.4142 5H16C18.7614 5 21 7.23858 21 10V12C21 12.5523 21.4477 13 22 13C22.5523 13 23 12.5523 23 12V10C23 6.13401 19.866 3 16 3H13.4142L14.2071 2.20711Z",fill:"currentColor"}),o.createElement("path",{d:"M3 10C3 8.89543 3.89543 8 5 8H17C18.1046 8 19 8.89543 19 10V20C19 21.1046 18.1046 22 17 22H5C3.89543 22 3 21.1046 3 20V10Z",fill:"currentColor"}))}),"rotate");const Vk=(0,J.T)((function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.8395 8.05827C17.1837 5.16226 14.5944 3 11.5 3C7.91015 3 5 5.91015 5 9.5C5 10.0204 5.06115 10.5264 5.17665 11.0114C2.84229 11.1772 1 13.1234 1 15.5C1 17.9853 3.01469 20 5.49995 20H17C20.3137 20 23 17.3137 23 14C23 10.9712 20.7558 8.46659 17.8395 8.05827ZM11.6799 17.7333C11.8653 17.8878 12.1347 17.8878 12.3201 17.7333L17.4695 13.4421C17.6492 13.2924 17.5433 13 17.3095 13H14V9.5C14 9.22386 13.7761 9 13.5 9H10.5C10.2239 9 10 9.22386 10 9.5V13H6.69051C6.45669 13 6.35084 13.2924 6.53047 13.4421L11.6799 17.7333Z",fill:"currentColor"}))}),"download");class Uk extends k.A{constructor(){super(...arguments),this.changeSliderValue=e=>{const{zoom:t,step:i,min:n,max:r}=this.getProps();let s="plus"===e?t+i:t-i;s>r?s=r:s<n&&(s=n),this.handleValueChange(s)},this.handleValueChange=e=>{const{onZoomIn:t,onZoomOut:i,zoom:n}=this.getProps();e>n?t(Number((e/100).toFixed(2))):i(Number((e/100).toFixed(2)))},this.handleRatioClick=()=>{const{ratio:e,onAdjustRatio:t}=this.getProps();t("adaptation"===e?"realSize":"adaptation")},this.handleRotate=e=>{const{onRotate:t}=this.getProps();t&&t(e)}}}const Wk="".concat(Ok.PREFIX,"-preview-footer");class Gk extends M.A{get adapter(){return Object.assign({},super.adapter)}constructor(e){super(e),this.changeSliderValue=e=>{this.foundation.changeSliderValue(e)},this.handleMinusClick=()=>{this.changeSliderValue("minus")},this.handlePlusClick=()=>{this.changeSliderValue("plus")},this.handleRotateLeft=()=>{this.foundation.handleRotate("left")},this.handleRotateRight=()=>{this.foundation.handleRotate("right")},this.handleSlideChange=cl()((e=>{this.foundation.handleValueChange(e)}),50),this.handleRatioClick=()=>{this.foundation.handleRatioClick()},this.customRenderViewMenu=()=>{const{min:e,max:t,step:i,curPage:n,totalNum:r,ratio:s,zoom:a,disabledPrev:o,disabledNext:l,disableDownload:c,onNext:h,onPrev:d,onDownload:u,renderPreviewMenu:p}=this.props;return p({min:e,max:t,step:i,curPage:n,totalNum:r,ratio:s,zoom:a,disabledPrev:o,disabledNext:l,disableDownload:c,onNext:h,onPrev:d,onDownload:u,onRotateLeft:this.handleRotateLeft,onRotateRight:this.handleRotateRight,disabledZoomIn:a===t,disabledZoomOut:a===e,onRatioClick:this.handleRatioClick,onZoomIn:this.handlePlusClick,onZoomOut:this.handleMinusClick,menuItems:this.getMenu()})},this.getFinalIconElement=(e,t,i)=>{const{showTooltip:n,zIndex:r}=this.props;return n?o.createElement(vh.A,{content:t,key:"tooltip-".concat(i),zIndex:r+1},e):e},this.getLocalTextByKey=e=>o.createElement(pe.A,{componentName:"Image"},(t=>t[e])),this.getIconChevronLeft=()=>{const{disabledPrev:e,onPrev:t,prevTip:i}=this.props,n=o.createElement(Lo,{key:"chevron-left",size:"large",className:e?"".concat(Wk,"-disabled"):"",onClick:e?void 0:t}),r=null!==i&&void 0!==i?i:this.getLocalTextByKey("prevTip");return this.getFinalIconElement(n,r,"chevron-left")},this.getIconChevronRight=()=>{const{disabledNext:e,onNext:t,nextTip:i}=this.props,n=o.createElement(jo,{key:"chevron-right",size:"large",className:e?"".concat(Wk,"-disabled"):"",onClick:e?void 0:t}),r=null!==i&&void 0!==i?i:this.getLocalTextByKey("nextTip");return this.getFinalIconElement(n,r,"chevron-right")},this.getIconMinus=()=>{const{zoomOutTip:e,zoom:t,min:i}=this.props,n=t===i,r=o.createElement(Fk,{key:"minus",size:"large",onClick:n?void 0:this.handleMinusClick,className:n?"".concat(Wk,"-disabled"):""}),s=null!==e&&void 0!==e?e:this.getLocalTextByKey("zoomOutTip");return this.getFinalIconElement(r,s,"minus")},this.getIconPlus=()=>{const{zoomInTip:e,zoom:t,max:i}=this.props,n=t===i,r=o.createElement(Bk,{key:"plus",size:"large",onClick:n?void 0:this.handlePlusClick,className:n?"".concat(Wk,"-disabled"):""}),s=null!==e&&void 0!==e?e:this.getLocalTextByKey("zoomInTip");return this.getFinalIconElement(r,s,"plus")},this.getIconRatio=()=>{const{ratio:e,originTip:t,adaptiveTip:i}=this.props,n={key:"ratio",size:"large",className:d()("".concat(Wk,"-gap")),onClick:this.handleRatioClick},r="adaptation"===e?o.createElement(Nk,Object.assign({},n)):o.createElement(zk,Object.assign({},n));let s;return s="adaptation"===e?null!==t&&void 0!==t?t:this.getLocalTextByKey("originTip"):null!==i&&void 0!==i?i:this.getLocalTextByKey("adaptiveTip"),this.getFinalIconElement(r,s,"ratio")},this.getIconRotate=()=>{const{rotateTip:e}=this.props,t=o.createElement(Hk,{key:"rotate",size:"large",onClick:this.handleRotateLeft}),i=null!==e&&void 0!==e?e:this.getLocalTextByKey("rotateTip");return this.getFinalIconElement(t,i,"rotate")},this.getIconDownload=()=>{const{downloadTip:e,onDownload:t,disableDownload:i}=this.props,n=o.createElement(Vk,{key:"download",size:"large",onClick:i?void 0:t,className:d()("".concat(Wk,"-gap"),{["".concat(Wk,"-disabled")]:i})}),r=null!==e&&void 0!==e?e:this.getLocalTextByKey("downloadTip");return this.getFinalIconElement(n,r,"download")},this.getNumberInfo=()=>{const{curPage:e,totalNum:t}=this.props;return o.createElement("div",{className:"".concat(Wk,"-page"),key:"info"},e,"/",t)},this.getSlider=()=>{const{zoom:e,min:t,max:i,step:n,showTooltip:r}=this.props;return o.createElement(bb,{key:"slider",value:e,min:t,max:i,step:n,tipFormatter:e=>"".concat(e,"%"),tooltipVisible:!!r&&void 0,onChange:this.handleSlideChange})},this.getMenu=()=>[this.getIconChevronLeft(),this.getNumberInfo(),this.getIconChevronRight(),this.getIconMinus(),this.getSlider(),this.getIconPlus(),this.getIconRatio(),this.getIconRotate(),this.getIconDownload()],this.getFooterMenu=()=>{const e=this.getMenu();return e.splice(3,0,o.createElement(Rc,{layout:"vertical",key:"divider-first"})),e.splice(8,0,o.createElement(Rc,{layout:"vertical",key:"divider-second"})),e},this.foundation=new Uk(this.adapter)}render(){const{className:e,renderPreviewMenu:t,forwardRef:i}=this.props,n=d()(Wk,"".concat(Wk,"-wrapper"),e,{["".concat(Wk,"-content")]:!Boolean(t)});return o.createElement("section",{className:n,ref:i},t?this.customRenderViewMenu():this.getFooterMenu())}}Gk.propTypes={curPage:c().number,totalNum:c().number,disabledPrev:c().bool,disabledNext:c().bool,disableDownload:c().bool,className:c().string,zoom:c().number,ratio:c().string,prevTip:c().string,nextTip:c().string,zoomInTip:c().string,zoomOutTip:c().string,rotateTip:c().string,downloadTip:c().string,adaptiveTip:c().string,originTip:c().string,showTooltip:c().bool,onZoomIn:c().func,onZoomOut:c().func,onPrev:c().func,onNext:c().func,onAdjustRatio:c().func,onRotateLeft:c().func,onDownload:c().func},Gk.defaultProps={min:10,max:500,step:10,showTooltip:!1,disableDownload:!1};const Kk={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0,toJSON:()=>({})};class Yk extends k.A{constructor(e){var t;super(Object.assign({},e)),t=this,this.startMouseOffset={x:0,y:0},this.originImageWidth=null,this.originImageHeight=null,this._isImageVertical=()=>this.getProp("rotation")%180!==0,this._getImageBounds=()=>{const e=this._adapter.getImage();return e?e.getBoundingClientRect():Kk},this._getContainerBounds=()=>{const e=this._adapter.getContainer();return e?e.getBoundingClientRect():Kk},this._getOffset=e=>{const{left:t,top:i}=this._getImageBounds();return{x:e.clientX-t,y:e.clientY-i}},this.setLoading=e=>{this._adapter.setLoading(e)},this.handleWindowResize=()=>{this.originImageWidth&&this.originImageHeight&&this.handleResizeImage()},this.handleLoad=e=>{if(e.target){const{naturalWidth:t,naturalHeight:i}=e.target;this.originImageHeight=i,this.originImageWidth=t,this.setState({loading:!1}),this.handleResizeImage(!1)}const{src:t,onLoad:i}=this.getProps();i&&i(t)},this.handleError=e=>{const{onError:t,src:i}=this.getProps();this.setState({loading:!1}),t&&t(i)},this.handleResizeImage=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const i=!t._isImageVertical(),{currZoom:n}=t.getStates(),r=i?t.originImageWidth:t.originImageHeight,s=i?t.originImageHeight:t.originImageWidth,{onZoom:a,setRatio:o,ratio:l}=t.getProps();if(t._adapter.getContainer()){const{width:i,height:o}=t._getContainerBounds(),l=i-80,c=o-80;let h=1;(r>l||s>c)&&(h=Number(Math.min(l/r,c/s).toFixed(2))),n===h?t.calculatePreviewImage(h,null):a(h,e)}},this.handleRatioChange=()=>{if(this.originImageWidth&&this.originImageHeight){const{currZoom:e}=this.getStates(),{ratio:t,onZoom:i}=this.getProps();let n;if("adaptation"===t){const e=!this._isImageVertical(),t=e?this.originImageWidth:this.originImageHeight,i=e?this.originImageHeight:this.originImageWidth,{width:r,height:s}=this._getContainerBounds(),a=r-80,o=s-80;n=Number(Math.min(a/t,o/i).toFixed(2))}else n=1;e!==n&&i(n)}},this.handleRightClickImage=e=>{const{disableDownload:t}=this.getProps();return!t||(e.preventDefault(),e.stopPropagation(),!1)},this.calcCanDragDirection=()=>{const{width:e,height:t}=this.getStates(),{rotation:i}=this.getProps(),{width:n,height:r}=this._getContainerBounds();let s=e>n,a=t>r;return this._isImageVertical()&&(s=t>n,a=e>r),{canDragVertical:a,canDragHorizontal:s}},this.calculatePreviewImage=(e,t)=>{const i=this._adapter.getImage(),{canDragVertical:n,canDragHorizontal:r}=this.calcCanDragDirection(),s=n||r,{width:a,height:o}=this._getContainerBounds(),l=Math.floor(this.originImageWidth*e),c=Math.floor(this.originImageHeight*e);let h;let d=0,u=0;!this._isImageVertical()?(h={x:.5*(a-l),y:.5*(o-c)},u=h.x,d=h.y):(h={x:.5*(a-c),y:.5*(o-l)},u=h.x-(l-c)/2,d=h.y+(l-c)/2),this.setState({width:l,height:c,offset:h,left:u,top:d,currZoom:e}),i&&this._adapter.setImageCursor(s)},this.calcExtremeBounds=()=>{const{width:e,height:t}=this.getStates(),{width:i,height:n}=this._getContainerBounds();let r=i-e,s=n-t;return this._isImageVertical()&&(r=i-t,s=n-e),{left:r,top:s}},this.handleMoveImage=e=>{const{offset:t,width:i,height:n}=this.getStates(),{canDragVertical:r,canDragHorizontal:s}=this.calcCanDragDirection();if(1===e.buttons&&(r||s)){const{clientX:a,clientY:o}=e,{left:l,top:c}=this._getContainerBounds(),{left:h,top:d}=this.calcExtremeBounds();let u=s?a-l-this.startMouseOffset.x:t.x,p=r?o-c-this.startMouseOffset.y:t.y;s&&(u=u>0?0:u<h?h:u),r&&(p=p>0?0:p<d?d:p);const g={x:u,y:p};this.setState({offset:g,left:this._isImageVertical()?g.x-(i-n)/2:g.x,top:this._isImageVertical()?g.y+(i-n)/2:g.y})}},this.handleImageMouseDown=e=>{this.startMouseOffset=this._getOffset(e)}}}const Xk="".concat(Ok.PREFIX,"-preview-image");class qk extends M.A{get adapter(){return Object.assign(Object.assign({},super.adapter),{getContainer:()=>this.containerRef.current,getImage:()=>this.imageRef.current,setLoading:e=>{this.setState({loading:e})},setImageCursor:e=>{this.imageRef.current.style.cursor=e?"grab":"default"}})}constructor(e){super(e),this.onWindowResize=()=>{this.foundation.handleWindowResize()},this.handleRightClickImage=e=>{this.foundation.handleRightClickImage(e)},this.handleLoad=e=>{this.foundation.handleLoad(e)},this.handleError=e=>{this.foundation.handleError(e)},this.handleMoveImage=e=>{this.foundation.handleMoveImage(e)},this.onImageMouseDown=e=>{this.foundation.handleImageMouseDown(e)},this.state={width:0,height:0,loading:!0,offset:{x:0,y:0},currZoom:0,top:0,left:0},this.containerRef=o.createRef(),this.imageRef=o.createRef(),this.foundation=new Yk(this.adapter)}componentDidMount(){window.addEventListener("resize",this.onWindowResize)}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize)}componentDidUpdate(e,t){const i="zoom"in this.props&&this.props.zoom!==this.state.currZoom,n=this.props.src&&this.props.src!==e.src;n&&this.foundation.setLoading(!0),i&&this.foundation.calculatePreviewImage(this.props.zoom,null),i||n||!e||("ratio"in this.props&&this.props.ratio!==e.ratio&&this.foundation.handleRatioChange(),"rotation"in this.props&&this.props.rotation!==e.rotation&&this.onWindowResize())}render(){const{src:e,rotation:t,crossOrigin:i}=this.props,{loading:n,width:r,height:s,top:a,left:l}=this.state,c={position:"absolute",visibility:n?"hidden":"visible",transform:"rotate(".concat(-t,"deg)"),top:a,left:l,width:r,height:s};return o.createElement("div",{className:"".concat(Xk),ref:this.containerRef},o.createElement("img",{ref:this.imageRef,src:e,alt:"previewImag",className:"".concat(Xk,"-img"),key:e,onMouseMove:this.handleMoveImage,onMouseDown:this.onImageMouseDown,onContextMenu:this.handleRightClickImage,onDragStart:e=>e.preventDefault(),onLoad:this.handleLoad,onError:this.handleError,style:c,crossOrigin:i}),n&&o.createElement(V,{size:"large",wrapperClassName:"".concat(Xk,"-spin")}))}}qk.propTypes={src:c().string,rotation:c().number,style:c().object,zoom:c().number,ratio:c().string,disableDownload:c().bool,clickZoom:c().number,setRatio:c().func,onZoom:c().func,onLoad:c().func,onError:c().func},qk.defaultProps={zoom:void 0};var Zk=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(Ey){s(Ey)}}function o(e){try{l(n.throw(e))}catch(Ey){s(Ey)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const Qk=(e,t,i,n)=>{const r=t-i,s=t+i,a=e.length;let o=[],l=[];i>=Math.floor(a/2)?n?(o=e.concat(e).slice(r+a<0?0:r+a,t+a),l=e.concat(e).slice(t+1,s+1<2*a?s+1:2*a)):(o=e.slice(0,t),l=e.slice(t+1,a)):n?(o=e.concat(e).slice(r+a,t+a),l=e.concat(e).slice(t+1,s+1)):r>=0&&s<a?(o=e.slice(r,t),l=e.slice(t+1,s+1)):r<0?(o=e.slice(0,t),l=e.slice(t+1,2*i+1)):(l=e.slice(t+1,a),o=e.slice(a-2*i-1,t));const c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];const n=e.length,r=t.length;return new Array(n<=r?n:r).fill(0).forEach(((n,r)=>{i.push(t[r]),i.push(e[r])})),n>r?i=i.concat(e.slice(r,n)):n<r&&(i=i.concat(t.slice(n,r))),i}(o.reverse(),l);return Array.from(new Set(c))},$k=["icon","footer"];class Jk extends k.A{constructor(e){var t;super(Object.assign({},e)),t=this,this._timer=null,this._startMouseDown={x:0,y:0},this.handleViewVisibleChange=()=>{const{viewerVisible:e}=this.getStates();e&&(this.setState({viewerVisible:!1}),this.clearTimer())},this.handleMouseMove=e=>{this._persistEvent(e),this.mouseMoveHandler(e)},this.mouseMoveHandler=cl()((e=>{const{viewerVisible:t}=this.getStates();this._adapter.isValidTarget(e)?(t||this.setState({viewerVisible:!0}),this.updateTimer()):this.clearTimer()}),50),this.updateTimer=()=>{const{viewerVisibleDelay:e}=this.getProps();this.clearTimer(),this._timer=setTimeout(this.handleViewVisibleChange,e)},this.clearTimer=()=>{this._timer&&(clearTimeout(this._timer),this._timer=null)},this.handleWheel=e=>{this.onWheel(e),(0,Me.jK)(e)},this.onWheel=e=>{const{zoomStep:t,maxZoom:i,minZoom:n}=this.getProps(),{zoom:r}=this.getStates();let s;e.deltaY<0?r+t<=i&&(s=Number((r+t).toFixed(2))):e.deltaY>0&&r-t>=n&&(s=Number((r-t).toFixed(2))),_()(s)||this.handleZoomImage(s)},this.handleMouseUp=e=>{const{maskClosable:t}=this.getProps();let i=!((e,t)=>{const i=null===e||void 0===e?void 0:e.composedPath();return null===i||void 0===i?void 0:i.slice(0,i.length-4).some((e=>!(!e.className||"string"!==typeof e.className)&&t.some((t=>e.className.includes(t)))))})(e,$k);const{clientX:n,clientY:r}=e,{x:s,y:a}=this._startMouseDown;(Math.abs(n-s)>5||Math.abs(a-r)>5)&&(i=!1),i&&t&&this._adapter.notifyVisibleChange(!1)},this.handleMouseDown=e=>{const{clientX:t,clientY:i}=e;this._startMouseDown={x:t,y:i}},this.handleKeyDown=e=>{const{closeOnEsc:t}=this.getProps();if(t&&e.keyCode===E.Ay.ESC)return e.stopPropagation(),this._adapter.notifyVisibleChange(!1),void this._adapter.notifyClose()},this.handleSwitchImage=e=>{const t="prev"===e?-1:1,{imgSrc:i,currentIndex:n}=this.getStates(),r=i.length,s=(n+t+r)%r;if("currentIndex"in this.getProps()){if(this._adapter.getIsInGroup()){this._adapter.getContext("setCurrentIndex")(s)}}else this.setState({currentIndex:s});this._adapter.notifyChange(s,e),this.setState({direction:e,rotation:0})},this.handleDownload=()=>{const{currentIndex:e,imgSrc:t}=this.getStates(),i=this._adapter.getSetDownloadFunc(),n=t[e],r=i?i(n):n.slice(n.lastIndexOf("/")+1).split("?")[0];((e,t,i)=>{Zk(void 0,void 0,void 0,(function*(){try{const n=yield fetch(e);if(n.ok){const e=yield n.blob(),i=URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=t,r.click(),URL.revokeObjectURL(i),r.remove()}else i(e)}catch(n){i(e)}}))})(n,r,this._adapter.notifyDownloadError),this._adapter.notifyDownload(n,e)},this.handlePreviewClose=e=>{this._adapter.notifyVisibleChange(!1),this._adapter.notifyClose(),(0,Me.jK)(e)},this.handleAdjustRatio=e=>{this.setState({ratio:e}),this._adapter.notifyRatioChange(e)},this.handleRotateImage=e=>{const{rotation:t}=this.getStates(),i=t+("left"===e?90:-90);this.setState({rotation:i}),this._adapter.notifyRotateChange(i)},this.handleZoomImage=function(e){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{zoom:n}=t.getStates();n!==e&&(i&&t._adapter.notifyZoom(e,e>n),t.setState({zoom:e}))},this.preloadGapImage=()=>{const{preLoad:e,preLoadGap:t,infinite:i,currentIndex:n}=this.getProps(),{imgSrc:r}=this.getStates();if(!e||"number"!==typeof t||t<1)return;const s=Qk(r,n,t,i);if(0===s.length)return;const a=new Image;let o=0;function l(e){o++,o<s.length&&(a.src=s[o])}a.onload=e=>{this.setLoadSuccessStatus(a.src),l()},a.onerror=l,a.src=s[0]},this.preloadSingleImage=()=>{const{preLoad:e,preLoadGap:t,infinite:i}=this.getProps(),{imgSrc:n,currentIndex:r,direction:s,imgLoadStatus:a}=this.getStates();if(!e||"number"!==typeof t||t<1)return;let o=r+("prev"===s?-1:1)*t;if(o<0||o>=n.length){if(!i)return;o=(o+n.length)%n.length}if(!a[o]){const e=new Image;e.onload=e=>{this.setLoadSuccessStatus(n[o])},e.src=n[o]}},this.setLoadSuccessStatus=e=>{const{imgLoadStatus:t}=this.getStates(),i=Object.assign({},t);i[e]=!0,this.setState({imgLoadStatus:i})},this.onImageLoad=e=>{const{preloadAfterVisibleChange:t}=this.getStates();this.setLoadSuccessStatus(e),t?(this.preloadGapImage(),this.setState({preloadAfterVisibleChange:!1})):this.preloadSingleImage()}}beforeShow(){this._adapter.registerKeyDownListener(),this._adapter.disabledBodyScroll(),this.updateTimer()}afterHide(){this._adapter.unregisterKeyDownListener(),this._adapter.enabledBodyScroll(),this.clearTimer()}}const eA=Ok.PREFIX;class tA extends M.A{get adapter(){return Object.assign(Object.assign({},super.adapter),{getIsInGroup:()=>this.isInGroup(),disabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;this.bodyOverflow=document.body.style.overflow||"",e||"hidden"===this.bodyOverflow||(document.body.style.overflow="hidden",document.body.style.width="calc(".concat(this.originBodyWidth||"100%"," - ").concat(this.scrollBarWidth,"px)"))},enabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;e||"hidden"===this.bodyOverflow||(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyChange:(e,t)=>{const{onChange:i,onPrev:n,onNext:r}=this.props;G()(i)&&i(e),"prev"===t?n&&n(e):r&&r(e)},notifyZoom:(e,t)=>{const{onZoomIn:i,onZoomOut:n}=this.props;t?G()(i)&&i(e):G()(n)&&n(e)},notifyClose:()=>{const{onClose:e}=this.props;G()(e)&&e()},notifyVisibleChange:e=>{const{onVisibleChange:t}=this.props;G()(t)&&t(e)},notifyRatioChange:e=>{const{onRatioChange:t}=this.props;G()(t)&&t(e)},notifyRotateChange:e=>{const{onRotateLeft:t}=this.props;G()(t)&&t(e)},notifyDownload:(e,t)=>{const{onDownload:i}=this.props;G()(i)&&i(e,t)},notifyDownloadError:e=>{const{onDownloadError:t}=this.props;G()(t)&&t(e)},registerKeyDownListener:()=>{window&&window.addEventListener("keydown",this.handleKeyDown)},unregisterKeyDownListener:()=>{window&&window.removeEventListener("keydown",this.handleKeyDown)},getSetDownloadFunc:()=>{var e,t;return null!==(t=null===(e=this.context)||void 0===e?void 0:e.setDownloadName)&&void 0!==t?t:this.props.setDownloadName},isValidTarget:e=>{const t=this.headerRef&&this.headerRef.current,i=this.footerRef&&this.footerRef.current,n=this.leftIconRef&&this.leftIconRef.current,r=this.rightIconRef&&this.rightIconRef.current,s=e.target;return!(t&&t.contains(s)||i&&i.contains(s)||n&&n.contains(s)||r&&r.contains(s))}})}constructor(e){var t;super(e),t=this,this.viewVisibleChange=()=>{this.foundation.handleViewVisibleChange()},this.handleSwitchImage=e=>{this.foundation.handleSwitchImage(e)},this.handleDownload=()=>{this.foundation.handleDownload()},this.handlePreviewClose=e=>{this.foundation.handlePreviewClose(e)},this.handleAdjustRatio=e=>{this.foundation.handleAdjustRatio(e)},this.handleRotateImage=e=>{this.foundation.handleRotateImage(e)},this.handleZoomImage=function(e){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.foundation.handleZoomImage(e,i)},this.handleMouseUp=e=>{this.foundation.handleMouseUp(e.nativeEvent)},this.handleMouseMove=e=>{this.foundation.handleMouseMove(e)},this.handleKeyDown=e=>{this.foundation.handleKeyDown(e)},this.onImageError=()=>{this.foundation.preloadSingleImage()},this.onImageLoad=e=>{this.foundation.onImageLoad(e)},this.handleMouseDown=e=>{this.foundation.handleMouseDown(e)},this.handleWheel=e=>{this.foundation.handleWheel(e)},this.registryImageWrapRef=e=>{this.imageWrapRef&&this.imageWrapRef.removeEventListener("wheel",this.handleWheel),e&&e.addEventListener("wheel",this.handleWheel,{passive:!1}),this.imageWrapRef=e},this.state={imgSrc:[],imgLoadStatus:new Map,zoom:.1,currentIndex:0,ratio:"adaptation",rotation:0,viewerVisible:!0,visible:!1,preloadAfterVisibleChange:!0,direction:""},this.foundation=new Jk(this.adapter),this.bodyOverflow="",this.originBodyWidth="100%",this.scrollBarWidth=0,this.imageWrapRef=null,this.headerRef=o.createRef(),this.footerRef=o.createRef(),this.leftIconRef=o.createRef(),this.rightIconRef=o.createRef()}static getDerivedStateFromProps(e,t){const i={};let n=[];return e.visible&&(n=Array.isArray(e.src)?e.src:[e.src]),a()(n,t.imgSrc)||(i.imgSrc=n),e.visible!==t.visible&&(i.visible=e.visible,e.visible&&(i.preloadAfterVisibleChange=!0,i.viewerVisible=!0,i.rotation=0,i.ratio="adaptation")),"currentIndex"in e&&e.currentIndex!==t.currentIndex&&(i.currentIndex=e.currentIndex,i.ratio="adaptation"),i}componentDidMount(){this.scrollBarWidth=(0,$.XJ)(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t){e.src!==this.props.src&&this.foundation.updateTimer(),!e.visible&&this.props.visible&&this.foundation.beforeShow(),e.visible&&!this.props.visible&&this.foundation.afterHide()}componentWillUnmount(){this.foundation.clearTimer()}isInGroup(){return Boolean(this.context&&this.context.isGroup)}render(){const{getPopupContainer:e,closable:t,zIndex:i,visible:n,className:r,style:s,infinite:a,zoomStep:l,crossOrigin:c,prevTip:h,nextTip:u,zoomInTip:p,zoomOutTip:g,rotateTip:f,downloadTip:m,adaptiveTip:v,originTip:y,showTooltip:b,disableDownload:_,renderPreviewMenu:x,renderHeader:S}=this.props,{currentIndex:w,imgSrc:C,zoom:k,ratio:A,rotation:E,viewerVisible:T}=this.state;let O={zIndex:i};e&&(O={zIndex:i,position:"static"});const P="".concat(eA,"-preview"),M=d()(P,{["".concat(eA,"-hide")]:!n,["".concat(P,"-popup")]:e},r),I=T?"":"".concat(P,"-hide"),R=C.length,D=1!==R&&(a||0!==w),L=1!==R&&(a||w!==R-1);return n&&o.createElement(zc.A,{getPopupContainer:e,style:O},o.createElement("div",{className:M,style:s,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,ref:this.registryImageWrapRef,onMouseMove:this.handleMouseMove},o.createElement(jk,{ref:this.headerRef,className:d()(I),onClose:this.handlePreviewClose,renderHeader:S,closable:t}),o.createElement(qk,{src:C[w],onZoom:this.handleZoomImage,disableDownload:_,setRatio:this.handleAdjustRatio,zoom:k,ratio:A,rotation:E,crossOrigin:c,onError:this.onImageError,onLoad:this.onImageLoad}),D&&o.createElement("div",{ref:this.leftIconRef,className:d()("".concat(P,"-icon"),"".concat(P,"-prev"),I),onClick:()=>this.handleSwitchImage("prev")},o.createElement(Mk,{size:"large"})),L&&o.createElement("div",{ref:this.rightIconRef,className:d()("".concat(P,"-icon"),"".concat(P,"-next"),I),onClick:()=>this.handleSwitchImage("next")},o.createElement(Ik,{size:"large"})),o.createElement(Gk,{forwardRef:this.footerRef,className:I,totalNum:R,curPage:w+1,disabledPrev:!D,disabledNext:!L,zoom:100*k,step:100*l,showTooltip:b,ratio:A,prevTip:h,nextTip:u,zIndex:i,zoomInTip:p,zoomOutTip:g,rotateTip:f,downloadTip:m,disableDownload:_,adaptiveTip:v,originTip:y,onPrev:()=>this.handleSwitchImage("prev"),onNext:()=>this.handleSwitchImage("next"),onZoomIn:this.handleZoomImage,onZoomOut:this.handleZoomImage,onDownload:this.handleDownload,onRotate:this.handleRotateImage,onAdjustRatio:this.handleAdjustRatio,renderPreviewMenu:x})))}}tA.contextType=Rk,tA.propTypes={style:c().object,className:c().string,visible:c().bool,src:c().oneOfType([c().string,c().array]),currentIndex:c().number,defaultCurrentIndex:c().number,defaultVisible:c().bool,maskClosable:c().bool,closable:c().bool,zoomStep:c().number,infinite:c().bool,showTooltip:c().bool,closeOnEsc:c().bool,prevTip:c().string,nextTip:c().string,zoomInTip:c().string,zoomOutTip:c().string,downloadTip:c().string,adaptiveTip:c().string,originTip:c().string,lazyLoad:c().bool,preLoad:c().bool,preLoadGap:c().number,disableDownload:c().bool,viewerVisibleDelay:c().number,zIndex:c().number,maxZoom:c().number,minZoom:c().number,renderHeader:c().func,renderPreviewMenu:c().func,getPopupContainer:c().func,onVisibleChange:c().func,onChange:c().func,onClose:c().func,onZoomIn:c().func,onZoomOut:c().func,onPrev:c().func,onNext:c().func,onDownload:c().func,onRatioChange:c().func,onRotateLeft:c().func},tA.defaultProps={showTooltip:!1,zoomStep:.1,infinite:!1,closeOnEsc:!0,lazyLoad:!1,preLoad:!0,preLoadGap:2,zIndex:1070,maskClosable:!0,viewerVisibleDelay:1e4,maxZoom:5,minZoom:.1};class iA extends k.A{constructor(e){super(Object.assign({},e)),this.handleClick=e=>{const{imageID:t,preview:i}=this.getProps();if(i)if(this._adapter.getIsInGroup()){const{setCurrentIndex:e,handleVisibleChange:i}=this._adapter.getContexts();e(t),i(!0)}else this.handlePreviewVisibleChange(!0)},this.handleLoaded=e=>{const{onLoad:t}=this.getProps();t&&t(e),this.setState({loadStatus:"success"})},this.handleError=e=>{const{onError:t}=this.getProps();t&&t(e),this.setState({loadStatus:"error"})},this.handlePreviewVisibleChange=e=>{const{preview:t}=this.getProps();if(y()(t)){const{onVisibleChange:i}=t;i&&i(e),"visible"in t||this.setState({previewVisible:e})}else this.setState({previewVisible:e})}}}var nA=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const rA=Ok.PREFIX;class sA extends M.A{get adapter(){return Object.assign(Object.assign({},super.adapter),{getIsInGroup:()=>this.isInGroup()})}constructor(e){super(e),this.handleClick=e=>{this.foundation.handleClick(e)},this.handleLoaded=e=>{this.foundation.handleLoaded(e)},this.handleError=e=>{this.foundation.handleError(e)},this.handlePreviewVisibleChange=e=>{this.foundation.handlePreviewVisibleChange(e)},this.renderDefaultLoading=()=>{const{width:e,height:t}=this.props;return o.createElement(Vt.Image,{style:{width:e,height:t}})},this.renderDefaultError=()=>{const e="".concat(rA,"-status");return o.createElement("div",{className:e},o.createElement(Pk,{size:"extra-large"}))},this.renderLoad=()=>{const e="".concat(rA,"-status"),{placeholder:t}=this.props;return t?o.createElement("div",{className:e},t):this.renderDefaultLoading()},this.renderError=()=>{const{fallback:e}=this.props,t="".concat(rA,"-status"),i="string"===typeof e?o.createElement("img",{style:{width:"100%",height:"100%"},src:e,alt:"fallback"}):e;return e?o.createElement("div",{className:t},i):this.renderDefaultError()},this.renderExtra=()=>{const{loadStatus:e}=this.state;return o.createElement("div",{className:"".concat(rA,"-overlay")},"error"===e&&this.renderError(),"loading"===e&&this.renderLoad())},this.getLocalTextByKey=e=>o.createElement(pe.A,{componentName:"Image"},(t=>t[e])),this.renderMask=()=>o.createElement("div",{className:"".concat(rA,"-mask")},o.createElement("div",{className:"".concat(rA,"-mask-info")},o.createElement(ie,{size:"extra-large"}),o.createElement("span",{className:"".concat(rA,"-mask-info-text")},this.getLocalTextByKey("preview")))),this.state={src:"",loadStatus:"loading",previewVisible:!1},this.foundation=new iA(this.adapter),this.imgRef=o.createRef()}static getDerivedStateFromProps(e,t){const i={};if(e.src!==t.src&&(i.src=e.src,i.loadStatus="loading"),y()(e.preview)){const{visible:t}=e.preview;ai()(t)&&(i.previewVisible=t)}return i}isInGroup(){return Boolean(this.context&&this.context.isGroup)}isLazyLoad(){return!!this.context&&this.context.lazyLoad}render(){var e;const{src:t,loadStatus:i,previewVisible:n}=this.state,r=this.props,{src:s,width:a,height:l,alt:c,style:h,className:u,crossOrigin:p,preview:g,fallback:f,placeholder:m,imageID:v,setDownloadName:b,imgCls:x,imgStyle:S}=r,w=nA(r,["src","width","height","alt","style","className","crossOrigin","preview","fallback","placeholder","imageID","setDownloadName","imgCls","imgStyle"]),C=Object.assign({width:a,height:l},h),k=d()(rA,u),A="success"===i&&g&&!this.isInGroup(),E=g&&"success"===i,T=y()(g)&&null!==(e=g.src)&&void 0!==e?e:t,O=y()(g)&&A?Object.assign(Object.assign({},Ue()(g,["className","style","previewCls","previewStyle"])),{className:null===g||void 0===g?void 0:g.previewCls,style:null===g||void 0===g?void 0:g.previewStyle}):{};return o.createElement("div",{style:C,className:k,onClick:this.handleClick},o.createElement("img",Object.assign({ref:this.imgRef},w,{src:this.isInGroup()&&this.isLazyLoad()?void 0:t,"data-src":t,alt:c,style:S,className:d()("".concat(rA,"-img"),{["".concat(rA,"-img-preview")]:E,["".concat(rA,"-img-error")]:"error"===i,[x]:Boolean(x)}),width:a,height:l,crossOrigin:p,onError:this.handleError,onLoad:this.handleLoaded})),"success"!==i&&this.renderExtra(),A&&o.createElement(tA,Object.assign({},O,{src:T,visible:n,onVisibleChange:this.handlePreviewVisibleChange,crossOrigin:_()(p)?null===O||void 0===O?void 0:O.crossOrigin:p,setDownloadName:b})))}}sA.isSemiImage=!0,sA.contextType=Rk,sA.propTypes={style:c().object,className:c().string,src:c().string,width:c().oneOfType([c().string,c().number]),height:c().oneOfType([c().string,c().number]),alt:c().string,placeholder:c().node,fallback:c().oneOfType([c().string,c().node]),preview:c().oneOfType([c().bool,c().object]),onLoad:c().func,onError:c().func,onClick:c().func,crossOrigin:c().string,imageID:c().number},sA.defaultProps={preview:!0};const aA=sA;class oA extends k.A{constructor(){super(...arguments),this.handleVisibleChange=e=>{const{visible:t,onVisibleChange:i}=this.getProps();t in this.getProps()||this.setState({visible:e}),i&&i(e)},this.handleCurrentIndexChange=e=>{const{currentIndex:t,onChange:i}=this.getProps();t in this.getProps()||this.setState({currentIndex:e}),i&&i(e)}}}var lA=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const cA=Ok.PREFIX;class hA extends M.A{get adapter(){return Object.assign({},super.adapter)}constructor(e){super(e),this.observerImages=()=>{this.previewObserver?this.previewObserver.disconnect():this.previewObserver=new IntersectionObserver((e=>{e.forEach((e=>{var t;const i=null===(t=e.target.dataset)||void 0===t?void 0:t.src;e.isIntersecting&&i&&(e.target.src=i,e.target.removeAttribute("data-src"),this.previewObserver.unobserve(e.target))}))}),{root:document.querySelector("#".concat(this.previewGroupId)),rootMargin:this.props.lazyLoadMargin});document.querySelectorAll(".".concat(cA,"-img")).forEach((e=>this.previewObserver.observe(e)))},this.handleVisibleChange=e=>{this.foundation.handleVisibleChange(e)},this.handleCurrentIndexChange=e=>{this.foundation.handleCurrentIndexChange(e)},this.loopImageIndex=()=>{const{children:e}=this.props;let t=0;const i=[],n=[],r=e=>o.Children.map(e,(e=>{var s;if(e&&e.props&&e.type&&e.type.isSemiImage){const{src:r,preview:a,alt:l}=e.props;if(a){const l=y()(a)&&null!==(s=a.src)&&void 0!==s?s:r;return i.push(l),n.push(null===a||void 0===a?void 0:a.previewTitle),o.cloneElement(e,{imageID:t++})}return e}return e&&e.props&&e.props.children?o.cloneElement(e,{children:r(e.props.children)}):e}));return{srcListInChildren:i,newChildren:r(e),titles:n}},this.state={currentIndex:e.currentIndex||e.defaultCurrentIndex||0,visible:e.visible||e.currentDefaultVisible||!1},this.foundation=new oA(this.adapter),this.previewGroupId=(0,Ie.Ae)({prefix:"semi-image-preview-group",length:4}),this.previewRef=o.createRef()}componentDidMount(){this.props.lazyLoad&&this.observerImages()}componentDidUpdate(e){if(this.props.lazyLoad){const t=o.Children.toArray(e.children).map((e=>(0,o.isValidElement)(e)?e.key:null)),i=o.Children.toArray(this.props.children).map((e=>(0,o.isValidElement)(e)?e.key:null));a()(t,i)||this.observerImages()}}static getDerivedStateFromProps(e,t){const i={};return"currentIndex"in e&&e.currentIndex!==t.currentIndex&&(i.currentIndex=e.currentIndex),"visible"in e&&e.visible!==t.visible&&(i.visible=e.visible),i}componentWillUnmount(){this.previewObserver&&(this.previewObserver.disconnect(),this.previewObserver=null)}render(){const e=this.props,{src:t,className:i,style:n,lazyLoad:r,setDownloadName:s}=e,a=lA(e,["src","className","style","lazyLoad","setDownloadName"]),l=Object.assign(Object.assign({},Ue()(a,["previewCls","previewStyle"])),{className:null===a||void 0===a?void 0:a.previewCls,style:null===a||void 0===a?void 0:a.previewStyle}),{currentIndex:c,visible:h}=this.state,{srcListInChildren:u,newChildren:p,titles:g}=this.loopImageIndex(),f=[...Array.isArray(t)?t:"string"===typeof t?[t]:[],...u];return o.createElement(Rk.Provider,{value:{isGroup:!0,previewSrc:f,titles:g,currentIndex:c,visible:h,lazyLoad:r,previewObserver:this.previewObserver,setCurrentIndex:this.handleCurrentIndexChange,handleVisibleChange:this.handleVisibleChange,setDownloadName:s}},o.createElement("div",{id:this.previewGroupId,style:n,className:d()("".concat(cA,"-preview-group"),i)},p),o.createElement(tA,Object.assign({},l,{ref:this.previewRef,src:f,currentIndex:c,visible:h,onVisibleChange:this.handleVisibleChange})))}}hA.propTypes={style:c().object,className:c().string,visible:c().bool,src:c().oneOfType([c().string,c().array]),currentIndex:c().number,defaultCurrentIndex:c().number,defaultVisible:c().bool,maskClosable:c().bool,closable:c().bool,zoomStep:c().number,infinite:c().bool,showTooltip:c().bool,closeOnEsc:c().bool,prevTip:c().string,nextTip:c().string,zoomInTip:c().string,zoomOutTip:c().string,downloadTip:c().string,adaptiveTip:c().string,originTip:c().string,lazyLoad:c().bool,lazyLoadMargin:c().string,preLoad:c().bool,preLoadGap:c().number,previewCls:c().string,previewStyle:c().object,disableDownload:c().bool,zIndex:c().number,renderHeader:c().func,renderPreviewMenu:c().func,getPopupContainer:c().func,onVisibleChange:c().func,onChange:c().func,onClose:c().func,onZoomIn:c().func,onZoomOut:c().func,onPrev:c().func,onNext:c().func,onDownload:c().func,onRotateLeft:c().func,onRatioChange:c().func},hA.defaultProps={src:[],lazyLoad:!0,lazyLoadMargin:"0px 100px 100px 0px",closable:!0}},162:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var n=i(33097),r=i.n(n),s=i(65043),a=i(65173),o=i.n(a);const l=s.createContext(null);var c=i(6711);const h={code:"zh-CN",dateFnsLocale:i(88794).A,Pagination:{pageSize:"\u6bcf\u9875\u6761\u6570\uff1a${pageSize}",total:"\u603b\u9875\u6570\uff1a${total}",jumpTo:"\u8df3\u81f3",page:"\u9875"},Modal:{confirm:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},Tabs:{more:"\u66f4\u591a"},TimePicker:{placeholder:{time:"\u8bf7\u9009\u62e9\u65f6\u95f4",timeRange:"\u8bf7\u9009\u62e9\u65f6\u95f4\u8303\u56f4"},begin:"\u5f00\u59cb\u65f6\u95f4",end:"\u7ed3\u675f\u65f6\u95f4",hour:"\u65f6",minute:"\u5206",second:"\u79d2",AM:"\u4e0a\u5348",PM:"\u4e0b\u5348"},DatePicker:{placeholder:{date:"\u8bf7\u9009\u62e9\u65e5\u671f",dateTime:"\u8bf7\u9009\u62e9\u65e5\u671f\u53ca\u65f6\u95f4",dateRange:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],dateTimeRange:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],monthRange:["\u5f00\u59cb\u6708\u4efd","\u7ed3\u675f\u6708\u4efd"]},presets:"\u5feb\u6377\u9009\u62e9",footer:{confirm:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},selectDate:"\u8fd4\u56de\u9009\u62e9\u65e5\u671f",selectTime:"\u9009\u62e9\u65f6\u95f4",year:"\u5e74",month:"\u6708",day:"\u65e5",monthText:"${year}\u5e74 ${month}",months:{1:"1\u6708",2:"2\u6708",3:"3\u6708",4:"4\u6708",5:"5\u6708",6:"6\u6708",7:"7\u6708",8:"8\u6708",9:"9\u6708",10:"10\u6708",11:"11\u6708",12:"12\u6708"},fullMonths:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},weeks:{Mon:"\u4e00",Tue:"\u4e8c",Wed:"\u4e09",Thu:"\u56db",Fri:"\u4e94",Sat:"\u516d",Sun:"\u65e5"},localeFormatToken:{FORMAT_SWITCH_DATE:"yyyy-MM-dd"}},Navigation:{collapseText:"\u6536\u8d77\u4fa7\u8fb9\u680f",expandText:"\u5c55\u5f00\u4fa7\u8fb9\u680f"},Popconfirm:{confirm:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},Table:{emptyText:"\u6682\u65e0\u6570\u636e",pageText:"\u663e\u793a\u7b2c ${currentStart} \u6761-\u7b2c ${currentEnd} \u6761\uff0c\u5171 ${total} \u6761"},Select:{emptyText:"\u6682\u65e0\u6570\u636e",createText:"\u521b\u5efa"},Cascader:{emptyText:"\u6682\u65e0\u6570\u636e"},Tree:{emptyText:"\u6682\u65e0\u6570\u636e",searchPlaceholder:"\u641c\u7d22"},List:{emptyText:"\u6682\u65e0\u6570\u636e"},Calendar:{allDay:"\u5168\u5929",AM:"\u4e0a\u5348${time}\u65f6",PM:"\u4e0b\u5348${time}\u65f6",datestring:"\u65e5",remaining:"\u8fd8\u6709${remained}\u9879"},Upload:{mainText:"\u70b9\u51fb\u4e0a\u4f20\u6587\u4ef6\u6216\u62d6\u62fd\u6587\u4ef6\u5230\u8fd9\u91cc",illegalTips:"\u4e0d\u652f\u6301\u6b64\u7c7b\u578b\u6587\u4ef6",legalTips:"\u677e\u624b\u5f00\u59cb\u4e0a\u4f20",retry:"\u91cd\u8bd5",replace:"\u66ff\u6362\u6587\u4ef6",clear:"\u6e05\u7a7a",selectedFiles:"\u5df2\u9009\u62e9\u6587\u4ef6",illegalSize:"\u6587\u4ef6\u5c3a\u5bf8\u4e0d\u5408\u6cd5",fail:"\u4e0a\u4f20\u5931\u8d25"},TreeSelect:{searchPlaceholder:"\u641c\u7d22"},Typography:{copy:"\u590d\u5236",copied:"\u590d\u5236\u6210\u529f",expand:"\u5c55\u5f00",collapse:"\u6536\u8d77"},Transfer:{emptyLeft:"\u6682\u65e0\u6570\u636e",emptySearch:"\u65e0\u641c\u7d22\u7ed3\u679c",emptyRight:"\u6682\u65e0\u5185\u5bb9\uff0c\u53ef\u4ece\u5de6\u4fa7\u52fe\u9009",placeholder:"\u641c\u7d22",clear:"\u6e05\u7a7a",selectAll:"\u5168\u9009",clearSelectAll:"\u53d6\u6d88\u5168\u9009",total:"\u603b\u4e2a\u6570\uff1a${total}",selected:"\u5df2\u9009\u4e2a\u6570\uff1a${total}"},Form:{optional:"\uff08\u53ef\u9009\uff09"},Image:{preview:"\u9884\u89c8",loading:"\u52a0\u8f7d\u4e2d",loadError:"\u52a0\u8f7d\u5931\u8d25",prevTip:"\u4e0a\u4e00\u5f20",nextTip:"\u4e0b\u4e00\u5f20",zoomInTip:"\u653e\u5927",zoomOutTip:"\u7f29\u5c0f",rotateTip:"\u65cb\u8f6c",downloadTip:"\u4e0b\u8f7d",adaptiveTip:"\u9002\u5e94\u9875\u9762",originTip:"\u539f\u59cb\u5c3a\u5bf8"}};class d extends s.Component{renderChildren(e,t){const{componentName:i}=this.props;let n=e;(null===e||void 0===e?void 0:e.code)||(n=h);const s=r()(h,"dateFnsLocale"),a=r()(n,"dateFnsLocale",s);return t(n[i],n.code,a)}render(){const{children:e}=this.props;return s.createElement(c.A.Consumer,null,(t=>{let{locale:i}=t;return s.createElement(l.Consumer,null,(t=>this.renderChildren(i||t,e)))}))}}d.propTypes={componentName:o().string.isRequired,children:o().any},d.defaultProps={componentName:""}},46001:(e,t,i)=>{"use strict";i.d(t,{A:()=>A});var n=i(75713),r=i.n(n),s=i(11629),a=i.n(s),o=i(65043),l=i(98139),c=i.n(l),h=i(65173),d=i.n(h),u=i(6711),p=i(63972),g=i(11646),f=i(33097),m=i.n(f),v=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t="",className:i,arrowStyle:n,popStyle:r}=e,s=v(e,["position","className","arrowStyle","popStyle"]),a=0===t.indexOf("top")||0===t.indexOf("bottom"),l=c()(i,p.Y7.ARROW),h=m()(n,"borderOpacity",p.P$.DEFAULT_ARROW_STYLE.borderOpacity),d=m()(n,"backgroundColor",m()(r,"backgroundColor",p.P$.DEFAULT_ARROW_STYLE.backgroundColor)),u=m()(n,"borderColor",m()(r,"borderColor",p.P$.DEFAULT_ARROW_STYLE.borderColor)),g=Object.assign(Object.assign({},s),{width:p.nL.ARROW_BOUNDING.width,height:p.nL.ARROW_BOUNDING.height,xmlns:"http://www.w3.org/2000/svg",className:l});return a?o.createElement("svg",Object.assign({},g),o.createElement("path",{d:"M0 0.5L0 1.5C4 1.5, 5.5 3, 7.5 5S10,8 12,8S14.5 7, 16.5 5S20,1.5 24,1.5L24 0.5L0 0.5z",fill:u,opacity:h}),o.createElement("path",{d:"M0 0L0 1C4 1, 5.5 2, 7.5 4S10,7 12,7S14.5  6, 16.5 4S20,1 24,1L24 0L0 0z",fill:d})):o.createElement("svg",Object.assign({},g),o.createElement("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z",fill:u,opacity:h}),o.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z",fill:d}))};y.propTypes={position:d().string,className:d().string,arrowStyle:d().object,popStyle:d().object};const b=y;var _=i(49825),x=i(11692),S=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const w=p.P$.POSITION_SET,C=p.P$.TRIGGER_SET;class k extends o.PureComponent{constructor(e){super(e),this.focusTrigger=()=>{var e;null===(e=this.tooltipRef.current)||void 0===e||e.focusTrigger()},this.renderPopCard=e=>{let{initialFocusRef:t}=e;const{content:i,contentClassName:n,prefixCls:r}=this.props,{direction:s}=this.context,a=c()(r,n,{["".concat(r,"-rtl")]:"rtl"===s}),l=this.renderContentNode({initialFocusRef:t,content:i});return o.createElement("div",{className:a},o.createElement("div",{className:"".concat(r,"-content")},l))},this.renderContentNode=e=>{const{initialFocusRef:t,content:i}=e,n={initialFocusRef:t};return a()(i)?i(n):i},this.tooltipRef=o.createRef()}render(){const e=this.props,{children:t,prefixCls:i,showArrow:n,arrowStyle:r={},arrowBounding:s,position:a,style:l,trigger:c}=e,h=S(e,["children","prefixCls","showArrow","arrowStyle","arrowBounding","position","style","trigger"]);let{spacing:d}=this.props;const u={position:a,className:"",popStyle:l,arrowStyle:r},f=!!n&&o.createElement(b,Object.assign({},u));(0,_.A)(d)&&(d=n?p.nL.SPACING_WITH_ARROW:p.nL.SPACING);const m="click"===c||"custom"===c?"dialog":"tooltip";return o.createElement(g.A,Object.assign({guardFocus:!0,ref:this.tooltipRef},h,{trigger:c,position:a,style:l,content:this.renderPopCard,prefixCls:i,spacing:d,showArrow:f,arrowBounding:s,role:m}),t)}}k.contextType=u.A,k.propTypes={children:d().node,content:d().oneOfType([d().node,d().func]),visible:d().bool,autoAdjustOverflow:d().bool,motion:d().bool,position:d().oneOf(w),margin:d().oneOfType([d().number,d().object]),mouseEnterDelay:d().number,mouseLeaveDelay:d().number,trigger:d().oneOf(C).isRequired,contentClassName:d().oneOfType([d().string,d().array]),onVisibleChange:d().func,onClickOutSide:d().func,style:d().object,spacing:d().oneOfType([d().number,d().object]),zIndex:d().number,showArrow:d().bool,arrowStyle:d().shape({borderColor:d().string,backgroundColor:d().string,borderOpacity:d().oneOfType([d().string,d().number])}),arrowPointAtCenter:d().bool,arrowBounding:d().object,prefixCls:d().string,guardFocus:d().bool,disableArrowKeyDown:d().bool},k.__SemiComponentName__="Popover",k.defaultProps=(0,x.bQ)(k.__SemiComponentName__,{arrowBounding:p.nL.ARROW_BOUNDING,showArrow:!1,autoAdjustOverflow:!0,zIndex:p.nL.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",cancelText:"No",okText:"Yes",position:"bottom",prefixCls:p.Y7.PREFIX,onClickOutSide:r(),onEscKeyDown:r(),closeOnEsc:!0,returnFocusOnClose:!0,guardFocus:!0,disableFocusListener:!0});const A=k},42881:(e,t,i)=>{"use strict";i.d(t,{A:()=>c,G:()=>n});var n,r=i(65043),s=i(97950),a=i(65173),o=i.n(a),l=i(54089);!function(e){e.Width="width",e.Height="height",e.All="all"}(n||(n={}));class c extends l.A{constructor(e){var t;super(e),t=this,this.formerPropertyValue=new Map,this.getElement=()=>{try{return(0,s.findDOMNode)(this.childNode||this)}catch(e){return null}},this.handleResizeEventTriggered=e=>{var t,i,r,s;if(this.props.observerProperty===n.All)null===(i=(t=this.props).onResize)||void 0===i||i.call(t,e);else{const t=[];for(const i of e)this.formerPropertyValue.has(i.target)?i.contentRect[this.props.observerProperty]!==this.formerPropertyValue.get(i.target)&&(this.formerPropertyValue.set(i.target,i.contentRect[this.props.observerProperty]),t.push(i)):(this.formerPropertyValue.set(i.target,i.contentRect[this.props.observerProperty]),t.push(i));t.length>0&&(null===(s=(r=this.props).onResize)||void 0===s||s.call(r,t))}},this.observeElement=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=t.getElement();t.observer||(t.observer=new ResizeObserver(t.handleResizeEventTriggered)),i&&i instanceof Element?(i!==t.element||e)&&(t.observer.disconnect(),t.element=i,t.observer.observe(i),t.props.observeParent&&i.parentNode&&i.parentNode.ownerDocument&&i.parentNode.ownerDocument.defaultView&&i.parentNode instanceof i.parentNode.ownerDocument.defaultView.HTMLElement&&(t._parentNode=i.parentNode,t.observer.observe(t._parentNode))):t.observer.disconnect()},this.mergeRef=(e,t)=>{this.childNode=t,"function"===typeof e?e(t):"object"===typeof e&&e&&"current"in e&&(e.current=t)},globalThis.ResizeObserver&&(this.observer=new ResizeObserver(this.handleResizeEventTriggered))}componentDidMount(){var e;null===(e=this.observeElement)||void 0===e||e.call(this)}componentDidUpdate(e){var t;null===(t=this.observeElement)||void 0===t||t.call(this,this.props.observeParent!==e.observeParent)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null,this.element=null)}render(){const e=r.Children.only(this.props.children),{ref:t}=e;return r.cloneElement(e,{ref:e=>this.mergeRef(t,e)})}}c.propTypes={onResize:o().func,observeParent:o().bool,observerProperty:o().string,delayTick:o().number},c.defaultProps={onResize:()=>{},observeParent:!1,observerProperty:"all",delayTick:0}},11646:(e,t,i)=>{"use strict";i.d(t,{A:()=>J});var n=i(19853),r=i.n(n),s=i(11629),a=i.n(s),o=i(54320),l=i.n(o),c=i(62580),h=i.n(c),d=i(1488),u=i.n(d),p=i(33097),g=i.n(p),f=i(75713),m=i.n(f),v=i(79889),y=i.n(v),b=i(65043),_=i(97950),x=i(98139),S=i.n(x),w=i(65173),C=i.n(w),k=i(63322),A=i(50557),E=i(28813),T=i(41885),O=i(24864),P=i(76085);const M={TOP:/top/i,RIGHT:/right/i,BOTTOM:/bottom/i,LEFT:/left/i},I={left:0,top:0,height:0,width:0,scrollLeft:0,scrollTop:0};class R extends O.A{constructor(e){var t;super(Object.assign({},e)),t=this,this.removePortal=()=>{this._adapter.removePortal()},this.setDisplayNone=(e,t)=>{this._adapter.setDisplayNone(e,t)},this.updateStateIfCursorOnTrigger=e=>{var t,i;if(null===(t=null===e||void 0===e?void 0:e.matches)||void 0===t?void 0:t.call(e,":hover")){const e=this._adapter.getEventName(),t=this.getState("triggerEventSet");null===(i=t[e.mouseEnter])||void 0===i||i.call(t)}},this.onResize=()=>{this.calcPosition()},this.delayShow=()=>{const e=this.getProp("mouseEnterDelay");this.clearDelayTimer(),e>0?this._timer=setTimeout((()=>{this.show(),this.clearDelayTimer()}),e):this.show()},this.show=()=>{const e=this.getProp("content"),t=this.getProp("trigger"),i=this.getProp("clickTriggerToHide"),{visible:n,displayNone:r}=this.getStates();r&&this.setDisplayNone(!1),n||(this.clearDelayTimer(),this._adapter.on("portalInserted",(()=>{this.calcPosition()})),this._adapter.on("positionUpdated",(()=>{this._togglePortalVisible(!0)})),this._adapter.insertPortal(e,{left:-9999,top:-9999}),"custom"===t&&this._adapter.registerClickOutsideHandler((()=>{})),("click"===t||i||"contextMenu"===t)&&this._adapter.registerClickOutsideHandler(this.hide),this._bindScrollEvent(),this._bindResizeEvent())},this.calcPosition=function(e,i,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=(l()(e)?t._adapter.getTriggerBounding():e)||Object.assign({},I),n=(l()(n)?t._adapter.getPopupContainerRect():n)||Object.assign({},I),i=(l()(i)?t._adapter.getWrapperBounding():i)||Object.assign({},I);let s=t.calcPosStyle({triggerRect:e,wrapperRect:i,containerRect:n}),a=t.getProp("position");if(t.getProp("autoAdjustOverflow")){const{position:r,isHeightOverFlow:o,isWidthOverFlow:l}=t.adjustPosIfNeed(a,s,e,i,n);(a!==r||o||l)&&(a=r,s=t.calcPosStyle({triggerRect:e,wrapperRect:i,containerRect:n,position:a,spacing:null,isOverFlow:[o,l]}))}return r&&t._mounted&&t._adapter.setPosition(Object.assign(Object.assign({},s),{position:a})),s},this.delayHide=()=>{const e=this.getProp("mouseLeaveDelay");this.clearDelayTimer(),e>0?this._timer=setTimeout((()=>{this.hide(),this.clearDelayTimer()}),e):this.hide()},this.hide=()=>{this.clearDelayTimer(),this._togglePortalVisible(!1),this._adapter.off("portalInserted"),this._adapter.off("positionUpdated")},this.handleContainerKeydown=e=>{const{guardFocus:t,closeOnEsc:i}=this.getProps();switch(e&&e.key){case"Escape":i&&this._handleEscKeyDown(e);break;case"Tab":if(t){const t=this._adapter.getContainer(),i=this._adapter.getFocusableElements(t);i.length&&(e.shiftKey?this._handleContainerShiftTabKeyDown(i,e):this._handleContainerTabKeyDown(i,e))}}},this._timer=null}init(){const{wrapperId:e}=this.getProps();this._mounted=!0,this._bindEvent(),this._shouldShow(),this._initContainerPosition(),e||this._adapter.setId()}destroy(){this._mounted=!1,this.unBindEvent()}_bindEvent(){const e=this.getProp("trigger"),{triggerEventSet:t,portalEventSet:i}=this._generateEvent(e);this._bindTriggerEvent(t),this._bindPortalEvent(i),this._bindResizeEvent()}unBindEvent(){this._adapter.unregisterClickOutsideHandler(),this.unBindResizeEvent(),this.unBindScrollEvent(),clearTimeout(this._timer)}_bindTriggerEvent(e){this._adapter.registerTriggerEvent(e)}_bindPortalEvent(e){this._adapter.registerPortalEvent(e)}_bindResizeEvent(){this._adapter.registerResizeHandler(this.onResize)}unBindResizeEvent(){this._adapter.unregisterResizeHandler(this.onResize)}_adjustPos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>3?arguments[3]:void 0;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"reverse"){case"reverse":default:return this._reversePos(e,t);case"expand":return this._expandPos(e,i);case"reduce":return this._reducePos(e)}}_reversePos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){if(M.TOP.test(e))return e.replace("top","bottom").replace("Top","Bottom");if(M.BOTTOM.test(e))return e.replace("bottom","top").replace("Bottom","Top")}else{if(M.LEFT.test(e))return e.replace("left","right").replace("Left","Right");if(M.RIGHT.test(e))return e.replace("right","left").replace("Right","Left")}return e}_expandPos(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(e)}_reducePos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=["Top","Bottom","Left","Right"].find((t=>e.endsWith(t)));return t?e.replace(t,""):e}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}_generateEvent(e){const t=this._adapter.getEventName(),i={[t.keydown]:e=>{this._handleTriggerKeydown(e)}};let n={};switch(e){case"focus":i[t.focus]=()=>{this.delayShow()},i[t.blur]=()=>{this.delayHide()},n=i;break;case"click":i[t.click]=()=>{this.show()},n={};break;case"hover":i[t.mouseEnter]=()=>{this.setCache("isClickToHide",!1),this.delayShow()},i[t.mouseLeave]=()=>{this.delayHide()},i[t.focus]=()=>{const{disableFocusListener:e}=this.getProps();!e&&this.delayShow()},i[t.blur]=()=>{const{disableFocusListener:e}=this.getProps();!e&&this.delayHide()},n=Object.assign({},i),this.getProp("clickToHide")&&(n[t.click]=()=>{this.setCache("isClickToHide",!0),this.hide()},n[t.mouseEnter]=()=>{this.getCache("isClickToHide")||this.delayShow()});break;case"custom":default:break;case"contextMenu":i[t.contextMenu]=e=>{e.preventDefault(),this.show()}}return{triggerEventSet:i,portalEventSet:n}}_shouldShow(){this.getProp("visible")&&this.show()}_togglePortalVisible(e){this.getState("visible")!==e&&this._adapter.togglePortalVisible(e,(()=>{e&&this._adapter.setInitialFocus(),this._adapter.notifyVisibleChange(e)}))}_roundPixel(e){return"number"===typeof e?Math.round(e):e}calcTransformOrigin(e,t,i,n){if(e&&t&&null!=i&&null!=n){if(this.getProp("transformFromCenter")){if(["topLeft","bottomLeft"].includes(e))return"".concat(this._roundPixel(t.width/2),"px ").concat(100*-n,"%");if(["topRight","bottomRight"].includes(e))return"calc(100% - ".concat(this._roundPixel(t.width/2),"px) ").concat(100*-n,"%");if(["leftTop","rightTop"].includes(e))return"".concat(100*-i,"% ").concat(this._roundPixel(t.height/2),"px");if(["leftBottom","rightBottom"].includes(e))return"".concat(100*-i,"% calc(100% - ").concat(this._roundPixel(t.height/2),"px)")}return"".concat(100*-i,"% ").concat(100*-n,"%")}return null}calcPosStyle(e){var t;const{spacing:i,isOverFlow:n}=e,{innerWidth:r}=window,s=(l()(e.triggerRect)?e.triggerRect:this._adapter.getTriggerBounding())||Object.assign({},I),a=(l()(e.containerRect)?e.containerRect:this._adapter.getPopupContainerRect())||Object.assign({},I),o=(l()(e.wrapperRect)?e.wrapperRect:this._adapter.getWrapperBounding())||Object.assign({},I),c=null!=e.position?e.position:this.getProp("position"),h=null!=i?i:this.getProp("spacing"),{arrowPointAtCenter:d,showArrow:u,arrowBounding:p}=this.getProps(),f=u&&d;let m=h,v=0;if("number"!==typeof h){const e=c.includes("top")||c.includes("bottom");m=e?h.y:h.x,v=e?h.x:h.y}const y=g()(p,"width",24),b=g()(p,"width",24),_=g()(p,"offsetY",0);let x,S,w=0,C=0;const k=s.left+s.width/2,A=s.top+s.height/2,E=6+y/2,T=6+b/2,O=o.height-a.height,P=o.width-a.width,M=O>0?O:0,R=P>0?P:0,D=n&&n[0],L=n&&n[1],j=k-a.left<a.right-k,F=A-a.top<a.bottom-A,B=o.width>r,N=Math.abs((null===o||void 0===o?void 0:o.width)-(null===(t=this._adapter.getContainer())||void 0===t?void 0:t.clientWidth))>1;switch(N&&(m=m*o.width/this._adapter.getContainer().clientWidth),c){case"top":x=L?j?a.left+o.width/2:a.right-o.width/2+R:k+v,S=D?a.bottom+M:s.top-m,w=-.5,C=-1;break;case"topLeft":x=L?B?a.left:a.right-o.width:f?k-E+v:s.left+v,S=D?a.bottom+M:s.top-m,C=-1;break;case"topRight":x=L?a.right+R:f?k+E+v:s.right+v,S=D?a.bottom+M:s.top-m,C=-1,w=-1;break;case"left":x=L?a.right+R-m+E:s.left-m,S=D?F?a.top+o.height/2:a.bottom-o.height/2+M:A+v,w=-1,C=-.5;break;case"leftTop":x=L?a.right+R-m+E:s.left-m,S=D?a.top:f?A-T+v:s.top+v,w=-1;break;case"leftBottom":x=L?a.right+R-m+E:s.left-m,S=D?a.bottom+M:f?A+T+v:s.bottom+v,w=-1,C=-1;break;case"bottom":x=L?j?a.left+o.width/2:a.right-o.width/2+R:k+v,S=D?a.top+T-m:s.top+s.height+m,w=-.5;break;case"bottomLeft":x=L?B?a.left:a.right-o.width:f?k-E+v:s.left+v,S=D?a.top+T-m:s.top+s.height+m;break;case"bottomRight":x=L?a.right+R:f?k+E+v:s.right+v,S=D?a.top+T-m:s.top+s.height+m,w=-1;break;case"right":x=L?a.left-m+E:s.right+m,S=D?F?a.top+o.height/2:a.bottom-o.height/2+M:A+v,C=-.5;break;case"rightTop":x=L?a.left-m+E:s.right+m,S=D?a.top:f?A-T+v:s.top+v;break;case"rightBottom":x=L?a.left-m+E:s.right+m,S=D?a.bottom+M:f?A+T+v:s.bottom+v,C=-1;break;case"leftTopOver":x=s.left-m,S=s.top-m;break;case"rightTopOver":x=s.right+m,S=s.top-m,w=-1;break;case"leftBottomOver":x=s.left-m,S=s.bottom+m,C=-1;break;case"rightBottomOver":x=s.right+m,S=s.bottom+m,w=-1,C=-1}const z=this.calcTransformOrigin(c,s,w,C),H=this._adapter.containerIsBody();if(x-=a.left,S-=a.top,N&&(x/=o.width/this._adapter.getContainer().clientWidth),N&&(S/=o.height/this._adapter.getContainer().clientHeight),H&&!this._adapter.containerIsRelativeOrAbsolute()){const e=this._adapter.getDocumentElementBounding();x+=a.left-e.left,S+=a.top-e.top}x=H?x:x+a.scrollLeft,S=H?S:S+a.scrollTop;const V=s.height;if(this.getProp("showArrow")&&!d&&V<=2*(b/2+_)){const e=V/2-(_+b/2);!c.includes("Top")&&!c.includes("Bottom")||c.includes("Over")||(S=c.includes("Top")?S+e:S-e)}const U={left:this._roundPixel(x),top:this._roundPixel(S)};let W="";return null!=w&&(W+="translateX(".concat(100*w,"%) "),Object.defineProperty(U,"translateX",{enumerable:!1,value:w})),null!=C&&(W+="translateY(".concat(100*C,"%) "),Object.defineProperty(U,"translateY",{enumerable:!1,value:C})),null!=z&&(U.transformOrigin=z),W&&(U.transform=W),U}isLR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("left")||e.includes("right")}isTB(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("top")||e.includes("bottom")}isReverse(e,t,i){return e<i&&t>i}isOverFlow(e,t,i){return e<i&&t<i}isHalfOverFlow(e,t,i){return e<i||t<i}isHalfAllEnough(e,t,i){return e>=i||t>=i}getReverse(e,t,i,n){return e&&n||i}adjustPosIfNeed(e,t,i,n,r){const{innerWidth:s,innerHeight:a}=window,{margin:o}=this.getProps(),l="number"===typeof o?o:o.marginLeft,c="number"===typeof o?o:o.marginTop,h="number"===typeof o?o:o.marginRight,d="number"===typeof o?o:o.marginBottom;let u=!1,p=!1;const g=this.getProp("spacing");let f=g,m=0;if("number"!==typeof g){const t=e.includes("top")||e.includes("bottom");f=t?g.y:g.x,m=t?g.x:g.y}if(n.width>0&&n.height>0){const t=i.left,o=i.right,g=i.top,v=i.bottom,y=s-t,b=a-g,_=s-o,x=a-v,S=n.width>i.width,w=n.height>i.height,C=g-c<n.height+f&&x-d>n.height+f,k=t-l<n.width+f&&_-h>n.width+f,A=x-d<n.height+f&&g-c>n.height+f,E=_-h<n.width+f&&t-l>n.width+f,T=(b-d<n.height+f&&n.height,v-c<n.height+f&&n.height,b<n.height+m&&v>n.height+m),O=v<n.height+m&&b>n.height+m,P=y<n.width+m&&o>n.width+m,M=o<n.width+m&&y>n.width+m,I=b<n.height+f&&v>n.height+f,R=v<n.height+f&&b>n.height+f,D=y<n.width&&o>n.width,L=o<n.width&&y>n.width,j=g-r.top,F=t-r.left,B=j+i.height,N=F+i.width,z=r.bottom-v,H=r.right-o,V=z+i.height,U=H+i.width,W=this.isReverse(j-c,z-d,n.height+f),G=this.isReverse(F-l,H-h,n.width+f),K=this.isReverse(z-d,j-c,n.height+f),Y=this.isReverse(H-h,F-l,n.width+f),X=(this.isReverse(V-d,B-c,n.height+f),this.isReverse(B-c,V-d,n.height+f),this.isReverse(V,B,n.height+m)),q=this.isReverse(B,V,n.height+m),Z=this.isReverse(U,N,n.width+m),Q=this.isReverse(N,U,n.width+m),$=i.height/2,J=i.width/2,ee=this.isOverFlow(g-c,x-d,n.height+f),te=this.isOverFlow(t-l,_-h,n.width+f),ie=this.isOverFlow(v-c,b-d,n.height+f),ne=this.isOverFlow(o-l,y-h,n.width+f),re=this.isHalfOverFlow(v-$,b-$,(n.height+m)/2),se=this.isHalfOverFlow(o-J,y-J,(n.width+m)/2),ae=this.isHalfAllEnough(v-$,b-$,(n.height+m)/2),oe=this.isHalfAllEnough(o-J,y-J,(n.width+m)/2),le=this.isOverFlow(j-c,z-d,n.height+f),ce=this.isOverFlow(F-l,H-h,n.width+f),he=this.isOverFlow(B-c,V-d,n.height+f),de=this.isOverFlow(N-l,U-h,n.width+f),ue=this.isHalfOverFlow(B-$,V-$,(n.height+m)/2),pe=this.isHalfOverFlow(N-J,U-J,(n.width+m)/2),ge=this.isHalfAllEnough(B-$,V-$,(n.height+m)/2),fe=this.isHalfAllEnough(N-J,U-J,(n.width+m)/2),me=this.getReverse(ee,le,C,W),ve=this.getReverse(te,ce,k,G),ye=this.getReverse(ee,le,A,K),be=this.getReverse(te,ce,E,Y),_e=this.getReverse(ie,he,T,X),xe=this.getReverse(ie,he,O,q),Se=this.getReverse(ne,de,P,Z),we=this.getReverse(ne,de,M,Q),Ce=re&&ue,ke=se&&pe;switch(e){case"top":me&&(e=this._adjustPos(e,!0)),ke&&(Se||we)&&(e=this._adjustPos(e,!0,"expand",Se?"Right":"Left"));break;case"topLeft":me&&(e=this._adjustPos(e,!0)),Se&&S&&(e=this._adjustPos(e)),p&&(oe||fe)&&(e=this._adjustPos(e,!0,"reduce"));break;case"topRight":me&&(e=this._adjustPos(e,!0)),we&&S&&(e=this._adjustPos(e)),p&&(oe||fe)&&(e=this._adjustPos(e,!0,"reduce"));break;case"left":ve&&(e=this._adjustPos(e)),Ce&&(_e||xe)&&(e=this._adjustPos(e,!1,"expand",_e?"Bottom":"Top"));break;case"leftTop":ve&&(e=this._adjustPos(e)),_e&&w&&(e=this._adjustPos(e,!0)),u&&(ae||ge)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftBottom":ve&&(e=this._adjustPos(e)),xe&&w&&(e=this._adjustPos(e,!0)),u&&(ae||ge)&&(e=this._adjustPos(e,!1,"reduce"));break;case"bottom":ye&&(e=this._adjustPos(e,!0)),ke&&(Se||we)&&(e=this._adjustPos(e,!0,"expand",Se?"Right":"Left"));break;case"bottomLeft":ye&&(e=this._adjustPos(e,!0)),Se&&S&&(e=this._adjustPos(e)),p&&(oe||fe)&&(e=this._adjustPos(e,!0,"reduce"));break;case"bottomRight":ye&&(e=this._adjustPos(e,!0)),we&&S&&(e=this._adjustPos(e)),p&&(oe||fe)&&(e=this._adjustPos(e,!0,"reduce"));break;case"right":be&&(e=this._adjustPos(e)),Ce&&(_e||xe)&&(e=this._adjustPos(e,!1,"expand",_e?"Bottom":"Top"));break;case"rightTop":be&&(e=this._adjustPos(e)),_e&&w&&(e=this._adjustPos(e,!0)),u&&(ae||ge)&&(e=this._adjustPos(e,!1,"reduce"));break;case"rightBottom":be&&(e=this._adjustPos(e)),xe&&w&&(e=this._adjustPos(e,!0)),u&&(ae||ge)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftTopOver":I&&(e=this._adjustPos(e,!0)),D&&(e=this._adjustPos(e));break;case"leftBottomOver":R&&(e=this._adjustPos(e,!0)),D&&(e=this._adjustPos(e));break;case"rightTopOver":I&&(e=this._adjustPos(e,!0)),L&&(e=this._adjustPos(e));break;case"rightBottomOver":R&&(e=this._adjustPos(e,!0)),L&&(e=this._adjustPos(e))}this.isTB(e)&&(u=ee&&le,p="top"===e||"bottom"===e?se&&pe||o<0||_<0:ne&&de||o<0||_<0),this.isLR(e)&&(p=te&&ce,u="left"===e||"right"===e?re&&ue||g<0||b<0:ie&&he||g<0||b<0)}return{position:e,isHeightOverFlow:u,isWidthOverFlow:p}}_bindScrollEvent(){this._adapter.registerScrollHandler((()=>this.calcPosition()))}unBindScrollEvent(){this._adapter.unregisterScrollHandler()}_initContainerPosition(){this._adapter.updateContainerPosition()}_handleTriggerKeydown(e){const{closeOnEsc:t,disableArrowKeyDown:i}=this.getProps(),n=this._adapter.getContainer(),r=this._adapter.getFocusableElements(n),s=r.length;switch(e&&e.key){case"Escape":(0,P.jK)(e),t&&this._handleEscKeyDown(e);break;case"ArrowUp":!i&&s&&this._handleTriggerArrowUpKeydown(r,e);break;case"ArrowDown":!i&&s&&this._handleTriggerArrowDownKeydown(r,e)}}focusTrigger(){const{trigger:e,returnFocusOnClose:t,preventScroll:i}=this.getProps();if(t&&"custom"!==e){const e=this._adapter.getTriggerNode();e&&"focus"in e&&e.focus({preventScroll:i})}}_handleEscKeyDown(e){const{trigger:t}=this.getProps();"custom"!==t&&(this.focusTrigger(),this.hide()),this._adapter.notifyEscKeydown(e)}_handleContainerTabKeyDown(e,t){const{preventScroll:i}=this.getProps(),n=this._adapter.getActiveElement();e[e.length-1]===n&&(e[0].focus({preventScroll:i}),t.preventDefault())}_handleContainerShiftTabKeyDown(e,t){const{preventScroll:i}=this.getProps(),n=this._adapter.getActiveElement();e[0]===n&&(e[e.length-1].focus({preventScroll:i}),t.preventDefault())}_handleTriggerArrowDownKeydown(e,t){const{preventScroll:i}=this.getProps();e[0].focus({preventScroll:i}),t.preventDefault()}_handleTriggerArrowUpKeydown(e,t){const{preventScroll:i}=this.getProps();e[e.length-1].focus({preventScroll:i}),t.preventDefault()}}var D=i(76882),L=i(32050),j=i(54089),F=i(72125),B=i(11692),N=i(61902),z=i(6711),H=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const V=e=>{const{className:t,style:i}=e,n=H(e,["className","style"]);return b.createElement("svg",Object.assign({"aria-hidden":!0,className:t,style:i},n,{width:"24",height:"7",viewBox:"0 0 24 7",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}),b.createElement("path",{d:"M24 0V1C20 1 18.5 2 16.5 4C14.5 6 14 7 12 7C10 7 9.5 6 7.5 4C5.5 2 4 1 0 1V0H24Z"}))};var U=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const W=e=>{const{className:t,style:i}=e,n=U(e,["className","style"]);return b.createElement("svg",Object.assign({"aria-hidden":!0,className:t,style:i},n,{width:"7",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}),b.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z"}))},G=C().shape({offsetX:C().number,offsetY:C().number,width:C().number,height:C().number});var K=i(42459),Y=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const X=D.Y7.PREFIX,q=D.P$.POSITION_SET,Z=D.P$.TRIGGER_SET,Q=["flex","block","table","flow-root","grid"],$=()=>document.body;class J extends j.A{constructor(e){super(e),this.setContainerEl=e=>this.containerEl={current:e},this.isSpecial=e=>{if((0,F.A)(e))return Boolean(e.disabled);if((0,b.isValidElement)(e)){if(g()(e,"props.disabled"))return D.P$.STATUS_DISABLED;const t=g()(e,"props.loading"),i=!l()(e)&&!l()(e.type)&&("Button"===g()(e,"type.elementType")||"IconButton"===g()(e,"type.elementType"));if(t&&i)return D.P$.STATUS_LOADING}return!1},this.didLeave=()=>{this.props.keepDOM?this.foundation.setDisplayNone(!0):this.foundation.removePortal(),this.foundation.unBindEvent()},this.renderIcon=()=>{const{placement:e}=this.state,{showArrow:t,prefixCls:i,style:n}=this.props;let r=null;const s=S()(["".concat(i,"-icon-arrow")]),a=g()(n,"backgroundColor"),o=e.includes("left")||e.includes("right")?b.createElement(W,null):b.createElement(V,null);return t&&(r=(0,b.isValidElement)(t)?t:b.cloneElement(o,{className:s,style:{color:a,fill:"currentColor"}})),r},this.handlePortalInnerClick=e=>{this.props.clickToHide&&this.foundation.hide(),this.props.stopPropagation&&(0,B.dG)(e)},this.handlePortalMouseDown=e=>{this.props.stopPropagation&&(0,B.dG)(e)},this.handlePortalFocus=e=>{this.props.stopPropagation&&(0,B.dG)(e)},this.handlePortalBlur=e=>{this.props.stopPropagation&&(0,B.dG)(e)},this.handlePortalInnerKeyDown=e=>{this.foundation.handleContainerKeydown(e)},this.renderContentNode=e=>{const t={initialFocusRef:this.initialFocusRef};return a()(e)?e(t):e},this.renderPortal=()=>{const{containerStyle:e={},visible:t,portalEventSet:i,placement:n,displayNone:r,transitionState:s,id:a,isPositionUpdated:o}=this.state,{prefixCls:l,content:c,showArrow:h,style:d,motion:p,role:f,zIndex:m}=this.props,v=this.renderContentNode(c),{className:y}=this.props,_=this.context.direction,x=S()(y,{["".concat(l,"-wrapper")]:!0,["".concat(l,"-wrapper-show")]:t,["".concat(l,"-with-arrow")]:Boolean(h),["".concat(l,"-rtl")]:"rtl"===_}),w=this.renderIcon(),C=u()(e,p?["transformOrigin"]:void 0),A=g()(e,"transformOrigin"),E=g()(d,"opacity",null),T=E||1,O=b.createElement(K.A,{fillMode:"forwards",animationState:s,motion:p&&o,startClassName:"".concat(X,"enter"===s?"-animation-show":"-animation-hide"),onAnimationEnd:()=>{var e,t;"leave"===s&&(this.didLeave(),null===(t=(e=this.props).afterClose)||void 0===t||t.call(e))}},(e=>{let{animationStyle:t,animationClassName:s,animationEventsNeedBind:l}=e;return b.createElement("div",Object.assign({className:S()(x,s),style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),r?{display:"none"}:{}),{transformOrigin:A}),d),E?{opacity:o?T:"0"}:{})},i,l,{role:f,"x-placement":n,id:a}),b.createElement("div",{className:"".concat(X,"-content")},v),w)}));return b.createElement(N.A,{getPopupContainer:this.props.getPopupContainer,style:{zIndex:m}},b.createElement("div",{tabIndex:-1,className:"".concat(k._,"-portal-inner"),style:C,ref:this.setContainerEl,onClick:this.handlePortalInnerClick,onFocus:this.handlePortalFocus,onBlur:this.handlePortalBlur,onMouseDown:this.handlePortalMouseDown,onKeyDown:this.handlePortalInnerKeyDown},O))},this.wrapSpan=e=>{const{wrapperClassName:t}=this.props,i=g()(e,"props.style.display"),n=g()(e,"props.block"),r={};return"string"==typeof e||(r.display="inline-block"),(n||Q.includes(i))&&(r.width="100%"),b.createElement("span",{className:t,style:r},e)},this.mergeEvents=(e,t)=>{const i={};return h()(t,((t,n)=>{"function"===typeof t&&(i[n]=function(){t(...arguments),e&&"function"===typeof e[n]&&e[n](...arguments)})})),i},this.getPopupId=()=>this.state.id,this.state={visible:!1,transitionState:"",triggerEventSet:{},portalEventSet:{},containerStyle:{},isInsert:!1,placement:e.position||"top",transitionStyle:{},isPositionUpdated:!1,id:e.wrapperId,displayNone:!1},this.foundation=new R(this.adapter),this.eventManager=new E.A,this.triggerEl=b.createRef(),this.containerEl=b.createRef(),this.initialFocusRef=b.createRef(),this.clickOutsideHandler=null,this.resizeHandler=null,this.isWrapped=!1,this.containerPosition=void 0}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{on:function(){return e.eventManager.on(...arguments)},off:function(){return e.eventManager.off(...arguments)},insertPortal:(e,t)=>{var{position:i}=t,n=Y(t,["position"]);this.setState({isInsert:!0,transitionState:"enter",containerStyle:Object.assign(Object.assign({},this.state.containerStyle),n)},(()=>{setTimeout((()=>{this.eventManager.emit("portalInserted")}),0)}))},removePortal:()=>{this.setState({isInsert:!1,isPositionUpdated:!1})},getEventName:()=>({mouseEnter:"onMouseEnter",mouseLeave:"onMouseLeave",mouseOut:"onMouseOut",mouseOver:"onMouseOver",click:"onClick",focus:"onFocus",blur:"onBlur",keydown:"onKeyDown",contextMenu:"onContextMenu"}),registerTriggerEvent:e=>{this.setState({triggerEventSet:e})},registerPortalEvent:e=>{this.setState({portalEventSet:e})},getTriggerBounding:()=>{const e=this.adapter.getTriggerNode();return this.triggerEl.current=e,e&&e.getBoundingClientRect()},getPopupContainerRect:()=>{const e=this.getPopupContainer();let t=null;if(e&&(0,F.A)(e)){const i=(0,T.Ad)(e.getBoundingClientRect());t=Object.assign(Object.assign({},i),{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})}return t},containerIsBody:()=>this.getPopupContainer()===document.body,containerIsRelative:()=>{const e=this.getPopupContainer();return"relative"===window.getComputedStyle(e).getPropertyValue("position")},containerIsRelativeOrAbsolute:()=>["relative","absolute"].includes(this.containerPosition),getWrapperBounding:()=>{const e=this.containerEl&&this.containerEl.current;return e&&e.getBoundingClientRect()},getDocumentElementBounding:()=>document.documentElement.getBoundingClientRect(),setPosition:e=>{var{position:t}=e,i=Y(e,["position"]);this.setState({containerStyle:Object.assign(Object.assign({},this.state.containerStyle),i),placement:t,isPositionUpdated:!0},(()=>{this.eventManager.emit("positionUpdated")}))},setDisplayNone:(e,t)=>{this.setState({displayNone:e},t)},updatePlacementAttr:e=>{this.setState({placement:e})},togglePortalVisible:(e,t)=>{const i={};i.transitionState=e?"enter":"leave",i.visible=e,this.mounted&&this.setState(i,(()=>{t()}))},registerClickOutsideHandler:e=>{this.clickOutsideHandler&&this.adapter.unregisterClickOutsideHandler(),this.clickOutsideHandler=t=>{if(!this.mounted)return!1;let i=this.triggerEl&&this.triggerEl.current,n=this.containerEl&&this.containerEl.current;i=_.findDOMNode(i),n=_.findDOMNode(n);const r=t.target,s=t.composedPath&&t.composedPath()||[r],a=!!this.props.clickTriggerToHide&&(i&&i.contains(r)||s.includes(i));(i&&!i.contains(r)&&n&&!n.contains(r)&&!s.includes(n)&&!s.includes(i)||a)&&(this.props.onClickOutSide(t),e())},window.addEventListener("mousedown",this.clickOutsideHandler)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(window.removeEventListener("mousedown",this.clickOutsideHandler),this.clickOutsideHandler=null)},registerResizeHandler:e=>{this.resizeHandler&&this.adapter.unregisterResizeHandler(),this.resizeHandler=y()((t=>{if(!this.mounted)return!1;e(t)}),10),window.addEventListener("resize",this.resizeHandler,!1)},unregisterResizeHandler:()=>{this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler,!1),this.resizeHandler=null)},notifyVisibleChange:e=>{this.props.onVisibleChange(e)},registerScrollHandler:e=>{this.scrollHandler&&this.adapter.unregisterScrollHandler(),this.scrollHandler=y()((t=>{if(!this.mounted)return!1;const i=this.adapter.getTriggerNode();if(t.target.contains(i)){const i={x:t.target.scrollLeft,y:t.target.scrollTop};e(i)}}),10),window.addEventListener("scroll",this.scrollHandler,!0)},unregisterScrollHandler:()=>{this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler,!0),this.scrollHandler=null)},canMotion:()=>Boolean(this.props.motion),updateContainerPosition:()=>{const e=this.getPopupContainer();if(e&&(0,F.A)(e)){const t=window.getComputedStyle(e).getPropertyValue("position");this.containerPosition=t}},getContainerPosition:()=>this.containerPosition,getContainer:()=>this.containerEl&&this.containerEl.current,getTriggerNode:()=>{let e=this.triggerEl.current;return(0,F.A)(this.triggerEl.current)||(e=_.findDOMNode(this.triggerEl.current)),e},getFocusableElements:e=>(0,B.iq)(e),getActiveElement:()=>(0,B.bq)(),setInitialFocus:()=>{const{preventScroll:e}=this.props,t=g()(this,"initialFocusRef.current");t&&"focus"in t&&t.focus({preventScroll:e})},notifyEscKeydown:e=>{this.props.onEscKeyDown(e)},setId:()=>{this.setState({id:(0,L.Ae)()})}})}componentDidMount(){this.mounted=!0,this.getPopupContainer=this.props.getPopupContainer||this.context.getPopupContainer||$,this.foundation.init(),(0,B.Ct)((()=>{let e=this.triggerEl.current;e&&(e instanceof HTMLElement||(e=(0,_.findDOMNode)(e))),this.foundation.updateStateIfCursorOnTrigger(e)}),1)}componentWillUnmount(){this.mounted=!1,this.foundation.destroy()}focusTrigger(){this.foundation.focusTrigger()}rePosition(){return this.foundation.calcPosition()}componentDidUpdate(e,t){(0,A.A)(this.props.mouseLeaveDelay<this.props.mouseEnterDelay,"[Semi Tooltip] 'mouseLeaveDelay' cannot be less than 'mouseEnterDelay', which may cause the dropdown layer to not be hidden."),e.visible!==this.props.visible&&(["hover","focus"].includes(this.props.trigger)?this.props.visible?this.foundation.delayShow():this.foundation.delayHide():this.props.visible?this.foundation.show():this.foundation.hide()),r()(e.rePosKey,this.props.rePosKey)||this.rePosition()}render(){const{isInsert:e,triggerEventSet:t,visible:i,id:n}=this.state,{wrapWhenSpecial:r,role:s,trigger:a}=this.props;let{children:o}=this.props;const l=Object.assign({},g()(o,"props.style")),c={};if(r){const e=this.isSpecial(o);e?(l.pointerEvents="none",e===D.P$.STATUS_DISABLED&&(c.cursor="not-allowed"),o=(0,b.cloneElement)(o,{style:l}),"custom"!==a&&(o=this.wrapSpan(o)),this.isWrapped=!0):(0,b.isValidElement)(o)||(o=this.wrapSpan(o),this.isWrapped=!0)}let h={};"dialog"===s?(h["aria-expanded"]=i?"true":"false",h["aria-haspopup"]="dialog",h["aria-controls"]=n):h["aria-describedby"]=n;const d=b.cloneElement(o,Object.assign(Object.assign(Object.assign(Object.assign({},h),o.props),this.mergeEvents(o.props,t)),{style:Object.assign(Object.assign({},g()(o,"props.style")),c),className:S()(g()(o,"props.className")),ref:e=>{this.triggerEl.current=e;const{ref:t}=o;"function"===typeof t?t(e):t&&"object"===typeof t&&(t.current=e)},tabIndex:o.props.tabIndex||0,"data-popupid":n}));return b.createElement(b.Fragment,null,e?this.renderPortal():null,d)}}J.contextType=z.A,J.propTypes={children:C().node,motion:C().bool,autoAdjustOverflow:C().bool,position:C().oneOf(q),getPopupContainer:C().func,mouseEnterDelay:C().number,mouseLeaveDelay:C().number,trigger:C().oneOf(Z).isRequired,className:C().string,wrapperClassName:C().string,clickToHide:C().bool,clickTriggerToHide:C().bool,visible:C().bool,style:C().object,content:C().oneOfType([C().node,C().func]),prefixCls:C().string,onVisibleChange:C().func,onClickOutSide:C().func,spacing:C().oneOfType([C().number,C().object]),margin:C().oneOfType([C().number,C().object]),showArrow:C().oneOfType([C().bool,C().node]),zIndex:C().number,rePosKey:C().oneOfType([C().string,C().number]),arrowBounding:G,transformFromCenter:C().bool,arrowPointAtCenter:C().bool,stopPropagation:C().bool,role:C().string,wrapWhenSpecial:C().bool,guardFocus:C().bool,returnFocusOnClose:C().bool,preventScroll:C().bool,keepDOM:C().bool},J.__SemiComponentName__="Tooltip",J.defaultProps=(0,B.bQ)(J.__SemiComponentName__,{arrowBounding:D.nL.ARROW_BOUNDING,autoAdjustOverflow:!0,arrowPointAtCenter:!0,trigger:"hover",transformFromCenter:!0,position:"top",prefixCls:X,role:"tooltip",mouseEnterDelay:D.nL.MOUSE_ENTER_DELAY,mouseLeaveDelay:D.nL.MOUSE_LEAVE_DELAY,motion:!0,onVisibleChange:m(),onClickOutSide:m(),spacing:D.nL.SPACING,margin:D.nL.MARGIN,showArrow:!0,wrapWhenSpecial:!0,zIndex:D.nL.DEFAULT_Z_INDEX,closeOnEsc:!1,guardFocus:!1,returnFocusOnClose:!1,onEscKeyDown:m(),disableFocusListener:!1,disableArrowKeyDown:!1,keepDOM:!1})},60367:(e,t,i)=>{"use strict";i.d(t,{A:()=>G});var n=i(11629),r=i.n(n),s=i(89124),a=i.n(s),o=i(90620),l=i.n(o),c=i(34677),h=i.n(c),d=i(1488),u=i.n(d),p=i(141),g=i.n(p),f=i(65043),m=i(98139),v=i.n(m),y=i(65173),b=i.n(y),_=i(75196),x=i(10727),S=i(11646),w=i(31324),C=i.n(w),k=i(12965),A=i(162),E=i(95225);const T=(0,i(96041).T)((function(e){return f.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),f.createElement("path",{d:"M7 4C7 2.89543 7.89543 2 9 2H20C21.1046 2 22 2.89543 22 4V15C22 16.1046 21.1046 17 20 17H19V8C19 6 18 5 16 5H7V4Z",fill:"currentColor"}),f.createElement("path",{d:"M5 7C3.89543 7 3 7.89543 3 9V19C3 20.1046 3.89543 21 5 21H15C16.1046 21 17 20.1046 17 19V9C17 7.89543 16.1046 7 15 7H5Z",fill:"currentColor"}))}),"copy");var O=i(9640);const P=_.Y.PREFIX;class M extends f.PureComponent{constructor(e){super(e),this.copy=e=>{const{content:t,duration:i,onCopy:n}=this.props,r=C()(t);n&&n(e,t,r),this.setCopied(t,i)},this.setCopied=(e,t)=>{this.setState({copied:!0,item:e}),this._timeId=setTimeout((()=>{this.resetCopied()}),1e3*t)},this.resetCopied=()=>{this._timeId&&(clearTimeout(this._timeId),this._timeId=null,this.setState({copied:!1,item:""}))},this.renderSuccessTip=()=>{const{successTip:e}=this.props;return"undefined"!==typeof e?e:f.createElement(A.A,{componentName:"Typography"},(e=>f.createElement("span",null,f.createElement(E.A,null),e.copied)))},this.renderCopyIcon=()=>{const{icon:e}=this.props,t={role:"button",tabIndex:0,onClick:this.copy,onKeyPress:e=>(0,O.A)(e)&&this.copy(e)},i=f.createElement("a",{className:"".concat(P,"-action-copy-icon")},f.createElement(T,Object.assign({onClick:this.copy},t)));return f.isValidElement(e)?f.cloneElement(e,t):i},this.state={copied:!1,item:""}}componentWillUnmount(){this._timeId&&(clearTimeout(this._timeId),this._timeId=null)}render(){const{style:e,className:t,forwardRef:i,copyTip:n}=this.props,{copied:r}=this.state,s=v()(t,{["".concat(P,"-action-copy")]:!r,["".concat(P,"-action-copied")]:r});return f.createElement(A.A,{componentName:"Typography"},(t=>f.createElement("span",{style:Object.assign({marginLeft:"4px"},e),className:s,ref:i},r?this.renderSuccessTip():f.createElement(S.A,{content:"undefined"!==typeof n?n:t.copy},this.renderCopyIcon()))))}}M.propTypes={content:b().string,onCopy:b().func,successTip:b().node,copyTip:b().node,duration:b().number,style:b().object,className:b().string,icon:b().node},M.defaultProps={content:"",onCopy:k.l,duration:3,style:{},className:""};const I=M;var R=i(46001),D=i(97950);let L;function j(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}const F=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;if(0===i.length)return"";L||(L=document.createElement("div"),L.setAttribute("aria-hidden","true"),document.body.appendChild(L));const o=window.getComputedStyle(e),l=(c=o,Array.prototype.slice.apply(c).map((e=>"".concat(e,": ").concat(c.getPropertyValue(e),";"))).join(""));var c;const h=j(o.lineHeight),d=Math.round(h*(t+1)+j(o.paddingTop)+j(o.paddingBottom));function p(){const e=L.scrollWidth<=L.offsetWidth,i=L.scrollHeight<d;return 1===t?e&&i:i}L.setAttribute("style",l),L.style.position="fixed",L.style.left="0",L.style.height="auto",L.style.top="-999999px",L.style.zIndex="-1000",L.style.textOverflow="clip",L.style.webkitLineClamp="none",D.render(f.createElement(f.Fragment,null),L);const g=document.createElement("span"),m=document.createTextNode(i);if(g.appendChild(m),s.length>0){const e=document.createTextNode(s);g.appendChild(e)}function v(e,t){const i=e.length;return t?"end"===a?e.slice(0,t)+r:e.slice(0,t)+r+e.slice(i-t,i):r}L.appendChild(g),Object.values(u()(n,"expand")).map((e=>e&&L.appendChild(e.cloneNode(!0))));let y=i;return p()||(L.innerHTML="",L.appendChild(g),Object.values(n).map((e=>e&&L.appendChild(e.cloneNode(!0)))),y=function e(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.length,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const o=Math.floor((n+s)/2),l=v(i,o);if(t.textContent=l,n>=s-1&&s>0)for(let r=s;r>=n;r-=1){const e=v(i,r);if(t.textContent=e,p())return e}else if(0===s)return r;return p()?e(t,i,o,s,o):e(t,i,n,o,a)}(m,i,0,"middle"===a?Math.floor(i.length/2):i.length)),L.innerHTML="",y};var B=i(50557),N=i(11692);const z=f.createContext("normal");var H=i(42881),V=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))},U=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const W=_.Y.PREFIX;class G extends f.Component{constructor(e){super(e),this.observerTakingEffect=!1,this.onResize=e=>V(this,void 0,void 0,(function*(){return this.rafId&&window.cancelAnimationFrame(this.rafId),new Promise((e=>{this.rafId=window.requestAnimationFrame((()=>V(this,void 0,void 0,(function*(){yield this.getEllipsisState(),e()}))))}))})),this.canUseCSSEllipsis=()=>{const{copyable:e}=this.props,{expandable:t,expandText:i,pos:n,suffix:r}=this.getEllipsisOpt();return!t&&g()(i)&&!e&&"end"===n&&!r.length},this.shouldTruncated=e=>{if(!e||e<1)return!1;return e<=1?this.compareSingleRow():this.wrapperRef.current.scrollHeight>this.wrapperRef.current.offsetHeight},this.compareSingleRow=()=>{if(!document||!document.createRange)return!1;const e=this.wrapperRef.current,t=e.getBoundingClientRect().width,i=Array.from(e.childNodes),n=document.createRange(),r=i.reduce(((e,t)=>{var i;return n.selectNodeContents(t),e+(null!==(i=n.getBoundingClientRect().width)&&void 0!==i?i:0)}),0);return n.detach(),r>t},this.showTooltip=()=>{var e,t;const{isOverflowed:i,isTruncated:n,expanded:r}=this.state,{showTooltip:s,expandable:a,expandText:o}=this.getEllipsisOpt(),l=this.canUseCSSEllipsis(),c=!r&&(l?i:n),d=!a&&g()(o)&&c&&s;if(!d)return d;const u={type:"tooltip"};return"object"===typeof s?s.type&&"popover"===s.type.toLowerCase()?h()({opts:{showArrow:!0}},s,{opts:{className:v()({["".concat(W,"-ellipsis-popover")]:!0,[null===(e=null===s||void 0===s?void 0:s.opts)||void 0===e?void 0:e.className]:Boolean(null===(t=null===s||void 0===s?void 0:s.opts)||void 0===t?void 0:t.className)})}}):Object.assign(Object.assign({},u),s):u},this.onHover=()=>{if(this.canUseCSSEllipsis()){const{rows:e,suffix:t,pos:i}=this.getEllipsisOpt(),n=this.shouldTruncated(e);this.setState({isOverflowed:n,isTruncated:!1})}else;},this.getEllipsisState=()=>V(this,void 0,void 0,(function*(){const{rows:e,suffix:t,pos:i}=this.getEllipsisOpt(),{children:n}=this.props;if(!this.wrapperRef||!this.wrapperRef.current)return void(yield this.onResize());const{expanded:r}=this.state;if(this.canUseCSSEllipsis())return;if(a()(n))return new Promise((e=>{this.setState({isTruncated:!1,isOverflowed:!1},e)}));if((0,B.A)("children"in this.props&&"string"!==typeof n,"[Semi Typography] Only children with pure text could be used with ellipsis at this moment."),!e||e<0||r)return;const s={expand:this.expandRef.current,copy:this.copyRef&&this.copyRef.current},o=Array.isArray(n)?n.join(""):String(n),l=F(this.wrapperRef.current,e,o,s,"...",t,i);return new Promise((e=>{this.setState({isOverflowed:!1,ellipsisContent:l,isTruncated:o!==l},e)}))})),this.toggleOverflow=e=>{const{onExpand:t,expandable:i,collapsible:n}=this.getEllipsisOpt(),{expanded:r}=this.state;t&&t(!r,e),(i&&!r||n&&r)&&this.setState({expanded:!r})},this.getEllipsisOpt=()=>{const{ellipsis:e}=this.props;if(!e)return{};return Object.assign({rows:1,expandable:!1,pos:"end",suffix:"",showTooltip:!1,collapsible:!1,expandText:e.expandable?this.expandStr:void 0,collapseText:e.collapsible?this.collapseStr:void 0},"object"===typeof e?e:null)},this.renderExpandable=()=>{const{expanded:e,isTruncated:t}=this.state;if(!t)return null;const{expandText:i,expandable:n,collapseText:r,collapsible:s}=this.getEllipsisOpt(),a=!n&&g()(i),o=!s&&g()(r);let l;return e||a?e&&!o&&(l=r):l=i,a&&o?null:f.createElement("a",{role:"button",tabIndex:0,className:"".concat(W,"-ellipsis-expand"),key:"expand",ref:this.expandRef,"aria-label":l,onClick:this.toggleOverflow,onKeyPress:e=>(0,O.A)(e)&&this.toggleOverflow(e)},l)},this.getEllipsisStyle=()=>{const{ellipsis:e,component:t}=this.props;if(!e)return{ellipsisCls:"",ellipsisStyle:{}};const{rows:i}=this.getEllipsisOpt(),{expanded:n}=this.state,r=!n&&this.canUseCSSEllipsis();return{ellipsisCls:v()({["".concat(W,"-ellipsis")]:!0,["".concat(W,"-ellipsis-single-line")]:1===i,["".concat(W,"-ellipsis-multiple-line")]:i>1,["".concat(W,"-ellipsis-multiple-line-text")]:i>1&&"span"===t,["".concat(W,"-ellipsis-overflow-ellipsis")]:1===i&&r,["".concat(W,"-ellipsis-overflow-ellipsis-text")]:1===i&&r&&"span"===t}),ellipsisStyle:r&&i>1?{WebkitLineClamp:i}:{}}},this.renderEllipsisText=e=>{const{suffix:t}=e,{children:i}=this.props,{isTruncated:n,expanded:r,ellipsisContent:s}=this.state;return r||!n?f.createElement("span",{onMouseEnter:this.onHover},i,t&&t.length?t:null):f.createElement("span",{onMouseEnter:this.onHover},s,t)},this.state={editable:!1,copied:!1,isOverflowed:!1,ellipsisContent:e.children,expanded:!1,isTruncated:!1,prevChildren:null},this.wrapperRef=f.createRef(),this.expandRef=f.createRef(),this.copyRef=f.createRef()}componentDidMount(){this.props.ellipsis&&this.onResize().then((()=>(0,N.Ct)((()=>this.observerTakingEffect=!0),1)))}static getDerivedStateFromProps(e,t){const{prevChildren:i}=t,n={};return n.prevChildren=e.children,e.ellipsis&&i!==e.children&&(n.isOverflowed=!1,n.ellipsisContent=e.children,n.expanded=!1,n.isTruncated=!0),n}componentDidUpdate(e){this.props.children!==e.children&&(this.forceUpdate(),this.props.ellipsis&&this.onResize())}componentWillUnmount(){this.rafId&&window.cancelAnimationFrame(this.rafId)}renderOperations(){return f.createElement(f.Fragment,null,this.renderExpandable(),this.renderCopy())}renderCopy(){var e;const{copyable:t,children:i}=this.props;if(!t)return null;const n=null!==(e=null===t||void 0===t?void 0:t.content)&&void 0!==e?e:i;let r,s=!1;Array.isArray(n)?(r="",n.forEach((e=>{"object"===typeof e&&(s=!0),r+=String(e)}))):("object"!==typeof n||(s=!0),r=String(n)),(0,B.A)(s,"Content to be copied in Typography is a object, it will case a [object Object] mistake when copy to clipboard.");const a=Object.assign({content:r,duration:3},"object"===typeof t?t:null);return f.createElement(I,Object.assign({},a,{forwardRef:this.copyRef}))}renderIcon(){const{icon:e,size:t}=this.props,i="inherit"===t?this.context:t;if(!e)return null;const n="small"===i?"small":"default";return f.createElement("span",{className:"".concat(W,"-icon"),"x-semi-prop":"icon"},(0,N.uR)(e)?f.cloneElement(e,{realSize:n}):e)}renderContent(){const e=this.props,{component:t,children:i,className:n,type:r,spacing:s,disabled:a,style:o,ellipsis:c,icon:h,size:d,link:p,heading:g,weight:m}=e,y=U(e,["component","children","className","type","spacing","disabled","style","ellipsis","icon","size","link","heading","weight"]),b=u()(y,["strong","editable","mark","copyable","underline","code","delete"]),_="inherit"===d?this.context:d,S=this.renderIcon(),w=this.getEllipsisOpt(),{ellipsisCls:C,ellipsisStyle:k}=this.getEllipsisStyle();let A=c?this.renderEllipsisText(w):i;const E=v()({["".concat(W,"-link-text")]:p,["".concat(W,"-link-underline")]:this.props.underline&&p});A=((e,t)=>{const{mark:i,code:n,underline:r,strong:s,link:a,disabled:o}=e;let l=t;const c=(e,t)=>{let i={};e&&("object"===typeof e&&(i=Object.assign({},e)),l=f.createElement(t,i,l))};return c(i,"mark"),c(n,"code"),c(r&&!a,"u"),c(s,"strong"),c(e.delete,"del"),c(a,o?"span":"a"),l})(this.props,f.createElement(f.Fragment,null,S,this.props.link?f.createElement("span",{className:E},A):A));const T=l()(g)&&/^h[1-6]$/.test(g),O=v()(n,C,{["".concat(W,"-").concat(r)]:r&&!p,["".concat(W,"-").concat(_)]:_,["".concat(W,"-link")]:p,["".concat(W,"-disabled")]:a,["".concat(W,"-").concat(s)]:s,["".concat(W,"-").concat(g)]:T,["".concat(W,"-").concat(g,"-weight-").concat(m)]:T&&m&&isNaN(Number(m))}),P=Object.assign(Object.assign({},isNaN(Number(m))?{}:{fontWeight:m}),o);return f.createElement(x.A,Object.assign({className:O,style:Object.assign(Object.assign({},P),k),component:t,forwardRef:this.wrapperRef},b),A,this.renderOperations())}renderTipWrapper(){const{children:e}=this.props,t=this.showTooltip(),i=this.renderContent();if(t){const{type:n,opts:s,renderTooltip:a}=t;return r()(a)?a(e,i):"popover"===n.toLowerCase()?f.createElement(R.A,Object.assign({content:e,position:"top"},s),i):f.createElement(S.A,Object.assign({content:e,position:"top"},s),i)}return i}render(){var e=this;const{size:t}=this.props,i="inherit"===t?this.context:t,n=f.createElement(z.Provider,{value:i},f.createElement(A.A,{componentName:"Typography"},(e=>(this.expandStr=e.expand,this.collapseStr=e.collapse,this.renderTipWrapper()))));return this.props.ellipsis?f.createElement(H.A,{onResize:function(){e.observerTakingEffect&&e.onResize(...arguments)},observeParent:!0,observerProperty:H.G.Width},n):n}}G.propTypes={children:b().node,copyable:b().oneOfType([b().shape({text:b().string,onCopy:b().func,successTip:b().node,copyTip:b().node}),b().bool]),delete:b().bool,disabled:b().bool,ellipsis:b().oneOfType([b().shape({rows:b().number,expandable:b().bool,expandText:b().string,onExpand:b().func,suffix:b().string,showTooltip:b().oneOfType([b().shape({type:b().string,opts:b().object}),b().bool]),collapsible:b().bool,collapseText:b().string,pos:b().oneOf(["end","middle"])}),b().bool]),mark:b().bool,underline:b().bool,link:b().oneOfType([b().object,b().bool]),spacing:b().oneOf(_.P.SPACING),strong:b().bool,size:b().oneOf(_.P.SIZE),type:b().oneOf(_.P.TYPE),style:b().object,className:b().string,icon:b().oneOfType([b().node,b().string]),heading:b().string,component:b().string},G.defaultProps={children:null,copyable:!1,delete:!1,disabled:!1,ellipsis:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",spacing:"normal",size:"normal",style:{},className:""},G.contextType=z},3784:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var n=i(65043),r=i(65173),s=i.n(r),a=i(98139),o=i.n(a),l=i(75196),c=i(60367);const h=l.Y.PREFIX;class d extends n.PureComponent{render(){const{className:e}=this.props,t=o()(e,"".concat(h,"-paragraph"));return n.createElement(c.A,Object.assign({component:"p"},this.props,{className:t}))}}d.propTypes={copyable:s().oneOfType([s().object,s().bool]),delete:s().bool,disabled:s().bool,ellipsis:s().oneOfType([s().object,s().bool]),mark:s().bool,link:s().oneOfType([s().object,s().bool]),underline:s().bool,strong:s().bool,type:s().oneOf(l.P.TYPE),size:s().oneOf(l.P.SIZE),spacing:s().oneOf(l.P.SPACING),style:s().object,className:s().string,component:s().string},d.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",size:"normal",spacing:"normal",style:{},className:""}},66503:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var n=i(65043),r=i(65173),s=i.n(r),a=i(75196),o=i(60367);class l extends n.PureComponent{render(){return n.createElement(o.A,Object.assign({component:"span"},this.props))}}l.propTypes={copyable:s().oneOfType([s().object,s().bool]),delete:s().bool,disabled:s().bool,icon:s().oneOfType([s().node,s().string]),ellipsis:s().oneOfType([s().object,s().bool]),mark:s().bool,underline:s().bool,link:s().oneOfType([s().object,s().bool]),strong:s().bool,type:s().oneOf(a.P.TYPE),size:s().oneOf(a.P.SIZE),style:s().object,className:s().string,code:s().bool,component:s().string},l.defaultProps={copyable:!1,delete:!1,disabled:!1,icon:"",ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""}},82916:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var n=i(65043),r=i(65173),s=i.n(r),a=i(75196),o=i(60367),l=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class c extends n.PureComponent{render(){const e=this.props,{heading:t}=e,i=l(e,["heading"]),r=-1!==a.P.HEADING.indexOf(t)?"h".concat(t):"h1";return n.createElement(o.A,Object.assign({component:r,heading:r},i))}}c.propTypes={copyable:s().oneOfType([s().object,s().bool]),delete:s().bool,disabled:s().bool,ellipsis:s().oneOfType([s().object,s().bool]),mark:s().bool,link:s().oneOfType([s().object,s().bool]),underline:s().bool,strong:s().bool,type:s().oneOf(a.P.TYPE),heading:s().oneOf(a.P.HEADING),style:s().object,className:s().string,component:s().string,weight:s().oneOfType([s().oneOf(a.P.WEIGHT),s().number])},c.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",heading:1,style:{},className:""}},10727:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n=i(65043),r=i(98139),s=i.n(r),a=i(65173),o=i.n(a),l=i(75196),c=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const h=l.Y.PREFIX;class d extends n.PureComponent{render(){const e=this.props,{component:t,className:i,children:r,forwardRef:a}=e,o=c(e,["component","className","children","forwardRef"]),l=t,d=s()(h,i);return n.createElement(l,Object.assign({className:d,ref:a},o),r)}}d.defaultProps={component:"article",style:{},className:""},d.propTypes={component:o().string,style:o().object,className:o().string};const u=d},67720:(e,t,i)=>{"use strict";i.d(t,{o:()=>d});var n=i(65043),r=i(75904),s=i(77387),a=i(97950),o=i(71837);var l=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).prevNode=void 0,t}(0,s.A)(t,e);var i=t.prototype;return i.componentDidMount=function(){var e=a.findDOMNode(this);this.prevNode=e,(0,o.G)(this.props.innerRef,e)},i.componentDidUpdate=function(e){var t=a.findDOMNode(this);this.prevNode!==t&&(this.prevNode=t,(0,o.G)(this.props.innerRef,t)),e.innerRef!==this.props.innerRef&&(0,o.G)(this.props.innerRef,t)},i.componentWillUnmount=function(){(0,o.G)(this.props.innerRef,null),delete this.prevNode},i.render=function(){return this.props.children},t}(n.Component),c=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).currentNode=void 0,t.handleRefOverride=function(e){var i=t.props,n=i.children,r=i.innerRef;(0,o.G)(n.ref,e),(0,o.G)(r,e),t.currentNode=e},t}(0,s.A)(t,e);var i=t.prototype;return i.componentDidUpdate=function(e){e.innerRef!==this.props.innerRef&&(0,o.G)(this.props.innerRef,this.currentNode)},i.componentWillUnmount=function(){delete this.currentNode},i.render=function(){var e=this.props.children;return n.cloneElement(e,{ref:this.handleRefOverride})},t}(n.Component),h=["children","innerRef"],d=function(e){var t=e.children,i=e.innerRef,s=function(e,t){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}(e,h),a=n.Children.only(t),o=r.isForwardRef(a)?c:l,d=a&&s&&Object.keys(s).length>0?n.cloneElement(a,s):a;return n.createElement(o,{innerRef:i},d)}},71837:(e,t,i)=>{"use strict";i.d(t,{G:()=>n,X:()=>r});var n=function(e,t){"function"!==typeof e?null!==e&&"object"===typeof e&&(e.current=t):e(t)},r=function(e){return null!==e&&"object"===typeof e&&e.hasOwnProperty("current")}},4540:(e,t)=>{"use strict";var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,r=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,a=i?Symbol.for("react.strict_mode"):60108,o=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.concurrent_mode"):60111,u=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.suspense_list"):60120,f=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,v=i?Symbol.for("react.block"):60121,y=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,_=i?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case h:case d:case s:case o:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case u:case m:case f:case l:return e;default:return t}}case r:return t}}}function S(e){return x(e)===d}t.isForwardRef=function(e){return x(e)===u}},75904:(e,t,i)=>{"use strict";e.exports=i(4540)},25172:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(77396);i(65173);var r=i(65043);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var g=function(){function e(t){a(this,e),c(this,"handlers",void 0),this.handlers=t.slice(0)}return l(e,[{key:"addHandlers",value:function(t){for(var i=this.handlers.slice(0),n=t.length,r=0;r<n;r+=1)i.push(t[r]);return new e(i)}},{key:"dispatchEvent",value:function(e,t){var i=this.handlers.length-1;if(t){for(var n=i;n>=0;n-=1)this.handlers[n].called||(this.handlers[n].called=!0,this.handlers[n](e));for(var r=i;r>=0;r-=1)this.handlers[r].called=!1}else(0,this.handlers[i])(e)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(t){for(var i=[],n=this.handlers.length,r=0;r<n;r+=1){var s=this.handlers[r];-1===t.indexOf(s)&&i.push(s)}return new e(i)}}]),e}();function f(e){var t=new Map;return e.forEach((function(e,i){t.set(i,e)})),t}function m(e){return Array.isArray(e)?e:[e]}function v(e){return"document"===e?document:"window"===e?window:function(e){return null!==e&&"object"===s(e)&&e.hasOwnProperty("current")}(e)?e.current||document:e||document}var y=function(){function e(t,i){a(this,e),c(this,"handlerSets",void 0),c(this,"poolName",void 0),this.handlerSets=i,this.poolName=t}return l(e,[{key:"addHandlers",value:function(t,i){var n=f(this.handlerSets);if(n.has(t)){var r=n.get(t);n.set(t,r.addHandlers(i))}else n.set(t,new g(i));return new e(this.poolName,n)}},{key:"dispatchEvent",value:function(e,t){var i=this.handlerSets.get(e),n="default"===this.poolName;i&&i.dispatchEvent(t,n)}},{key:"hasHandlers",value:function(e){if(!e)return this.handlerSets.size>0;var t=this.handlerSets.get(e);return!!t&&t.hasHandlers()}},{key:"removeHandlers",value:function(t,i){var n=f(this.handlerSets);if(!n.has(t))return new e(this.poolName,n);var r=n.get(t).removeHandlers(i);return r.hasHandlers()?n.set(t,r):n.delete(t),new e(this.poolName,n)}}]),e}();c(y,"createByType",(function(e,t,i){var n=new Map;return n.set(t,new g(i)),new y(e,n)}));var b=function(){function e(t){var i=this;a(this,e),c(this,"handlers",new Map),c(this,"pools",new Map),c(this,"target",void 0),c(this,"createEmitter",(function(e){return function(t){i.pools.forEach((function(i){i.dispatchEvent(e,t)}))}})),this.target=t}return l(e,[{key:"addHandlers",value:function(e,t,i){if(this.pools.has(e)){var n=this.pools.get(e);this.pools.set(e,n.addHandlers(t,i))}else this.pools.set(e,y.createByType(e,t,i));this.handlers.has(t)||this.addTargetHandler(t)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(e,t,i){if(this.pools.has(e)){var n=this.pools.get(e).removeHandlers(t,i);n.hasHandlers()?this.pools.set(e,n):this.pools.delete(e);var r=!1;this.pools.forEach((function(e){return r=r||e.hasHandlers(t)})),r||this.removeTargetHandler(t)}}},{key:"addTargetHandler",value:function(e){var t=this.createEmitter(e);this.handlers.set(e,t),this.target.addEventListener(e,t,!0)}},{key:"removeTargetHandler",value:function(e){this.handlers.has(e)&&(this.target.removeEventListener(e,this.handlers.get(e),!0),this.handlers.delete(e))}}]),e}(),_=new(function(){function e(){var t=this;a(this,e),c(this,"targets",new Map),c(this,"getTarget",(function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=v(e);if(t.targets.has(n))return t.targets.get(n);if(!i)return null;var r=new b(n);return t.targets.set(n,r),r})),c(this,"removeTarget",(function(e){t.targets.delete(v(e))}))}return l(e,[{key:"sub",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.canUseDOM){var r=i.target,s=void 0===r?document:r,a=i.pool,o=void 0===a?"default":a;this.getTarget(s).addHandlers(o,e,m(t))}}},{key:"unsub",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.canUseDOM){var r=i.target,s=void 0===r?document:r,a=i.pool,o=void 0===a?"default":a,l=this.getTarget(s,!1);l&&(l.removeHandlers(o,e,m(t)),l.hasHandlers()||this.removeTarget(s))}}}]),e}()),x=function(e){function t(){return a(this,t),p(this,d(t).apply(this,arguments))}return h(t,r.PureComponent),l(t,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(e){this.unsubscribe(e),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(e){var t=e.name,i=e.on,n=e.pool,r=e.target;_.sub(t,i,{pool:n,target:r})}},{key:"unsubscribe",value:function(e){var t=e.name,i=e.on,n=e.pool,r=e.target;_.unsub(t,i,{pool:n,target:r})}},{key:"render",value:function(){return null}}]),t}();c(x,"defaultProps",{pool:"default",target:"document"}),x.propTypes={},t.instance=_,t.default=x},4173:(e,t,i)=>{"use strict";var n;n=i(25172),e.exports=n.default,e.exports.instance=n.instance},40854:(e,t,i)=>{e.exports=i(20672)},71989:(e,t,i)=>{"use strict";var n=i(86267),r=i(93229),s=i(47903),a=i(86735),o=i(17638),l=i(63101),c=i(20705),h=i(89335),d=i(82702),u=i(47482),p=i(93403);e.exports=function(e){return new Promise((function(t,i){var g,f=e.data,m=e.headers,v=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(g),e.signal&&e.signal.removeEventListener("abort",g)}n.isFormData(f)&&n.isStandardBrowserEnv()&&delete m["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var _=e.auth.username||"",x=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(_+":"+x)}var S=o(e.baseURL,e.url);function w(){if(b){var n="getAllResponseHeaders"in b?l(b.getAllResponseHeaders()):null,s={data:v&&"text"!==v&&"json"!==v?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:n,config:e,request:b};r((function(e){t(e),y()}),(function(e){i(e),y()}),s),b=null}}if(b.open(e.method.toUpperCase(),a(S,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=w:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(w)},b.onabort=function(){b&&(i(new d("Request aborted",d.ECONNABORTED,e,b)),b=null)},b.onerror=function(){i(new d("Network Error",d.ERR_NETWORK,e,b,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||h;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new d(t,n.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,b)),b=null},n.isStandardBrowserEnv()){var C=(e.withCredentials||c(S))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;C&&(m[e.xsrfHeaderName]=C)}"setRequestHeader"in b&&n.forEach(m,(function(e,t){"undefined"===typeof f&&"content-type"===t.toLowerCase()?delete m[t]:b.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),v&&"json"!==v&&(b.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(g=function(e){b&&(i(!e||e&&e.type?new u:e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(g),e.signal&&(e.signal.aborted?g():e.signal.addEventListener("abort",g))),f||(f=null);var k=p(S);k&&-1===["http","https","file"].indexOf(k)?i(new d("Unsupported protocol "+k+":",d.ERR_BAD_REQUEST,e)):b.send(f)}))}},20672:(e,t,i)=>{"use strict";var n=i(86267),r=i(26973),s=i(88938),a=i(56438);var o=function e(t){var i=new s(t),o=r(s.prototype.request,i);return n.extend(o,s.prototype,i),n.extend(o,i),o.create=function(i){return e(a(t,i))},o}(i(52989));o.Axios=s,o.CanceledError=i(47482),o.CancelToken=i(27690),o.isCancel=i(87767),o.VERSION=i(23104).version,o.toFormData=i(37289),o.AxiosError=i(82702),o.Cancel=o.CanceledError,o.all=function(e){return Promise.all(e)},o.spread=i(8125),o.isAxiosError=i(98738),e.exports=o,e.exports.default=o},27690:(e,t,i)=>{"use strict";var n=i(47482);function r(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;this.promise.then((function(e){if(i._listeners){var t,n=i._listeners.length;for(t=0;t<n;t++)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e){i.reason||(i.reason=new n(e),t(i.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},47482:(e,t,i)=>{"use strict";var n=i(82702);function r(e){n.call(this,null==e?"canceled":e,n.ERR_CANCELED),this.name="CanceledError"}i(86267).inherits(r,n,{__CANCEL__:!0}),e.exports=r},87767:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},88938:(e,t,i)=>{"use strict";var n=i(86267),r=i(86735),s=i(6664),a=i(64395),o=i(56438),l=i(17638),c=i(42478),h=c.validators;function d(e){this.defaults=e,this.interceptors={request:new s,response:new s}}d.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=o(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;void 0!==i&&c.assertOptions(i,{silentJSONParsing:h.transitional(h.boolean),forcedJSONParsing:h.transitional(h.boolean),clarifyTimeoutError:h.transitional(h.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var s,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!r){var d=[a,void 0];for(Array.prototype.unshift.apply(d,n),d=d.concat(l),s=Promise.resolve(t);d.length;)s=s.then(d.shift(),d.shift());return s}for(var u=t;n.length;){var p=n.shift(),g=n.shift();try{u=p(u)}catch(f){g(f);break}}try{s=a(u)}catch(f){return Promise.reject(f)}for(;l.length;)s=s.then(l.shift(),l.shift());return s},d.prototype.getUri=function(e){e=o(this.defaults,e);var t=l(e.baseURL,e.url);return r(t,e.params,e.paramsSerializer)},n.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,i){return this.request(o(i||{},{method:e,url:t,data:(i||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){function t(t){return function(i,n,r){return this.request(o(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),e.exports=d},82702:(e,t,i)=>{"use strict";var n=i(86267);function r(e,t,i,n,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r)}n.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var s=r.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){a[e]={value:e}})),Object.defineProperties(r,a),Object.defineProperty(s,"isAxiosError",{value:!0}),r.from=function(e,t,i,a,o,l){var c=Object.create(s);return n.toFlatObject(e,c,(function(e){return e!==Error.prototype})),r.call(c,e.message,t,i,a,o),c.name=e.name,l&&Object.assign(c,l),c},e.exports=r},6664:(e,t,i)=>{"use strict";var n=i(86267);function r(){this.handlers=[]}r.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},17638:(e,t,i)=>{"use strict";var n=i(72762),r=i(41523);e.exports=function(e,t){return e&&!n(t)?r(e,t):t}},64395:(e,t,i)=>{"use strict";var n=i(86267),r=i(3024),s=i(87767),a=i(52989),o=i(47482);function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new o}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},56438:(e,t,i)=>{"use strict";var n=i(86267);e.exports=function(e,t){t=t||{};var i={};function r(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function s(i){return n.isUndefined(t[i])?n.isUndefined(e[i])?void 0:r(void 0,e[i]):r(e[i],t[i])}function a(e){if(!n.isUndefined(t[e]))return r(void 0,t[e])}function o(i){return n.isUndefined(t[i])?n.isUndefined(e[i])?void 0:r(void 0,e[i]):r(void 0,t[i])}function l(i){return i in t?r(e[i],t[i]):i in e?r(void 0,e[i]):void 0}var c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||s,r=t(e);n.isUndefined(r)&&t!==l||(i[e]=r)})),i}},93229:(e,t,i)=>{"use strict";var n=i(82702);e.exports=function(e,t,i){var r=i.config.validateStatus;i.status&&r&&!r(i.status)?t(new n("Request failed with status code "+i.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}},3024:(e,t,i)=>{"use strict";var n=i(86267),r=i(52989);e.exports=function(e,t,i){var s=this||r;return n.forEach(i,(function(i){e=i.call(s,e,t)})),e}},52989:(e,t,i)=>{"use strict";var n=i(86267),r=i(12121),s=i(82702),a=i(89335),o=i(37289),l={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var h={transitional:a,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=i(71989)),e}(),transformRequest:[function(e,t){if(r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e))return e;if(n.isArrayBufferView(e))return e.buffer;if(n.isURLSearchParams(e))return c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i,s=n.isObject(e),a=t&&t["Content-Type"];if((i=n.isFileList(e))||s&&"multipart/form-data"===a){var l=this.env&&this.env.FormData;return o(i?{"files[]":e}:e,l&&new l)}return s||"application/json"===a?(c(t,"application/json"),function(e,t,i){if(n.isString(e))try{return(t||JSON.parse)(e),n.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||h.transitional,i=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,a=!i&&"json"===this.responseType;if(a||r&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(a){if("SyntaxError"===o.name)throw s.from(o,s.ERR_BAD_RESPONSE,this,null,this.response);throw o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:i(73055)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){h.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){h.headers[e]=n.merge(l)})),e.exports=h},89335:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},23104:e=>{e.exports={version:"0.27.2"}},26973:e=>{"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}},86735:(e,t,i)=>{"use strict";var n=i(86267);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var s;if(i)s=i(t);else if(n.isURLSearchParams(t))s=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))})))})),s=a.join("&")}if(s){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},41523:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},47903:(e,t,i)=>{"use strict";var n=i(86267);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,i,r,s,a){var o=[];o.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&o.push("expires="+new Date(i).toGMTString()),n.isString(r)&&o.push("path="+r),n.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},72762:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},98738:(e,t,i)=>{"use strict";var n=i(86267);e.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError}},20705:(e,t,i)=>{"use strict";var n=i(86267);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=r(window.location.href),function(t){var i=n.isString(t)?r(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},12121:(e,t,i)=>{"use strict";var n=i(86267);e.exports=function(e,t){n.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))}},73055:e=>{e.exports=null},63101:(e,t,i)=>{"use strict";var n=i(86267),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,s,a={};return e?(n.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),i=n.trim(e.substr(s+1)),t){if(a[t]&&r.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([i]):a[t]?a[t]+", "+i:i}})),a):a}},93403:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8125:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},37289:(e,t,i)=>{"use strict";var n=i(86267);e.exports=function(e,t){t=t||new FormData;var i=[];function r(e){return null===e?"":n.isDate(e)?e.toISOString():n.isArrayBuffer(e)||n.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(s,a){if(n.isPlainObject(s)||n.isArray(s)){if(-1!==i.indexOf(s))throw Error("Circular reference detected in "+a);i.push(s),n.forEach(s,(function(i,s){if(!n.isUndefined(i)){var o,l=a?a+"."+s:s;if(i&&!a&&"object"===typeof i)if(n.endsWith(s,"{}"))i=JSON.stringify(i);else if(n.endsWith(s,"[]")&&(o=n.toArray(i)))return void o.forEach((function(e){!n.isUndefined(e)&&t.append(l,r(e))}));e(i,l)}})),i.pop()}else t.append(a,r(s))}(e),t}},42478:(e,t,i)=>{"use strict";var n=i(23104).version,r=i(82702),s={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){s[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));var a={};s.transitional=function(e,t,i){function s(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return function(i,n,o){if(!1===e)throw new r(s(n," has been removed"+(t?" in "+t:"")),r.ERR_DEPRECATED);return t&&!a[n]&&(a[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,o)}},e.exports={assertOptions:function(e,t,i){if("object"!==typeof e)throw new r("options must be an object",r.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),s=n.length;s-- >0;){var a=n[s],o=t[a];if(o){var l=e[a],c=void 0===l||o(l,a,e);if(!0!==c)throw new r("option "+a+" must be "+c,r.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new r("Unknown option "+a,r.ERR_BAD_OPTION)}},validators:s}},86267:(e,t,i)=>{"use strict";var n,r=i(26973),s=Object.prototype.toString,a=(n=Object.create(null),function(e){var t=s.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())});function o(e){return e=e.toLowerCase(),function(t){return a(t)===e}}function l(e){return Array.isArray(e)}function c(e){return"undefined"===typeof e}var h=o("ArrayBuffer");function d(e){return null!==e&&"object"===typeof e}function u(e){if("object"!==a(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var p=o("Date"),g=o("File"),f=o("Blob"),m=o("FileList");function v(e){return"[object Function]"===s.call(e)}var y=o("URLSearchParams");function b(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),l(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var _,x=(_="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return _&&e instanceof _});e.exports={isArray:l,isArrayBuffer:h,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||s.call(e)===t||v(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&h(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:d,isPlainObject:u,isUndefined:c,isDate:p,isFile:g,isBlob:f,isFunction:v,isStream:function(e){return d(e)&&v(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:b,merge:function e(){var t={};function i(i,n){u(t[n])&&u(i)?t[n]=e(t[n],i):u(i)?t[n]=e({},i):l(i)?t[n]=i.slice():t[n]=i}for(var n=0,r=arguments.length;n<r;n++)b(arguments[n],i);return t},extend:function(e,t,i){return b(t,(function(t,n){e[n]=i&&"function"===typeof t?r(t,i):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,i,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,i&&Object.assign(e.prototype,i)},toFlatObject:function(e,t,i){var n,r,s,a={};t=t||{};do{for(r=(n=Object.getOwnPropertyNames(e)).length;r-- >0;)a[s=n[r]]||(t[s]=e[s],a[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:o,endsWith:function(e,t,i){e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;var n=e.indexOf(t,i);return-1!==n&&n===i},toArray:function(e){if(!e)return null;var t=e.length;if(c(t))return null;for(var i=new Array(t);t-- >0;)i[t]=e[t];return i},isTypedArray:x,isFileList:m}},89002:e=>{var t=.1,i="function"===typeof Float32Array;function n(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function s(e){return 3*e}function a(e,t,i){return((n(t,i)*e+r(t,i))*e+s(t))*e}function o(e,t,i){return 3*n(t,i)*e*e+2*r(t,i)*e+s(t)}function l(e){return e}e.exports=function(e,n,r,s){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&r===s)return l;for(var c=i?new Float32Array(11):new Array(11),h=0;h<11;++h)c[h]=a(h*t,e,r);function d(i){for(var n=0,s=1;10!==s&&c[s]<=i;++s)n+=t;--s;var l=n+(i-c[s])/(c[s+1]-c[s])*t,h=o(l,e,r);return h>=.001?function(e,t,i,n){for(var r=0;r<4;++r){var s=o(t,i,n);if(0===s)return t;t-=(a(t,i,n)-e)/s}return t}(i,l,e,r):0===h?l:function(e,t,i,n,r){var s,o,l=0;do{(s=a(o=t+(i-t)/2,n,r)-e)>0?i=o:t=o}while(Math.abs(s)>1e-7&&++l<10);return o}(i,n,n+t,e,r)}return function(e){return 0===e?0:1===e?1:a(d(e),n,s)}}},43024:(e,t,i)=>{"use strict";function n(e){var t,i,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=n(e[t]))&&(r&&(r+=" "),r+=i);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,i=0,r="";i<arguments.length;)(e=arguments[i++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}i.r(t),i.d(t,{clsx:()=>r,default:()=>s});const s=r},31324:e=>{"use strict";const t=function(e){let{target:t=document.body}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=document.createElement("textarea"),n=document.activeElement;i.value=e,i.setAttribute("readonly",""),i.style.contain="strict",i.style.position="absolute",i.style.left="-9999px",i.style.fontSize="12pt";const r=document.getSelection();let s=!1;r.rangeCount>0&&(s=r.getRangeAt(0)),t.append(i),i.select(),i.selectionStart=0,i.selectionEnd=e.length;let a=!1;try{a=document.execCommand("copy")}catch(o){}return i.remove(),s&&(r.removeAllRanges(),r.addRange(s)),n&&n.focus(),a};e.exports=t,e.exports.default=t},57876:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i=e<0?"-":"",n=Math.abs(e).toString();for(;n.length<t;)n="0"+n;return i+n},e.exports=t.default},21067:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.exports=t.default},32088:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)({},e)};var r=n(i(21067));e.exports=t.default},62653:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(59406)).default;t.default=r,e.exports=t.default},26139:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=function(){return i},t.setDefaultOptions=function(e){i=e};var i={}},98065:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(15130)),s=n(i(50389)),a=n(i(82964)),o=n(i(85252)),l=n(i(605)),c=n(i(57876)),h=n(i(15997)),d="midnight",u="noon",p="morning",g="afternoon",f="evening",m="night";function v(e,t){var i=e>0?"-":"+",n=Math.abs(e),r=Math.floor(n/60),s=n%60;if(0===s)return i+String(r);var a=t||"";return i+String(r)+a+(0,c.default)(s,2)}function y(e,t){return e%60===0?(e>0?"-":"+")+(0,c.default)(Math.abs(e)/60,2):b(e,t)}function b(e,t){var i=t||"",n=e>0?"-":"+",r=Math.abs(e);return n+(0,c.default)(Math.floor(r/60),2)+i+(0,c.default)(r%60,2)}var _={G:function(e,t,i){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});default:return i.era(n,{width:"wide"})}},y:function(e,t,i){if("yo"===t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return i.ordinalNumber(r,{unit:"year"})}return h.default.y(e,t)},Y:function(e,t,i,n){var r=(0,l.default)(e,n),s=r>0?r:1-r;if("YY"===t){var a=s%100;return(0,c.default)(a,2)}return"Yo"===t?i.ordinalNumber(s,{unit:"year"}):(0,c.default)(s,t.length)},R:function(e,t){var i=(0,a.default)(e);return(0,c.default)(i,t.length)},u:function(e,t){var i=e.getUTCFullYear();return(0,c.default)(i,t.length)},Q:function(e,t,i){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return(0,c.default)(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,i){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return(0,c.default)(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,i){var n=e.getUTCMonth();switch(t){case"M":case"MM":return h.default.M(e,t);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,i){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return(0,c.default)(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,i,n){var r=(0,o.default)(e,n);return"wo"===t?i.ordinalNumber(r,{unit:"week"}):(0,c.default)(r,t.length)},I:function(e,t,i){var n=(0,s.default)(e);return"Io"===t?i.ordinalNumber(n,{unit:"week"}):(0,c.default)(n,t.length)},d:function(e,t,i){return"do"===t?i.ordinalNumber(e.getUTCDate(),{unit:"date"}):h.default.d(e,t)},D:function(e,t,i){var n=(0,r.default)(e);return"Do"===t?i.ordinalNumber(n,{unit:"dayOfYear"}):(0,c.default)(n,t.length)},E:function(e,t,i){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,i,n){var r=e.getUTCDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return(0,c.default)(s,2);case"eo":return i.ordinalNumber(s,{unit:"day"});case"eee":return i.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,i,n){var r=e.getUTCDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return(0,c.default)(s,t.length);case"co":return i.ordinalNumber(s,{unit:"day"});case"ccc":return i.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(r,{width:"narrow",context:"standalone"});case"cccccc":return i.day(r,{width:"short",context:"standalone"});default:return i.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,i){var n=e.getUTCDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return(0,c.default)(r,t.length);case"io":return i.ordinalNumber(r,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,i){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,i){var n,r=e.getUTCHours();switch(n=12===r?u:0===r?d:r/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,i){var n,r=e.getUTCHours();switch(n=r>=17?f:r>=12?g:r>=4?p:m,t){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,i){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),i.ordinalNumber(n,{unit:"hour"})}return h.default.h(e,t)},H:function(e,t,i){return"Ho"===t?i.ordinalNumber(e.getUTCHours(),{unit:"hour"}):h.default.H(e,t)},K:function(e,t,i){var n=e.getUTCHours()%12;return"Ko"===t?i.ordinalNumber(n,{unit:"hour"}):(0,c.default)(n,t.length)},k:function(e,t,i){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?i.ordinalNumber(n,{unit:"hour"}):(0,c.default)(n,t.length)},m:function(e,t,i){return"mo"===t?i.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):h.default.m(e,t)},s:function(e,t,i){return"so"===t?i.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):h.default.s(e,t)},S:function(e,t){return h.default.S(e,t)},X:function(e,t,i,n){var r=(n._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return y(r);case"XXXX":case"XX":return b(r);default:return b(r,":")}},x:function(e,t,i,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return y(r);case"xxxx":case"xx":return b(r);default:return b(r,":")}},O:function(e,t,i,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+v(r,":");default:return"GMT"+b(r,":")}},z:function(e,t,i,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+v(r,":");default:return"GMT"+b(r,":")}},t:function(e,t,i,n){var r=n._originalDate||e,s=Math.floor(r.getTime()/1e3);return(0,c.default)(s,t.length)},T:function(e,t,i,n){var r=(n._originalDate||e).getTime();return(0,c.default)(r,t.length)}};t.default=_,e.exports=t.default},15997:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(57876)),s={y:function(e,t){var i=e.getUTCFullYear(),n=i>0?i:1-i;return(0,r.default)("yy"===t?n%100:n,t.length)},M:function(e,t){var i=e.getUTCMonth();return"M"===t?String(i+1):(0,r.default)(i+1,2)},d:function(e,t){return(0,r.default)(e.getUTCDate(),t.length)},a:function(e,t){var i=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h:function(e,t){return(0,r.default)(e.getUTCHours()%12||12,t.length)},H:function(e,t){return(0,r.default)(e.getUTCHours(),t.length)},m:function(e,t){return(0,r.default)(e.getUTCMinutes(),t.length)},s:function(e,t){return(0,r.default)(e.getUTCSeconds(),t.length)},S:function(e,t){var i=t.length,n=e.getUTCMilliseconds(),s=Math.floor(n*Math.pow(10,i-3));return(0,r.default)(s,t.length)}};t.default=s,e.exports=t.default},66723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},n=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},r={p:n,P:function(e,t){var r,s=e.match(/(P+)(p+)?/)||[],a=s[1],o=s[2];if(!o)return i(e,t);switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",i(a,t)).replace("{{time}}",n(o,t))}};t.default=r,e.exports=t.default},85899:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()},e.exports=t.default},15130:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,s.default)(1,arguments);var t=(0,r.default)(e),i=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),o=i-n;return Math.floor(o/a)+1};var r=n(i(17336)),s=n(i(40230)),a=864e5;e.exports=t.default},50389:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(1,arguments);var t=(0,r.default)(e),i=(0,s.default)(t).getTime()-(0,a.default)(t).getTime();return Math.round(i/l)+1};var r=n(i(17336)),s=n(i(20144)),a=n(i(53089)),o=n(i(40230)),l=6048e5;e.exports=t.default},82964:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,s.default)(1,arguments);var t=(0,r.default)(e),i=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(i+1,0,4),n.setUTCHours(0,0,0,0);var o=(0,a.default)(n),l=new Date(0);l.setUTCFullYear(i,0,4),l.setUTCHours(0,0,0,0);var c=(0,a.default)(l);return t.getTime()>=o.getTime()?i+1:t.getTime()>=c.getTime()?i:i-1};var r=n(i(17336)),s=n(i(40230)),a=n(i(20144));e.exports=t.default},85252:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(1,arguments);var i=(0,r.default)(e),n=(0,s.default)(i,t).getTime()-(0,a.default)(i,t).getTime();return Math.round(n/l)+1};var r=n(i(17336)),s=n(i(55419)),a=n(i(9222)),o=n(i(40230)),l=6048e5;e.exports=t.default},605:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i,n,c,h,d,u,p,g;(0,s.default)(1,arguments);var f=(0,r.default)(e),m=f.getUTCFullYear(),v=(0,l.getDefaultOptions)(),y=(0,o.default)(null!==(i=null!==(n=null!==(c=null!==(h=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==h?h:null===t||void 0===t||null===(d=t.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==c?c:v.firstWeekContainsDate)&&void 0!==n?n:null===(p=v.locale)||void 0===p||null===(g=p.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==i?i:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(m+1,0,y),b.setUTCHours(0,0,0,0);var _=(0,a.default)(b,t),x=new Date(0);x.setUTCFullYear(m,0,y),x.setUTCHours(0,0,0,0);var S=(0,a.default)(x,t);return f.getTime()>=_.getTime()?m+1:f.getTime()>=S.getTime()?m:m-1};var r=n(i(17336)),s=n(i(40230)),a=n(i(55419)),o=n(i(70911)),l=i(26139);e.exports=t.default},82810:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isProtectedDayOfYearToken=function(e){return-1!==i.indexOf(e)},t.isProtectedWeekYearToken=function(e){return-1!==n.indexOf(e)},t.throwProtectedError=function(e,t,i){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))};var i=["D","DD"],n=["YY","YYYY"]},40230:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")},e.exports=t.default},20144:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,s.default)(1,arguments);var t=(0,r.default)(e),i=t.getUTCDay(),n=(i<1?7:0)+i-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t};var r=n(i(17336)),s=n(i(40230));e.exports=t.default},53089:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(1,arguments);var t=(0,r.default)(e),i=new Date(0);return i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0),(0,s.default)(i)};var r=n(i(82964)),s=n(i(20144)),a=n(i(40230));e.exports=t.default},55419:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i,n,l,c,h,d,u,p;(0,s.default)(1,arguments);var g=(0,o.getDefaultOptions)(),f=(0,a.default)(null!==(i=null!==(n=null!==(l=null!==(c=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==c?c:null===t||void 0===t||null===(h=t.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==l?l:g.weekStartsOn)&&void 0!==n?n:null===(u=g.locale)||void 0===u||null===(p=u.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==i?i:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,r.default)(e),v=m.getUTCDay(),y=(v<f?7:0)+v-f;return m.setUTCDate(m.getUTCDate()-y),m.setUTCHours(0,0,0,0),m};var r=n(i(17336)),s=n(i(40230)),a=n(i(70911)),o=i(26139);e.exports=t.default},9222:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i,n,c,h,d,u,p,g;(0,s.default)(1,arguments);var f=(0,l.getDefaultOptions)(),m=(0,o.default)(null!==(i=null!==(n=null!==(c=null!==(h=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==h?h:null===t||void 0===t||null===(d=t.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==c?c:f.firstWeekContainsDate)&&void 0!==n?n:null===(p=f.locale)||void 0===p||null===(g=p.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==i?i:1),v=(0,r.default)(e,t),y=new Date(0);return y.setUTCFullYear(v,0,m),y.setUTCHours(0,0,0,0),(0,a.default)(y,t)};var r=n(i(605)),s=n(i(40230)),a=n(i(55419)),o=n(i(70911)),l=i(26139);e.exports=t.default},70911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);if(isNaN(t))return t;return t<0?Math.ceil(t):Math.floor(t)},e.exports=t.default},39142:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(2,arguments);var i=(0,s.default)(e).getTime(),n=(0,r.default)(t);return new Date(i+n)};var r=n(i(70911)),s=n(i(17336)),a=n(i(40230));e.exports=t.default},92239:(e,t,i)=>{"use strict";i.d(t,{q:()=>r});var n={};function r(){return n}},43666:(e,t,i)=>{"use strict";function n(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}i.d(t,{A:()=>n})},89511:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(16260),r=i(43666),s=i(58355),a=i(92239);function o(e,t){var i,o,l,c,h,d,u,p;(0,r.A)(1,arguments);var g=(0,a.q)(),f=(0,s.A)(null!==(i=null!==(o=null!==(l=null!==(c=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==c?c:null===t||void 0===t||null===(h=t.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==l?l:g.weekStartsOn)&&void 0!==o?o:null===(u=g.locale)||void 0===u||null===(p=u.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==i?i:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,n.A)(e),v=m.getUTCDay(),y=(v<f?7:0)+v-f;return m.setUTCDate(m.getUTCDate()-y),m.setUTCHours(0,0,0,0),m}},58355:(e,t,i)=>{"use strict";function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}i.d(t,{A:()=>n})},15258:(e,t,i)=>{"use strict";function n(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}i.d(t,{A:()=>n})},39344:(e,t,i)=>{"use strict";function n(e){return function(t,i){var n;if("formatting"===(null!==i&&void 0!==i&&i.context?String(i.context):"standalone")&&e.formattingValues){var r=e.defaultFormattingWidth||e.defaultWidth,s=null!==i&&void 0!==i&&i.width?String(i.width):r;n=e.formattingValues[s]||e.formattingValues[r]}else{var a=e.defaultWidth,o=null!==i&&void 0!==i&&i.width?String(i.width):e.defaultWidth;n=e.values[o]||e.values[a]}return n[e.argumentCallback?e.argumentCallback(t):t]}}i.d(t,{A:()=>n})},84240:(e,t,i)=>{"use strict";function n(e){return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;var a,o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return i;return}(l,(function(e){return e.test(o)})):function(e,t){for(var i in e)if(e.hasOwnProperty(i)&&t(e[i]))return i;return}(l,(function(e){return e.test(o)}));return a=e.valueCallback?e.valueCallback(c):c,{value:a=i.valueCallback?i.valueCallback(a):a,rest:t.slice(o.length)}}}i.d(t,{A:()=>n})},64734:(e,t,i)=>{"use strict";function n(e){return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var r=n[0],s=t.match(e.parsePattern);if(!s)return null;var a=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:a=i.valueCallback?i.valueCallback(a):a,rest:t.slice(r.length)}}}i.d(t,{A:()=>n})},88794:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var n={lessThanXSeconds:{one:"\u4e0d\u5230 1 \u79d2",other:"\u4e0d\u5230 {{count}} \u79d2"},xSeconds:{one:"1 \u79d2",other:"{{count}} \u79d2"},halfAMinute:"\u534a\u5206\u949f",lessThanXMinutes:{one:"\u4e0d\u5230 1 \u5206\u949f",other:"\u4e0d\u5230 {{count}} \u5206\u949f"},xMinutes:{one:"1 \u5206\u949f",other:"{{count}} \u5206\u949f"},xHours:{one:"1 \u5c0f\u65f6",other:"{{count}} \u5c0f\u65f6"},aboutXHours:{one:"\u5927\u7ea6 1 \u5c0f\u65f6",other:"\u5927\u7ea6 {{count}} \u5c0f\u65f6"},xDays:{one:"1 \u5929",other:"{{count}} \u5929"},aboutXWeeks:{one:"\u5927\u7ea6 1 \u4e2a\u661f\u671f",other:"\u5927\u7ea6 {{count}} \u4e2a\u661f\u671f"},xWeeks:{one:"1 \u4e2a\u661f\u671f",other:"{{count}} \u4e2a\u661f\u671f"},aboutXMonths:{one:"\u5927\u7ea6 1 \u4e2a\u6708",other:"\u5927\u7ea6 {{count}} \u4e2a\u6708"},xMonths:{one:"1 \u4e2a\u6708",other:"{{count}} \u4e2a\u6708"},aboutXYears:{one:"\u5927\u7ea6 1 \u5e74",other:"\u5927\u7ea6 {{count}} \u5e74"},xYears:{one:"1 \u5e74",other:"{{count}} \u5e74"},overXYears:{one:"\u8d85\u8fc7 1 \u5e74",other:"\u8d85\u8fc7 {{count}} \u5e74"},almostXYears:{one:"\u5c06\u8fd1 1 \u5e74",other:"\u5c06\u8fd1 {{count}} \u5e74"}};const r=function(e,t,i){var r,s=n[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",String(t)),null!==i&&void 0!==i&&i.addSuffix?i.comparison&&i.comparison>0?r+"\u5185":r+"\u524d":r};var s=i(15258);const a={date:(0,s.A)({formats:{full:"y'\u5e74'M'\u6708'd'\u65e5' EEEE",long:"y'\u5e74'M'\u6708'd'\u65e5'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},defaultWidth:"full"}),time:(0,s.A)({formats:{full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},defaultWidth:"full"}),dateTime:(0,s.A)({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})};var o=i(43666),l=i(89511);function c(e,t,i){var n="eeee p";return function(e,t,i){(0,o.A)(2,arguments);var n=(0,l.A)(e,i),r=(0,l.A)(t,i);return n.getTime()===r.getTime()}(e,t,i)?n:e.getTime()>t.getTime()?"'\u4e0b\u4e2a'"+n:"'\u4e0a\u4e2a'"+n}var h={lastWeek:c,yesterday:"'\u6628\u5929' p",today:"'\u4eca\u5929' p",tomorrow:"'\u660e\u5929' p",nextWeek:c,other:"PP p"};const d=function(e,t,i,n){var r=h[e];return"function"===typeof r?r(t,i,n):r};var u=i(39344);const p={ordinalNumber:function(e,t){var i=Number(e);switch(null===t||void 0===t?void 0:t.unit){case"date":return i.toString()+"\u65e5";case"hour":return i.toString()+"\u65f6";case"minute":return i.toString()+"\u5206";case"second":return i.toString()+"\u79d2";default:return"\u7b2c "+i.toString()}},era:(0,u.A)({values:{narrow:["\u524d","\u516c\u5143"],abbreviated:["\u524d","\u516c\u5143"],wide:["\u516c\u5143\u524d","\u516c\u5143"]},defaultWidth:"wide"}),quarter:(0,u.A)({values:{narrow:["1","2","3","4"],abbreviated:["\u7b2c\u4e00\u5b63","\u7b2c\u4e8c\u5b63","\u7b2c\u4e09\u5b63","\u7b2c\u56db\u5b63"],wide:["\u7b2c\u4e00\u5b63\u5ea6","\u7b2c\u4e8c\u5b63\u5ea6","\u7b2c\u4e09\u5b63\u5ea6","\u7b2c\u56db\u5b63\u5ea6"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,u.A)({values:{narrow:["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"],abbreviated:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],wide:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},defaultWidth:"wide"}),day:(0,u.A)({values:{narrow:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],short:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],abbreviated:["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],wide:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"]},defaultWidth:"wide"}),dayPeriod:(0,u.A)({values:{narrow:{am:"\u4e0a",pm:"\u4e0b",midnight:"\u51cc\u6668",noon:"\u5348",morning:"\u65e9",afternoon:"\u4e0b\u5348",evening:"\u665a",night:"\u591c"},abbreviated:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"},wide:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"}},defaultWidth:"wide",formattingValues:{narrow:{am:"\u4e0a",pm:"\u4e0b",midnight:"\u51cc\u6668",noon:"\u5348",morning:"\u65e9",afternoon:"\u4e0b\u5348",evening:"\u665a",night:"\u591c"},abbreviated:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"},wide:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"}},defaultFormattingWidth:"wide"})};var g=i(84240);const f={code:"zh-CN",formatDistance:r,formatLong:a,formatRelative:d,localize:p,match:{ordinalNumber:(0,i(64734).A)({matchPattern:/^(\u7b2c\s*)?\d+(\u65e5|\u65f6|\u5206|\u79d2)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,g.A)({matchPatterns:{narrow:/^(\u524d)/i,abbreviated:/^(\u524d)/i,wide:/^(\u516c\u5143\u524d|\u516c\u5143)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^(\u524d)/i,/^(\u516c\u5143)/i]},defaultParseWidth:"any"}),quarter:(0,g.A)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^\u7b2c[\u4e00\u4e8c\u4e09\u56db]\u523b/i,wide:/^\u7b2c[\u4e00\u4e8c\u4e09\u56db]\u523b\u949f/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|\u4e00)/i,/(2|\u4e8c)/i,/(3|\u4e09)/i,/(4|\u56db)/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,g.A)({matchPatterns:{narrow:/^(\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d|\u5341[\u4e8c\u4e00])/i,abbreviated:/^(\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d|\u5341[\u4e8c\u4e00]|\d|1[12])\u6708/i,wide:/^(\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d|\u5341[\u4e8c\u4e00])\u6708/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^\u4e00/i,/^\u4e8c/i,/^\u4e09/i,/^\u56db/i,/^\u4e94/i,/^\u516d/i,/^\u4e03/i,/^\u516b/i,/^\u4e5d/i,/^\u5341(?!(\u4e00|\u4e8c))/i,/^\u5341\u4e00/i,/^\u5341\u4e8c/i],any:[/^\u4e00|1/i,/^\u4e8c|2/i,/^\u4e09|3/i,/^\u56db|4/i,/^\u4e94|5/i,/^\u516d|6/i,/^\u4e03|7/i,/^\u516b|8/i,/^\u4e5d|9/i,/^\u5341(?!(\u4e00|\u4e8c))|10/i,/^\u5341\u4e00|11/i,/^\u5341\u4e8c|12/i]},defaultParseWidth:"any"}),day:(0,g.A)({matchPatterns:{narrow:/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i,short:/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i,abbreviated:/^\u5468[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i,wide:/^\u661f\u671f[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/\u65e5/i,/\u4e00/i,/\u4e8c/i,/\u4e09/i,/\u56db/i,/\u4e94/i,/\u516d/i]},defaultParseWidth:"any"}),dayPeriod:(0,g.A)({matchPatterns:{any:/^(\u4e0a\u5348?|\u4e0b\u5348?|\u5348\u591c|[\u4e2d\u6b63]\u5348|\u65e9\u4e0a?|\u4e0b\u5348|\u665a\u4e0a?|\u51cc\u6668|)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^\u4e0a\u5348?/i,pm:/^\u4e0b\u5348?/i,midnight:/^\u5348\u591c/i,noon:/^[\u4e2d\u6b63]\u5348/i,morning:/^\u65e9\u4e0a/i,afternoon:/^\u4e0b\u5348/i,evening:/^\u665a\u4e0a?/i,night:/^\u51cc\u6668/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}}},16260:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(82284),r=i(43666);function s(e){(0,r.A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,n.A)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},36422:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var n,_,x,S,w,C,k,A,E,T,O,P,M,I,R,D,L,j;(0,u.default)(2,arguments);var F=String(t),B=(0,p.getDefaultOptions)(),N=null!==(n=null!==(_=null===i||void 0===i?void 0:i.locale)&&void 0!==_?_:B.locale)&&void 0!==n?n:g.default,z=(0,d.default)(null!==(x=null!==(S=null!==(w=null!==(C=null===i||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==C?C:null===i||void 0===i||null===(k=i.locale)||void 0===k||null===(A=k.options)||void 0===A?void 0:A.firstWeekContainsDate)&&void 0!==w?w:B.firstWeekContainsDate)&&void 0!==S?S:null===(E=B.locale)||void 0===E||null===(T=E.options)||void 0===T?void 0:T.firstWeekContainsDate)&&void 0!==x?x:1);if(!(z>=1&&z<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var H=(0,d.default)(null!==(O=null!==(P=null!==(M=null!==(I=null===i||void 0===i?void 0:i.weekStartsOn)&&void 0!==I?I:null===i||void 0===i||null===(R=i.locale)||void 0===R||null===(D=R.options)||void 0===D?void 0:D.weekStartsOn)&&void 0!==M?M:B.weekStartsOn)&&void 0!==P?P:null===(L=B.locale)||void 0===L||null===(j=L.options)||void 0===j?void 0:j.weekStartsOn)&&void 0!==O?O:0);if(!(H>=0&&H<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var V=(0,a.default)(e);if(!(0,r.default)(V))throw new RangeError("Invalid time value");var U=(0,c.default)(V),W=(0,s.default)(V,U),G={firstWeekContainsDate:z,weekStartsOn:H,locale:N,_originalDate:V};return F.match(m).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,l.default[t])(e,N.formatLong):e})).join("").match(f).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return function(e){var t=e.match(v);if(!t)return e;return t[1].replace(y,"'")}(n);var s=o.default[r];if(s)return null!==i&&void 0!==i&&i.useAdditionalWeekYearTokens||!(0,h.isProtectedWeekYearToken)(n)||(0,h.throwProtectedError)(n,t,String(e)),null!==i&&void 0!==i&&i.useAdditionalDayOfYearTokens||!(0,h.isProtectedDayOfYearToken)(n)||(0,h.throwProtectedError)(n,t,String(e)),s(W,n,N.localize,G);if(r.match(b))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("")};var r=n(i(85009)),s=n(i(10967)),a=n(i(17336)),o=n(i(98065)),l=n(i(66723)),c=n(i(85899)),h=i(82810),d=n(i(70911)),u=n(i(40230)),p=i(26139),g=n(i(62653)),f=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,m=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,v=/^'([^]*?)'?$/,y=/''/g,b=/[a-zA-Z]/;e.exports=t.default},26161:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.default)(1,arguments),e instanceof Date||"object"===(0,r.default)(e)&&"[object Date]"===Object.prototype.toString.call(e)};var r=n(i(73738)),s=n(i(40230));e.exports=t.default},85009:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,a.default)(1,arguments),!(0,r.default)(e)&&"number"!==typeof e)return!1;var t=(0,s.default)(e);return!isNaN(Number(t))};var r=n(i(26161)),s=n(i(17336)),a=n(i(40230));e.exports=t.default},118:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}},e.exports=t.default},23500:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,i){var n;if("formatting"===(null!==i&&void 0!==i&&i.context?String(i.context):"standalone")&&e.formattingValues){var r=e.defaultFormattingWidth||e.defaultWidth,s=null!==i&&void 0!==i&&i.width?String(i.width):r;n=e.formattingValues[s]||e.formattingValues[r]}else{var a=e.defaultWidth,o=null!==i&&void 0!==i&&i.width?String(i.width):e.defaultWidth;n=e.values[o]||e.values[a]}return n[e.argumentCallback?e.argumentCallback(t):t]}},e.exports=t.default},22308:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;var a,o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return i;return}(l,(function(e){return e.test(o)})):function(e,t){for(var i in e)if(e.hasOwnProperty(i)&&t(e[i]))return i;return}(l,(function(e){return e.test(o)}));return a=e.valueCallback?e.valueCallback(c):c,{value:a=i.valueCallback?i.valueCallback(a):a,rest:t.slice(o.length)}}},e.exports=t.default},64010:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var r=n[0],s=t.match(e.parsePattern);if(!s)return null;var a=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:a=i.valueCallback?i.valueCallback(a):a,rest:t.slice(r.length)}}},e.exports=t.default},48516:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},n=function(e,t,n){var r,s=i[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};t.default=n,e.exports=t.default},12533:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(118)),s={date:(0,r.default)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,r.default)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,r.default)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};t.default=s,e.exports=t.default},97527:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},n=function(e,t,n,r){return i[e]};t.default=n,e.exports=t.default},25687:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(23500)),s={ordinalNumber:function(e,t){var i=Number(e),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:(0,r.default)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,r.default)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,r.default)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,r.default)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,r.default)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};t.default=s,e.exports=t.default},99417:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(22308)),s={ordinalNumber:(0,n(i(64010)).default)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,r.default)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,r.default)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,r.default)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,r.default)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,r.default)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};t.default=s,e.exports=t.default},59406:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(48516)),s=n(i(12533)),a=n(i(97527)),o=n(i(25687)),l=n(i(99417)),c={code:"en-US",formatDistance:r.default,formatLong:s.default,formatRelative:a.default,localize:o.default,match:l.default,options:{weekStartsOn:0,firstWeekContainsDate:1}};t.default=c,e.exports=t.default},10967:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,s.default)(2,arguments);var i=(0,a.default)(t);return(0,r.default)(e,-i)};var r=n(i(39142)),s=n(i(40230)),a=n(i(70911));e.exports=t.default},17336:(e,t,i)=>{"use strict";var n=i(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,s.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,r.default)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))};var r=n(i(73738)),s=n(i(40230));e.exports=t.default},17283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,i="~";function n(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function s(e,t,n,s,a){if("function"!==typeof n)throw new TypeError("The listener must be a function");var o=new r(n,s||e,a),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),o.prototype.eventNames=function(){var e,n,r=[];if(0===this._eventsCount)return r;for(n in e=this._events)t.call(e,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,a=new Array(s);r<s;r++)a[r]=n[r].fn;return a},o.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,r,s,a){var o=i?i+e:e;if(!this._events[o])return!1;var l,c,h=this._events[o],d=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,r),!0;case 5:return h.fn.call(h.context,t,n,r,s),!0;case 6:return h.fn.call(h.context,t,n,r,s,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];h.fn.apply(h.context,l)}else{var u,p=h.length;for(c=0;c<p;c++)switch(h[c].once&&this.removeListener(e,h[c].fn,void 0,!0),d){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,t);break;case 3:h[c].fn.call(h[c].context,t,n);break;case 4:h[c].fn.call(h[c].context,t,n,r);break;default:if(!l)for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];h[c].fn.apply(h[c].context,l)}}return!0},o.prototype.on=function(e,t,i){return s(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return s(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,n,r){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,c=[],h=o.length;l<h;l++)(o[l].fn!==t||r&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o},77396:(e,t,i)=>{var n;!function(){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),s={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0===(n=function(){return s}.call(t,i,t,e))||(e.exports=n)}()},93090:e=>{"use strict";for(var t=function(e){return null!==e&&!Array.isArray(e)&&"object"===typeof e},i={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},n=0;n<24;n+=1)i[112+n]="F"+(n+1);for(var r=0;r<26;r+=1){var s=r+65;i[s]=[String.fromCharCode(s+32),String.fromCharCode(s)]}var a={codes:i,getCode:function(e){return t(e)?e.keyCode||e.which||this[e.key]:this[e]},getKey:function(e){var n=t(e);if(n&&e.key)return e.key;var r=i[n?e.keyCode||e.which:e];return Array.isArray(r)&&(r=n?r[e.shiftKey?1:0]:r[0]),r},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};a.Spacebar=a[" "],a.Digit0=a[0],a.Digit1=a[1],a.Digit2=a[2],a.Digit3=a[3],a.Digit4=a[4],a.Digit5=a[5],a.Digit6=a[6],a.Digit7=a[7],a.Digit8=a[8],a.Digit9=a[9],a.Tilde=a["~"],a.GraveAccent=a["`"],a.ExclamationPoint=a["!"],a.AtSign=a["@"],a.PoundSign=a["#"],a.PercentSign=a["%"],a.Caret=a["^"],a.Ampersand=a["&"],a.PlusSign=a["+"],a.MinusSign=a["-"],a.EqualsSign=a["="],a.DivisionSign=a["/"],a.MultiplicationSign=a["*"],a.Comma=a[","],a.Decimal=a["."],a.Colon=a[":"],a.Semicolon=a[";"],a.Pipe=a["|"],a.BackSlash=a["\\"],a.QuestionMark=a["?"],a.SingleQuote=a["'"],a.DoubleQuote=a['"'],a.LeftCurlyBrace=a["{"],a.RightCurlyBrace=a["}"],a.LeftParenthesis=a["("],a.RightParenthesis=a[")"],a.LeftAngleBracket=a["<"],a.RightAngleBracket=a[">"],a.LeftSquareBracket=a["["],a.RightSquareBracket=a["]"],e.exports=a},97685:(e,t,i)=>{var n=i(87937)(i(56552),"DataView");e.exports=n},98724:(e,t,i)=>{var n=i(27615),r=i(25051),s=i(72154),a=i(48734),o=i(22662);function l(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,e.exports=l},97160:(e,t,i)=>{var n=i(87563),r=i(29935),s=i(24190),a=i(51946),o=i(61714);function l(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,e.exports=l},85204:(e,t,i)=>{var n=i(87937)(i(56552),"Map");e.exports=n},64816:(e,t,i)=>{var n=i(47251),r=i(37159),s=i(80438),a=i(69394),o=i(56874);function l(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,e.exports=l},65387:(e,t,i)=>{var n=i(87937)(i(56552),"Promise");e.exports=n},72070:(e,t,i)=>{var n=i(87937)(i(56552),"Set");e.exports=n},18902:(e,t,i)=>{var n=i(64816),r=i(86179),s=i(46704);function a(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new n;++t<i;)this.add(e[t])}a.prototype.add=a.prototype.push=r,a.prototype.has=s,e.exports=a},5538:(e,t,i)=>{var n=i(97160),r=i(84545),s=i(10793),a=i(27760),o=i(3892),l=i(76788);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=r,c.prototype.delete=s,c.prototype.get=a,c.prototype.has=o,c.prototype.set=l,e.exports=c},9812:(e,t,i)=>{var n=i(56552).Symbol;e.exports=n},22929:(e,t,i)=>{var n=i(56552).Uint8Array;e.exports=n},26600:(e,t,i)=>{var n=i(87937)(i(56552),"WeakMap");e.exports=n},31170:e=>{e.exports=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}},80726:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}},17529:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,r=0,s=[];++i<n;){var a=e[i];t(a,i,e)&&(s[r++]=a)}return s}},75866:(e,t,i)=>{var n=i(88468);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},41558:e=>{e.exports=function(e,t,i){for(var n=-1,r=null==e?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}},73204:(e,t,i)=>{var n=i(3343),r=i(22777),s=i(54052),a=i(44543),o=i(69194),l=i(51268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var i=s(e),h=!i&&r(e),d=!i&&!h&&a(e),u=!i&&!h&&!d&&l(e),p=i||h||d||u,g=p?n(e.length,String):[],f=g.length;for(var m in e)!t&&!c.call(e,m)||p&&("length"==m||d&&("offset"==m||"parent"==m)||u&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||o(m,f))||g.push(m);return g}},50149:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}},48895:e=>{e.exports=function(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}},52587:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}},34724:(e,t,i)=>{var n=i(10396)("length");e.exports=n},45967:e=>{e.exports=function(e){return e.split("")}},63868:(e,t,i)=>{var n=i(71775),r=i(93211);e.exports=function(e,t,i){(void 0!==i&&!r(e[t],i)||void 0===i&&!(t in e))&&n(e,t,i)}},78420:(e,t,i)=>{var n=i(71775),r=i(93211),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,i){var a=e[t];s.call(e,t)&&r(a,i)&&(void 0!==i||t in e)||n(e,t,i)}},61340:(e,t,i)=>{var n=i(93211);e.exports=function(e,t){for(var i=e.length;i--;)if(n(e[i][0],t))return i;return-1}},51104:(e,t,i)=>{var n=i(96614),r=i(28673);e.exports=function(e,t){return e&&n(t,r(t),e)}},55119:(e,t,i)=>{var n=i(96614),r=i(30474);e.exports=function(e,t){return e&&n(t,r(t),e)}},71775:(e,t,i)=>{var n=i(5654);e.exports=function(e,t,i){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}},97132:(e,t,i)=>{var n=i(5538),r=i(80726),s=i(78420),a=i(51104),o=i(55119),l=i(44353),c=i(91980),h=i(98124),d=i(29075),u=i(59395),p=i(68592),g=i(26924),f=i(38268),m=i(18630),v=i(20310),y=i(54052),b=i(44543),_=i(57887),x=i(46686),S=i(45921),w=i(28673),C=i(30474),k="[object Arguments]",A="[object Function]",E="[object Object]",T={};T[k]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[E]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[A]=T["[object WeakMap]"]=!1,e.exports=function e(t,i,O,P,M,I){var R,D=1&i,L=2&i,j=4&i;if(O&&(R=M?O(t,P,M,I):O(t)),void 0!==R)return R;if(!x(t))return t;var F=y(t);if(F){if(R=f(t),!D)return c(t,R)}else{var B=g(t),N=B==A||"[object GeneratorFunction]"==B;if(b(t))return l(t,D);if(B==E||B==k||N&&!M){if(R=L||N?{}:v(t),!D)return L?d(t,o(R,t)):h(t,a(R,t))}else{if(!T[B])return M?t:{};R=m(t,B,D)}}I||(I=new n);var z=I.get(t);if(z)return z;I.set(t,R),S(t)?t.forEach((function(n){R.add(e(n,i,O,n,t,I))})):_(t)&&t.forEach((function(n,r){R.set(r,e(n,i,O,r,t,I))}));var H=F?void 0:(j?L?p:u:L?C:w)(t);return r(H||t,(function(n,r){H&&(n=t[r=n]),s(R,r,e(n,i,O,r,t,I))})),R}},21817:(e,t,i)=>{var n=i(46686),r=Object.create,s=function(){function e(){}return function(t){if(!n(t))return{};if(r)return r(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();e.exports=s},88746:(e,t,i)=>{var n=i(18902),r=i(75866),s=i(41558),a=i(50149),o=i(47574),l=i(58114);e.exports=function(e,t,i,c){var h=-1,d=r,u=!0,p=e.length,g=[],f=t.length;if(!p)return g;i&&(t=a(t,o(i))),c?(d=s,u=!1):t.length>=200&&(d=l,u=!1,t=new n(t));e:for(;++h<p;){var m=e[h],v=null==i?m:i(m);if(m=c||0!==m?m:0,u&&v===v){for(var y=f;y--;)if(t[y]===v)continue e;g.push(m)}else d(t,v,c)||g.push(m)}return g}},45652:(e,t,i)=>{var n=i(94664),r=i(76516)(n);e.exports=r},79742:(e,t,i)=>{var n=i(19841);e.exports=function(e,t,i){for(var r=-1,s=e.length;++r<s;){var a=e[r],o=t(a);if(null!=o&&(void 0===l?o===o&&!n(o):i(o,l)))var l=o,c=a}return c}},87171:(e,t,i)=>{var n=i(45652);e.exports=function(e,t){var i=[];return n(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i}},75816:e=>{e.exports=function(e,t,i,n){for(var r=e.length,s=i+(n?1:-1);n?s--:++s<r;)if(t(e[s],s,e))return s;return-1}},80755:(e,t,i)=>{var n=i(48895),r=i(77116);e.exports=function e(t,i,s,a,o){var l=-1,c=t.length;for(s||(s=r),o||(o=[]);++l<c;){var h=t[l];i>0&&s(h)?i>1?e(h,i-1,s,a,o):n(o,h):a||(o[o.length]=h)}return o}},94258:(e,t,i)=>{var n=i(55906)();e.exports=n},94664:(e,t,i)=>{var n=i(94258),r=i(28673);e.exports=function(e,t){return e&&n(e,t,r)}},52969:(e,t,i)=>{var n=i(35324),r=i(70914);e.exports=function(e,t){for(var i=0,s=(t=n(t,e)).length;null!=e&&i<s;)e=e[r(t[i++])];return i&&i==s?e:void 0}},4262:(e,t,i)=>{var n=i(48895),r=i(54052);e.exports=function(e,t,i){var s=t(e);return r(e)?s:n(s,i(e))}},16913:(e,t,i)=>{var n=i(9812),r=i(34552),s=i(16095),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?r(e):s(e)}},97498:e=>{e.exports=function(e,t){return e>t}},36741:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,i){return null!=e&&t.call(e,i)}},27894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},88468:(e,t,i)=>{var n=i(75816),r=i(40644),s=i(94020);e.exports=function(e,t,i){return t===t?s(e,t,i):n(e,r,i)}},11260:e=>{e.exports=function(e,t,i,n){for(var r=i-1,s=e.length;++r<s;)if(n(e[r],t))return r;return-1}},15193:(e,t,i)=>{var n=i(16913),r=i(22761);e.exports=function(e){return r(e)&&"[object Arguments]"==n(e)}},27133:(e,t,i)=>{var n=i(16913),r=i(22761);e.exports=function(e){return r(e)&&"[object Date]"==n(e)}},26989:(e,t,i)=>{var n=i(16399),r=i(22761);e.exports=function e(t,i,s,a,o){return t===i||(null==t||null==i||!r(t)&&!r(i)?t!==t&&i!==i:n(t,i,s,a,e,o))}},16399:(e,t,i)=>{var n=i(5538),r=i(43668),s=i(69987),a=i(45752),o=i(26924),l=i(54052),c=i(44543),h=i(51268),d="[object Arguments]",u="[object Array]",p="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,f,m,v){var y=l(e),b=l(t),_=y?u:o(e),x=b?u:o(t),S=(_=_==d?p:_)==p,w=(x=x==d?p:x)==p,C=_==x;if(C&&c(e)){if(!c(t))return!1;y=!0,S=!1}if(C&&!S)return v||(v=new n),y||h(e)?r(e,t,i,f,m,v):s(e,t,_,i,f,m,v);if(!(1&i)){var k=S&&g.call(e,"__wrapped__"),A=w&&g.call(t,"__wrapped__");if(k||A){var E=k?e.value():e,T=A?t.value():t;return v||(v=new n),m(E,T,i,f,v)}}return!!C&&(v||(v=new n),a(e,t,i,f,m,v))}},5791:(e,t,i)=>{var n=i(26924),r=i(22761);e.exports=function(e){return r(e)&&"[object Map]"==n(e)}},86532:(e,t,i)=>{var n=i(5538),r=i(26989);e.exports=function(e,t,i,s){var a=i.length,o=a,l=!s;if(null==e)return!o;for(e=Object(e);a--;){var c=i[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<o;){var h=(c=i[a])[0],d=e[h],u=c[1];if(l&&c[2]){if(void 0===d&&!(h in e))return!1}else{var p=new n;if(s)var g=s(d,u,h,e,t,p);if(!(void 0===g?r(u,d,3,s,p):g))return!1}}return!0}},40644:e=>{e.exports=function(e){return e!==e}},36954:(e,t,i)=>{var n=i(11629),r=i(37857),s=i(46686),a=i(96996),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,d=c.hasOwnProperty,u=RegExp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||r(e))&&(n(e)?u:o).test(a(e))}},78224:(e,t,i)=>{var n=i(16913),r=i(22761);e.exports=function(e){return r(e)&&"[object RegExp]"==n(e)}},20449:(e,t,i)=>{var n=i(26924),r=i(22761);e.exports=function(e){return r(e)&&"[object Set]"==n(e)}},35428:(e,t,i)=>{var n=i(16913),r=i(56173),s=i(22761),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&r(e.length)&&!!a[n(e)]}},9096:(e,t,i)=>{var n=i(39256),r=i(15029),s=i(33279),a=i(54052),o=i(63932);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?r(e[0],e[1]):n(e):o(e)}},83713:(e,t,i)=>{var n=i(36140),r=i(61143),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return r(e);var t=[];for(var i in Object(e))s.call(e,i)&&"constructor"!=i&&t.push(i);return t}},58122:(e,t,i)=>{var n=i(46686),r=i(36140),s=i(43516),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return s(e);var t=r(e),i=[];for(var o in e)("constructor"!=o||!t&&a.call(e,o))&&i.push(o);return i}},38883:(e,t,i)=>{var n=i(45652),r=i(6571);e.exports=function(e,t){var i=-1,s=r(e)?Array(e.length):[];return n(e,(function(e,n,r){s[++i]=t(e,n,r)})),s}},39256:(e,t,i)=>{var n=i(86532),r=i(23781),s=i(91310);e.exports=function(e){var t=r(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(i){return i===e||n(i,e,t)}}},15029:(e,t,i)=>{var n=i(26989),r=i(33097),s=i(53366),a=i(62597),o=i(31798),l=i(91310),c=i(70914);e.exports=function(e,t){return a(e)&&o(t)?l(c(e),t):function(i){var a=r(i,e);return void 0===a&&a===t?s(i,e):n(t,a,3)}}},23253:(e,t,i)=>{var n=i(5538),r=i(63868),s=i(94258),a=i(83223),o=i(46686),l=i(30474),c=i(53737);e.exports=function e(t,i,h,d,u){t!==i&&s(i,(function(s,l){if(u||(u=new n),o(s))a(t,i,l,h,e,d,u);else{var p=d?d(c(t,l),s,l+"",t,i,u):void 0;void 0===p&&(p=s),r(t,l,p)}}),l)}},83223:(e,t,i)=>{var n=i(63868),r=i(44353),s=i(38710),a=i(91980),o=i(20310),l=i(22777),c=i(54052),h=i(76272),d=i(44543),u=i(11629),p=i(46686),g=i(12322),f=i(51268),m=i(53737),v=i(91609);e.exports=function(e,t,i,y,b,_,x){var S=m(e,i),w=m(t,i),C=x.get(w);if(C)n(e,i,C);else{var k=_?_(S,w,i+"",e,t,x):void 0,A=void 0===k;if(A){var E=c(w),T=!E&&d(w),O=!E&&!T&&f(w);k=w,E||T||O?c(S)?k=S:h(S)?k=a(S):T?(A=!1,k=r(w,!0)):O?(A=!1,k=s(w,!0)):k=[]:g(w)||l(w)?(k=S,l(S)?k=v(S):p(S)&&!u(S)||(k=o(w))):A=!1}A&&(x.set(w,k),b(k,w,y,_,x),x.delete(w)),n(e,i,k)}}},94008:(e,t,i)=>{var n=i(27449),r=i(53366);e.exports=function(e,t){return n(e,t,(function(t,i){return r(e,i)}))}},27449:(e,t,i)=>{var n=i(52969),r=i(9261),s=i(35324);e.exports=function(e,t,i){for(var a=-1,o=t.length,l={};++a<o;){var c=t[a],h=n(e,c);i(h,c)&&r(l,s(c,e),h)}return l}},10396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},52866:(e,t,i)=>{var n=i(52969);e.exports=function(e){return function(t){return n(t,e)}}},96415:(e,t,i)=>{var n=i(50149),r=i(88468),s=i(11260),a=i(47574),o=i(91980),l=Array.prototype.splice;e.exports=function(e,t,i,c){var h=c?s:r,d=-1,u=t.length,p=e;for(e===t&&(t=o(t)),i&&(p=n(e,a(i)));++d<u;)for(var g=0,f=t[d],m=i?i(f):f;(g=h(p,m,g,c))>-1;)p!==e&&l.call(p,g,1),l.call(e,g,1);return e}},55647:(e,t,i)=>{var n=i(33279),r=i(55636),s=i(46350);e.exports=function(e,t){return s(r(e,t,n),e+"")}},9261:(e,t,i)=>{var n=i(78420),r=i(35324),s=i(69194),a=i(46686),o=i(70914);e.exports=function(e,t,i,l){if(!a(e))return e;for(var c=-1,h=(t=r(t,e)).length,d=h-1,u=e;null!=u&&++c<h;){var p=o(t[c]),g=i;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(c!=d){var f=u[p];void 0===(g=l?l(f,p,u):void 0)&&(g=a(f)?f:s(t[c+1])?[]:{})}n(u,p,g),u=u[p]}return e}},28325:(e,t,i)=>{var n=i(22541),r=i(5654),s=i(33279),a=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s;e.exports=a},53871:e=>{e.exports=function(e,t,i){var n=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(i=i>r?r:i)<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var s=Array(r);++n<r;)s[n]=e[n+t];return s}},22165:(e,t,i)=>{var n=i(45652);e.exports=function(e,t){var i;return n(e,(function(e,n,r){return!(i=t(e,n,r))})),!!i}},3343:e=>{e.exports=function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}},38541:(e,t,i)=>{var n=i(9812),r=i(50149),s=i(54052),a=i(19841),o=n?n.prototype:void 0,l=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return r(t,e)+"";if(a(t))return l?l.call(t):"";var i=t+"";return"0"==i&&1/t==-1/0?"-0":i}},61141:(e,t,i)=>{var n=i(10143),r=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(r,""):e}},47574:e=>{e.exports=function(e){return function(t){return e(t)}}},64416:(e,t,i)=>{var n=i(18902),r=i(75866),s=i(41558),a=i(58114),o=i(68182),l=i(52074);e.exports=function(e,t,i){var c=-1,h=r,d=e.length,u=!0,p=[],g=p;if(i)u=!1,h=s;else if(d>=200){var f=t?null:o(e);if(f)return l(f);u=!1,h=a,g=new n}else g=t?[]:p;e:for(;++c<d;){var m=e[c],v=t?t(m):m;if(m=i||0!==m?m:0,u&&v===v){for(var y=g.length;y--;)if(g[y]===v)continue e;t&&g.push(v),p.push(m)}else h(g,v,i)||(g!==p&&g.push(v),p.push(m))}return p}},88140:(e,t,i)=>{var n=i(35324),r=i(74065),s=i(21676),a=i(70914);e.exports=function(e,t){return t=n(t,e),null==(e=s(e,t))||delete e[a(r(t))]}},86983:(e,t,i)=>{var n=i(50149);e.exports=function(e,t){return n(t,(function(t){return e[t]}))}},58114:e=>{e.exports=function(e,t){return e.has(t)}},25111:(e,t,i)=>{var n=i(33279);e.exports=function(e){return"function"==typeof e?e:n}},35324:(e,t,i)=>{var n=i(54052),r=i(62597),s=i(14079),a=i(41069);e.exports=function(e,t){return n(e)?e:r(e,t)?[e]:s(a(e))}},28189:(e,t,i)=>{var n=i(53871);e.exports=function(e,t,i){var r=e.length;return i=void 0===i?r:i,!t&&i>=r?e:n(e,t,i)}},61516:(e,t,i)=>{var n=i(22929);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},44353:(e,t,i)=>{e=i.nmd(e);var n=i(56552),r=t&&!t.nodeType&&t,s=r&&e&&!e.nodeType&&e,a=s&&s.exports===r?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var i=e.length,n=o?o(i):new e.constructor(i);return e.copy(n),n}},6806:(e,t,i)=>{var n=i(61516);e.exports=function(e,t){var i=t?n(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}},18962:e=>{var t=/\w*$/;e.exports=function(e){var i=new e.constructor(e.source,t.exec(e));return i.lastIndex=e.lastIndex,i}},11295:(e,t,i)=>{var n=i(9812),r=n?n.prototype:void 0,s=r?r.valueOf:void 0;e.exports=function(e){return s?Object(s.call(e)):{}}},38710:(e,t,i)=>{var n=i(61516);e.exports=function(e,t){var i=t?n(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}},91980:e=>{e.exports=function(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}},96614:(e,t,i)=>{var n=i(78420),r=i(71775);e.exports=function(e,t,i,s){var a=!i;i||(i={});for(var o=-1,l=t.length;++o<l;){var c=t[o],h=s?s(i[c],e[c],c,i,e):void 0;void 0===h&&(h=e[c]),a?r(i,c,h):n(i,c,h)}return i}},98124:(e,t,i)=>{var n=i(96614),r=i(69621);e.exports=function(e,t){return n(e,r(e),t)}},29075:(e,t,i)=>{var n=i(96614),r=i(56326);e.exports=function(e,t){return n(e,r(e),t)}},13440:(e,t,i)=>{var n=i(56552)["__core-js_shared__"];e.exports=n},84570:(e,t,i)=>{var n=i(55647),r=i(60929);e.exports=function(e){return n((function(t,i){var n=-1,s=i.length,a=s>1?i[s-1]:void 0,o=s>2?i[2]:void 0;for(a=e.length>3&&"function"==typeof a?(s--,a):void 0,o&&r(i[0],i[1],o)&&(a=s<3?void 0:a,s=1),t=Object(t);++n<s;){var l=i[n];l&&e(t,l,n,a)}return t}))}},76516:(e,t,i)=>{var n=i(6571);e.exports=function(e,t){return function(i,r){if(null==i)return i;if(!n(i))return e(i,r);for(var s=i.length,a=t?s:-1,o=Object(i);(t?a--:++a<s)&&!1!==r(o[a],a,o););return i}}},55906:e=>{e.exports=function(e){return function(t,i,n){for(var r=-1,s=Object(t),a=n(t),o=a.length;o--;){var l=a[e?o:++r];if(!1===i(s[l],l,s))break}return t}}},69995:(e,t,i)=>{var n=i(9096),r=i(6571),s=i(28673);e.exports=function(e){return function(t,i,a){var o=Object(t);if(!r(t)){var l=n(i,3);t=s(t),i=function(e){return l(o[e],e,o)}}var c=e(t,i,a);return c>-1?o[l?t[c]:c]:void 0}}},68182:(e,t,i)=>{var n=i(72070),r=i(75713),s=i(52074),a=n&&1/s(new n([,-0]))[1]==1/0?function(e){return new n(e)}:r;e.exports=a},96761:(e,t,i)=>{var n=i(12322);e.exports=function(e){return n(e)?void 0:e}},5654:(e,t,i)=>{var n=i(87937),r=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=r},43668:(e,t,i)=>{var n=i(18902),r=i(52587),s=i(58114);e.exports=function(e,t,i,a,o,l){var c=1&i,h=e.length,d=t.length;if(h!=d&&!(c&&d>h))return!1;var u=l.get(e),p=l.get(t);if(u&&p)return u==t&&p==e;var g=-1,f=!0,m=2&i?new n:void 0;for(l.set(e,t),l.set(t,e);++g<h;){var v=e[g],y=t[g];if(a)var b=c?a(y,v,g,t,e,l):a(v,y,g,e,t,l);if(void 0!==b){if(b)continue;f=!1;break}if(m){if(!r(t,(function(e,t){if(!s(m,t)&&(v===e||o(v,e,i,a,l)))return m.push(t)}))){f=!1;break}}else if(v!==y&&!o(v,y,i,a,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},69987:(e,t,i)=>{var n=i(9812),r=i(22929),s=i(93211),a=i(43668),o=i(54160),l=i(52074),c=n?n.prototype:void 0,h=c?c.valueOf:void 0;e.exports=function(e,t,i,n,c,d,u){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new r(e),new r(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=o;case"[object Set]":var g=1&n;if(p||(p=l),e.size!=t.size&&!g)return!1;var f=u.get(e);if(f)return f==t;n|=2,u.set(e,t);var m=a(p(e),p(t),n,c,d,u);return u.delete(e),m;case"[object Symbol]":if(h)return h.call(e)==h.call(t)}return!1}},45752:(e,t,i)=>{var n=i(59395),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,s,a,o){var l=1&i,c=n(e),h=c.length;if(h!=n(t).length&&!l)return!1;for(var d=h;d--;){var u=c[d];if(!(l?u in t:r.call(t,u)))return!1}var p=o.get(e),g=o.get(t);if(p&&g)return p==t&&g==e;var f=!0;o.set(e,t),o.set(t,e);for(var m=l;++d<h;){var v=e[u=c[d]],y=t[u];if(s)var b=l?s(y,v,u,t,e,o):s(v,y,u,e,t,o);if(!(void 0===b?v===y||a(v,y,i,s,o):b)){f=!1;break}m||(m="constructor"==u)}if(f&&!m){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(f=!1)}return o.delete(e),o.delete(t),f}},15857:(e,t,i)=>{var n=i(20819),r=i(55636),s=i(46350);e.exports=function(e){return s(r(e,void 0,n),e+"")}},37105:(e,t,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;e.exports=n},59395:(e,t,i)=>{var n=i(4262),r=i(69621),s=i(28673);e.exports=function(e){return n(e,s,r)}},68592:(e,t,i)=>{var n=i(4262),r=i(56326),s=i(30474);e.exports=function(e){return n(e,s,r)}},12622:(e,t,i)=>{var n=i(70705);e.exports=function(e,t){var i=e.__data__;return n(t)?i["string"==typeof t?"string":"hash"]:i.map}},23781:(e,t,i)=>{var n=i(31798),r=i(28673);e.exports=function(e){for(var t=r(e),i=t.length;i--;){var s=t[i],a=e[s];t[i]=[s,a,n(a)]}return t}},87937:(e,t,i)=>{var n=i(36954),r=i(14657);e.exports=function(e,t){var i=r(e,t);return n(i)?i:void 0}},85990:(e,t,i)=>{var n=i(13028)(Object.getPrototypeOf,Object);e.exports=n},34552:(e,t,i)=>{var n=i(9812),r=Object.prototype,s=r.hasOwnProperty,a=r.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,o),i=e[o];try{e[o]=void 0;var n=!0}catch(l){}var r=a.call(e);return n&&(t?e[o]=i:delete e[o]),r}},69621:(e,t,i)=>{var n=i(17529),r=i(57828),s=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,o=a?function(e){return null==e?[]:(e=Object(e),n(a(e),(function(t){return s.call(e,t)})))}:r;e.exports=o},56326:(e,t,i)=>{var n=i(48895),r=i(85990),s=i(69621),a=i(57828),o=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,s(e)),e=r(e);return t}:a;e.exports=o},26924:(e,t,i)=>{var n=i(97685),r=i(85204),s=i(65387),a=i(72070),o=i(26600),l=i(16913),c=i(96996),h="[object Map]",d="[object Promise]",u="[object Set]",p="[object WeakMap]",g="[object DataView]",f=c(n),m=c(r),v=c(s),y=c(a),b=c(o),_=l;(n&&_(new n(new ArrayBuffer(1)))!=g||r&&_(new r)!=h||s&&_(s.resolve())!=d||a&&_(new a)!=u||o&&_(new o)!=p)&&(_=function(e){var t=l(e),i="[object Object]"==t?e.constructor:void 0,n=i?c(i):"";if(n)switch(n){case f:return g;case m:return h;case v:return d;case y:return u;case b:return p}return t}),e.exports=_},14657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},99057:(e,t,i)=>{var n=i(35324),r=i(22777),s=i(54052),a=i(69194),o=i(56173),l=i(70914);e.exports=function(e,t,i){for(var c=-1,h=(t=n(t,e)).length,d=!1;++c<h;){var u=l(t[c]);if(!(d=null!=e&&i(e,u)))break;e=e[u]}return d||++c!=h?d:!!(h=null==e?0:e.length)&&o(h)&&a(u,h)&&(s(e)||r(e))}},36311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},27615:(e,t,i)=>{var n=i(95575);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},25051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},72154:(e,t,i)=>{var n=i(95575),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return r.call(t,e)?t[e]:void 0}},48734:(e,t,i)=>{var n=i(95575),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:r.call(t,e)}},22662:(e,t,i)=>{var n=i(95575);e.exports=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},38268:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var i=e.length,n=new e.constructor(i);return i&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},18630:(e,t,i)=>{var n=i(61516),r=i(6806),s=i(18962),a=i(11295),o=i(38710);e.exports=function(e,t,i){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return r(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return o(e,i);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return s(e);case"[object Symbol]":return a(e)}}},20310:(e,t,i)=>{var n=i(21817),r=i(85990),s=i(36140);e.exports=function(e){return"function"!=typeof e.constructor||s(e)?{}:n(r(e))}},77116:(e,t,i)=>{var n=i(9812),r=i(22777),s=i(54052),a=n?n.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||r(e)||!!(a&&e&&e[a])}},69194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,i){var n=typeof e;return!!(i=null==i?9007199254740991:i)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<i}},60929:(e,t,i)=>{var n=i(93211),r=i(6571),s=i(69194),a=i(46686);e.exports=function(e,t,i){if(!a(i))return!1;var o=typeof t;return!!("number"==o?r(i)&&s(t,i.length):"string"==o&&t in i)&&n(i[t],e)}},62597:(e,t,i)=>{var n=i(54052),r=i(19841),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!r(e))||(a.test(e)||!s.test(e)||null!=t&&e in Object(t))}},70705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},37857:(e,t,i)=>{var n=i(13440),r=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!r&&r in e}},36140:e=>{var t=Object.prototype;e.exports=function(e){var i=e&&e.constructor;return e===("function"==typeof i&&i.prototype||t)}},31798:(e,t,i)=>{var n=i(46686);e.exports=function(e){return e===e&&!n(e)}},87563:e=>{e.exports=function(){this.__data__=[],this.size=0}},29935:(e,t,i)=>{var n=i(61340),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,i=n(t,e);return!(i<0)&&(i==t.length-1?t.pop():r.call(t,i,1),--this.size,!0)}},24190:(e,t,i)=>{var n=i(61340);e.exports=function(e){var t=this.__data__,i=n(t,e);return i<0?void 0:t[i][1]}},51946:(e,t,i)=>{var n=i(61340);e.exports=function(e){return n(this.__data__,e)>-1}},61714:(e,t,i)=>{var n=i(61340);e.exports=function(e,t){var i=this.__data__,r=n(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}},47251:(e,t,i)=>{var n=i(98724),r=i(97160),s=i(85204);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||r),string:new n}}},37159:(e,t,i)=>{var n=i(12622);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},80438:(e,t,i)=>{var n=i(12622);e.exports=function(e){return n(this,e).get(e)}},69394:(e,t,i)=>{var n=i(12622);e.exports=function(e){return n(this,e).has(e)}},56874:(e,t,i)=>{var n=i(12622);e.exports=function(e,t){var i=n(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}},54160:e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}},91310:e=>{e.exports=function(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}}},88259:(e,t,i)=>{var n=i(15797);e.exports=function(e){var t=n(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}},95575:(e,t,i)=>{var n=i(87937)(Object,"create");e.exports=n},61143:(e,t,i)=>{var n=i(13028)(Object.keys,Object);e.exports=n},43516:e=>{e.exports=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}},56832:(e,t,i)=>{e=i.nmd(e);var n=i(37105),r=t&&!t.nodeType&&t,s=r&&e&&!e.nodeType&&e,a=s&&s.exports===r&&n.process,o=function(){try{var e=s&&s.require&&s.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=o},16095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},13028:e=>{e.exports=function(e,t){return function(i){return e(t(i))}}},55636:(e,t,i)=>{var n=i(31170),r=Math.max;e.exports=function(e,t,i){return t=r(void 0===t?e.length-1:t,0),function(){for(var s=arguments,a=-1,o=r(s.length-t,0),l=Array(o);++a<o;)l[a]=s[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=s[a];return c[t]=i(l),n(e,this,c)}}},21676:(e,t,i)=>{var n=i(52969),r=i(53871);e.exports=function(e,t){return t.length<2?e:n(e,r(t,0,-1))}},56552:(e,t,i)=>{var n=i(37105),r="object"==typeof self&&self&&self.Object===Object&&self,s=n||r||Function("return this")();e.exports=s},53737:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}},86179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},46704:e=>{e.exports=function(e){return this.__data__.has(e)}},52074:e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}},46350:(e,t,i)=>{var n=i(28325),r=i(86578)(n);e.exports=r},86578:e=>{var t=Date.now;e.exports=function(e){var i=0,n=0;return function(){var r=t(),s=16-(r-n);if(n=r,s>0){if(++i>=800)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}},84545:(e,t,i)=>{var n=i(97160);e.exports=function(){this.__data__=new n,this.size=0}},10793:e=>{e.exports=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}},27760:e=>{e.exports=function(e){return this.__data__.get(e)}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},76788:(e,t,i)=>{var n=i(97160),r=i(85204),s=i(64816);e.exports=function(e,t){var i=this.__data__;if(i instanceof n){var a=i.__data__;if(!r||a.length<199)return a.push([e,t]),this.size=++i.size,this;i=this.__data__=new s(a)}return i.set(e,t),this.size=i.size,this}},94020:e=>{e.exports=function(e,t,i){for(var n=i-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1}},91632:(e,t,i)=>{var n=i(34724),r=i(36311),s=i(67168);e.exports=function(e){return r(e)?s(e):n(e)}},39115:(e,t,i)=>{var n=i(45967),r=i(36311),s=i(50715);e.exports=function(e){return r(e)?s(e):n(e)}},14079:(e,t,i)=>{var n=i(88259),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,i,n,r){t.push(n?r.replace(s,"$1"):i||e)})),t}));e.exports=a},70914:(e,t,i)=>{var n=i(19841);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},96996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(i){}try{return e+""}catch(i){}}return""}},10143:e=>{var t=/\s/;e.exports=function(e){for(var i=e.length;i--&&t.test(e.charAt(i)););return i}},67168:e=>{var t="\\ud800-\\udfff",i="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",s="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+r+")"+"?",c="[\\ufe0e\\ufe0f]?",h=c+l+("(?:\\u200d(?:"+[s,a,o].join("|")+")"+c+l+")*"),d="(?:"+[s+n+"?",n,a,o,i].join("|")+")",u=RegExp(r+"(?="+r+")|"+d+h,"g");e.exports=function(e){for(var t=u.lastIndex=0;u.test(e);)++t;return t}},50715:e=>{var t="\\ud800-\\udfff",i="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",s="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+r+")"+"?",c="[\\ufe0e\\ufe0f]?",h=c+l+("(?:\\u200d(?:"+[s,a,o].join("|")+")"+c+l+")*"),d="(?:"+[s+n+"?",n,a,o,i].join("|")+")",u=RegExp(r+"(?="+r+")|"+d+h,"g");e.exports=function(e){return e.match(u)||[]}},13728:(e,t,i)=>{var n=i(78420),r=i(96614),s=i(84570),a=i(6571),o=i(36140),l=i(28673),c=Object.prototype.hasOwnProperty,h=s((function(e,t){if(o(t)||a(t))r(t,l(t),e);else for(var i in t)c.call(t,i)&&n(e,i,t[i])}));e.exports=h},41740:(e,t,i)=>{var n=i(97132);e.exports=function(e){return n(e,4)}},91054:(e,t,i)=>{var n=i(97132);e.exports=function(e,t){return n(e,5,t="function"==typeof t?t:void 0)}},22541:e=>{e.exports=function(e){return function(){return e}}},93950:(e,t,i)=>{var n=i(46686),r=i(4757),s=i(40801),a=Math.max,o=Math.min;e.exports=function(e,t,i){var l,c,h,d,u,p,g=0,f=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var i=l,n=c;return l=c=void 0,g=t,d=e.apply(n,i)}function b(e){var i=e-p;return void 0===p||i>=t||i<0||m&&e-g>=h}function _(){var e=r();if(b(e))return x(e);u=setTimeout(_,function(e){var i=t-(e-p);return m?o(i,h-(e-g)):i}(e))}function x(e){return u=void 0,v&&l?y(e):(l=c=void 0,d)}function S(){var e=r(),i=b(e);if(l=arguments,c=this,p=e,i){if(void 0===u)return function(e){return g=e,u=setTimeout(_,t),f?y(e):d}(p);if(m)return clearTimeout(u),u=setTimeout(_,t),y(p)}return void 0===u&&(u=setTimeout(_,t)),d}return t=s(t)||0,n(i)&&(f=!!i.leading,h=(m="maxWait"in i)?a(s(i.maxWait)||0,t):h,v="trailing"in i?!!i.trailing:v),S.cancel=function(){void 0!==u&&clearTimeout(u),g=0,l=p=c=u=void 0},S.flush=function(){return void 0===u?d:x(r())},S}},88458:(e,t,i)=>{var n=i(88746),r=i(80755),s=i(55647),a=i(76272),o=s((function(e,t){return a(e)?n(e,r(t,1,a,!0)):[]}));e.exports=o},62580:(e,t,i)=>{e.exports=i(55491)},93211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},50723:(e,t,i)=>{var n=i(17529),r=i(87171),s=i(9096),a=i(54052);e.exports=function(e,t){return(a(e)?n:r)(e,s(t,3))}},98990:(e,t,i)=>{var n=i(69995)(i(32520));e.exports=n},32520:(e,t,i)=>{var n=i(75816),r=i(9096),s=i(99140),a=Math.max;e.exports=function(e,t,i){var o=null==e?0:e.length;if(!o)return-1;var l=null==i?0:s(i);return l<0&&(l=a(o+l,0)),n(e,r(t,3),l)}},21844:(e,t,i)=>{var n=i(75816),r=i(9096),s=i(99140),a=Math.max,o=Math.min;e.exports=function(e,t,i){var l=null==e?0:e.length;if(!l)return-1;var c=l-1;return void 0!==i&&(c=s(i),c=i<0?a(l+c,0):o(c,l-1)),n(e,r(t,3),c,!0)}},20819:(e,t,i)=>{var n=i(80755);e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},63517:(e,t,i)=>{var n=i(80755),r=1/0;e.exports=function(e){return(null==e?0:e.length)?n(e,r):[]}},55491:(e,t,i)=>{var n=i(80726),r=i(45652),s=i(25111),a=i(54052);e.exports=function(e,t){return(a(e)?n:r)(e,s(t))}},33097:(e,t,i)=>{var n=i(52969);e.exports=function(e,t,i){var r=null==e?void 0:n(e,t);return void 0===r?i:r}},62117:(e,t,i)=>{var n=i(36741),r=i(99057);e.exports=function(e,t){return null!=e&&r(e,t,n)}},53366:(e,t,i)=>{var n=i(27894),r=i(99057);e.exports=function(e,t){return null!=e&&r(e,t,n)}},33279:e=>{e.exports=function(e){return e}},84048:(e,t,i)=>{var n=i(88468),r=i(6571),s=i(90620),a=i(99140),o=i(26727),l=Math.max;e.exports=function(e,t,i,c){e=r(e)?e:o(e),i=i&&!c?a(i):0;var h=e.length;return i<0&&(i=l(h+i,0)),s(e)?i<=h&&e.indexOf(t,i)>-1:!!h&&n(e,t,i)>-1}},22777:(e,t,i)=>{var n=i(15193),r=i(22761),s=Object.prototype,a=s.hasOwnProperty,o=s.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return r(e)&&a.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},54052:e=>{var t=Array.isArray;e.exports=t},6571:(e,t,i)=>{var n=i(11629),r=i(56173);e.exports=function(e){return null!=e&&r(e.length)&&!n(e)}},76272:(e,t,i)=>{var n=i(6571),r=i(22761);e.exports=function(e){return r(e)&&n(e)}},96361:(e,t,i)=>{var n=i(16913),r=i(22761);e.exports=function(e){return!0===e||!1===e||r(e)&&"[object Boolean]"==n(e)}},44543:(e,t,i)=>{e=i.nmd(e);var n=i(56552),r=i(60014),s=t&&!t.nodeType&&t,a=s&&e&&!e.nodeType&&e,o=a&&a.exports===s?n.Buffer:void 0,l=(o?o.isBuffer:void 0)||r;e.exports=l},93085:(e,t,i)=>{var n=i(27133),r=i(47574),s=i(56832),a=s&&s.isDate,o=a?r(a):n;e.exports=o},54320:(e,t,i)=>{var n=i(83713),r=i(26924),s=i(22777),a=i(54052),o=i(6571),l=i(44543),c=i(36140),h=i(51268),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||h(e)||s(e)))return!e.length;var t=r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var i in e)if(d.call(e,i))return!1;return!0}},19853:(e,t,i)=>{var n=i(26989);e.exports=function(e,t){return n(e,t)}},56641:(e,t,i)=>{var n=i(26989);e.exports=function(e,t,i){var r=(i="function"==typeof i?i:void 0)?i(e,t):void 0;return void 0===r?n(e,t,void 0,i):!!r}},11629:(e,t,i)=>{var n=i(16913),r=i(46686);e.exports=function(e){if(!r(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},56173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},57887:(e,t,i)=>{var n=i(5791),r=i(47574),s=i(56832),a=s&&s.isMap,o=a?r(a):n;e.exports=o},35268:(e,t,i)=>{var n=i(79160);e.exports=function(e){return n(e)&&e!=+e}},89124:e=>{e.exports=function(e){return null===e}},79160:(e,t,i)=>{var n=i(16913),r=i(22761);e.exports=function(e){return"number"==typeof e||r(e)&&"[object Number]"==n(e)}},46686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},22761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},12322:(e,t,i)=>{var n=i(16913),r=i(85990),s=i(22761),a=Function.prototype,o=Object.prototype,l=a.toString,c=o.hasOwnProperty,h=l.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=n(e))return!1;var t=r(e);if(null===t)return!0;var i=c.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==h}},7376:(e,t,i)=>{var n=i(78224),r=i(47574),s=i(56832),a=s&&s.isRegExp,o=a?r(a):n;e.exports=o},45921:(e,t,i)=>{var n=i(20449),r=i(47574),s=i(56832),a=s&&s.isSet,o=a?r(a):n;e.exports=o},90620:(e,t,i)=>{var n=i(16913),r=i(54052),s=i(22761);e.exports=function(e){return"string"==typeof e||!r(e)&&s(e)&&"[object String]"==n(e)}},19841:(e,t,i)=>{var n=i(16913),r=i(22761);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==n(e)}},51268:(e,t,i)=>{var n=i(35428),r=i(47574),s=i(56832),a=s&&s.isTypedArray,o=a?r(a):n;e.exports=o},141:e=>{e.exports=function(e){return void 0===e}},28673:(e,t,i)=>{var n=i(73204),r=i(83713),s=i(6571);e.exports=function(e){return s(e)?n(e):r(e)}},30474:(e,t,i)=>{var n=i(73204),r=i(58122),s=i(6571);e.exports=function(e){return s(e)?n(e,!0):r(e)}},74065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},33411:(e,t,i)=>{var n=i(50149),r=i(9096),s=i(38883),a=i(54052);e.exports=function(e,t){return(a(e)?n:s)(e,r(t,3))}},50539:(e,t,i)=>{var n=i(79742),r=i(97498),s=i(33279);e.exports=function(e){return e&&e.length?n(e,s,r):void 0}},15797:(e,t,i)=>{var n=i(64816);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],s=i.cache;if(s.has(r))return s.get(r);var a=e.apply(this,n);return i.cache=s.set(r,a)||s,a};return i.cache=new(r.Cache||n),i}r.Cache=n,e.exports=r},34677:(e,t,i)=>{var n=i(23253),r=i(84570)((function(e,t,i){n(e,t,i)}));e.exports=r},75713:e=>{e.exports=function(){}},4757:(e,t,i)=>{var n=i(56552);e.exports=function(){return n.Date.now()}},1488:(e,t,i)=>{var n=i(50149),r=i(97132),s=i(88140),a=i(35324),o=i(96614),l=i(96761),c=i(15857),h=i(68592),d=c((function(e,t){var i={};if(null==e)return i;var c=!1;t=n(t,(function(t){return t=a(t,e),c||(c=t.length>1),t})),o(e,h(e),i),c&&(i=r(i,7,l));for(var d=t.length;d--;)s(i,t[d]);return i}));e.exports=d},22616:(e,t,i)=>{var n=i(94008),r=i(15857)((function(e,t){return null==e?{}:n(e,t)}));e.exports=r},63932:(e,t,i)=>{var n=i(10396),r=i(52866),s=i(62597),a=i(70914);e.exports=function(e){return s(e)?n(a(e)):r(e)}},92394:(e,t,i)=>{var n=i(55647)(i(73535));e.exports=n},73535:(e,t,i)=>{var n=i(96415);e.exports=function(e,t){return e&&e.length&&t&&t.length?n(e,t):e}},69613:(e,t,i)=>{var n=i(9261);e.exports=function(e,t,i){return null==e?e:n(e,t,i)}},35640:(e,t,i)=>{var n=i(83713),r=i(26924),s=i(6571),a=i(90620),o=i(91632);e.exports=function(e){if(null==e)return 0;if(s(e))return a(e)?o(e):e.length;var t=r(e);return"[object Map]"==t||"[object Set]"==t?e.size:n(e).length}},74255:(e,t,i)=>{var n=i(53871),r=i(60929),s=i(99140);e.exports=function(e,t,i){var a=null==e?0:e.length;return a?(i&&"number"!=typeof i&&r(e,t,i)?(t=0,i=a):(t=null==t?0:s(t),i=void 0===i?a:s(i)),n(e,t,i)):[]}},24597:(e,t,i)=>{var n=i(52587),r=i(9096),s=i(22165),a=i(54052),o=i(60929);e.exports=function(e,t,i){var l=a(e)?n:s;return i&&o(e,t,i)&&(t=void 0),l(e,r(t,3))}},55357:(e,t,i)=>{var n=i(38541),r=i(28189),s=i(36311),a=i(60929),o=i(7376),l=i(39115),c=i(41069);e.exports=function(e,t,i){return i&&"number"!=typeof i&&a(e,t,i)&&(t=i=void 0),(i=void 0===i?4294967295:i>>>0)?(e=c(e))&&("string"==typeof t||null!=t&&!o(t))&&!(t=n(t))&&s(e)?r(l(e),0,i):e.split(t,i):[]}},57828:e=>{e.exports=function(){return[]}},60014:e=>{e.exports=function(){return!1}},19269:e=>{e.exports=function(){return!0}},79889:(e,t,i)=>{var n=i(93950),r=i(46686);e.exports=function(e,t,i){var s=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return r(i)&&(s="leading"in i?!!i.leading:s,a="trailing"in i?!!i.trailing:a),n(e,t,{leading:s,maxWait:t,trailing:a})}},71247:(e,t,i)=>{var n=i(3343),r=i(25111),s=i(99140),a=4294967295,o=Math.min;e.exports=function(e,t){if((e=s(e))<1||e>9007199254740991)return[];var i=a,l=o(e,a);t=r(t),e-=a;for(var c=n(l,t);++i<e;)t(i);return c}},37303:(e,t,i)=>{var n=i(40801),r=1/0;e.exports=function(e){return e?(e=n(e))===r||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},99140:(e,t,i)=>{var n=i(37303);e.exports=function(e){var t=n(e),i=t%1;return t===t?i?t-i:t:0}},40801:(e,t,i)=>{var n=i(61141),r=i(46686),s=i(19841),a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var i=o.test(e);return i||l.test(e)?c(e.slice(2),i?2:8):a.test(e)?NaN:+e}},615:(e,t,i)=>{var n=i(50149),r=i(91980),s=i(54052),a=i(19841),o=i(14079),l=i(70914),c=i(41069);e.exports=function(e){return s(e)?n(e,l):a(e)?[e]:r(o(c(e)))}},91609:(e,t,i)=>{var n=i(96614),r=i(30474);e.exports=function(e){return n(e,r(e))}},41069:(e,t,i)=>{var n=i(38541);e.exports=function(e){return null==e?"":n(e)}},9376:(e,t,i)=>{var n=i(64416);e.exports=function(e){return e&&e.length?n(e):[]}},16940:(e,t,i)=>{var n=i(88140);e.exports=function(e,t){return null==e||n(e,t)}},26727:(e,t,i)=>{var n=i(86983),r=i(28673);e.exports=function(e){return null==e?[]:n(e,r(e))}},16757:(e,t,i)=>{var n=i(88746),r=i(55647),s=i(76272),a=r((function(e,t){return s(e)?n(e,t):[]}));e.exports=a},42123:e=>{"use strict";var t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}()?Object.assign:function(e,r){for(var s,a,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))i.call(s,c)&&(o[c]=s[c]);if(t){a=t(s);for(var h=0;h<a.length;h++)n.call(s,a[h])&&(o[a[h]]=s[a[h]])}}return o}},41497:(e,t,i)=>{"use strict";var n=i(13218);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,s,a){if(a!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return i.PropTypes=i,i}},65173:(e,t,i)=>{e.exports=i(41497)()},13218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},82730:(e,t,i)=>{"use strict";var n=i(65043),r=i(78853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function f(e,t,i,n,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,i,n){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!d.call(g,e)||!d.call(p,e)&&(u.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var j,F=Object.assign;function B(e){if(void 0===j)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var N=!1;function z(e,t){if(!e||N)return"";N=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=n.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{N=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?B(e):""}function H(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case S:return"Portal";case k:return"Profiler";case C:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return V(e(t))}catch(i){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=G(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var i=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function Z(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=W(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Q(e,t);var i=W(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,i):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function ee(e,t,i){"number"===t&&X(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var te=Array.isArray;function ie(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+W(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(s(92));if(te(i)){if(1<i.length)throw Error(s(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:W(i)}}function se(e,t){var i=W(t.value),n=W(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,he,de=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function ue(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function fe(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=fe(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(pe).forEach((function(e){ge.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,we=null,Ce=null;function ke(e){if(e=br(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=xr(t),Se(e.stateNode,e.type,t))}}function Ae(e){we?Ce?Ce.push(e):Ce=[e]:we=e}function Ee(){if(we){var e=we,t=Ce;if(Ce=we=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Te(e,t){return e(t)}function Oe(){}var Pe=!1;function Me(e,t,i){if(Pe)return e(t,i);Pe=!0;try{return Te(e,t,i)}finally{Pe=!1,(null!==we||null!==Ce)&&(Oe(),Ee())}}function Ie(e,t){var i=e.stateNode;if(null===i)return null;var n=xr(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(s(231,t,typeof i));return i}var Re=!1;if(h)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(he){Re=!1}function Le(e,t,i,n,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(h){this.onError(h)}}var je=!1,Fe=null,Be=!1,Ne=null,ze={onError:function(e){je=!0,Fe=e}};function He(e,t,i,n,r,s,a,o,l){je=!1,Fe=null,Le.apply(ze,arguments)}function Ve(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(n=r.return)){i=n;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===i)return We(r),e;if(a===n)return We(r),t;a=a.sibling}throw Error(s(188))}if(i.return!==n.return)i=r,n=a;else{for(var o=!1,l=r.child;l;){if(l===i){o=!0,i=r,n=a;break}if(l===n){o=!0,n=r,i=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===i){o=!0,i=a,n=r;break}if(l===n){o=!0,n=a,i=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(i.alternate!==n)throw Error(s(190))}if(3!==i.tag)throw Error(s(188));return i.stateNode.current===i?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,qe=r.unstable_shouldYield,Ze=r.unstable_requestPaint,Qe=r.unstable_now,$e=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,it=r.unstable_LowPriority,nt=r.unstable_IdlePriority,rt=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ht=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&i;if(0!==a){var o=a&~r;0!==o?n=dt(o):0!==(s&=a)&&(n=dt(s))}else 0!==(a=i&~r)?n=dt(a):0!==s&&(n=dt(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&r)&&((r=n&-n)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(i=31-at(t)),n|=e[i],t&=~r;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function vt(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=i}function yt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-at(i),r=1<<n;r&t|e[n]&t&&(e[n]|=t),i&=~r}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,wt,Ct,kt,At=!1,Et=[],Tt=null,Ot=null,Pt=null,Mt=new Map,It=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function jt(e,t,i,n,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&St(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=yr(e.target);if(null!==t){var i=Ve(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=Ue(i)))return e.blockedOn=t,void kt(e.priority,(function(){wt(i)}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=br(i))&&St(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);_e=n,i.target.dispatchEvent(n),_e=null,t.shift()}return!0}function Nt(e,t,i){Bt(e)&&i.delete(t)}function zt(){At=!1,null!==Tt&&Bt(Tt)&&(Tt=null),null!==Ot&&Bt(Ot)&&(Ot=null),null!==Pt&&Bt(Pt)&&(Pt=null),Mt.forEach(Nt),It.forEach(Nt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return Ht(t,e)}if(0<Et.length){Ht(Et[0],e);for(var i=1;i<Et.length;i++){var n=Et[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Tt&&Ht(Tt,e),null!==Ot&&Ht(Ot,e),null!==Pt&&Ht(Pt,e),Mt.forEach(t),It.forEach(t),i=0;i<Rt.length;i++)(n=Rt[i]).blockedOn===e&&(n.blockedOn=null);for(;0<Rt.length&&null===(i=Rt[0]).blockedOn;)Ft(i),null===i.blockedOn&&Rt.shift()}var Ut=_.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,i,n){var r=bt,s=Ut.transition;Ut.transition=null;try{bt=1,Yt(e,t,i,n)}finally{bt=r,Ut.transition=s}}function Kt(e,t,i,n){var r=bt,s=Ut.transition;Ut.transition=null;try{bt=4,Yt(e,t,i,n)}finally{bt=r,Ut.transition=s}}function Yt(e,t,i,n){if(Wt){var r=qt(e,t,i,n);if(null===r)Wn(e,t,n,Xt,i),Lt(e,n);else if(function(e,t,i,n,r){switch(t){case"focusin":return Tt=jt(Tt,e,t,i,n,r),!0;case"dragenter":return Ot=jt(Ot,e,t,i,n,r),!0;case"mouseover":return Pt=jt(Pt,e,t,i,n,r),!0;case"pointerover":var s=r.pointerId;return Mt.set(s,jt(Mt.get(s)||null,e,t,i,n,r)),!0;case"gotpointercapture":return s=r.pointerId,It.set(s,jt(It.get(s)||null,e,t,i,n,r)),!0}return!1}(r,e,t,i,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var s=br(r);if(null!==s&&xt(s),null===(s=qt(e,t,i,n))&&Wn(e,t,n,Xt,i),s===r)break;r=s}null!==r&&n.stopPropagation()}else Wn(e,t,n,null,i)}}var Xt=null;function qt(e,t,i,n){if(Xt=null,null!==(e=yr(e=xe(n))))if(null===(t=Ve(e)))e=null;else if(13===(i=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case it:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function ei(){if(Jt)return Jt;var e,t,i=$t,n=i.length,r="value"in Qt?Qt.value:Qt.textContent,s=r.length;for(e=0;e<n&&i[e]===r[e];e++);var a=n-e;for(t=1;t<=a&&i[n-t]===r[s-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ii(){return!0}function ni(){return!1}function ri(e){function t(t,i,n,r,s){for(var a in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?ii:ni,this.isPropagationStopped=ni,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),t}var si,ai,oi,li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=ri(li),hi=F({},li,{view:0,detail:0}),di=ri(hi),ui=F({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oi&&(oi&&"mousemove"===e.type?(si=e.screenX-oi.screenX,ai=e.screenY-oi.screenY):ai=si=0,oi=e),si)},movementY:function(e){return"movementY"in e?e.movementY:ai}}),pi=ri(ui),gi=ri(F({},ui,{dataTransfer:0})),fi=ri(F({},hi,{relatedTarget:0})),mi=ri(F({},li,{animationName:0,elapsedTime:0,pseudoElement:0})),vi=F({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yi=ri(vi),bi=ri(F({},li,{data:0})),_i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Si={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Si[e])&&!!t[e]}function Ci(){return wi}var ki=F({},hi,{key:function(e){if(e.key){var t=_i[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ai=ri(ki),Ei=ri(F({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ti=ri(F({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci})),Oi=ri(F({},li,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pi=F({},ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mi=ri(Pi),Ii=[9,13,27,32],Ri=h&&"CompositionEvent"in window,Di=null;h&&"documentMode"in document&&(Di=document.documentMode);var Li=h&&"TextEvent"in window&&!Di,ji=h&&(!Ri||Di&&8<Di&&11>=Di),Fi=String.fromCharCode(32),Bi=!1;function Ni(e,t){switch(e){case"keyup":return-1!==Ii.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zi(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hi=!1;var Vi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ui(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vi[e.type]:"textarea"===t}function Wi(e,t,i,n){Ae(n),0<(t=Kn(t,"onChange")).length&&(i=new ci("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Gi=null,Ki=null;function Yi(e){Bn(e,0)}function Xi(e){if(Y(_r(e)))return e}function qi(e,t){if("change"===e)return t}var Zi=!1;if(h){var Qi;if(h){var $i="oninput"in document;if(!$i){var Ji=document.createElement("div");Ji.setAttribute("oninput","return;"),$i="function"===typeof Ji.oninput}Qi=$i}else Qi=!1;Zi=Qi&&(!document.documentMode||9<document.documentMode)}function en(){Gi&&(Gi.detachEvent("onpropertychange",tn),Ki=Gi=null)}function tn(e){if("value"===e.propertyName&&Xi(Ki)){var t=[];Wi(t,Ki,e,xe(e)),Me(Yi,t)}}function nn(e,t,i){"focusin"===e?(en(),Ki=i,(Gi=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function rn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xi(Ki)}function sn(e,t){if("click"===e)return Xi(t)}function an(e,t){if("input"===e||"change"===e)return Xi(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!d.call(t,r)||!on(e[r],t[r]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hn(e,t){var i,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function un(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=X((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gn(e){var t=un(),i=e.focusedElem,n=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&dn(i.ownerDocument.documentElement,i)){if(null!==n&&pn(i))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=i.textContent.length,s=Math.min(n.start,r);n=void 0===n.end?s:Math.min(n.end,r),!e.extend&&s>n&&(r=n,n=s,s=r),r=hn(i,s);var a=hn(i,n);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fn=h&&"documentMode"in document&&11>=document.documentMode,mn=null,vn=null,yn=null,bn=!1;function _n(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;bn||null==mn||mn!==X(n)||("selectionStart"in(n=mn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&ln(yn,n)||(yn=n,0<(n=Kn(vn,"onSelect")).length&&(t=new ci("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=mn)))}function xn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Sn={animationend:xn("Animation","AnimationEnd"),animationiteration:xn("Animation","AnimationIteration"),animationstart:xn("Animation","AnimationStart"),transitionend:xn("Transition","TransitionEnd")},wn={},Cn={};function kn(e){if(wn[e])return wn[e];if(!Sn[e])return e;var t,i=Sn[e];for(t in i)if(i.hasOwnProperty(t)&&t in Cn)return wn[e]=i[t];return e}h&&(Cn=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);var An=kn("animationend"),En=kn("animationiteration"),Tn=kn("animationstart"),On=kn("transitionend"),Pn=new Map,Mn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(e,t){Pn.set(e,t),l(t,[e])}for(var Rn=0;Rn<Mn.length;Rn++){var Dn=Mn[Rn];In(Dn.toLowerCase(),"on"+(Dn[0].toUpperCase()+Dn.slice(1)))}In(An,"onAnimationEnd"),In(En,"onAnimationIteration"),In(Tn,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(On,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Fn(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,r,a,o,l,c){if(He.apply(this,arguments),je){if(!je)throw Error(s(198));var h=Fe;je=!1,Fe=null,Be||(Be=!0,Ne=h)}}(n,t,void 0,e),e.currentTarget=null}function Bn(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],r=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Fn(r,o,c),s=l}else for(a=0;a<n.length;a++){if(l=(o=n[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Fn(r,o,c),s=l}}}if(Be)throw e=Ne,Be=!1,Ne=null,e}function Nn(e,t){var i=t[fr];void 0===i&&(i=t[fr]=new Set);var n=e+"__bubble";i.has(n)||(Un(t,e,2,!1),i.add(n))}function zn(e,t,i){var n=0;t&&(n|=4),Un(i,e,n,t)}var Hn="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[Hn]){e[Hn]=!0,a.forEach((function(t){"selectionchange"!==t&&(jn.has(t)||zn(t,!1,e),zn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hn]||(t[Hn]=!0,zn("selectionchange",!1,t))}}function Un(e,t,i,n){switch(Zt(t)){case 1:var r=Gt;break;case 4:r=Kt;break;default:r=Yt}i=r.bind(null,t,i,e),r=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):void 0!==r?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function Wn(e,t,i,n,r){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var o=n.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=yr(o)))return;if(5===(l=a.tag)||6===l){n=s=a;continue e}o=o.parentNode}}n=n.return}Me((function(){var n=s,r=xe(i),a=[];e:{var o=Pn.get(e);if(void 0!==o){var l=ci,c=e;switch(e){case"keypress":if(0===ti(i))break e;case"keydown":case"keyup":l=Ai;break;case"focusin":c="focus",l=fi;break;case"focusout":c="blur",l=fi;break;case"beforeblur":case"afterblur":l=fi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ti;break;case An:case En:case Tn:l=mi;break;case On:l=Oi;break;case"scroll":l=di;break;case"wheel":l=Mi;break;case"copy":case"cut":case"paste":l=yi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ei}var h=0!==(4&t),d=!h&&"scroll"===e,u=h?null!==o?o+"Capture":null:o;h=[];for(var p,g=n;null!==g;){var f=(p=g).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==u&&(null!=(f=Ie(g,u))&&h.push(Gn(g,f,p)))),d)break;g=g.return}0<h.length&&(o=new l(o,c,null,i,r),a.push({event:o,listeners:h}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||i===_e||!(c=i.relatedTarget||i.fromElement)||!yr(c)&&!c[gr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=i.relatedTarget||i.toElement)?yr(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(h=pi,f="onMouseLeave",u="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(h=Ei,f="onPointerLeave",u="onPointerEnter",g="pointer"),d=null==l?o:_r(l),p=null==c?o:_r(c),(o=new h(f,g+"leave",l,i,r)).target=d,o.relatedTarget=p,f=null,yr(r)===n&&((h=new h(u,g+"enter",c,i,r)).target=p,h.relatedTarget=d,f=h),d=f,l&&c)e:{for(u=c,g=0,p=h=l;p;p=Yn(p))g++;for(p=0,f=u;f;f=Yn(f))p++;for(;0<g-p;)h=Yn(h),g--;for(;0<p-g;)u=Yn(u),p--;for(;g--;){if(h===u||null!==u&&h===u.alternate)break e;h=Yn(h),u=Yn(u)}h=null}else h=null;null!==l&&Xn(a,o,l,h,!1),null!==c&&null!==d&&Xn(a,d,c,h,!0)}if("select"===(l=(o=n?_r(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=qi;else if(Ui(o))if(Zi)m=an;else{m=rn;var v=nn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=sn);switch(m&&(m=m(e,n))?Wi(a,m,i,r):(v&&v(e,o,n),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=n?_r(n):window,e){case"focusin":(Ui(v)||"true"===v.contentEditable)&&(mn=v,vn=n,yn=null);break;case"focusout":yn=vn=mn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,_n(a,i,r);break;case"selectionchange":if(fn)break;case"keydown":case"keyup":_n(a,i,r)}var y;if(Ri)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hi?Ni(e,i)&&(b="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(b="onCompositionStart");b&&(ji&&"ko"!==i.locale&&(Hi||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hi&&(y=ei()):($t="value"in(Qt=r)?Qt.value:Qt.textContent,Hi=!0)),0<(v=Kn(n,b)).length&&(b=new bi(b,e,null,i,r),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=zi(i))&&(b.data=y))),(y=Li?function(e,t){switch(e){case"compositionend":return zi(t);case"keypress":return 32!==t.which?null:(Bi=!0,Fi);case"textInput":return(e=t.data)===Fi&&Bi?null:e;default:return null}}(e,i):function(e,t){if(Hi)return"compositionend"===e||!Ri&&Ni(e,t)?(e=ei(),Jt=$t=Qt=null,Hi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ji&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(n=Kn(n,"onBeforeInput")).length&&(r=new bi("onBeforeInput","beforeinput",null,i,r),a.push({event:r,listeners:n}),r.data=y))}Bn(a,t)}))}function Gn(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Kn(e,t){for(var i=t+"Capture",n=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Ie(e,i))&&n.unshift(Gn(e,s,r)),null!=(s=Ie(e,t))&&n.push(Gn(e,s,r))),e=e.return}return n}function Yn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xn(e,t,i,n,r){for(var s=t._reactName,a=[];null!==i&&i!==n;){var o=i,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Ie(i,s))&&a.unshift(Gn(i,l,o)):r||null!=(l=Ie(i,s))&&a.push(Gn(i,l,o))),i=i.return}0!==a.length&&e.push({event:t,listeners:a})}var qn=/\r\n?/g,Zn=/\u0000|\uFFFD/g;function Qn(e){return("string"===typeof e?e:""+e).replace(qn,"\n").replace(Zn,"")}function $n(e,t,i){if(t=Qn(t),Qn(e)!==t&&i)throw Error(s(425))}function Jn(){}var er=null,tr=null;function ir(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var nr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:nr;function or(e){setTimeout((function(){throw e}))}function lr(e,t){var i=t,n=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&8===r.nodeType)if("/$"===(i=r.data)){if(0===n)return e.removeChild(r),void Vt(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=r}while(i);Vt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),ur="__reactFiber$"+dr,pr="__reactProps$"+dr,gr="__reactContainer$"+dr,fr="__reactEvents$"+dr,mr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function yr(e){var t=e[ur];if(t)return t;for(var i=e.parentNode;i;){if(t=i[gr]||i[ur]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=hr(e);null!==e;){if(i=e[ur])return i;e=hr(e)}return t}i=(e=i).parentNode}return null}function br(e){return!(e=e[ur]||e[gr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _r(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xr(e){return e[pr]||null}var Sr=[],wr=-1;function Cr(e){return{current:e}}function kr(e){0>wr||(e.current=Sr[wr],Sr[wr]=null,wr--)}function Ar(e,t){wr++,Sr[wr]=e.current,e.current=t}var Er={},Tr=Cr(Er),Or=Cr(!1),Pr=Er;function Mr(e,t){var i=e.type.contextTypes;if(!i)return Er;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in i)s[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rr(){kr(Or),kr(Tr)}function Dr(e,t,i){if(Tr.current!==Er)throw Error(s(168));Ar(Tr,t),Ar(Or,i)}function Lr(e,t,i){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var r in n=n.getChildContext())if(!(r in t))throw Error(s(108,U(e)||"Unknown",r));return F({},i,n)}function jr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Er,Pr=Tr.current,Ar(Tr,e),Ar(Or,Or.current),!0}function Fr(e,t,i){var n=e.stateNode;if(!n)throw Error(s(169));i?(e=Lr(e,t,Pr),n.__reactInternalMemoizedMergedChildContext=e,kr(Or),kr(Tr),Ar(Tr,e)):kr(Or),Ar(Or,i)}var Br=null,Nr=!1,zr=!1;function Hr(e){null===Br?Br=[e]:Br.push(e)}function Vr(){if(!zr&&null!==Br){zr=!0;var e=0,t=bt;try{var i=Br;for(bt=1;e<i.length;e++){var n=i[e];do{n=n(!0)}while(null!==n)}Br=null,Nr=!1}catch(r){throw null!==Br&&(Br=Br.slice(e+1)),Ye(Je,Vr),r}finally{bt=t,zr=!1}}return null}var Ur=[],Wr=0,Gr=null,Kr=0,Yr=[],Xr=0,qr=null,Zr=1,Qr="";function $r(e,t){Ur[Wr++]=Kr,Ur[Wr++]=Gr,Gr=e,Kr=t}function Jr(e,t,i){Yr[Xr++]=Zr,Yr[Xr++]=Qr,Yr[Xr++]=qr,qr=e;var n=Zr;e=Qr;var r=32-at(n)-1;n&=~(1<<r),i+=1;var s=32-at(t)+r;if(30<s){var a=r-r%5;s=(n&(1<<a)-1).toString(32),n>>=a,r-=a,Zr=1<<32-at(t)+r|i<<r|n,Qr=s+e}else Zr=1<<s|i<<r|n,Qr=e}function es(e){null!==e.return&&($r(e,1),Jr(e,1,0))}function ts(e){for(;e===Gr;)Gr=Ur[--Wr],Ur[Wr]=null,Kr=Ur[--Wr],Ur[Wr]=null;for(;e===qr;)qr=Yr[--Xr],Yr[Xr]=null,Qr=Yr[--Xr],Yr[Xr]=null,Zr=Yr[--Xr],Yr[Xr]=null}var is=null,ns=null,rs=!1,ss=null;function as(e,t){var i=Mc(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function os(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,is=e,ns=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,is=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(i=null!==qr?{id:Zr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=Mc(18,null,null,0)).stateNode=t,i.return=e,e.child=i,is=e,ns=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=ns;if(t){var i=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(i.nextSibling);var n=is;t&&os(e,t)?as(n,i):(e.flags=-4097&e.flags|2,rs=!1,is=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,is=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;is=e}function ds(e){if(e!==is)return!1;if(!rs)return hs(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ir(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw us(),Error(s(418));for(;t;)as(e,t),t=cr(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){ns=cr(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}ns=null}}else ns=is?cr(e.stateNode.nextSibling):null;return!0}function us(){for(var e=ns;e;)e=cr(e.nextSibling)}function ps(){ns=is=null,rs=!1}function gs(e){null===ss?ss=[e]:ss.push(e)}var fs=_.ReactCurrentBatchConfig;function ms(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(s(309));var n=i.stateNode}if(!n)throw Error(s(147,e));var r=n,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=2,i):n:(t.flags|=2,i):(t.flags|=1048576,i)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Fc(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function c(e,t,i,n){var s=i.type;return s===w?d(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===I&&ys(s)===t.type)?((n=r(t,i.props)).ref=ms(e,t,i),n.return=e,n):((n=Dc(i.type,i.key,i.props,null,e.mode,n)).ref=ms(e,t,i),n.return=e,n)}function h(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Bc(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function d(e,t,i,n,s){return null===t||7!==t.tag?((t=Lc(i,e.mode,n,s)).return=e,t):((t=r(t,i)).return=e,t)}function u(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(i=Dc(t.type,t.key,t.props,null,e.mode,i)).ref=ms(e,null,t),i.return=e,i;case S:return(t=Bc(t,e.mode,i)).return=e,t;case I:return u(e,(0,t._init)(t._payload),i)}if(te(t)||L(t))return(t=Lc(t,e.mode,i,null)).return=e,t;vs(e,t)}return null}function p(e,t,i,n){var r=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==r?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return i.key===r?c(e,t,i,n):null;case S:return i.key===r?h(e,t,i,n):null;case I:return p(e,t,(r=i._init)(i._payload),n)}if(te(i)||L(i))return null!==r?null:d(e,t,i,n,null);vs(e,i)}return null}function g(e,t,i,n,r){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return c(t,e=e.get(null===n.key?i:n.key)||null,n,r);case S:return h(t,e=e.get(null===n.key?i:n.key)||null,n,r);case I:return g(e,t,i,(0,n._init)(n._payload),r)}if(te(n)||L(n))return d(t,e=e.get(i)||null,n,r,null);vs(t,n)}return null}function f(r,s,o,l){for(var c=null,h=null,d=s,f=s=0,m=null;null!==d&&f<o.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var v=p(r,d,o[f],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(r,d),s=a(v,s,f),null===h?c=v:h.sibling=v,h=v,d=m}if(f===o.length)return i(r,d),rs&&$r(r,f),c;if(null===d){for(;f<o.length;f++)null!==(d=u(r,o[f],l))&&(s=a(d,s,f),null===h?c=d:h.sibling=d,h=d);return rs&&$r(r,f),c}for(d=n(r,d);f<o.length;f++)null!==(m=g(d,r,f,o[f],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),s=a(m,s,f),null===h?c=m:h.sibling=m,h=m);return e&&d.forEach((function(e){return t(r,e)})),rs&&$r(r,f),c}function m(r,o,l,c){var h=L(l);if("function"!==typeof h)throw Error(s(150));if(null==(l=h.call(l)))throw Error(s(151));for(var d=h=null,f=o,m=o=0,v=null,y=l.next();null!==f&&!y.done;m++,y=l.next()){f.index>m?(v=f,f=null):v=f.sibling;var b=p(r,f,y.value,c);if(null===b){null===f&&(f=v);break}e&&f&&null===b.alternate&&t(r,f),o=a(b,o,m),null===d?h=b:d.sibling=b,d=b,f=v}if(y.done)return i(r,f),rs&&$r(r,m),h;if(null===f){for(;!y.done;m++,y=l.next())null!==(y=u(r,y.value,c))&&(o=a(y,o,m),null===d?h=y:d.sibling=y,d=y);return rs&&$r(r,m),h}for(f=n(r,f);!y.done;m++,y=l.next())null!==(y=g(f,r,m,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),o=a(y,o,m),null===d?h=y:d.sibling=y,d=y);return e&&f.forEach((function(e){return t(r,e)})),rs&&$r(r,m),h}return function e(n,s,a,l){if("object"===typeof a&&null!==a&&a.type===w&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,h=s;null!==h;){if(h.key===c){if((c=a.type)===w){if(7===h.tag){i(n,h.sibling),(s=r(h,a.props.children)).return=n,n=s;break e}}else if(h.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&ys(c)===h.type){i(n,h.sibling),(s=r(h,a.props)).ref=ms(n,h,a),s.return=n,n=s;break e}i(n,h);break}t(n,h),h=h.sibling}a.type===w?((s=Lc(a.props.children,n.mode,l,a.key)).return=n,n=s):((l=Dc(a.type,a.key,a.props,null,n.mode,l)).ref=ms(n,s,a),l.return=n,n=l)}return o(n);case S:e:{for(h=a.key;null!==s;){if(s.key===h){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){i(n,s.sibling),(s=r(s,a.children||[])).return=n,n=s;break e}i(n,s);break}t(n,s),s=s.sibling}(s=Bc(a,n.mode,l)).return=n,n=s}return o(n);case I:return e(n,s,(h=a._init)(a._payload),l)}if(te(a))return f(n,s,a,l);if(L(a))return m(n,s,a,l);vs(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(i(n,s.sibling),(s=r(s,a)).return=n,n=s):(i(n,s),(s=Fc(a,n.mode,l)).return=n,n=s),o(n)):i(n,s)}}var _s=bs(!0),xs=bs(!1),Ss=Cr(null),ws=null,Cs=null,ks=null;function As(){ks=Cs=ws=null}function Es(e){var t=Ss.current;kr(Ss),e._currentValue=t}function Ts(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Os(e,t){ws=e,ks=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===ws)throw Error(s(308));Cs=e,ws.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Ms=null;function Is(e){null===Ms?Ms=[e]:Ms.push(e)}function Rs(e,t,i,n){var r=t.interleaved;return null===r?(i.next=i,Is(t)):(i.next=r.next,r.next=i),t.interleaved=i,Ds(e,n)}function Ds(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}var Ls=!1;function js(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ns(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Tl)){var r=n.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),n.pending=t,Ds(e,i)}return null===(r=n.interleaved)?(t.next=t,Is(n)):(t.next=r.next,r.next=t),n.interleaved=t,Ds(e,i)}function zs(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,yt(e,i)}}function Hs(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var r=null,s=null;if(null!==(i=i.firstBaseUpdate)){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===s?r=s=a:s=s.next=a,i=i.next}while(null!==i);null===s?r=s=t:s=s.next=t}else r=s=t;return i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Vs(e,t,i,n){var r=e.updateQueue;Ls=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var h=e.alternate;null!==h&&((o=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===o?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(null!==s){var d=r.baseState;for(a=0,h=c=l=null,o=s;;){var u=o.lane,p=o.eventTime;if((n&u)===u){null!==h&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,f=o;switch(u=t,p=i,f.tag){case 1:if("function"===typeof(g=f.payload)){d=g.call(p,d,u);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(u="function"===typeof(g=f.payload)?g.call(p,d,u):g)||void 0===u)break e;d=F({},d,u);break e;case 2:Ls=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(u=r.effects)?r.effects=[o]:u.push(o))}else p={eventTime:p,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=p,l=d):h=h.next=p,a|=u;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(u=o).next,u.next=null,r.lastBaseUpdate=u,r.shared.pending=null}}if(null===h&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=d}}function Us(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=i,"function"!==typeof r)throw Error(s(191,r));r.call(n)}}}var Ws={},Gs=Cr(Ws),Ks=Cr(Ws),Ys=Cr(Ws);function Xs(e){if(e===Ws)throw Error(s(174));return e}function qs(e,t){switch(Ar(Ys,t),Ar(Ks,e),Ar(Gs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kr(Gs),Ar(Gs,t)}function Zs(){kr(Gs),kr(Ks),kr(Ys)}function Qs(e){Xs(Ys.current);var t=Xs(Gs.current),i=le(t,e.type);t!==i&&(Ar(Ks,e),Ar(Gs,i))}function $s(e){Ks.current===e&&(kr(Gs),kr(Ks))}var Js=Cr(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function ia(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var na=_.ReactCurrentDispatcher,ra=_.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ha=!1,da=0,ua=0;function pa(){throw Error(s(321))}function ga(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!on(e[i],t[i]))return!1;return!0}function fa(e,t,i,n,r,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=null===e||null===e.memoizedState?$a:Ja,e=i(n,r),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,na.current=eo,e=i(n,r)}while(ha)}if(na.current=Qa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ma(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function _a(e){var t=ya(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var n=oa,r=n.baseQueue,a=i.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}n.baseQueue=r=a,i.pending=null}if(null!==r){a=r.next,n=n.baseState;var l=o=null,c=null,h=a;do{var d=h.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var u={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(l=c=u,o=n):c=c.next=u,aa.lanes|=d,jl|=d}h=h.next}while(null!==h&&h!==a);null===c?o=n:c.next=l,on(n,t.memoizedState)||(bo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,i.lastRenderedState=n}if(null!==(e=i.interleaved)){r=e;do{a=r.lane,aa.lanes|=a,jl|=a,r=r.next}while(r!==e)}else null===r&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function xa(e){var t=ya(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,a=t.memoizedState;if(null!==r){i.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);on(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),i.lastRenderedState=a}return[a,n]}function Sa(){}function wa(e,t){var i=aa,n=ya(),r=t(),a=!on(n.memoizedState,r);if(a&&(n.memoizedState=r,bo=!0),n=n.queue,La(Aa.bind(null,i,n,e),[e]),n.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(i.flags|=2048,Pa(9,ka.bind(null,i,n,r,t),void 0,null),null===Ol)throw Error(s(349));0!==(30&sa)||Ca(i,t,r)}return r}function Ca(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function ka(e,t,i,n){t.value=i,t.getSnapshot=n,Ea(t)&&Ta(e)}function Aa(e,t,i){return i((function(){Ea(t)&&Ta(e)}))}function Ea(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!on(e,i)}catch(n){return!0}}function Ta(e){var t=Ds(e,1);null!==t&&ic(t,e,1,-1)}function Oa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,aa,e),[t.memoizedState,e]}function Pa(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Ma(){return ya().memoizedState}function Ia(e,t,i,n){var r=va();aa.flags|=e,r.memoizedState=Pa(1|t,i,void 0,void 0===n?null:n)}function Ra(e,t,i,n){var r=ya();n=void 0===n?null:n;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==n&&ga(n,a.deps))return void(r.memoizedState=Pa(t,i,s,n))}aa.flags|=e,r.memoizedState=Pa(1|t,i,s,n)}function Da(e,t){return Ia(8390656,8,e,t)}function La(e,t){return Ra(2048,8,e,t)}function ja(e,t){return Ra(4,2,e,t)}function Fa(e,t){return Ra(4,4,e,t)}function Ba(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Na(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Ra(4,4,Ba.bind(null,t,e),i)}function za(){}function Ha(e,t){var i=ya();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&ga(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Va(e,t){var i=ya();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&ga(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function Ua(e,t,i){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=i):(on(i,t)||(i=ft(),aa.lanes|=i,jl|=i,e.baseState=!0),t)}function Wa(e,t){var i=bt;bt=0!==i&&4>i?i:4,e(!0);var n=ra.transition;ra.transition={};try{e(!1),t()}finally{bt=i,ra.transition=n}}function Ga(){return ya().memoizedState}function Ka(e,t,i){var n=tc(e);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},Xa(e))qa(t,i);else if(null!==(i=Rs(e,t,i,n))){ic(i,e,n,ec()),Za(i,t,n)}}function Ya(e,t,i){var n=tc(e),r={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))qa(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,i);if(r.hasEagerState=!0,r.eagerState=o,on(o,a)){var l=t.interleaved;return null===l?(r.next=r,Is(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(i=Rs(e,t,r,n))&&(ic(i,e,n,r=ec()),Za(i,t,n))}}function Xa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function qa(e,t){ha=ca=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Za(e,t,i){if(0!==(4194240&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,yt(e,i)}}var Qa={readContext:Ps,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},$a={readContext:Ps,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Da,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Ia(4194308,4,Ba.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ia(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ia(4,2,e,t)},useMemo:function(e,t){var i=va();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=va();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Oa,useDebugValue:za,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Oa(!1),t=e[0];return e=Wa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var n=aa,r=va();if(rs){if(void 0===i)throw Error(s(407));i=i()}else{if(i=t(),null===Ol)throw Error(s(349));0!==(30&sa)||Ca(n,t,i)}r.memoizedState=i;var a={value:i,getSnapshot:t};return r.queue=a,Da(Aa.bind(null,n,a,e),[e]),n.flags|=2048,Pa(9,ka.bind(null,n,a,i,t),void 0,null),i},useId:function(){var e=va(),t=Ol.identifierPrefix;if(rs){var i=Qr;t=":"+t+"R"+(i=(Zr&~(1<<32-at(Zr)-1)).toString(32)+i),0<(i=da++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=ua++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ja={readContext:Ps,useCallback:Ha,useContext:Ps,useEffect:La,useImperativeHandle:Na,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Va,useReducer:_a,useRef:Ma,useState:function(){return _a(ba)},useDebugValue:za,useDeferredValue:function(e){return Ua(ya(),oa.memoizedState,e)},useTransition:function(){return[_a(ba)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:wa,useId:Ga,unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:Ha,useContext:Ps,useEffect:La,useImperativeHandle:Na,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Va,useReducer:xa,useRef:Ma,useState:function(){return xa(ba)},useDebugValue:za,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ua(t,oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:wa,useId:Ga,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var i in t=F({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}function io(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:F({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=ec(),r=tc(e),s=Bs(n,r);s.payload=t,void 0!==i&&null!==i&&(s.callback=i),null!==(t=Ns(e,s,r))&&(ic(t,e,r,n),zs(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=ec(),r=tc(e),s=Bs(n,r);s.tag=1,s.payload=t,void 0!==i&&null!==i&&(s.callback=i),null!==(t=Ns(e,s,r))&&(ic(t,e,r,n),zs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ec(),n=tc(e),r=Bs(i,n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ns(e,r,n))&&(ic(t,e,n,i),zs(t,e,n))}};function ro(e,t,i,n,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ln(i,n)||!ln(r,s))}function so(e,t,i){var n=!1,r=Er,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(r=Ir(t)?Pr:Tr.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Mr(e,r):Er),t=new t(i,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs={},js(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ps(s):(s=Ir(t)?Pr:Tr.current,r.context=Mr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(io(e,t,s,i),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&no.enqueueReplaceState(r,r.state,null),Vs(e,i,r,n),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var i="",n=t;do{i+=H(n),n=n.return}while(n);var r=i}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,i){return{value:e,source:null,stack:null!=i?i:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(i){setTimeout((function(){throw i}))}}var uo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,i){(i=Bs(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Wl||(Wl=!0,Gl=n),ho(0,t)},i}function go(e,t,i){(i=Bs(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;i.payload=function(){return n(r)},i.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(i.callback=function(){ho(0,t),"function"!==typeof n&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function fo(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new uo;var r=new Set;n.set(t,r)}else void 0===(r=n.get(t))&&(r=new Set,n.set(t,r));r.has(i)||(r.add(i),e=kc.bind(null,e,t,i),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,i,n,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=Bs(-1,1)).tag=2,Ns(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var yo=_.ReactCurrentOwner,bo=!1;function _o(e,t,i,n){t.child=null===e?xs(t,null,i,n):_s(t,e.child,i,n)}function xo(e,t,i,n,r){i=i.render;var s=t.ref;return Os(t,r),n=fa(e,t,i,n,s,r),i=ma(),null===e||bo?(rs&&i&&es(t),t.flags|=1,_o(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function So(e,t,i,n,r){if(null===e){var s=i.type;return"function"!==typeof s||Ic(s)||void 0!==s.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Dc(i.type,null,n,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,wo(e,t,s,n,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((i=null!==(i=i.compare)?i:ln)(a,n)&&e.ref===t.ref)return Wo(e,t,r)}return t.flags|=1,(e=Rc(s,n)).ref=t.ref,e.return=t,t.child=e}function wo(e,t,i,n,r){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(bo=!1,t.pendingProps=n=s,0===(e.lanes&r))return t.lanes=e.lanes,Wo(e,t,r);0!==(131072&e.flags)&&(bo=!0)}}return Ao(e,t,i,n,r)}function Co(e,t,i){var n=t.pendingProps,r=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Rl,Il),Il|=i;else{if(0===(1073741824&i))return e=null!==s?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ar(Rl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:i,Ar(Rl,Il),Il|=n}else null!==s?(n=s.baseLanes|i,t.memoizedState=null):n=i,Ar(Rl,Il),Il|=n;return _o(e,t,r,i),t.child}function ko(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,i,n,r){var s=Ir(i)?Pr:Tr.current;return s=Mr(t,s),Os(t,r),i=fa(e,t,i,n,s,r),n=ma(),null===e||bo?(rs&&n&&es(t),t.flags|=1,_o(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function Eo(e,t,i,n,r){if(Ir(i)){var s=!0;jr(t)}else s=!1;if(Os(t,r),null===t.stateNode)Uo(e,t),so(t,i,n),oo(t,i,n,r),n=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=i.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Mr(t,c=Ir(i)?Pr:Tr.current);var h=i.getDerivedStateFromProps,d="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==n||l!==c)&&ao(t,a,n,c),Ls=!1;var u=t.memoizedState;a.state=u,Vs(t,n,a,r),l=t.memoizedState,o!==n||u!==l||Or.current||Ls?("function"===typeof h&&(io(t,i,h,n),l=t.memoizedState),(o=Ls||ro(t,i,o,n,u,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,u=a.context,"object"===typeof(l=i.contextType)&&null!==l?l=Ps(l):l=Mr(t,l=Ir(i)?Pr:Tr.current);var p=i.getDerivedStateFromProps;(h="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||u!==l)&&ao(t,a,n,l),Ls=!1,u=t.memoizedState,a.state=u,Vs(t,n,a,r);var g=t.memoizedState;o!==d||u!==g||Or.current||Ls?("function"===typeof p&&(io(t,i,p,n),g=t.memoizedState),(c=Ls||ro(t,i,c,n,u,g,l)||!1)?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,g,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,g,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),a.props=n,a.state=g,a.context=l,n=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),n=!1)}return To(e,t,i,n,s,r)}function To(e,t,i,n,r,s){ko(e,t);var a=0!==(128&t.flags);if(!n&&!a)return r&&Fr(t,i,!1),Wo(e,t,s);n=t.stateNode,yo.current=t;var o=a&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=_s(t,e.child,null,s),t.child=_s(t,null,o,s)):_o(e,t,o,s),t.memoizedState=n.state,r&&Fr(t,i,!0),t.child}function Oo(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),qs(e,t.containerInfo)}function Po(e,t,i,n,r){return ps(),gs(r),t.flags|=256,_o(e,t,i,n),t.child}var Mo,Io,Ro,Do,Lo={dehydrated:null,treeContext:null,retryLane:0};function jo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,i){var n,r=t.pendingProps,a=Js.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ar(Js,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=jc(l,r,0,null),e=Lc(e,r,i,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=jo(i),t.memoizedState=Lo,e):Bo(t,l));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,i,n,r,a,o){if(i)return 256&t.flags?(t.flags&=-257,No(e,t,o,n=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,r=t.mode,n=jc({mode:"visible",children:n.children},r,0,null),(a=Lc(a,r,o,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!==(1&t.mode)&&_s(t,e.child,null,o),t.child.memoizedState=jo(o),t.memoizedState=Lo,a);if(0===(1&t.mode))return No(e,t,o,null);if("$!"===r.data){if(n=r.nextSibling&&r.nextSibling.dataset)var l=n.dgst;return n=l,No(e,t,o,n=co(a=Error(s(419)),n,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(n=Ol)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(n.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ds(e,r),ic(n,e,r,-1))}return fc(),No(e,t,o,n=co(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,ns=cr(r.nextSibling),is=t,rs=!0,ss=null,null!==e&&(Yr[Xr++]=Zr,Yr[Xr++]=Qr,Yr[Xr++]=qr,Zr=e.id,Qr=e.overflow,qr=t),t=Bo(t,n.children),t.flags|=4096,t)}(e,t,l,r,n,a,i);if(o){o=r.fallback,l=t.mode,n=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==n?o=Rc(n,o):(o=Lc(o,l,i,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?jo(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~i,t.memoizedState=Lo,r}return e=(o=e.child).sibling,r=Rc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=i),r.return=t,r.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function Bo(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function No(e,t,i,n){return null!==n&&gs(n),_s(t,e.child,null,i),(e=Bo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ts(e.return,t,i)}function Ho(e,t,i,n,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailMode=r)}function Vo(e,t,i){var n=t.pendingProps,r=n.revealOrder,s=n.tail;if(_o(e,t,n.children,i),0!==(2&(n=Js.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,i,t);else if(19===e.tag)zo(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ar(Js,n),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===ea(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Ho(t,!1,r,i,s);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ea(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Ho(t,!0,i,null,s);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(i=Rc(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Rc(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Go(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=14680064&r.subtreeFlags,n|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function Yo(e,t,i){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ir(t.type)&&Rr(),Ko(t),null;case 3:return n=t.stateNode,Zs(),kr(Or),kr(Tr),ia(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Io(e,t),Ko(t),null;case 5:$s(t);var r=Xs(Ys.current);if(i=t.type,null!==e&&null!=t.stateNode)Ro(e,t,i,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=Xs(Gs.current),ds(t)){n=t.stateNode,i=t.type;var a=t.memoizedProps;switch(n[ur]=t,n[pr]=a,e=0!==(1&t.mode),i){case"dialog":Nn("cancel",n),Nn("close",n);break;case"iframe":case"object":case"embed":Nn("load",n);break;case"video":case"audio":for(r=0;r<Ln.length;r++)Nn(Ln[r],n);break;case"source":Nn("error",n);break;case"img":case"image":case"link":Nn("error",n),Nn("load",n);break;case"details":Nn("toggle",n);break;case"input":Z(n,a),Nn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Nn("invalid",n);break;case"textarea":re(n,a),Nn("invalid",n)}for(var l in ye(i,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==a.suppressHydrationWarning&&$n(n.textContent,c,e),r=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$n(n.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Nn("scroll",n)}switch(i){case"input":K(n),J(n,a,!0);break;case"textarea":K(n),ae(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=Jn)}n=r,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(i,{is:n.is}):(e=l.createElement(i),"select"===i&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,i),e[ur]=t,e[pr]=n,Mo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(i,n),i){case"dialog":Nn("cancel",e),Nn("close",e),r=n;break;case"iframe":case"object":case"embed":Nn("load",e),r=n;break;case"video":case"audio":for(r=0;r<Ln.length;r++)Nn(Ln[r],e);r=n;break;case"source":Nn("error",e),r=n;break;case"img":case"image":case"link":Nn("error",e),Nn("load",e),r=n;break;case"details":Nn("toggle",e),r=n;break;case"input":Z(e,n),r=q(e,n),Nn("invalid",e);break;case"option":default:r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=F({},n,{value:void 0}),Nn("invalid",e);break;case"textarea":re(e,n),r=ne(e,n),Nn("invalid",e)}for(a in ye(i,r),c=r)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?me(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&de(e,h):"children"===a?"string"===typeof h?("textarea"!==i||""!==h)&&ue(e,h):"number"===typeof h&&ue(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Nn("scroll",e):null!=h&&b(e,a,h,l))}switch(i){case"input":K(e),J(e,n,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?ie(e,!!n.multiple,a,!1):null!=n.defaultValue&&ie(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Jn)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(i=Xs(Ys.current),Xs(Gs.current),ds(t)){if(n=t.stateNode,i=t.memoizedProps,n[ur]=t,(a=n.nodeValue!==i)&&null!==(e=is))switch(e.tag){case 3:$n(n.nodeValue,i,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$n(n.nodeValue,i,0!==(1&e.mode))}a&&(t.flags|=4)}else(n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[ur]=t,t.stateNode=n}return Ko(t),null;case 13:if(kr(Js),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))us(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[ur]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=i,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Js.current)?0===Dl&&(Dl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Zs(),Io(e,t),null===e&&Vn(t.stateNode.containerInfo),Ko(t),null;case 10:return Es(t.type._context),Ko(t),null;case 19:if(kr(Js),null===(a=t.memoizedState))return Ko(t),null;if(n=0!==(128&t.flags),null===(l=a.rendering))if(n)Go(a,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Go(a,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=i,i=t.child;null!==i;)e=n,(a=i).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ar(Js,1&Js.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Vl&&(t.flags|=128,n=!0,Go(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ea(l))){if(t.flags|=128,n=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return Ko(t),null}else 2*Qe()-a.renderingStartTime>Vl&&1073741824!==i&&(t.flags|=128,n=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(i=a.last)?i.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,i=Js.current,Ar(Js,n?1&i|2:1&i),t):(Ko(t),null);case 22:case 23:return dc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xo(e,t){switch(ts(t),t.tag){case 1:return Ir(t.type)&&Rr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zs(),kr(Or),kr(Tr),ia(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(kr(Js),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kr(Js),null;case 4:return Zs(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Mo=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Io=function(){},Ro=function(e,t,i,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,Xs(Gs.current);var s,a=null;switch(i){case"input":r=q(e,r),n=q(e,n),a=[];break;case"select":r=F({},r,{value:void 0}),n=F({},n,{value:void 0}),a=[];break;case"textarea":r=ne(e,r),n=ne(e,n),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof n.onClick&&(e.onclick=Jn)}for(h in ye(i,n),i=null,r)if(!n.hasOwnProperty(h)&&r.hasOwnProperty(h)&&null!=r[h])if("style"===h){var l=r[h];for(s in l)l.hasOwnProperty(s)&&(i||(i={}),i[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(o.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in n){var c=n[h];if(l=null!=r?r[h]:void 0,n.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(i||(i={}),i[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(i||(i={}),i[s]=c[s])}else i||(a||(a=[]),a.push(h,i)),i=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(o.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Nn("scroll",e),a||l===c||(a=[])):(a=a||[]).push(h,c))}i&&(a=a||[]).push("style",i);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Do=function(e,t,i,n){i!==n&&(t.flags|=4)};var qo=!1,Zo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Jo(e,t){var i=e.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(n){Cc(e,t,n)}else i.current=null}function el(e,t,i){try{i()}catch(n){Cc(e,t,n)}}var tl=!1;function il(e,t,i){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,i,s)}r=r.next}while(r!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function rl(e){var t=e.ref;if(null!==t){var i=e.stateNode;e.tag,e=i,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ur],delete t[pr],delete t[fr],delete t[mr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Jn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,i),e=e.sibling;null!==e;)ll(e,t,i),e=e.sibling}function cl(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,i),e=e.sibling;null!==e;)cl(e,t,i),e=e.sibling}var hl=null,dl=!1;function ul(e,t,i){for(i=i.child;null!==i;)pl(e,t,i),i=i.sibling}function pl(e,t,i){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,i)}catch(o){}switch(i.tag){case 5:Zo||Jo(i,t);case 6:var n=hl,r=dl;hl=null,ul(e,t,i),dl=r,null!==(hl=n)&&(dl?(e=hl,i=i.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)):hl.removeChild(i.stateNode));break;case 18:null!==hl&&(dl?(e=hl,i=i.stateNode,8===e.nodeType?lr(e.parentNode,i):1===e.nodeType&&lr(e,i),Vt(e)):lr(hl,i.stateNode));break;case 4:n=hl,r=dl,hl=i.stateNode.containerInfo,dl=!0,ul(e,t,i),hl=n,dl=r;break;case 0:case 11:case 14:case 15:if(!Zo&&(null!==(n=i.updateQueue)&&null!==(n=n.lastEffect))){r=n=n.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(i,t,a),r=r.next}while(r!==n)}ul(e,t,i);break;case 1:if(!Zo&&(Jo(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(o){Cc(i,t,o)}ul(e,t,i);break;case 21:ul(e,t,i);break;case 22:1&i.mode?(Zo=(n=Zo)||null!==i.memoizedState,ul(e,t,i),Zo=n):ul(e,t,i);break;default:ul(e,t,i)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new Qo),t.forEach((function(t){var n=Tc.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function fl(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var r=i[n];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(a,o,r),hl=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(h){Cc(r,t,h)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&n){try{il(3,e,e.return),nl(3,e)}catch(m){Cc(e,e.return,m)}try{il(5,e,e.return)}catch(m){Cc(e,e.return,m)}}break;case 1:fl(t,e),vl(e),512&n&&null!==i&&Jo(i,i.return);break;case 5:if(fl(t,e),vl(e),512&n&&null!==i&&Jo(i,i.return),32&e.flags){var r=e.stateNode;try{ue(r,"")}catch(m){Cc(e,e.return,m)}}if(4&n&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==i?i.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(r,a),be(l,o);var h=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],u=c[o+1];"style"===d?me(r,u):"dangerouslySetInnerHTML"===d?de(r,u):"children"===d?ue(r,u):b(r,d,u,h)}switch(l){case"input":$(r,a);break;case"textarea":se(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var g=a.value;null!=g?ie(r,!!a.multiple,g,!1):p!==!!a.multiple&&(null!=a.defaultValue?ie(r,!!a.multiple,a.defaultValue,!0):ie(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(m){Cc(e,e.return,m)}}break;case 6:if(fl(t,e),vl(e),4&n){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(m){Cc(e,e.return,m)}}break;case 3:if(fl(t,e),vl(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){Cc(e,e.return,m)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Qe())),4&n&&gl(e);break;case 22:if(d=null!==i&&null!==i.memoizedState,1&e.mode?(Zo=(h=Zo)||d,fl(t,e),Zo=h):fl(t,e),vl(e),8192&n){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!d&&0!==(1&e.mode))for($o=e,d=e.child;null!==d;){for(u=$o=d;null!==$o;){switch(g=(p=$o).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:Jo(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){n=p,i=p.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){Cc(n,i,m)}}break;case 5:Jo(p,p.return);break;case 22:if(null!==p.memoizedState){xl(u);continue}}null!==g?(g.return=p,$o=g):xl(u)}d=d.sibling}e:for(d=null,u=e;;){if(5===u.tag){if(null===d){d=u;try{r=u.stateNode,h?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=u.stateNode,o=void 0!==(c=u.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(m){Cc(e,e.return,m)}}}else if(6===u.tag){if(null===d)try{u.stateNode.nodeValue=h?"":u.memoizedProps}catch(m){Cc(e,e.return,m)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:fl(t,e),vl(e),4&n&&gl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(al(i)){var n=i;break e}i=i.return}throw Error(s(160))}switch(n.tag){case 5:var r=n.stateNode;32&n.flags&&(ue(r,""),n.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var a=n.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Cc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,i){$o=e,bl(e,t,i)}function bl(e,t,i){for(var n=0!==(1&e.mode);null!==$o;){var r=$o,s=r.child;if(22===r.tag&&n){var a=null!==r.memoizedState||qo;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Zo;o=qo;var c=Zo;if(qo=a,(Zo=l)&&!c)for($o=r;null!==$o;)l=(a=$o).child,22===a.tag&&null!==a.memoizedState?Sl(r):null!==l?(l.return=a,$o=l):Sl(r);for(;null!==s;)$o=s,bl(s,t,i),s=s.sibling;$o=r,qo=o,Zo=c}_l(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,$o=s):_l(e)}}function _l(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var i=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zo||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Zo)if(null===i)n.componentDidMount();else{var r=t.elementType===t.type?i.memoizedProps:to(t.type,i.memoizedProps);n.componentDidUpdate(r,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Us(t,a,n);break;case 3:var o=t.updateQueue;if(null!==o){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}Us(t,o,i)}break;case 5:var l=t.stateNode;if(null===i&&4&t.flags){i=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var d=h.memoizedState;if(null!==d){var u=d.dehydrated;null!==u&&Vt(u)}}}break;default:throw Error(s(163))}Zo||512&t.flags&&rl(t)}catch(p){Cc(t,t.return,p)}}if(t===e){$o=null;break}if(null!==(i=t.sibling)){i.return=t.return,$o=i;break}$o=t.return}}function xl(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var i=t.sibling;if(null!==i){i.return=t.return,$o=i;break}$o=t.return}}function Sl(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{nl(4,t)}catch(l){Cc(t,i,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var r=t.return;try{n.componentDidMount()}catch(l){Cc(t,r,l)}}var s=t.return;try{rl(t)}catch(l){Cc(t,s,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Cc(t,a,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var wl,Cl=Math.ceil,kl=_.ReactCurrentDispatcher,Al=_.ReactCurrentOwner,El=_.ReactCurrentBatchConfig,Tl=0,Ol=null,Pl=null,Ml=0,Il=0,Rl=Cr(0),Dl=0,Ll=null,jl=0,Fl=0,Bl=0,Nl=null,zl=null,Hl=0,Vl=1/0,Ul=null,Wl=!1,Gl=null,Kl=null,Yl=!1,Xl=null,ql=0,Zl=0,Ql=null,$l=-1,Jl=0;function ec(){return 0!==(6&Tl)?Qe():-1!==$l?$l:$l=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Ml?Ml&-Ml:null!==fs.transition?(0===Jl&&(Jl=ft()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function ic(e,t,i,n){if(50<Zl)throw Zl=0,Ql=null,Error(s(185));vt(e,i,n),0!==(2&Tl)&&e===Ol||(e===Ol&&(0===(2&Tl)&&(Fl|=i),4===Dl&&oc(e,Ml)),nc(e,n),1===i&&0===Tl&&0===(1&t.mode)&&(Vl=Qe()+500,Nr&&Vr()))}function nc(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=r[a];-1===l?0!==(o&i)&&0===(o&n)||(r[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=ut(e,e===Ol?Ml:0);if(0===n)null!==i&&Xe(i),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=i&&Xe(i),1===t)0===e.tag?function(e){Nr=!0,Hr(e)}(lc.bind(null,e)):Hr(lc.bind(null,e)),ar((function(){0===(6&Tl)&&Vr()})),i=null;else{switch(_t(n)){case 1:i=Je;break;case 4:i=et;break;case 16:default:i=tt;break;case 536870912:i=nt}i=Oc(i,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function rc(e,t){if($l=-1,Jl=0,0!==(6&Tl))throw Error(s(327));var i=e.callbackNode;if(Sc()&&e.callbackNode!==i)return null;var n=ut(e,e===Ol?Ml:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=mc(e,n);else{t=n;var r=Tl;Tl|=2;var a=gc();for(Ol===e&&Ml===t||(Ul=null,Vl=Qe()+500,uc(e,t));;)try{yc();break}catch(l){pc(e,l)}As(),kl.current=a,Tl=r,null!==Pl?t=0:(Ol=null,Ml=0,t=Dl)}if(0!==t){if(2===t&&(0!==(r=gt(e))&&(n=r,t=sc(e,r))),1===t)throw i=Ll,uc(e,0),oc(e,n),nc(e,Qe()),i;if(6===t)oc(e,n);else{if(r=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var n=0;n<i.length;n++){var r=i[n],s=r.getSnapshot;r=r.value;try{if(!on(s(),r))return!1}catch(o){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=mc(e,n))&&(0!==(a=gt(e))&&(n=a,t=sc(e,a))),1===t))throw i=Ll,uc(e,0),oc(e,n),nc(e,Qe()),i;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,zl,Ul);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=Hl+500-Qe())){if(0!==ut(e,0))break;if(((r=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=nr(xc.bind(null,e,zl,Ul),t);break}xc(e,zl,Ul);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,r=-1;0<n;){var o=31-at(n);a=1<<o,(o=t[o])>r&&(r=o),n&=~a}if(n=r,10<(n=(120>(n=Qe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Cl(n/1960))-n)){e.timeoutHandle=nr(xc.bind(null,e,zl,Ul),n);break}xc(e,zl,Ul);break;default:throw Error(s(329))}}}return nc(e,Qe()),e.callbackNode===i?rc.bind(null,e):null}function sc(e,t){var i=Nl;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zl,zl=i,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Bl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-at(t),n=1<<i;e[i]=-1,t&=~n}}function lc(e){if(0!==(6&Tl))throw Error(s(327));Sc();var t=ut(e,0);if(0===(1&t))return nc(e,Qe()),null;var i=mc(e,t);if(0!==e.tag&&2===i){var n=gt(e);0!==n&&(t=n,i=sc(e,n))}if(1===i)throw i=Ll,uc(e,0),oc(e,t),nc(e,Qe()),i;if(6===i)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zl,Ul),nc(e,Qe()),null}function cc(e,t){var i=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=i)&&(Vl=Qe()+500,Nr&&Vr())}}function hc(e){null!==Xl&&0===Xl.tag&&0===(6&Tl)&&Sc();var t=Tl;Tl|=1;var i=El.transition,n=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=n,El.transition=i,0===(6&(Tl=t))&&Vr()}}function dc(){Il=Rl.current,kr(Rl)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,rr(i)),null!==Pl)for(i=Pl.return;null!==i;){var n=i;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Rr();break;case 3:Zs(),kr(Or),kr(Tr),ia();break;case 5:$s(n);break;case 4:Zs();break;case 13:case 19:kr(Js);break;case 10:Es(n.type._context);break;case 22:case 23:dc()}i=i.return}if(Ol=e,Pl=e=Rc(e.current,null),Ml=Il=t,Dl=0,Ll=null,Bl=Fl=jl=0,zl=Nl=null,null!==Ms){for(t=0;t<Ms.length;t++)if(null!==(n=(i=Ms[t]).interleaved)){i.interleaved=null;var r=n.next,s=i.pending;if(null!==s){var a=s.next;s.next=r,n.next=a}i.pending=n}Ms=null}return e}function pc(e,t){for(;;){var i=Pl;try{if(As(),na.current=Qa,ca){for(var n=aa.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}ca=!1}if(sa=0,la=oa=aa=null,ha=!1,da=0,Al.current=null,null===i||null===i.return){Dl=1,Ll=t,Pl=null;break}e:{var a=e,o=i.return,l=i,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var h=c,d=l,u=d.tag;if(0===(1&d.mode)&&(0===u||11===u||15===u)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=mo(o);if(null!==g){g.flags&=-257,vo(g,o,l,0,t),1&g.mode&&fo(a,h,t),c=h;var f=(t=g).updateQueue;if(null===f){var m=new Set;m.add(c),t.updateQueue=m}else f.add(c);break e}if(0===(1&t)){fo(a,h,t),fc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=mo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),gs(lo(c,l));break e}}a=c=lo(c,l),4!==Dl&&(Dl=2),null===Nl?Nl=[a]:Nl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Hs(a,po(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Hs(a,go(a,l,t));break e}}a=a.return}while(null!==a)}_c(i)}catch(_){t=_,Pl===i&&null!==i&&(Pl=i=i.return);continue}break}}function gc(){var e=kl.current;return kl.current=Qa,null===e?Qa:e}function fc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Ol||0===(268435455&jl)&&0===(268435455&Fl)||oc(Ol,Ml)}function mc(e,t){var i=Tl;Tl|=2;var n=gc();for(Ol===e&&Ml===t||(Ul=null,uc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(As(),Tl=i,kl.current=n,null!==Pl)throw Error(s(261));return Ol=null,Ml=0,Dl}function vc(){for(;null!==Pl;)bc(Pl)}function yc(){for(;null!==Pl&&!qe();)bc(Pl)}function bc(e){var t=wl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?_c(e):Pl=t,Al.current=null}function _c(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(i=Yo(i,t,Il)))return void(Pl=i)}else{if(null!==(i=Xo(i,t)))return i.flags&=32767,void(Pl=i);if(null===e)return Dl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Dl&&(Dl=5)}function xc(e,t,i){var n=bt,r=El.transition;try{El.transition=null,bt=1,function(e,t,i,n){do{Sc()}while(null!==Xl);if(0!==(6&Tl))throw Error(s(327));i=e.finishedWork;var r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=i.lanes|i.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<i;){var r=31-at(i),s=1<<r;t[r]=0,n[r]=-1,e[r]=-1,i&=~s}}(e,a),e===Ol&&(Pl=Ol=null,Ml=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Yl||(Yl=!0,Oc(tt,(function(){return Sc(),null}))),a=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||a){a=El.transition,El.transition=null;var o=bt;bt=1;var l=Tl;Tl|=4,Al.current=null,function(e,t){if(er=Wt,pn(e=un())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var r=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{i.nodeType,a.nodeType}catch(x){i=null;break e}var o=0,l=-1,c=-1,h=0,d=0,u=e,p=null;t:for(;;){for(var g;u!==i||0!==r&&3!==u.nodeType||(l=o+r),u!==a||0!==n&&3!==u.nodeType||(c=o+n),3===u.nodeType&&(o+=u.nodeValue.length),null!==(g=u.firstChild);)p=u,u=g;for(;;){if(u===e)break t;if(p===i&&++h===r&&(l=o),p===a&&++d===n&&(c=o),null!==(g=u.nextSibling))break;p=(u=p).parentNode}u=g}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(tr={focusedElem:e,selectionRange:i},Wt=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,v=f.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(x){Cc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}f=tl,tl=!1}(e,i),ml(i,e),gn(tr),Wt=!!er,tr=er=null,e.current=i,yl(i,e,r),Ze(),Tl=l,bt=o,El.transition=a}else e.current=i;if(Yl&&(Yl=!1,Xl=e,ql=r),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),nc(e,Qe()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)r=t[i],n(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&ql)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Ql?Zl++:(Zl=0,Ql=e):Zl=0,Vr()}(e,t,i,n)}finally{El.transition=r,bt=n}return null}function Sc(){if(null!==Xl){var e=_t(ql),t=El.transition,i=bt;try{if(El.transition=null,bt=16>e?16:e,null===Xl)var n=!1;else{if(e=Xl,Xl=null,ql=0,0!==(6&Tl))throw Error(s(331));var r=Tl;for(Tl|=4,$o=e.current;null!==$o;){var a=$o,o=a.child;if(0!==(16&$o.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var h=l[c];for($o=h;null!==$o;){var d=$o;switch(d.tag){case 0:case 11:case 15:il(8,d,a)}var u=d.child;if(null!==u)u.return=d,$o=u;else for(;null!==$o;){var p=(d=$o).sibling,g=d.return;if(sl(d),d===h){$o=null;break}if(null!==p){p.return=g,$o=p;break}$o=g}}}var f=a.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}$o=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,$o=o;else e:for(;null!==$o;){if(0!==(2048&(a=$o).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,$o=y;break e}$o=a.return}}var b=e.current;for($o=b;null!==$o;){var _=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==_)_.return=o,$o=_;else e:for(o=b;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(S){Cc(l,l.return,S)}if(l===o){$o=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,$o=x;break e}$o=l.return}}if(Tl=r,Vr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(S){}n=!0}return n}finally{bt=i,El.transition=t}}return!1}function wc(e,t,i){e=Ns(e,t=po(0,t=lo(i,t),1),1),t=ec(),null!==e&&(vt(e,1,t),nc(e,t))}function Cc(e,t,i){if(3===e.tag)wc(e,e,i);else for(;null!==t;){if(3===t.tag){wc(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Kl||!Kl.has(n))){t=Ns(t,e=go(t,e=lo(i,e),1),1),e=ec(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function kc(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&i,Ol===e&&(Ml&i)===i&&(4===Dl||3===Dl&&(130023424&Ml)===Ml&&500>Qe()-Hl?uc(e,0):Bl|=i),nc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ht,0===(130023424&(ht<<=1))&&(ht=4194304)));var i=ec();null!==(e=Ds(e,t))&&(vt(e,t,i),nc(e,i))}function Ec(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Ac(e,i)}function Tc(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(i=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Ac(e,i)}function Oc(e,t){return Ye(e,t)}function Pc(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,i,n){return new Pc(e,t,i,n)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var i=e.alternate;return null===i?((i=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Dc(e,t,i,n,r,a){var o=2;if(n=e,"function"===typeof e)Ic(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case w:return Lc(i.children,r,a,t);case C:o=8,r|=8;break;case k:return(e=Mc(12,i,t,2|r)).elementType=k,e.lanes=a,e;case O:return(e=Mc(13,i,t,r)).elementType=O,e.lanes=a,e;case P:return(e=Mc(19,i,t,r)).elementType=P,e.lanes=a,e;case R:return jc(i,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:o=10;break e;case E:o=9;break e;case T:o=11;break e;case M:o=14;break e;case I:o=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Mc(o,i,t,r)).elementType=e,t.type=n,t.lanes=a,t}function Lc(e,t,i,n){return(e=Mc(7,e,n,t)).lanes=i,e}function jc(e,t,i,n){return(e=Mc(22,e,n,t)).elementType=R,e.lanes=i,e.stateNode={isHidden:!1},e}function Fc(e,t,i){return(e=Mc(6,e,null,t)).lanes=i,e}function Bc(e,t,i){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nc(e,t,i,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zc(e,t,i,n,r,s,a,o,l){return e=new Nc(e,t,i,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Mc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},js(s),e}function Hc(e){if(!e)return Er;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var i=e.type;if(Ir(i))return Lr(e,i,t)}return t}function Vc(e,t,i,n,r,s,a,o,l){return(e=zc(i,n,!0,e,0,s,0,o,l)).context=Hc(null),i=e.current,(s=Bs(n=ec(),r=tc(i))).callback=void 0!==t&&null!==t?t:null,Ns(i,s,r),e.current.lanes=r,vt(e,r,n),nc(e,n),e}function Uc(e,t,i,n){var r=t.current,s=ec(),a=tc(r);return i=Hc(i),null===t.context?t.context=i:t.pendingContext=i,(t=Bs(s,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ns(r,t,a))&&(ic(e,r,a,s),zs(e,r,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}wl=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||Or.current)bo=!0;else{if(0===(e.lanes&i)&&0===(128&t.flags))return bo=!1,function(e,t,i){switch(t.tag){case 3:Oo(t),ps();break;case 5:Qs(t);break;case 1:Ir(t.type)&&jr(t);break;case 4:qs(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;Ar(Ss,n._currentValue),n._currentValue=r;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ar(Js,1&Js.current),t.flags|=128,null):0!==(i&t.child.childLanes)?Fo(e,t,i):(Ar(Js,1&Js.current),null!==(e=Wo(e,t,i))?e.sibling:null);Ar(Js,1&Js.current);break;case 19:if(n=0!==(i&t.childLanes),0!==(128&e.flags)){if(n)return Vo(e,t,i);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ar(Js,Js.current),n)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,i)}return Wo(e,t,i)}(e,t,i);bo=0!==(131072&e.flags)}else bo=!1,rs&&0!==(1048576&t.flags)&&Jr(t,Kr,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Uo(e,t),e=t.pendingProps;var r=Mr(t,Tr.current);Os(t,i),r=fa(null,t,n,e,r,i);var a=ma();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(n)?(a=!0,jr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,js(t),r.updater=no,t.stateNode=r,r._reactInternals=t,oo(t,n,e,i),t=To(null,t,n,!0,a,i)):(t.tag=0,rs&&a&&es(t),_o(null,t,r,i),t=t.child),t;case 16:n=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,n=(r=n._init)(n._payload),t.type=n,r=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===M)return 14}return 2}(n),e=to(n,e),r){case 0:t=Ao(null,t,n,e,i);break e;case 1:t=Eo(null,t,n,e,i);break e;case 11:t=xo(null,t,n,e,i);break e;case 14:t=So(null,t,n,to(n.type,e),i);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,Ao(e,t,n,r=t.elementType===n?r:to(n,r),i);case 1:return n=t.type,r=t.pendingProps,Eo(e,t,n,r=t.elementType===n?r:to(n,r),i);case 3:e:{if(Oo(t),null===e)throw Error(s(387));n=t.pendingProps,r=(a=t.memoizedState).element,Fs(e,t),Vs(t,n,null,i);var o=t.memoizedState;if(n=o.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,n,i,r=lo(Error(s(423)),t));break e}if(n!==r){t=Po(e,t,n,i,r=lo(Error(s(424)),t));break e}for(ns=cr(t.stateNode.containerInfo.firstChild),is=t,rs=!0,ss=null,i=xs(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(ps(),n===r){t=Wo(e,t,i);break e}_o(e,t,n,i)}t=t.child}return t;case 5:return Qs(t),null===e&&cs(t),n=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,ir(n,r)?o=null:null!==a&&ir(n,a)&&(t.flags|=32),ko(e,t),_o(e,t,o,i),t.child;case 6:return null===e&&cs(t),null;case 13:return Fo(e,t,i);case 4:return qs(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=_s(t,null,n,i):_o(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,xo(e,t,n,r=t.elementType===n?r:to(n,r),i);case 7:return _o(e,t,t.pendingProps,i),t.child;case 8:case 12:return _o(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Ar(Ss,n._currentValue),n._currentValue=o,null!==a)if(on(a.value,o)){if(a.children===r.children&&!Or.current){t=Wo(e,t,i);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===a.tag){(c=Bs(-1,i&-i)).tag=2;var h=a.updateQueue;if(null!==h){var d=(h=h.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),h.pending=c}}a.lanes|=i,null!==(c=a.alternate)&&(c.lanes|=i),Ts(a.return,i,t),l.lanes|=i;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=i,null!==(l=o.alternate)&&(l.lanes|=i),Ts(o,i,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}_o(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,Os(t,i),n=n(r=Ps(r)),t.flags|=1,_o(e,t,n,i),t.child;case 14:return r=to(n=t.type,t.pendingProps),So(e,t,n,r=to(n.type,r),i);case 15:return wo(e,t,t.type,t.pendingProps,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:to(n,r),Uo(e,t),t.tag=1,Ir(n)?(e=!0,jr(t)):e=!1,Os(t,i),so(t,n,r),oo(t,n,r,i),To(null,t,n,!0,e,i);case 19:return Vo(e,t,i);case 22:return Co(e,t,i)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function qc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Jc(e,t,i,n,r){var s=i._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var e=Wc(a);o.call(e)}}Uc(t,a,e,r)}else a=function(e,t,i,n,r){if(r){if("function"===typeof n){var s=n;n=function(){var e=Wc(a);s.call(e)}}var a=Vc(t,n,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[gr]=a.current,Vn(8===e.nodeType?e.parentNode:e),hc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof n){var o=n;n=function(){var e=Wc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[gr]=l.current,Vn(8===e.nodeType?e.parentNode:e),hc((function(){Uc(t,l,i,n)})),l}(i,t,e,r,n);return Wc(a)}qc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Uc(e,t,null,null)},qc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Uc(null,e,null,null)})),t[gr]=null}},qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Rt.length&&0!==t&&t<Rt[i].priority;i++);Rt.splice(i,0,e),0===i&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=dt(t.pendingLanes);0!==i&&(yt(t,1|i),nc(t,Qe()),0===(6&Tl)&&(Vl=Qe()+500,Vr()))}break;case 13:hc((function(){var t=Ds(e,1);if(null!==t){var i=ec();ic(t,e,1,i)}})),Kc(e,1)}},St=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)ic(t,e,134217728,ec());Kc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),i=Ds(e,t);if(null!==i)ic(i,e,t,ec());Kc(e,t)}},Ct=function(){return bt},kt=function(e,t){var i=bt;try{return bt=e,t()}finally{bt=i}},Se=function(e,t,i){switch(t){case"input":if($(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=xr(n);if(!r)throw Error(s(90));Y(n),$(n,r)}}}break;case"textarea":se(e,i);break;case"select":null!=(t=i.value)&&ie(e,!!i.multiple,t,!1)}},Te=cc,Oe=hc;var eh={usingClientEntryPoint:!1,Events:[br,_r,xr,Ae,Ee,cc]},th={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ih={bundleType:th.bundleType,version:th.version,rendererPackageName:th.rendererPackageName,rendererConfig:th.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:th.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{rt=nh.inject(ih),st=nh}catch(he){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eh,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(s(200));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.createRoot=function(e,t){if(!Zc(e))throw Error(s(299));var i=!1,n="",r=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=zc(e,1,!1,null,0,i,0,n,r),e[gr]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,i){if(!Qc(t))throw Error(s(200));return Jc(null,e,t,!0,i)},t.hydrateRoot=function(e,t,i){if(!Zc(e))throw Error(s(405));var n=null!=i&&i.hydratedSources||null,r=!1,a="",o=Yc;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(r=!0),void 0!==i.identifierPrefix&&(a=i.identifierPrefix),void 0!==i.onRecoverableError&&(o=i.onRecoverableError)),t=Vc(t,null,e,1,null!=i?i:null,r,0,a,o),e[gr]=t.current,Vn(e),n)for(e=0;e<n.length;e++)r=(r=(i=n[e])._getVersion)(i._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[i,r]:t.mutableSourceEagerHydrationData.push(i,r);return new qc(t)},t.render=function(e,t,i){if(!Qc(t))throw Error(s(200));return Jc(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[gr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!Qc(i))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Jc(e,t,i,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},84391:(e,t,i)=>{"use strict";var n=i(97950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},97950:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(82730)},18136:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return h.default}}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var i=p(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}n.default=e,i&&i.set(e,n);return n}(i(65043)),r=u(i(65173)),s=u(i(97950)),a=u(i(43024)),o=i(1212),l=i(11777),c=i(22447),h=u(i(935)),d=u(i(85387));function u(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(p=function(e){return e?i:t})(e)}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},g.apply(this,arguments)}function f(e,t,i){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class m extends n.Component{static getDerivedStateFromProps(e,t){let{position:i}=e,{prevPropsPosition:n}=t;return!i||n&&i.x===n.x&&i.y===n.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:i,prevPropsPosition:n}),{x:i.x,y:i.y,prevPropsPosition:{...i}})}constructor(e){super(e),f(this,"onDragStart",((e,t)=>{(0,d.default)("Draggable: onDragStart: %j",t);if(!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})})),f(this,"onDrag",((e,t)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);const i=(0,l.createDraggableData)(this,t),n={x:i.x,y:i.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=n;n.x+=this.state.slackX,n.y+=this.state.slackY;const[r,s]=(0,l.getBoundPosition)(this,n.x,n.y);n.x=r,n.y=s,n.slackX=this.state.slackX+(e-n.x),n.slackY=this.state.slackY+(t-n.y),i.x=n.x,i.y=n.y,i.deltaX=n.x-this.state.x,i.deltaY=n.y-this.state.y}if(!1===this.props.onDrag(e,i))return!1;this.setState(n)})),f(this,"onDragStop",((e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);const i={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;i.x=e,i.y=t}this.setState(i)})),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){"undefined"!==typeof window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:s.default.findDOMNode(this)}render(){const{axis:e,bounds:t,children:i,defaultPosition:r,defaultClassName:s,defaultClassNameDragging:c,defaultClassNameDragged:d,position:u,positionOffset:p,scale:f,...m}=this.props;let v={},y=null;const b=!Boolean(u)||this.state.dragging,_=u||r,x={x:(0,l.canDragX)(this)&&b?this.state.x:_.x,y:(0,l.canDragY)(this)&&b?this.state.y:_.y};this.state.isElementSVG?y=(0,o.createSVGTransform)(x,p):v=(0,o.createCSSTransform)(x,p);const S=(0,a.default)(i.props.className||"",s,{[c]:this.state.dragging,[d]:this.state.dragged});return n.createElement(h.default,g({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(i),{className:S,style:{...i.props.style,...v},transform:y}))}}t.default=m,f(m,"displayName","Draggable"),f(m,"propTypes",{...h.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),f(m,"defaultProps",{...h.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},935:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}n.default=e,i&&i.set(e,n);return n}(i(65043)),r=h(i(65173)),s=h(i(97950)),a=i(1212),o=i(11777),l=i(22447),c=h(i(85387));function h(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}function u(e,t,i){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p={start:"touchstart",move:"touchmove",stop:"touchend"},g={start:"mousedown",move:"mousemove",stop:"mouseup"};let f=g;class m extends n.Component{constructor(){super(...arguments),u(this,"dragging",!1),u(this,"lastX",NaN),u(this,"lastY",NaN),u(this,"touchIdentifier",null),u(this,"mounted",!1),u(this,"handleDragStart",(e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"===typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:i}=t;if(this.props.disabled||!(e.target instanceof i.defaultView.Node)||this.props.handle&&!(0,a.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,a.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const n=(0,a.getTouchIdentifier)(e);this.touchIdentifier=n;const r=(0,o.getControlPosition)(e,n,this);if(null==r)return;const{x:s,y:l}=r,h=(0,o.createCoreData)(this,s,l);(0,c.default)("DraggableCore: handleDragStart: %j",h),(0,c.default)("calling",this.props.onStart);!1!==this.props.onStart(e,h)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(i),this.dragging=!0,this.lastX=s,this.lastY=l,(0,a.addEvent)(i,f.move,this.handleDrag),(0,a.addEvent)(i,f.stop,this.handleDragStop))})),u(this,"handleDrag",(e=>{const t=(0,o.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:i,y:n}=t;if(Array.isArray(this.props.grid)){let e=i-this.lastX,t=n-this.lastY;if([e,t]=(0,o.snapToGrid)(this.props.grid,e,t),!e&&!t)return;i=this.lastX+e,n=this.lastY+t}const r=(0,o.createCoreData)(this,i,n);(0,c.default)("DraggableCore: handleDrag: %j",r);if(!1!==this.props.onDrag(e,r)&&!1!==this.mounted)this.lastX=i,this.lastY=n;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(s){const e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}})),u(this,"handleDragStop",(e=>{if(!this.dragging)return;const t=(0,o.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:i,y:n}=t;if(Array.isArray(this.props.grid)){let e=i-this.lastX||0,t=n-this.lastY||0;[e,t]=(0,o.snapToGrid)(this.props.grid,e,t),i=this.lastX+e,n=this.lastY+t}const r=(0,o.createCoreData)(this,i,n);if(!1===this.props.onStop(e,r)||!1===this.mounted)return!1;const s=this.findDOMNode();s&&this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(s.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",r),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,s&&((0,c.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(s.ownerDocument,f.move,this.handleDrag),(0,a.removeEvent)(s.ownerDocument,f.stop,this.handleDragStop))})),u(this,"onMouseDown",(e=>(f=g,this.handleDragStart(e)))),u(this,"onMouseUp",(e=>(f=g,this.handleDragStop(e)))),u(this,"onTouchStart",(e=>(f=p,this.handleDragStart(e)))),u(this,"onTouchEnd",(e=>(f=p,this.handleDragStop(e))))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,a.addEvent)(e,p.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,a.removeEvent)(t,g.move,this.handleDrag),(0,a.removeEvent)(t,p.move,this.handleDrag),(0,a.removeEvent)(t,g.stop,this.handleDragStop),(0,a.removeEvent)(t,p.stop,this.handleDragStop),(0,a.removeEvent)(e,p.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:s.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=m,u(m,"displayName","DraggableCore"),u(m,"propTypes",{allowAnyClick:r.default.bool,children:r.default.node.isRequired,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:r.default.arrayOf(r.default.number),handle:r.default.string,cancel:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),u(m,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},81929:(e,t,i)=>{"use strict";const{default:n,DraggableCore:r}=i(18136);e.exports=n,e.exports.default=n,e.exports.DraggableCore=r},1212:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=c,t.addEvent=function(e,t,i,n){if(!e)return;const r={capture:!0,...n};e.addEventListener?e.addEventListener(t,i,r):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&c(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){const i=l(e,t,"px");return{[(0,r.browserPrefixToKey)("transform",r.default)]:i}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,n.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,n.findInArray)(e.changedTouches,(e=>t===e.identifier))},t.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight;const i=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,n.int)(i.paddingTop),t-=(0,n.int)(i.paddingBottom),t},t.innerWidth=function(e){let t=e.clientWidth;const i=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,n.int)(i.paddingLeft),t-=(0,n.int)(i.paddingRight),t},t.matchesSelector=o,t.matchesSelectorAndParentsTo=function(e,t,i){let n=e;do{if(o(n,t))return!0;if(n===i)return!1;n=n.parentNode}while(n);return!1},t.offsetXYFromParent=function(e,t,i){const n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),r=(e.clientX+t.scrollLeft-n.left)/i,s=(e.clientY+t.scrollTop-n.top)/i;return{x:r,y:s}},t.outerHeight=function(e){let t=e.clientHeight;const i=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,n.int)(i.borderTopWidth),t+=(0,n.int)(i.borderBottomWidth),t},t.outerWidth=function(e){let t=e.clientWidth;const i=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,n.int)(i.borderLeftWidth),t+=(0,n.int)(i.borderRightWidth),t},t.removeClassName=h,t.removeEvent=function(e,t,i,n){if(!e)return;const r={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,i,r):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&h(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(t){}};var n=i(22447),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var i=s(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,i&&i.set(e,n);return n}(i(1561));function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}let a="";function o(e,t){return a||(a=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,n.isFunction)(e[t])}))),!!(0,n.isFunction)(e[a])&&e[a](t)}function l(e,t,i){let{x:n,y:r}=e,s="translate(".concat(n).concat(i,",").concat(r).concat(i,")");if(t){const e="".concat("string"===typeof t.x?t.x:t.x+i),n="".concat("string"===typeof t.y?t.y:t.y+i);s="translate(".concat(e,", ").concat(n,")")+s}return s}function c(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function h(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},1561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=r,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=n;const i=["Moz","Webkit","O","ms"];function n(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"===typeof window)return"";const n=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!n)return"";if(t in n)return"";for(let s=0;s<i.length;s++)if(r(t,i[s])in n)return i[s];return""}function r(e,t){return t?"".concat(t).concat(function(e){let t="",i=!0;for(let n=0;n<e.length;n++)i?(t+=e[n].toUpperCase(),i=!1):"-"===e[n]?i=!0:t+=e[n];return t}(e)):e}t.default=n()},85387:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){0}},11777:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,i){const r=!(0,n.isNum)(e.lastX),a=s(e);return r?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:i,x:t,y:i}:{node:a,deltaX:t-e.lastX,deltaY:i-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:i}},t.createDraggableData=function(e,t){const i=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/i,y:e.state.y+t.deltaY/i,deltaX:t.deltaX/i,deltaY:t.deltaY/i,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,i){if(!e.props.bounds)return[t,i];let{bounds:a}=e.props;a="string"===typeof a?a:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(a);const o=s(e);if("string"===typeof a){const{ownerDocument:e}=o,t=e.defaultView;let i;if(i="parent"===a?o.parentNode:e.querySelector(a),!(i instanceof t.HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');const s=i,l=t.getComputedStyle(o),c=t.getComputedStyle(s);a={left:-o.offsetLeft+(0,n.int)(c.paddingLeft)+(0,n.int)(l.marginLeft),top:-o.offsetTop+(0,n.int)(c.paddingTop)+(0,n.int)(l.marginTop),right:(0,r.innerWidth)(s)-(0,r.outerWidth)(o)-o.offsetLeft+(0,n.int)(c.paddingRight)-(0,n.int)(l.marginRight),bottom:(0,r.innerHeight)(s)-(0,r.outerHeight)(o)-o.offsetTop+(0,n.int)(c.paddingBottom)-(0,n.int)(l.marginBottom)}}(0,n.isNum)(a.right)&&(t=Math.min(t,a.right));(0,n.isNum)(a.bottom)&&(i=Math.min(i,a.bottom));(0,n.isNum)(a.left)&&(t=Math.max(t,a.left));(0,n.isNum)(a.top)&&(i=Math.max(i,a.top));return[t,i]},t.getControlPosition=function(e,t,i){const n="number"===typeof t?(0,r.getTouch)(e,t):null;if("number"===typeof t&&!n)return null;const a=s(i),o=i.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,r.offsetXYFromParent)(n||e,o,i.props.scale)},t.snapToGrid=function(e,t,i){const n=Math.round(t/e[0])*e[0],r=Math.round(i/e[1])*e[1];return[n,r]};var n=i(22447),r=i(1212);function s(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},22447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,i){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(i," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let i=0,n=e.length;i<n;i++)if(t.apply(t,[e[i],i,e]))return e[i]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"===typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"===typeof e&&!isNaN(e)}},96325:(e,t,i)=>{"use strict";t.__esModule=!0,t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var i=l(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}n.default=e,i&&i.set(e,n);return n}(i(65043)),r=i(81929),s=i(95769),a=i(65394),o=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(l=function(e){return e?i:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},c.apply(this,arguments)}function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){u(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function u(e,t,i){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var g=function(e){var t,i;function a(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,p(t,i);var l=a.prototype;return l.componentWillUnmount=function(){this.resetData()},l.resetData=function(){this.lastHandleRect=this.slack=null},l.runConstraints=function(e,t){var i=this.props,n=i.minConstraints,r=i.maxConstraints,s=i.lockAspectRatio;if(!n&&!r&&!s)return[e,t];if(s){var a=this.props.width/this.props.height,o=e-this.props.width,l=t-this.props.height;Math.abs(o)>Math.abs(l*a)?t=e/a:e=t*a}var c=e,h=t,d=this.slack||[0,0],u=d[0],p=d[1];return e+=u,t+=p,n&&(e=Math.max(n[0],e),t=Math.max(n[1],t)),r&&(e=Math.min(r[0],e),t=Math.min(r[1],t)),this.slack=[u+(c-e),p+(h-t)],[e,t]},l.resizeHandler=function(e,t){var i=this;return function(n,r){var s=r.node,a=r.deltaX,o=r.deltaY;"onResizeStart"===e&&i.resetData();var l=("both"===i.props.axis||"x"===i.props.axis)&&"n"!==t&&"s"!==t,c=("both"===i.props.axis||"y"===i.props.axis)&&"e"!==t&&"w"!==t;if(l||c){var h=t[0],d=t[t.length-1],u=s.getBoundingClientRect();if(null!=i.lastHandleRect){if("w"===d)a+=u.left-i.lastHandleRect.left;if("n"===h)o+=u.top-i.lastHandleRect.top}i.lastHandleRect=u,"w"===d&&(a=-a),"n"===h&&(o=-o);var p=i.props.width+(l?a/i.props.transformScale:0),g=i.props.height+(c?o/i.props.transformScale:0),f=i.runConstraints(p,g);p=f[0],g=f[1];var m=p!==i.props.width||g!==i.props.height,v="function"===typeof i.props[e]?i.props[e]:null;v&&!("onResize"===e&&!m)&&(null==n.persist||n.persist(),v(n,{node:s,size:{width:p,height:g},handle:t})),"onResizeStop"===e&&i.resetData()}}},l.renderResizeHandle=function(e,t){var i=this.props.handle;if(!i)return n.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"===typeof i)return i(e,t);var r=d({ref:t},"string"===typeof i.type?{}:{handleAxis:e});return n.cloneElement(i,r)},l.render=function(){var e=this,t=this.props,i=t.children,a=t.className,l=t.draggableOpts,h=(t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart,t.resizeHandles),u=(t.transformScale,function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(t,o));return(0,s.cloneElement)(i,d(d({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(i.props.children,h.map((function(t){var i,s=null!=(i=e.handleRefs[t])?i:e.handleRefs[t]=n.createRef();return n.createElement(r.DraggableCore,c({},l,{nodeRef:s,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,s))})))}))},a}(n.Component);t.default=g,g.propTypes=a.resizableProps,g.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},47276:(e,t,i)=>{"use strict";t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var i=c(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}n.default=e,i&&i.set(e,n);return n}(i(65043)),r=l(i(65173)),s=l(i(96325)),a=i(65394),o=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(c=function(e){return e?i:t})(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},h.apply(this,arguments)}function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){p(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t,i){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var f=function(e){var t,i;function r(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,i){var n=i.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(n,(function(){return t.props.onResize&&t.props.onResize(e,i)}))):t.setState(n)},t}return i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,g(t,i),r.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},r.prototype.render=function(){var e=this.props,t=e.handle,i=e.handleSize,r=(e.onResize,e.onResizeStart),a=e.onResizeStop,l=e.draggableOpts,c=e.minConstraints,d=e.maxConstraints,p=e.lockAspectRatio,g=e.axis,f=(e.width,e.height,e.resizeHandles),m=e.style,v=e.transformScale,y=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,o);return n.createElement(s.default,{axis:g,draggableOpts:l,handle:t,handleSize:i,height:this.state.height,lockAspectRatio:p,maxConstraints:d,minConstraints:c,onResizeStart:r,onResize:this.onResize,onResizeStop:a,resizeHandles:f,transformScale:v,width:this.state.width},n.createElement("div",h({},y,{style:u(u({},m),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},r}(n.Component);t.default=f,f.propTypes=u(u({},a.resizableProps),{},{children:r.default.element})},65394:(e,t,i)=>{"use strict";t.__esModule=!0,t.resizableProps=void 0;var n,r=(n=i(65173))&&n.__esModule?n:{default:n};i(81929);var s={axis:r.default.oneOf(["both","x","y","none"]),className:r.default.string,children:r.default.element.isRequired,draggableOpts:r.default.shape({allowAnyClick:r.default.bool,cancel:r.default.string,children:r.default.node,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:r.default.node,grid:r.default.arrayOf(r.default.number),handle:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n,s=t[0];return"both"===s.axis||"y"===s.axis?(n=r.default.number).isRequired.apply(n,t):r.default.number.apply(r.default,t)},handle:r.default.oneOfType([r.default.node,r.default.func]),handleSize:r.default.arrayOf(r.default.number),lockAspectRatio:r.default.bool,maxConstraints:r.default.arrayOf(r.default.number),minConstraints:r.default.arrayOf(r.default.number),onResizeStop:r.default.func,onResizeStart:r.default.func,onResize:r.default.func,resizeHandles:r.default.arrayOf(r.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:r.default.number,width:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n,s=t[0];return"both"===s.axis||"x"===s.axis?(n=r.default.number).isRequired.apply(n,t):r.default.number.apply(r.default,t)}};t.resizableProps=s},95769:(e,t,i)=>{"use strict";t.__esModule=!0,t.cloneElement=function(e,t){t.style&&e.props.style&&(t.style=a(a({},e.props.style),t.style));t.className&&e.props.className&&(t.className=e.props.className+" "+t.className);return r.default.cloneElement(e,t)};var n,r=(n=i(65043))&&n.__esModule?n:{default:n};function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t,i){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},55003:(e,t,i)=>{"use strict";e.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},e.exports.Resizable=i(96325).default,e.exports.ResizableBox=i(47276).default},23302:(e,t,i)=>{e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=a(i(1)),s=a(i(2));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.botName,i=e.buttonSize,n=e.cornerRadius,r=e.requestAccess,s=e.usePic,a=e.dataOnauth,o=e.dataAuthUrl,l=e.lang;window.TelegramLoginWidget={dataOnauth:function(e){return a(e)}};var c=document.createElement("script");c.src="https://telegram.org/js/telegram-widget.js?9",c.setAttribute("data-telegram-login",t),c.setAttribute("data-size",i),void 0!==n&&c.setAttribute("data-radius",n),c.setAttribute("data-request-access",r),c.setAttribute("data-userpic",s),c.setAttribute("data-lang",l),void 0!==o?c.setAttribute("data-auth-url",o):c.setAttribute("data-onauth","TelegramLoginWidget.dataOnauth(user)"),c.async=!0,this.instance.appendChild(c)}},{key:"render",value:function(){var e=this;return r.default.createElement("div",{className:this.props.className,ref:function(t){e.instance=t}},this.props.children)}}]),t}(r.default.Component);o.propTypes={botName:s.default.string.isRequired,dataOnauth:s.default.func,buttonSize:s.default.oneOf(["large","medium","small"]),cornerRadius:s.default.number,requestAccess:s.default.string,usePic:s.default.bool,lang:s.default.string},o.defaultProps={botName:"samplebot",dataOnauth:function(){},buttonSize:"large",requestAccess:"write",usePic:!0,lang:"en"},t.default=o},function(e,t){e.exports=i(57496)},function(e,t,i){e.exports=i(3)()},function(e,t,i){"use strict";var n=i(4);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,s,a){if(a!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return i.PropTypes=i,i}},function(e,t,i){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}])},42235:(e,t,i)=>{"use strict";var n=i(42123),r="function"===typeof Symbol&&Symbol.for,s=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,h=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.memo"):60115,f=r?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(e,t,i){this.props=e,this.context=t,this.refs=b,this.updater=i||y}function x(){}function S(e,t,i){this.props=e,this.context=t,this.refs=b,this.updater=i||y}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=_.prototype;var w=S.prototype=new x;w.constructor=S,n(w,_.prototype),w.isPureReactComponent=!0;var C={current:null},k=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var n,r={},a=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,n)&&!A.hasOwnProperty(n)&&(r[n]=t[n]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];r.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:s,type:e,key:a,ref:o,props:r,_owner:C.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var O=/\/+/g,P=[];function M(e,t,i,n){if(P.length){var r=P.pop();return r.result=e,r.keyPrefix=t,r.func=i,r.context=n,r.count=0,r}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function I(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function R(e,t,i,n){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var o=!1;if(null===e)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case s:case a:o=!0}}if(o)return i(n,e,""===t?"."+L(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+L(r=e[l],l);o+=R(r,c,i,n)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=m&&e[m]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(r=e.next()).done;)o+=R(r=r.value,c=t+L(r,l++),i,n);else if("object"===r)throw i=""+e,Error(v(31,"[object Object]"===i?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return o}function D(e,t,i){return null==e?0:R(e,"",t,i)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,i){var n=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?B(e,n,i,(function(e){return e})):null!=e&&(T(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+i)),n.push(e))}function B(e,t,i,n,r){var s="";null!=i&&(s=(""+i).replace(O,"$&/")+"/"),D(e,F,t=M(t,s,n,r)),I(t)}var N={current:null};function z(){var e=N.current;if(null===e)throw Error(v(321));return e}var H={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,i){if(null==e)return e;var n=[];return B(e,n,null,t,i),n},forEach:function(e,t,i){if(null==e)return e;D(e,j,t=M(null,null,t,i)),I(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return B(e,t,null,(function(e){return e})),t},only:function(e){if(!T(e))throw Error(v(143));return e}},t.Component=_,t.Fragment=o,t.Profiler=c,t.PureComponent=S,t.StrictMode=l,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error(v(267,e));var r=n({},e.props),a=e.key,o=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,l=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(h in t)k.call(t,h)&&!A.hasOwnProperty(h)&&(r[h]=void 0===t[h]&&void 0!==c?c[h]:t[h])}var h=arguments.length-2;if(1===h)r.children=i;else if(1<h){c=Array(h);for(var d=0;d<h;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:s,type:e.type,key:a,ref:o,props:r,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return z().useCallback(e,t)},t.useContext=function(e,t){return z().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return z().useEffect(e,t)},t.useImperativeHandle=function(e,t,i){return z().useImperativeHandle(e,t,i)},t.useLayoutEffect=function(e,t){return z().useLayoutEffect(e,t)},t.useMemo=function(e,t){return z().useMemo(e,t)},t.useReducer=function(e,t,i){return z().useReducer(e,t,i)},t.useRef=function(e){return z().useRef(e)},t.useState=function(e){return z().useState(e)},t.version="16.14.0"},57496:(e,t,i)=>{"use strict";e.exports=i(42235)},26215:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useTurnstile=void 0;const a=s(i(65043)),o="undefined"!==typeof globalThis?globalThis:window;let l,c,h="undefined"!==typeof o.turnstile?"ready":"unloaded";const d=new Promise(((e,t)=>{c={resolve:e,reject:t},"ready"===h&&e(void 0)}));{const e="cf__reactTurnstileOnLoad",t="https://challenges.cloudflare.com/turnstile/v0/api.js";l=()=>{if("unloaded"===h){h="loading",o[e]=()=>{c.resolve(),h="ready",delete o[e]};const i="".concat(t,"?onload=").concat(e,"&render=explicit"),n=document.createElement("script");n.src=i,n.async=!0,n.addEventListener("error",(()=>{c.reject("Failed to load Turnstile."),delete o[e]})),document.head.appendChild(n)}return d}}t.default=function(e){let{id:t,className:i,style:n,sitekey:r,action:s,cData:o,theme:c,language:d,tabIndex:u,responseField:p,responseFieldName:g,size:f,fixedSize:m,retry:v,retryInterval:y,refreshExpired:b,appearance:_,execution:x,userRef:S,onVerify:w,onLoad:C,onError:k,onExpire:A,onTimeout:E,onAfterInteractive:T,onBeforeInteractive:O,onUnsupported:P}=e;const M=(0,a.useRef)(null),I=(0,a.useState)({onVerify:w,onLoad:C,onError:k,onExpire:A,onTimeout:E,onAfterInteractive:T,onBeforeInteractive:O,onUnsupported:P})[0],R=null!==S&&void 0!==S?S:M;return(0,a.useEffect)((()=>{if(!R.current)return;let e=!1,t="";return(async()=>{var i,n;if("ready"!==h)try{await l()}catch(S){return void(null===(i=I.onError)||void 0===i||i.call(I,S))}if(e||!R.current)return;let a;const m={sitekey:r,action:s,cData:o,theme:c,language:d,tabindex:u,"response-field":p,"response-field-name":g,size:f,retry:v,"retry-interval":y,"refresh-expired":b,appearance:_,execution:x,callback:e=>{var t;return null===(t=I.onVerify)||void 0===t?void 0:t.call(I,e,a)},"error-callback":e=>{var t;return null===(t=I.onError)||void 0===t?void 0:t.call(I,e,a)},"expired-callback":e=>{var t;return null===(t=I.onExpire)||void 0===t?void 0:t.call(I,e,a)},"timeout-callback":()=>{var e;return null===(e=I.onTimeout)||void 0===e?void 0:e.call(I,a)},"after-interactive-callback":()=>{var e;return null===(e=I.onAfterInteractive)||void 0===e?void 0:e.call(I,a)},"before-interactive-callback":()=>{var e;return null===(e=I.onBeforeInteractive)||void 0===e?void 0:e.call(I,a)},"unsupported-callback":()=>{var e;return null===(e=I.onUnsupported)||void 0===e?void 0:e.call(I,a)}};t=window.turnstile.render(R.current,m),a=function(e){return{execute:t=>window.turnstile.execute(e,t),reset:()=>window.turnstile.reset(e),getResponse:()=>window.turnstile.getResponse(e),isExpired:()=>window.turnstile.isExpired(e)}}(t),null===(n=I.onLoad)||void 0===n||n.call(I,t,a)})(),()=>{e=!0,t&&window.turnstile.remove(t)}}),[r,s,o,c,d,u,p,g,f,v,y,b,_,x]),(0,a.useEffect)((()=>{I.onVerify=w,I.onLoad=C,I.onError=k,I.onExpire=A,I.onTimeout=E,I.onAfterInteractive=T,I.onBeforeInteractive=O,I.onUnsupported=P}),[w,C,k,A,E,T,O,P]),a.default.createElement("div",{ref:R,id:t,className:i,style:m?{...null!==n&&void 0!==n?n:{},width:"compact"===f?"130px":"300px",height:"compact"===f?"120px":"65px"}:n})},t.useTurnstile=function(){const[e,t]=(0,a.useState)(h);return(0,a.useEffect)((()=>{"ready"!==h&&d.then((()=>t(h)))}),[]),o.turnstile}},51153:(e,t,i)=>{"use strict";var n=i(65043),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var n,s={},c=null,h=null;for(n in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(h=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:h,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},14202:(e,t)=>{"use strict";var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,m={};function v(e,t,i){this.props=e,this.context=t,this.refs=m,this.updater=i||g}function y(){}function b(e,t,i){this.props=e,this.context=t,this.refs=m,this.updater=i||g}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,f(_,v.prototype),_.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,w={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,s={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,r)&&!C.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:i,type:e,key:a,ref:o,props:s,_owner:w.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case n:l=!0}}if(l)return a=a(l=e),e=""===s?"."+T(l,0):s,x(a)?(r="",null!=e&&(r=e.replace(E,"$&/")+"/"),O(a,t,r,"",(function(e){return e}))):null!=a&&(A(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var h=s+T(o=e[c],c);l+=O(o,t,r,h,a)}else if(h=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof h)for(e=h.call(e),c=0;!(o=e.next()).done;)l+=O(o=o.value,t,r,h=s+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,i){if(null==e)return e;var n=[],r=0;return O(e,n,"","",(function(e){return t.call(i,e,r++)})),n}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},R={transition:null},D={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:R,ReactCurrentOwner:w};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,i){P(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=w.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!C.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:i,type:e.type,key:s,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,i){return I.current.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,i){return I.current.useReducer(e,t,i)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,i){return I.current.useSyncExternalStore(e,t,i)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},65043:(e,t,i)=>{"use strict";e.exports=i(14202)},70579:(e,t,i)=>{"use strict";e.exports=i(51153)},27234:(e,t)=>{"use strict";function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,r=e[n];if(!(0<s(r,t)))break e;e[n]=t,e[i]=r,i=n}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,r=e.length,a=r>>>1;n<a;){var o=2*(n+1)-1,l=e[o],c=o+1,h=e[c];if(0>s(l,i))c<r&&0>s(h,l)?(e[n]=h,e[c]=i,n=c):(e[n]=l,e[o]=i,n=o);else{if(!(c<r&&0>s(h,i)))break e;e[n]=h,e[c]=i,n=c}}}return t}function s(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],d=1,u=null,p=3,g=!1,f=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=n(h);null!==t;){if(null===t.callback)r(h);else{if(!(t.startTime<=e))break;r(h),t.sortIndex=t.expirationTime,i(c,t)}t=n(h)}}function x(e){if(m=!1,_(e),!f)if(null!==n(c))f=!0,R(S);else{var t=n(h);null!==t&&D(x,t.startTime-e)}}function S(e,i){f=!1,m&&(m=!1,y(A),A=-1),g=!0;var s=p;try{for(_(i),u=n(c);null!==u&&(!(u.expirationTime>i)||e&&!O());){var a=u.callback;if("function"===typeof a){u.callback=null,p=u.priorityLevel;var o=a(u.expirationTime<=i);i=t.unstable_now(),"function"===typeof o?u.callback=o:u===n(c)&&r(c),_(i)}else r(c);u=n(c)}if(null!==u)var l=!0;else{var d=n(h);null!==d&&D(x,d.startTime-i),l=!1}return l}finally{u=null,p=s,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,C=!1,k=null,A=-1,E=5,T=-1;function O(){return!(t.unstable_now()-T<E)}function P(){if(null!==k){var e=t.unstable_now();T=e;var i=!0;try{i=k(!0,e)}finally{i?w():(C=!1,k=null)}}else C=!1}if("function"===typeof b)w=function(){b(P)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,I=M.port2;M.port1.onmessage=P,w=function(){I.postMessage(null)}}else w=function(){v(P,0)};function R(e){k=e,C||(C=!0,w())}function D(e,i){A=v((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||g||(f=!0,R(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,i(h,e),null===n(c)&&e===n(h)&&(m?(y(A),A=-1):m=!0,D(x,s-a))):(e.sortIndex=o,i(c,e),f||g||(f=!0,R(S))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},78853:(e,t,i)=>{"use strict";e.exports=i(27234)},57504:(e,t,i)=>{"use strict";i.d(t,{A:()=>_});var n=i(58168),r=i(77387),s=i(28943),a=i(4173),o=i.n(a),l=i(71837),c=i(67720),h=i(93090),d=i.n(h),u=i(65043),p=i(57233),g=i(12460),f=i(97950),m=i(76897),v=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleRef=function(e){(0,l.G)(t.props.innerRef,e)},t}(0,r.A)(t,e);var i=t.prototype;return i.componentDidMount=function(){(0,s.A)(this.props,"onMount",null,this.props)},i.componentWillUnmount=function(){(0,s.A)(this.props,"onUnmount",null,this.props)},i.render=function(){if(!(0,m.A)())return null;var e=this.props,t=e.children,i=e.mountNode,n=void 0===i?document.body:i;return(0,f.createPortal)(u.createElement(c.o,{innerRef:this.handleRef},t),n)},t}(u.Component);v.handledProps=["children","innerRef","mountNode","onMount","onUnmount"],v.propTypes={};const y=v;var b=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).contentRef=u.createRef(),t.triggerRef=u.createRef(),t.latestDocumentMouseDownEvent=null,t.handleDocumentMouseDown=function(e){t.latestDocumentMouseDownEvent=e},t.handleDocumentClick=function(e){var i=t.props.closeOnDocumentClick,n=t.latestDocumentMouseDownEvent;t.latestDocumentMouseDownEvent=null,!t.contentRef.current||(0,p.A)(t.triggerRef.current,e)||n&&(0,p.A)(t.contentRef.current,n)||(0,p.A)(t.contentRef.current,e)||i&&t.close(e)},t.handleEscape=function(e){t.props.closeOnEscape&&d().getCode(e)===d().Escape&&t.close(e)},t.handlePortalMouseLeave=function(e){var i=t.props,n=i.closeOnPortalMouseLeave,r=i.mouseLeaveDelay;n&&e.target===t.contentRef.current&&(t.mouseLeaveTimer=t.closeWithTimeout(e,r))},t.handlePortalMouseEnter=function(){t.props.closeOnPortalMouseLeave&&clearTimeout(t.mouseLeaveTimer)},t.handleTriggerBlur=function(e){for(var i=t.props,n=i.trigger,r=i.closeOnTriggerBlur,a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];s.A.apply(void 0,[n,"props.onBlur",e].concat(o));var c=e.relatedTarget||document.activeElement,h=(0,s.A)(t.contentRef.current,"contains",c);r&&!h&&t.close(e)},t.handleTriggerClick=function(e){for(var i=t.props,n=i.trigger,r=i.closeOnTriggerClick,a=i.openOnTriggerClick,o=t.state.open,l=arguments.length,c=new Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=arguments[h];s.A.apply(void 0,[n,"props.onClick",e].concat(c)),o&&r?t.close(e):!o&&a&&t.open(e)},t.handleTriggerFocus=function(e){for(var i=t.props,n=i.trigger,r=i.openOnTriggerFocus,a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];s.A.apply(void 0,[n,"props.onFocus",e].concat(o)),r&&t.open(e)},t.handleTriggerMouseLeave=function(e){clearTimeout(t.mouseEnterTimer);for(var i=t.props,n=i.trigger,r=i.closeOnTriggerMouseLeave,a=i.mouseLeaveDelay,o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];s.A.apply(void 0,[n,"props.onMouseLeave",e].concat(l)),r&&(t.mouseLeaveTimer=t.closeWithTimeout(e,a))},t.handleTriggerMouseEnter=function(e){clearTimeout(t.mouseLeaveTimer);for(var i=t.props,n=i.trigger,r=i.mouseEnterDelay,a=i.openOnTriggerMouseEnter,o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];s.A.apply(void 0,[n,"props.onMouseEnter",e].concat(l)),a&&(t.mouseEnterTimer=t.openWithTimeout(e,r))},t.open=function(e){(0,s.A)(t.props,"onOpen",e,(0,n.A)({},t.props,{open:!0})),t.setState({open:!0})},t.openWithTimeout=function(e,i){var r=(0,n.A)({},e);return setTimeout((function(){return t.open(r)}),i||0)},t.close=function(e){t.setState({open:!1}),(0,s.A)(t.props,"onClose",e,(0,n.A)({},t.props,{open:!1}))},t.closeWithTimeout=function(e,i){var r=(0,n.A)({},e);return setTimeout((function(){return t.close(r)}),i||0)},t.handleMount=function(){(0,s.A)(t.props,"onMount",null,t.props)},t.handleUnmount=function(){(0,s.A)(t.props,"onUnmount",null,t.props)},t.handleTriggerRef=function(e){t.triggerRef.current=e,(0,l.G)(t.props.triggerRef,e)},t}(0,r.A)(t,e);var i=t.prototype;return i.componentWillUnmount=function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)},i.render=function(){var e=this.props,t=e.children,i=e.eventPool,n=e.mountNode,r=e.trigger,s=this.state.open;return u.createElement(u.Fragment,null,s&&u.createElement(u.Fragment,null,u.createElement(y,{innerRef:this.contentRef,mountNode:n,onMount:this.handleMount,onUnmount:this.handleUnmount},t),u.createElement(o(),{name:"mouseleave",on:this.handlePortalMouseLeave,pool:i,target:this.contentRef}),u.createElement(o(),{name:"mouseenter",on:this.handlePortalMouseEnter,pool:i,target:this.contentRef}),u.createElement(o(),{name:"mousedown",on:this.handleDocumentMouseDown,pool:i}),u.createElement(o(),{name:"click",on:this.handleDocumentClick,pool:i}),u.createElement(o(),{name:"keydown",on:this.handleEscape,pool:i})),r&&u.createElement(c.o,{innerRef:this.handleTriggerRef},u.cloneElement(r,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))},t}(g.A);b.handledProps=["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"],b.propTypes={},b.defaultProps={closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0},b.autoControlledProps=["open"],b.Inner=y;const _=b},48146:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var n=i(58168),r=i(43024),s=i(65043),a=i(83727),o=i(38214),l=i(21653),c=i(87061),h=i(19127),d=i(66565),u=i(72883);function p(e){var t=e.children,i=e.className,a=e.content,h=(0,r.default)("sub header",i),d=(0,o.A)(p,e),u=(0,l.A)(p,e);return s.createElement(u,(0,n.A)({},d,{className:h}),c.gD(t)?a:t)}p.handledProps=["as","children","className","content"],p.propTypes={},p.create=(0,u.Iy)(p,(function(e){return{content:e}}));const g=p;function f(e){var t=e.children,i=e.className,a=e.content,h=(0,r.default)("content",i),d=(0,o.A)(f,e),u=(0,l.A)(f,e);return s.createElement(u,(0,n.A)({},d,{className:h}),c.gD(t)?a:t)}f.handledProps=["as","children","className","content"],f.propTypes={};const m=f;function v(e){var t=e.attached,i=e.block,u=e.children,p=e.className,f=e.color,y=e.content,b=e.disabled,_=e.dividing,x=e.floated,S=e.icon,w=e.image,C=e.inverted,k=e.size,A=e.sub,E=e.subheader,T=e.textAlign,O=(0,r.default)("ui",f,k,(0,a.b5)(i,"block"),(0,a.b5)(b,"disabled"),(0,a.b5)(_,"dividing"),(0,a.xm)(x,"floated"),(0,a.b5)(!0===S,"icon"),(0,a.b5)(!0===w,"image"),(0,a.b5)(C,"inverted"),(0,a.b5)(A,"sub"),(0,a.vQ)(t,"attached"),(0,a.T9)(T),"header",p),P=(0,o.A)(v,e),M=(0,l.A)(v,e);if(!c.gD(u))return s.createElement(M,(0,n.A)({},P,{className:O}),u);var I=h.A.create(S,{autoGenerateKey:!1}),R=d.A.create(w,{autoGenerateKey:!1}),D=g.create(E,{autoGenerateKey:!1});return I||R?s.createElement(M,(0,n.A)({},P,{className:O}),I||R,(y||D)&&s.createElement(m,null,y,D)):s.createElement(M,(0,n.A)({},P,{className:O}),y,D)}v.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],v.propTypes={},v.Content=m,v.Subheader=g;const y=v},19127:(e,t,i)=>{"use strict";i.d(t,{A:()=>v});var n=i(58168),r=i(77387),s=i(28943),a=i(61176),o=i(43024),l=i(65043),c=i(83727),h=i(38214),d=i(21653),u=i(72883),p=i(87061);function g(e){var t=e.children,i=e.className,r=e.content,s=e.size,a=(0,o.default)(s,"icons",i),c=(0,h.A)(g,e),u=(0,d.A)(g,e);return l.createElement(u,(0,n.A)({},c,{className:a}),p.gD(t)?r:t)}g.handledProps=["as","children","className","content","size"],g.propTypes={},g.defaultProps={as:"i"};const f=g;var m=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleClick=function(e){t.props.disabled?e.preventDefault():(0,s.A)(t.props,"onClick",e,t.props)},t}(0,r.A)(t,e);var i=t.prototype;return i.getIconAriaOptions=function(){var e={},t=this.props,i=t["aria-label"],n=t["aria-hidden"];return(0,a.A)(i)?e["aria-hidden"]="true":e["aria-label"]=i,(0,a.A)(n)||(e["aria-hidden"]=n),e},i.render=function(){var e=this.props,i=e.bordered,r=e.circular,s=e.className,a=e.color,u=e.corner,p=e.disabled,g=e.fitted,f=e.flipped,m=e.inverted,v=e.link,y=e.loading,b=e.name,_=e.rotated,x=e.size,S=(0,o.default)(a,b,x,(0,c.b5)(i,"bordered"),(0,c.b5)(r,"circular"),(0,c.b5)(p,"disabled"),(0,c.b5)(g,"fitted"),(0,c.b5)(m,"inverted"),(0,c.b5)(v,"link"),(0,c.b5)(y,"loading"),(0,c.vQ)(u,"corner"),(0,c.xm)(f,"flipped"),(0,c.xm)(_,"rotated"),"icon",s),w=(0,h.A)(t,this.props),C=(0,d.A)(t,this.props),k=this.getIconAriaOptions();return l.createElement(C,(0,n.A)({},w,k,{className:S,onClick:this.handleClick}))},t}(l.PureComponent);m.handledProps=["aria-hidden","aria-label","as","bordered","circular","className","color","corner","disabled","fitted","flipped","inverted","link","loading","name","rotated","size"],m.propTypes={},m.defaultProps={as:"i"},m.Group=f,m.create=(0,u.Iy)(m,(function(e){return{name:e}}));const v=m},66565:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var n=i(58168),r=i(61176),s=i(43024),a=i(65043),o=i(83727),l=i(38214),c=i(35987),h=i(21653),d=i(87061),u=i(72883),p=i(87328),g=i(74074);function f(e){var t=e.children,i=e.className,r=e.content,o=e.size,c=(0,s.default)("ui",o,i,"images"),u=(0,l.A)(f,e),p=(0,h.A)(f,e);return a.createElement(p,(0,n.A)({},u,{className:c}),d.gD(t)?r:t)}f.handledProps=["as","children","className","content","size"],f.propTypes={};const m=f;function v(e){var t=e.avatar,i=e.bordered,u=e.centered,f=e.children,m=e.circular,y=e.className,b=e.content,_=e.dimmer,x=e.disabled,S=e.floated,w=e.fluid,C=e.hidden,k=e.href,A=e.inline,E=e.label,T=e.rounded,O=e.size,P=e.spaced,M=e.verticalAlign,I=e.wrapped,R=e.ui,D=(0,s.default)((0,o.b5)(R,"ui"),O,(0,o.b5)(t,"avatar"),(0,o.b5)(i,"bordered"),(0,o.b5)(m,"circular"),(0,o.b5)(u,"centered"),(0,o.b5)(x,"disabled"),(0,o.b5)(w,"fluid"),(0,o.b5)(C,"hidden"),(0,o.b5)(A,"inline"),(0,o.b5)(T,"rounded"),(0,o.vQ)(P,"spaced"),(0,o.xm)(S,"floated"),(0,o.mV)(M,"aligned"),"image",y),L=(0,l.A)(v,e),j=(0,c.yT)(L,{htmlProps:c.lG}),F=j[0],B=j[1],N=(0,h.A)(v,e,(function(){if(!(0,r.A)(_)||!(0,r.A)(E)||!(0,r.A)(I)||!d.gD(f))return"div"}));return d.gD(f)?d.gD(b)?"img"===N?a.createElement(N,(0,n.A)({},B,F,{className:D})):a.createElement(N,(0,n.A)({},B,{className:D,href:k}),p.A.create(_,{autoGenerateKey:!1}),g.A.create(E,{autoGenerateKey:!1}),a.createElement("img",F)):a.createElement(N,(0,n.A)({},L,{className:D}),b):a.createElement(N,(0,n.A)({},L,{className:D}),f)}v.handledProps=["as","avatar","bordered","centered","children","circular","className","content","dimmer","disabled","floated","fluid","hidden","href","inline","label","rounded","size","spaced","ui","verticalAlign","wrapped"],v.Group=m,v.propTypes={},v.defaultProps={as:"img",ui:!0},v.create=(0,u.Iy)(v,(function(e){return{src:e}}));const y=v},74074:(e,t,i)=>{"use strict";i.d(t,{A:()=>_});var n=i(58168),r=i(77387),s=i(6772),a=i(28943),o=i(43024),l=i(65043),c=i(83727),h=i(38214),d=i(21653),u=i(87061),p=i(72883),g=i(19127),f=i(66565);function m(e){var t=e.children,i=e.className,r=e.content,s=(0,o.default)("detail",i),a=(0,h.A)(m,e),c=(0,d.A)(m,e);return l.createElement(c,(0,n.A)({},a,{className:s}),u.gD(t)?r:t)}m.handledProps=["as","children","className","content"],m.propTypes={},m.create=(0,p.Iy)(m,(function(e){return{content:e}}));const v=m;function y(e){var t=e.children,i=e.circular,r=e.className,s=e.color,a=e.content,p=e.size,g=e.tag,f=(0,o.default)("ui",s,p,(0,c.b5)(i,"circular"),(0,c.b5)(g,"tag"),"labels",r),m=(0,h.A)(y,e),v=(0,d.A)(y,e);return l.createElement(v,(0,n.A)({},m,{className:f}),u.gD(t)?a:t)}y.handledProps=["as","children","circular","className","color","content","size","tag"],y.propTypes={};const b=y;var _=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleClick=function(e){var i=t.props.onClick;i&&i(e,t.props)},t.handleIconOverrides=function(e){return{onClick:function(i){(0,a.A)(e,"onClick",i),(0,a.A)(t.props,"onRemove",i,t.props)}}},t}return(0,r.A)(t,e),t.prototype.render=function(){var e=this.props,i=e.active,r=e.attached,a=e.basic,p=e.children,m=e.circular,y=e.className,b=e.color,_=e.content,x=e.corner,S=e.detail,w=e.empty,C=e.floating,k=e.horizontal,A=e.icon,E=e.image,T=e.onRemove,O=e.pointing,P=e.prompt,M=e.removeIcon,I=e.ribbon,R=e.size,D=e.tag,L=(!0===O?"pointing":("left"===O||"right"===O)&&O+" pointing")||("above"===O||"below"===O)&&"pointing "+O,j=(0,o.default)("ui",b,L,R,(0,c.b5)(i,"active"),(0,c.b5)(a,"basic"),(0,c.b5)(m,"circular"),(0,c.b5)(w,"empty"),(0,c.b5)(C,"floating"),(0,c.b5)(k,"horizontal"),(0,c.b5)(!0===E,"image"),(0,c.b5)(P,"prompt"),(0,c.b5)(D,"tag"),(0,c.vQ)(x,"corner"),(0,c.vQ)(I,"ribbon"),(0,c.xm)(r,"attached"),"label",y),F=(0,h.A)(t,this.props),B=(0,d.A)(t,this.props);if(!u.gD(p))return l.createElement(B,(0,n.A)({},F,{className:j,onClick:this.handleClick}),p);var N=(0,s.A)(M)?"delete":M;return l.createElement(B,(0,n.A)({className:j,onClick:this.handleClick},F),g.A.create(A,{autoGenerateKey:!1}),"boolean"!==typeof E&&f.A.create(E,{autoGenerateKey:!1}),_,v.create(S,{autoGenerateKey:!1}),T&&g.A.create(N,{autoGenerateKey:!1,overrideProps:this.handleIconOverrides}))},t}(l.Component);_.handledProps=["active","as","attached","basic","children","circular","className","color","content","corner","detail","empty","floating","horizontal","icon","image","onClick","onRemove","pointing","prompt","removeIcon","ribbon","size","tag"],_.propTypes={},_.Detail=v,_.Group=b,_.create=(0,p.Iy)(_,(function(e){return{content:e}}))},40812:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var n=i(58168),r=i(43024),s=i(65043),a=i(83727),o=i(38214),l=i(21653),c=i(87061);function h(e){var t=e.children,i=e.className,d=e.compact,u=e.content,p=e.horizontal,g=e.piled,f=e.raised,m=e.size,v=e.stacked,y=(0,r.default)("ui",m,(0,a.b5)(d,"compact"),(0,a.b5)(p,"horizontal"),(0,a.b5)(g,"piled"),(0,a.b5)(f,"raised"),(0,a.b5)(v,"stacked"),"segments",i),b=(0,o.A)(h,e),_=(0,l.A)(h,e);return s.createElement(_,(0,n.A)({},b,{className:y}),c.gD(t)?u:t)}h.handledProps=["as","children","className","compact","content","horizontal","piled","raised","size","stacked"],h.propTypes={};const d=h;function u(e){var t=e.children,i=e.className,a=e.content,h=(0,r.default)("inline",i),d=(0,o.A)(u,e),p=(0,l.A)(u,e);return s.createElement(p,(0,n.A)({},d,{className:h}),c.gD(t)?a:t)}u.handledProps=["as","children","className","content"],u.propTypes={};const p=u;function g(e){var t=e.attached,i=e.basic,h=e.children,d=e.circular,u=e.className,p=e.clearing,f=e.color,m=e.compact,v=e.content,y=e.disabled,b=e.floated,_=e.inverted,x=e.loading,S=e.placeholder,w=e.padded,C=e.piled,k=e.raised,A=e.secondary,E=e.size,T=e.stacked,O=e.tertiary,P=e.textAlign,M=e.vertical,I=(0,r.default)("ui",f,E,(0,a.b5)(i,"basic"),(0,a.b5)(d,"circular"),(0,a.b5)(p,"clearing"),(0,a.b5)(m,"compact"),(0,a.b5)(y,"disabled"),(0,a.b5)(_,"inverted"),(0,a.b5)(x,"loading"),(0,a.b5)(S,"placeholder"),(0,a.b5)(C,"piled"),(0,a.b5)(k,"raised"),(0,a.b5)(A,"secondary"),(0,a.b5)(T,"stacked"),(0,a.b5)(O,"tertiary"),(0,a.b5)(M,"vertical"),(0,a.vQ)(t,"attached"),(0,a.vQ)(w,"padded"),(0,a.T9)(P),(0,a.xm)(b,"floated"),"segment",u),R=(0,o.A)(g,e),D=(0,l.A)(g,e);return s.createElement(D,(0,n.A)({},R,{className:I}),c.gD(h)?v:h)}g.handledProps=["as","attached","basic","children","circular","className","clearing","color","compact","content","disabled","floated","inverted","loading","padded","piled","placeholder","raised","secondary","size","stacked","tertiary","textAlign","vertical"],g.Group=d,g.Inline=p,g.propTypes={};const f=g},12460:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var n=i(58168),r=i(9417),s=i(77387),a=i(6772),o=i(28943),l=i(65043),c=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];var l=(t=e.call.apply(e,[this].concat(s))||this).constructor,c=l.autoControlledProps,h=l.getAutoControlledStateFromProps,d=(0,o.A)((0,r.A)(t),"getInitialAutoControlledState",t.props)||{},u=c.reduce((function(e,i){return e[i]=function(e,t,i,n){void 0===n&&(n=!1);var r,s=t[e];if(void 0!==s)return s;if(n){var a=t[(r=e,"default"+(r[0].toUpperCase()+r.slice(1)))];if(void 0!==a)return a;if(i){var o=i[e];if(void 0!==o)return o}}return"checked"!==e&&("value"===e?t.multiple?[]:"":void 0)}(i,t.props,d,!0),e}),{});return t.state=(0,n.A)({},d,u,{autoControlledProps:c,getAutoControlledStateFromProps:h}),t}return(0,s.A)(t,e),t.getDerivedStateFromProps=function(e,t){var i=t.autoControlledProps,r=t.getAutoControlledStateFromProps,s=i.reduce((function(t,i){return!(0,a.A)(e[i])&&(t[i]=e[i]),t}),{});if(r){var o=r(e,(0,n.A)({},t,s),t);return(0,n.A)({},s,o)}return s},t.getAutoControlledStateFromProps=function(){return null},t}(l.Component)},87061:(e,t,i)=>{"use strict";i.d(t,{gD:()=>a,y:()=>s});var n=i(44953),r=i(65043),s=function(e,t){return(0,n.A)(r.Children.toArray(e),{type:t})},a=function(e){return null===e||void 0===e||Array.isArray(e)&&0===e.length}},83727:(e,t,i)=>{"use strict";i.d(t,{b5:()=>s,vQ:()=>o,FY:()=>l,T9:()=>c,xm:()=>a,mV:()=>h,T5:()=>d});var n={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"};function r(e){var t=typeof e;return"string"===t||"number"===t?n[e]||e:""}var s=function(e,t){return e&&t},a=function(e,t){return e&&!0!==e&&e+" "+t},o=function(e,t){return e&&(!0===e?t:e+" "+t)},l=function(e,t){return e&&!0!==e?e.replace("large screen","large-screen").replace(/ vertically/g,"-vertically").split(" ").map((function(e){return e.replace("-"," ")+" "+t})).join(" "):null},c=function(e){return"justified"===e?"justified":a(e,"aligned")},h=function(e){return a(e,"aligned")},d=function(e,t,i){if(void 0===t&&(t=""),void 0===i&&(i=!1),i&&"equal"===e)return"equal width";var n=typeof e;return"string"!==n&&"number"!==n||!t?r(e):r(e)+" "+t}},57233:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var n=Math.max,r=Math.min;const s=function(e,t,i){return e>=r(t,i)&&e<n(t,i)};var a=i(1905),o=i(60617);const l=function(e,t,i){return t=(0,a.A)(t),void 0===i?(i=t,t=0):i=(0,a.A)(i),e=(0,o.A)(e),s(e,t,i)};const c=function(e){return e&&e.length?e[0]:void 0};var h=i(28943),d=i(61176),u=i(44953);const p=function(e,t){if((0,u.A)([t,e],d.A))return!1;if(t.target&&((0,h.A)(t.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return(0,h.A)(t.target,"removeAttribute","data-suir-click-target"),e.contains(t.target);var i=t.clientX,n=t.clientY;if((0,u.A)([i,n],d.A))return!1;var r=e.getClientRects();if(!e.offsetWidth||!e.offsetHeight||!r||!r.length)return!1;var s=c(r),a=s.top,o=s.bottom,p=s.left,g=s.right;return!(0,u.A)([a,o,p,g],d.A)&&(l(n,a,o+.001)&&l(i,p,g+.001))}},72883:(e,t,i)=>{"use strict";i.d(t,{uG:()=>b,SH:()=>_,_L:()=>x,Qf:()=>v,Iy:()=>y});var n=i(58168),r=i(51837);const s=function(e){return e&&e.length?(0,r.A)(e):[]};var a=i(45386),o=i(29236),l=i(64067),c=i(14802),h=i(53239);const d=function(e){return"number"==typeof e||(0,h.A)(e)&&"[object Number]"==(0,c.A)(e)};var u=i(93678);const p=function(e){return!0===e||!1===e||(0,h.A)(e)&&"[object Boolean]"==(0,c.A)(e)};var g=i(61176),f=i(43024),m=i(65043);function v(e,t,i,r){if(void 0===r&&(r={}),"function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthand() Component must be a string or function.");if((0,g.A)(i)||p(i))return null;var c=(0,u.A)(i),h=d(i),v=(0,l.A)(i),y=m.isValidElement(i),b=(0,o.A)(i),_=c||h||(0,a.A)(i);if(!v&&!y&&!b&&!_)return null;var x=r.defaultProps,S=void 0===x?{}:x,w=y&&i.props||b&&i||_&&t(i),C=r.overrideProps,k=void 0===C?{}:C;k=(0,l.A)(k)?k((0,n.A)({},S,w)):k;var A=(0,n.A)({},S,w,k);if(S.className||k.className||w.className){var E=(0,f.default)(S.className,k.className,w.className);A.className=s(E.split(" ")).join(" ")}if((S.style||k.style||w.style)&&(A.style=(0,n.A)({},S.style,w.style,k.style)),(0,g.A)(A.key)){var T=A.childKey,O=r.autoGenerateKey,P=void 0===O||O;(0,g.A)(T)?P&&(c||h)&&(A.key=i):(A.key="function"===typeof T?T(A):T,delete A.childKey)}return y?m.cloneElement(i,A):"function"===typeof A.children?A.children(e,(0,n.A)({},A,{children:void 0})):_||b?m.createElement(e,A):v?i(e,A,A.children):void 0}function y(e,t){if("function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthandFactory() Component must be a string or function.");return function(i,n){return v(e,t,i,n)}}var b=y("input",(function(e){return{type:e}})),_=y("label",(function(e){return{children:e}})),x=y("p",(function(e){return{children:e}}))},21653:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t,i){var n=e.defaultProps,r=void 0===n?{}:n;if(t.as&&t.as!==r.as)return t.as;if(i){var s=i();if(s)return s}return t.href?"a":r.as||"div"}},38214:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t){var i=e.handledProps,n=void 0===i?[]:i;return Object.keys(t).reduce((function(e,i){return"childKey"===i||-1===n.indexOf(i)&&(e[i]=t[i]),e}),{})}},35987:(e,t,i)=>{"use strict";i.d(t,{lG:()=>u,ui:()=>h,yT:()=>p});var n=i(70884);const r=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e};var s=i(44973),a=i(42041);const o=function(e){return"function"==typeof e?e:a.A};var l=i(45386);const c=function(e,t){return((0,l.A)(e)?r:s.A)(e,o(t))};var h=["selected","defaultValue","defaultChecked","accept","autoCapitalize","autoComplete","autoCorrect","autoFocus","checked","disabled","enterKeyHint","form","id","inputMode","lang","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","readOnly","required","step","title","type","value"],d=[].concat(h,["onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onClick","onContextMenu","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"]),u=["alt","height","src","srcSet","width","loading"],p=function(e,t){void 0===t&&(t={});var i=t,r=i.htmlProps,s=void 0===r?d:r,a=i.includeAria,o=void 0===a||a,l={},h={};return c(e,(function(e,t){var i=o&&(/^aria-.*$/.test(t)||"role"===t);((0,n.A)(s,t)||i?l:h)[t]=e})),[l,h]}},76897:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(61176),r="object"===typeof document&&null!==document,s="object"===typeof window&&null!==window&&window.self===window;const a=function e(){return(0,n.A)(e.override)?r&&s:e.override}},87328:(e,t,i)=>{"use strict";i.d(t,{A:()=>_});var n=i(58168),r=i(77387),s=i(65043),a=i(76897),o=i(38214),l=i(72883),c=i(57504),h=i(43024),d=i(83727),u=i(21653),p=i(87061);function g(e){var t=e.blurring,i=e.className,r=e.children,a=e.content,l=e.dimmed,c=(0,h.default)((0,d.b5)(t,"blurring"),(0,d.b5)(l,"dimmed"),"dimmable",i),f=(0,o.A)(g,e),m=(0,u.A)(g,e);return s.createElement(m,(0,n.A)({},f,{className:c}),p.gD(r)?a:r)}g.handledProps=["as","blurring","children","className","content","dimmed"],g.propTypes={};const f=g;var m=i(28943),v=i(67720),y=i(57233),b=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).containerRef=(0,s.createRef)(),t.contentRef=(0,s.createRef)(),t.handleClick=function(e){var i=t.contentRef.current;(0,m.A)(t.props,"onClick",e,t.props),i&&i!==e.target&&(0,y.A)(i,e)||(0,m.A)(t.props,"onClickOutside",e,t.props)},t}(0,r.A)(t,e);var i=t.prototype;return i.componentDidMount=function(){var e=this.props.active;this.toggleStyles(e)},i.componentDidUpdate=function(e){var t=this.props.active;e.active!==t&&this.toggleStyles(t)},i.toggleStyles=function(e){var t=this.containerRef.current;t&&t.style&&(e?t.style.setProperty("display","flex","important"):t.style.removeProperty("display"))},i.render=function(){var e=this.props,i=e.active,r=e.children,a=e.className,l=e.content,c=e.disabled,g=e.inverted,f=e.page,m=e.simple,y=e.verticalAlign,b=(0,h.default)("ui",(0,d.b5)(i,"active transition visible"),(0,d.b5)(c,"disabled"),(0,d.b5)(g,"inverted"),(0,d.b5)(f,"page"),(0,d.b5)(m,"simple"),(0,d.mV)(y),"dimmer",a),_=(0,o.A)(t,this.props),x=(0,u.A)(t,this.props),S=p.gD(r)?l:r;return s.createElement(v.o,{innerRef:this.containerRef},s.createElement(x,(0,n.A)({},_,{className:b,onClick:this.handleClick}),S&&s.createElement("div",{className:"content",ref:this.contentRef},S)))},t}(s.Component);b.handledProps=["active","as","children","className","content","disabled","inverted","onClick","onClickOutside","page","simple","verticalAlign"],b.propTypes={};var _=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handlePortalMount=function(){(0,a.A)()&&(document.body.classList.add("dimmed"),document.body.classList.add("dimmable"))},t.handlePortalUnmount=function(){(0,a.A)()&&(document.body.classList.remove("dimmed"),document.body.classList.remove("dimmable"))},t}return(0,r.A)(t,e),t.prototype.render=function(){var e=this.props,i=e.active,r=e.page,a=(0,o.A)(t,this.props);return r?s.createElement(c.A,{closeOnEscape:!1,closeOnDocumentClick:!1,onMount:this.handlePortalMount,onUnmount:this.handlePortalUnmount,open:i,openOnTriggerClick:!1},s.createElement(b,(0,n.A)({},a,{active:i,page:r}))):s.createElement(b,(0,n.A)({},a,{active:i,page:r}))},t}(s.Component);_.handledProps=["active","page"],_.propTypes={},_.Dimmable=f,_.Inner=b,_.create=(0,l.Iy)(_,(function(e){return{content:e}}))},17324:e=>{e.exports=function(e,t,i,n){var r=i?i.call(n,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var c=s[l];if(!o(c))return!1;var h=e[c],d=t[c];if(!1===(r=i?i.call(n,h,d,c):void 0)||void 0===r&&h!==d)return!1}return!0}},23785:(e,t,i)=>{var n=i(78382);function r(t,i){var n=t.geometry,r=n.type;if("LineString"===r)n.coordinates=e.exports.simplify(n.coordinates,i);else if("Polygon"===r||"MultiLineString"===r)for(var s=0;s<n.coordinates.length;s++)n.coordinates[s]=e.exports.simplify(n.coordinates[s],i);else if("MultiPolygon"===r)for(var a=0;a<n.coordinates.length;a++)for(var o=0;o<n.coordinates[a].length;o++)n.coordinates[a][o]=e.exports.simplify(n.coordinates[a][o],i);return t}e.exports=function(e,t,i){return i||(e=JSON.parse(JSON.stringify(e))),e.features?function(e,t){for(var i=0;i<e.features.length;i++)e.features[i]=r(e.features[i],t);return e}(e,t):e.type&&"Feature"===e.type?r(e,t):new Error("FeatureCollection or individual Feature required")},e.exports.simplify=function(e,t){return n(e,t)}},78382:(e,t,i)=>{var n=i(10590),r=function(e,t){for(var i=0,s=0,a=1;a<=e.length-2;a++){var o=new n(e[0],e[e.length-1]).perpendicularDistance(e[a]);o>i&&(s=a,i=o)}if(i>t)var l=r(e.slice(0,s),t),c=r(e.slice(s,e.length),t),h=l.concat(c);else h=e.length>1?[e[0],e[e.length-1]]:[e[0]];return h};e.exports=r},10590:e=>{var t=function(e,t){this.p1=e,this.p2=t};t.prototype.rise=function(){return this.p2[1]-this.p1[1]},t.prototype.run=function(){return this.p2[0]-this.p1[0]},t.prototype.slope=function(){return this.rise()/this.run()},t.prototype.yIntercept=function(){return this.p1[1]-this.p1[0]*this.slope(this.p1,this.p2)},t.prototype.isVertical=function(){return!isFinite(this.slope())},t.prototype.isHorizontal=function(){return this.p1[1]==this.p2[1]},t.prototype._perpendicularDistanceHorizontal=function(e){return Math.abs(this.p1[1]-e[1])},t.prototype._perpendicularDistanceVertical=function(e){return Math.abs(this.p1[0]-e[0])},t.prototype._perpendicularDistanceHasSlope=function(e){var t=this.slope(),i=this.yIntercept();return Math.abs(t*e[0]-e[1]+i)/Math.sqrt(Math.pow(t,2)+1)},t.prototype.perpendicularDistance=function(e){return this.isVertical()?this._perpendicularDistanceVertical(e):this.isHorizontal()?this._perpendicularDistanceHorizontal(e):this._perpendicularDistanceHasSlope(e)},e.exports=t},24994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},73738:e=>{function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},98139:(e,t)=>{var i;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=a(e,s(i)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var i in e)n.call(e,i)&&e[i]&&(t=a(t,i));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(i=function(){return r}.apply(t,[]))||(e.exports=i)}()},8566:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,n,r,s,a){var o=new Date(0);return o.setUTCFullYear(e,t,i),o.setUTCHours(n,r,s,a),o},e.exports=t.default},37107:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var n=function(e,t,i){if(i&&!i.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(i?[i.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,i.timeZone,i.locale);return n.formatToParts?function(e,t){for(var i=e.formatToParts(t),n=i.length-1;n>=0;--n)if("timeZoneName"===i[n].type)return i[n].value}(n,t):function(e,t){var i=e.format(t).replace(/\u200E/g,""),n=/ [\w-+ ]+$/.exec(i);return n?n[0].substr(1):""}(n,t)},e.exports=t.default},25332:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var n,s,u;if(!e)return 0;if(n=l.timezoneZ.exec(e))return 0;if(n=l.timezoneHH.exec(e))return h(u=parseInt(n[1],10))?-u*a:NaN;if(n=l.timezoneHHMM.exec(e)){u=parseInt(n[1],10);var p=parseInt(n[2],10);return h(u,p)?(s=Math.abs(u)*a+p*o,u>0?-s:s):NaN}if(function(e){if(d[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),d[e]=!0,!0}catch(t){return!1}}(e)){t=new Date(t||Date.now());var g=i?t:function(e){return(0,r.default)(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),f=c(g,e),m=i?f:function(e,t,i){var n=e.getTime(),r=n-t,s=c(new Date(r),i);if(t===s)return t;r-=s-t;var a=c(new Date(r),i);if(s===a)return s;return Math.max(s,a)}(t,f,e);return-m}return NaN};var n=s(i(37157)),r=s(i(8566));function s(e){return e&&e.__esModule?e:{default:e}}var a=36e5,o=6e4,l={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function c(e,t){var i=(0,n.default)(e,t),s=(0,r.default)(i[0],i[1]-1,i[2],i[3]%24,i[4],i[5],0).getTime(),a=e.getTime(),o=a%1e3;return s-(a-=o>=0?o:1e3+o)}function h(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var d={};e.exports=t.default},46178:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;t.default=i,e.exports=t.default},37157:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=function(e){if(!n[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),i="06/25/2014, 00:00:00"===t||"\u200e06\u200e/\u200e25\u200e/\u200e2014\u200e \u200e00\u200e:\u200e00\u200e:\u200e00"===t;n[e]=i?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return n[e]}(t);return r.formatToParts?function(e,t){try{for(var n=e.formatToParts(t),r=[],s=0;s<n.length;s++){var a=i[n[s].type];a>=0&&(r[a]=parseInt(n[s].value,10))}return r}catch(o){if(o instanceof RangeError)return[NaN];throw o}}(r,e):function(e,t){var i=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i);return[n[3],n[1],n[2],n[4],n[5],n[6]]}(r,e)};var i={year:0,month:1,day:2,hour:3,minute:4,second:5};var n={};e.exports=t.default},22808:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i(37107)),r=s(i(25332));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var i=e?(0,r.default)(e,t,!0)/6e4:t.getTimezoneOffset();if(Number.isNaN(i))throw new RangeError("Invalid time zone specified: "+e);return i}function o(e,t){for(var i=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return i+n}function l(e,t){var i=t||"",n=e>0?"-":"+",r=Math.abs(e);return n+o(Math.floor(r/60),2)+i+o(Math.floor(r%60),2)}function c(e,t){return e%60===0?(e>0?"-":"+")+o(Math.abs(e)/60,2):l(e,t)}var h={X:function(e,t,i,n){var r=a(n.timeZone,n._originalDate||e);if(0===r)return"Z";switch(t){case"X":return c(r);case"XXXX":case"XX":return l(r);default:return l(r,":")}},x:function(e,t,i,n){var r=a(n.timeZone,n._originalDate||e);switch(t){case"x":return c(r);case"xxxx":case"xx":return l(r);default:return l(r,":")}},O:function(e,t,i,n){var r=a(n.timeZone,n._originalDate||e);switch(t){case"O":case"OO":case"OOO":return"GMT"+function(e,t){var i=e>0?"-":"+",n=Math.abs(e),r=Math.floor(n/60),s=n%60;if(0===s)return i+String(r);var a=t||"";return i+String(r)+a+o(s,2)}(r,":");default:return"GMT"+l(r,":")}},z:function(e,t,i,r){var s=r._originalDate||e;switch(t){case"z":case"zz":case"zzz":return(0,n.default)("short",s,r);default:return(0,n.default)("long",s,r)}}};t.default=h,e.exports=t.default},89894:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var a=String(t),l=i||{},c=a.match(o);if(c){var h=(0,s.default)(e,l);a=c.reduce((function(e,t){if("'"===t[0])return e;var i=e.indexOf(t),n="'"===e[i-1],s=e.replace(t,"'"+r.default[t[0]](h,t,null,l)+"'");return n?s.substring(0,i-1)+s.substring(i+1):s}),a)}return(0,n.default)(e,a,l)};var n=a(i(36422)),r=a(i(22808)),s=a(i(6776));function a(e){return e&&e.__esModule?e:{default:e}}var o=/([xXOz]+)|''|'(''|[^'])+('|$)/g;e.exports=t.default},37318:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,a){var o=(0,n.default)(a);return o.timeZone=t,(0,r.default)((0,s.default)(e,t),i,o)};var n=a(i(32088)),r=a(i(89894)),s=a(i(46183));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},84519:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return-(0,r.default)(e,t)};var n,r=(n=i(25332))&&n.__esModule?n:{default:n};e.exports=t.default},45288:(e,t,i)=>{"use strict";e.exports={format:i(89894),formatInTimeZone:i(37318),getTimezoneOffset:i(84519),toDate:i(6776),utcToZonedTime:i(46183),zonedTimeToUtc:i(22465)}},6776:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var i=t||{},a=null==i.additionalDigits?h:(0,n.default)(i.additionalDigits);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"===typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var o=function(e){var t,i={},n=d.dateTimePattern.exec(e);n?(i.date=n[1],t=n[3]):(n=d.datePattern.exec(e))?(i.date=n[1],t=n[2]):(i.date=null,t=e);if(t){var r=d.timeZone.exec(t);r?(i.time=t.replace(r[1],""),i.timeZone=r[1].trim()):i.time=t}return i}(e),p=function(e,t){var i,n=d.YYY[t],r=d.YYYYY[t];if(i=d.YYYY.exec(e)||r.exec(e)){var s=i[1];return{year:parseInt(s,10),restDateString:e.slice(s.length)}}if(i=d.YY.exec(e)||n.exec(e)){var a=i[1];return{year:100*parseInt(a,10),restDateString:e.slice(a.length)}}return{year:null}}(o.date,a),g=p.year,b=function(e,t){if(null===t)return null;var i,n,r,s;if(0===e.length)return(n=new Date(0)).setUTCFullYear(t),n;if(i=d.MM.exec(e))return n=new Date(0),m(t,r=parseInt(i[1],10)-1)?(n.setUTCFullYear(t,r),n):new Date(NaN);if(i=d.DDD.exec(e)){n=new Date(0);var a=parseInt(i[1],10);return function(e,t){if(t<1)return!1;var i=f(e);if(i&&t>366)return!1;if(!i&&t>365)return!1;return!0}(t,a)?(n.setUTCFullYear(t,0,a),n):new Date(NaN)}if(i=d.MMDD.exec(e)){n=new Date(0),r=parseInt(i[1],10)-1;var o=parseInt(i[2],10);return m(t,r,o)?(n.setUTCFullYear(t,r,o),n):new Date(NaN)}if(i=d.Www.exec(e))return v(t,s=parseInt(i[1],10)-1)?u(t,s):new Date(NaN);if(i=d.WwwD.exec(e)){s=parseInt(i[1],10)-1;var l=parseInt(i[2],10)-1;return v(t,s,l)?u(t,s,l):new Date(NaN)}return null}(p.restDateString,g);if(isNaN(b))return new Date(NaN);if(b){var _,x=b.getTime(),S=0;if(o.time&&(S=function(e){var t,i,n;if(t=d.HH.exec(e))return y(i=parseFloat(t[1].replace(",",".")))?i%24*l:NaN;if(t=d.HHMM.exec(e))return y(i=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")))?i%24*l+n*c:NaN;if(t=d.HHMMSS.exec(e)){i=parseInt(t[1],10),n=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return y(i,n,r)?i%24*l+n*c+1e3*r:NaN}return null}(o.time),isNaN(S)))return new Date(NaN);if(o.timeZone||i.timeZone){if(_=(0,s.default)(o.timeZone||i.timeZone,new Date(x+S)),isNaN(_))return new Date(NaN)}else _=(0,r.default)(new Date(x+S)),_=(0,r.default)(new Date(x+S+_));return new Date(x+S+_)}return new Date(NaN)};var n=o(i(70911)),r=o(i(85899)),s=o(i(25332)),a=o(i(46178));function o(e){return e&&e.__esModule?e:{default:e}}var l=36e5,c=6e4,h=2,d={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:a.default};function u(e,t,i){t=t||0,i=i||0;var n=new Date(0);n.setUTCFullYear(e,0,4);var r=7*t+i+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+r),n}var p=[31,28,31,30,31,30,31,31,30,31,30,31],g=[31,29,31,30,31,30,31,31,30,31,30,31];function f(e){return e%400===0||e%4===0&&e%100!==0}function m(e,t,i){if(t<0||t>11)return!1;if(null!=i){if(i<1)return!1;var n=f(e);if(n&&i>g[t])return!1;if(!n&&i>p[t])return!1}return!0}function v(e,t,i){return!(t<0||t>52)&&(null==i||!(i<0||i>6))}function y(e,t,i){return(null==e||!(e<0||e>=25))&&((null==t||!(t<0||t>=60))&&(null==i||!(i<0||i>=60)))}e.exports=t.default},46183:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var s=(0,r.default)(e,i),a=(0,n.default)(t,s,!0),o=new Date(s.getTime()-a),l=new Date(0);return l.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),l.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),l};var n=s(i(25332)),r=s(i(6776));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},22465:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){if("string"===typeof e&&!e.match(s.default)){var l=(0,n.default)(i);return l.timeZone=t,(0,r.default)(e,l)}var c=(0,r.default)(e,i),h=(0,o.default)(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()).getTime(),d=(0,a.default)(t,new Date(h));return new Date(h+d)};var n=l(i(32088)),r=l(i(6776)),s=l(i(46178)),a=l(i(25332)),o=l(i(8566));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},9417:(e,t,i)=>{"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,{A:()=>n})},64467:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(20816);function r(e,t,i){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},58168:(e,t,i)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},n.apply(null,arguments)}i.d(t,{A:()=>n})},77387:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(63662);function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,n.A)(e,t)}},63662:(e,t,i)=>{"use strict";function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}i.d(t,{A:()=>n})},20816:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(82284);function r(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=(0,n.A)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}},82284:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}i.d(t,{A:()=>n})},42476:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});const n=function(){this.__data__=[],this.size=0};var r=i(55009);const s=function(e,t){for(var i=e.length;i--;)if((0,r.A)(e[i][0],t))return i;return-1};var a=Array.prototype.splice;const o=function(e){var t=this.__data__,i=s(t,e);return!(i<0)&&(i==t.length-1?t.pop():a.call(t,i,1),--this.size,!0)};const l=function(e){var t=this.__data__,i=s(t,e);return i<0?void 0:t[i][1]};const c=function(e){return s(this.__data__,e)>-1};const h=function(e,t){var i=this.__data__,n=s(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this};function d(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=o,d.prototype.get=l,d.prototype.has=c,d.prototype.set=h;const u=d},38438:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(9885),r=i(54306);const s=(0,n.A)(r.A,"Map")},7840:(e,t,i)=>{"use strict";i.d(t,{A:()=>w});const n=(0,i(9885).A)(Object,"create");const r=function(){this.__data__=n?n(null):{},this.size=0};const s=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var a=Object.prototype.hasOwnProperty;const o=function(e){var t=this.__data__;if(n){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return a.call(t,e)?t[e]:void 0};var l=Object.prototype.hasOwnProperty;const c=function(e){var t=this.__data__;return n?void 0!==t[e]:l.call(t,e)};const h=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this};function d(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=r,d.prototype.delete=s,d.prototype.get=o,d.prototype.has=c,d.prototype.set=h;const u=d;var p=i(42476),g=i(38438);const f=function(){this.size=0,this.__data__={hash:new u,map:new(g.A||p.A),string:new u}};const m=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const v=function(e,t){var i=e.__data__;return m(t)?i["string"==typeof t?"string":"hash"]:i.map};const y=function(e){var t=v(this,e).delete(e);return this.size-=t?1:0,t};const b=function(e){return v(this,e).get(e)};const _=function(e){return v(this,e).has(e)};const x=function(e,t){var i=v(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this};function S(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}S.prototype.clear=f,S.prototype.delete=y,S.prototype.get=b,S.prototype.has=_,S.prototype.set=x;const w=S},45172:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(9885),r=i(54306);const s=(0,n.A)(r.A,"Set")},5347:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(7840);const r=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const s=function(e){return this.__data__.has(e)};function a(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new n.A;++t<i;)this.add(e[t])}a.prototype.add=a.prototype.push=r,a.prototype.has=s;const o=a},25140:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n=i(42476);const r=function(){this.__data__=new n.A,this.size=0};const s=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i};const a=function(e){return this.__data__.get(e)};const o=function(e){return this.__data__.has(e)};var l=i(38438),c=i(7840);const h=function(e,t){var i=this.__data__;if(i instanceof n.A){var r=i.__data__;if(!l.A||r.length<199)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new c.A(r)}return i.set(e,t),this.size=i.size,this};function d(e){var t=this.__data__=new n.A(e);this.size=t.size}d.prototype.clear=r,d.prototype.delete=s,d.prototype.get=a,d.prototype.has=o,d.prototype.set=h;const u=d},75622:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=i(54306).A.Symbol},50924:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}},58923:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t){for(var i=-1,n=null==e?0:e.length,r=0,s=[];++i<n;){var a=e[i];t(a,i,e)&&(s[r++]=a)}return s}},21512:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(1510);const r=function(e,t){return!!(null==e?0:e.length)&&(0,n.A)(e,t,0)>-1}},48784:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t,i){for(var n=-1,r=null==e?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}},80779:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}},97269:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}},72605:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}},44973:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});const n=function(e){return function(t,i,n){for(var r=-1,s=Object(t),a=n(t),o=a.length;o--;){var l=a[e?o:++r];if(!1===i(s[l],l,s))break}return t}}();var r=i(99266);const s=function(e,t){return e&&n(e,t,r.A)};var a=i(33493);const o=function(e,t){return function(i,n){if(null==i)return i;if(!(0,a.A)(i))return e(i,n);for(var r=i.length,s=t?r:-1,o=Object(i);(t?s--:++s<r)&&!1!==n(o[s],s,o););return i}}(s)},82782:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t,i,n){for(var r=e.length,s=i+(n?1:-1);n?s--:++s<r;)if(t(e[s],s,e))return s;return-1}},63367:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(43228),r=i(26548);const s=function(e,t){for(var i=0,s=(t=(0,n.A)(t,e)).length;null!=e&&i<s;)e=e[(0,r.A)(t[i++])];return i&&i==s?e:void 0}},14802:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n=i(75622),r=Object.prototype,s=r.hasOwnProperty,a=r.toString,o=n.A?n.A.toStringTag:void 0;const l=function(e){var t=s.call(e,o),i=e[o];try{e[o]=void 0;var n=!0}catch(l){}var r=a.call(e);return n&&(t?e[o]=i:delete e[o]),r};var c=Object.prototype.toString;const h=function(e){return c.call(e)};var d=n.A?n.A.toStringTag:void 0;const u=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":d&&d in Object(e)?l(e):h(e)}},1510:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(82782);const r=function(e){return e!==e};const s=function(e,t,i){for(var n=i-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1};const a=function(e,t,i){return t===t?s(e,t,i):(0,n.A)(e,r,i)}},30864:(e,t,i)=>{"use strict";i.d(t,{A:()=>F});var n=i(25140),r=i(5347),s=i(72605),a=i(88948);const o=function(e,t,i,n,o,l){var c=1&i,h=e.length,d=t.length;if(h!=d&&!(c&&d>h))return!1;var u=l.get(e),p=l.get(t);if(u&&p)return u==t&&p==e;var g=-1,f=!0,m=2&i?new r.A:void 0;for(l.set(e,t),l.set(t,e);++g<h;){var v=e[g],y=t[g];if(n)var b=c?n(y,v,g,t,e,l):n(v,y,g,e,t,l);if(void 0!==b){if(b)continue;f=!1;break}if(m){if(!(0,s.A)(t,(function(e,t){if(!(0,a.A)(m,t)&&(v===e||o(v,e,i,n,l)))return m.push(t)}))){f=!1;break}}else if(v!==y&&!o(v,y,i,n,l)){f=!1;break}}return l.delete(e),l.delete(t),f};var l=i(75622);const c=i(54306).A.Uint8Array;var h=i(55009);const d=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i};var u=i(27696),p=l.A?l.A.prototype:void 0,g=p?p.valueOf:void 0;const f=function(e,t,i,n,r,s,a){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new c(e),new c(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,h.A)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=d;case"[object Set]":var p=1&n;if(l||(l=u.A),e.size!=t.size&&!p)return!1;var f=a.get(e);if(f)return f==t;n|=2,a.set(e,t);var m=o(l(e),l(t),n,r,s,a);return a.delete(e),m;case"[object Symbol]":if(g)return g.call(e)==g.call(t)}return!1};var m=i(97269),v=i(45386);const y=function(e,t,i){var n=t(e);return(0,v.A)(e)?n:(0,m.A)(n,i(e))};var b=i(58923);const _=function(){return[]};var x=Object.prototype.propertyIsEnumerable,S=Object.getOwnPropertySymbols;const w=S?function(e){return null==e?[]:(e=Object(e),(0,b.A)(S(e),(function(t){return x.call(e,t)})))}:_;var C=i(99266);const k=function(e){return y(e,C.A,w)};var A=Object.prototype.hasOwnProperty;const E=function(e,t,i,n,r,s){var a=1&i,o=k(e),l=o.length;if(l!=k(t).length&&!a)return!1;for(var c=l;c--;){var h=o[c];if(!(a?h in t:A.call(t,h)))return!1}var d=s.get(e),u=s.get(t);if(d&&u)return d==t&&u==e;var p=!0;s.set(e,t),s.set(t,e);for(var g=a;++c<l;){var f=e[h=o[c]],m=t[h];if(n)var v=a?n(m,f,h,t,e,s):n(f,m,h,e,t,s);if(!(void 0===v?f===m||r(f,m,i,n,s):v)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(e),s.delete(t),p};var T=i(37280),O=i(81375),P=i(9993),M="[object Arguments]",I="[object Array]",R="[object Object]",D=Object.prototype.hasOwnProperty;const L=function(e,t,i,r,s,a){var l=(0,v.A)(e),c=(0,v.A)(t),h=l?I:(0,T.A)(e),d=c?I:(0,T.A)(t),u=(h=h==M?R:h)==R,p=(d=d==M?R:d)==R,g=h==d;if(g&&(0,O.A)(e)){if(!(0,O.A)(t))return!1;l=!0,u=!1}if(g&&!u)return a||(a=new n.A),l||(0,P.A)(e)?o(e,t,i,r,s,a):f(e,t,h,i,r,s,a);if(!(1&i)){var m=u&&D.call(e,"__wrapped__"),y=p&&D.call(t,"__wrapped__");if(m||y){var b=m?e.value():e,_=y?t.value():t;return a||(a=new n.A),s(b,_,i,r,a)}}return!!g&&(a||(a=new n.A),E(e,t,i,r,s,a))};var j=i(53239);const F=function e(t,i,n,r,s){return t===i||(null==t||null==i||!(0,j.A)(t)&&!(0,j.A)(i)?t!==t&&i!==i:L(t,i,n,r,e,s))}},86288:(e,t,i)=>{"use strict";i.d(t,{A:()=>w});var n=i(25140),r=i(30864);const s=function(e,t,i,s){var a=i.length,o=a,l=!s;if(null==e)return!o;for(e=Object(e);a--;){var c=i[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<o;){var h=(c=i[a])[0],d=e[h],u=c[1];if(l&&c[2]){if(void 0===d&&!(h in e))return!1}else{var p=new n.A;if(s)var g=s(d,u,h,e,t,p);if(!(void 0===g?(0,r.A)(u,d,3,s,p):g))return!1}}return!0};var a=i(37664);const o=function(e){return e===e&&!(0,a.A)(e)};var l=i(99266);const c=function(e){for(var t=(0,l.A)(e),i=t.length;i--;){var n=t[i],r=e[n];t[i]=[n,r,o(r)]}return t};const h=function(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}};const d=function(e){var t=c(e);return 1==t.length&&t[0][2]?h(t[0][0],t[0][1]):function(i){return i===e||s(i,e,t)}};var u=i(7015),p=i(83e3),g=i(60191),f=i(26548);const m=function(e,t){return(0,g.A)(e)&&o(t)?h((0,f.A)(e),t):function(i){var n=(0,u.A)(i,e);return void 0===n&&n===t?(0,p.A)(i,e):(0,r.A)(t,n,3)}};var v=i(42041),y=i(45386),b=i(53718),_=i(63367);const x=function(e){return function(t){return(0,_.A)(t,e)}};const S=function(e){return(0,g.A)(e)?(0,b.A)((0,f.A)(e)):x(e)};const w=function(e){return"function"==typeof e?e:null==e?v.A:"object"==typeof e?(0,y.A)(e)?m(e[0],e[1]):d(e):S(e)}},17235:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(20286);const r=(0,i(55674).A)(Object.keys,Object);var s=Object.prototype.hasOwnProperty;const a=function(e){if(!(0,n.A)(e))return r(e);var t=[];for(var i in Object(e))s.call(e,i)&&"constructor"!=i&&t.push(i);return t}},53718:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e){return function(t){return null==t?void 0:t[e]}}},61869:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(42041),r=i(70070),s=i(17633);const a=function(e,t){return(0,s.A)((0,r.A)(e,t,n.A),e+"")}},80425:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t,i){var n=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(i=i>r?r:i)<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var s=Array(r);++n<r;)s[n]=e[n+t];return s}},17328:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e){return function(t){return e(t)}}},51837:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var n=i(5347),r=i(21512),s=i(48784),a=i(88948),o=i(45172),l=i(3219),c=i(27696);const h=o.A&&1/(0,c.A)(new o.A([,-0]))[1]==1/0?function(e){return new o.A(e)}:l.A;const d=function(e,t,i){var o=-1,l=r.A,d=e.length,u=!0,p=[],g=p;if(i)u=!1,l=s.A;else if(d>=200){var f=t?null:h(e);if(f)return(0,c.A)(f);u=!1,l=a.A,g=new n.A}else g=t?[]:p;e:for(;++o<d;){var m=e[o],v=t?t(m):m;if(m=i||0!==m?m:0,u&&v===v){for(var y=g.length;y--;)if(g[y]===v)continue e;t&&g.push(v),p.push(m)}else l(g,v,i)||(g!==p&&g.push(v),p.push(m))}return p}},88948:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t){return e.has(t)}},43228:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n=i(45386),r=i(60191),s=i(7840);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],s=i.cache;if(s.has(r))return s.get(r);var a=e.apply(this,n);return i.cache=s.set(r,a)||s,a};return i.cache=new(a.Cache||s.A),i}a.Cache=s.A;const o=a;var l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g;const h=function(e){var t=o(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(l,(function(e,i,n,r){t.push(n?r.replace(c,"$1"):i||e)})),t}));var d=i(93434);const u=function(e,t){return(0,n.A)(e)?e:(0,r.A)(e,t)?[e]:h((0,d.A)(e))}},25920:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(9885);const r=function(){try{var e=(0,n.A)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}()},58187:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n="object"==typeof global&&global&&global.Object===Object&&global},9885:(e,t,i)=>{"use strict";i.d(t,{A:()=>v});var n=i(64067);const r=i(54306).A["__core-js_shared__"];var s=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const a=function(e){return!!s&&s in e};var o=i(37664),l=i(66166),c=/^\[object .+?Constructor\]$/,h=Function.prototype,d=Object.prototype,u=h.toString,p=d.hasOwnProperty,g=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const f=function(e){return!(!(0,o.A)(e)||a(e))&&((0,n.A)(e)?g:c).test((0,l.A)(e))};const m=function(e,t){return null==e?void 0:e[t]};const v=function(e,t){var i=m(e,t);return f(i)?i:void 0}},37280:(e,t,i)=>{"use strict";i.d(t,{A:()=>w});var n=i(9885),r=i(54306);const s=(0,n.A)(r.A,"DataView");var a=i(38438);const o=(0,n.A)(r.A,"Promise");var l=i(45172);const c=(0,n.A)(r.A,"WeakMap");var h=i(14802),d=i(66166),u="[object Map]",p="[object Promise]",g="[object Set]",f="[object WeakMap]",m="[object DataView]",v=(0,d.A)(s),y=(0,d.A)(a.A),b=(0,d.A)(o),_=(0,d.A)(l.A),x=(0,d.A)(c),S=h.A;(s&&S(new s(new ArrayBuffer(1)))!=m||a.A&&S(new a.A)!=u||o&&S(o.resolve())!=p||l.A&&S(new l.A)!=g||c&&S(new c)!=f)&&(S=function(e){var t=(0,h.A)(e),i="[object Object]"==t?e.constructor:void 0,n=i?(0,d.A)(i):"";if(n)switch(n){case v:return m;case y:return u;case b:return p;case _:return g;case x:return f}return t});const w=S},75884:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=/^(?:0|[1-9]\d*)$/;const r=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<t}},58635:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(55009),r=i(33493),s=i(75884),a=i(37664);const o=function(e,t,i){if(!(0,a.A)(i))return!1;var o=typeof t;return!!("number"==o?(0,r.A)(i)&&(0,s.A)(t,i.length):"string"==o&&t in i)&&(0,n.A)(i[t],e)}},60191:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(45386),r=i(42791),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;const o=function(e,t){if((0,n.A)(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!(0,r.A)(e))||(a.test(e)||!s.test(e)||null!=t&&e in Object(t))}},20286:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=Object.prototype;const r=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},55674:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t){return function(i){return e(t(i))}}},70070:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(50924),r=Math.max;const s=function(e,t,i){return t=r(void 0===t?e.length-1:t,0),function(){for(var s=arguments,a=-1,o=r(s.length-t,0),l=Array(o);++a<o;)l[a]=s[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=s[a];return c[t]=i(l),(0,n.A)(e,this,c)}}},54306:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(58187),r="object"==typeof self&&self&&self.Object===Object&&self;const s=n.A||r||Function("return this")()},27696:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}},17633:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});const n=function(e){return function(){return e}};var r=i(25920),s=i(42041);const a=r.A?function(e,t){return(0,r.A)(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s.A;var o=Date.now;const l=function(e){var t=0,i=0;return function(){var n=o(),r=16-(n-i);if(i=n,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(a)},26548:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(42791);const r=function(e){if("string"==typeof e||(0,n.A)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},66166:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=Function.prototype.toString;const r=function(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},55009:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e,t){return e===t||e!==e&&t!==t}},7015:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(63367);const r=function(e,t,i){var r=null==e?void 0:(0,n.A)(e,t);return void 0===r?i:r}},83e3:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});const n=function(e,t){return null!=e&&t in Object(e)};var r=i(43228),s=i(9500),a=i(45386),o=i(75884),l=i(33903),c=i(26548);const h=function(e,t,i){for(var n=-1,h=(t=(0,r.A)(t,e)).length,d=!1;++n<h;){var u=(0,c.A)(t[n]);if(!(d=null!=e&&i(e,u)))break;e=e[u]}return d||++n!=h?d:!!(h=null==e?0:e.length)&&(0,l.A)(h)&&(0,o.A)(u,h)&&((0,a.A)(e)||(0,s.A)(e))};const d=function(e,t){return null!=e&&h(e,t,n)}},42041:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e){return e}},70884:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n=i(1510),r=i(33493),s=i(93678),a=i(46230),o=i(80779);const l=function(e,t){return(0,o.A)(t,(function(t){return e[t]}))};var c=i(99266);const h=function(e){return null==e?[]:l(e,(0,c.A)(e))};var d=Math.max;const u=function(e,t,i,o){e=(0,r.A)(e)?e:h(e),i=i&&!o?(0,a.A)(i):0;var l=e.length;return i<0&&(i=d(l+i,0)),(0,s.A)(e)?i<=l&&e.indexOf(t,i)>-1:!!l&&(0,n.A)(e,t,i)>-1}},28943:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var n=i(50924),r=i(43228);const s=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var a=i(63367),o=i(80425);const l=function(e,t){return t.length<2?e:(0,a.A)(e,(0,o.A)(t,0,-1))};var c=i(26548);const h=function(e,t,i){t=(0,r.A)(t,e);var a=null==(e=l(e,t))?e:e[(0,c.A)(s(t))];return null==a?void 0:(0,n.A)(a,e,i)};const d=(0,i(61869).A)(h)},9500:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var n=i(14802),r=i(53239);const s=function(e){return(0,r.A)(e)&&"[object Arguments]"==(0,n.A)(e)};var a=Object.prototype,o=a.hasOwnProperty,l=a.propertyIsEnumerable;const c=s(function(){return arguments}())?s:function(e){return(0,r.A)(e)&&o.call(e,"callee")&&!l.call(e,"callee")}},45386:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=Array.isArray},33493:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(64067),r=i(33903);const s=function(e){return null!=e&&(0,r.A)(e.length)&&!(0,n.A)(e)}},81375:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var n=i(54306);const r=function(){return!1};var s="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=s&&"object"==typeof module&&module&&!module.nodeType&&module,o=a&&a.exports===s?n.A.Buffer:void 0;const l=(o?o.isBuffer:void 0)||r},64067:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(14802),r=i(37664);const s=function(e){if(!(0,r.A)(e))return!1;var t=(0,n.A)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},33903:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},61176:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e){return null==e}},37664:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},53239:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e){return null!=e&&"object"==typeof e}},29236:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var n=i(14802);const r=(0,i(55674).A)(Object.getPrototypeOf,Object);var s=i(53239),a=Function.prototype,o=Object.prototype,l=a.toString,c=o.hasOwnProperty,h=l.call(Object);const d=function(e){if(!(0,s.A)(e)||"[object Object]"!=(0,n.A)(e))return!1;var t=r(e);if(null===t)return!0;var i=c.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==h}},93678:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(14802),r=i(45386),s=i(53239);const a=function(e){return"string"==typeof e||!(0,r.A)(e)&&(0,s.A)(e)&&"[object String]"==(0,n.A)(e)}},42791:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(14802),r=i(53239);const s=function(e){return"symbol"==typeof e||(0,r.A)(e)&&"[object Symbol]"==(0,n.A)(e)}},9993:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var n=i(14802),r=i(33903),s=i(53239),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;const o=function(e){return(0,s.A)(e)&&(0,r.A)(e.length)&&!!a[(0,n.A)(e)]};var l=i(17328),c=i(58187),h="object"==typeof exports&&exports&&!exports.nodeType&&exports,d=h&&"object"==typeof module&&module&&!module.nodeType&&module,u=d&&d.exports===h&&c.A.process,p=function(){try{var e=d&&d.require&&d.require("util").types;return e||u&&u.binding&&u.binding("util")}catch(t){}}();var g=p&&p.isTypedArray;const f=g?(0,l.A)(g):o},6772:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(e){return void 0===e}},99266:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});const n=function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n};var r=i(9500),s=i(45386),a=i(81375),o=i(75884),l=i(9993),c=Object.prototype.hasOwnProperty;const h=function(e,t){var i=(0,s.A)(e),h=!i&&(0,r.A)(e),d=!i&&!h&&(0,a.A)(e),u=!i&&!h&&!d&&(0,l.A)(e),p=i||h||d||u,g=p?n(e.length,String):[],f=g.length;for(var m in e)!t&&!c.call(e,m)||p&&("length"==m||d&&("offset"==m||"parent"==m)||u&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||(0,o.A)(m,f))||g.push(m);return g};var d=i(17235),u=i(33493);const p=function(e){return(0,u.A)(e)?h(e):(0,d.A)(e)}},3219:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=function(){}},44953:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var n=i(72605),r=i(86288),s=i(44973);const a=function(e,t){var i;return(0,s.A)(e,(function(e,n,r){return!(i=t(e,n,r))})),!!i};var o=i(45386),l=i(58635);const c=function(e,t,i){var s=(0,o.A)(e)?n.A:a;return i&&(0,l.A)(e,t,i)&&(t=void 0),s(e,(0,r.A)(t,3))}},1905:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(60617),r=1/0;const s=function(e){return e?(e=(0,n.A)(e))===r||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},46230:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(1905);const r=function(e){var t=(0,n.A)(e),i=t%1;return t===t?i?t-i:t:0}},60617:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var n=/\s/;const r=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t};var s=/^\s+/;const a=function(e){return e?e.slice(0,r(e)+1).replace(s,""):e};var o=i(37664),l=i(42791),c=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,d=/^0o[0-7]+$/i,u=parseInt;const p=function(e){if("number"==typeof e)return e;if((0,l.A)(e))return NaN;if((0,o.A)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,o.A)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var i=h.test(e);return i||d.test(e)?u(e.slice(2),i?2:8):c.test(e)?NaN:+e}},93434:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var n=i(75622),r=i(80779),s=i(45386),a=i(42791),o=n.A?n.A.prototype:void 0,l=o?o.toString:void 0;const c=function e(t){if("string"==typeof t)return t;if((0,s.A)(t))return(0,r.A)(t,e)+"";if((0,a.A)(t))return l?l.call(t):"";var i=t+"";return"0"==i&&1/t==-1/0?"-0":i};const h=function(e){return null==e?"":c(e)}},20096:(e,t,i)=>{"use strict";i.d(t,{xI:()=>H});var n=i(64467);function r(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let s={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const a=/[&<>"']/,o=new RegExp(a.source,"g"),l=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,c=new RegExp(l.source,"g"),h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d=e=>h[e];function u(e,t){if(t){if(a.test(e))return e.replace(o,d)}else if(l.test(e))return e.replace(c,d);return e}const p=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function g(e){return e.replace(p,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const f=/(^|[^\[])\^/g;function m(e,t){e="string"===typeof e?e:e.source,t=t||"";const i={replace:(t,n)=>(n=(n=n.source||n).replace(f,"$1"),e=e.replace(t,n),i),getRegex:()=>new RegExp(e,t)};return i}const v=/[^\w:]/g,y=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function b(e,t,i){if(e){let e;try{e=decodeURIComponent(g(i)).replace(v,"").toLowerCase()}catch(n){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!y.test(i)&&(i=function(e,t){_[" "+e]||(x.test(e)?_[" "+e]=e+"/":_[" "+e]=A(e,"/",!0));e=_[" "+e];const i=-1===e.indexOf(":");return"//"===t.substring(0,2)?i?t:e.replace(S,"$1")+t:"/"===t.charAt(0)?i?t:e.replace(w,"$1")+t:e+t}(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(n){return null}return i}const _={},x=/^[^:]+:\/*[^/]*$/,S=/^([^:]+:)[\s\S]*$/,w=/^([^:]+:\/*[^/]*)[\s\S]*$/;const C={exec:function(){}};function k(e,t){const i=e.replace(/\|/g,((e,t,i)=>{let n=!1,r=t;for(;--r>=0&&"\\"===i[r];)n=!n;return n?"|":" |"})).split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function A(e,t,i){const n=e.length;if(0===n)return"";let r=0;for(;r<n;){const s=e.charAt(n-r-1);if(s!==t||i){if(s===t||!i)break;r++}else r++}return e.slice(0,n-r)}function E(e,t){if(t<1)return"";let i="";for(;t>1;)1&t&&(i+=e),t>>=1,e+=e;return i+e}function T(e,t,i,n){const r=t.href,s=t.title?u(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;const e={type:"link",raw:i,href:r,title:s,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,e}return{type:"image",raw:i,href:r,title:s,text:u(a)}}class O{constructor(e){this.options=e||s}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:A(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],i=function(e,t){const i=e.match(/^(\s+)(?:```)/);if(null===i)return t;const n=i[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[i]=t;return i.length>=n.length?e.slice(n.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=A(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const n=this.lexer.blockTokens(e);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:n,text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,n,r,s,a,o,l,c,h,d,u,p,g=t[1].trim();const f=g.length>1,m={type:"list",raw:"",ordered:f,start:f?+g.slice(0,-1):"",loose:!1,items:[]};g=f?"\\d{1,9}\\".concat(g.slice(-1)):"\\".concat(g),this.options.pedantic&&(g=f?g:"[*+-]");const v=new RegExp("^( {0,3}".concat(g,")((?:[\t ][^\\n]*)?(?:\\n|$))"));for(;e&&(p=!1,t=v.exec(e))&&!this.rules.block.hr.test(e);){if(i=t[0],e=e.substring(i.length),c=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),h=e.split("\n",1)[0],this.options.pedantic?(s=2,u=c.trimLeft()):(s=t[2].search(/[^ ]/),s=s>4?1:s,u=c.slice(s),s+=t[1].length),o=!1,!c&&/^ *$/.test(h)&&(i+=h+"\n",e=e.substring(h.length+1),p=!0),!p){const t=new RegExp("^ {0,".concat(Math.min(3,s-1),"}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))")),n=new RegExp("^ {0,".concat(Math.min(3,s-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),r=new RegExp("^ {0,".concat(Math.min(3,s-1),"}(?:```|~~~)")),a=new RegExp("^ {0,".concat(Math.min(3,s-1),"}#"));for(;e&&(d=e.split("\n",1)[0],h=d,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!r.test(h))&&!a.test(h)&&!t.test(h)&&!n.test(e);){if(h.search(/[^ ]/)>=s||!h.trim())u+="\n"+h.slice(s);else{if(o)break;if(c.search(/[^ ]/)>=4)break;if(r.test(c))break;if(a.test(c))break;if(n.test(c))break;u+="\n"+h}o||h.trim()||(o=!0),i+=d+"\n",e=e.substring(d.length+1),c=h.slice(s)}}m.loose||(l?m.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(u),n&&(r="[ ] "!==n[0],u=u.replace(/^\[[ xX]\] +/,""))),m.items.push({type:"list_item",raw:i,task:!!n,checked:r,loose:!1,text:u}),m.raw+=i}m.items[m.items.length-1].raw=i.trimRight(),m.items[m.items.length-1].text=u.trimRight(),m.raw=m.raw.trimRight();const y=m.items.length;for(a=0;a<y;a++)if(this.lexer.state.top=!1,m.items[a].tokens=this.lexer.blockTokens(m.items[a].text,[]),!m.loose){const e=m.items[a].tokens.filter((e=>"space"===e.type)),t=e.length>0&&e.some((e=>/\n.*\n/.test(e.raw)));m.loose=t}if(m.loose)for(a=0;a<y;a++)m.items[a].loose=!0;return m}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(t[0]):u(t[0]);e.type="paragraph",e.text=i,e.tokens=this.lexer.inline(i)}return e}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:n}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:k(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let i,n,r,s,a=e.align.length;for(i=0;i<a;i++)/^ *-+: *$/.test(e.align[i])?e.align[i]="right":/^ *:-+: *$/.test(e.align[i])?e.align[i]="center":/^ *:-+ *$/.test(e.align[i])?e.align[i]="left":e.align[i]=null;for(a=e.rows.length,i=0;i<a;i++)e.rows[i]=k(e.rows[i],e.header.length).map((e=>({text:e})));for(a=e.header.length,n=0;n<a;n++)e.header[n].tokens=this.lexer.inline(e.header[n].text);for(a=e.rows.length,n=0;n<a;n++)for(s=e.rows[n],r=0;r<s.length;r++)s[r].tokens=this.lexer.inline(s[r].text);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:u(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):u(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=A(e.slice(0,-1),"\\");if((e.length-t.length)%2===0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;const i=e.length;let n=0,r=0;for(;r<i;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}(t[2],"()");if(e>-1){const i=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let i=t[2],n="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);e&&(i=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(e)?i.slice(1):i.slice(1,-1)),T(t,{href:i?i.replace(this.rules.inline._escapes,"$1"):i,title:n?n.replace(this.rules.inline._escapes,"$1"):n},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let e=(i[2]||i[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e){const e=i[0].charAt(0);return{type:"text",raw:e,text:e}}return T(i,e,i[0],this.lexer)}}emStrong(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=this.rules.inline.emStrong.lDelim.exec(e);if(!n)return;if(n[3]&&i.match(/[\p{L}\p{N}]/u))return;const r=n[1]||n[2]||"";if(!r||r&&(""===i||this.rules.inline.punctuation.exec(i))){const i=n[0].length-1;let r,s,a=i,o=0;const l="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+i);null!=(n=l.exec(t));){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r)continue;if(s=r.length,n[3]||n[4]){a+=s;continue}if((n[5]||n[6])&&i%3&&!((i+s)%3)){o+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+o);const t=e.slice(0,i+n.index+(n[0].length-r.length)+s);if(Math.min(i,s)%2){const e=t.slice(1,-1);return{type:"em",raw:t,text:e,tokens:this.lexer.inlineTokens(e)}}const l=t.slice(2,-2);return{type:"strong",raw:t,text:l,tokens:this.lexer.inlineTokens(l)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const i=/[^ ]/.test(e),n=/^ /.test(e)&&/ $/.test(e);return i&&n&&(e=e.substring(1,e.length-1)),e=u(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let e,n;return"@"===i[2]?(e=u(this.options.mangle?t(i[1]):i[1]),n="mailto:"+e):(e=u(i[1]),n=e),{type:"link",raw:i[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let e,n;if("@"===i[2])e=u(this.options.mangle?t(i[0]):i[0]),n="mailto:"+e;else{let t;do{t=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(t!==i[0]);e=u(i[0]),n="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):u(i[0]):i[0]:u(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:e}}}}const P={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:C,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};P.def=m(P.def).replace("label",P._label).replace("title",P._title).getRegex(),P.bullet=/(?:[*+-]|\d{1,9}[.)])/,P.listItemStart=m(/^( *)(bull) */).replace("bull",P.bullet).getRegex(),P.list=m(P.list).replace(/bull/g,P.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+P.def.source+")").getRegex(),P._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",P._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,P.html=m(P.html,"i").replace("comment",P._comment).replace("tag",P._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),P.paragraph=m(P._paragraph).replace("hr",P.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",P._tag).getRegex(),P.blockquote=m(P.blockquote).replace("paragraph",P.paragraph).getRegex(),P.normal={...P},P.gfm={...P.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},P.gfm.table=m(P.gfm.table).replace("hr",P.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",P._tag).getRegex(),P.gfm.paragraph=m(P._paragraph).replace("hr",P.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",P.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",P._tag).getRegex(),P.pedantic={...P.normal,html:m("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",P._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:C,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:m(P.normal._paragraph).replace("hr",P.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",P.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const M={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:C,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:C,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function I(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function R(e){let t,i,n="";const r=e.length;for(t=0;t<r;t++)i=e.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}M._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",M.punctuation=m(M.punctuation).replace(/punctuation/g,M._punctuation).getRegex(),M.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,M.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,M._comment=m(P._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),M.emStrong.lDelim=m(M.emStrong.lDelim).replace(/punct/g,M._punctuation).getRegex(),M.emStrong.rDelimAst=m(M.emStrong.rDelimAst,"g").replace(/punct/g,M._punctuation).getRegex(),M.emStrong.rDelimUnd=m(M.emStrong.rDelimUnd,"g").replace(/punct/g,M._punctuation).getRegex(),M._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,M._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,M._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,M.autolink=m(M.autolink).replace("scheme",M._scheme).replace("email",M._email).getRegex(),M._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,M.tag=m(M.tag).replace("comment",M._comment).replace("attribute",M._attribute).getRegex(),M._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,M._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,M._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,M.link=m(M.link).replace("label",M._label).replace("href",M._href).replace("title",M._title).getRegex(),M.reflink=m(M.reflink).replace("label",M._label).replace("ref",P._label).getRegex(),M.nolink=m(M.nolink).replace("ref",P._label).getRegex(),M.reflinkSearch=m(M.reflinkSearch,"g").replace("reflink",M.reflink).replace("nolink",M.nolink).getRegex(),M.normal={...M},M.pedantic={...M.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:m(/^!?\[(label)\]\((.*?)\)/).replace("label",M._label).getRegex(),reflink:m(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",M._label).getRegex()},M.gfm={...M.normal,escape:m(M.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},M.gfm.url=m(M.gfm.url,"i").replace("email",M.gfm._extended_email).getRegex(),M.breaks={...M.gfm,br:m(M.br).replace("{2,}","*").getRegex(),text:m(M.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class D{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||s,this.options.tokenizer=this.options.tokenizer||new O,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:P.normal,inline:M.normal};this.options.pedantic?(t.block=P.pedantic,t.inline=M.pedantic):this.options.gfm&&(t.block=P.gfm,this.options.breaks?t.inline=M.breaks:t.inline=M.gfm),this.tokenizer.rules=t}static get rules(){return{block:P,inline:M}}static lex(e,t){return new D(t).lex(e)}static lexInline(e,t){return new D(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e){let t,i,n,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,i)=>t+"    ".repeat(i.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((i=>!!(t=i.call({lexer:this},e,s))&&(e=e.substring(t.raw.length),s.push(t),!0)))))if(t=this.tokenizer.space(e))e=e.substring(t.raw.length),1===t.raw.length&&s.length>0?s[s.length-1].raw+="\n":s.push(t);else if(t=this.tokenizer.code(e))e=e.substring(t.raw.length),i=s[s.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?s.push(t):(i.raw+="\n"+t.raw,i.text+="\n"+t.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(t=this.tokenizer.fences(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.heading(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.hr(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.blockquote(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.list(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.html(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.def(e))e=e.substring(t.raw.length),i=s[s.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title}):(i.raw+="\n"+t.raw,i.text+="\n"+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(t=this.tokenizer.table(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.lheading(e))e=e.substring(t.raw.length),s.push(t);else{if(n=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const i=e.slice(1);let r;this.options.extensions.startBlock.forEach((function(e){r=e.call({lexer:this},i),"number"===typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(n=e.substring(0,t+1))}if(this.state.top&&(t=this.tokenizer.paragraph(n)))i=s[s.length-1],r&&"paragraph"===i.type?(i.raw+="\n"+t.raw,i.text+="\n"+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(t),r=n.length!==e.length,e=e.substring(t.raw.length);else if(t=this.tokenizer.text(e))e=e.substring(t.raw.length),i=s[s.length-1],i&&"text"===i.type?(i.raw+="\n"+t.raw,i.text+="\n"+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(t);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,s}inline(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e){let t,i,n,r,s,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,r.index)+"["+E("a",r[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,r.index)+"["+E("a",r[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,r.index+r[0].length-2)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((i=>!!(t=i.call({lexer:this},e,o))&&(e=e.substring(t.raw.length),o.push(t),!0)))))if(t=this.tokenizer.escape(e))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.tag(e))e=e.substring(t.raw.length),i=o[o.length-1],i&&"text"===t.type&&"text"===i.type?(i.raw+=t.raw,i.text+=t.text):o.push(t);else if(t=this.tokenizer.link(e))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(t.raw.length),i=o[o.length-1],i&&"text"===t.type&&"text"===i.type?(i.raw+=t.raw,i.text+=t.text):o.push(t);else if(t=this.tokenizer.emStrong(e,l,a))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.codespan(e))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.br(e))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.del(e))e=e.substring(t.raw.length),o.push(t);else if(t=this.tokenizer.autolink(e,R))e=e.substring(t.raw.length),o.push(t);else if(this.state.inLink||!(t=this.tokenizer.url(e,R))){if(n=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const i=e.slice(1);let r;this.options.extensions.startInline.forEach((function(e){r=e.call({lexer:this},i),"number"===typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(n=e.substring(0,t+1))}if(t=this.tokenizer.inlineText(n,I))e=e.substring(t.raw.length),"_"!==t.raw.slice(-1)&&(a=t.raw.slice(-1)),s=!0,i=o[o.length-1],i&&"text"===i.type?(i.raw+=t.raw,i.text+=t.text):o.push(t);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(t.raw.length),o.push(t);return o}}class L{constructor(e){this.options=e||s}code(e,t,i){const n=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,n);null!=t&&t!==e&&(i=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+u(n)+'">'+(i?e:u(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:u(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n".concat(e,"</blockquote>\n")}html(e){return e}heading(e,t,i,n){if(this.options.headerIds){const r=this.options.headerPrefix+n.slug(i);return"<h".concat(t,' id="').concat(r,'">').concat(e,"</h").concat(t,">\n")}return"<h".concat(t,">").concat(e,"</h").concat(t,">\n")}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,i){const n=t?"ol":"ul";return"<"+n+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+n+">\n"}listitem(e){return"<li>".concat(e,"</li>\n")}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>".concat(e,"</p>\n")}table(e,t){return t&&(t="<tbody>".concat(t,"</tbody>")),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n".concat(e,"</tr>\n")}tablecell(e,t){const i=t.header?"th":"td";return(t.align?"<".concat(i,' align="').concat(t.align,'">'):"<".concat(i,">"))+e+"</".concat(i,">\n")}strong(e){return"<strong>".concat(e,"</strong>")}em(e){return"<em>".concat(e,"</em>")}codespan(e){return"<code>".concat(e,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>".concat(e,"</del>")}link(e,t,i){if(null===(e=b(this.options.sanitize,this.options.baseUrl,e)))return i;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>",n}image(e,t,i){if(null===(e=b(this.options.sanitize,this.options.baseUrl,e)))return i;let n='<img src="'.concat(e,'" alt="').concat(i,'"');return t&&(n+=' title="'.concat(t,'"')),n+=this.options.xhtml?"/>":">",n}text(e){return e}}class j{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class F{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,n=0;if(this.seen.hasOwnProperty(i)){n=this.seen[e];do{n++,i=e+"-"+n}while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=n,this.seen[i]=0),i}slug(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}}class B{constructor(e){this.options=e||s,this.options.renderer=this.options.renderer||new L,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new j,this.slugger=new F}static parse(e,t){return new B(t).parse(e)}static parseInline(e,t){return new B(t).parseInline(e)}parse(e){let t,i,n,r,s,a,o,l,c,h,d,u,p,f,m,v,y,b,_,x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],S="";const w=e.length;for(t=0;t<w;t++)if(h=e[t],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(_=this.options.extensions.renderers[h.type].call({parser:this},h),!1!==_||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)))S+=_||"";else switch(h.type){case"space":continue;case"hr":S+=this.renderer.hr();continue;case"heading":S+=this.renderer.heading(this.parseInline(h.tokens),h.depth,g(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":S+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(l="",o="",r=h.header.length,i=0;i<r;i++)o+=this.renderer.tablecell(this.parseInline(h.header[i].tokens),{header:!0,align:h.align[i]});for(l+=this.renderer.tablerow(o),c="",r=h.rows.length,i=0;i<r;i++){for(a=h.rows[i],o="",s=a.length,n=0;n<s;n++)o+=this.renderer.tablecell(this.parseInline(a[n].tokens),{header:!1,align:h.align[n]});c+=this.renderer.tablerow(o)}S+=this.renderer.table(l,c);continue;case"blockquote":c=this.parse(h.tokens),S+=this.renderer.blockquote(c);continue;case"list":for(d=h.ordered,u=h.start,p=h.loose,r=h.items.length,c="",i=0;i<r;i++)m=h.items[i],v=m.checked,y=m.task,f="",m.task&&(b=this.renderer.checkbox(v),p?m.tokens.length>0&&"paragraph"===m.tokens[0].type?(m.tokens[0].text=b+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=b+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:b}):f+=b),f+=this.parse(m.tokens,p),c+=this.renderer.listitem(f,y,v);S+=this.renderer.list(c,d,u);continue;case"html":S+=this.renderer.html(h.text);continue;case"paragraph":S+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(c=h.tokens?this.parseInline(h.tokens):h.text;t+1<w&&"text"===e[t+1].type;)h=e[++t],c+="\n"+(h.tokens?this.parseInline(h.tokens):h.text);S+=x?this.renderer.paragraph(c):c;continue;default:{const e='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return S}parseInline(e,t){t=t||this.renderer;let i,n,r,s="";const a=e.length;for(i=0;i<a;i++)if(n=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]&&(r=this.options.extensions.renderers[n.type].call({parser:this},n),!1!==r||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)))s+=r||"";else switch(n.type){case"escape":case"text":s+=t.text(n.text);break;case"html":s+=t.html(n.text);break;case"link":s+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":s+=t.image(n.href,n.title,n.text);break;case"strong":s+=t.strong(this.parseInline(n.tokens,t));break;case"em":s+=t.em(this.parseInline(n.tokens,t));break;case"codespan":s+=t.codespan(n.text);break;case"br":s+=t.br();break;case"del":s+=t.del(this.parseInline(n.tokens,t));break;default:{const e='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return s}}class N{constructor(e){this.options=e||s}preprocess(e){return e}postprocess(e){return e}}function z(e,t){return(i,n,r)=>{"function"===typeof n&&(r=n,n=null);const s={...n},a=function(e,t,i){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+u(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):i?void i(null,e):e}if(t)return Promise.reject(n);if(!i)throw n;i(n)}}((n={...H.defaults,...s}).silent,n.async,r);if("undefined"===typeof i||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!==typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(n),n.hooks&&(n.hooks.options=n),r){const s=n.highlight;let l;try{n.hooks&&(i=n.hooks.preprocess(i)),l=e(i,n)}catch(o){return a(o)}const c=function(e){let i;if(!e)try{n.walkTokens&&H.walkTokens(l,n.walkTokens),i=t(l,n),n.hooks&&(i=n.hooks.postprocess(i))}catch(o){e=o}return n.highlight=s,e?a(e):r(null,i)};if(!s||s.length<3)return c();if(delete n.highlight,!l.length)return c();let h=0;return H.walkTokens(l,(function(e){"code"===e.type&&(h++,setTimeout((()=>{s(e.text,e.lang,(function(t,i){if(t)return c(t);null!=i&&i!==e.text&&(e.text=i,e.escaped=!0),h--,0===h&&c()}))}),0))})),void(0===h&&c())}if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(i):i).then((t=>e(t,n))).then((e=>n.walkTokens?Promise.all(H.walkTokens(e,n.walkTokens)).then((()=>e)):e)).then((e=>t(e,n))).then((e=>n.hooks?n.hooks.postprocess(e):e)).catch(a);try{n.hooks&&(i=n.hooks.preprocess(i));const r=e(i,n);n.walkTokens&&H.walkTokens(r,n.walkTokens);let s=t(r,n);return n.hooks&&(s=n.hooks.postprocess(s)),s}catch(o){return a(o)}}}function H(e,t,i){return z(D.lex,B.parse)(e,t,i)}(0,n.A)(N,"passThroughHooks",new Set(["preprocess","postprocess"])),H.options=H.setOptions=function(e){var t;return H.defaults={...H.defaults,...e},t=H.defaults,s=t,H},H.getDefaults=r,H.defaults=s,H.use=function(){const e=H.defaults.extensions||{renderers:{},childTokens:{}};for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];i.forEach((t=>{const i={...t};if(i.async=H.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if(t.renderer){const i=e.renderers[t.name];e.renderers[t.name]=i?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let s=t.renderer.apply(this,n);return!1===s&&(s=i.apply(this,n)),s}:t.renderer}if(t.tokenizer){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");e[t.level]?e[t.level].unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),i.extensions=e),t.renderer){const e=H.defaults.renderer||new L;for(const i in t.renderer){const n=e[i];e[i]=function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];let o=t.renderer[i].apply(e,s);return!1===o&&(o=n.apply(e,s)),o}}i.renderer=e}if(t.tokenizer){const e=H.defaults.tokenizer||new O;for(const i in t.tokenizer){const n=e[i];e[i]=function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];let o=t.tokenizer[i].apply(e,s);return!1===o&&(o=n.apply(e,s)),o}}i.tokenizer=e}if(t.hooks){const e=H.defaults.hooks||new N;for(const i in t.hooks){const n=e[i];N.passThroughHooks.has(i)?e[i]=r=>{if(H.defaults.async)return Promise.resolve(t.hooks[i].call(e,r)).then((t=>n.call(e,t)));const s=t.hooks[i].call(e,r);return n.call(e,s)}:e[i]=function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];let o=t.hooks[i].apply(e,s);return!1===o&&(o=n.apply(e,s)),o}}i.hooks=e}if(t.walkTokens){const e=H.defaults.walkTokens;i.walkTokens=function(i){let n=[];return n.push(t.walkTokens.call(this,i)),e&&(n=n.concat(e.call(this,i))),n}}H.setOptions(i)}))},H.walkTokens=function(e,t){let i=[];for(const n of e)switch(i=i.concat(t.call(H,n)),n.type){case"table":for(const e of n.header)i=i.concat(H.walkTokens(e.tokens,t));for(const e of n.rows)for(const n of e)i=i.concat(H.walkTokens(n.tokens,t));break;case"list":i=i.concat(H.walkTokens(n.items,t));break;default:H.defaults.extensions&&H.defaults.extensions.childTokens&&H.defaults.extensions.childTokens[n.type]?H.defaults.extensions.childTokens[n.type].forEach((function(e){i=i.concat(H.walkTokens(n[e],t))})):n.tokens&&(i=i.concat(H.walkTokens(n.tokens,t)))}return i},H.parseInline=z(D.lexInline,B.parseInline),H.Parser=B,H.parser=B.parse,H.Renderer=L,H.TextRenderer=j,H.Lexer=D,H.lexer=D.lex,H.Tokenizer=O,H.Slugger=F,H.Hooks=N,H.parse=H;H.options,H.setOptions,H.use,H.walkTokens,H.parseInline,B.parse,D.lex},91036:(e,t,i)=>{"use strict";i.d(t,{N9:()=>C,oR:()=>D});var n=i(65043),r=i(43024);const s=e=>"number"==typeof e&&!isNaN(e),a=e=>"string"==typeof e,o=e=>"function"==typeof e,l=e=>a(e)||o(e)?e:null,c=e=>(0,n.isValidElement)(e)||a(e)||o(e)||s(e);function h(e){let{enter:t,exit:i,appendPosition:r=!1,collapse:s=!0,collapseDuration:a=300}=e;return function(e){let{children:o,position:l,preventExitTransition:c,done:h,nodeRef:d,isIn:u}=e;const p=r?"".concat(t,"--").concat(l):t,g=r?"".concat(i,"--").concat(l):i,f=(0,n.useRef)(0);return(0,n.useLayoutEffect)((()=>{const e=d.current,t=p.split(" "),i=n=>{n.target===d.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",i),e.removeEventListener("animationcancel",i),0===f.current&&"animationcancel"!==n.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",i),e.addEventListener("animationcancel",i)}),[]),(0,n.useEffect)((()=>{const e=d.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t,i){void 0===i&&(i=300);const{scrollHeight:n,style:r}=e;requestAnimationFrame((()=>{r.minHeight="initial",r.height=n+"px",r.transition="all ".concat(i,"ms"),requestAnimationFrame((()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,i)}))}))}(e,h,a):h()};u||(c?t():(f.current=1,e.className+=" ".concat(g),e.addEventListener("animationend",t)))}),[u]),n.createElement(n.Fragment,null,o)}}function d(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const u={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const i=this.list.get(e).filter((e=>e!==t));return this.list.set(e,i),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach((t=>{const i=setTimeout((()=>{t(...[].slice.call(arguments,1))}),0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(i)}))}},p=e=>{let{theme:t,type:i,...r}=e;return n.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(i,")"),...r})},g={info:function(e){return n.createElement(p,{...e},n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return n.createElement(p,{...e},n.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return n.createElement(p,{...e},n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return n.createElement(p,{...e},n.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return n.createElement("div",{className:"Toastify__spinner"})}};function f(e){const[,t]=(0,n.useReducer)((e=>e+1),0),[i,r]=(0,n.useState)([]),h=(0,n.useRef)(null),p=(0,n.useRef)(new Map).current,f=e=>-1!==i.indexOf(e),m=(0,n.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:f,getToast:e=>p.get(e)}).current;function v(e){let{containerId:t}=e;const{limit:i}=m.props;!i||t&&m.containerId!==t||(m.count-=m.queue.length,m.queue=[])}function y(e){r((t=>null==e?[]:t.filter((t=>t!==e))))}function b(){const{toastContent:e,toastProps:t,staleId:i}=m.queue.shift();x(e,t,i)}function _(e,i){let{delay:r,staleId:f,...v}=i;if(!c(e)||function(e){return!h.current||m.props.enableMultiContainer&&e.containerId!==m.props.containerId||p.has(e.toastId)&&null==e.updateId}(v))return;const{toastId:_,updateId:S,data:w}=v,{props:C}=m,k=()=>y(_),A=null==S;A&&m.count++;const E={...C,style:C.toastStyle,key:m.toastKey++,...Object.fromEntries(Object.entries(v).filter((e=>{let[t,i]=e;return null!=i}))),toastId:_,updateId:S,data:w,closeToast:k,isIn:!1,className:l(v.className||C.toastClassName),bodyClassName:l(v.bodyClassName||C.bodyClassName),progressClassName:l(v.progressClassName||C.progressClassName),autoClose:!v.isLoading&&(T=v.autoClose,O=C.autoClose,!1===T||s(T)&&T>0?T:O),deleteToast(){const e=d(p.get(_),"removed");p.delete(_),u.emit(4,e);const i=m.queue.length;if(m.count=null==_?m.count-m.displayedToast:m.count-1,m.count<0&&(m.count=0),i>0){const e=null==_?m.props.limit:1;if(1===i||1===e)m.displayedToast++,b();else{const t=e>i?i:e;m.displayedToast=t;for(let e=0;e<t;e++)b()}}else t()}};var T,O;E.iconOut=function(e){let{theme:t,type:i,isLoading:r,icon:l}=e,c=null;const h={theme:t,type:i};return!1===l||(o(l)?c=l(h):(0,n.isValidElement)(l)?c=(0,n.cloneElement)(l,h):a(l)||s(l)?c=l:r?c=g.spinner():(e=>e in g)(i)&&(c=g[i](h))),c}(E),o(v.onOpen)&&(E.onOpen=v.onOpen),o(v.onClose)&&(E.onClose=v.onClose),E.closeButton=C.closeButton,!1===v.closeButton||c(v.closeButton)?E.closeButton=v.closeButton:!0===v.closeButton&&(E.closeButton=!c(C.closeButton)||C.closeButton);let P=e;(0,n.isValidElement)(e)&&!a(e.type)?P=(0,n.cloneElement)(e,{closeToast:k,toastProps:E,data:w}):o(e)&&(P=e({closeToast:k,toastProps:E,data:w})),C.limit&&C.limit>0&&m.count>C.limit&&A?m.queue.push({toastContent:P,toastProps:E,staleId:f}):s(r)?setTimeout((()=>{x(P,E,f)}),r):x(P,E,f)}function x(e,t,i){const{toastId:n}=t;i&&p.delete(i);const s={content:e,props:t};p.set(n,s),r((e=>[...e,n].filter((e=>e!==i)))),u.emit(4,d(s,null==s.props.updateId?"added":"updated"))}return(0,n.useEffect)((()=>(m.containerId=e.containerId,u.cancelEmit(3).on(0,_).on(1,(e=>h.current&&y(e))).on(5,v).emit(2,m),()=>{p.clear(),u.emit(3,m)})),[]),(0,n.useEffect)((()=>{m.props=e,m.isToastActive=f,m.displayedToast=i.length})),{getToastToRender:function(t){const i=new Map,n=Array.from(p.values());return e.newestOnTop&&n.reverse(),n.forEach((e=>{const{position:t}=e.props;i.has(t)||i.set(t,[]),i.get(t).push(e)})),Array.from(i,(e=>t(e[0],e[1])))},containerRef:h,isToastActive:f}}function m(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function v(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function y(e){const[t,i]=(0,n.useState)(!1),[r,s]=(0,n.useState)(!1),a=(0,n.useRef)(null),l=(0,n.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,c=(0,n.useRef)(e),{autoClose:h,pauseOnHover:d,closeToast:u,onClick:p,closeOnClick:g}=e;function f(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),l.didMove=!1,document.addEventListener("mousemove",x),document.addEventListener("mouseup",S),document.addEventListener("touchmove",x),document.addEventListener("touchend",S);const i=a.current;l.canCloseOnClick=!0,l.canDrag=!0,l.boundingRect=i.getBoundingClientRect(),i.style.transition="",l.x=m(t.nativeEvent),l.y=v(t.nativeEvent),"x"===e.draggableDirection?(l.start=l.x,l.removalDistance=i.offsetWidth*(e.draggablePercent/100)):(l.start=l.y,l.removalDistance=i.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function y(t){if(l.boundingRect){const{top:i,bottom:n,left:r,right:s}=l.boundingRect;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&l.x>=r&&l.x<=s&&l.y>=i&&l.y<=n?_():b()}}function b(){i(!0)}function _(){i(!1)}function x(i){const n=a.current;l.canDrag&&n&&(l.didMove=!0,t&&_(),l.x=m(i),l.y=v(i),l.delta="x"===e.draggableDirection?l.x-l.start:l.y-l.start,l.start!==l.x&&(l.canCloseOnClick=!1),n.style.transform="translate".concat(e.draggableDirection,"(").concat(l.delta,"px)"),n.style.opacity=""+(1-Math.abs(l.delta/l.removalDistance)))}function S(){document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",S),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",S);const t=a.current;if(l.canDrag&&l.didMove&&t){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance)return s(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate".concat(e.draggableDirection,"(0)"),t.style.opacity="1"}}(0,n.useEffect)((()=>{c.current=e})),(0,n.useEffect)((()=>(a.current&&a.current.addEventListener("d",b,{once:!0}),o(e.onOpen)&&e.onOpen((0,n.isValidElement)(e.children)&&e.children.props),()=>{const e=c.current;o(e.onClose)&&e.onClose((0,n.isValidElement)(e.children)&&e.children.props)})),[]),(0,n.useEffect)((()=>(e.pauseOnFocusLoss&&(document.hasFocus()||_(),window.addEventListener("focus",b),window.addEventListener("blur",_)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",b),window.removeEventListener("blur",_))})),[e.pauseOnFocusLoss]);const w={onMouseDown:f,onTouchStart:f,onMouseUp:y,onTouchEnd:y};return h&&d&&(w.onMouseEnter=_,w.onMouseLeave=b),g&&(w.onClick=e=>{p&&p(e),l.canCloseOnClick&&u()}),{playToast:b,pauseToast:_,isRunning:t,preventExitTransition:r,toastRef:a,eventHandlers:w}}function b(e){let{closeToast:t,theme:i,ariaLabel:r="close"}=e;return n.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(i),type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":r},n.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},n.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function _(e){let{delay:t,isRunning:i,closeToast:s,type:a="default",hide:l,className:c,style:h,controlledProgress:d,progress:u,rtl:p,isIn:g,theme:f}=e;const m=l||d&&0===u,v={...h,animationDuration:"".concat(t,"ms"),animationPlayState:i?"running":"paused",opacity:m?0:1};d&&(v.transform="scaleX(".concat(u,")"));const y=(0,r.default)("Toastify__progress-bar",d?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(f),"Toastify__progress-bar--".concat(a),{"Toastify__progress-bar--rtl":p}),b=o(c)?c({rtl:p,type:a,defaultClassName:y}):(0,r.default)(y,c);return n.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:b,style:v,[d&&u>=1?"onTransitionEnd":"onAnimationEnd"]:d&&u<1?null:()=>{g&&s()}})}const x=e=>{const{isRunning:t,preventExitTransition:i,toastRef:s,eventHandlers:a}=y(e),{closeButton:l,children:c,autoClose:h,onClick:d,type:u,hideProgressBar:p,closeToast:g,transition:f,position:m,className:v,style:x,bodyClassName:S,bodyStyle:w,progressClassName:C,progressStyle:k,updateId:A,role:E,progress:T,rtl:O,toastId:P,deleteToast:M,isIn:I,isLoading:R,iconOut:D,closeOnClick:L,theme:j}=e,F=(0,r.default)("Toastify__toast","Toastify__toast-theme--".concat(j),"Toastify__toast--".concat(u),{"Toastify__toast--rtl":O},{"Toastify__toast--close-on-click":L}),B=o(v)?v({rtl:O,position:m,type:u,defaultClassName:F}):(0,r.default)(F,v),N=!!T||!h,z={closeToast:g,type:u,theme:j};let H=null;return!1===l||(H=o(l)?l(z):(0,n.isValidElement)(l)?(0,n.cloneElement)(l,z):b(z)),n.createElement(f,{isIn:I,done:M,position:m,preventExitTransition:i,nodeRef:s},n.createElement("div",{id:P,onClick:d,className:B,...a,style:x,ref:s},n.createElement("div",{...I&&{role:E},className:o(S)?S({type:u}):(0,r.default)("Toastify__toast-body",S),style:w},null!=D&&n.createElement("div",{className:(0,r.default)("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!R})},D),n.createElement("div",null,c)),H,n.createElement(_,{...A&&!N?{key:"pb-".concat(A)}:{},rtl:O,theme:j,delay:h,isRunning:t,isIn:I,closeToast:g,hide:p,type:u,style:k,className:C,controlledProgress:N,progress:T||0})))},S=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},w=h(S("bounce",!0)),C=(h(S("slide",!0)),h(S("zoom")),h(S("flip")),(0,n.forwardRef)(((e,t)=>{const{getToastToRender:i,containerRef:s,isToastActive:a}=f(e),{className:c,style:h,rtl:d,containerId:u}=e;function p(e){const t=(0,r.default)("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":d});return o(c)?c({position:e,rtl:d,defaultClassName:t}):(0,r.default)(t,l(c))}return(0,n.useEffect)((()=>{t&&(t.current=s.current)}),[]),n.createElement("div",{ref:s,className:"Toastify",id:u},i(((e,t)=>{const i=t.length?{...h}:{...h,pointerEvents:"none"};return n.createElement("div",{className:p(e),style:i,key:"container-".concat(e)},t.map(((e,i)=>{let{content:r,props:s}=e;return n.createElement(x,{...s,isIn:a(s.toastId),style:{...s.style,"--nth":i+1,"--len":t.length},key:"toast-".concat(s.key)},r)})))})))})));C.displayName="ToastContainer",C.defaultProps={position:"top-right",transition:w,autoClose:5e3,closeButton:b,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let k,A=new Map,E=[],T=1;function O(){return""+T++}function P(e){return e&&(a(e.toastId)||s(e.toastId))?e.toastId:O()}function M(e,t){return A.size>0?u.emit(0,e,t):E.push({content:e,options:t}),t.toastId}function I(e,t){return{...t,type:t&&t.type||e,toastId:P(t)}}function R(e){return(t,i)=>M(t,I(e,i))}function D(e,t){return M(e,I("default",t))}D.loading=(e,t)=>M(e,I("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),D.promise=function(e,t,i){let n,{pending:r,error:s,success:l}=t;r&&(n=a(r)?D.loading(r,i):D.loading(r.render,{...i,...r}));const c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(e,t,r)=>{if(null==t)return void D.dismiss(n);const s={type:e,...c,...i,data:r},o=a(t)?{render:t}:t;return n?D.update(n,{...s,...o}):D(o.render,{...s,...o}),r},d=o(e)?e():e;return d.then((e=>h("success",l,e))).catch((e=>h("error",s,e))),d},D.success=R("success"),D.info=R("info"),D.error=R("error"),D.warning=R("warning"),D.warn=D.warning,D.dark=(e,t)=>M(e,I("default",{theme:"dark",...t})),D.dismiss=e=>{A.size>0?u.emit(1,e):E=E.filter((t=>null!=e&&t.options.toastId!==e))},D.clearWaitingQueue=function(e){return void 0===e&&(e={}),u.emit(5,e)},D.isActive=e=>{let t=!1;return A.forEach((i=>{i.isToastActive&&i.isToastActive(e)&&(t=!0)})),t},D.update=function(e,t){void 0===t&&(t={}),setTimeout((()=>{const i=function(e,t){let{containerId:i}=t;const n=A.get(i||k);return n&&n.getToast(e)}(e,t);if(i){const{props:n,content:r}=i,s={delay:100,...n,...t,toastId:t.toastId||e,updateId:O()};s.toastId!==e&&(s.staleId=e);const a=s.render||r;delete s.render,M(a,s)}}),0)},D.done=e=>{D.update(e,{progress:1})},D.onChange=e=>(u.on(4,e),()=>{u.off(4,e)}),D.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},D.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},u.on(2,(e=>{k=e.containerId||e,A.set(k,e),E.forEach((e=>{u.emit(0,e.content,e.options)})),E=[]})).on(3,(e=>{A.delete(e.containerId||e),0===A.size&&u.off(0).off(1).off(5)}))}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var s=Object.create(null);i.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,i.d(s,a),s}})(),i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>"static/js/"+e+"."+{151:"2336115f",585:"8c17dc8f"}[e]+".chunk.js",i.miniCssF=e=>{},i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="react-template:";i.l=(n,r,s,a)=>{if(e[n])e[n].push(r);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var d=c[h];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",t+s),o.src=n),e[n]=[r];var u=(t,i)=>{o.onerror=o.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(i))),t)return t(i)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="/",(()=>{var e={792:0};i.f.j=(t,n)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var s=new Promise(((i,n)=>r=e[t]=[i,n]));n.push(r[2]=s);var a=i.p+i.u(t),o=new Error;i.l(a,(n=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,s,a=n[0],o=n[1],l=n[2],c=0;if(a.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(l)l(i)}for(t&&t(n);c<a.length;c++)s=a[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunkreact_template=self.webpackChunkreact_template||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};i.r(e),i.d(e,{interpolateRgb:()=>QC});const t=e=>e;var n,r;!function(e){e["desktop-browser"]="desktop-browser",e["mobile-browser"]="mobile-browser",e.node="node",e.worker="worker",e.miniApp="miniApp",e.wx="wx",e["desktop-miniApp"]="desktop-miniApp",e.lynx="lynx"}(n||(n={})),function(e){e.cartesianAxis="cartesianAxis",e.cartesianBandAxis="cartesianAxis-band",e.cartesianLinearAxis="cartesianAxis-linear",e.cartesianTimeAxis="cartesianAxis-time",e.cartesianLogAxis="cartesianAxis-log",e.cartesianSymlogAxis="cartesianAxis-symlog",e.polarAxis="polarAxis",e.polarBandAxis="polarAxis-band",e.polarLinearAxis="polarAxis-linear",e.crosshair="crosshair",e.cartesianCrosshair="cartesianCrosshair",e.polarCrosshair="polarCrosshair",e.dataZoom="dataZoom",e.geoCoordinate="geoCoordinate",e.indicator="indicator",e.discreteLegend="discreteLegend",e.continuousLegend="continuousLegend",e.colorLegend="colorLegend",e.sizeLegend="sizeLegend",e.mapLabel="mapLabel",e.markLine="markLine",e.markArea="markArea",e.markPoint="markPoint",e.tooltip="tooltip",e.title="title",e.player="player",e.scrollBar="scrollBar",e.label="label",e.totalLabel="totalLabel",e.brush="brush",e.poptip="poptip",e.customMark="customMark"}(r||(r={}));var s=i(17283),a=i.n(s);const o=(e,t)=>Object.prototype.toString.call(e)==="[object ".concat(t,"]"),l=function(e){const t=typeof e;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"number"===t:"number"===t||o(e,"Number")},c="undefined"!=typeof console;function h(e,t,i){const n=[t].concat([].slice.call(i));c&&console[e].apply(console,n)}var d;!function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Info=3]="Info",e[e.Debug=4]="Debug"}(d||(d={}));class u{static getInstance(e,t){return u._instance&&l(e)?u._instance.level(e):u._instance||(u._instance=new u(e,t)),u._instance}static setInstance(e){return u._instance=e}static setInstanceLevel(e){u._instance?u._instance.level(e):u._instance=new u(e)}static clearInstance(){u._instance=null}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.None,t=arguments.length>1?arguments[1]:void 0;this._onErrorHandler=[],this._level=e,this._method=t}addErrorHandler(e){this._onErrorHandler.find((t=>t===e))||this._onErrorHandler.push(e)}removeErrorHandler(e){const t=this._onErrorHandler.findIndex((t=>t===e));t<0||this._onErrorHandler.splice(t,1)}callErrorHandler(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._onErrorHandler.forEach((e=>e(...t)))}canLogInfo(){return this._level>=d.Info}canLogDebug(){return this._level>=d.Debug}canLogError(){return this._level>=d.Error}canLogWarn(){return this._level>=d.Warn}level(e){return arguments.length?(this._level=+e,this):this._level}error(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return this._level>=d.Error&&(this._onErrorHandler.length?this.callErrorHandler(...i):h(null!==(e=this._method)&&void 0!==e?e:"error","ERROR",i)),this}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._level>=d.Warn&&h(this._method||"warn","WARN",t),this}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._level>=d.Info&&h(this._method||"log","INFO",t),this}debug(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._level>=d.Debug&&h(this._method||"log","DEBUG",t),this}}u._instance=null;let p=0;function g(){return p>1e8&&(p=0),(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dataset")+"_"+p++}class f{constructor(e){var t;let i;this.options=e,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new(a()),i=(null==e?void 0:e.name)?e.name:g("dataset"),this.name=i,this._logger=null!==(t=null==e?void 0:e.logger)&&void 0!==t?t:u.getInstance()}setLogger(e){this._logger=e}getDataView(e){return this.dataViewMap[e]}setDataView(e,t){var i;this.dataViewMap[e]&&(null===(i=this._logger)||void 0===i||i.error("Error: dataView ".concat(e," \u4e4b\u524d\u5df2\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u547d\u540d"))),this.dataViewMap[e]=t}removeDataView(e){this.dataViewMap[e]=null,delete this.dataViewMap[e]}registerParser(e,t){var i;this.parserMap[e]&&(null===(i=this._logger)||void 0===i||i.warn("Warn: transform ".concat(e," \u4e4b\u524d\u5df2\u6ce8\u518c\uff0c\u6267\u884c\u8986\u76d6\u903b\u8f91"))),this.parserMap[e]=t}removeParser(e){this.parserMap[e]=null,delete this.parserMap[e]}getParser(e){return this.parserMap[e]||this.parserMap.default}registerTransform(e,t){var i;this.transformMap[e]&&(null===(i=this._logger)||void 0===i||i.warn("Warn: transform ".concat(e," \u4e4b\u524d\u5df2\u6ce8\u518c\uff0c\u6267\u884c\u8986\u76d6\u903b\u8f91"))),this.transformMap[e]=t}removeTransform(e){this.transformMap[e]=null,delete this.transformMap[e]}getTransform(e){return this.transformMap[e]}multipleDataViewAddListener(e,t,i){this._callMap||(this._callMap=new Map);let n=this._callMap.get(i);n||(n=()=>{e.some((e=>e.isRunning))||i()}),e.forEach((e=>{e.target.addListener(t,n)})),this._callMap.set(i,n)}allDataViewAddListener(e,t){this.multipleDataViewAddListener(Object.values(this.dataViewMap),e,t)}multipleDataViewRemoveListener(e,t,i){if(this._callMap){const n=this._callMap.get(i);n&&e.forEach((e=>{e.target.removeListener(t,n)})),this._callMap.delete(i)}}multipleDataViewUpdateInParse(e){e.forEach((e=>{var t;return null===(t=this.getDataView(e.name))||void 0===t?void 0:t.markRunning()})),e.forEach((e=>{var t;return null===(t=this.getDataView(e.name))||void 0===t?void 0:t.parseNewData(e.data,e.options)}))}multipleDataViewUpdateInRawData(e){e.forEach((e=>{var t;return null===(t=this.getDataView(e.name))||void 0===t?void 0:t.markRunning()})),e.forEach((e=>{var t;return null===(t=this.getDataView(e.name))||void 0===t?void 0:t.updateRawData(e.data,e.options)}))}destroy(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}}const m=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"boolean"==typeof e:!0===e||!1===e||o(e,"Boolean")},v=e=>Array.isArray?Array.isArray(e):o(e,"Array"),y=(e,t,i)=>{const n=!m(null==t?void 0:t.dependencyUpdate)||(null==t?void 0:t.dependencyUpdate);if(!e||!v(e))throw new TypeError("Invalid data: must be DataView array!");return v(i.rawData)&&i.rawData.forEach((e=>{e.target&&(e.target.removeListener("change",i.reRunAllTransform),e.target.removeListener("markRunning",i.markRunning))})),n&&e.forEach((e=>{e.target.addListener("change",i.reRunAllTransform),e.target.addListener("markRunning",i.markRunning)})),e},b=e=>o(e,"Date"),_=function(e){const t=typeof e;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"string"===t:"string"===t||o(e,"String")},x=e=>null!=e;function S(e){let t;if(!x(e)||"object"!=typeof e)return e;const i=v(e),n=e.length;t=i?new Array(n):"object"==typeof e?{}:m(e)||l(e)||_(e)?e:b(e)?new Date(+e):void 0;const r=i?void 0:Object.keys(Object(e));let s=-1;if(t)for(;++s<(r||e).length;){const i=r?r[s]:s,n=e[i];t[i]=S(n)}return t}const w=function(e){return null!==e&&"function"!=typeof e&&Number.isFinite(e.length)},C=e=>"object"==typeof e&&null!==e,k=function(e){if(!C(e)||!o(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function A(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){if(e===t)return;if(x(t)&&"object"==typeof t){const n=Object(t),r=[];for(const e in n)r.push(e);let{length:s}=r,a=-1;for(;s--;){const s=r[++a];x(n[s])&&"object"==typeof n[s]?E(e,t,s,i):T(e,s,n[s])}}}}function E(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e[i],s=t[i];let a=t[i],o=!0;if(v(s)){if(n)a=[];else if(v(r))a=r;else if(w(r)){a=new Array(r.length);let e=-1;const t=r.length;for(;++e<t;)a[e]=r[e]}}else k(s)?(a=r,"function"!=typeof r&&"object"==typeof r||(a={})):o=!1;o&&A(a,s,n),T(e,i,a)}function T(e,t,i){(void 0!==i&&!function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e[t],i)||void 0===i&&!(t in e))&&(e[t]=i)}function O(e){let t=-1;const i=arguments.length<=1?0:arguments.length-1;for(;++t<i;)A(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1],!0);return e}const P=e=>null==e,M=(e,t)=>{var i,n;if(!(null==t?void 0:t.fields))return e;if(0===e.length)return e;const r=t.fields,s=e[0],a={},o=[];for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const t=r[l];if(!t.type){let n=s;l in s||(n=null!==(i=e.find((e=>l in e)))&&void 0!==i?i:s),t.type="number"==typeof n[l]?"linear":"ordinal"}let c;if("number"==typeof t.sortIndex&&(c={key:l,type:t.type,index:t.sortIndex,sortIndex:{},sortIndexCount:0,sortReverse:!0===t.sortReverse},o.push(c)),(null===(n=t.domain)||void 0===n?void 0:n.length)>0)if("ordinal"===t.type){t._domainCache={},a[l]=t;const e={};t.domain.forEach(((i,n)=>{e[i]=n,t._domainCache[i]=n})),c&&(c.sortIndex=e,c.sortIndexCount=t.domain.length)}else t.domain.length>=2&&(a[l]=t)}return Object.keys(a).length>0&&(e=e.filter((e=>{for(const t in a){const i=a[t];if("ordinal"===i.type){if(!(e[t]in i._domainCache))return!1}else if(i.domain[0]>e[t]||i.domain[1]<e[t])return!1}return!0}))),o.sort(((e,t)=>e.index-t.index)),e.sort(((e,t)=>function(e,t,i){for(let n=0;n<i.length;n++){const r=i[n];let s=0;if("ordinal"===r.type?(void 0===r.sortIndex[t[r.key]]&&(r.sortIndex[t[r.key]]=r.sortIndexCount++),void 0===r.sortIndex[e[r.key]]&&(r.sortIndex[e[r.key]]=r.sortIndexCount++),s=r.sortIndex[e[r.key]]-r.sortIndex[t[r.key]]):"linear"===r.type&&(s=e[r.key]-t[r.key]),r.sortReverse&&(s=-s),0!==s)return s}return 0}(e,t,o))),e};const I="_data-view-diff-rank";class R{constructor(e,t){var i=this;let n;this.dataSet=e,this.options=t,this.isDataView=!0,this.target=new(a()),this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pushHistory:!0,emitMessage:!0};return i.isRunning=!0,i.resetTransformData(),i.transformsArr.forEach((t=>{i.executeTransform(t,{pushHistory:e.pushHistory,emitMessage:!1}),i.isLastTransform(t)&&i.diffLastData()})),i.isRunning=!1,!1!==e.emitMessage&&i.target.emit("change",[]),i},this.markRunning=()=>{this.isRunning=!0,this.target.emit("markRunning",[])},n=(null==t?void 0:t.name)?t.name:g("dataview"),this.name=n,(null==t?void 0:t.history)&&(this.history=t.history,this.historyData=[]),this.dataSet.setDataView(n,this),this.setFields(null==t?void 0:t.fields)}parse(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n;this.isRunning=!0,i&&this.target.emit("beforeParse",[]),t&&(this.parseOption=t);const r=this.cloneParseData(e,t);if(null==t?void 0:t.type){const e=(null!==(n=this.dataSet.getParser(t.type))&&void 0!==n?n:this.dataSet.getParser("bytejson"))(r,t.options,this);this.rawData=r,this.parserData=e,this.history&&this.historyData.push(r,e),this.latestData=e}else this.parserData=r,this.rawData=r,this.history&&this.historyData.push(r),this.latestData=r;return this.isRunning=!1,i&&this.target.emit("afterParse",[]),this}transform(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.isRunning=!0,e&&e.type){let i=!0;if("fields"===e.type){this._fields=e.options.fields;const t=this.transformsArr.findIndex((t=>t.type===e.type));t>=0&&(i=!1,this.transformsArr[t].options.fields=this._fields)}if(i&&this.transformsArr.push(e),t){const t=this.isLastTransform(e);this.executeTransform(e),t&&this.diffLastData()}}return this.sortTransform(),this.isRunning=!1,this}isLastTransform(e){return this.transformsArr[this.transformsArr.length-1]===e}sortTransform(){this.transformsArr.length>=2&&this.transformsArr.sort(((e,t)=>{var i,n;return(null!==(i=e.level)&&void 0!==i?i:0)-(null!==(n=t.level)&&void 0!==n?n:0)}))}executeTransform(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pushHistory:!0,emitMessage:!0};const{pushHistory:i,emitMessage:n}=t,r=this.dataSet.getTransform(e.type)(this.latestData,e.options);this.history&&!1!==i&&this.historyData.push(r),this.latestData=r,!1!==n&&this.target.emit("change",[])}resetTransformData(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}enableDiff(e){this._diffData=!0,this._diffKeys=e,this._diffMap=new Map,this._diffRank=0}disableDiff(){this._diffData=!1,this._diffMap=null,this._diffRank=null}resetDiff(){this._diffMap=new Map,this._diffRank=0}diffLastData(){var e;if(!this._diffData)return;if(!this.latestData.forEach)return;if(!(null===(e=this._diffKeys)||void 0===e?void 0:e.length))return;const t=this._diffRank+1;if(0===this._diffRank)this.latestData.forEach((e=>{e[I]=t,this._diffMap.set(this._diffKeys.reduce(((t,i)=>t+e[i]),""),e)})),this.latestDataAUD={add:Array.from(this.latestData),del:[],update:[]};else{let e;this.latestDataAUD={add:[],del:[],update:[]},this.latestData.forEach((i=>{i[I]=t,e=this._diffKeys.reduce(((e,t)=>e+i[t]),""),this._diffMap.get(e)?this.latestDataAUD.update.push(i):this.latestDataAUD.add.push(i),this._diffMap.set(e,i)})),this._diffMap.forEach(((e,i)=>{e[I]<t&&(this.latestDataAUD.del.push(e),this._diffMap.delete(i))}))}this._diffRank=t}cloneParseData(e,t){let i=!1;return e instanceof R||!0!==(null==t?void 0:t.clone)||(i=!0),i?S(e):e}parseNewData(e,t){this.parse(e,t||this.parseOption),this.reRunAllTransform()}updateRawData(e,t){const i=this.cloneParseData(e,t);this.rawData=i,this.parserData=i,this.latestData=i,this.reRunAllTransform()}getFields(){var e;return this._fields?this._fields:"dataview"===(null===(e=this.parseOption)||void 0===e?void 0:e.type)&&1===this.rawData.length&&this.rawData[0].getFields?this.rawData[0].getFields():null}setFields(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._fields=e&&t?O({},this._fields,e):e;const i=this.transformsArr.find((e=>"fields"===e.type));!P(this._fields)&&P(i)?(this.dataSet.registerTransform("fields",M),this.transform({type:"fields",options:{fields:this._fields}},!1)):i&&(i.options.fields=this._fields)}destroy(){this.dataSet.removeDataView(this.name),this._diffMap=null,this._diffRank=null,this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}}const D=e=>{const t=typeof e;return null!==e&&"object"===t||"function"===t},L=e=>l(e)&&Number.isFinite(e);let j=!1;try{j="function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame}catch(H6){j=!1}j=!1;const F=function(e,t,i){let n,r,s,a,o,l,c=0,h=!1,d=!1,u=!0;const p=!t&&0!==t&&j;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){const i=n,s=r;return n=r=void 0,c=t,a=e.apply(s,i),a}function f(e,t){return p?(cancelAnimationFrame(o),requestAnimationFrame(e)):setTimeout(e,t)}function m(e){const i=e-l;return void 0===l||i>=t||i<0||d&&e-c>=s}function v(){const e=Date.now();if(m(e))return y(e);o=f(v,function(e){const i=e-c,n=t-(e-l);return d?Math.min(n,s-i):n}(e))}function y(e){return o=void 0,u&&n?g(e):(n=r=void 0,a)}function b(){const e=Date.now(),i=m(e);for(var s=arguments.length,u=new Array(s),p=0;p<s;p++)u[p]=arguments[p];if(n=u,r=this,l=e,i){if(void 0===o)return function(e){return c=e,o=f(v,t),h?g(e):a}(l);if(d)return o=f(v,t),g(l)}return void 0===o&&(o=f(v,t)),a}return t=+t||0,D(i)&&(h=!!i.leading,d="maxWait"in i,d&&(s=Math.max(L(i.maxWait)?i.maxWait:0,t)),u="trailing"in i?!!i.trailing:u),b.cancel=function(){void 0!==o&&function(e){if(p)return cancelAnimationFrame(e);clearTimeout(e)}(o),c=0,n=l=r=o=void 0},b.flush=function(){return void 0===o?a:y(Date.now())},b.pending=function(){return void 0!==o},b};function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:e=>e};if(!e)return e;if(e.constructor===Object){const i={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t[n]){i[n]=t[n](e[n]);continue}i[n]=B(e[n],t)}return i}return v(e)?e.map((e=>B(e,t))):e}function N(e,t){if(!e)return e;if(k(e)){const i={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(_(e[n])&&t.getFunction(e[n])){i[n]=t.getFunction(e[n]);continue}i[n]=N(e[n],t)}return i}return v(e)?e.map((e=>N(e,t))):e}function z(e){return x(e)?v(e)?e:[e]:[]}function H(e){if(w(e))return e[e.length-1]}const V=(e,t)=>{var i;if(0===e.length)return;let n=e[0];for(let r=1;r<e.length;r++){const s=e[r];(null!==(i=null==t?void 0:t(s,n))&&void 0!==i?i:s-n>0)&&(n=s)}return n},U=(e,t)=>{var i;if(0===e.length)return;let n=e[0];for(let r=1;r<e.length;r++){const s=e[r];(null!==(i=null==t?void 0:t(s,n))&&void 0!==i?i:s-n<0)&&(n=s)}return n};function W(e,t){if(!v(e)||!v(t))return!1;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function G(e){let t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,r=e.length;for(;r;)t=Math.floor(n()*r),i=e[--r],e[r]=e[t],e[t]=i;return e}function K(e){if(!v(e))return[e];const t=[];for(const i of e)t.push(...K(i));return t}let Y=0;function X(){return Y>=9999999&&(Y=0),Y++}function q(e){return null!=e&&""!==e&&(!!l(e)||+e==+e)}function Z(e){return!(!e||0===e.length)&&!P(e[0])&&!P(e[0].dataId)&&v(e[0].fields)}const Q=e=>"function"==typeof e;function $(e){switch(e){case"left":case"right":case"top":case"bottom":return!0;default:return!1}}function J(e){return!!_(e)&&!!e.endsWith("%")&&q(e.substring(0,e.length-1))}function ee(e,t,i){var n,r;return l(e)?e:J(e)?Number(e.substring(0,e.length-1))*t/100:Q(e)?e(i):D(e)?t*(null!==(n=e.percent)&&void 0!==n?n:0)+(null!==(r=e.offset)&&void 0!==r?r:0):0}function te(e,t,i){var n,r,s,a;const o={top:0,bottom:0,left:0,right:0};return Object.values(e).every((e=>l(e)))?(o.top=null!==(n=e.top)&&void 0!==n?n:0,o.right=null!==(r=e.right)&&void 0!==r?r:0,o.bottom=null!==(s=e.bottom)&&void 0!==s?s:0,o.left=null!==(a=e.left)&&void 0!==a?a:0,o):([{orients:["left","right"],size:t.width},{orients:["top","bottom"],size:t.height}].forEach((t=>{t.orients.forEach((n=>{o[n]=ee(e[n],t.size,i)}))})),o)}function ie(e){let t={};return v(e)?(P(e[0])||(t.top=t.left=t.bottom=t.right=e[0]),P(e[1])||(t.left=t.right=e[1]),P(e[2])||(t.bottom=e[2]),P(e[3])||(t.left=e[3]),t):l(e)||J(e)||Q(e)||D(i=e)&&("percent"in i||"offset"in i)?(t.top=t.left=t.bottom=t.right=e,t):D(e)?(t=Object.assign({},e),t):t;var i}function ne(e,t,i){return i?{x:e.x+t.x,y:e.y+t.y}:e}const re=(e,t)=>{const i=Number(e),n=e.toString();return isNaN(i)&&"%"===n[n.length-1]?t*(Number(n.slice(0,n.length-1))/100):i};const se=new class{};let ae;function oe(){if(null==ae)try{ae=globalThis===window,ae&&(ae=!!document.createElement)}catch(H6){ae=!1}}function le(){oe();const e=se.global&&se.global.env;return e?"browser"===e:ae}const ce=le(),he=ce&&globalThis?globalThis.document:void 0;function de(e){return("desktop-browser"===e||"mobile-browser"===e)&&ce}function ue(e){return pe(e)||"mobile-browser"===e}function pe(e){return e.includes("miniApp")||"lynx"===e||"wx"===e}const ge=(e,t)=>(Q(me.warnHandler)&&me.warnHandler.call(null,e,t),t?u.getInstance().warn("[VChart warn]: ".concat(e),t):u.getInstance().warn("[VChart warn]: ".concat(e))),fe=(e,t,i)=>{if(!me.silent){if(!Q(me.errorHandler))throw new Error(e);me.errorHandler.call(null,e,t)}},me={silent:!1,warnHandler:!1,errorHandler:!1};function ve(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){if(e===t)return;if(x(t)&&"object"==typeof t){const n=Object(t),r=[];for(const e in n)r.push(e);let{length:s}=r,a=-1;for(;s--;){const s=r[++a];x(n[s])&&"object"==typeof n[s]&&!v(e[s])?ye(e,t,s,i):be(e,s,n[s])}}}}function ye(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e[i],s=t[i];let a=t[i],o=!0;if(v(s)){if(n)a=[];else if(v(r))a=r;else if(w(r)){a=new Array(r.length);let e=-1;const t=r.length;for(;++e<t;)a[e]=r[e]}}else k(s)?(a=null!=r?r:{},"function"!=typeof r&&"object"==typeof r||(a={})):o=!1;o&&ve(a,s,n),be(e,i,a)}function be(e,t,i){(void 0!==i&&!function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e[t],i)||void 0===i&&!(t in e))&&(e[t]=i)}function _e(e){let t=-1;const i=arguments.length<=1?0:arguments.length-1;for(;++t<i;)ve(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1],!0);return e}function xe(e,t,i,n){Object.keys(e).forEach((r=>{if(D(t))t.type===r&&(v(e[r])?e[r].length>=t.index&&(e[r][t.index]=n?_e({},e[r][t.index],i):i):e[r]=n?_e({},e[r],i):i);else if(v(e[r])){const s=e[r].findIndex((e=>e.id===t));s>=0&&(e[r][s]=n?_e({},e[r][s],i):i)}else e.id===t&&(e[r]=n?_e({},e[r],i):i)}))}const Se=[{maxDomainLength:10,scheme:["#1664FF","#1AC6FF","#FF8A00","#3CC780","#7442D4","#FFC400","#304D77","#B48DEB","#009488","#FF7DDA"]},{scheme:["#1664FF","#B2CFFF","#1AC6FF","#94EFFF","#FF8A00","#FFCE7A","#3CC780","#B9EDCD","#7442D4","#DDC5FA","#FFC400","#FAE878","#304D77","#8B959E","#B48DEB","#EFE3FF","#009488","#59BAA8","#FF7DDA","#FFCFEE"]}],we={default:{dataScheme:Se,palette:{backgroundColor:"#ffffff",borderColor:"#e3e5e8",shadowColor:"rgba(33,37,44,0.1)",hoverBackgroundColor:"#f1f2f5",sliderRailColor:"#f1f3f4",sliderHandleColor:"#ffffff",sliderTrackColor:"#0040ff",popupBackgroundColor:"#ffffff",primaryFontColor:"#21252c",secondaryFontColor:"#606773",tertiaryFontColor:"#89909d",axisLabelFontColor:"#89909d",disableFontColor:"#bcc1cb",axisMarkerFontColor:"#ffffff",axisGridColor:"#f1f2f5",axisDomainColor:"#d9dde4",dataZoomHandleStrokeColor:"#aeb5be",dataZoomChartColor:"#c9ced8",playerControllerColor:"#0040ff",scrollBarSliderColor:"rgba(0,0,0,0.3)",axisMarkerBackgroundColor:"#21252c",markLabelBackgroundColor:"#f1f2f5",markLineStrokeColor:"#606773",dangerColor:"#e33232",warningColor:"#ffc528",successColor:"#07a35a",infoColor:"#3073f2"}}},Ce="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",ke=14,Ae=32,Ee=20,Te=16,Oe="150%",Pe=14,Me="150%",Ie=12,Re="130%",De=10,Le=4,je=.2,Fe={dot:{style:{size:10,fillOpacity:1}},symbol:{style:{size:10}},title:{style:{textAlign:"left",textBaseline:"middle",fontSize:Ie,lineHeight:Re}},subTitle:{style:{textAlign:"left",textBaseline:"top",fontSize:Ie,lineHeight:Re}}},Be={transform:{style:{fill:{type:"palette",key:"axisGridColor"}}},label:{style:{fill:"white",textBaseline:"middle",lineWidth:2}},outerLabel:{style:{fontSize:Pe,lineHeight:Me,fill:{type:"palette",key:"secondaryFontColor"}},line:{style:{stroke:{type:"palette",key:"axisDomainColor"}}}},transformLabel:{style:{fontSize:Pe,lineHeight:Me,fill:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle"}}},Ne={transform3d:{style:{fill:"#f5f5f5"}},label:{style:{fill:"white",textBaseline:"middle",lineWidth:2}},outerLabel:{style:{fontSize:Pe,lineHeight:Me,fill:"#707070"},line:{style:{stroke:{type:"palette",key:"axisDomainColor"}}}},transformLabel:{style:{fontSize:Pe,lineHeight:Me,fill:"#707070",textBaseline:"middle"}}},ze="M1 0 C1 0.55228 0.55228 1 0 1 C-0.552285 1 -1 0.55228 -1 0 C-1 -0.552285 -0.552285 -1 0 -1 C0.55228 -1 1 -0.552285 1 0Z",He={pointer:{type:"path",width:.4,height:.4,style:{path:"M-0.020059 -0.978425 C-0.018029 -0.9888053 -0.013378 -1 0 -1 C0.01342 -1 0.01812 -0.989146 0.0201 -0.978425 C0.02161 -0.9702819 0.0692 -0.459505 0.09486 -0.184807 C0.10298 -0.097849 0.1089 -0.034548 0.11047 -0.018339 C0.11698 0.04908 0.07373 0.11111 0.00002 0.11111 C-0.07369 0.11111 -0.117184 0.04991 -0.110423 -0.018339 C-0.103662 -0.086591 -0.022089 -0.9680447 -0.020059 -0.978425Z"}},pin:{width:.025,height:.025,style:{path:ze,fill:"#888"}},pinBackground:{width:.06,height:.06,style:{path:ze,fill:"#ddd"}}},Ve={defaultFillColor:"#f3f3f3",area:{style:{lineWidth:.5,strokeOpacity:1,stroke:"black",fillOpacity:1}},label:{interactive:!1,style:{fontSize:De,lineHeight:"120%",textBaseline:"middle",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},stroke:{type:"palette",key:"backgroundColor"}}}},Ue={seriesFieldName:{total:"total",increase:"increase",decrease:"decrease"},leaderLine:{style:{stroke:"black",lineWidth:1,lineDash:[4,4]}},stackLabel:{visible:!0,offset:12,position:"withChange",style:{fill:"black",fontSize:Pe,lineHeight:Me}},label:{visible:!1,offset:12,position:"inside"}},We={gapWidth:1,nodePadding:[5],nonLeaf:{visible:!1,style:{fillOpacity:.5}},label:{style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:Ie,lineHeight:Re}},nonLeafLabel:{padding:2*Ie,style:{fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:Ie,lineHeight:Re,textBaseline:"middle",textAlign:"center"}}},Ge="__VCHART",Ke=500,Ye=500,Xe="".concat(Ge,"_ARC_TRANSFORM_VALUE"),qe="".concat(Ge,"_ARC_RATIO"),Ze="".concat(Ge,"_ARC_START_ANGLE"),Qe="".concat(Ge,"_ARC_END_ANGLE"),$e="".concat(Ge,"_ARC_K"),Je="".concat(Ge,"_ARC_MIDDLE_ANGLE"),et="".concat(Ge,"_ARC_QUADRANT"),tt="".concat(Ge,"_ARC_RADIAN"),it=-Math.PI/2,nt=3*Math.PI/2,rt=-90,st=270,at=.6,ot={scatter:{point:{style:{size:8,symbolType:"circle",lineWidth:0,fillOpacity:.8}},label:{visible:!1,offset:5,position:"top",style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}},line:{label:{visible:!1,position:"top",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}},area:{label:{visible:!1,offset:5,position:"top",style:{stroke:{type:"palette",key:"backgroundColor"},lineWidth:2}},point:{style:{symbolType:"circle"}}},bar:{label:{visible:!1,position:"outside",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}},bar3d:{bar3d:{style:{length:3}},label:{visible:!1,style:{offset:12,position:"outside"}}},pie:{outerRadius:.6,pie:{style:{fillOpacity:1}},label:{visible:!1,position:"outside",style:{fontWeight:"normal",stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1}},innerLabel:{style:{lineWidth:2}}},pie3d:{outerRadius:.6,pie3d:{style:{height:10,fillOpacity:1}},label:{visible:!1,position:"outside"}},map:Ve,radar:{label:{visible:!1,offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}},dot:Fe,link:{arrow:{style:{size:10}}},wordCloud:{word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}},wordCloud3d:{word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}},funnel:Be,funnel3d:Ne,linearProgress:{bandWidth:30,progress:{style:{fillOpacity:1}},track:{style:{fill:"#E7EBED",fillOpacity:1}}},circularProgress:{outerRadius:.8,innerRadius:.6,progress:{style:{fillOpacity:1}},track:{style:{fillOpacity:.2}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}},waterfall:Ue,gauge:{outerRadius:.8,innerRadius:.6,padAngle:1.146,segment:{style:{fillOpacity:1}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}},gaugePointer:He,treemap:We,sunburst:{innerRadius:0,outerRadius:1,startAngle:rt,endAngle:st,gap:0,labelLayout:{align:"center",offset:0,rotate:"radial"},sunburst:{style:{stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1,cursor:"pointer"}},label:{visible:!0,style:{cursor:"pointer",fill:{type:"palette",key:"primaryFontColor"},fontSize:Ie,lineHeight:Re}}},rangeColumn:{label:{visible:!1,offset:5,position:"inside",style:{fill:{type:"palette",key:"axisMarkerFontColor"}},minLabel:{position:"end"},maxLabel:{position:"start"}}},circlePacking:{layoutPadding:5,circlePacking:{visible:!0,style:{cursor:"pointer",stroke:{type:"palette",key:"backgroundColor"}}},label:{visible:!0,style:{cursor:"pointer",fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:Ie,lineHeight:Re}}},heatmap:{cell:{style:{shape:"square",fillOpacity:1}},cellBackground:{visible:!1}},sankey:{link:{style:{fillOpacity:.15,round:!0}}},rose:{rose:{style:{fillOpacity:1}},label:{style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"},textAlign:"center",textBaseline:"middle"}}},boxPlot:{boxPlot:{style:{lineWidth:1}}},correlation:{centerLabel:{visible:!0,position:"center",style:{fill:"#fff",text:""}},label:{visible:!0,position:"bottom",style:{fill:"#000"}}}},lt={text:{style:{fontSize:Pe,lineHeight:Me,fontWeight:"normal",fillOpacity:1}}},ct={label:{style:{fontSize:Pe,fontWeight:"normal",fillOpacity:1}},area:{style:{fillOpacity:je}},line:{style:{lineWidth:2,lineCap:"round",lineJoin:"round"}},point:{style:{size:8,stroke:{type:"palette",key:"backgroundColor"},lineWidth:1,fillOpacity:1}},word:{style:{fontSize:null}},fillingWord:{style:{fontSize:null}},sunburst:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},circlePacking:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},funnel3d:{style:{stroke:!1}},barBackground:{visible:!1,style:{fill:{type:"palette",key:"primaryFontColor",a:.06}}}},ht={label:{space:8},title:{space:8},maxHeight:"30%",unit:{visible:!1,style:{fontSize:Ie,fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},dt={label:{space:12,autoLimit:!0},title:{space:12,autoRotate:!0},maxWidth:"30%",unit:{visible:!1,style:{fontSize:Ie,fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},ut=Object.assign(Object.assign({},ht),{label:{space:0}}),pt={domainLine:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},grid:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[]}},subGrid:{visible:!1,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[4,4]}},tick:{visible:!0,inside:!1,tickSize:Le,alignWithLabel:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},subTick:{visible:!1,tickSize:Le/2,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},label:{visible:!0,inside:!1,space:10,style:{fontSize:Ie,fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}},title:{space:10,padding:0,style:{fontSize:Ie,lineHeight:Re,fill:{type:"palette",key:"secondaryFontColor"},fontWeight:"normal",fillOpacity:1}}},gt=()=>({visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:Ie},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}),ft={trigger:"hover",bandField:{visible:!1,line:{type:"rect",visible:!0,style:{fill:{type:"palette",key:"axisGridColor"},opacity:.7,lineDash:[]}},label:gt()},linearField:{visible:!1,line:{type:"line",visible:!0,style:{stroke:{type:"palette",key:"markLineStrokeColor"},fill:{type:"palette",key:"axisGridColor"},opacity:.7,lineDash:[2,3]}},label:gt()}},mt="M-0.5-2.4h0.9c0.4,0,0.7,0.3,0.7,0.7v3.3c0,0.4-0.3,0.7-0.7,0.7h-0.9c-0.4,0-0.7-0.3-0.7-0.7v-3.3\nC-1.2-2-0.9-2.4-0.5-2.4z M-0.4-1.4L-0.4-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC-0.4-1.4-0.4-1.4-0.4-1.4z M0.3-1.4L0.3-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC0.3-1.4,0.3-1.4,0.3-1.4z;",vt={padding:[12,0],showDetail:"auto",brushSelect:!1,middleHandler:{visible:!1,background:{size:6,style:{stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},cornerRadius:2}},icon:{style:{size:4,fill:{type:"palette",key:"sliderHandleColor"},stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}}},background:{size:20,style:{fill:{type:"palette",key:"sliderRailColor"},lineWidth:0}},selectedBackground:{style:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.1,outerBorder:{stroke:{type:"palette",key:"sliderTrackColor"},strokeOpacity:.2,distance:-.5,lineWidth:1}}},selectedBackgroundChart:{area:{style:{visible:!1,stroke:!1,fill:{type:"palette",key:"dataZoomChartColor"}}},line:{style:{visible:!1,stroke:{type:"palette",key:"dataZoomChartColor"},lineWidth:1}}},startHandler:{style:{symbolType:mt,fill:{type:"palette",key:"sliderHandleColor"},scaleX:1.2,scaleY:1.2,stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},lineWidth:1}},endHandler:{style:{symbolType:mt,fill:{type:"palette",key:"sliderHandleColor"},scaleX:1.2,scaleY:1.2,stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},lineWidth:1}},startText:{padding:8,style:{fontSize:Ie,lineHeight:Re,fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},endText:{padding:8,style:{fontSize:Ie,lineHeight:Re,fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},backgroundChart:{area:{style:{stroke:!1,fill:{type:"palette",key:"dataZoomChartColor"}}},line:{style:{stroke:{type:"palette",key:"dataZoomChartColor"},lineWidth:1}}}},yt={title:{visible:!0,autoLimit:!1,autoFit:!1,style:{fontSize:Ae,fill:{type:"palette",key:"primaryFontColor"},fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}},content:{visible:!0,style:{fontSize:Ee,fill:{type:"palette",key:"tertiaryFontColor"},fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}}},bt={orient:"right",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:Ie,lineHeight:Re,fontWeight:"normal",fill:{type:"palette",key:"primaryFontColor"}},space:12},handler:{visible:!0},startText:{style:{fontSize:Ie,lineHeight:Re,fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},endText:{style:{fontSize:Ie,lineHeight:Re,fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},handlerText:{style:{fontSize:Ie,lineHeight:Re,fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6}},_t={style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:"#ffffff"},shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"}}},xt={horizontal:Object.assign(Object.assign({},bt),{rail:{width:200,height:8,style:{fill:{type:"palette",key:"sliderRailColor"}}},handler:_t}),vertical:Object.assign(Object.assign({},bt),{rail:{width:8,height:200,style:{fill:{type:"palette",key:"sliderRailColor"}}},handler:_t})},St={orient:"bottom",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:Ie,lineHeight:Re,fill:{type:"palette",key:"primaryFontColor"},fontWeight:"normal"},space:12},item:{visible:!0,spaceCol:10,spaceRow:6,padding:2,background:{state:{selectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}},unSelectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}}}},shape:{space:6,style:{lineWidth:0,fillOpacity:1,opacity:1},state:{unSelected:{fillOpacity:.2,opacity:1}}},label:{space:6,style:{fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},fontSize:Ie,lineHeight:Re,opacity:1},state:{unSelected:{fill:{type:"palette",key:"disableFontColor"},opacity:1}}}},allowAllCanceled:!1},wt={style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:{type:"palette",key:"sliderTrackColor"}},fill:{type:"palette",key:"sliderHandleColor"}}},Ct={horizontal:Object.assign(Object.assign({},bt),{sizeBackground:{fill:{type:"palette",key:"dataZoomChartColor"}},track:{style:{fill:{type:"palette",key:"sliderTrackColor",a:.8}}},rail:{width:200,height:4,style:{fill:{type:"palette",key:"sliderRailColor"}}},handler:wt}),vertical:Object.assign(Object.assign({},bt),{sizeBackground:{fill:{type:"palette",key:"dataZoomChartColor"}},track:{style:{fill:{type:"palette",key:"sliderTrackColor",a:.8}}},rail:{width:4,height:200,style:{fill:{type:"palette",key:"sliderRailColor"}}},handler:wt})},kt={name:"light",background:{type:"palette",key:"backgroundColor"},padding:20,fontFamily:Ce,colorScheme:we,mark:lt,markByName:ct,series:ot,component:{discreteLegend:St,colorLegend:xt,sizeLegend:Ct,axis:pt,axisBand:{domainLine:{visible:!0},grid:{visible:!1},subGrid:{visible:!1},tick:{visible:!0},subTick:{visible:!1}},axisLinear:{domainLine:{visible:!1},grid:{visible:!0},subGrid:{visible:!1},tick:{visible:!1},subTick:{visible:!1}},axisX:ht,axisY:dt,axisZ:ut,axisAngle:{grid:{visible:!0,style:{lineDash:[6,6]}},label:{space:5}},axisRadius:{grid:{smooth:!0,visible:!0},subGrid:{smooth:!0,visible:!1}},markLine:{line:{style:{lineDash:[3,3],stroke:{type:"palette",key:"markLineStrokeColor"}}},startSymbol:{visible:!1,symbolType:"triangle",size:10,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},endSymbol:{visible:!0,symbolType:"triangle",size:10,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},label:{refY:5,style:{fontSize:Pe,fontWeight:"normal",fontStyle:"normal",fill:{type:"palette",key:"primaryFontColor"}},labelBackground:{padding:{top:2,bottom:2,right:4,left:4},style:{cornerRadius:3,fill:{type:"palette",key:"markLabelBackgroundColor"}}}}},markArea:{area:{style:{fill:{type:"palette",key:"axisDomainColor",a:.25}}},label:{style:{fontSize:Pe,fontWeight:"normal",fontStyle:"normal",fill:{type:"palette",key:"primaryFontColor"}},labelBackground:{padding:{top:2,bottom:2,right:4,left:4},style:{cornerRadius:3,fill:{type:"palette",key:"markLabelBackgroundColor"}}}}},markPoint:{itemLine:{decorativeLine:{visible:!1},startSymbol:{size:5,visible:!0,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},endSymbol:{style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},line:{style:{stroke:{type:"palette",key:"markLineStrokeColor"}}}},itemContent:{offsetY:-50}},tooltip:{offset:{x:10,y:10},panel:{padding:{top:10,left:10,right:10,bottom:10},backgroundColor:{type:"palette",key:"popupBackgroundColor"},border:{color:{type:"palette",key:"popupBackgroundColor"},width:0,radius:3},shadow:{x:0,y:4,blur:12,spread:0,color:{type:"palette",key:"shadowColor"}}},spaceRow:6,titleLabel:{fontSize:Pe,lineHeight:Me,fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textAlign:"left",textBaseline:"middle",spacing:0},shape:{size:8,spacing:6},keyLabel:{fontSize:Pe,lineHeight:Me,fontColor:{type:"palette",key:"secondaryFontColor"},textAlign:"left",textBaseline:"middle",spacing:26},valueLabel:{fontSize:Pe,lineHeight:Me,fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0}},dataZoom:vt,crosshair:ft,player:{visible:!0,position:"start",padding:{top:20,bottom:20},slider:{space:10,trackStyle:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.8},railStyle:{fill:{type:"palette",key:"sliderRailColor"}},handlerStyle:{size:15,stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fill:{type:"palette",key:"playerControllerColor"}}},controller:{start:{order:0,space:0,style:{size:25,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},pause:{order:0,space:0,style:{size:25,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},backward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},forward:{order:0,space:10,position:"end",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}}}},brush:{style:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",lineWidth:2},brushMode:"single",brushType:"rect",brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:0},indicator:yt,title:{padding:{top:4,bottom:20},textStyle:{fontSize:Te,lineHeight:Oe,fill:{type:"palette",key:"primaryFontColor"}},subtextStyle:{fontSize:Pe,lineHeight:Me,fill:{type:"palette",key:"tertiaryFontColor"}}},mapLabel:{visible:!0,offset:12,position:"top",space:10,nameLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"left",fill:"black",fontSize:De}},valueLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"left",fill:"black",fontSize:De}},background:{visible:!0,padding:{top:4,bottom:4,left:6,right:6},style:{cornerRadius:2,lineWidth:1,fill:"white",stroke:"grey"}},leader:{visible:!1,style:{lineWidth:1,stroke:"red"}}},poptip:{visible:!0,position:"auto",padding:8,titleStyle:{fontSize:Ie,fontWeight:"bold",fill:{type:"palette",key:"primaryFontColor"}},contentStyle:{fontSize:Ie,fill:{type:"palette",key:"primaryFontColor"}},panel:{visible:!0,fill:{type:"palette",key:"popupBackgroundColor"},cornerRadius:3,lineWidth:0,shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"},size:0,space:12}},totalLabel:{visible:!1,offset:5,overlap:{clampForce:!0,strategy:[]},smartInvert:!1,animation:!1,style:{fontSize:Pe,fill:{type:"palette",key:"primaryFontColor"}}},scrollBar:{horizontal:{height:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}},vertical:{width:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}}}},animationThreshold:2e3},At=function(e,t,i){return e<t?t:e>i?i:e};function Et(e,t,i){t/=100,i/=100;const n=(1-Math.abs(2*i-1))*t,r=n*(1-Math.abs(e/60%2-1)),s=i-n/2;let a=0,o=0,l=0;return 0<=e&&e<60?(a=n,o=r,l=0):60<=e&&e<120?(a=r,o=n,l=0):120<=e&&e<180?(a=0,o=n,l=r):180<=e&&e<240?(a=0,o=r,l=n):240<=e&&e<300?(a=r,o=0,l=n):300<=e&&e<360&&(a=n,o=0,l=r),a=Math.round(255*(a+s)),o=Math.round(255*(o+s)),l=Math.round(255*(l+s)),{r:a,g:o,b:l}}function Tt(e,t,i){e/=255,t/=255,i/=255;const n=Math.min(e,t,i),r=Math.max(e,t,i),s=r-n;let a=0,o=0,l=0;return a=0===s?0:r===e?(t-i)/s%6:r===t?(i-e)/s+2:(e-t)/s+4,a=Math.round(60*a),a<0&&(a+=360),l=(r+n)/2,o=0===s?0:s/(1-Math.abs(2*l-1)),o=+(100*o).toFixed(1),l=+(100*l).toFixed(1),{h:a,s:o,l:l}}const Ot=/^#([0-9a-f]{3,8})$/,Pt={transparent:4294967040},Mt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function It(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Rt(e){return l(e)?new Ft(e>>16,e>>8&255,255&e,1):v(e)?new Ft(e[0],e[1],e[2]):new Ft(255,255,255)}function Dt(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Lt(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class jt{static Brighter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1===t?e:new jt(e).brighter(t).toRGBA()}static SetOpacity(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1===t?e:new jt(e).setOpacity(t).toRGBA()}static getColorBrightness(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hsl";const i=e instanceof jt?e:new jt(e);switch(t){case"hsv":default:return i.getHSVBrightness();case"hsl":return i.getHSLBrightness();case"lum":return i.getLuminance();case"lum2":return i.getLuminance2();case"lum3":return i.getLuminance3()}}static parseColorString(e){if(x(Pt[e]))return function(e){return l(e)?new Ft(e>>>24,e>>>16&255,e>>>8&255,255&e):v(e)?new Ft(e[0],e[1],e[2],e[3]):new Ft(255,255,255,1)}(Pt[e]);if(x(Mt[e]))return Rt(Mt[e]);const t="".concat(e).trim().toLowerCase(),i=Ot.exec(t);if(i){const e=parseInt(i[1],16),t=i[1].length;return 3===t?new Ft((e>>8&15)+((e>>8&15)<<4),(e>>4&15)+((e>>4&15)<<4),(15&e)+((15&e)<<4),1):6===t?Rt(e):8===t?new Ft(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):void 0}if(/^(rgb|RGB|rgba|RGBA)/.test(t)){const e=t.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new Ft(parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10),parseFloat(e[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(t)){const e=t.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),i=Et(parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10));return new Ft(i.r,i.g,i.b,parseFloat(e[3]))}}constructor(e){const t=jt.parseColorString(e);t?this.color=t:(console.warn("Warn: \u4f20\u5165".concat(e,"\u65e0\u6cd5\u89e3\u6790\u4e3aColor")),this.color=new Ft(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(e){const{r:t,g:i,b:n}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(t*e))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*e))),this.color.b=Math.max(0,Math.min(255,Math.floor(n*e))),this}add(e){const{r:t,g:i,b:n}=this.color;return this.color.r+=Math.min(255,t+e.color.r),this.color.g+=Math.min(255,i+e.color.g),this.color.b+=Math.min(255,n+e.color.b),this}sub(e){return this.color.r=Math.max(0,this.color.r-e.color.r),this.color.g=Math.max(0,this.color.g-e.color.g),this.color.b=Math.max(0,this.color.b-e.color.b),this}multiply(e){const{r:t,g:i,b:n}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(t*e.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*e.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(n*e.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return.5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(e,t,i){const n=this.color.opacity,r=Tt(this.color.r,this.color.g,this.color.b),s=Et(P(e)?r.h:At(e,0,360),P(t)?r.s:t>=0&&t<=1?100*t:t,P(i)?r.l:i<=1&&i>=0?100*i:i);return this.color=new Ft(s.r,s.g,s.b,n),this}setRGB(e,t,i){return!P(e)&&(this.color.r=e),!P(t)&&(this.color.g=t),!P(i)&&(this.color.b=i),this}setHex(e){const t="".concat(e).trim().toLowerCase(),i=Ot.exec(t),n=parseInt(i[1],16),r=i[1].length;return 3===r?new Ft((n>>8&15)+((n>>8&15)<<4),(n>>4&15)+((n>>4&15)<<4),(15&n)+((15&n)<<4),1):6===r?Rt(n):8===r?new Ft(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):this}setColorName(e){const t=Mt[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}setScalar(e){return this.color.r=e,this.color.g=e,this.color.b=e,this}setOpacity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.color.opacity=e,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}clone(){return new jt(this.color.toString())}copyGammaToLinear(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.color.r=Math.pow(e.color.r,t),this.color.g=Math.pow(e.color.g,t),this.color.b=Math.pow(e.color.b,t),this}copyLinearToGamma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const i=t>0?1/t:1;return this.color.r=Math.pow(e.color.r,i),this.color.g=Math.pow(e.color.g,i),this.color.b=Math.pow(e.color.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.color.r=Dt(e.color.r),this.color.g=Dt(e.color.g),this.color.b=Dt(e.color.b),this}copyLinearToSRGB(e){return this.color.r=Lt(e.color.r),this.color.g=Lt(e.color.g),this.color.b=Lt(e.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}}class Ft{constructor(e,t,i,n){this.r=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.g=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.b=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),x(n)?this.opacity=isNaN(+n)?1:Math.max(0,Math.min(1,+n)):this.opacity=1}formatHex(){return"#".concat(It(this.r)+It(this.g)+It(this.b)+(1===this.opacity?"":It(255*this.opacity)))}formatRgb(){const e=this.opacity;return"".concat(1===e?"rgb(":"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b).concat(1===e?")":",".concat(e,")"))}formatHsl(){const e=this.opacity,{h:t,s:i,l:n}=Tt(this.r,this.g,this.b);return"".concat(1===e?"hsl(":"hsla(").concat(t,",").concat(i,"%,").concat(n,"%").concat(1===e?")":",".concat(e,")"))}toString(){return this.formatHex()}}var Bt,Nt;function zt(e){var t,i;const{type:n}=e;return n===Bt.sankey?null!==(t=e.direction)&&void 0!==t?t:"horizontal":null!==(i=e.direction)&&void 0!==i?i:"vertical"}!function(e){e.area="area",e.line="line",e.bar="bar",e.bar3d="bar3d",e.rangeColumn="rangeColumn",e.rangeColumn3d="rangeColumn3d",e.rangeArea="rangeArea",e.dot="dot",e.geo="geo",e.link="link",e.map="map",e.pie="pie",e.pie3d="pie3d",e.radar="radar",e.rose="rose",e.scatter="scatter",e.circularProgress="circularProgress",e.wordCloud="wordCloud",e.wordCloud3d="wordCloud3d",e.funnel="funnel",e.funnel3d="funnel3d",e.linearProgress="linearProgress",e.boxPlot="boxPlot",e.sankey="sankey",e.gaugePointer="gaugePointer",e.gauge="gauge",e.treemap="treemap",e.sunburst="sunburst",e.circlePacking="circlePacking",e.waterfall="waterfall",e.heatmap="heatmap",e.correlation="correlation"}(Bt||(Bt={})),function(e){e.label="label",e.point="point",e.line="line",e.area="area",e.bar="bar",e.bar3d="bar3d",e.boxPlot="boxPlot",e.outlier="outlier",e.circlePacking="circlePacking",e.group="group",e.gridBackground="gridBackground",e.grid="grid",e.dot="dot",e.title="title",e.subTitle="subTitle",e.symbol="symbol",e.funnel="funnel",e.funnel3d="funnel3d",e.transform="transform",e.transform3d="transform3d",e.transformLabel="transformLabel",e.outerLabel="outerLabel",e.outerLabelLine="outerLabelLine",e.pin="pin",e.pinBackground="pinBackground",e.pointer="pointer",e.segment="segment",e.track="track",e.cell="cell",e.cellBackground="cellBackground",e.link="link",e.arrow="arrow",e.pie="pie",e.pie3d="pie3d",e.labelLine="labelLine",e.progress="progress",e.minLabel="minLabel",e.maxLabel="maxLabel",e.rose="rose",e.node="node",e.sunburst="sunburst",e.nonLeaf="nonLeaf",e.leaf="leaf",e.nonLeafLabel="nonLeafLabel",e.leaderLine="leaderLine",e.stackLabel="stackLabel",e.word="word",e.fillingWord="fillingWord",e.nodePoint="nodePoint",e.ripplePoint="ripplePoint",e.centerPoint="centerPoint",e.centerLabel="centerLabel",e.barBackground="barBackground",e.lineLabel="lineLabel",e.areaLabel="areaLabel"}(Nt||(Nt={}));const Ht={primaryFontColor:"titleFontColor",tertiaryFontColor:"labelFontColor",axisLabelFontColor:"axisFontColor",axisMarkerFontColor:"labelReverseFontColor",dataZoomHandleStrokeColor:"dataZoomHandlerStrokeColor",sliderHandleColor:"dataZoomHandlerFillColor",sliderRailColor:"dataZoomBackgroundColor",sliderTrackColor:"dataZoomSelectedColor",playerControllerColor:"dataZoomSelectedColor",popupBackgroundColor:"tooltipBackgroundColor",hoverBackgroundColor:"axisGridColor"},Vt={titleFontColor:"primaryFontColor",labelFontColor:"tertiaryFontColor",axisFontColor:"axisLabelFontColor",labelReverseFontColor:"axisMarkerFontColor",dataZoomHandlerStrokeColor:"dataZoomHandleStrokeColor",dataZoomHandlerFillColor:"sliderHandleColor",dataZoomBackgroundColor:"sliderRailColor",dataZoomSelectedColor:"sliderTrackColor",tooltipBackgroundColor:"popupBackgroundColor"};function Ut(e,t){var i;if(!e)return[];const n=Xt(e,t);if(!n||v(n))return null!==(i=n)&&void 0!==i?i:[];if(D(n)){const{dataScheme:i}=n;return i?Yt(i)?i.map((i=>Object.assign(Object.assign({},i),{scheme:i.scheme.map((i=>Kt(i)?Gt(e,i,t):i)).filter(x)}))):i.map((i=>Kt(i)?Gt(e,i,t):i)).filter(x):[]}return[]}function Wt(e,t){var i,n;return Yt(e)?null!==(n=null===(i=e.find((e=>x(e.isAvailable)?Q(e.isAvailable)?e.isAvailable(t):!!e.isAvailable:!x(e.maxDomainLength)||(null==t?void 0:t.length)<=e.maxDomainLength)))||void 0===i?void 0:i.scheme)&&void 0!==n?n:e[e.length-1].scheme:e}function Gt(e,t,i){var n;const r=Xt(e,i);if(!r)return;let s;const{palette:a}=r;if(D(a)&&(s=null!==(n=function(e,t){const i=Ht[t];if(i&&e[i])return e[i];if(e[t])return e[t];const n=Vt[t];return n?e[n]:void 0}(a,t.key))&&void 0!==n?n:t.default),!s)return;if(P(t.a)&&P(t.l)||!_(s))return s;let o=new jt(s);if(x(t.l)){const{r:e,g:i,b:n}=o.color,{h:r,s:s}=Tt(e,i,n),a=Et(r,s,t.l),l=new jt("rgb(".concat(a.r,", ").concat(a.g,", ").concat(a.b,")"));l.setOpacity(o.color.opacity),o=l}return x(t.a)&&o.setOpacity(t.a),o.toRGBA()}function Kt(e){return e&&"palette"===e.type&&!!e.key}function Yt(e){return!(!v(e)||0===e.length)&&e.every((e=>x(e.scheme)))}function Xt(e,t){var i,n;const{type:r}=null!=t?t:{};let s;if(!t||P(r))s=null==e?void 0:e.default;else{const a=zt(t);s=null!==(n=null!==(i=null==e?void 0:e["".concat(r,"_").concat(a)])&&void 0!==i?i:null==e?void 0:e[r])&&void 0!==n?n:null==e?void 0:e.default}return s}const qt={label:{name:"label",type:"text"}},Zt="".concat(Ge,"_rect_x"),Qt="".concat(Ge,"_rect_x1"),$t="".concat(Ge,"_rect_y"),Jt="".concat(Ge,"_rect_y1"),ei=Object.assign(Object.assign({},qt),{bar:{name:"bar",type:"rect"},barBackground:{name:"barBackground",type:"rect"}}),ti=Object.assign(Object.assign({},qt),{bar3d:{name:"bar3d",type:"rect3d"}}),ii={point:{name:"point",type:"symbol"},line:{name:"line",type:"line"}},ni=Object.assign(Object.assign({},qt),ii),ri=Object.assign(Object.assign({},qt),{point:{name:"point",type:"symbol"}}),si=Object.assign(Object.assign(Object.assign({},qt),ii),{area:{name:"area",type:"area"}}),ai=Object.assign(Object.assign(Object.assign({},qt),ii),{area:{name:"area",type:"area"}}),oi=Object.assign(Object.assign({},qt),{pie:{name:"pie",type:"arc"},labelLine:{name:"labelLine",type:"path"}}),li=Object.assign(Object.assign({},qt),{pie3d:{name:"pie3d",type:"arc3d"},labelLine:{name:"labelLine",type:"path"}}),ci=Object.assign(Object.assign({},qt),{rose:{name:"rose",type:"arc"}}),hi=Object.assign(Object.assign({},qt),{area:{name:"area",type:"path"}}),di=Object.assign(Object.assign({},qt),{group:{name:"group",type:"group"}}),ui=Object.assign(Object.assign({},di),{track:{name:"track",type:"progressArc"},progress:{name:"progress",type:"progressArc"}}),pi=Object.assign(Object.assign({},qt),{group:{name:"group",type:"group"},link:{name:"link",type:"rule"},arrow:{name:"arrow",type:"symbol"}}),gi=Object.assign(Object.assign({},qt),{group:{name:"group",type:"group"},grid:{name:"grid",type:"rule"},gridBackground:{name:"gridBackground",type:"rect"},dot:{name:"dot",type:"symbol"},title:{name:"title",type:"text"},subTitle:{name:"subTitle",type:"text"},symbol:{name:"symbol",type:"symbol"}}),fi=Object.assign(Object.assign({},qt),{word:{name:"word",type:"text"},fillingWord:{name:"fillingWord",type:"text"}}),mi=Object.assign(Object.assign({},qt),{funnel:{name:"funnel",type:"polygon"},transform:{name:"transform",type:"polygon"},transformLabel:{name:"transformLabel",type:"text"},outerLabel:{name:"outerLabel",type:"text"},outerLabelLine:{name:"outerLabelLine",type:"rule"}}),vi=Object.assign(Object.assign({},qt),{funnel3d:{name:"funnel3d",type:"pyramid3d"},transform3d:{name:"transform3d",type:"pyramid3d"},transformLabel:{name:"transformLabel",type:"text"},outerLabel:{name:"outerLabel",type:"text"},outerLabelLine:{name:"outerLabelLine",type:"rule"}}),yi=Object.assign(Object.assign({},qt),{track:{name:"track",type:"rect"},progress:{name:"progress",type:"rect"},group:{name:"group",type:"group"}}),bi=Object.assign(Object.assign({},ei),{leaderLine:{name:"leaderLine",type:"rule"},stackLabel:{name:"stackLabel",type:"text"}}),_i=Object.assign(Object.assign({},qt),{boxPlot:{name:"boxPlot",type:"boxPlot"},outlier:{name:"outlier",type:"symbol"}}),xi=Object.assign(Object.assign({},qt),{nonLeaf:{name:"nonLeaf",type:"rect"},leaf:{name:"leaf",type:"rect"},nonLeafLabel:{name:"nonLeafLabel",type:"text"}}),Si=Object.assign(Object.assign({},qt),{node:{name:"node",type:"rect"},link:{name:"link",type:"linkPath"}}),wi=Object.assign(Object.assign({},di),{segment:{name:"segment",type:"progressArc"},track:{name:"track",type:"progressArc"}}),Ci=Object.assign(Object.assign({},qt),{pin:{name:"pin",type:"path"},pinBackground:{name:"pinBackground",type:"path"},pointer:{name:"pointer",type:["path","rect"]}}),ki=Object.assign(Object.assign({},qt),{sunburst:{name:"sunburst",type:"arc"}}),Ai=Object.assign(Object.assign({},ei),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}}),Ei=Object.assign(Object.assign({},ti),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}}),Ti=Object.assign(Object.assign({},qt),{circlePacking:{name:"circlePacking",type:"arc"}}),Oi=Object.assign(Object.assign({},qt),{cell:{name:"cell",type:"cell"},cellBackground:{name:"cellBackground",type:"cell"}}),Pi=Object.assign(Object.assign({},qt),{nodePoint:{name:"nodePoint",type:"symbol"},ripplePoint:{name:"ripplePoint",type:"ripple"},centerPoint:{name:"centerPoint",type:"symbol"},centerLabel:{name:"centerLabel",type:"text"}}),Mi=Object.assign({},si);var Ii;!function(e){e.area_horizontal="area_horizontal",e.area_vertical="area_vertical",e.line_horizontal="line_horizontal",e.line_vertical="line_vertical",e.bar_horizontal="bar_horizontal",e.bar_vertical="bar_vertical",e.bar3d_horizontal="bar3d_horizontal",e.bar3d_vertical="bar3d_vertical",e.rangeColumn_horizontal="rangeColumn_horizontal",e.rangeColumn_vertical="rangeColumn_vertical",e.rangeColumn3d_horizontal="rangeColumn3d_horizontal",e.rangeColumn3d_vertical="rangeColumn3d_vertical",e.rangeArea_horizontal="rangeArea_horizontal",e.rangeArea_vertical="rangeArea_vertical",e.linearProgress_horizontal="linearProgress_horizontal",e.linearProgress_vertical="linearProgress_vertical",e.boxPlot_horizontal="boxPlot_horizontal",e.boxPlot_vertical="boxPlot_vertical",e.sankey_horizontal="sankey_horizontal",e.sankey_vertical="sankey_vertical",e.waterfall_horizontal="waterfall_horizontal",e.waterfall_vertical="waterfall_vertical"}(Ii||(Ii={}));const Ri={[Bt.bar]:ei,[Bt.bar3d]:ti,[Bt.line]:ni,[Bt.scatter]:ri,[Bt.area]:si,[Bt.radar]:ai,[Bt.pie]:oi,[Bt.pie3d]:li,[Bt.rose]:ci,[Bt.geo]:qt,[Bt.map]:hi,[Bt.circularProgress]:ui,[Bt.link]:pi,[Bt.dot]:gi,[Bt.wordCloud]:fi,[Bt.wordCloud3d]:fi,[Bt.funnel]:mi,[Bt.funnel3d]:vi,[Bt.linearProgress]:yi,[Bt.waterfall]:bi,[Bt.boxPlot]:_i,[Bt.treemap]:xi,[Bt.sankey]:Si,[Bt.gauge]:wi,[Bt.gaugePointer]:Ci,[Bt.sunburst]:ki,[Bt.rangeColumn]:Ai,[Bt.rangeColumn3d]:Ei,[Bt.circlePacking]:Ti,[Bt.heatmap]:Oi,[Bt.correlation]:Pi,[Bt.rangeArea]:Mi};function Di(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return _e(Li(e),...i.map(Li))}function Li(e){if(!e)return e;const t=function(e){return e&&(e=Object.keys(e).reduce(((t,i)=>{const n=e[i];return t[i]=function(e){return v(e)?{dataScheme:e}:e}(n),t}),{})),e}(e.colorScheme),{series:i}=e,{mark:n,markByName:r}=e;let s;return(n||r)&&(s=Object.keys(Ri).reduce(((e,t)=>{var s;const a=null!==(s=null==i?void 0:i[t])&&void 0!==s?s:{};return e[t]=ji(a,t,n,r),e}),{})),Object.assign({},e,{colorScheme:t,series:Object.assign({},e.series,s)})}function ji(e,t,i,n){if(!Ri[t])return e;const r={};return Object.values(Ri[t]).forEach((t=>{let{type:s,name:a}=t;r[a]=_e({},null==i?void 0:i[z(s)[0]],null==n?void 0:n[a],null==e?void 0:e[a])})),Object.assign(Object.assign({},e),r)}const Fi=["animationThreshold","colorScheme","fontFamily","name","padding"];function Bi(e,t,i){if(!e)return e;const n={};return Object.keys(e).forEach((r=>{const s=e[r];Fi.includes(r)?n[r]=s:k(s)?Kt(s)?n[r]=((e,t,i)=>{if(t&&Kt(e)){const n=Gt(t,e,i);if(n)return n}return e})(s,t,i):n[r]=Bi(s,t,i):n[r]=s})),n}const Ni={[kt.name]:kt},zi=kt.name,Hi=new Map(Object.keys(Ni).map((e=>[e,Ni[e]]))),Vi=new Map(Object.keys(Ni).map((e=>[e,Bi(Ni[e],Ni[e].colorScheme)]))),Ui=new Map(Object.keys(Ni).map((e=>[e,e===zi]))),Wi=(e,t)=>{if(!e)return;const i=Ki(t);Hi.set(e,i),Vi.set(e,Bi(i,i.colorScheme)),Ui.set(e,!0)},Gi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zi,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ui.has(e)&&!Ui.get(e)&&Wi(e,Hi.get(e)),t?Vi.get(e):Hi.get(e)},Ki=e=>{var t;const i=null!==(t=e.type)&&void 0!==t?t:zi;return Di({},Gi(i),e)};class Yi{static registerInstance(e){Yi.instances.set(e.id,e)}static unregisterInstance(e){Yi.instances.delete(e.id)}static getInstance(e){return Yi.instances.get(e)}static instanceExist(e){return Yi.instances.has(e)}static forEach(e){let t=arguments.length>2?arguments[2]:void 0;const i=z(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]);return Yi.instances.forEach(((t,n,r)=>{i.includes(n)||e(t,n,r)}),t)}}Yi.instances=new Map;class Xi{static registerTheme(e,t){Wi(e,t)}static getTheme(e){return Gi(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}static removeTheme(e){return(e=>Hi.delete(e)&&Vi.delete(e)&&Ui.delete(e))(e)}static themeExist(e){return(e=>!!_(e)&&Hi.has(e))(e)}static getDefaultTheme(){return Xi.themes.get(zi)}static setCurrentTheme(e){Xi.themeExist(e)&&(Xi._currentThemeName=e,Yi.forEach((t=>null==t?void 0:t.setCurrentTheme(e))))}static getCurrentTheme(){return Xi.getTheme(Xi._currentThemeName)}static getCurrentThemeName(){return Xi._currentThemeName}}function qi(e,t){return _(e)?Xi.themeExist(e)?Xi.getTheme(e,t):{}:D(e)?e:{}}Xi.themes=Hi,Xi._currentThemeName=zi;var Zi=i(23785),Qi=i.n(Zi);const $i=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return function(e){e||(e={});let t=-1;const i=arguments.length<=1?0:arguments.length-1;for(;++t<i;)en(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]);return e}(S(e),...i)};function Ji(e,t,i){const n=t[i];if(void 0===n)e[i]=null;else if(D(n)){D(e[i])||(e[i]={});for(const t in n)Ji(e[i],n,t)}else e[i]=n}function en(e,t){if(D(t)&&e!==t)for(const i in t)Ji(e,t,i)}const tn={tolerance:.01},nn=(e,t)=>{const i=$i(tn,t),{tolerance:n}=i;return Qi()(e,n)};var rn={},sn={};function an(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function on(e){var t=Object.create(null),i=[];return e.forEach((function(e){for(var n in e)n in t||i.push(t[n]=n)})),i}function ln(e,t){var i=e+"",n=i.length;return n<t?new Array(t-n+1).join(0)+i:i}function cn(e){var t,i=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+ln(-t,6):t>9999?"+"+ln(t,6):ln(t,4))+"-"+ln(e.getUTCMonth()+1,2)+"-"+ln(e.getUTCDate(),2)+(s?"T"+ln(i,2)+":"+ln(n,2)+":"+ln(r,2)+"."+ln(s,3)+"Z":r?"T"+ln(i,2)+":"+ln(n,2)+":"+ln(r,2)+"Z":n||i?"T"+ln(i,2)+":"+ln(n,2)+"Z":"")}function hn(e){var t=new RegExp('["'+e+"\n\r]"),i=e.charCodeAt(0);function n(e,t){var n,r=[],s=e.length,a=0,o=0,l=s<=0,c=!1;function h(){if(l)return sn;if(c)return c=!1,rn;var t,n,r=a;if(34===e.charCodeAt(r)){for(;a++<s&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=s?l=!0:10===(n=e.charCodeAt(a++))?c=!0:13===n&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(r+1,t-1).replace(/""/g,'"')}for(;a<s;){if(10===(n=e.charCodeAt(t=a++)))c=!0;else if(13===n)c=!0,10===e.charCodeAt(a)&&++a;else if(n!==i)continue;return e.slice(r,t)}return l=!0,e.slice(r,s)}for(10===e.charCodeAt(s-1)&&--s,13===e.charCodeAt(s-1)&&--s;(n=h())!==sn;){for(var d=[];n!==rn&&n!==sn;)d.push(n),n=h();t&&null==(d=t(d,o++))||r.push(d)}return r}function r(t,i){return t.map((function(t){return i.map((function(e){return a(t[e])})).join(e)}))}function s(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?cn(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var i,r,s=n(e,(function(e,n){if(i)return i(e,n-1);r=e,i=t?function(e,t){var i=an(e);return function(n,r){return t(i(n),r,e)}}(e,t):an(e)}));return s.columns=r||[],s},parseRows:n,format:function(t,i){return null==i&&(i=on(t)),[i.map(a).join(e)].concat(r(t,i)).join("\n")},formatBody:function(e,t){return null==t&&(t=on(e)),r(e,t).join("\n")},formatRows:function(e){return e.map(s).join("\n")},formatRow:s,formatValue:a}}var dn,un=hn(","),pn=un.parse,gn=(un.parseRows,un.format,un.formatBody,un.formatRows,un.formatRow,un.formatValue,hn("\t")),fn=gn.parse;gn.parseRows,gn.format,gn.formatBody,gn.formatRows,gn.formatRow,gn.formatValue;!function(e){e.DSV="dsv",e.TREE="tree",e.GEO="geo",e.BYTE="bytejson",e.HEX="hex",e.GRAPH="graph",e.TABLE="table",e.GEO_GRATICULE="geo-graticule"}(dn||(dn={}));const mn={delimiter:","},vn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(arguments.length>2?arguments[2]:void 0).type=dn.DSV;const i=$i(mn,t),{delimiter:n}=i;if(!_(n))throw new TypeError("Invalid delimiter: must be a string!");return hn(n).parse(e)},yn=function(e){return(arguments.length>2?arguments[2]:void 0).type=dn.DSV,pn(e)},bn=function(e){return(arguments.length>2?arguments[2]:void 0).type=dn.DSV,fn(e)};class _n{static registerChart(e,t){_n._charts[e]=t}static registerSeries(e,t){_n._series[e]=t}static registerComponent(e,t,i){_n._components[e]={cmp:t,alwaysCheck:i}}static registerMark(e,t){_n._marks[e]=t}static registerRegion(e,t){_n._regions[e]=t}static registerTransform(e,t){_n.transforms[e]=t}static registerLayout(e,t){_n._layout[e]=t}static registerAnimation(e,t){_n._animations[e]=t}static registerImplement(e,t){_n._implements[e]=t}static registerChartPlugin(e,t){_n._chartPlugin[e]=t}static createChart(e,t,i){return _n._charts[e]?new(0,_n._charts[e])(t,i):null}static createChartSpecTransformer(e,t){if(!_n._charts[e])return null;const i=_n._charts[e];return new(0,i.transformerConstructor)(Object.assign({seriesType:i.seriesType},t))}static createRegion(e,t,i){return _n._regions[e]?new(0,_n._regions[e])(t,i):null}static createRegionSpecTransformer(e,t){return _n._regions[e]?new(0,_n._regions[e].transformerConstructor)(t):null}static createSeries(e,t,i){return _n._series[e]?new(0,_n._series[e])(t,i):null}static createSeriesSpecTransformer(e,t){return _n._series[e]?new(0,_n._series[e].transformerConstructor)(t):null}static createMark(e,t,i){if(!_n._marks[e])return null;const n=new(0,_n._marks[e])(t,i);return"group"===n.type&&n.setInteractive(!1),n}static getComponents(){return Object.values(_n._components)}static getComponentInKey(e){return _n._components[e].cmp}static getLayout(){return Object.values(_n._layout)}static getLayoutInKey(e){return _n._layout[e]}static getSeries(){return Object.values(_n._series)}static getSeriesInType(e){return _n._series[e]}static getRegionInType(e){return _n._regions[e]}static getAnimationInKey(e){return _n._animations[e]}static getImplementInKey(e){return _n._implements[e]}static getSeriesMarkMap(e){return _n._series[e]?_n._series[e].mark:{}}static getChartPlugins(){return Object.values(_n._chartPlugin)}}var xn,Sn;_n._charts={},_n._series={},_n._components={},_n._marks={},_n._regions={},_n._animations={},_n._implements={},_n._chartPlugin={},_n.transforms={simplify:nn,fields:M,filter:(e,t)=>{const{callback:i}=t;return i&&(e=e.filter(i)),e},fold:(e,t)=>{const{fields:i,key:n,value:r,retains:s}=t,a=[];for(let o=0;o<e.length;o++)i.forEach((t=>{const l={};if(l[n]=t,l[r]=e[o][t],s)s.forEach((t=>{l[t]=e[o][t]}));else for(const n in e[o])-1===i.indexOf(n)&&(l[n]=e[o][n]);a.push(l)}));return a}},_n.dataParser={csv:yn,dsv:vn,tsv:bn},_n._layout={},function(e){e.dimensionHover="dimensionHover",e.dimensionClick="dimensionClick"}(xn||(xn={})),function(e){e.Identity="identity",e.Linear="linear",e.Log="log",e.Pow="pow",e.Sqrt="sqrt",e.Symlog="symlog",e.Time="time",e.Quantile="quantile",e.Quantize="quantize",e.Threshold="threshold",e.Ordinal="ordinal",e.Point="point",e.Band="band"}(Sn||(Sn={}));const wn={};function Cn(e){switch(e){case Sn.Linear:case Sn.Log:case Sn.Pow:case Sn.Sqrt:case Sn.Symlog:case Sn.Time:return!0;default:return!1}}function kn(e){return!!wn[e]}function An(e){switch(e){case Sn.Ordinal:case Sn.Point:case Sn.Band:return!0;default:return!1}}Object.values(Sn).forEach((e=>{wn[e]=!0}));const En=(e,t)=>{var i,n;return e===t||!P(e)&&!P(t)&&e.value===t.value&&(null===(i=e.axis)||void 0===i?void 0:i.id)===(null===(n=t.axis)||void 0===n?void 0:n.id)},Tn=(e,t,i,n)=>{var r;const s=An(t.getScale().type),a=[],o=t.getRegions();for(const l of o){const o=l.getSeries();for(const l of o)if(l.coordinate===i){const i=z(n(l)),o=null===(r=l.getViewData())||void 0===r?void 0:r.latestData;if(i&&o)if(s)a.push({series:l,datum:o.filter((t=>{var n;return(null===(n=t[i[0]])||void 0===n?void 0:n.toString())===(null==e?void 0:e.toString())}))});else if(x(i[1]))a.push({series:l,datum:o.filter((t=>{var n;return(null===(n=t[i[0]])||void 0===n?void 0:n.toString())===(null==e?void 0:e.toString())||x(t[i[0]])&&x(t[i[1]])&&e>=t[i[0]]&&e<t[i[1]]}))});else{const n=t.getSpec().tooltipFilterRange,r=L(n)?[-n,n]:n;let s=[];if(r)o.forEach((t=>{if(x(t[i[0]])){const n=t[i[0]]-e;n>=r[0]&&n<=r[1]&&s.push(t)}}));else{let t=1/0,n=0;o.forEach((r=>{if(x(r[i[0]])){const a=Math.abs(r[i[0]]-e),o=Math.sign(r[i[0]]-e);a<t?(t=a,s=[r],n=o):a===t&&o===n&&s.push(r)}}))}a.push({series:l,datum:s})}}}return a},On=(e,t,i)=>{const n=e.getAllComponents().filter((n=>"axes"===n.specKey&&t(n)&&((e,t,i)=>{const n=e.getRegionsInIds(z(t.layout.layoutBindRegionID));return null==n?void 0:n.some((e=>{const t=e.getLayoutRect(),n=e.getLayoutStartPoint();return((e,t,i)=>e.x>=t.x&&e.x<=i.x&&e.y>=t.y&&e.y<=i.y)(i,{x:n.x,y:n.y},{x:t.width+n.x,y:t.height+n.y})}))})(e,n,i)));return n.length?n:null};function Pn(e,t,i,n){let r,s,a=-1;e.forEach((e=>{r=t(e),s=i(e),!P(r)&&(r=+r)>=r&&!P(s)&&(s=+s)>=s&&n(r,s,++a)}))}function Mn(e,t,i,n,r){let s=0,a=0;return Pn(e,t,i,((e,t)=>{const i=t-r(e),o=t-n;s+=i*i,a+=o*o})),1-s/a}function In(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e.x,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e.y,n=0,r=0,s=0,a=0,o=0;Pn(e,t,i,((e,t)=>{++o,n+=(e-n)/o,r+=(t-r)/o,s+=(e*t-s)/o,a+=(e*e-a)/o}));const l=function(e,t,i,n){const r=n-e*e,s=Math.abs(r)<1e-24?0:(i-e*t)/r;return[t-s*e,s]}(n,r,s,a),c=e=>l[0]+l[1]*e;return{coef:l,predict:c,rSquared:Mn(e,t,i,r,c)}}function Rn(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Dn(e){return Number(e)}const Ln=(e,t)=>{let i=e;return!0!==t&&(i=e.sort(Rn)),function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dn;const n=e.length;if(!n)return;if(t<=0||n<2)return i(e[0],0,e);if(t>=1)return i(e[n-1],n-1,e);const r=(n-1)*t,s=Math.floor(r),a=i(e[s],s,e);return a+(i(e[s+1],s+1,e)-a)*(r-s)}(i,.5)},jn=1e-12,Fn=Math.PI,Bn=Fn/2,Nn=2*Fn,zn=2*Math.PI,Hn=Math.abs,Vn=Math.atan2,Un=Math.cos,Wn=Math.max,Gn=Math.min,Kn=Math.sin,Yn=Math.sqrt,Xn=Math.pow;function qn(e){return e>1?0:e<-1?Fn:Math.acos(e)}function Zn(e){return e>=1?Bn:e<=-1?-Bn:Math.asin(e)}function Qn(e,t,i,n,r){let s,a;return"number"==typeof e&&"number"==typeof i&&(s=(1-r)*e+r*i),"number"==typeof t&&"number"==typeof n&&(a=(1-r)*t+r*n),{x:s,y:a}}function $n(e,t){return e[0]*t[1]-e[1]*t[0]}function Jn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Math.round(e*t)/t}function er(e){const t=e.toString().split(/[eE]/),i=(t[0].split(".")[1]||"").length-(+t[1]||0);return i>0?i:0}function tr(e,t){return Jn(e+t,10**Math.max(er(e),er(t)))}class ir{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.x=0,this.y=0,this.x=e,this.y=t,this.x1=i,this.y1=n}clone(){return new ir(this.x,this.y)}copyFrom(e){return this.x=e.x,this.y=e.y,this.x1=e.x1,this.y1=e.y1,this.defined=e.defined,this.context=e.context,this}set(e,t){return this.x=e,this.y=t,this}add(e){return l(e)?(this.x+=e,void(this.y+=e)):(this.x+=e.x,this.y+=e.y,this)}sub(e){return l(e)?(this.x-=e,void(this.y-=e)):(this.x-=e.x,this.y-=e.y,this)}multi(e){throw new Error("\u6682\u4e0d\u652f\u6301")}div(e){throw new Error("\u6682\u4e0d\u652f\u6301")}}class nr{static distancePP(e,t){return Yn(Xn(e.x-t.x,2)+Xn(e.y-t.y,2))}static distanceNN(e,t,i,n){return Yn(Xn(e-i,2)+Xn(t-n,2))}static distancePN(e,t,i){return Yn(Xn(t-e.x,2)+Xn(i-e.y,2))}static pointAtPP(e,t,i){return new ir((t.x-e.x)*i+e.x,(t.y-e.y)*i+e.y)}}function rr(e){for(;e<0;)e+=2*Math.PI;for(;e>=2*Math.PI;)e-=2*Math.PI;return e}function sr(e){let t="center",i="middle";return t=(e=rr(e))>=Math.PI*(5/3)||e<=Math.PI*(1/3)?"left":e>=Math.PI*(2/3)&&e<=Math.PI*(4/3)?"right":"center",i=e>=Math.PI*(7/6)&&e<=Math.PI*(11/6)?"bottom":e>=Math.PI*(1/6)&&e<=Math.PI*(5/6)?"top":"middle",{align:t,baseline:i}}function ar(e){return e.radius?{x:Math.cos(e.angle)*e.radius,y:Math.sin(e.angle)*e.radius}:{x:0,y:0}}function or(e,t){const i=[];return e.forEach((e=>{const n=+e[t];L(n)&&i.push(n)})),0===i.length?null:U(i)}function lr(e,t){const i=[];return e.forEach((e=>{const n=+e[t];L(n)&&i.push(n)})),0===i.length?null:V(i)}function cr(e,t){return e.reduce(((e,i)=>{const n=t?+i[t]:+i;return L(n)&&(e+=n),e}),0)}function hr(e,t){let i=0,n=0;return e.forEach((e=>{const r=t?+e[t]:+e;L(r)&&(i+=r,n++)})),i/n}function dr(e,t){const i=hr(e,t);if(e.length<=1)return 0;const n=e.reduce(((e,n)=>e+(t?+n[t]:+n-i)**2),0);return n/(e.length-1)}function ur(e,t){const i=pr(e),n=pr(t),r=Math.asin((e.x*t.y-t.x*e.y)/i/n),s=Math.acos((e.x*t.x+e.y*t.y)/i/n);return r<0?-s:s}function pr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};return nr.distancePP(e,t)}function gr(e,t,i){let n=!1;if(t&&Q(t))for(const r of e)for(const e of r.getSeries(i))if(n=!!t.call(null,e),n)return n;return n}const fr=(e,t)=>{for(let i=0;i<e.length;i++){const n=e[i].getSeries();for(let e=0;e<n.length;e++){const i=n[e];if(t&&i&&i.coordinate===t)return i;if(!t&&i)return i}}return null},mr=(e,t)=>{if(!e)return null;if(!fr(e.getRegionsInIndex(),"polar"))return null;const{x:i,y:n}=t,r=On(e,(e=>"angle"===e.getOrient()),t),s=On(e,(e=>"radius"===e.getOrient()),t),a=[],o=e=>e.getDimensionField()[0];return r&&r.forEach((e=>{var t;const r=e.getScale();if(r&&An(r.type)){const l=r.domain(),c=r.range(),h=e.getCenter(),d={x:i-e.getLayoutStartPoint().x-h.x,y:n-e.getLayoutStartPoint().y-h.y};let u=ur({x:1,y:0},d);u=((e,t)=>{const i=2*Math.PI,n=U(t),r=V(t);return e<n?e+=Math.ceil((n-e)/i)*i:e>r&&(e-=Math.ceil((e-r)/i)*i),e})(u,c);const p=pr(d),g=null===(t=s[0])||void 0===t?void 0:t.getScale(),f=null==g?void 0:g.range();if((u-(null==c?void 0:c[0]))*(u-(null==c?void 0:c[1]))>0||(p-(null==f?void 0:f[0]))*(p-(null==f?void 0:f[1]))>0)return;const m=e.invert(u);if(P(m))return;let v=l.findIndex((e=>(null==e?void 0:e.toString())===m.toString()));v<0&&(v=void 0);const y=Tn(m,e,"polar",o);a.push({index:v,value:m,axis:e,data:y})}})),s&&s.forEach((e=>{var t;const s=e.getScale(),l=null==s?void 0:s.range();if(s&&An(s.type)){const c=e.getCenter(),h={x:i-e.getLayoutStartPoint().x-c.x,y:n-e.getLayoutStartPoint().y-c.y};let d=ur({x:1,y:0},h);d<-Math.PI/2&&(d=2*Math.PI+d);const u=pr(h),p=null===(t=r[0])||void 0===t?void 0:t.getScale(),g=null==p?void 0:p.range();if((d-(null==g?void 0:g[0]))*(d-(null==g?void 0:g[1]))>0||(u-(null==l?void 0:l[0]))*(u-(null==l?void 0:l[1]))>0)return;const f=s.invert(u);if(P(f))return;let m=s.domain().findIndex((e=>(null==e?void 0:e.toString())===f.toString()));m<0&&(m=void 0);const v=Tn(f,e,"polar",o);a.push({index:m,value:f,axis:e,data:v})}})),a.length?a:null};function vr(e){return"bottom"===e||"top"===e}function yr(e){return"left"===e||"right"===e}function br(e){return"z"===e}function _r(e,t){return $(e.orient)||t&&t.includes(e.orient)?e.orient:"left"}function xr(e){return"top"===e||"bottom"===e?"horizontal":"vertical"}function Sr(e,t){var i;const n=null!==(i=e.type)&&void 0!==i?i:function(e,t){return t?vr(e)?"linear":"band":vr(e)?"band":"linear"}(e.orient,t);return{axisType:n,componentName:"".concat(r.cartesianAxis,"-").concat(n)}}const wr=e=>e.fieldX[0],Cr=e=>e.fieldY[0],kr=e=>[e.fieldX[0],e.fieldX2],Ar=e=>[e.fieldY[0],e.fieldY2],Er=(e,t)=>{var i,n;if(!e)return null;if(!fr(e.getRegionsInIndex(),"cartesian"))return null;const{x:r,y:s}=t,a=null!==(i=On(e,(e=>vr(e.getOrient())),t))&&void 0!==i?i:[],o=null!==(n=On(e,(e=>yr(e.getOrient())),t))&&void 0!==n?n:[],l=new Set,c=new Set;[a,o].forEach((e=>e.forEach((e=>{An(e.getScale().type)?l.add(e):c.add(e)}))));const h=[],d=(e,t)=>{("x"===e?a:o).forEach((i=>{if((t?l:c).has(i)){const n=Tr(i,"x"===e?r:s,e,"x"===e?t?wr:kr:t?Cr:Ar);n&&h.push(n)}}))};return"horizontal"===e.getSpec().direction?(d("y",l.size>0),0===h.length&&d("x",l.size>0)):(d("x",l.size>0),0===h.length&&d("y",l.size>0)),h.length?h:null},Tr=(e,t,i,n)=>{const r=e.getScale(),s=t-e.getLayoutStartPoint()[i];if((s-r.range()[0])*(s-r.range()[1])>0)return null;const a=r.invert(s);return Or(e,a,n)},Or=(e,t,i)=>{const n=e.getScale();if(P(t))return null;let r=n.domain().findIndex((e=>(null==e?void 0:e.toString())===t.toString()));r<0&&(r=void 0);const s=Tn(t,e,"cartesian",null!=i?i:vr(e.getOrient())?wr:Cr);return{index:r,value:t,axis:e,data:s}};class Pr{constructor(e,t){this._eventDispatcher=e,this._mode=t}get chart(){var e,t;return this._chart||(this._chart=null===(t=(e=this._eventDispatcher.globalInstance).getChart)||void 0===t?void 0:t.call(e)),this._chart}register(e,t){var i,n;(null!==(n=null===(i=this.chart)||void 0===i?void 0:i.getOption().onError)&&void 0!==n?n:fe)("Method not implemented.")}unregister(){var e,t;(null!==(t=null===(e=this.chart)||void 0===e?void 0:e.getOption().onError)&&void 0!==t?t:fe)("Method not implemented.")}getTargetDimensionInfo(e,t){var i,n;const r=null!==(i=Er(this.chart,{x:e,y:t}))&&void 0!==i?i:[],s=null!==(n=mr(this.chart,{x:e,y:t}))&&void 0!==n?n:[],a=[].concat(r,s);return 0===a.length?null:a}dispatch(e,t){var i;const n=null===(i=this.chart)||void 0===i?void 0:i.getAllComponents().filter((e=>{if("axes"!==e.specKey)return!1;return!!An(e.getScale().type)&&(!(null==t?void 0:t.filter)||t.filter(e))})),r=[];return n.forEach((t=>{const i=Or(t,e);i&&r.push(i)})),this._callback.call(null,{action:"enter",dimensionInfo:r}),r}}const Mr=["pointerdown","pointerup","pointerupoutside","pointertap","pointerover","pointermove","pointerenter","pointerleave","pointerout","mousedown","mouseup","mouseupoutside","rightdown","rightup","rightupoutside","click","dblclick","mousemove","mouseover","mouseout","mouseenter","mouseleave","wheel","touchstart","touchend","touchendoutside","touchmove","touchcancel","tap","dragstart","drag","dragenter","dragleave","dragover","dragend","drop","pan","panstart","panend","press","pressup","pressend","pinch","pinchstart","pinchend","swipe"];var Ir,Rr,Dr;!function(e){e.initialized="initialized",e.rendered="rendered",e.renderFinished="renderFinished",e.animationFinished="animationFinished",e.regionSeriesDataFilterOver="regionSeriesDataFilterOver",e.afterInitData="afterInitData",e.afterInitEvent="afterInitEvent",e.afterInitMark="afterInitMark",e.rawDataUpdate="rawDataUpdate",e.viewDataFilterOver="viewDataFilterOver",e.viewDataUpdate="viewDataUpdate",e.viewDataStatisticsUpdate="viewDataStatisticsUpdate",e.markDeltaYUpdate="markDeltaYUpdate",e.viewDataLabelUpdate="viewDataLabelUpdate",e.scaleDomainUpdate="scaleDomainUpdate",e.scaleUpdate="scaleUpdate",e.dataZoomChange="dataZoomChange",e.drill="drill",e.layoutStart="layoutStart",e.layoutEnd="layoutEnd",e.layoutRectUpdate="layoutRectUpdate",e.playerPlay="playerPlay",e.playerPause="playerPause",e.playerEnd="playerEnd",e.playerChange="playerChange",e.playerForward="playerForward",e.playerBackward="playerBackward",e.scrollBarChange="scrollBarChange",e.brushStart="brushStart",e.brushChange="brushChange",e.brushEnd="brushEnd",e.brushClear="brushClear",e.legendSelectedDataChange="legendSelectedDataChange",e.legendFilter="legendFilter",e.legendItemClick="legendItemClick",e.legendItemHover="legendItemHover",e.legendItemUnHover="legendItemUnHover",e.tooltipShow="tooltipShow",e.tooltipHide="tooltipHide",e.tooltipRelease="tooltipRelease",e.afterResize="afterResize",e.afterRender="afterRender",e.afterLayout="afterLayout"}(Ir||(Ir={})),function(e){e.chart="chart",e.window="window",e.canvas="canvas"}(Rr||(Rr={})),function(e){e.vchart="vchart",e.chart="chart",e.model="model",e.mark="mark"}(Dr||(Dr={}));const Lr={[xn.dimensionHover]:class extends Pr{constructor(){super(...arguments),this._cacheDimensionInfo=null,this.onMouseMove=e=>{if(!e)return;const t=e.event.viewX,i=e.event.viewY,n=this.getTargetDimensionInfo(t,i);null===n&&null!==this._cacheDimensionInfo?(this._callback.call(null,Object.assign(Object.assign({},e),{action:"leave",dimensionInfo:this._cacheDimensionInfo.slice()})),this._cacheDimensionInfo=n):null===n||null!==this._cacheDimensionInfo&&n.length===this._cacheDimensionInfo.length&&!n.some(((e,t)=>!En(e,this._cacheDimensionInfo[t])))?null!==n&&this._callback.call(null,Object.assign(Object.assign({},e),{action:"move",dimensionInfo:n.slice()})):(this._callback.call(null,Object.assign(Object.assign({},e),{action:"enter",dimensionInfo:n.slice()})),this._cacheDimensionInfo=n)},this.onMouseOut=e=>{e&&(this._callback.call(null,Object.assign(Object.assign({},e),{action:"leave",dimensionInfo:this._cacheDimensionInfo?this._cacheDimensionInfo.slice():[]})),this._cacheDimensionInfo=null)}}register(e,t){this._callback=t.callback,this._eventDispatcher.register("pointermove",{query:Object.assign(Object.assign({},t.query),{source:Rr.chart}),callback:this.onMouseMove}),this._eventDispatcher.register("pointerout",{query:Object.assign(Object.assign({},t.query),{source:Rr.canvas}),callback:this.onMouseOut}),ue(this._mode)&&this._eventDispatcher.register("pointerdown",{query:Object.assign(Object.assign({},t.query),{source:Rr.chart}),callback:this.onMouseMove})}unregister(){this._eventDispatcher.unregister("pointermove",{query:null,callback:this.onMouseMove}),ue(this._mode)&&this._eventDispatcher.unregister("pointerdown",{query:null,callback:this.onMouseMove})}},[xn.dimensionClick]:class extends Pr{constructor(){super(...arguments),this.onClick=e=>{if(!e)return;const t=e.event.viewX,i=e.event.viewY,n=this.getTargetDimensionInfo(t,i);n&&this._callback.call(null,Object.assign(Object.assign({},e),{action:"click",dimensionInfo:n.slice()}))}}register(e,t){this._callback=t.callback,this._eventDispatcher.register("pointertap",{query:Object.assign(Object.assign({},t.query),{source:Rr.chart}),callback:this.onClick})}unregister(){this._eventDispatcher.unregister("pointertap",{query:null,callback:this.onClick})}}};class jr{getComposedEventMap(){return this._composedEventMap}constructor(e,t){this._composedEventMap=new Map,this._eventDispatcher=e,this._mode=t}on(e,t,i){const n="function"==typeof t?{query:null,callback:t}:{query:t,callback:i};if(Lr[e]){const t=new Lr[e](this._eventDispatcher,this._mode);t.register(e,n),this._composedEventMap.set(i,{eventType:e,event:t})}else this._eventDispatcher.register(e,n);return this}off(e,t,i){var n,r;const s=null!=i?i:t;if(Lr[e])if(s)null===(n=this._composedEventMap.get(s))||void 0===n||n.event.unregister(),this._composedEventMap.delete(s);else for(const a of this._composedEventMap.entries())a[1].eventType===e&&(null===(r=this._composedEventMap.get(a[0]))||void 0===r||r.event.unregister(),this._composedEventMap.delete(a[0]));else if(s){const i={callback:s,query:null,filter:{nodeName:null,type:e,level:null,source:t.source,markName:null,filter:null,userId:null}};this._eventDispatcher.unregister(e,i)}else this._eventDispatcher.unregister(e);return this}emit(e,t,i){return this._eventDispatcher.dispatch(e,t,i),this}release(){this._eventDispatcher.release(),this._composedEventMap.clear()}}class Fr{constructor(){this._map=new Map,this._levelNodes=new Map,this._levelNodes.set(Dr.vchart,[]),this._levelNodes.set(Dr.chart,[]),this._levelNodes.set(Dr.model,[]),this._levelNodes.set(Dr.mark,[])}addHandler(e,t){var i;const n={level:t,handler:e};return null===(i=this._levelNodes.get(t))||void 0===i||i.push(n),this._map.set(e.callback,n),this}removeHandler(e){const t=this._map.get(e.callback);if(!t)return this;this._map.delete(e.callback);const i=this._levelNodes.get(t.level),n=null==i?void 0:i.findIndex((t=>t.handler.callback===e.callback));return void 0!==n&&n>=0&&(null==i||i.splice(n,1)),this}getHandlers(e){var t;return(null===(t=this._levelNodes.get(e))||void 0===t?void 0:t.map((e=>e.handler)))||[]}getCount(){return this._map.size}release(){this._map.clear(),this._levelNodes.clear()}}const Br=(e,t,i)=>{const n=_(t)?t.split("."):t;for(let r=0;r<n.length;r++)e=e?e[n[r]]:void 0;return void 0===e?i:e};const Nr=function(e,t,i){let n=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return D(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),F(e,t,{leading:n,trailing:r,maxWait:t})};var zr,Hr,Vr,Ur,Wr,Gr,Kr,Yr,Xr,qr,Zr,Qr,$r,Jr,es;!function(e){e.enter="enter",e.update="update",e.exit="exit",e.group="group"}(zr||(zr={})),function(e){e.enter="enter",e.update="update",e.exit="exit",e.unChange="unChange"}(Hr||(Hr={})),function(e){e.arc="arc",e.arc3d="arc3d",e.area="area",e.image="image",e.line="line",e.path="path",e.rect="rect",e.rect3d="rect3d",e.rule="rule",e.shape="shape",e.symbol="symbol",e.text="text",e.richtext="richtext",e.polygon="polygon",e.pyramid3d="pyramid3d",e.circle="circle",e.cell="cell",e.interval="interval",e.group="group",e.glyph="glyph",e.component="component",e.largeRects="largeRects",e.largeSymbols="largeSymbols"}(Vr||(Vr={})),function(e){e.axis="axis",e.grid="grid",e.legend="legend",e.slider="slider",e.label="label",e.datazoom="datazoom",e.player="player",e.title="title",e.scrollbar="scrollbar"}(Ur||(Ur={})),function(e){e[e.player=1]="player",e[e.rollUp=2]="rollUp",e[e.drillDown=3]="drillDown",e[e.slider=4]="slider",e[e.datazoom=5]="datazoom",e[e.legend=6]="legend",e[e.scrollbar=7]="scrollbar",e[e.brush=8]="brush",e[e.normal=9]="normal"}(Wr||(Wr={})),function(e){e.lineAxis="lineAxis",e.circleAxis="circleAxis"}(Gr||(Gr={})),function(e){e.lineAxisGrid="lineAxisGrid",e.circleAxisGrid="circleAxisGrid"}(Kr||(Kr={})),function(e){e.discreteLegend="discreteLegend",e.colorLegend="colorLegend",e.sizeLegend="sizeLegend"}(Yr||(Yr={})),function(e){e.lineCrosshair="lineCrosshair",e.rectCrosshair="rectCrosshair",e.sectorCrosshair="sectorCrosshair",e.circleCrosshair="circleCrosshair",e.polygonCrosshair="polygonCrosshair",e.ringCrosshair="ringCrosshair"}(Xr||(Xr={})),function(e){e.symbolLabel="symbolLabel",e.rectLabel="rectLabel",e.lineLabel="lineLabel",e.dataLabel="dataLabel"}(qr||(qr={})),function(e){e.continuousPlayer="continuousPlayer",e.discretePlayer="discretePlayer"}(Zr||(Zr={})),function(e){e.before="before",e.layouting="layouting",e.reevaluate="reevaluate",e.after="after"}(Qr||(Qr={})),function(e){e.BEFORE_EVALUATE_DATA="beforeEvaluateData",e.AFTER_EVALUATE_DATA="afterEvaluateData",e.BEFORE_EVALUATE_SCALE="beforeEvaluateScale",e.AFTER_EVALUATE_SCALE="afterEvaluateScale",e.BEFORE_PARSE_VIEW="beforeParseView",e.AFTER_PARSE_VIEW="afterParseView",e.BEFORE_TRANSFORM="beforeTransform",e.AFTER_TRANSFORM="afterTransform",e.BEFORE_CREATE_VRENDER_STAGE="beforeCreateVRenderStage",e.AFTER_CREATE_VRENDER_STAGE="afterCreateVRenderStage",e.BEFORE_CREATE_VRENDER_LAYER="beforeCreateVRenderLayer",e.AFTER_CREATE_VRENDER_LAYER="afterCreateVRenderLayer",e.BEFORE_STAGE_RESIZE="beforeStageResize",e.AFTER_STAGE_RESIZE="afterStageResize",e.BEFORE_VRENDER_DRAW="beforeVRenderDraw",e.AFTER_VRENDER_DRAW="afterVRenderDraw",e.BEFORE_MARK_JOIN="beforeMarkJoin",e.AFTER_MARK_JOIN="afterMarkJoin",e.BEFORE_MARK_UPDATE="beforeMarkUpdate",e.AFTER_MARK_UPDATE="afterMarkUpdate",e.BEFORE_MARK_STATE="beforeMarkState",e.AFTER_MARK_STATE="afterMarkState",e.BEFORE_MARK_ENCODE="beforeMarkEncode",e.AFTER_MARK_ENCODE="afterMarkEncode",e.BEFORE_DO_LAYOUT="beforeDoLayout",e.AFTER_DO_LAYOUT="afterDoLayout",e.BEFORE_MARK_LAYOUT_END="beforeMarkLayoutEnd",e.AFTER_MARK_LAYOUT_END="afterMarkLayoutEnd",e.BEFORE_DO_RENDER="beforeDoRender",e.AFTER_DO_RENDER="afterDoRender",e.BEFORE_MARK_RENDER_END="beforeMarkRenderEnd",e.AFTER_MARK_RENDER_END="afterMarkRenderEnd",e.BEFORE_CREATE_VRENDER_MARK="beforeCreateVRenderMark",e.AFTER_CREATE_VRENDER_MARK="afterCreateVRenderMark",e.BEFORE_ADD_VRENDER_MARK="beforeAddVRenderMark",e.AFTER_ADD_VRENDER_MARK="afterAddVRenderMark",e.AFTER_VRENDER_NEXT_RENDER="afterVRenderNextRender",e.BEFORE_ELEMENT_UPDATE_DATA="beforeElementUpdateData",e.AFTER_ELEMENT_UPDATE_DATA="afterElementUpdateData",e.BEFORE_ELEMENT_STATE="beforeElementState",e.AFTER_ELEMENT_STATE="afterElementState",e.BEFORE_ELEMENT_ENCODE="beforeElementEncode",e.AFTER_ELEMENT_ENCODE="afterElementEncode",e.ANIMATION_START="animationStart",e.ANIMATION_END="animationEnd",e.ELEMENT_ANIMATION_START="elementAnimationStart",e.ELEMENT_ANIMATION_END="elementAnimationEnd",e.ALL_ANIMATION_START="allAnimationStart",e.ALL_ANIMATION_END="allAnimationEnd"}($r||($r={})),function(e){e.signal="signal",e.data="data",e.scale="scale",e.coordinate="coordinate",e.mark="mark"}(Jr||(Jr={})),function(e){e.active="active",e.selected="selected",e.highlight="highlight",e.blur="blur"}(es||(es={}));const ts={cartesianAxis:"axis","cartesianAxis-band":"axis","cartesianAxis-linear":"axis","cartesianAxis-time":"axis",polarAxis:"axis","polarAxis-band":"axis","polarAxis-linear":"axis",discreteLegend:"legend",continuousLegend:"legend",colorLegend:"legend",sizeLegend:"legend",label:"label"};class is{constructor(e,t){this._viewBubbles=new Map,this._windowBubbles=new Map,this._canvasBubbles=new Map,this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this.globalInstance=e,this._compiler=t}register(e,t){var i,n,r,s;this._parseQuery(t);const a=this.getEventBubble((null===(i=t.filter)||void 0===i?void 0:i.source)||Rr.chart),o=this.getEventListeners((null===(n=t.filter)||void 0===n?void 0:n.source)||Rr.chart);if(a.get(e)||a.set(e,new Fr),a.get(e).addHandler(t,null===(r=t.filter)||void 0===r?void 0:r.level),this._isValidEvent(e)&&!o.has(e)){const i=this._onDelegate.bind(this);this._compiler.addEventListener(null===(s=t.filter)||void 0===s?void 0:s.source,e,i),o.set(e,i)}return this}unregister(e,t){var i,n,r,s;let a=!1;const o=this.getEventBubble((null===(i=null==t?void 0:t.filter)||void 0===i?void 0:i.source)||Rr.chart),l=this.getEventListeners((null===(n=null==t?void 0:t.filter)||void 0===n?void 0:n.source)||Rr.chart);if(t){const i=o.get(e);null==i||i.removeHandler(t),0===(null==i?void 0:i.getCount())&&(null==i||i.release(),o.delete(e),a=!0),(null===(r=null==t?void 0:t.wrappedCallback)||void 0===r?void 0:r.cancel)&&t.wrappedCallback.cancel()}else{const t=o.get(e);null==t||t.release(),o.delete(e),a=!0}if(a&&this._isValidEvent(e)){const i=l.get(e);this._compiler.removeEventListener((null===(s=null==t?void 0:t.filter)||void 0===s?void 0:s.source)||Rr.chart,e,i),l.delete(e)}return this}dispatch(e,t,i){const n=this.getEventBubble(t.source||Rr.chart).get(e);if(!n)return this;let r=!1;if(i){const s=n.getHandlers(i);r=this._invoke(s,e,t)}else{const i=n.getHandlers(Dr.mark);if(r=this._invoke(i,e,t),!r){const i=n.getHandlers(Dr.model);r=this._invoke(i,e,t)}if(!r){const i=n.getHandlers(Dr.chart);r=this._invoke(i,e,t)}if(!r){const i=n.getHandlers(Dr.vchart);r=this._invoke(i,e,t)}}return this}release(){for(const e of this._viewListeners.entries())this._compiler.removeEventListener(Rr.chart,e[0],e[1]);this._viewListeners.clear();for(const e of this._windowListeners.entries())this._compiler.removeEventListener(Rr.window,e[0],e[1]);this._windowListeners.clear();for(const e of this._canvasListeners.entries())this._compiler.removeEventListener(Rr.canvas,e[0],e[1]);this._canvasListeners.clear();for(const e of this._viewBubbles.values())e.release();this._viewBubbles.clear();for(const e of this._windowBubbles.values())e.release();this._windowBubbles.clear();for(const e of this._canvasBubbles.values())e.release();this._canvasBubbles.clear()}_filter(e,t,i){var n,r,s;if(Q(e.filter)&&!e.filter(i))return!1;if(e.nodeName&&Br(i,"node.name")!==e.nodeName)return!1;if(e.markName&&(null===(n=null==i?void 0:i.mark)||void 0===n?void 0:n.name)!==e.markName)return!1;let a=null===(r=i.model)||void 0===r?void 0:r.type;return ts[a]&&(a=ts[a]),(!e.type||a===e.type)&&!("mark"===e.level&&!e.type&&!(null==i?void 0:i.mark))&&!("model"===e.level&&!e.type&&!(null==i?void 0:i.model))&&(!x(e.userId)||(null===(s=i.model)||void 0===s?void 0:s.userId)===e.userId)}_prepareParams(e,t){if(e.markName&&t.mark&&t.itemMap){const e=t.mark.getProductId(),i=t.itemMap.get(e),n=null==i?void 0:i.getDatum();return Object.assign(Object.assign({},t),{item:i,datum:n})}return Object.assign({},t)}_onDelegate(e){var t;const i=this.globalInstance.getChart(),n=x(e.modelId)&&(null==i?void 0:i.getModelById(e.modelId))||void 0,r=x(e.markId)&&(null==i?void 0:i.getMarkById(e.markId))||null,s=new Map;let a=null===(t=e.item)||void 0===t?void 0:t.mark;for(a&&x(a.id())&&s.set(a.id(),e.item);null==a?void 0:a.elements;){const e=a.id();x(e)&&!s.has(e)&&s.set(e,a.elements[0]),a=a.group}const o={event:e.event,item:e.item,datum:e.datum,source:e.source,itemMap:s,chart:i,model:n,mark:null!=r?r:void 0,node:Br(e.event,"target")};this.dispatch(e.type,o)}_invoke(e,t,i){return e.map((e=>{var n,r,s;const a=e.filter;if(!e.query||this._filter(a,t,i)){const t=(e.wrappedCallback||e.callback).call(null,this._prepareParams(a,i)),o=null!=t?t:null===(n=e.query)||void 0===n?void 0:n.consume;return o&&(null===(r=i.event)||void 0===r||r.stopPropagation(),null===(s=i.event)||void 0===s||s.preventDefault()),!!o}})).some((e=>!0===e))}_getQueryLevel(e){return e?e.level?e.level:x(e.id)?Dr.model:Dr.vchart:Dr.vchart}_parseQuery(e){var t;const i=e.query;(null==i?void 0:i.throttle)?e.wrappedCallback=Nr(e.callback,i.throttle):(null==i?void 0:i.debounce)&&(e.wrappedCallback=F(e.callback,i.debounce));let n=this._getQueryLevel(i),r=null,s=Rr.chart,a=null,o=null,l=null;return(null==i?void 0:i.nodeName)&&(a=i.nodeName),(null==i?void 0:i.markName)&&(o=i.markName),!(null==i?void 0:i.type)||n!==Dr.model&&n!==Dr.mark||(r=i.type),(null==i?void 0:i.source)&&(s=i.source),x(null==i?void 0:i.id)&&(l=null==i?void 0:i.id,n=Dr.model),e.filter={level:n,markName:o,type:r,source:s,nodeName:a,userId:l,filter:null!==(t=null==i?void 0:i.filter)&&void 0!==t?t:null},e}getEventBubble(e){switch(e){case Rr.chart:return this._viewBubbles;case Rr.window:return this._windowBubbles;case Rr.canvas:return this._canvasBubbles;default:return this._viewBubbles}}getEventListeners(e){switch(e){case Rr.chart:return this._viewListeners;case Rr.window:return this._windowListeners;case Rr.canvas:return this._canvasListeners;default:return this._viewListeners}}_isValidEvent(e){return Mr.includes(e)||Object.values($r).includes(e)||Object.values(Ir).includes(e)}}function ns(e){return e}function rs(e,t){e&&as.hasOwnProperty(e.type)&&as[e.type](e,t)}var ss={Feature:function(e,t){rs(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,n=-1,r=i.length;++n<r;)rs(i[n].geometry,t)}},as={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)e=i[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){os(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)os(i[n],t,0)},Polygon:function(e,t){ls(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)ls(i[n],t)},GeometryCollection:function(e,t){for(var i=e.geometries,n=-1,r=i.length;++n<r;)rs(i[n],t)}};function os(e,t,i){var n,r=-1,s=e.length-i;for(t.lineStart();++r<s;)n=e[r],t.point(n[0],n[1],n[2]);t.lineEnd()}function ls(e,t){var i=-1,n=e.length;for(t.polygonStart();++i<n;)os(e[i],t,1);t.polygonEnd()}function cs(e,t){e&&ss.hasOwnProperty(e.type)?ss[e.type](e,t):rs(e,t)}function hs(){return new ds}function ds(){this.reset()}ds.prototype={constructor:ds,reset:function(){this.s=this.t=0},add:function(e){ps(us,e,this.t),ps(this,us.s,this.s),this.s?this.t+=us.t:this.s=us.t},valueOf:function(){return this.s}};var us=new ds;function ps(e,t,i){var n=e.s=t+i,r=n-t,s=n-r;e.t=t-s+(i-r)}var gs=1e-6,fs=Math.PI,ms=fs/2,vs=fs/4,ys=2*fs,bs=180/fs,_s=fs/180,xs=Math.abs,Ss=Math.atan,ws=Math.atan2,Cs=Math.cos,ks=(Math.ceil,Math.exp),As=(Math.floor,Math.log),Es=Math.pow,Ts=Math.sin,Os=Math.sign||function(e){return e>0?1:e<0?-1:0},Ps=Math.sqrt,Ms=Math.tan;function Is(e){return e>1?0:e<-1?fs:Math.acos(e)}function Rs(e){return e>1?ms:e<-1?-ms:Math.asin(e)}function Ds(){}var Ls,js,Fs,Bs,Ns=hs(),zs=hs(),Hs={point:Ds,lineStart:Ds,lineEnd:Ds,polygonStart:function(){Hs.lineStart=Vs,Hs.lineEnd=Gs},polygonEnd:function(){Hs.lineStart=Hs.lineEnd=Hs.point=Ds,Ns.add(xs(zs)),zs.reset()},result:function(){var e=Ns/2;return Ns.reset(),e}};function Vs(){Hs.point=Us}function Us(e,t){Hs.point=Ws,Ls=Fs=e,js=Bs=t}function Ws(e,t){zs.add(Bs*e-Fs*t),Fs=e,Bs=t}function Gs(){Ws(Ls,js)}const Ks=Hs;var Ys=1/0,Xs=Ys,qs=-Ys,Zs=qs,Qs={point:function(e,t){e<Ys&&(Ys=e);e>qs&&(qs=e);t<Xs&&(Xs=t);t>Zs&&(Zs=t)},lineStart:Ds,lineEnd:Ds,polygonStart:Ds,polygonEnd:Ds,result:function(){var e=[[Ys,Xs],[qs,Zs]];return qs=Zs=-(Xs=Ys=1/0),e}};const $s=Qs;var Js,ea,ta,ia,na=0,ra=0,sa=0,aa=0,oa=0,la=0,ca=0,ha=0,da=0,ua={point:pa,lineStart:ga,lineEnd:va,polygonStart:function(){ua.lineStart=ya,ua.lineEnd=ba},polygonEnd:function(){ua.point=pa,ua.lineStart=ga,ua.lineEnd=va},result:function(){var e=da?[ca/da,ha/da]:la?[aa/la,oa/la]:sa?[na/sa,ra/sa]:[NaN,NaN];return na=ra=sa=aa=oa=la=ca=ha=da=0,e}};function pa(e,t){na+=e,ra+=t,++sa}function ga(){ua.point=fa}function fa(e,t){ua.point=ma,pa(ta=e,ia=t)}function ma(e,t){var i=e-ta,n=t-ia,r=Ps(i*i+n*n);aa+=r*(ta+e)/2,oa+=r*(ia+t)/2,la+=r,pa(ta=e,ia=t)}function va(){ua.point=pa}function ya(){ua.point=_a}function ba(){xa(Js,ea)}function _a(e,t){ua.point=xa,pa(Js=ta=e,ea=ia=t)}function xa(e,t){var i=e-ta,n=t-ia,r=Ps(i*i+n*n);aa+=r*(ta+e)/2,oa+=r*(ia+t)/2,la+=r,ca+=(r=ia*e-ta*t)*(ta+e),ha+=r*(ia+t),da+=3*r,pa(ta=e,ia=t)}const Sa=ua;function wa(e){this._context=e}wa.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ys)}},result:Ds};var Ca,ka,Aa,Ea,Ta,Oa=hs(),Pa={point:Ds,lineStart:function(){Pa.point=Ma},lineEnd:function(){Ca&&Ia(ka,Aa),Pa.point=Ds},polygonStart:function(){Ca=!0},polygonEnd:function(){Ca=null},result:function(){var e=+Oa;return Oa.reset(),e}};function Ma(e,t){Pa.point=Ia,ka=Ea=e,Aa=Ta=t}function Ia(e,t){Ea-=e,Ta-=t,Oa.add(Ps(Ea*Ea+Ta*Ta)),Ea=e,Ta=t}const Ra=Pa;function Da(){this._string=[]}function La(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function ja(e,t){var i,n,r=4.5;function s(e){return e&&("function"===typeof r&&n.pointRadius(+r.apply(this,arguments)),cs(e,i(n))),n.result()}return s.area=function(e){return cs(e,i(Ks)),Ks.result()},s.measure=function(e){return cs(e,i(Ra)),Ra.result()},s.bounds=function(e){return cs(e,i($s)),$s.result()},s.centroid=function(e){return cs(e,i(Sa)),Sa.result()},s.projection=function(t){return arguments.length?(i=null==t?(e=null,ns):(e=t).stream,s):e},s.context=function(e){return arguments.length?(n=null==e?(t=null,new Da):new wa(t=e),"function"!==typeof r&&n.pointRadius(r),s):t},s.pointRadius=function(e){return arguments.length?(r="function"===typeof e?e:(n.pointRadius(+e),+e),s):r},s.projection(e).context(t)}function Fa(e){var t={type:"Feature"};return Object.keys(e).forEach((function(i){switch(i){case"type":case"properties":case"geometry":return;default:t[i]=e[i]}})),t.properties=Ba(e.properties),t.geometry=Na(e.geometry),t}function Ba(e){var t={};return e?(Object.keys(e).forEach((function(i){var n=e[i];"object"===typeof n?null===n?t[i]=null:Array.isArray(n)?t[i]=n.map((function(e){return e})):t[i]=Ba(n):t[i]=n})),t):t}function Na(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),"GeometryCollection"===e.type?(t.geometries=e.geometries.map((function(e){return Na(e)})),t):(t.coordinates=za(e.coordinates),t)}function za(e){var t=e;return"object"!==typeof t[0]?t.slice():t.map((function(e){return za(e)}))}Da.prototype={_radius:4.5,_circle:La(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=La(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};const Ha=function(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return Fa(e);case"FeatureCollection":return function(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach((function(i){switch(i){case"type":case"features":return;default:t[i]=e[i]}})),t.features=e.features.map((function(e){return Fa(e)})),t}(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Na(e);default:throw new Error("unknown GeoJSON type")}};var Va=6371008.8,Ua={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*Va,kilometers:6371.0088,kilometres:6371.0088,meters:Va,metres:Va,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:Va/1852,radians:1,yards:6967335.223679999};function Wa(e,t,i){void 0===i&&(i={});var n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=t||{},n.geometry=e,n}function Ga(e,t){void 0===t&&(t={});var i={type:"FeatureCollection"};return t.id&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.features=e,i}function Ka(e,t){void 0===t&&(t="kilometers");var i=Ua[t];if(!i)throw new Error(t+" units is invalid");return e/i}function Ya(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Xa(e){for(var t,i,n=Ya(e),r=0,s=1;s<n.length;)t=i||n[0],r+=((i=n[s])[0]-t[0])*(i[1]+t[1]),s++;return r>0}function qa(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var i=0;i<e.features.length&&!1!==t(e.features[i],i);i++);}function Za(e,t){var i,n,r,s,a,o,l,c,h,d,u=0,p="FeatureCollection"===e.type,g="Feature"===e.type,f=p?e.features.length:1;for(i=0;i<f;i++){for(o=p?e.features[i].geometry:g?e.geometry:e,c=p?e.features[i].properties:g?e.properties:{},h=p?e.features[i].bbox:g?e.bbox:void 0,d=p?e.features[i].id:g?e.id:void 0,a=(l=!!o&&"GeometryCollection"===o.type)?o.geometries.length:1,r=0;r<a;r++)if(null!==(s=l?o.geometries[r]:o))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(s,u,c,h,d))return!1;break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===t(s.geometries[n],u,c,h,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,u,c,h,d))return!1;u++}}function Qa(e,t){Za(e,(function(e,i,n,r,s){var a,o=null===e?null:e.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return!1!==t(Wa(e,n,{bbox:r,id:s}),i,0)&&void 0}switch(o){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c=e.coordinates[l];if(!1===t(Wa({type:a,coordinates:c},n),i,l))return!1}}))}function $a(e,t){switch("Feature"===e.type?e.geometry.type:e.type){case"GeometryCollection":return Za(e,(function(e){$a(e,t)})),e;case"LineString":return Ja(Ya(e),t),e;case"Polygon":return eo(Ya(e),t),e;case"MultiLineString":return Ya(e).forEach((function(e){Ja(e,t)})),e;case"MultiPolygon":return Ya(e).forEach((function(e){eo(e,t)})),e;case"Point":case"MultiPoint":return e}}function Ja(e,t){Xa(e)===t&&e.reverse()}function eo(e,t){Xa(e[0])!==t&&e[0].reverse();for(var i=1;i<e.length;i++)Xa(e[i])===t&&e[i].reverse()}const to=function(e,t){if(!(i=t=t||{})||i.constructor!==Object)throw new Error("options is invalid");var i,n=t.reverse||!1,r=t.mutate||!1;if(!e)throw new Error("<geojson> is required");if("boolean"!==typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!==typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(e=Ha(e));var s=[];switch(e.type){case"GeometryCollection":return Za(e,(function(e){$a(e,n)})),e;case"FeatureCollection":return qa(e,(function(e){qa($a(e,n),(function(e){s.push(e)}))})),Ga(s)}return $a(e,n)};const io=function(e){if(!e)throw new Error("geojson is required");var t=[];return Qa(e,(function(e){t.push(e)})),Ga(t)},no=ja(),ro={centroid:!1,name:!1,bbox:!1,rewind:!1},so=e=>{if(e.geometry.type.startsWith("Multi")){const t=io(e).features[0];return Object.assign(Object.assign({},t),t.properties)}return Object.assign(Object.assign({},e),e.properties)},ao=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(arguments.length>2?arguments[2]:void 0).type=dn.GEO;const i=$i(ro,t),{centroid:n,name:r,bbox:s,rewind:a}=i;if(Array.isArray(e))return(e=>{const t=[];return e.forEach((e=>{"FeatureCollection"===e.type?e.features.forEach((e=>{t.push(so(e))})):t.push(so(e))})),t})(e);let o=e.features;return a&&(o=to(e,{reverse:!D(a)||a.reverse}).features),o.forEach((e=>{if(n){const t=no.centroid(e);e.centroidX=t[0],e.centroidY=t[1]}if(r&&(e.name=e.properties.name),s){const t=no.bounds(e);e.bbox=t}})),e.features=o,e};function oo(e){return e}function lo(e,t){var i=t.id,n=t.bbox,r=null==t.properties?{}:t.properties,s=function(e,t){var i=function(e){if(null==e)return oo;var t,i,n=e.scale[0],r=e.scale[1],s=e.translate[0],a=e.translate[1];return function(e,o){o||(t=i=0);var l=2,c=e.length,h=new Array(c);for(h[0]=(t+=e[0])*n+s,h[1]=(i+=e[1])*r+a;l<c;)h[l]=e[l],++l;return h}}(e.transform),n=e.arcs;function r(e,t){t.length&&t.pop();for(var r=n[e<0?~e:e],s=0,a=r.length;s<a;++s)t.push(i(r[s],s));e<0&&function(e,t){for(var i,n=e.length,r=n-t;r<--n;)i=e[r],e[r++]=e[n],e[n]=i}(t,a)}function s(e){return i(e)}function a(e){for(var t=[],i=0,n=e.length;i<n;++i)r(e[i],t);return t.length<2&&t.push(t[0]),t}function o(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(o)}function c(e){var t,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(c)};case"Point":t=s(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(s);break;case"LineString":t=a(e.arcs);break;case"MultiLineString":t=e.arcs.map(a);break;case"Polygon":t=l(e.arcs);break;case"MultiPolygon":t=e.arcs.map(l);break;default:return null}return{type:i,coordinates:t}}return c(t)}(e,t);return null==i&&null==n?{type:"Feature",properties:r,geometry:s}:null==n?{type:"Feature",id:i,properties:r,geometry:s}:{type:"Feature",id:i,bbox:n,properties:r,geometry:s}}const co={},ho=(e,t,i)=>{i.type=dn.GEO;const n=$i(ro,co,t),{object:r}=n;if(!_(r))throw new TypeError("Invalid object: must be a string!");const s=(a=e,"string"===typeof(o=e.objects[r])&&(o=a.objects[o]),"GeometryCollection"===o.type?{type:"FeatureCollection",features:o.geometries.map((function(e){return lo(a,e)}))}:lo(a,o));var a,o;return ao(s,n,i)};function uo(e,t,i){e.getTransform(t)||e.registerTransform(t,i)}function po(e,t,i){e.getParser(t)||e.registerParser(t,i)}const go=new Map;let fo;function mo(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"geojson",centroid:!0};go.has(e)&&ge("map type of '".concat(e,"' already exists, will be overwritten.")),fo||(fo=new f,po(fo,"geojson",ao),po(fo,"topojson",ho),uo(fo,"simplify",nn));const n=new R(fo),r=O({},{centroid:!0,simplify:!1},i);"topojson"===i.type?n.parse(t,{type:"topojson",options:r}):n.parse(t,{type:"geojson",options:r}),!0===i.simplify&&n.transform({type:"simplify"}),go.set(e,n)}function vo(e){go.has(e)?go.delete(e):ge("map type of '".concat(e,"' does not exists."))}function yo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.latestData instanceof R&&(t=!1),t?S(e.latestData):e.latestData.slice()}const bo=(e,t)=>0===e.length?[]:1===e.length?yo(e[0],null==t?void 0:t.deep):e.map((e=>yo(e,null==t?void 0:t.deep)));function _o(e,t,i){uo(t=t instanceof f?t:e.dataSet,"copyDataView",bo);const n=new R(t,i);return n.parse([e],{type:"dataview"}),n.transform({type:"copyDataView",level:wo.copyDataView}),n}function xo(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r,s,a;if(e instanceof R)return e;const{id:o,values:l=[],fromDataIndex:c,fromDataId:h,transforms:d=[]}=e,u=e.parser?S(e.parser):{clone:!0},p=S(e.fields);let g;u.clone=!(!1===u.clone);const f=i.find((e=>e.name===o));if(f)g=f;else{const e={name:o};if(p&&(e.fields=p),g=new R(t,e),"string"==typeof h){const e=i.find((e=>e.name===h));if(!e)return(null!==(r=n.onError)&&void 0!==r?r:fe)("no data matches fromDataId ".concat(h)),null;g.parse([e],{type:"dataview"}),g.transform({type:"copyDataView"})}else if("number"==typeof c){const e=i[c];if(!e)return(null!==(s=n.onError)&&void 0!==s?s:fe)("no data matches fromDataIndex ".concat(c)),null;g.parse([e],{type:"dataview"}),g.transform({type:"copyDataView"})}else Array.isArray(l)?g.parse(l,u):!_(l)||u&&!["csv","dsv","tsv"].includes(u.type)?(g.parse([]),ge("values should be array")):g.parse(l,null!==(a=u)&&void 0!==a?a:{type:"csv"});d&&d.length&&d.forEach((e=>{t.getTransform(e.type)&&g.transform(e)}))}return g}function So(e,t,i){e&&(t.fields&&e.setFields(t.fields,i),e.parseNewData(t.values,t.parser))}var wo;!function(e){e[e.copyDataView=-10]="copyDataView",e[e.treemapFilter=-8]="treemapFilter",e[e.treemapFlatten=-7]="treemapFlatten",e[e.dotObjFlat=-7]="dotObjFlat",e[e.linkDotInfo=-7]="linkDotInfo",e[e.sankeyLayout=-7]="sankeyLayout",e[e.dataZoomFilter=-6]="dataZoomFilter",e[e.legendFilter=-5]="legendFilter"}(wo||(wo={}));const Co=(e,t)=>{const i={nodes:{}},{fields:n}=t;if(!(null==n?void 0:n.length))return i;const r=n.length-1;let s,a,o=i;return e.forEach((e=>{e.latestData.forEach((e=>{o=i;for(let t=0;t<n.length;t++){const i=e[n[t]];if(P(i))break;o.nodes[i]||(t===r?o.nodes[i]={values:[]}:(s={nodes:{}},o.nodes[i]=s)),t===r?(a=o.nodes[i],a.values.push(e)):o=o.nodes[i]}}))})),i};var ko;function Ao(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return{width:i,height:n};try{t=null===window||void 0===window?void 0:window.getComputedStyle}catch(s){t=()=>({})}const r=t(e);if(/^(\d*\.?\d+)(px)$/.exec(r.width)){const t=parseFloat(r.width)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)||e.clientWidth-1,s=parseFloat(r.height)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)||e.clientHeight-1;return{width:t<=0?i:t,height:s<=0?n:s}}return{width:i,height:n}}function Eo(e){const{x:t,y:i}=e.getBoundingClientRect();return{x:t,y:i}}!function(e){e.appear="appear",e.disappear="disappear",e.enter="enter",e.update="update",e.state="state",e.exit="exit",e.normal="normal",e.none="none"}(ko||(ko={}));class To{static GenAutoIncrementId(){return To.auto_increment_id++}}To.auto_increment_id=0;class Oo{constructor(e){this.id=To.GenAutoIncrementId(),this.registry=e}}const Po="named",Mo="inject",Io="multi_inject",Ro="inversify:tagged",Do="inversify:paramtypes";const Lo=function(e){var t;return function(e){const t=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,n=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,o=!s&&!a,l={create:s?function(){return C(Object.create(null))}:a?function(){return C({__proto__:null})}:function(){return C({})},has:o?function(e,i){return t.call(e,i)}:function(e,t){return t in e},get:o?function(e,i){return t.call(e,i)?e[i]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),h="object"==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:""}&&"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:""}.REFLECT_METADATA_USE_MAP_POLYFILL,d=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){const e={},t=[],i=function(){function e(e,t,i){this._index=0,this._keys=e,this._values=t,this._selector=i}return e.prototype["@@iterator"]=function(){return this},e.prototype[r]=function(){return this},e.prototype.next=function(){const e=this._index;if(e>=0&&e<this._keys.length){const i=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:i,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){const t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){const i=this._find(e,!0);return this._values[i]=t,this},t.prototype.delete=function(t){const i=this._find(t,!1);if(i>=0){const n=this._keys.length;for(let e=i+1;e<n;e++)this._keys[e-1]=this._keys[e],this._values[e-1]=this._values[e];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new i(this._keys,this._values,n)},t.prototype.values=function(){return new i(this._keys,this._values,s)},t.prototype.entries=function(){return new i(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[r]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function s(e,t){return t}function a(e,t){return[e,t]}}():Map,u=(h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new d}Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[r]=function(){return this.keys()}}():Set,new(h||"function"!=typeof WeakMap?function(){const e=16,i=l.create(),n=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){const t=s(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){const t=s(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return s(e,!0)[this._key]=t,this},e.prototype.delete=function(e){const t=s(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){let e;do{e="@@WeakMap@@"+o()}while(l.has(i,e));return i[e]=!0,e}function s(e,i){if(!t.call(e,n)){if(!i)return;Object.defineProperty(e,n,{value:l.create()})}return e[n]}function a(e,t){for(let i=0;i<t;++i)e[i]=255*Math.random()|0;return e}function o(){const t=function(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;let i="";for(let n=0;n<e;++n){const e=t[n];4!==n&&6!==n&&8!==n||(i+="-"),e<16&&(i+="0"),i+=e.toString(16).toLowerCase()}return i}}():WeakMap));function p(e,t,i){let n=u.get(e);if(v(n)){if(!i)return;n=new d,u.set(e,n)}let r=n.get(t);if(v(r)){if(!i)return;r=new d,n.set(t,r)}return r}function g(e,t,i){if(f(e,t,i))return!0;const n=w(t);return!y(n)&&g(e,n,i)}function f(e,t,i){const n=p(t,i,!1);return!v(n)&&!!n.has(e)}function m(e,t,i){if(f(e,t,i))return function(e,t,i){const n=p(t,i,!1);if(!v(n))return n.get(e)}(e,t,i);const n=w(t);return y(n)?void 0:m(e,n,i)}function v(e){return void 0===e}function y(e){return null===e}function b(e){return"object"==typeof e?null!==e:"function"==typeof e}function _(e,t){switch(function(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}const i=3===t?"string":5===t?"number":"default",r=function(e,t){const i=e[t];if(null!=i){if(!S(i))throw new TypeError;return i}}(e,n);if(void 0!==r){const t=r.call(e,i);if(b(t))throw new TypeError;return t}return function(e,t){if("string"===t){const t=e.toString;if(S(t)){const i=t.call(e);if(!b(i))return i}const i=e.valueOf;if(S(i)){const t=i.call(e);if(!b(t))return t}}else{const t=e.valueOf;if(S(t)){const i=t.call(e);if(!b(i))return i}const i=e.toString;if(S(i)){const t=i.call(e);if(!b(t))return t}}throw new TypeError}(e,"default"===i?"number":i)}function x(e){const t=_(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function S(e){return"function"==typeof e}function w(e){const t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;const i=e.prototype,n=i&&Object.getPrototypeOf(i);if(null==n||n===Object.prototype)return t;const r=n.constructor;return"function"!=typeof r||r===e?t:r}function C(e){return e.__=void 0,delete e.__,e}e("defineMetadata",(function(e,t,i,n){if(!b(i))throw new TypeError;return r=e,s=t,void p(i,n,!0).set(r,s);var r,s})),e("hasMetadata",(function(e,t,i){if(!b(t))throw new TypeError;return v(i)||(i=x(i)),g(e,t,i)})),e("hasOwnMetadata",(function(e,t,i){if(!b(t))throw new TypeError;return v(i)||(i=x(i)),f(e,t,i)})),e("getMetadata",(function(e,t,i){if(!b(t))throw new TypeError;return v(i)||(i=x(i)),m(e,t,i)}))}((t=e,function(e,i){"function"!=typeof t[e]&&Object.defineProperty(t,e,{configurable:!0,writable:!0,value:i})})),e}({});function jo(){return function(e){return Lo.defineMetadata(Do,null,e),e}}class Fo{constructor(e,t){this.key=e,this.value=t}toString(){return this.key===Po?"named: ".concat(String(this.value).toString()," "):"tagged: { key:".concat(this.key.toString(),", value: ").concat(String(this.value)," }")}}function Bo(e,t,i,n){!function(e,t,i,n){const r=[n];let s={};Lo.hasOwnMetadata(e,t)&&(s=Lo.getMetadata(e,t));let a=s[i];void 0===a&&(a=[]),a.push(...r),s[i]=a,Lo.defineMetadata(e,s,t)}(Ro,e,i.toString(),n)}function No(e){return(t,i,n)=>{Bo(t,0,n,e)}}function zo(e){return t=>(i,n,r)=>No(new Fo(e,t))(i,n,r)}const Ho=zo(Mo);function Vo(e){return No(new Fo(Po,e))}const Uo=Symbol("ContributionProvider");class Wo{constructor(e,t){this.serviceIdentifier=e,this.container=t}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}}function Go(e,t){e(Uo).toDynamicValue((e=>{let{container:i}=e;return new Wo(t,i)})).inSingletonScope().whenTargetNamed(t)}class Ko{constructor(e,t){this._args=e,this.name=t,this.taps=[]}tap(e,t){this._tap("sync",e,t)}unTap(e,t){const i="string"==typeof e?e.trim():e.name;i&&(this.taps=this.taps.filter((e=>e.name!==i&&(!t||e.fn===t))))}_parseOptions(e,t,i){let n;if("string"==typeof t)n={name:t.trim()};else if("object"!=typeof t||null===t)throw new Error("Invalid tap options");if("string"!=typeof n.name||""===n.name)throw new Error("Missing name for tap");return n=Object.assign({type:e,fn:i},n),n}_tap(e,t,i){this._insert(this._parseOptions(e,t,i))}_insert(e){let t;"string"==typeof e.before?t=new Set([e.before]):Array.isArray(e.before)&&(t=new Set(e.before));let i=0;"number"==typeof e.stage&&(i=e.stage);let n=this.taps.length;for(;n>0;){n--;const e=this.taps[n];this.taps[n+1]=e;const r=e.stage||0;if(t){if(t.has(e.name)){t.delete(e.name);continue}if(t.size>0)continue}if(!(r>i)){n++;break}}this.taps[n]=e}}class Yo extends Ko{call(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.taps.map((e=>e.fn)).forEach((e=>e(...t)))}}const Xo=Symbol.for("EnvContribution"),qo=Symbol.for("VGlobal");var Zo=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Qo=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},$o=function(e,t){return function(i,n){t(i,n,e)}};let Jo=class{get env(){return this._env}get devicePixelRatio(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent}set supportEvent(e){this._env||this.setEnv("browser"),this.envContribution.supportEvent=e}get supportsTouchEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(e){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=e}get supportsPointerEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(e){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=e}get supportsMouseEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(e){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=e}get applyStyles(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles}set applyStyles(e){this._env||this.setEnv("browser"),this.envContribution.applyStyles=e}constructor(e){this.contributions=e,this.id=To.GenAutoIncrementId(),this.hooks={onSetEnv:new Yo(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}bindContribution(e){const t=[];if(this.contributions.getContributions().forEach((i=>{const n=i.configure(this,e);n&&n.then&&t.push(n)})),t.length)return Promise.all(t)}getDynamicCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}setEnv(e,t){if(t&&!0===t.force||this._env!==e)return this.deactiveCurrentEnv(),this.activeEnv(e,t)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(e,t){const i=this._env;this._env=e;const n=this.bindContribution(t);if(n&&n.then)return n.then((()=>{this.envParams=t,this.hooks.onSetEnv.call(i,e,this)}));this.envParams=t,this.hooks.onSetEnv.call(i,e,this)}setActiveEnvContribution(e){this.envContribution=e}createCanvas(e){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(e)}createOffscreenCanvas(e){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(e)}releaseCanvas(e){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(e)}addEventListener(e,t,i){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(e,t,i)}removeEventListener(e,t,i){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(e,t,i)}dispatchEvent(e){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(e)}getRequestAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}getCancelAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}getElementById(e){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(e):null}getRootElement(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(e,t){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(e,t):null}loadImage(e){return this._env||this.setEnv("browser"),this.envContribution.loadImage(e)}loadSvg(e){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(e)}loadJson(e){return this._env||this.setEnv("browser"),this.envContribution.loadJson(e)}loadArrayBuffer(e){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(e)}loadBlob(e){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(e)}isChrome(){return null!=this._isChrome||(this._env||this.setEnv("browser"),this._isChrome="browser"===this._env&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}isSafari(){return null!=this._isSafari||(this._env||this.setEnv("browser"),this._isSafari="browser"===this._env&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(e){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(e)}removeDom(e){return this._env||this.setEnv("browser"),this.envContribution.removeDom(e)}createDom(e){return this._env||this.setEnv("browser"),this.envContribution.createDom(e)}getElementTop(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._env||this.setEnv("browser"),this.envContribution.getElementTop(e,t)}getElementLeft(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(e,t)}getElementTopLeft(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(e,t)}};function el(e){return e*(Math.PI/180)}function tl(e){return 180*e/Math.PI}Jo=Zo([jo(),$o(0,Ho(Uo)),$o(0,Vo(Xo)),Qo("design:paramtypes",[Object])],Jo);const il=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e<0)for(;e<-Nn;)e+=Nn;else if(e>0)for(;e>Nn;)e-=Nn;return e};function nl(e,t,i){return{x:e.x+t*Math.cos(i),y:e.y+t*Math.sin(i)}}function rl(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}class sl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.a=e,this.b=t,this.c=i,this.d=n,this.e=r,this.f=s}equalToMatrix(e){return!(this.e!==e.e||this.f!==e.f||this.a!==e.a||this.d!==e.d||this.b!==e.b||this.c!==e.c)}equalTo(e,t,i,n,r,s){return!(this.e!==r||this.f!==s||this.a!==e||this.d!==n||this.b!==t||this.c!==i)}setValue(e,t,i,n,r,s){return this.a=e,this.b=t,this.c=i,this.d=n,this.e=r,this.f=s,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){const e=this.a,t=this.b,i=this.c,n=this.d,r=this.e,s=this.f,a=new sl,o=e*n-t*i;return a.a=n/o,a.b=-t/o,a.c=-i/o,a.d=e/o,a.e=(i*s-n*r)/o,a.f=-(e*s-t*r)/o,a}rotate(e){const t=Math.cos(e),i=Math.sin(e),n=this.a*t+this.c*i,r=this.b*t+this.d*i,s=this.a*-i+this.c*t,a=this.b*-i+this.d*t;return this.a=n,this.b=r,this.c=s,this.d=a,this}rotateByCenter(e,t,i){const n=Math.cos(e),r=Math.sin(e),s=(1-n)*t+r*i,a=(1-n)*i-r*t,o=n*this.a-r*this.b,l=r*this.a+n*this.b,c=n*this.c-r*this.d,h=r*this.c+n*this.d,d=n*this.e-r*this.f+s,u=r*this.e+n*this.f+a;return this.a=o,this.b=l,this.c=c,this.d=h,this.e=d,this.f=u,this}scale(e,t){return this.a*=e,this.b*=e,this.c*=t,this.d*=t,this}setScale(e,t){return this.b=this.b/this.a*e,this.c=this.c/this.d*t,this.a=e,this.d=t,this}transform(e,t,i,n,r,s){return this.multiply(e,t,i,n,r,s),this}translate(e,t){return this.e+=this.a*e+this.c*t,this.f+=this.b*e+this.d*t,this}transpose(){const{a:e,b:t,c:i,d:n,e:r,f:s}=this;return this.a=t,this.b=e,this.c=n,this.d=i,this.e=s,this.f=r,this}multiply(e,t,i,n,r,s){const a=this.a,o=this.b,l=this.c,c=this.d,h=a*e+l*t,d=o*e+c*t,u=a*i+l*n,p=o*i+c*n,g=a*r+l*s+this.e,f=o*r+c*s+this.f;return this.a=h,this.b=d,this.c=u,this.d=p,this.e=g,this.f=f,this}interpolate(e,t){const i=new sl;return i.a=this.a+(e.a-this.a)*t,i.b=this.b+(e.b-this.b)*t,i.c=this.c+(e.c-this.c)*t,i.d=this.d+(e.d-this.d)*t,i.e=this.e+(e.e-this.e)*t,i.f=this.f+(e.f-this.f)*t,i}transformPoint(e,t){const{a:i,b:n,c:r,d:s,e:a,f:o}=this,l=i*s-n*r,c=s/l,h=-n/l,d=-r/l,u=i/l,p=(r*o-s*a)/l,g=-(i*o-n*a)/l,{x:f,y:m}=e;t.x=f*c+m*d+p,t.y=f*h+m*u+g}onlyTranslate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.a===e&&0===this.b&&0===this.c&&this.d===e}clone(){return new sl(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){const e=this.a,t=this.b,i=this.c,n=this.d,r=e*n-t*i,s={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!==e||0!==t){const a=Math.sqrt(e*e+t*t);s.rotateDeg=t>0?Math.acos(e/a):-Math.acos(e/a),s.scaleX=a,s.scaleY=r/a,s.skewX=(e*i+t*n)/r,s.skewY=0}else if(0!==i||0!==n){const a=Math.sqrt(i*i+n*n);s.rotateDeg=Math.PI/2-(n>0?Math.acos(-i/a):-Math.acos(i/a)),s.scaleX=r/a,s.scaleY=a,s.skewX=0,s.skewY=(e*i+t*n)/r}return s.rotateDeg=tl(s.rotateDeg),s}}const al=Nn-1e-8;class ol{constructor(e){this.init(e)}init(e){this.bounds=e}arc(e,t,i,n,r,s){if(Math.abs(r-n)>al)return this.bounds.add(e-i,t-i),void this.bounds.add(e+i,t+i);let a,o,l,c,h=1/0,d=-1/0,u=1/0,p=-1/0;function g(e){l=i*Math.cos(e),c=i*Math.sin(e),l<h&&(h=l),l>d&&(d=l),c<u&&(u=c),c>p&&(p=c)}if(g(n),g(r),r!==n)if((n%=Nn)<0&&(n+=Nn),(r%=Nn)<0&&(r+=Nn),r<n&&(s=!s,a=n,n=r,r=a),s)for(r-=Nn,a=n-n%Bn,o=0;o<4&&a>r;++o,a-=Bn)g(a);else for(a=n-n%Bn+Bn,o=0;o<4&&a<r;++o,a+=Bn)g(a);this.bounds.add(e+h,t+u),this.bounds.add(e+d,t+p)}arcTo(e,t,i,n,r){throw new Error("\u4e0d\u652f\u6301arcTo")}bezierCurveTo(e,t,i,n,r,s){this.bounds.add(e,t),this.bounds.add(i,n),this.bounds.add(r,s)}closePath(){}ellipse(){throw new Error("\u4e0d\u652f\u6301ellipse")}lineTo(e,t){this.bounds.add(e,t)}moveTo(e,t){this.bounds.add(e,t)}quadraticCurveTo(e,t,i,n){this.bounds.add(e,t),this.bounds.add(i,n)}rect(e,t,i,n){this.bounds.add(e,t),this.bounds.add(e+i,t+n)}clear(){this.bounds.clear()}release(){}}function ll(e,t,i){const{x1:n,y1:r,x2:s,y2:a}=t;return i.onlyTranslate()?(e!==t&&e.setValue(t.x1,t.y1,t.x2,t.y2),e.translate(i.e,i.f),t):(e.clear(),e.add(i.a*n+i.c*r+i.e,i.b*n+i.d*r+i.f),e.add(i.a*s+i.c*r+i.e,i.b*s+i.d*r+i.f),e.add(i.a*s+i.c*a+i.e,i.b*s+i.d*a+i.f),e.add(i.a*n+i.c*a+i.e,i.b*n+i.d*a+i.f),t)}class cl{constructor(e){e?this.setValue(e.x1,e.y1,e.x2,e.y2):this.clear()}clone(){return new cl(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}setValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.x1=e,this.y1=t,this.x2=i,this.y2=n,this}set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return i<e?(this.x2=e,this.x1=i):(this.x1=e,this.x2=i),n<t?(this.y2=t,this.y1=n):(this.y1=t,this.y2=n),this}add(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this}expand(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return v(e)?(this.y1-=e[0],this.x2+=e[1],this.y2+=e[2],this.x1-=e[3]):(this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this}rotate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.rotatedPoints(e,t,i);return this.clear().add(n[0],n[1]).add(n[2],n[3]).add(n[4],n[5]).add(n[6],n[7])}scale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=this.scalePoints(e,t,i,n);return this.clear().add(r[0],r[1]).add(r[2],r[3])}union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this}intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this}encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2}alignsWith(e){return e&&(this.x1===e.x1||this.x2===e.x2||this.y1===e.y1||this.y2===e.y2)}intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)}contains(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)}containsPoint(e){return!(e.x<this.x1||e.x>this.x2||e.y<this.y1||e.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.x1*=e,this.x2*=e,this}scaleY(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.y1*=e,this.y2*=e,this}transformWithMatrix(e){return ll(this,this,e),this}copy(e){return this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2,this}rotatedPoints(e,t,i){const{x1:n,y1:r,x2:s,y2:a}=this,o=Math.cos(e),l=Math.sin(e),c=t-t*o+i*l,h=i-t*l-i*o;return[o*n-l*r+c,l*n+o*r+h,o*n-l*a+c,l*n+o*a+h,o*s-l*r+c,l*s+o*r+h,o*s-l*a+c,l*s+o*a+h]}scalePoints(e,t,i,n){const{x1:r,y1:s,x2:a,y2:o}=this;return[e*r+(1-e)*i,t*s+(1-t)*n,e*a+(1-e)*i,t*o+(1-t)*n]}}class hl extends cl{}class dl{constructor(){this.curves=[],this.bounds=new hl}getCurveLengths(){return this.curves.map((e=>e.getLength()))}getPointAt(e){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}const ul=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,pl={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},gl={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};let fl,ml,vl,yl,bl,_l;var xl,Sl,wl,Cl,kl,Al,El,Tl,Ol;function Pl(e){const t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=l*s,h=-o*a,d=o*s,u=l*a,p=Math.cos(n),g=Math.sin(n),f=Math.cos(r),m=Math.sin(r),v=.5*(r-n),y=Math.sin(.5*v),b=8/3*y*y/Math.sin(v),_=t+p-b*g,x=i+g+b*p,S=t+f,w=i+m,C=S+b*m,k=w-b*f;return[c*_+h*x,d*_+u*x,c*C+h*k,d*C+u*k,c*S+h*w,d*S+u*w]}function Ml(e,t,i,n){const r=function(e,t,i,n,r,s,a,o,l){const c=el(a),h=Math.sin(c),d=Math.cos(c),u=d*(o-e)*.5+h*(l-t)*.5,p=d*(l-t)*.5-h*(o-e)*.5;let g=u*u/((i=Math.abs(i))*i)+p*p/((n=Math.abs(n))*n);g>1&&(g=Math.sqrt(g),i*=g,n*=g);const f=d/i,m=h/i,v=-h/n,y=d/n,b=f*o+m*l,_=v*o+y*l,x=f*e+m*t,S=v*e+y*t;let w=1/((x-b)*(x-b)+(S-_)*(S-_))-.25;w<0&&(w=0);let C=Math.sqrt(w);s===r&&(C=-C);const k=.5*(b+x)-C*(S-_),A=.5*(_+S)+C*(x-b),E=Math.atan2(_-A,b-k);let T=Math.atan2(S-A,x-k)-E;T<0&&1===s?T+=Nn:T>0&&0===s&&(T-=Nn);const O=Math.ceil(Math.abs(T/(Bn+.001))),P=[];for(let M=0;M<O;++M){const e=E+M*T/O,t=E+(M+1)*T/O;P[M]=[k,A,e,t,i,n,h,d]}return P}(n[5],n[6],n[0],n[1],n[3],n[4],n[2],t,i);for(let s=0;s<r.length;++s){const t=Pl(r[s]);e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])}}!function(e){e[e.NONE=0]="NONE",e[e.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",e[e.UPDATE_SHAPE=2]="UPDATE_SHAPE",e[e.CLEAR_SHAPE=253]="CLEAR_SHAPE",e[e.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",e[e.INIT=179]="INIT",e[e.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",e[e.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",e[e.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",e[e.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",e[e.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",e[e.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",e[e.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",e[e.CLEAR_LAYOUT=127]="CLEAR_LAYOUT"}(xl||(xl={})),function(e){e[e.GLOBAL=1]="GLOBAL",e[e.LOCAL=16]="LOCAL",e[e.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",e[e.LOCAL_ACCURATE=48]="LOCAL_ACCURATE"}(Sl||(Sl={})),function(e){e[e.INIT=0]="INIT",e[e.DEFAULT=1]="DEFAULT",e[e.STATE=2]="STATE",e[e.ANIMATE_BIND=10]="ANIMATE_BIND",e[e.ANIMATE_PLAY=11]="ANIMATE_PLAY",e[e.ANIMATE_START=12]="ANIMATE_START",e[e.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",e[e.ANIMATE_END=14]="ANIMATE_END",e[e.TRANSLATE=20]="TRANSLATE",e[e.TRANSLATE_TO=21]="TRANSLATE_TO",e[e.SCALE=22]="SCALE",e[e.SCALE_TO=23]="SCALE_TO",e[e.ROTATE=24]="ROTATE",e[e.ROTATE_TO=25]="ROTATE_TO"}(wl||(wl={})),function(e){e[e.INITIAL=0]="INITIAL",e[e.RUNNING=1]="RUNNING",e[e.PAUSED=2]="PAUSED",e[e.END=3]="END"}(Cl||(Cl={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.SET_ATTR_IMMEDIATELY=1]="SET_ATTR_IMMEDIATELY"}(kl||(kl={})),function(e){e.wait="wait",e.from="from",e.to="to",e.customAnimate="customAnimate"}(Al||(Al={})),function(e){e[e.ROW=1]="ROW",e[e.COLUMN=2]="COLUMN"}(El||(El={})),function(e){e[e.CubicBezierCurve=0]="CubicBezierCurve",e[e.QuadraticBezierCurve=1]="QuadraticBezierCurve",e[e.ArcCurve=2]="ArcCurve",e[e.LineCurve=3]="LineCurve",e[e.EllipseCurve=4]="EllipseCurve",e[e.MoveCurve=5]="MoveCurve"}(Tl||(Tl={})),function(e){e[e.beforeFillStroke=0]="beforeFillStroke",e[e.afterFillStroke=1]="afterFillStroke"}(Ol||(Ol={}));const Il=(e,t,i,n,r,s,a)=>{const o=Math.abs(i-t),l=4*Math.tan(o/4)/3,c=i<t?-1:1,h=Math.cos(t),d=Math.sin(t),u=Math.cos(i),p=Math.sin(i),g=h*s+n,f=d*a+r,m=u*s+n,v=p*a+r,y=s*l*c,b=a*l*c;e.push(g-y*d,f+b*h,m+y*p,v-b*u,m,v)},Rl=[(e,t,i,n,r,s,a)=>t.arc(e[1]*r+i,e[2]*s+n,e[3]*(r+s)/2,e[4],e[5],e[6],a),(e,t,i,n,r,s,a)=>t.arcTo(e[1]*r+i,e[2]*s+n,e[3]*r+i,e[4]*s+n,e[5]*(r+s)/2,a),(e,t,i,n,r,s,a)=>t.bezierCurveTo(e[1]*r+i,e[2]*s+n,e[3]*r+i,e[4]*s+n,e[5]*r+i,e[6]*s+n,a),(e,t,i,n)=>t.closePath(),(e,t,i,n,r,s)=>t.ellipse(e[1]*r+i,e[2]*s+n,e[3]*r,e[4]*s,e[5],e[6],e[7],e[8]),(e,t,i,n,r,s,a)=>t.lineTo(e[1]*r+i,e[2]*s+n,a),(e,t,i,n,r,s,a)=>t.moveTo(e[1]*r+i,e[2]*s+n,a),(e,t,i,n,r,s,a)=>t.quadraticCurveTo(e[1]*r+i,e[2]*s+n,e[3]*r+i,e[4]*s+n,a),(e,t,i,n,r,s,a)=>t.rect(e[1]*r+i,e[2]*s+n,e[3]*r,e[4]*s,a)];function Dl(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0;for(let o=0;o<e.length;o++){const l=e[o];Rl[l[0]](l,t,i,n,r,s,a)}}class Ll{getLength(e){return null!=e?this.calcProjLength(e):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}function jl(e,t,i,n,r){return function(e,t){let i=0;const n=e.length;for(let r=0;r<n;r++){const s=e[r],a=t[r],o=e[(r+1)%n],l=t[(r+1)%n];i+=nr.distanceNN(s,a,o,l)}return i/2}([e.x,t.x,i.x,n.x],[e.y,t.y,i.y,n.y])}function Fl(e,t,i,n,r){const s=1-r;return s*s*s*e+3*t*r*s*s+3*i*r*r*s+n*r*r*r}function Bl(e,t,i,n,r){const s=Fl(e.x,t.x,i.x,n.x,r),a=Fl(e.y,t.y,i.y,n.y,r);return new ir(s,a)}function Nl(e,t){const{p0:i,p1:n,p2:r,p3:s}=e,a=Bl(i,n,r,s,t),o=nr.pointAtPP(i,n,t),l=nr.pointAtPP(n,r,t),c=nr.pointAtPP(r,s,t),h=nr.pointAtPP(o,l,t),d=nr.pointAtPP(l,c,t);return[new zl(i,o,h,a),new zl(a,d,c,s)]}class zl extends Ll{constructor(e,t,i,n){super(),this.type=Tl.CubicBezierCurve,this.p0=e,this.p1=t,this.p2=i,this.p3=n}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(e){if(!1!==this.defined)return Bl(this.p0,this.p1,this.p2,this.p3,e);throw new Error("defined\u4e3afalse\u7684\u70b9\u4e0d\u80fdgetPointAt")}calcLength(){return this._validPoint()?jl(this.p0,this.p1,this.p2,this.p3):60}calcProjLength(e){return e===El.ROW?Hn(this.p0.x-this.p3.x):e===El.COLUMN?Hn(this.p0.y-this.p3.y):0}getAngleAt(e){const t=Wn(e-.01,0),i=Gn(e+.01,1),n=this.getPointAt(t),r=this.getPointAt(i);return Vn(r.y-n.y,r.x-n.x)}}function Hl(e,t){const{p0:i,p1:n}=e,r=nr.pointAtPP(i,n,t);return[new Vl(i,r),new Vl(r,n)]}class Vl extends Ll{constructor(e,t){super(),this.type=Tl.LineCurve,this.p0=e,this.p1=t}getPointAt(e){if(!1!==this.defined)return nr.pointAtPP(this.p0,this.p1,e);throw new Error("defined\u4e3afalse\u7684\u70b9\u4e0d\u80fdgetPointAt")}getAngleAt(e){return null==this.angle&&(this.angle=Vn(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?nr.distancePP(this.p0,this.p1):60}calcProjLength(e){return e===El.ROW?Hn(this.p0.x-this.p1.x):e===El.COLUMN?Hn(this.p0.y-this.p1.y):0}}class Ul{get endX(){return this._lastX}get endY(){return this._lastY}constructor(e,t){this.init(e,t)}init(e,t){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=e,this.direction=t,this.curves=[]}bezierCurveTo(e,t,i,n,r,s,a,o){const l=new zl(new ir(this._lastX,this._lastY),new ir(e,t),new ir(i,n),new ir(r,s));l.originP1=this._lastOriginP,l.originP2=o,l.defined=a,this.curves.push(l),this._lastX=r,this._lastY=s,this._lastOriginP=o}closePath(){if(this.curves.length<2)return;const e=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,e.defined,this._startOriginP)}ellipse(){throw new Error("SegContext\u4e0d\u652f\u6301\u8c03\u7528ellipse")}lineTo(e,t,i,n){const r=this.addLinearCurve(e,t,i,this._lastOriginP,n);this.curves.push(r),this._lastX=e,this._lastY=t,this._lastOriginP=n}moveTo(e,t,i){return this._lastX=this._startX=e,this._lastY=this._startY=t,this._lastOriginP=i,this._startOriginP=i,this}quadraticCurveTo(e,t,i,n){throw new Error("SegContext\u4e0d\u652f\u6301\u8c03\u7528quadraticCurveTo")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(e){return this.getLength(e)}addLinearCurve(e,t,i,n,r){const s=new Vl(new ir(this._lastX,this._lastY),new ir(e,t));return s.originP1=n,s.originP2=r,s.defined=i,s}getPointAt(e){throw new Error("\u6682\u672a\u5b9e\u73b0")}getCurveLengths(){return[]}getLength(e){var t,i;if(e===El.COLUMN){if(!this.curves.length)return 0;const e=this.curves[0],i=this.curves[this.curves.length-1],n=null!==(t=i.p3)&&void 0!==t?t:i.p1;return Hn(e.p0.y-n.y)}if(e===El.ROW){if(!this.curves.length)return 0;const e=this.curves[0],t=this.curves[this.curves.length-1],n=null!==(i=t.p3)&&void 0!==i?i:t.p1;return Hn(e.p0.x-n.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce(((e,t)=>e+t.getLength()),0)),this.length}}class Wl extends Ul{bezierCurveTo(e,t,i,n,r,s,a,o){return super.bezierCurveTo(t,e,n,i,s,r,a,o)}lineTo(e,t,i,n){return super.lineTo(t,e,i,n)}moveTo(e,t,i){return super.moveTo(t,e,i)}clear(){return super.clear()}}function Gl(e,t){let i=!1;for(let n=0,r=t.length;n<=r;n++)n>=r===i&&((i=!i)?e.lineStart():e.lineEnd()),i&&e.point(t[n])}function Kl(e,t,i){const n=null!=t?t:Hn(i[i.length-1].x-i[0].x)>Hn(i[i.length-1].y-i[0].y)?El.ROW:El.COLUMN;return"monotoneY"===e?new Wl(e,n):new Ul(e,n)}class Yl{constructor(e,t){this.context=e,t&&(this.startPoint=t)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(e){const t=e.x,i=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,i,!1!==this._lastDefined&&!1!==e.defined,e):this.context.moveTo(t,i,e);break;case 1:this._point=2;default:this.context.lineTo(t,i,!1!==this._lastDefined&&!1!==e.defined,e)}this._lastDefined=e.defined}tryUpdateLength(){return this.context.tryUpdateLength()}}function Xl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{direction:i,startPoint:n}=t;if(e.length<2-Number(!!n))return null;const r=Kl("linear",i,e);return function(e,t){Gl(e,t,1)}(new Yl(r,n),e),r}function ql(e,t,i,n,r){e.context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6,n,e.lastPoint1)}class Zl{constructor(e,t){this.context=e,this.startPoint=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){2===this._point&&ql(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(e){const t=e.x,i=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,e):this.context.moveTo(t,i,e);break;case 1:this._point=2;break;default:ql(this,t,i,!1!==this._lastDefined1&&!1!==this._lastDefined2)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}}function Ql(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{direction:i,startPoint:n}=t;if(e.length<2-Number(!!n))return null;if(e.length<3-Number(!!n))return Xl(e,t);const r=Kl("basis",i,e);return function(e,t){Gl(e,t,2)}(new Zl(r,n),e),r}function $l(e){return e<0?-1:1}function Jl(e,t,i){const n=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(n||Number(r<0&&-0)),a=(i-e._y1)/(r||Number(n<0&&-0)),o=(s*r+a*n)/(n+r);return($l(s)+$l(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function ec(e,t){const i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function tc(e,t,i,n,r){const s=e._x0,a=e._y0,o=e._x1,l=e._y1,c=(o-s)/3;e.context.bezierCurveTo(s+c,a+c*t,o-c,l-c*i,o,l,n,e.lastPoint1)}class ic{constructor(e,t){this.context=e,this.startPoint=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:tc(this,this._t0,ec(this,this._t0),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1)}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(e){let t=NaN;const i=e.x,n=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(i,n,!1!==this._lastDefined1&&!1!==this._lastDefined2,e):this.context.moveTo(i,n,e);break;case 1:this._point=2;break;case 2:this._point=3,tc(this,ec(this,t=Jl(this,i,n)),t,!1!==this._lastDefined1&&!1!==this._lastDefined2);break;default:tc(this,this._t0,t=Jl(this,i,n),!1!==this._lastDefined1&&!1!==this._lastDefined2)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=n,this._t0=t,this._lastDefined1=this._lastDefined2,this._lastDefined2=!1!==e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}}class nc extends ic{constructor(e,t){super(e,t)}point(e){return super.point({y:e.x,x:e.y,defined:e.defined})}}function rc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{direction:i,startPoint:n}=t;if(e.length<2-Number(!!n))return null;if(e.length<3-Number(!!n))return Xl(e,t);const r=Kl("monotoneX",i,e);return function(e,t){Gl(e,t,2)}(new ic(r,n),e),r}function sc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{direction:i,startPoint:n}=t;if(e.length<2-Number(!!n))return null;if(e.length<3-Number(!!n))return Xl(e,t);const r=Kl("monotoneY",i,e);return function(e,t){Gl(e,t,2)}(new nc(r,n),e),r}class ac{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=arguments.length>2?arguments[2]:void 0;this.context=e,this._t=t,this.startPoint=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&2===this._point&&this.context.lineTo(this._x,this._y,!1!==this._lastDefined,this.lastPoint),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}point(e){const t=e.x,i=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,i,!1!==this._lastDefined&&!1!==e.defined,e):this.context.moveTo(t,i,e);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,i,!1!==this._lastDefined&&!1!==e.defined,this.lastPoint),this.context.lineTo(t,i,!1!==this._lastDefined&&!1!==e.defined,e);else{const n=this._x*(1-this._t)+t*this._t;this.context.lineTo(n,this._y,!1!==this._lastDefined&&!1!==e.defined,this.lastPoint),this.context.lineTo(n,i,!1!==this._lastDefined&&!1!==e.defined,e)}}this._lastDefined=e.defined,this._x=t,this._y=i,this.lastPoint=e}tryUpdateLength(){return this.context.tryUpdateLength()}}function oc(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{direction:n,startPoint:r}=i;if(e.length<2-Number(!!r))return null;const s=new Ul("step",null!=n?n:Hn(e[e.length-1].x-e[0].x)>Hn(e[e.length-1].y-e[0].y)?El.ROW:El.COLUMN);return function(e,t){Gl(e,t,1)}(new ac(s,t,r),e),s}class lc extends Yl{lineEnd(){this.context.closePath()}}function cc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{direction:i,startPoint:n}=t;if(e.length<2-Number(!!n))return null;const r=Kl("linear",i,e);return function(e,t){Gl(e,t,1)}(new lc(r,n),e),r}function hc(e,t,i){switch(t){case"linear":default:return Xl(e,i);case"basis":return Ql(e,i);case"monotoneX":return rc(e,i);case"monotoneY":return sc(e,i);case"step":return oc(e,.5,i);case"stepBefore":return oc(e,0,i);case"stepAfter":return oc(e,1,i);case"linearClosed":return cc(e,i)}}class dc extends dl{constructor(e){super(),this.commandList=[],e&&(this._ctx=e),this._boundsContext=new ol(this.bounds)}setCtx(e){this._ctx=e}moveTo(e,t){return this.commandList.push([gl.M,e,t]),this._ctx&&this._ctx.moveTo(e,t),this}lineTo(e,t){return this.commandList.push([gl.L,e,t]),this._ctx&&this._ctx.lineTo(e,t),this}quadraticCurveTo(e,t,i,n){return this.commandList.push([gl.Q,e,t,i,n]),this._ctx&&this._ctx.quadraticCurveTo(e,t,i,n),this}bezierCurveTo(e,t,i,n,r,s){return this.commandList.push([gl.C,e,t,i,n,r,s]),this._ctx&&this._ctx.bezierCurveTo(e,t,i,n,r,s),this}arcTo(e,t,i,n,r){return this.commandList.push([gl.AT,e,t,i,n,r]),this._ctx&&this._ctx.arcTo(e,t,i,n,r),this}ellipse(e,t,i,n,r,s,a,o){return this.commandList.push([gl.E,e,t,i,n,r,s,a,o]),this._ctx&&this._ctx.ellipse(e,t,i,n,r,s,a,o),this}rect(e,t,i,n){return this.commandList.push([gl.R,e,t,i,n]),this._ctx&&this._ctx.rect(e,t,i,n),this}arc(e,t,i,n,r,s){return this.commandList.push([gl.A,e,t,i,n,r,s]),this._ctx&&this._ctx.arc(e,t,i,n,r,s),this}closePath(){return this.commandList.push([gl.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(e){this.curves.push(e)}clear(){this.transformCbList=null,this.commandList.length=0,this.curves.length=0}toString(){if(!this.toStringCbList){const e=[];e[gl.M]=e=>"M".concat(e[1]," ").concat(e[2]),e[gl.L]=e=>"L".concat(e[1]," ").concat(e[2]),e[gl.Q]=e=>"Q".concat(e[1]," ").concat(e[2]," ").concat(e[3]," ").concat(e[4]),e[gl.C]=e=>"C".concat(e[1]," ").concat(e[2]," ").concat(e[3]," ").concat(e[4]," ").concat(e[5]," ").concat(e[6]),e[gl.A]=e=>{const t=[];Il(t,e[4],e[5],e[1],e[2],e[3],e[3]);let i="";for(let n=0;n<t.length;n+=6)i+="C".concat(t[n]," ").concat(t[n+1]," ").concat(t[n+2]," ").concat(t[n+3]," ").concat(t[n+4]," ").concat(t[n+5]);return i},e[gl.Z]=e=>"Z",this.toStringCbList=e}const e=this.toStringCbList;let t="";return this.commandList.forEach((i=>{t+=e[i[0]](i)})),t}fromString(e,t,i,n,r){this.clear();const s=function(e){if(!e)return[];const t=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(null===t)return[];let i,n;const r=[];for(let s=0,a=t.length;s<a;s++)if(fl=t[s],ml=fl.slice(1),vl=fl[0],i=[vl],n=ml.match(ul),null!==n){for(let e=0,t=n.length;e<t;e++)yl=n[e],bl=parseFloat(yl),Number.isNaN(bl)||i.push(bl);if(_l=pl[vl],i.length-1>_l){let e;for(let t=1,n=i.length;t<n;t+=_l){e=[vl];for(let n=t,r=t+_l;n<r;n++)e.push(i[n]);r.push(e)}}else r.push(i)}else r.push(i);return r}(e);return this._runCommandStrList(s,t,i,n,r),this._updateBounds(),this}fromLine(e){const{points:t,curveType:i,clipRangeByDimension:n}=e.attribute;if(!t)return;const r=hc(t,i);"x"===n?this.direction=El.ROW:"y"===n?this.direction=El.COLUMN:"auto"===n&&(this.direction=r.direction),this.curves=r.curves}fromCustomPath2D(e,t,i,n,r){return this.clear(),this._runCommandList(e.commandList,t,i,n,r),this._updateBounds(),this}transform(e,t,i,n){const r=this.commandList;if(!this.transformCbList){const e=[];e[gl.M]=this.moveToTransform,e[gl.L]=this.lineToTransform,e[gl.Q]=this.quadraticCurveToTransform,e[gl.C]=this.bezierCurveToTransform,e[gl.AT]=this.arcToTransform,e[gl.E]=this.ellipseTransform,e[gl.R]=this.rectTransform,e[gl.A]=this.arcTransform,e[gl.Z]=this.closePathTransform,this.transformCbList=e}r.forEach((r=>{this.transformCbList[r[0]](r,e,t,i,n)})),this._updateBounds()}moveToTransform(e,t,i,n,r){e[1]=e[1]*n+t,e[2]=e[2]*r+i}lineToTransform(e,t,i,n,r){e[1]=e[1]*n+t,e[2]=e[2]*r+i}quadraticCurveToTransform(e,t,i,n,r){e[1]=e[1]*n+t,e[2]=e[2]*r+i,e[3]=e[3]*n+t,e[4]=e[4]*r+i}bezierCurveToTransform(e,t,i,n,r){e[1]=e[1]*n+t,e[2]=e[2]*r+i,e[3]=e[3]*n+t,e[4]=e[4]*r+i,e[5]=e[5]*n+t,e[6]=e[6]*r+i}arcToTransform(e,t,i,n,r){e[1]=e[1]*n+t,e[2]=e[2]*r+i,e[3]=e[3]*n+t,e[4]=e[4]*r+i,e[5]=e[5]*(n+r)/2}ellipseTransform(e,t,i,n,r){e[1]=e[1]*n+t,e[2]=e[2]*r+i,e[3]=e[3]*n,e[4]=e[4]*r}rectTransform(e,t,i,n,r){e[1]=e[1]*n+t,e[2]=e[2]*r+i,e[3]=e[3]*n,e[4]=e[4]*r}arcTransform(e,t,i,n,r){e[1]=e[1]*n+t,e[2]=e[2]*r+i,e[3]=e[3]*(n+r)/2}closePathTransform(){}_runCommandStrList(e){let t,i,n,r,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,h=null,d=0,u=0,p=0,g=0;for(let f=0,m=e.length;f<m;++f){switch(t=e[f],1===l&&1===c||(t=pc(t,l,c)),t[0]){case"l":d+=t[1],u+=t[2],this.lineTo(d+a,u+o);break;case"L":d=t[1],u=t[2],this.lineTo(d+a,u+o);break;case"h":d+=t[1],this.lineTo(d+a,u+o);break;case"H":d=t[1],this.lineTo(d+a,u+o);break;case"v":u+=t[1],this.lineTo(d+a,u+o);break;case"V":u=t[1],this.lineTo(d+a,u+o);break;case"m":d+=t[1],u+=t[2],this.moveTo(d+a,u+o);break;case"M":d=t[1],u=t[2],this.moveTo(d+a,u+o);break;case"c":i=d+t[5],n=u+t[6],p=d+t[3],g=u+t[4],this.bezierCurveTo(d+t[1]+a,u+t[2]+o,p+a,g+o,i+a,n+o),d=i,u=n;break;case"C":d=t[5],u=t[6],p=t[3],g=t[4],this.bezierCurveTo(t[1]+a,t[2]+o,p+a,g+o,d+a,u+o);break;case"s":i=d+t[3],n=u+t[4],p=2*d-p,g=2*u-g,this.bezierCurveTo(p+a,g+o,d+t[1]+a,u+t[2]+o,i+a,n+o),p=d+t[1],g=u+t[2],d=i,u=n;break;case"S":i=t[3],n=t[4],p=2*d-p,g=2*u-g,this.bezierCurveTo(p+a,g+o,t[1]+a,t[2]+o,i+a,n+o),d=i,u=n,p=t[1],g=t[2];break;case"q":i=d+t[3],n=u+t[4],p=d+t[1],g=u+t[2],this.quadraticCurveTo(p+a,g+o,i+a,n+o),d=i,u=n;break;case"Q":i=t[3],n=t[4],this.quadraticCurveTo(t[1]+a,t[2]+o,i+a,n+o),d=i,u=n,p=t[1],g=t[2];break;case"t":i=d+t[1],n=u+t[2],null===h[0].match(/[QqTt]/)?(p=d,g=u):"t"===h[0]?(p=2*d-r,g=2*u-s):"q"===h[0]&&(p=2*d-p,g=2*u-g),r=p,s=g,this.quadraticCurveTo(p+a,g+o,i+a,n+o),d=i,u=n,p=d+t[1],g=u+t[2];break;case"T":i=t[1],n=t[2],p=2*d-p,g=2*u-g,this.quadraticCurveTo(p+a,g+o,i+a,n+o),d=i,u=n;break;case"a":Ml(this,d+a,u+o,[t[1],t[2],t[3],t[4],t[5],t[6]+d+a,t[7]+u+o]),d+=t[6],u+=t[7];break;case"A":Ml(this,d+a,u+o,[t[1],t[2],t[3],t[4],t[5],t[6]+a,t[7]+o]),d=t[6],u=t[7];break;case"z":case"Z":this.closePath()}h=t}}_runCommandList(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(0!==t||0!==i||1!==n||1!==r)for(let s=0,a=e.length;s<a;++s){const a=e[s].slice();switch(a[0]){case gl.L:this.lineToTransform(a,t,i,n,r);break;case gl.M:this.moveToTransform(a,t,i,n,r);break;case gl.C:this.bezierCurveToTransform(a,t,i,n,r);break;case gl.Q:this.quadraticCurveToTransform(a,t,i,n,r);break;case gl.A:this.arcToTransform(a,t,i,n,r);break;case gl.E:this.ellipseTransform(a,t,i,n,r);break;case gl.R:this.rectTransform(a,t,i,n,r);break;case gl.AT:this.arcToTransform(a,t,i,n,r);break;case gl.Z:this.closePath()}}else this.commandList=e.map((e=>e.slice()))}_updateBounds(){this.bounds.clear(),Dl(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){if(this.direction===El.COLUMN){if(!this.curves.length)return 0;const e=this.curves[0],t=this.curves[this.curves.length-1];return Hn(e.p0.y-t.p1.y)}if(this.direction===El.ROW){if(!this.curves.length)return 0;const e=this.curves[0],t=this.curves[this.curves.length-1];return Hn(e.p0.x-t.p1.x)}return this.curves.reduce(((e,t)=>e+t.getLength()),0)}getAttrAt(e){if(!this.curves)return{pos:{x:0,y:0},angle:0};let t,i=0;for(let r=0;r<this.curves.length;r++){t=this.curves[r];const n=t.getLength(this.direction);if(i+n>=e)break;i+=n}const n=(e-i)/t.getLength(this.direction);return{pos:t.getPointAt(n),angle:t.getAngleAt(n)}}}const uc=["l",0,0,0,0,0,0,0];function pc(e,t,i){const n=uc[0]=e[0];if("a"===n||"A"===n)uc[1]=t*e[1],uc[2]=i*e[2],uc[3]=e[3],uc[4]=e[4],uc[5]=e[5],uc[6]=t*e[6],uc[7]=i*e[7];else if("h"===n||"H"===n)uc[1]=t*e[1];else if("v"===n||"V"===n)uc[1]=i*e[1];else for(let r=1,s=e.length;r<s;++r)uc[r]=(r%2==1?t:i)*e[r];return uc}const gc={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new sl},fc={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:"black",shadowOffsetX:0,shadowOffsetY:0},mc={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},vc=Object.assign({outerBorder:Object.assign(Object.assign({},mc),{distance:0}),innerBorder:Object.assign(Object.assign({},mc),{distance:0})},mc),yc={text:"",maxLineWidth:1/0,textAlign:"left",textBaseline:"alphabetic",fontSize:16,fontFamily:"PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,\n    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol",fontWeight:"",ellipsis:"\u2026",fontVariant:"",fontStyle:"",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:"horizontal",wordBreak:"break-all",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:"no-wrap",heightLimit:1/0,lineClamp:1/0,suffixPosition:"end",disableAutoClipedPoptip:void 0},bc=Object.assign(Object.assign(Object.assign(Object.assign({opacity:1,background:null,texture:null,textureColor:"black",textureSize:10,texturePadding:2,backgroundMode:"no-repeat",backgroundFit:!0,blur:0,cursor:null,html:null},fc),vc),{alignSelf:"auto"}),{pickStrokeBuffer:0}),_c={connectedType:"none",connectedStyle:{},connectedX:NaN,connectedY:NaN},xc=Object.assign(Object.assign(Object.assign({strokeSeg:null,pickable:!0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,pickMode:"accurate",customPickShape:null,boundsMode:"accurate",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:"",overflow:"hidden"},{_debug_bounds:!1}),bc),gc);const Sc=Object.assign(Object.assign({},xc),{startAngle:0,endAngle:zn,innerRadius:0,outerRadius:1,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),wc=Object.assign(Object.assign(Object.assign({},xc),_c),{points:[],segments:[],curveType:"linear",clipRange:1,closePath:!1}),Cc=Object.assign(Object.assign({},xc),{radius:1,startAngle:0,endAngle:zn}),kc=Object.assign(Object.assign({},xc),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:"relative",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start"}),Ac=Object.assign(Object.assign({},xc),{path:"",width:0,height:0,cornerRadius:0,clip:!1}),Ec=Object.assign(Object.assign(Object.assign({},xc),_c),{points:[],segments:[],curveType:"linear",clipRange:1,clipRangeByDimension:"default",closePath:!1}),Tc=Object.assign(Object.assign({},xc),{path:new dc,customPath:()=>{u.getInstance().warn("\u7a7a\u51fd\u6570")}}),Oc=Object.assign(Object.assign({},xc),{points:[],cornerRadius:0,closePath:!0}),Pc=Object.assign(Object.assign({},xc),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0}),Mc=Object.assign(Object.assign({},xc),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0}),Ic=Object.assign(Object.assign({},xc),{symbolType:"circle",size:10,keepDirIn3d:!0}),Rc=Object.assign(Object.assign(Object.assign({},xc),yc),{strokeBoundsBuffer:0,keepDirIn3d:!0}),Dc=Object.assign(Object.assign({},xc),{width:300,height:300,ellipsis:!0,wordBreak:"break-word",verticalDirection:"top",textAlign:"left",textBaseline:"top",layoutDirection:"horizontal",textConfig:[],maxHeight:void 0,maxWidth:void 0,singleLine:!1}),Lc=Object.assign(Object.assign({repeatX:"no-repeat",repeatY:"no-repeat",image:"",width:0,height:0},xc),{fill:!0,cornerRadius:0}),jc=Object.assign(Object.assign({},Lc),{backgroundShowMode:"never",backgroundWidth:0,backgroundHeight:0,textAlign:"left",textBaseline:"middle",direction:"horizontal",margin:0,id:"",width:20,height:20,backgroundFill:"rgba(101, 117, 168, 0.1)",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1}),Fc={horizontal:{width:"width",height:"height",left:"left",top:"top",x:"x",y:"y",bottom:"bottom"},vertical:{width:"height",height:"width",left:"top",top:"left",x:"y",y:"x",bottom:"right"}},Bc=!0,Nc=!1,zc=(String.fromCharCode(160),/\w|\(|\)|-/),Hc=/[.?!,;:/\uff0c\u3002\uff1f\uff01\u3001\uff1b\uff1a]/,Vc=/\S/;function Uc(e,t,i,n,r){if(!t||t<=0)return 0;const s=se.graphicUtil.textMeasure;let a=n,o=e.slice(0,a),l=Math.floor(s.measureText(o,i).width),c=e.slice(0,a+1),h=Math.floor(s.measureText(c,i).width);for(;l>t||h<=t;){if(l>t?a--:a++,a>e.length){a=e.length;break}if(a<0){a=0;break}o=e.slice(0,a),l=Math.floor(s.measureText(o,i).width),c=e.slice(0,a+1),h=Math.floor(s.measureText(c,i).width)}return r&&(a=Wc(e,a)),a}function Wc(e,t){let i=t;for(;zc.test(e[i-1])&&zc.test(e[i])||Hc.test(e[i]);)if(i--,i<=0)return t;return i}function Gc(e,t){const i=se.graphicUtil.textMeasure.measureText(e,t),n={ascent:0,height:0,descent:0,width:0};return"number"!=typeof i.actualBoundingBoxAscent||"number"!=typeof i.actualBoundingBoxDescent?(n.width=Math.floor(i.width),n.height=t.fontSize||0,n.ascent=n.height,n.descent=0):(n.width=Math.floor(i.width),n.height=Math.floor(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent),n.ascent=Math.floor(i.actualBoundingBoxAscent),n.descent=n.height-n.ascent),n}var Kc=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let Yc=class{configure(e,t){this.canvas=e.canvas,this.context=e.context,e.bindTextMeasure(this)}measureTextWidth(e,t){return this.context?(this.context.setTextStyleWithoutAlignBaseline(t),this.context.measureText(e).width):this.estimate(e,t).width}estimate(e,t){let{fontSize:i=Rc.fontSize}=t,n=0,r=0;for(let s=0;s<e.length;s++)e.charCodeAt(s)<128?n++:r++;return{width:~~(.8*n*i+r*i),height:i}}measureTextPixelHeight(e,t){var i;if(!this.context)return null!==(i=t.fontSize)&&void 0!==i?i:yc.fontSize;this.context.setTextStyleWithoutAlignBaseline(t);const n=this.context.measureText(e);return Math.abs(n.actualBoundingBoxAscent-n.actualBoundingBoxDescent)}measureTextBoundHieght(e,t){var i;if(!this.context)return null!==(i=t.fontSize)&&void 0!==i?i:yc.fontSize;this.context.setTextStyleWithoutAlignBaseline(t);const n=this.context.measureText(e);return Math.abs(n.fontBoundingBoxAscent-n.fontBoundingBoxDescent)}measureText(e,t){return this.context?(this.context.setTextStyleWithoutAlignBaseline(t),this.context.measureText(e)):this.estimate(e,t)}clipTextVertical(e,t,i,n){if(0===e.length)return{verticalList:e,width:0};const{fontSize:r=12}=t;e.forEach((e=>{e.width=0===e.direction?r:this.measureTextWidth(e.text,t)}));const s=[];let a=0,o=0;for(;o<e.length&&a+e[o].width<i;o++)a+=e[o].width,s.push(e[o]);if(e[o]&&e[o].text.length>1){const r=this._clipText(e[o].text,t,i-a,0,e[o].text.length-1,"end",!1);if(n&&r.str!==e[o].text){let i="",n=0;for(let t=0;t<o;t++){const r=e[t];i+=r.text,n+=r.text.length}i+=e[o].text;let s=Wc(i,n+r.str.length);s-=n,s!==r.str.length-1&&(r.str=r.str.substring(0,s),r.width=this.measureTextWidth(r.str,t))}s.push(Object.assign(Object.assign({},e[o]),{text:r.str,width:r.width})),a+=r.width}return{verticalList:s,width:a}}clipText(e,t,i,n){if(0===e.length)return{str:"",width:0};let r=this.measureTextWidth(e,t);if(r<=i)return{str:e,width:r};if(r=this.measureTextWidth(e[0],t),r>i)return{str:"",width:0};const s=this._clipText(e,t,i,0,e.length-1,"end",!1);if(n&&s.str!==e){const i=Wc(e,s.str.length);i!==s.str.length&&(s.str=e.substring(0,i),s.width=this.measureTextWidth(s.str,t))}return s}_clipText(e,t,i,n,r,s,a){let o;if("start"===s)o=this._clipTextStart(e,t,i,n,r),a&&(o.result=a+o.str);else if("middle"===s){const n=this._clipTextMiddle(e,t,i,"","",0,0,1);o={str:"none",width:n.width,result:n.left+a+n.right}}else o=this._clipTextEnd(e,t,i,n,r),a&&(o.result=o.str+a);return o}_clipTextEnd(e,t,i,n,r){const s=Math.floor((n+r)/2),a=e.substring(0,s+1),o=this.measureTextWidth(a,t);let l;if(o>i){if(a.length<=1)return{str:"",width:0};const r=e.substring(0,s);return l=this.measureTextWidth(r,t),l<=i?{str:r,width:l}:this._clipTextEnd(e,t,i,n,s)}if(o<i){if(s>=e.length-1)return{str:e,width:this.measureTextWidth(e,t)};const n=e.substring(0,s+2);return l=this.measureTextWidth(n,t),l>=i?{str:a,width:o}:this._clipTextEnd(e,t,i,s,r)}return{str:a,width:o}}_clipTextStart(e,t,i,n,r){const s=Math.ceil((n+r)/2),a=e.substring(s-1,e.length-1),o=this.measureTextWidth(a,t);let l;if(o>i){if(a.length<=1)return{str:"",width:0};const n=e.substring(s,e.length-1);return l=this.measureTextWidth(n,t),l<=i?{str:n,width:l}:this._clipTextStart(e,t,i,s,e.length-1)}if(o<i){if(s<=0)return{str:e,width:this.measureTextWidth(e,t)};const r=e.substring(s-2,e.length-1);return l=this.measureTextWidth(r,t),l>=i?{str:a,width:o}:this._clipTextStart(e,t,i,n,s)}return{str:a,width:o}}_clipTextMiddle(e,t,i,n,r,s,a,o){const l=e.substring(0,o),c=this.measureTextWidth(l,t);if(c+a>i)return{left:n,right:r,width:s+a};const h=e.substring(e.length-o,e.length),d=this.measureTextWidth(h,t);return c+d>i?{left:l,right:r,width:c+a}:this._clipTextMiddle(e,t,i,l,h,c,d,o+1)}clipTextWithSuffixVertical(e,t,i,n,r,s){if(""===n)return this.clipTextVertical(e,t,i,r);if(0===e.length)return{verticalList:e,width:0};const a=this.clipTextVertical(e,t,i,r);if(a.verticalList.length===e.length&&a.verticalList[a.verticalList.length-1].width===e[e.length-1].width)return a;const o=this.measureTextWidth(n,t);if(o>i)return a;let l;if(i-=o,"start"===s){const s=this.revertVerticalList(e);l=this.clipTextVertical(s,t,i,r);const a=this.revertVerticalList(l.verticalList);a.unshift({text:n,direction:1,width:o}),l.verticalList=a}else if("middle"===s){const s=this.clipTextVertical(e,t,i/2,r),a=this.revertVerticalList(e),c=this.clipTextVertical(a,t,i/2,r);s.verticalList.push({text:n,direction:1,width:o}),this.revertVerticalList(c.verticalList).forEach((e=>s.verticalList.push(e))),l={verticalList:s.verticalList,width:s.width+c.width}}else l=this.clipTextVertical(e,t,i,r),l.verticalList.push({text:n,direction:1,width:o});return l.width+=o,l}revertVerticalList(e){return e.reverse().map((e=>{const t=e.text.split("").reverse().join("");return Object.assign(Object.assign({},e),{text:t})}))}clipTextWithSuffix(e,t,i,n,r,s){if(""===n)return this.clipText(e,t,i,r);if(0===e.length)return{str:"",width:0};const a=this.measureTextWidth(e,t);if(a<=i)return{str:e,width:a};const o=this.measureTextWidth(n,t);if(o>i)return{str:"",width:0};i-=o;const l=this._clipText(e,t,i,0,e.length-1,s,n);if(r&&l.str!==e){const i=Wc(e,l.str.length);i!==l.str.length&&(l.str=e.substring(0,i),l.width=this.measureTextWidth(l.str,t))}return l.str=l.result,l.width+=o,l}};Yc=Kc([jo()],Yc);var Xc=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};const qc=Symbol.for("TextMeasureContribution");let Zc=class extends Yc{};Zc=Xc([jo()],Zc);const Qc=e=>{let t=e.charCodeAt(0),i=2===e.length?e.charCodeAt(1):0,n=t;return 55296<=t&&t<=56319&&56320<=i&&i<=57343&&(t&=1023,i&=1023,n=t<<10|i,n+=65536),12288===n||65281<=n&&n<=65376||65504<=n&&n<=65510?"F":8361===n||65377<=n&&n<=65470||65474<=n&&n<=65479||65482<=n&&n<=65487||65490<=n&&n<=65495||65498<=n&&n<=65500||65512<=n&&n<=65518?"H":4352<=n&&n<=4447||4515<=n&&n<=4519||4602<=n&&n<=4607||9001<=n&&n<=9002||11904<=n&&n<=11929||11931<=n&&n<=12019||12032<=n&&n<=12245||12272<=n&&n<=12283||12289<=n&&n<=12350||12353<=n&&n<=12438||12441<=n&&n<=12543||12549<=n&&n<=12589||12593<=n&&n<=12686||12688<=n&&n<=12730||12736<=n&&n<=12771||12784<=n&&n<=12830||12832<=n&&n<=12871||12880<=n&&n<=13054||13056<=n&&n<=19903||19968<=n&&n<=42124||42128<=n&&n<=42182||43360<=n&&n<=43388||44032<=n&&n<=55203||55216<=n&&n<=55238||55243<=n&&n<=55291||63744<=n&&n<=64255||65040<=n&&n<=65049||65072<=n&&n<=65106||65108<=n&&n<=65126||65128<=n&&n<=65131||110592<=n&&n<=110593||127488<=n&&n<=127490||127504<=n&&n<=127546||127552<=n&&n<=127560||127568<=n&&n<=127569||131072<=n&&n<=194367||177984<=n&&n<=196605||196608<=n&&n<=262141?"W":32<=n&&n<=126||162<=n&&n<=163||165<=n&&n<=166||172===n||175===n||10214<=n&&n<=10221||10629<=n&&n<=10630?"Na":161===n||164===n||167<=n&&n<=168||170===n||173<=n&&n<=174||176<=n&&n<=180||182<=n&&n<=186||188<=n&&n<=191||198===n||208===n||215<=n&&n<=216||222<=n&&n<=225||230===n||232<=n&&n<=234||236<=n&&n<=237||240===n||242<=n&&n<=243||247<=n&&n<=250||252===n||254===n||257===n||273===n||275===n||283===n||294<=n&&n<=295||299===n||305<=n&&n<=307||312===n||319<=n&&n<=322||324===n||328<=n&&n<=331||333===n||338<=n&&n<=339||358<=n&&n<=359||363===n||462===n||464===n||466===n||468===n||470===n||472===n||474===n||476===n||593===n||609===n||708===n||711===n||713<=n&&n<=715||717===n||720===n||728<=n&&n<=731||733===n||735===n||768<=n&&n<=879||913<=n&&n<=929||931<=n&&n<=937||945<=n&&n<=961||963<=n&&n<=969||1025===n||1040<=n&&n<=1103||1105===n||8208===n||8211<=n&&n<=8214||8216<=n&&n<=8217||8220<=n&&n<=8221||8224<=n&&n<=8226||8228<=n&&n<=8231||8240===n||8242<=n&&n<=8243||8245===n||8251===n||8254===n||8308===n||8319===n||8321<=n&&n<=8324||8364===n||8451===n||8453===n||8457===n||8467===n||8470===n||8481<=n&&n<=8482||8486===n||8491===n||8531<=n&&n<=8532||8539<=n&&n<=8542||8544<=n&&n<=8555||8560<=n&&n<=8569||8585===n||8592<=n&&n<=8601||8632<=n&&n<=8633||8658===n||8660===n||8679===n||8704===n||8706<=n&&n<=8707||8711<=n&&n<=8712||8715===n||8719===n||8721===n||8725===n||8730===n||8733<=n&&n<=8736||8739===n||8741===n||8743<=n&&n<=8748||8750===n||8756<=n&&n<=8759||8764<=n&&n<=8765||8776===n||8780===n||8786===n||8800<=n&&n<=8801||8804<=n&&n<=8807||8810<=n&&n<=8811||8814<=n&&n<=8815||8834<=n&&n<=8835||8838<=n&&n<=8839||8853===n||8857===n||8869===n||8895===n||8978===n||9312<=n&&n<=9449||9451<=n&&n<=9547||9552<=n&&n<=9587||9600<=n&&n<=9615||9618<=n&&n<=9621||9632<=n&&n<=9633||9635<=n&&n<=9641||9650<=n&&n<=9651||9654<=n&&n<=9655||9660<=n&&n<=9661||9664<=n&&n<=9665||9670<=n&&n<=9672||9675===n||9678<=n&&n<=9681||9698<=n&&n<=9701||9711===n||9733<=n&&n<=9734||9737===n||9742<=n&&n<=9743||9748<=n&&n<=9749||9756===n||9758===n||9792===n||9794===n||9824<=n&&n<=9825||9827<=n&&n<=9829||9831<=n&&n<=9834||9836<=n&&n<=9837||9839===n||9886<=n&&n<=9887||9918<=n&&n<=9919||9924<=n&&n<=9933||9935<=n&&n<=9953||9955===n||9960<=n&&n<=9983||10045===n||10071===n||10102<=n&&n<=10111||11093<=n&&n<=11097||12872<=n&&n<=12879||57344<=n&&n<=63743||65024<=n&&n<=65039||65533===n||127232<=n&&n<=127242||127248<=n&&n<=127277||127280<=n&&n<=127337||127344<=n&&n<=127386||917760<=n&&n<=917999||983040<=n&&n<=1048573||1048576<=n&&n<=1114109?"A":"N"};class $c{constructor(e,t){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet="-/: .,@%'\"~",this._option=e,this._userSpec=null!=t?t:{},this.textSpec=this._initSpec(),x(e.specialCharSet)&&(this.specialCharSet=e.specialCharSet),this._standardMethod=x(e.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if(P(this._canvas)&&(x(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),P(this._canvas)&&"undefined"!=typeof window&&void 0!==window.document&&globalThis&&x(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),P(this._context)&&x(this._canvas)){const e=this._canvas.getContext("2d");x(e)&&(e.save(),e.font=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{fontStyle:i=t.fontStyle,fontVariant:n=t.fontVariant,fontWeight:r=t.fontWeight,fontSize:s=t.fontSize,fontFamily:a=t.fontFamily}=e;return(i?i+" ":"")+(n?n+" ":"")+(r?r+" ":"")+s+"px "+(a||"sans-serif")}(this.textSpec),this._contextSaved=!0,this._context=e)}return!P(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var e,t,i;const{defaultFontParams:n={}}=this._option,{fontStyle:r=n.fontStyle,fontVariant:s=n.fontVariant,fontWeight:a=(null!==(e=n.fontWeight)&&void 0!==e?e:"normal"),fontSize:o=(null!==(t=n.fontSize)&&void 0!==t?t:12),fontFamily:l=(null!==(i=n.fontFamily)&&void 0!==i?i:"sans-serif"),align:c,textAlign:h=(null!=c?c:"center"),baseline:d,textBaseline:u=(null!=d?d:"middle"),ellipsis:p,limit:g}=this._userSpec;let{lineHeight:f=o}=this._userSpec;if(_(f)&&"%"===f[f.length-1]){const e=Number.parseFloat(f.substring(0,f.length-1))/100;f=o*e}return{fontStyle:r,fontVariant:s,fontFamily:l,fontSize:o,fontWeight:a,textAlign:h,textBaseline:u,ellipsis:p,limit:g,lineHeight:f}}measure(e,t){switch(t){case"vrender":case"canopus":return this.fullMeasure(e);case"canvas":return this.measureWithNaiveCanvas(e);case"simple":return this.quickMeasureWithoutCanvas(e);default:return this.quickMeasure(e)}}fullMeasure(e){if(P(e))return{width:0,height:0};if(P(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(e);const{fontFamily:t,fontSize:i,fontWeight:n,textAlign:r,textBaseline:s,ellipsis:a,limit:o,lineHeight:l}=this.textSpec;let c;try{const h=this._option.getTextBounds({text:e,fontFamily:t,fontSize:i,fontWeight:n,textAlign:r,textBaseline:s,ellipsis:!!a,maxLineWidth:o||1/0,lineHeight:l});c={width:h.width(),height:h.height()}}catch(h){this._notSupportVRender=!0,c=this.measureWithNaiveCanvas(e)}return c}measureWithNaiveCanvas(e){return this._measureReduce(e,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(e){var t;if(!this.initContext())return this._quickMeasureWithoutCanvas(e);const i=this._context.measureText(e),{fontSize:n,lineHeight:r}=this.textSpec;return{width:i.width,height:null!==(t=r)&&void 0!==t?t:n}}quickMeasure(e){return this._measureReduce(e,this._quickMeasure.bind(this))}_quickMeasure(e){const t={width:0,height:0};for(let i=0;i<e.length;i++){const n=e[i];let r=this._measureSpecialChar(n);P(r)&&$c.NUMBERS_CHAR_SET.includes(n)&&(r=this._measureNumberChar()),P(r)&&["F","W"].includes(Qc(n))&&(r=this._measureFullSizeChar()),P(r)&&(r=this._measureLetterChar()),t.width+=r.width,t.height=Math.max(t.height,r.height)}return t}quickMeasureWithoutCanvas(e){return this._measureReduce(e,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(e){var t;const i={width:0,height:0},{fontSize:n,lineHeight:r}=this.textSpec;for(let s=0;s<e.length;s++){const t=e[s],r=["F","W"].includes(Qc(t))?1:.53;i.width+=r*n}return i.height=null!==(t=r)&&void 0!==t?t:n,i}_measureReduce(e,t){var i;const{fontSize:n,lineHeight:r}=this.textSpec,s={width:0,height:0};if(P(e))return s;if(v(e)){const a=e.filter(x).map((e=>e.toString()));return 0===a.length?s:1===a.length?t(a[0]):{width:a.reduce(((e,i)=>Math.max(e,t(i).width)),0),height:a.length*((null!==(i=r)&&void 0!==i?i:n)+1)+1}}return t(e.toString())}_measureNumberChar(){if(P(this._numberCharSize)){const e=this._standardMethod($c.NUMBERS_CHAR_SET);this._numberCharSize={width:e.width/$c.NUMBERS_CHAR_SET.length,height:e.height}}return this._numberCharSize}_measureFullSizeChar(){return P(this._fullCharSize)&&(this._fullCharSize=this._standardMethod($c.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if(P(this._letterCharSize)){const e=this._standardMethod($c.ALPHABET_CHAR_SET);this._letterCharSize={width:e.width/$c.ALPHABET_CHAR_SET.length,height:e.height}}return this._letterCharSize}_measureSpecialChar(e){return x(this._specialCharSizeMap[e])?this._specialCharSizeMap[e]:this.specialCharSet.includes(e)?(this._specialCharSizeMap[e]=this._standardMethod(e),this._specialCharSizeMap[e]):null}release(){x(this._canvas)&&(this._canvas=null),x(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}}$c.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",$c.NUMBERS_CHAR_SET="0123456789",$c.FULL_SIZE_CHAR="\u5b57";const Jc="Singleton",eh="Transient",th="ConstantValue",ih="DynamicValue",nh="Factory",rh="Function",sh="Instance",ah="Invalid";class oh{constructor(e,t){this.id=To.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=ah,this.constraint=e=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){const e=new oh(this.serviceIdentifier,this.scope);return e.activated=e.scope===Jc&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.provider=this.provider,e.constraint=this.constraint,e.cache=this.cache,e}}class lh{getConstructorMetadata(e){return{compilerGeneratedMetadata:Lo.getMetadata(Do,e),userGeneratedMetadata:Lo.getMetadata(Ro,e)||{}}}getPropertiesMetadata(e){throw new Error("\u6682\u672a\u5b9e\u73b0")}}const ch=(hh=Po,e=>{const t=t=>{if(null==t)return!1;if(t.key===hh&&t.value===e)return!0;if(null==t.constructorArgsMetadata)return!1;const i=t.constructorArgsMetadata;for(let n=0;n<i.length;n++)if(i[n].key===hh&&i[n].value===e)return!0;return!1};return t.metaData=new Fo(hh,e),t});var hh;class dh{constructor(e){this._binding=e}inRequestScope(){throw new Error("\u6682\u672a\u5b9e\u73b0")}inSingletonScope(){return this._binding.scope=Jc,this}inTransientScope(){return this._binding.scope=eh,this}whenTargetNamed(e){return this._binding.constraint=ch(e),this}}class uh{constructor(e){this._binding=e}to(e){return this._binding.type=sh,this._binding.implementationType=e,new dh(this._binding)}toSelf(){const e=this._binding.serviceIdentifier;return this.to(e)}toDynamicValue(e){return this._binding.type=ih,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new dh(this._binding)}toConstantValue(e){return this._binding.type=th,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Jc,new dh(this._binding)}toFactory(e){return this._binding.type=nh,this._binding.factory=e,this._binding.scope=Jc,new dh(this._binding)}toService(e){this.toDynamicValue((t=>t.container.get(e)))}}const ph=new class{constructor(e){const t=e||{};t.defaultScope=t.defaultScope||eh,this.options=t,this.id=To.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new lh}load(e){const t=this._getContainerModuleHelpersFactory()(e.id);e.registry(t.bindFunction,t.unbindFunction,t.isboundFunction,t.rebindFunction)}get(e){const t=this._getNotAllArgs(e,!1);return this._get(t)}getAll(e){const t=this._getAllArgs(e);return this._get(t)}getTagged(e,t,i){const n=this._getNotAllArgs(e,!1,t,i);return this._get(n)}getNamed(e,t){return this.getTagged(e,Po,t)}isBound(e){return this._bindingDictionary.has(e)}bind(e){const t=this.options.defaultScope,i=new oh(e,t),n=this._bindingDictionary.get(e)||[];return n.push(i),this._bindingDictionary.set(e,n),new uh(i)}unbind(e){this._bindingDictionary.delete(e)}rebind(e){return this.unbind(e),this.bind(e)}_getContainerModuleHelpersFactory(){const e=(e,t)=>{e._binding.moduleId=t},t=t=>i=>{const n=this.bind(i);return e(n,t),n},i=()=>e=>this.unbind(e),n=()=>e=>this.isBound(e),r=t=>i=>{const n=this.rebind(i);return e(n,t),n};return e=>({bindFunction:t(e),isboundFunction:n(),rebindFunction:r(e),unbindFunction:i(),unbindAsyncFunction:e=>null})}_getNotAllArgs(e,t,i,n){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:i,value:n}}_getAllArgs(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}}_get(e){const t=[];return this._bindingDictionary.get(e.serviceIdentifier).filter((t=>t.constraint(e))).forEach((e=>{t.push(this._resolveFromBinding(e))})),e.isMultiInject||1!==t.length?t:t[0]}_getChildRequest(e){const t=e.implementationType,{userGeneratedMetadata:i}=this._metadataReader.getConstructorMetadata(t),n=Object.keys(i),r=[];for(let s=0;s<n.length;s++){const e=i[s],t={};e.forEach((e=>{t[e.key]=e.value}));const n={inject:t[Mo],multiInject:t[Io]},a=n.inject||n.multiInject,o={serviceIdentifier:a,constructorArgsMetadata:e},l={injectIdentifier:a,metadata:e,bindings:this._bindingDictionary.get(a).filter((e=>e.constraint(o)))};r.push(l)}return r}_resolveFromBinding(e){const t=this._getResolvedFromBinding(e);return this._saveToScope(e,t),t}_getResolvedFromBinding(e){let t;switch(e.type){case th:case rh:t=e.cache;break;case sh:t=this._resolveInstance(e,e.implementationType);break;default:t=e.dynamicValue({container:this})}return t}_resolveInstance(e,t){if(e.activated)return e.cache;const i=this._getChildRequest(e);return this._createInstance(t,i)}_createInstance(e,t){return t.length?new e(...this._resolveRequests(t)):new e}_resolveRequests(e){return e.map((e=>e.bindings.length>1?e.bindings.map((e=>this._resolveFromBinding(e))):this._resolveFromBinding(e.bindings[0])))}_saveToScope(e,t){e.scope===Jc&&(e.cache=t,e.activated=!0)}},gh=Symbol.for("CanvasFactory"),fh=Symbol.for("Context2dFactory");function mh(e){return ph.getNamed(gh,se.global.env)(e)}Math.sqrt(3);const vh=new class{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(e){if(!this.pools.length){const t=mh(Object.assign({nativeCanvas:se.global.createCanvas(e)},e));return this.allocatedCanvas.push(t),t}const t=this.pools.pop();return t.resize(e.width,e.height),t.dpr=e.dpr,t}allocateByObj(e){if(!this.pools.length){const t={width:e.width/e.dpr,height:e.height/e.dpr,dpr:e.dpr},i=mh(Object.assign({nativeCanvas:se.global.createCanvas(t)},t));return this.allocatedCanvas.push(i),i}const t=this.pools.pop();return t.width=e.width,t.height=e.height,t}free(e){this.pools.push(e)}get length(){return this.pools.length}release(){this.pools=[]}};var yh=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},bh=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const _h=Symbol.for("VWindow"),xh=Symbol.for("WindowHandlerContribution");let Sh=class{get width(){if(this._handler){const e=this._handler.getWH();return this._width=e.width}return this._width}get height(){if(this._handler){const e=this._handler.getWH();return this._height=e.height}return this._height}get dpr(){return this._handler.getDpr()}constructor(){this.hooks={onChange:new Yo(["x","y","width","height"])},this._uid=To.GenAutoIncrementId(),this.global=se.global,this.postInit()}postInit(){this.global.hooks.onSetEnv.tap("window",(()=>{this.active()})),this.active()}active(){const e=this.global;e.env&&!this.actived&&(ph.getNamed(xh,e.env).configure(this,e),this.actived=!0)}get style(){return this._handler.getStyle()}set style(e){this._handler.setStyle(e)}create(e){this._handler.createWindow(e);const t=this._handler.getWH();this._width=t.width,this._height=t.height,this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(e){this._handler=e}setDpr(e){return this._handler.setDpr(e)}resize(e,t){return this._handler.resizeWindow(e,t)}configure(){throw new Error("\u6682\u4e0d\u652f\u6301")}release(){return this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(e){return this._handler.getImageBuffer?this._handler.getImageBuffer(e):null}addEventListener(e,t,i){return this._handler.addEventListener(e,t,i)}removeEventListener(e,t,i){return this._handler.removeEventListener(e,t,i)}dispatchEvent(e){return this._handler.dispatchEvent(e)}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(e,t){this._handler.clearViewBox(e,t)}isVisible(e){return this._handler.isVisible(e)}onVisibleChange(e){return this._handler.onVisibleChange(e)}getTopLeft(e){return this._handler.getTopLeft(e)}};Sh=yh([jo(),bh("design:paramtypes",[])],Sh);var wh=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Ch=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},kh=function(e,t){return function(i,n){t(i,n,e)}};let Ah=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(e){this.contributions=e,this.configured=!1,this.global=se.global,this.global.hooks.onSetEnv.tap("graphic-util",((e,t,i)=>{this.configured=!1,this.configure(i,t)}))}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}configure(e,t){this.configured||(this.contributions.getContributions().forEach((e=>{e.configure(this,t)})),this.configured=!0)}tryInitCanvas(){if(!this._canvas){const e=vh.shareCanvas();this._canvas=e,this._context=e.getContext("2d")}}bindTextMeasure(e){this._textMeasure=e}measureText(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"native";var n;this.configure(this.global,this.global.env);const r=this.global.measureTextMethod;this.global.measureTextMethod=i;const s={width:this._textMeasure.measureTextWidth(e,t),height:null!==(n=t.fontSize)&&void 0!==n?n:yc.fontSize};return this.global.measureTextMethod=r,s}createTextMeasureInstance(e,t,i){return this.configure(this.global,this.global.env),new $c(Object.assign({defaultFontParams:{fontFamily:yc.fontFamily,fontSize:yc.fontSize},getCanvasForMeasure:i||(()=>this.canvas),getTextBounds:void 0,specialCharSet:"-/: .,@%'\"~"+$c.ALPHABET_CHAR_SET+$c.ALPHABET_CHAR_SET.toUpperCase()},null!=t?t:{}),e)}drawGraphicToCanvas(e,t,i){if(!t.defaultLayer)return null;const n=ph.get(_h),r=e.AABBBounds,s=r.width(),a=r.height();n.create({width:s,height:a,canvas:i,dpr:t.window.dpr,canvasControled:!0,offscreen:!0,title:""});const o=-r.x1,l=-r.y1,c=t.params.optimize.disableCheckGraphicWidthOutRange;t.params.optimize.disableCheckGraphicWidthOutRange=!0,t.defaultLayer.getNativeHandler().drawTo(n,[e],{x:o,y:l,width:s,height:a,stage:t,layer:t.defaultLayer,renderService:t.renderService,background:"transparent",clear:!0,updateBounds:!1}),t.params.optimize.disableCheckGraphicWidthOutRange=c;const h=n.getNativeHandler();return h.nativeCanvas?h.nativeCanvas:null}};var Eh;Ah=wh([jo(),kh(0,Ho(Uo)),kh(0,Vo(qc)),Ch("design:paramtypes",[Object])],Ah),function(e){e[e.transform=0]="transform",e[e.matrix=1]="matrix"}(Eh||(Eh={}));const Th=new sl;let Oh=class{constructor(){this.matrix=new sl}init(e){return this.mode=Eh.transform,this.originTransform=e,this.matrix.reset(),this}fromMatrix(e,t){return this.mode=Eh.matrix,this.outSourceMatrix=e,this.outTargetMatrix=t,this}scaleMatrix(e,t,i){const n=this.outSourceMatrix;if(Th.setValue(n.a,n.b,n.c,n.d,n.e,n.f),this.outTargetMatrix.reset(),i){const{x:n,y:r}=i;this.outTargetMatrix.translate(n,r),this.outTargetMatrix.scale(e,t),this.outTargetMatrix.translate(-n,-r)}else this.outTargetMatrix.scale(e,t);return this.outTargetMatrix.multiply(Th.a,Th.b,Th.c,Th.d,Th.e,Th.f),this}rotateMatrix(e,t){const i=this.outSourceMatrix;if(Th.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),t){const{x:i,y:n}=t;this.outTargetMatrix.translate(i,n),this.outTargetMatrix.rotate(e),this.outTargetMatrix.translate(-i,-n)}else this.outTargetMatrix.rotate(e);return this.outTargetMatrix.multiply(Th.a,Th.b,Th.c,Th.d,Th.e,Th.f),this}scale(e,t,i){return this.mode===Eh.matrix?this.scaleMatrix(e,t,i):this}rotate(e,t){return this.mode===Eh.matrix?this.rotateMatrix(e,t):this}translateMatrix(e,t){const i=this.outSourceMatrix;return Th.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(e,t),this.outTargetMatrix.multiply(Th.a,Th.b,Th.c,Th.d,Th.e,Th.f),this}translate(e,t){return this.mode===Eh.matrix?this.translateMatrix(e,t):this}simplify(e){return this.mode===Eh.matrix?this.simplifyMatrix(e):this}simplifyMatrix(e){return this}};Oh=wh([jo(),Ch("design:paramtypes",[])],Oh);const Ph={arc:Sc,area:wc,circle:Cc,line:Ec,path:Tc,symbol:Ic,text:Rc,rect:Pc,rect3d:Mc,polygon:Oc,richtext:Dc,richtextIcon:jc,image:Lc,group:kc,glyph:Ac},Mh=Object.keys(Ph);function Ih(e,t){Object.keys(t).forEach((i=>{e[i]=t[i]}))}const Rh={arc:Object.assign({},Ph.arc),area:Object.assign({},Ph.area),circle:Object.assign({},Ph.circle),line:Object.assign({},Ph.line),path:Object.assign({},Ph.path),symbol:Object.assign({},Ph.symbol),text:Object.assign({},Ph.text),rect:Object.assign({},Ph.rect),rect3d:Object.assign({},Ph.rect3d),polygon:Object.assign({},Ph.polygon),richtext:Object.assign({},Ph.richtext),richtextIcon:Object.assign({},Ph.richtextIcon),image:Object.assign({},Ph.image),group:Object.assign({},Ph.group),glyph:Object.assign({},Ph.glyph)};class Dh{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},Mh.forEach((e=>{this._defaultTheme[e]=Object.create(Rh[e])})),this.combinedTheme=this._defaultTheme}getTheme(e){if(!e)return this.combinedTheme;if(!this.dirty)return this.combinedTheme;let t={};const i=this.getParentWithTheme(e);return i&&(t=i.theme),this.applyTheme(e,t),this.combinedTheme}getParentWithTheme(e){for(;e.parent;)if((e=e.parent).theme)return e;return null}applyTheme(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.dirty){const n=this.getParentWithTheme(e);if(n){const e=n.theme;(e.dirty||i)&&e.applyTheme(n,t,!0)}this.userTheme?this.doCombine(n&&n.theme.combinedTheme):(n?this.combinedTheme=n.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,u.getInstance().warn("\u672a\u77e5\u9519\u8bef\uff0c\u8d70\u5230\u4e0d\u5e94\u8be5\u8d70\u7684\u533a\u57df\u91cc")),this.dirty=!1)}return this.combinedTheme}doCombine(e){const t=this.userTheme,i=this.combinedTheme;Mh.forEach((n=>{const r=Object.create(Rh[n]);e&&e[n]&&Ih(r,e[n]),i[n]&&Ih(r,i[n]),t[n]&&Ih(r,t[n]),this.combinedTheme[n]=r})),t.common&&Mh.forEach((e=>{Ih(this.combinedTheme[e],t.common)})),this.dirty=!1}setTheme(e,t){let i=this.userTheme;i?Object.keys(e).forEach((t=>{i[t]?Object.assign(i[t],e[t]):i[t]=Object.assign({},e[t])})):i=e,this.userTheme=i,this.dirty=!0,this.dirtyChildren(t)}resetTheme(e,t){this.userTheme=e,this.dirty=!0,this.dirtyChildren(t)}dirtyChildren(e){e.forEachChildren((e=>{e.isContainer&&(e.theme&&(e.theme.dirty=!0),this.dirtyChildren(e))}))}}const Lh=new Dh;function jh(e,t){return e.glyphHost?jh(e.glyphHost):t?(e.isContainer,t):function(e){let t;if(t=e.isContainer?e:e.parent,t){for(;t&&!t.theme;)t=t.parent;return t?(t.theme||t.createTheme(),t.theme.getTheme(t)):Lh.getTheme()}return null}(e)||Lh.getTheme()}const Fh=Object.prototype.hasOwnProperty,Bh=(e,t)=>null!=e&&Fh.call(e,t),Nh=e=>new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(e),zh=e=>new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(e);var Hh=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class Vh extends(a()){get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=To.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){let t=this._lastChild,i=0;for(;t;){if(e(t,i++))return;t=t._prev}}else{let t=this._firstChild,i=0;for(;t;){if(e(t,i++))return;t=t._next}}}forEachChildrenAsync(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Hh(this,void 0,void 0,(function*(){if(t){let t=this._lastChild,i=0;for(;t;){let n=e(t,i++);if(n.then&&(n=yield n),n)return;t=t._prev}}else{let t=this._firstChild,i=0;for(;t;){let n=e(t,i++);if(n.then&&(n=yield n),n)return;t=t._next}}}))}forEach(e){return this.forEachChildren(e)}appendChild(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._uid===e._uid)return null;if(!t&&e.isAncestorsOf(this))throw new Error("\u3010Node::appendChild\u3011\u4e0d\u80fd\u5c06\u7236\u8f88\u5143\u7d20append\u4e3a\u5b50\u5143\u7d20");return e.parent&&e.parent.removeChild(e),e.parent=this,this._lastChild?(this._lastChild._next=e,e._prev=this._lastChild,this._lastChild=e):(this._firstChild=this._lastChild=e,e._prev=e._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this.setCount(e.count),this._structEdit=!0,e}appendChildArrHighPerformance(e){return console.error("\u6682\u4e0d\u652f\u6301\u8be5\u51fd\u6570"),e}insertBefore(e,t){if(!t)return this.appendChild(e);if(this._uid===e._uid)return null;if(e.isAncestorsOf(this))throw new Error("\u3010Node::insertBefore\u3011\u4e0d\u80fd\u5c06\u7236\u8f88\u5143\u7d20insert\u4e3a\u5b50\u5143\u7d20");return t.parent!==this?null:(e.parent&&e.parent.removeChild(e),e.parent=this,e._prev=t._prev,t._prev?t._prev._next=e:this._firstChild=e,t._prev=e,e._next=t,this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e)}insertAfter(e,t){if(!t)return this.appendChild(e);if(this._uid===e._uid)return null;if(e.isAncestorsOf(this))throw new Error("\u3010Node::insertAfter\u3011\u4e0d\u80fd\u5c06\u7236\u8f88\u5143\u7d20insert\u4e3a\u5b50\u5143\u7d20");return t.parent!==this?null:(e.parent&&e.parent.removeChild(e),e.parent=this,t._next?(t._next._prev=e,e._next=t._next):this._lastChild=e,t._next=e,e._prev=t,this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e)}insertInto(e,t){if(!this._ignoreWarn&&this._nodeList&&u.getInstance().warn("insertIntoKeepIdx\u548cinsertInto\u6df7\u7528\u53ef\u80fd\u4f1a\u5b58\u5728\u9519\u8bef"),t>=this.childrenCount)return this.appendChild(e);if(this._uid===e._uid)return null;if(e.isAncestorsOf(this))throw new Error("\u3010Node::insertBefore\u3011\u4e0d\u80fd\u5c06\u7236\u8f88\u5143\u7d20insert\u4e3a\u5b50\u5143\u7d20");if(e.parent&&e.parent.removeChild(e),e.parent=this,0===t)e._next=this._firstChild,this._firstChild&&(this._firstChild._prev=e),e._prev=null,this._firstChild=e;else{let i=this._firstChild;for(let e=0;e<t;e++){if(!i)return null;e>0&&(i=i._next)}if(!i)return null;e._next=i._next,e._prev=i,i._next=e,e._next&&(e._next._prev=e)}return this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e}insertIntoKeepIdx(e,t){if(this._nodeList||(this._nodeList=this.children),this._nodeList[t]){const i=this._nodeList[t];return this._nodeList.splice(t,0,e),this.insertBefore(e,i)}let i;this._nodeList[t]=e;for(let r=t-1;r>=0&&(i=this._nodeList[r],!i);r--);if(i)return i._next?this.insertBefore(e,i._next):this.appendChild(e);this._ignoreWarn=!0;const n=this.insertInto(e,0);return this._ignoreWarn=!1,n}removeChild(e){if(!this._idMap)return null;if(!this._idMap.has(e._uid))return null;if(this._idMap.delete(e._uid),this._nodeList){const t=this._nodeList.findIndex((t=>t===e));t>0&&this._nodeList.splice(t,1)}return e._prev?e._prev._next=e._next:this._firstChild=e._next,e._next?e._next._prev=e._prev:this._lastChild=e._prev,e.parent=null,e._prev=null,e._next=null,this._structEdit=!0,this.setCount(-e.count),e}delete(){this.parent&&this.parent.removeChild(this)}removeAllChild(){if(!this._idMap)return;let e=this._firstChild;for(;e;)e.parent=null,e._prev=null,e._next=null,e=e._next;this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}replaceChild(e,t){throw new Error("\u6682\u4e0d\u652f\u6301")}find(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;return this.forEachChildren(((t,n)=>!(t===this||!e(t,n))&&(i=t,!0))),t&&this.forEachChildren((t=>{if(t.isContainer){const n=t.find(e,!0);if(n)return i=n,!0}return!1})),i}findAll(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];return this.forEachChildren(((t,n)=>{t!==this&&e(t,n)&&i.push(t)})),t&&this.forEachChildren((t=>{if(t.isContainer){const n=t.findAll(e,!0);n.length&&(i=i.concat(n))}})),i}getElementById(e){return this.find((t=>t.id===e),!0)}findChildById(e){return this.getElementById(e)}findChildByUid(e){return this._idMap&&this._idMap.get(e)||null}getElementsByName(e){return this.findAll((t=>t.name===e),!0)}findChildrenByName(e){return this.getElementsByName(e)}getElementsByType(e){return this.findAll((t=>t.type===e),!0)}getChildByName(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.find((t=>t.name===e),t)}getChildAt(e){let t=this._firstChild;if(!t)return null;for(let i=0;i<e;i++){if(!t._next)return null;t=t._next}return t}at(e){return this.getChildAt(e)}containNode(e){if(!this._idMap)return!1;if(this._idMap.has(e._uid))return!0;let t=this._firstChild;for(;t;){if(t.containNode(e))return!0;t=t._next}return!1}getRootNode(){let e=this.parent;for(;null==e?void 0:e.parent;)e=e.parent;return e||this}hasChildNodes(){return null!==this._firstChild}addChild(e){return this.appendChild(e)}add(e){return this.appendChild(e)}getChildren(){const e=[];let t=this._firstChild;for(;t;)e.push(t),t=t._next;return e}isChildOf(e){return!!this.parent&&this.parent._uid===e._uid}isParentOf(e){return e.isChildOf(this)}isDescendantsOf(e){let t=this.parent;if(!t)return!1;do{if(t._uid===e._uid)return!0;t=t.parent}while(null!==t);return!1}isAncestorsOf(e){return e.isDescendantsOf(this)}getAncestor(e){throw new Error("\u6682\u4e0d\u652f\u6301")}setAllDescendantsProps(e,t){let i=this._firstChild;for(;i;)i[e]=t,i.setAllDescendantsProps(e,t),i=i._next}setCount(e){this._count+=e;let t=this.parent;if(t)do{t._count+=e,t=t.parent}while(null!==t)}clone(){throw new Error("\u6682\u4e0d\u652f\u6301")}cloneTo(e){throw new Error("\u6682\u4e0d\u652f\u6301")}getParent(){return this.parent}del(e){return this.removeChild(e)}addEventListener(e,t,i){const n=m(i,!0)&&i||D(i)&&i.capture,r=D(i)&&i.once,s=Q(t)?void 0:t;return e=n?"".concat(e,"capture"):e,t=Q(t)?t:t.handleEvent,r?super.once(e,t,s):super.on(e,t,s),this}on(e,t,i){return this.addEventListener(e,t,i)}removeEventListener(e,t,i){const n=m(i,!0)&&i||D(i)&&i.capture,r=Q(t)?void 0:t;e=n?"".concat(e,"capture"):e,t=Q(t)?t:t.handleEvent;const s=D(i)&&i.once;return super.off(e,t,r,s),this}off(e,t,i){return this.removeEventListener(e,t,i)}once(e,t,i){return D(i)?(i.once=!0,this.addEventListener(e,t,i)):this.addEventListener(e,t,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return super.emit(e.type,e,...i),!e.defaultPrevented}emit(e,t){return this.dispatchEvent(e,t)}release(){this.removeAllListeners()}}class Uh{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Uh.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation(),this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw new Error("Method not implemented.")}}class Wh extends Uh{constructor(e,t){super(),this.type=e,this.detail=t}}const Gh={pickable:!0,visible:!0,dispatchEvent(e){var t;if(!(e instanceof Uh))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=[],e.target=this,null===(t=null==e?void 0:e.manager)||void 0===t||t.dispatchEvent(e),!e.defaultPrevented},emit(e,t){return this.dispatchEvent(new Wh(e,t))}};class Kh{constructor(){}static linear(e){return e}static none(){return this.linear}static get(e){return e<-1?e=-1:e>1&&(e=1),function(t){return 0===e?t:e<0?t*(t*-e+1+e):t*((2-t)*e+(1-e))}}static getPowIn(e){return function(t){return Math.pow(t,e)}}static getPowOut(e){return function(t){return 1-Math.pow(1-t,e)}}static getPowInOut(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}}static getBackIn(e){return function(t){return t*t*((e+1)*t-e)}}static getBackOut(e){return function(t){return--t*t*((e+1)*t+e)+1}}static getBackInOut(e){return e*=1.525,function(t){return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}}static sineIn(e){return 1-Math.cos(e*Math.PI/2)}static sineOut(e){return Math.sin(e*Math.PI/2)}static sineInOut(e){return-(Math.cos(Math.PI*e)-1)/2}static expoIn(e){return 0===e?0:Math.pow(2,10*e-10)}static expoOut(e){return 1===e?1:1-Math.pow(2,-10*e)}static expoInOut(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}static circIn(e){return-(Math.sqrt(1-e*e)-1)}static circOut(e){return Math.sqrt(1- --e*e)}static circInOut(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}static bounceOut(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}static bounceIn(e){return 1-Kh.bounceOut(1-e)}static bounceInOut(e){return e<.5?.5*Kh.bounceIn(2*e):.5*Kh.bounceOut(2*e-1)+.5}static getElasticIn(e,t){return function(i){if(0===i||1===i)return i;const n=t/zn*Math.asin(1/e);return-e*Math.pow(2,10*(i-=1))*Math.sin((i-n)*zn/t)}}static getElasticOut(e,t){return function(i){if(0===i||1===i)return i;const n=t/zn*Math.asin(1/e);return e*Math.pow(2,-10*i)*Math.sin((i-n)*zn/t)+1}}static getElasticInOut(e,t){return function(i){const n=t/zn*Math.asin(1/e);return(i*=2)<1?e*Math.pow(2,10*(i-=1))*Math.sin((i-n)*zn/t)*-.5:e*Math.pow(2,-10*(i-=1))*Math.sin((i-n)*zn/t)*.5+1}}}Kh.quadIn=Kh.getPowIn(2),Kh.quadOut=Kh.getPowOut(2),Kh.quadInOut=Kh.getPowInOut(2),Kh.cubicIn=Kh.getPowIn(3),Kh.cubicOut=Kh.getPowOut(3),Kh.cubicInOut=Kh.getPowInOut(3),Kh.quartIn=Kh.getPowIn(4),Kh.quartOut=Kh.getPowOut(4),Kh.quartInOut=Kh.getPowInOut(4),Kh.quintIn=Kh.getPowIn(5),Kh.quintOut=Kh.getPowOut(5),Kh.quintInOut=Kh.getPowInOut(5),Kh.backIn=Kh.getBackIn(1.7),Kh.backOut=Kh.getBackOut(1.7),Kh.backInOut=Kh.getBackInOut(1.7),Kh.elasticIn=Kh.getElasticIn(1,.3),Kh.elasticOut=Kh.getElasticOut(1,.3),Kh.elasticInOut=Kh.getElasticInOut(1,.3*1.5);class Yh{constructor(){this.id=To.GenAutoIncrementId(),this.animateHead=null,this.animateTail=null,this.animateCount=0,this.paused=!1}addAnimate(e){this.animateTail?(this.animateTail.nextAnimate=e,e.prevAnimate=this.animateTail,this.animateTail=e,e.nextAnimate=null):(this.animateHead=e,this.animateTail=e),this.animateCount++}pause(){this.paused=!0}resume(){this.paused=!1}tick(e){if(this.paused)return;let t=this.animateHead;for(this.animateCount=0;t;)t.status===Cl.END?this.removeAnimate(t):t.status===Cl.RUNNING||t.status===Cl.INITIAL?(this.animateCount++,t.advance(e)):t.status===Cl.PAUSED&&this.animateCount++,t=t.nextAnimate}clear(){let e=this.animateHead;for(;e;)e.release(),e=e.nextAnimate;this.animateHead=null,this.animateTail=null,this.animateCount=0}removeAnimate(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e._onRemove&&e._onRemove.forEach((e=>e())),e===this.animateHead?(this.animateHead=e.nextAnimate,e===this.animateTail?this.animateTail=null:this.animateHead.prevAnimate=null):e===this.animateTail?(this.animateTail=e.prevAnimate,this.animateTail.nextAnimate=null):(e.prevAnimate.nextAnimate=e.nextAnimate,e.nextAnimate.prevAnimate=e.prevAnimate),t&&e.release()}}const Xh=new Yh;class qh{constructor(e,t,i,n,r){this.from=e,this.to=t,this.duration=i,this.easing=n,this.params=r,this.updateCount=0}bind(e,t){this.target=e,this.subAnimate=t,this.onBind()}onBind(){}onFirstRun(){}onStart(){}onEnd(){}getEndProps(){}getFromProps(){return this.from}getMergedEndProps(){var e;const t=this.getEndProps();return t?this._endProps===t?this._mergedEndProps:(this._endProps=t,void(this._mergedEndProps=Object.assign({},null!==(e=this.step.prev.getLastProps())&&void 0!==e?e:{},t))):this.step.prev?this.step.prev.getLastProps():t}update(e,t,i){if(0===this.updateCount){this.onFirstRun();const e=this.step.getLastProps();Object.keys(e).forEach((t=>{this.subAnimate.animate.validAttr(t)&&(i[t]=e[t])}))}this.updateCount+=1,this.onUpdate(e,t,i),e&&this.onEnd()}}class Zh extends qh{constructor(e){super(null,null,0,"linear"),this.cb=e}onUpdate(e,t,i){}onStart(){this.cb()}}class Qh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:To.GenAutoIncrementId(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xh;this.id=e,this.timeline=t,this.status=Cl.INITIAL,this.tailAnimate=new $h(this),this.subAnimates=[this.tailAnimate],this.timeScale=1,this.rawPosition=-1,this._startTime=0,this._duringTime=0,this.timeline.addAnimate(this)}setTimeline(e){e!==this.timeline&&(this.timeline.removeAnimate(this,!1),e.addAnimate(this))}getStartTime(){return this._startTime}getDuration(){return this.subAnimates.reduce(((e,t)=>e+t.totalDuration),0)}after(e){const t=e.getDuration();return this._startTime=t,this}afterAll(e){let t=-1/0;return e.forEach((e=>{t=Wn(e.getDuration(),t)})),this._startTime=t,this}parallel(e){return this._startTime=e.getStartTime(),this}static AddInterpolate(e,t){Qh.interpolateMap.set(e,t)}play(e){if(this.tailAnimate.play(e),this.target){const e=this.target.stage;e&&e.renderNextFrame()}return 1===this.subAnimates.length&&this.tailAnimate.duration===e.duration&&this.trySetAttribute(e.getFromProps(),e.mode),this}trySetAttribute(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qh.mode;e&&t&kl.SET_ATTR_IMMEDIATELY&&this.target.setAttributes&&this.target.setAttributes(e,!1,{type:wl.ANIMATE_PLAY})}runCb(e){const t=new Zh((()=>{e(this,t.step.prev)}));return this.tailAnimate.play(t),this}customInterpolate(e,t,i,n,r,s){const a=Qh.interpolateMap.get(e)||Qh.interpolateMap.get("");return!!a&&a(e,t,i,n,r,s)}pause(){this.status===Cl.RUNNING&&(this.status=Cl.PAUSED)}resume(){this.status===Cl.PAUSED&&(this.status=Cl.RUNNING)}to(e,t,i,n){if(this.tailAnimate.to(e,t,i,n),this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}from(e,t,i,n){if(this.tailAnimate.from(e,t,i,n),this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}wait(e){if(this.tailAnimate.wait(e),this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}startAt(e){if(this.tailAnimate.startAt(e),this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}loop(e){if(this.tailAnimate.loop=e,this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}reversed(e){if(this.tailAnimate.reversed=e,this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}bounce(e){if(this.tailAnimate.bounce=e,this.target){const e=this.target.stage;e&&e.renderNextFrame()}return this}subAnimate(){const e=new $h(this,this.tailAnimate);return this.tailAnimate=e,this.subAnimates.push(e),e.bind(this.target),this}getStartProps(){return this.subAnimates[0].getStartProps()}getEndProps(){return this.tailAnimate.getEndProps()}depreventAttr(e){this._preventAttrs&&this._preventAttrs.delete(e)}preventAttr(e){this._preventAttrs||(this._preventAttrs=new Set),this._preventAttrs.add(e)}preventAttrs(e){e.forEach((e=>this.preventAttr(e)))}validAttr(e){return!this._preventAttrs||!this._preventAttrs.has(e)}bind(e){return this.target=e,this.target.onAnimateBind&&this.target.onAnimateBind(this),this.subAnimates.forEach((t=>{t.bind(e)})),this}advance(e){if(this._duringTime<this._startTime){if(this._duringTime+e*this.timeScale<this._startTime)return void(this._duringTime+=e*this.timeScale);e=this._duringTime+e*this.timeScale-this._startTime,this._duringTime=this._startTime}this.status===Cl.INITIAL&&(this.status=Cl.RUNNING,this._onStart&&this._onStart.forEach((e=>e()))),this.setPosition(this.rawPosition+e*this.timeScale)&&this.status===Cl.RUNNING&&(this.status=Cl.END,this._onEnd&&this._onEnd.forEach((e=>e())))}setPosition(e){let t,i=0;const n=this.rawPosition,r=this.subAnimates.reduce(((e,t)=>e+t.totalDuration),0);e<0&&(e=0);const s=e>=r;if(s&&(e=r),e===n)return s;for(let a=0;a<this.subAnimates.length&&(t=this.subAnimates[a],!(i+t.totalDuration>=e));a++)i+=t.totalDuration,t=void 0;return this.rawPosition=e,t.setPosition(e-i),s}onStart(e){this._onStart||(this._onStart=[]),this._onStart.push(e)}onEnd(e){this._onEnd||(this._onEnd=[]),this._onEnd.push(e)}onRemove(e){this._onRemove||(this._onRemove=[]),this._onRemove.push(e)}onFrame(e){this._onFrame||(this._onFrame=[]),this._onFrame.push(e)}release(){this.status=Cl.END}stop(e){e||this.target.onStop(),"start"===e?this.target.onStop(this.getStartProps()):"end"===e?this.target.onStop(this.getEndProps()):this.target.onStop(e),this.release()}}Qh.mode=kl.NORMAL,Qh.interpolateMap=new Map;class $h{get totalDuration(){return this.calcAttr(),this._totalDuration+this._startAt}constructor(e,t){this.rawPosition=-1,this.position=0,this.loop=0,this.duration=0,this.animate=e,this.stepHead=new Jh(0,0,t?Object.assign({},t.stepTail.props):{}),this.stepTail=this.stepHead,this.dirty=!0,this._startAt=0}calcAttr(){this.dirty&&(this._totalDuration=this.duration*(this.loop+1))}bind(e){return this.target=e,this}play(e){let t=e.duration;(null==t||t<0)&&(t=0);const i=e.easing,n="string"==typeof i?Kh[i]:i,r=this._addStep(t,null,n);return r.type=Al.customAnimate,this._appendProps(e.getEndProps(),r,!1),this._appendCustomAnimate(e,r),this}to(e,t,i,n){(null==t||t<0)&&(t=0);const r="string"==typeof i?Kh[i]:i,s=this._addStep(t,null,r);return s.type=Al.to,this._appendProps(e,s,!!n&&n.tempProps),s.propKeys||(s.propKeys=Object.keys(s.props)),n&&n.noPreventAttrs||this.target.animates.forEach((e=>{e.id!==this.animate.id&&e.preventAttrs(s.propKeys)})),this}from(e,t,i,n){this.to(e,0,i,n);const r={};this.stepTail.propKeys||(this.stepTail.propKeys=Object.keys(this.stepTail.props)),this.stepTail.propKeys.forEach((e=>{r[e]=this.getLastPropByName(e,this.stepTail)})),this.to(r,t,i,n),this.stepTail.type=Al.from}startAt(e){return e<0&&(e=0),this._startAt=e,this}getStartProps(){var e;return null===(e=this.stepHead)||void 0===e?void 0:e.props}getEndProps(){return this.stepTail.props}getLastStep(){return this._lastStep}wait(e){if(e>0){const t=this._addStep(+e,null);t.type=Al.wait,t.prev.customAnimate?t.props=t.prev.customAnimate.getEndProps():t.props=t.prev.props,this.target.onAddStep&&this.target.onAddStep(t)}return this}_addStep(e,t,i){const n=new Jh(this.duration,e,t,i);return this.duration+=e,this.stepTail.append(n),this.stepTail=n,n}_appendProps(e,t,i){t.props=i?e:Object.assign({},e);let n=t.prev;const r=t.props;for(t.propKeys||(t.propKeys=Object.keys(t.props)),t.propKeys.forEach((e=>{void 0===t.props[e]&&(t.props[e]=this.target.getDefaultAttribute(e))}));n.prev;)n.props&&(n.propKeys||(n.propKeys=Object.keys(n.props)),n.propKeys.forEach((e=>{void 0===r[e]&&(r[e]=n.props[e])}))),t.propKeys=Object.keys(t.props),n=n.prev;const s=this.stepHead.props;t.propKeys||(t.propKeys=Object.keys(r)),t.propKeys.forEach((e=>{if(void 0===s[e]){const t=this.animate.getStartProps();s[e]=t[e]=this.target.getComputedAttribute(e)}})),this.target.onAddStep&&this.target.onAddStep(t)}_appendCustomAnimate(e,t){t.customAnimate=e,e.step=t,e.bind(this.target,this)}setPosition(e){var t;const i=this.duration,n=this.loop,r=this.rawPosition;let s,a,o=!1;const l=null!==(t=this._startAt)&&void 0!==t?t:0;if(e<0&&(e=0),e<l)return this.rawPosition=e,!1;if(e-=l,i<=0)return o=!0,o;if(s=Math.floor(e/i),a=e-s*i,o=e>=n*i+i,o&&(a=i,s=n,e=a*s+i),e===r)return o;const c=!this.reversed!=!(this.bounce&&s%2);return c&&(a=i-a),this._deltaPosition=a-this.position,this.position=a,this.rawPosition=e+l,this.updatePosition(o,c),o}updatePosition(e,t){if(!this.stepHead)return;let i=this.stepHead.next;const n=this.position,r=this.duration;if(this.target&&i){let s=i.next;for(;s&&s.position<=n;)i=s,s=i.next;let a=e?0===r?1:n/r:(n-i.position)/i.duration;i.easing&&(a=i.easing(a)),this.tryCallCustomAnimateLifeCycle(i,this._lastStep||(t?this.stepTail:this.stepHead),t),this.updateTarget(i,a,e),this._lastStep=i,this.animate._onFrame&&this.animate._onFrame.forEach((e=>e(i,a)))}}tryCallCustomAnimateLifeCycle(e,t,i){if(e!==t)if(i){let i=t.prev;for(;i&&i!==e;)i.customAnimate&&(i.customAnimate.onStart&&i.customAnimate.onStart(),i.customAnimate.onEnd&&i.customAnimate.onEnd()),i=e.prev;t&&t.customAnimate&&t.customAnimate.onEnd&&t.customAnimate.onEnd(),e&&e.customAnimate&&e.customAnimate.onStart&&e.customAnimate.onStart()}else{let i=t.next;for(;i&&i!==e;)i.customAnimate&&(i.customAnimate.onStart&&i.customAnimate.onStart(),i.customAnimate.onEnd&&i.customAnimate.onEnd()),i=i.next;t&&t.customAnimate&&t.customAnimate.onEnd&&t.customAnimate.onEnd(),e&&e.customAnimate&&e.customAnimate.onStart&&e.customAnimate.onStart()}}getLastPropByName(e,t){let i=t.prev;for(;i;){if(i.props&&void 0!==i.props[e])return i.props[e];if(i.customAnimate){const t=i.customAnimate.getEndProps()[e];if(void 0!==t)return t}i=i.prev}return u.getInstance().warn("\u672a\u77e5\u9519\u8bef\uff0cstep\u4e2d\u627e\u4e0d\u5230\u5c5e\u6027"),t.props[e]}updateTarget(e,t,i){null==e.props&&null==e.customAnimate||this.target.onStep(this,this.animate,e,t,i)}}class Jh{constructor(e,t,i,n){this.duration=t,this.position=e,this.props=i,this.easing=n}append(e){e.prev=this,e.next=this.next,this.next=e}getLastProps(){let e=this.prev;for(;e;){if(e.props)return e.props;if(e.customAnimate)return e.customAnimate.getMergedEndProps();e=e.prev}return null}}const ed=200,td="cubicOut",id=1e3,nd="quadInOut";var rd;!function(e){e[e.Color255=0]="Color255",e[e.Color1=1]="Color1"}(rd||(rd={}));class sd{static Get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rd.Color1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0,1];if(t===rd.Color1){const t=sd.store1[e];if(t)return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i;const n=jt.parseColorString(e);if(n){const t=[n.r/255,n.g/255,n.b/255,n.opacity];sd.store1[e]=t,sd.store255[e]=[n.r,n.g,n.b,n.opacity],i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3]}return i}const n=sd.store255[e];if(n)return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i;const r=jt.parseColorString(e);return r&&(sd.store1[e]=[r.r/255,r.g/255,r.b/255,r.opacity],sd.store255[e]=[r.r,r.g,r.b,r.opacity],i[0]=r.r,i[1]=r.g,i[2]=r.b,i[3]=r.opacity),i}static Set(e,t,i){if(t===rd.Color1){if(sd.store1[e])return;sd.store1[e]=i,sd.store255[e]=[Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]),Math.floor(255*i[3])]}else{if(sd.store255[e])return;sd.store255[e]=i,sd.store1[e]=[i[0]/255,i[1]/255,i[2]/255,i[3]]}}}function ad(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(e)?t?"rgb(".concat(Math.round(e[0]),",").concat(Math.round(e[1]),",").concat(Math.round(e[2]),",").concat(e[3].toFixed(2),")"):"rgb(".concat(Math.round(e[0]),",").concat(Math.round(e[1]),",").concat(Math.round(e[2]),")"):e}function od(e,t,i,n,r){if(!e||!t)return e&&ad(e)||t&&ad(t)||!1;let s,a,o=!1,l=!1;if(Array.isArray(e)?s=e:"string"==typeof e?s=sd.Get(e,rd.Color255):o=!0,Array.isArray(t)?a=t:"string"==typeof t?a=sd.Get(t,rd.Color255):l=!0,o!==l){const s=o?e:t,a=o?t:e,l=Object.assign(Object.assign({},s),{stops:s.stops.map((e=>Object.assign(Object.assign({},e),{color:ad(a)})))});return o?od(s,l,i,n,r):od(l,s,i,n,r)}if(o){if(e.gradient===t.gradient){const n=e,r=t,s=n.stops,a=r.stops;if(s.length!==a.length)return!1;if("linear"===n.gradient)return function(e,t,i){const n=e.stops,r=t.stops;return{gradient:"linear",x0:e.x0+(t.x0-e.x0)*i,x1:e.x1+(t.x1-e.x1)*i,y0:e.y0+(t.y0-e.y0)*i,y1:e.y1+(t.y1-e.y1)*i,stops:new Array(n.length).fill(0).map(((e,t)=>({color:hd(n[t].color,r[t].color,i),offset:n[t].offset+(r[t].offset-n[t].offset)*i})))}}(n,r,i);if("radial"===n.gradient)return function(e,t,i){const n=e.stops,r=t.stops;return{gradient:"radial",x0:e.x0+(t.x0-e.x0)*i,x1:e.x1+(t.x1-e.x1)*i,y0:e.y0+(t.y0-e.y0)*i,y1:e.y1+(t.y1-e.y1)*i,r0:e.r0+(t.r0-e.r0)*i,r1:e.r1+(t.r1-e.r1)*i,stops:new Array(n.length).fill(0).map(((e,t)=>({color:hd(n[t].color,r[t].color,i),offset:n[t].offset+(r[t].offset-n[t].offset)*i})))}}(n,r,i);if("conical"===n.gradient)return function(e,t,i){const n=e.stops,r=t.stops;return{gradient:"conical",startAngle:e.startAngle+(t.startAngle-e.startAngle)*i,endAngle:e.endAngle+(t.endAngle-e.endAngle)*i,x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i,stops:new Array(n.length).fill(0).map(((e,t)=>({color:hd(n[t].color,r[t].color,i),offset:n[t].offset+(r[t].offset-n[t].offset)*i})))}}(n,r,i)}return!1}return r&&r(s,a),ad(function(e,t,i){return[e[0]+(t[0]-e[0])*i,e[1]+(t[1]-e[1])*i,e[2]+(t[2]-e[2])*i,e[3]+(t[3]-e[3])*i]}(s,a,i),n)}sd.store255={},sd.store1={};const ld=[0,0,0,0],cd=[0,0,0,0];function hd(e,t,i){return sd.Get(e,rd.Color255,ld),sd.Get(t,rd.Color255,cd),"rgba(".concat(Math.round(ld[0]+(cd[0]-ld[0])*i),",").concat(Math.round(ld[1]+(cd[1]-ld[1])*i),",").concat(Math.round(ld[2]+(cd[2]-ld[2])*i),",").concat(ld[3]+(cd[3]-ld[3])*i,")")}class dd{static GetImage(e,t){var i;let n=dd.cache.get(e);n?"fail"===n.loadState?se.global.getRequestAnimationFrame()((()=>{t.imageLoadFail(e)})):"init"===n.loadState||"loading"===n.loadState?null===(i=n.waitingMark)||void 0===i||i.push(t):t&&t.imageLoadSuccess(e,n.data):(n={type:"image",loadState:"init"},dd.cache.set(e,n),n.dataPromise=se.global.loadImage(e),n.dataPromise?(n.waitingMark=[t],n.dataPromise.then((t=>{var i;n.loadState=(null==t?void 0:t.data)?"success":"fail",n.data=null==t?void 0:t.data,null===(i=n.waitingMark)||void 0===i||i.map(((i,r)=>{(null==t?void 0:t.data)?(n.loadState="success",n.data=t.data,i.imageLoadSuccess(e,t.data)):(n.loadState="fail",i.imageLoadFail(e))}))}))):(n.loadState="fail",t.imageLoadFail(e)))}static GetSvg(e,t){var i;let n=dd.cache.get(e);n?"fail"===n.loadState?se.global.getRequestAnimationFrame()((()=>{t.imageLoadFail(e)})):"init"===n.loadState||"loading"===n.loadState?null===(i=n.waitingMark)||void 0===i||i.push(t):t&&se.global.getRequestAnimationFrame()((()=>{t.imageLoadSuccess(e,n.data)})):(n={type:"image",loadState:"init"},dd.cache.set(e,n),n.dataPromise=se.global.loadSvg(e),n.dataPromise?(n.waitingMark=[t],n.dataPromise.then((t=>{var i;n.loadState=(null==t?void 0:t.data)?"success":"fail",n.data=null==t?void 0:t.data,null===(i=n.waitingMark)||void 0===i||i.map(((i,r)=>{(null==t?void 0:t.data)?(n.loadState="success",n.data=t.data,i.imageLoadSuccess(e,t.data)):(n.loadState="fail",i.imageLoadFail(e))}))}))):(n.loadState="fail",t.imageLoadFail(e)))}static GetFile(e,t){let i=dd.cache.get(e);return i?"init"===i.loadState||"fail"===i.loadState?Promise.reject():"loading"===i.loadState?i.dataPromise.then((e=>e.data)):Promise.resolve(i.data):(i={type:t,loadState:"init"},dd.cache.set(e,i),"arrayBuffer"===t?i.dataPromise=se.global.loadArrayBuffer(e):"blob"===t?i.dataPromise=se.global.loadBlob(e):"json"===t&&(i.dataPromise=se.global.loadJson(e)),i.dataPromise.then((e=>e.data)))}}dd.cache=new Map;const ud=new sl,pd=new hl,gd=["lineWidth","scaleX","scaleY","angle","anchor","visible"],fd=["x","y"],md=["scaleX","scaleY"],vd=["angle"],yd=new ir,bd={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1};class _d extends Vh{static mixin(e){const t=Object.keys(e);for(let i=0;i<t.length;++i){const n=t[i];Object.defineProperty(_d.prototype,n,Object.getOwnPropertyDescriptor(e,n))}}get AABBBounds(){return this.tryUpdateAABBBounds("imprecise"===this.attribute.boundsMode)}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;super(),this._AABBBounds=new hl,this._updateTag=xl.INIT,this.attribute=e,this.valid=this.isValid(),e.background&&this.loadImage(null!==(t=e.background.background)&&void 0!==t?t:e.background,!0)}setMode(e){"3d"===e?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var i,n;const{dx:r=e.dx,dy:s=e.dy}=this.attribute;if(t&&this.parent){const e=this.parent.attribute;yd.x=r+(null!==(i=e.scrollX)&&void 0!==i?i:0),yd.y=s+(null!==(n=e.scrollY)&&void 0!==n?n:0)}else yd.x=r,yd.y=s;return yd}onAnimateBind(e){this._emitCustomEvent("animate-bind",e)}tryUpdateAABBBounds(e){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;se.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);const t=this.doUpdateAABBBounds(e);return this.addUpdateLayoutTag(),se.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),t}combindShadowAABBBounds(e){if(this.shadowRoot){const t=this.shadowRoot.AABBBounds.clone();e.union(t)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this.AABBBounds.clone(),this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(){if(this._globalTransMatrix){if(this.parent){const e=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._transMatrix||(this._transMatrix=new sl),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),e&&this.clearUpdateLocalPositionTag()),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&xl.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&xl.UPDATE_BOUNDS)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&xl.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&xl.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&xl.UPDATE_LOCAL_MATRIX)}isValid(){var e,t;const i=this.attribute;return Number.isFinite((null!==(e=i.x)&&void 0!==e?e:0)+(null!==(t=i.y)&&void 0!==t?t:0))}_validNumber(e){return null==e||Number.isFinite(e)}shouldUpdateShape(){return!!(this._updateTag&xl.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=xl.CLEAR_SHAPE}containsPoint(e,t,i,n){if(!n)return!1;if(i===Sl.GLOBAL){const i=new ir(e,t);this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),e=i.x,t=i.y}return n.containsPoint(this,{x:e,y:t})}setAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;(e=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,null,i)||e).background&&this.loadImage(e.background,!0),this._setAttributes(e,t,i)}_setAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const n=Object.keys(e);for(let r=0;r<n.length;r++){const t=n[r];this.attribute[t]=e[t]}this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!t&&!this.needUpdateTags(n)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)}setAttribute(e,t,i,n){var r;const s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[e]:t},this.attribute,e,n);s?this._setAttributes(s,i,n):P(null===(r=this.normalAttrs)||void 0===r?void 0:r[e])?(this.attribute[e]=t,this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!i&&!this.needUpdateTag(e)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n)):this.normalAttrs[e]=t,"background"===e&&this.loadImage(t,!0)}needUpdateTags(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gd;for(let i=0;i<t.length;i++){const n=t[i];if(-1!==e.indexOf(n))return!0}return!1}needUpdateTag(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gd;for(let i=0;i<t.length;i++)if(e===t[i])return!0;return!1}initAttributes(e){const t={type:wl.INIT};e=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,null,t)||e,this.attribute=e,e.background&&this.loadImage(e.background,!0),this._updateTag=xl.INIT,this.valid=this.isValid(),this.onAttributeUpdate(t)}translate(e,t){var i,n;if(0===e&&0===t)return this;const r={type:wl.TRANSLATE},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:e,y:t},this.attribute,fd,r);s&&(e=s.x,t=s.y,delete s.x,delete s.y,this._setAttributes(s));const a=this.attribute,o=a.postMatrix;return o?se.transformUtil.fromMatrix(o,o).translate(e,t):(a.x=(null!==(i=a.x)&&void 0!==i?i:gc.x)+e,a.y=(null!==(n=a.y)&&void 0!==n?n:gc.y)+t),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this}translateTo(e,t){const i=this.attribute;if(i.x===e&&i.y===t)return this;const n={type:wl.TRANSLATE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:e,y:t},this.attribute,fd,n);return r?(this._setAttributes(r,!1,n),this):(i.x=e,i.y=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n),this)}scale(e,t,i){var n,r;if(1===e&&1===t)return this;const s={type:wl.SCALE},a=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:e,scaleY:t,scaleCenter:i},this.attribute,md,s);a&&(e=a.scaleX,t=a.scaleY,delete a.scaleX,delete a.scaleY,this._setAttributes(a));const o=this.attribute;if(i){let{postMatrix:n}=this.attribute;n||(n=new sl,o.postMatrix=n),se.transformUtil.fromMatrix(n,n).scale(e,t,i)}else o.scaleX=(null!==(n=o.scaleX)&&void 0!==n?n:gc.scaleX)*e,o.scaleY=(null!==(r=o.scaleY)&&void 0!==r?r:gc.scaleY)*t;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s),this}scaleTo(e,t){const i=this.attribute;if(i.scaleX===e&&i.scaleY===t)return this;const n={type:wl.SCALE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:e,scaleY:t},this.attribute,md,n);return r?(this._setAttributes(r,!1,n),this):(i.scaleX=e,i.scaleY=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n),this)}rotate(e,t){var i;if(0===e)return this;const n={type:wl.ROTATE},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:e,rotateCenter:t},this.attribute,vd,n);r&&(delete r.angle,this._setAttributes(r,!1,n));const s=this.attribute;if(t){let{postMatrix:i}=this.attribute;i||(i=new sl,s.postMatrix=i),se.transformUtil.fromMatrix(i,i).rotate(e,t)}else s.angle=(null!==(i=s.angle)&&void 0!==i?i:gc.angle)+e;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n),this}rotateTo(e){const t=this.attribute;if(t.angle===e)return this;const i={type:wl.ROTATE_TO},n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,vd,i);return n?(this._setAttributes(n,!1,i),this):(t.angle=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i),this)}skewTo(e,t){return this}animate(e){this.animates||(this.animates=new Map);const t=new Qh(null==e?void 0:e.id).bind(this);if(e){const{onStart:i,onFrame:n,onEnd:r,onRemove:s}=e;null!=i&&t.onStart(i),null!=n&&t.onFrame(n),null!=r&&t.onEnd(r),null!=s&&t.onRemove(s),t.interpolateFunc=e.interpolate}return this.animates.set(t.id,t),t.onRemove((()=>{this.animates.delete(t.id)})),t}onAttributeUpdate(e){e&&e.skipUpdateCallback||(se.graphicService.onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",e))}update(e){e?(e.bounds&&this.tryUpdateAABBBounds("imprecise"===this.attribute.boundsMode),e.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds("imprecise"===this.attribute.boundsMode),this.tryUpdateLocalTransMatrix())}hasState(e){return!(!this.currentStates||!this.currentStates.length)&&(!!P(e)||this.currentStates.includes(e))}getState(e){var t;return null===(t=this.states)||void 0===t?void 0:t[e]}applyStateAttrs(e,t,i,n){var r,s,a,o;if(i){const i=Object.keys(e),l=this.getNoWorkAnimateAttr(),c={};let h;n?i.forEach((t=>{l[t]?(h||(h={}),h[t]=e[t]):c[t]=void 0===e[t]?this.getDefaultAttribute(t):e[t]})):i.forEach((t=>{l[t]?(h||(h={}),h[t]=e[t]):c[t]=e[t]}));const d=this.animate();d.stateNames=t,d.to(c,null!==(s=null===(r=this.stateAnimateConfig)||void 0===r?void 0:r.duration)&&void 0!==s?s:ed,null!==(o=null===(a=this.stateAnimateConfig)||void 0===a?void 0:a.easing)&&void 0!==o?o:td),h&&this.setAttributes(h,!1,{type:wl.STATE})}else this.setAttributes(e,!1,{type:wl.STATE})}updateNormalAttrs(e){const t={};this.normalAttrs?(Object.keys(e).forEach((e=>{e in this.normalAttrs?(t[e]=this.normalAttrs[e],delete this.normalAttrs[e]):t[e]=this.getNormalAttribute(e)})),Object.keys(this.normalAttrs).forEach((t=>{e[t]=this.normalAttrs[t]}))):Object.keys(e).forEach((e=>{t[e]=this.getNormalAttribute(e)})),this.normalAttrs=t}getNormalAttribute(e){let t=this.attribute[e];return this.animates&&this.animates.forEach((i=>{if(i.stateNames){const n=i.getEndProps();Bh(n,e)&&(t=n[e])}})),t}clearStates(e){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,e,!0)):this.currentStates=[],this.normalAttrs=null}removeState(e,t){if((this.currentStates?this.currentStates.indexOf(e):-1)>=0){const i=this.currentStates.filter((t=>t!==e));this.useStates(i,t)}}toggleState(e,t){if(this.hasState(e))this.removeState(e,t);else if((this.currentStates?this.currentStates.indexOf(e):-1)<0){const i=this.currentStates?this.currentStates.slice():[];i.push(e),this.useStates(i,t)}}addState(e,t,i){var n;if(this.currentStates&&this.currentStates.includes(e)&&(t||1===this.currentStates.length))return;const r=t&&(null===(n=this.currentStates)||void 0===n?void 0:n.length)?this.currentStates.concat([e]):[e];this.useStates(r,i)}useStates(e,t){var i;if(!e.length)return void this.clearStates(t);if((null===(i=this.currentStates)||void 0===i?void 0:i.length)===e.length&&!e.some(((e,t)=>this.currentStates[t]!==e)))return;const n={};e.forEach((t=>{var i;const r=this.stateProxy?this.stateProxy(t,e):null===(i=this.states)||void 0===i?void 0:i[t];r&&Object.assign(n,r)})),this.updateNormalAttrs(n),this.currentStates=e,this.applyStateAttrs(n,e,t)}addUpdateBoundTag(){this._updateTag|=xl.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=xl.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=xl.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&xl.UPDATE_SHAPE_AND_BOUNDS)===xl.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=xl.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=xl.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=xl.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=xl.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=xl.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=xl.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=xl.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&xl.UPDATE_LAYOUT)}getAnchor(e,t){const i=[0,0],n=()=>{if(t.b)return t.b;const{scaleX:e,scaleY:i,angle:n}=this.attribute;return pd.copy(this._AABBBounds),this.setAttributes({scaleX:1,scaleY:1,angle:0}),t.b=this.AABBBounds.clone(),this._AABBBounds.copy(pd),this.setAttributes({scaleX:e,scaleY:i,angle:n}),t.b};if("string"==typeof e[0]){const t=parseFloat(e[0])/100,r=n();i[0]=r.x1+(r.x2-r.x1)*t}else i[0]=e[0];if("string"==typeof e[1]){const t=parseFloat(e[1])/100,r=n();i[1]=r.y1+(r.y2-r.y1)*t}else i[1]=e[1];return i}doUpdateLocalMatrix(){const{x:e=gc.x,y:t=gc.y,scaleX:i=gc.scaleX,scaleY:n=gc.scaleY,angle:r=gc.angle,scaleCenter:s,anchor:a,postMatrix:o}=this.attribute;let l=[0,0];const c={};if(a&&(l=this.getAnchor(a,c)),!s||1===i&&1===n)!function(e,t,i,n,r,s,a,o){const l=t.a,c=t.b,h=t.c,d=t.d,u=t.e,p=t.f,g=Un(a),f=Kn(a);let m,v;o?(m=o[0],v=o[1]):(m=i,v=n);const y=m-i,b=v-n,_=l*g+h*f,x=c*g+d*f,S=h*g-l*f,w=d*g-c*f;e.a=r*_,e.b=r*x,e.c=s*S,e.d=s*w,e.e=u+l*m+h*v-_*y-S*b,e.f=p+c*m+d*v-x*y-w*b}(this._transMatrix,this._transMatrix.reset(),e,t,i,n,r,a&&l);else{const a=this._transMatrix;a.reset(),a.translate(l[0],l[1]),a.rotate(r),a.translate(-l[0],-l[1]),a.translate(e,t),l=this.getAnchor(s,c),se.transformUtil.fromMatrix(a,a).scale(i,n,{x:l[0],y:l[1]})}const h=this.getOffsetXY(gc);if(this._transMatrix.e+=h.x,this._transMatrix.f+=h.y,o){const e=ud.setValue(o.a,o.b,o.c,o.d,o.e,o.f),t=this._transMatrix;e.multiply(t.a,t.b,t.c,t.d,t.e,t.f),t.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}doUpdateGlobalMatrix(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);const{scrollX:e=0,scrollY:t=0}=this.parent.attribute;this._globalTransMatrix.translate(e,t)}}setStage(e,t){if(this.stage!==e){if(this.stage=e,this.layer=t,this.setStageToShadowRoot(e,t),this.animates&&this.animates.size){const t=e.getTimeline();this.animates.forEach((e=>{e.setTimeline(t)}))}this._onSetStage&&this._onSetStage(this,e,t),se.graphicService.onSetStage(this,e)}}setStageToShadowRoot(e,t){this.shadowRoot&&this.shadowRoot.setStage(e,t)}onAddStep(e){}onStop(e){e&&this.setAttributes(e,!1,{type:wl.ANIMATE_END})}onStep(e,t,i,n,r){const s={};if(i.customAnimate)i.customAnimate.update(r,n,s);else{const a=i.props,o=i.parsedProps,l=i.propKeys;this.stepInterpolate(e,t,s,i,n,r,a,void 0,o,l)}this.setAttributes(s,!1,{type:wl.ANIMATE_UPDATE,animationState:{ratio:n,end:r,step:i,isFirstFrameOfStep:e.getLastStep()!==i}}),this.stage&&this.stage.renderNextFrame()}stepInterpolate(e,t,i,n,r,s,a,o,l,c){c||(c=Object.keys(a),n.propKeys=c),s?n.propKeys.forEach((e=>{t.validAttr(e)&&(i[e]=a[e])})):c.forEach((s=>{var c;if(!t.validAttr(s))return;const h=a[s],d=null!==(c=o&&o[s])&&void 0!==c?c:e.getLastPropByName(s,n);if(null==h||null==d)return void(i[s]=h);let u;u=t.interpolateFunc&&t.interpolateFunc(s,r,d,h,i),u||(u=t.customInterpolate(s,r,d,h,this,i),u||this.defaultInterpolate(h,d,s,i,l,r)||this._interpolate(s,r,d,h,i))})),n.parsedProps=l}defaultInterpolate(e,t,i,n,r,s){if(Number.isFinite(e))return n[i]=t+(e-t)*s,!0;if("fill"===i){r||(r={});const a=r.fillColorArray,o=od(t,null!=a?a:e,s,!1,((e,t)=>{r.fillColorArray=t}));return o&&(n[i]=o),!0}if("stroke"===i){r||(r={});const a=r.strokeColorArray,o=od(t,null!=a?a:e,s,!1,((e,t)=>{r.strokeColorArray=t}));return o&&(n[i]=o),!0}if("shadowColor"===i){r||(r={});const a=r.shadowColorArray,o=od(t,null!=a?a:e,s,!0,((e,t)=>{r.shadowColorArray=t}));return o&&(n[i]=o),!0}return!1}_interpolate(e,t,i,n,r){}getDefaultAttribute(e){return jh(this)[this.type][e]}getComputedAttribute(e){var t;return null!==(t=this.attribute[e])&&void 0!==t?t:this.getDefaultAttribute(e)}onSetStage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._onSetStage=e,t&&this.stage&&e(this,this.stage)}attachShadow(e){return e&&(e.shadowHost=this),this.shadowRoot=null!=e?e:se.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map((e=>e.toJson()))}}createPathProxy(e){return _(e,!0)?this.pathProxy=(new dc).fromString(e):this.pathProxy=new dc,this.pathProxy}loadImage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||t&&function(e){return!(!e.fill&&!e.stroke)}(e))return;const i=e;this.resources||(this.resources=new Map);const n={data:"init",state:null};this.resources.set(i,n),"string"==typeof e?(n.state="loading",e.startsWith("<svg")?(dd.GetSvg(e,this),this.backgroundImg=this.backgroundImg||t):(Nh(e)||e.includes("/")||zh(e))&&(dd.GetImage(e,this),this.backgroundImg=this.backgroundImg||t)):(n.state="success",n.data=e,this.backgroundImg=this.backgroundImg||t)}imageLoadSuccess(e,t,i){if(!this.resources)return;const n=this.resources.get(e);n&&(n.state="success",n.data=t,i&&i(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}imageLoadFail(e,t){if(!this.resources)return;const i=this.resources.get(e);i&&(i.state="fail",t&&t())}_stopAnimates(e){e&&e.forEach((e=>{e.stop()}))}stopAnimates(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&e&&this.forEachChildren((t=>{t.stopAnimates(e)}))}release(){this.releaseStatus="released",se.graphicService.onRelease(this)}_emitCustomEvent(e,t){var i,n;if(this._events&&e in this._events){const r=new Wh(e,t);r.bubbles=!1,r.manager=null===(n=null===(i=this.stage)||void 0===i?void 0:i.eventSystem)||void 0===n?void 0:n.manager,this.dispatchEvent(r)}}}var xd;_d.mixin(Gh),function(e){e[e.Top=1]="Top",e[e.Right=2]="Right",e[e.Bottom=4]="Bottom",e[e.Left=8]="Left",e[e.ALL=15]="ALL"}(xd||(xd={}));const Sd=[!1,!1,!1,!1],wd=[0,0,0,0],Cd=e=>e?v(e)?0===e.length?0:1===e.length?e[0]:2===e.length?(wd[0]=e[0],wd[2]=e[0],wd[1]=e[1],wd[3]=e[1],wd):e:e:0,kd=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],Ad=[1,2,3,0,1,2,3,0];function Ed(e,t,i,n){for(;e>=zn;)e-=zn;for(;e<0;)e+=zn;for(;e>t;)t+=zn;kd[0].x=i,kd[1].y=i,kd[2].x=-i,kd[3].y=-i;const r=Math.ceil(e/Bn)%4,s=Math.ceil(t/Bn)%4;if(n.add(Un(e)*i,Kn(e)*i),n.add(Un(t)*i,Kn(t)*i),r!==s||t-e>Fn){let e=!1;for(let t=0;t<Ad.length;t++)if(e||r!==Ad[t]){if(e&&s===Ad[t])break;if(e){const e=kd[Ad[t]];n.add(e.x,e.y)}}else{e=!0;const t=kd[r];n.add(t.x,t.y)}}}function Td(e,t,i){const{x:n,y:r}=Qn(e.x,e.y,t.x,t.y,i),{x:s,y:a}=Qn(e.x1,e.y1,t.x1,t.y1,i),o=new ir(n,r,s,a);return o.defined=t.defined,o}function Od(e,t,i){if(!e||!t)return[];Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);let n=[];if(e.length>t.length){n=t.map((e=>{const t=new ir(e.x,e.y,e.x1,e.y1);return t.defined=e.defined,t}));for(let r=0;r<t.length;r++)n[r]=Td(e[r],t[r],i)}else{n=t.map((e=>{const t=new ir(e.x,e.y,e.x1,e.y1);return t.defined=e.defined,t}));for(let r=0;r<e.length;r++)n[r]=Td(e[r],t[r],i)}return n}const Pd=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","scrollX","scrollY"];function Md(e,t){if(v(e)){let i;for(let n=0;n<e.length&&void 0===i;n++)i=e[n][t];return i}return e[t]}class Id{constructor(){this.durations=[],this.timeout=Id.TimeOut,this.lastDate=0,this.durationsListThreshold=30}call(e){return this.lastDate=Date.now(),setTimeout((()=>{this.appendDuration(Date.now()-this.lastDate),e(0)}),this.timeout,!0)}clear(e){clearTimeout(e)}appendDuration(e){this.durations.push(e),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce(((e,t)=>e+t),0)/this.durations.length,1e3/60),1e3/30)}}Id.TimeOut=1e3/60;const Rd=new Id,Dd=(e,t)=>_(e)&&"%"===e[e.length-1]?t*(Number.parseFloat(e.substring(0,e.length-1))/100):e;var Ld=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};function jd(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e.expand(t+(n/2+(i?function(e,t){return e?t:0}(i,t):0))),e}let Fd=0;function Bd(){return Fd++}var Nd;function zd(e){const t=[];let i=0,n="";for(let r=0;r<e.length;r++)Ud(e[r])?i?n+=e[r]:(i=1,n=e[r]):(i&&(t.push({text:n,direction:Nd.VERTICAL}),n="",i=0),t.push({text:e[r],direction:Nd.HORIZONTAL}));return n&&t.push({text:n,direction:Nd.VERTICAL}),t}!function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(Nd||(Nd={}));const Hd=new Map;["\u2026","\uff08","\uff09","\u2014","\u3010","\u3011","\u300c","\u300d","\u300a","\u300b"].forEach((e=>Hd.set(e,!0)));const Vd=new Map;function Ud(e){if(Hd.has(e))return!0;if(Vd.has(e))return!1;let t=!1;return e.codePointAt(0)<256&&(t=!0),t}[""].forEach((e=>Vd.set(e,!0)));const Wd=Bd(),Gd=Bd(),Kd=Bd(),Yd=Bd(),Xd=Bd(),qd=Bd(),Zd=Bd(),Qd=Bd(),$d=Bd(),Jd=Bd(),eu=Bd(),tu=Bd(),iu=Bd(),nu=Bd(),ru=Bd(),su=Bd(),au=Symbol.for("GraphicService"),ou=Symbol.for("GraphicCreator"),lu=(Object.keys({"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity"}),{"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity",stroke:"stroke",fill:"fill"}),cu=Object.keys(lu);var hu;!function(e){e[e.LESS_GROUP=0]="LESS_GROUP",e[e.MORE_GROUP=1]="MORE_GROUP"}(hu||(hu={}));class du extends _d{constructor(e){super(e),this.type="group",this.parent=null,this.isContainer=!0,this.numberType=qd,this._childUpdateTag=xl.UPDATE_BOUNDS}setMode(e){"3d"===e?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(e){return this.theme||(this.theme=new Dh),this.theme.setTheme(e,this)}createTheme(){this.theme||(this.theme=new Dh)}hideAll(){this.setAttribute("visible",!1),this.forEachChildren((e=>{e.isContainer&&e.hideAll?e.hideAll():e.setAttribute("visible",!1)}))}showAll(){this.setAttribute("visible",!0),this.forEachChildren((e=>{e.isContainer&&e.showAll?e.showAll():e.setAttribute("visible",!0)}))}containsPoint(e,t,i){if(i===Sl.GLOBAL){const i=new ir(e,t);return this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),this.AABBBounds.contains(i.x,i.y)}return this.AABBBounds.contains(e,t)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&xl.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;se.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);const e=this.shouldSelfChangeUpdateAABBBounds(),t=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),se.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,e),t}doUpdateLocalMatrix(){const{x:e=gc.x,y:t=gc.y,dx:i=gc.dx,dy:n=gc.dy,scaleX:r=gc.scaleX,scaleY:s=gc.scaleY,angle:a=gc.angle,postMatrix:o}=this.attribute;if(0!==e||0!==t||0!==i||0!==n||1!==r||1!==s||0!==a||o)return super.doUpdateLocalMatrix();this._transMatrix.reset()}doUpdateAABBBounds(){const e=this.attribute,t=jh(this).group;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const i=se.graphicService.updateGroupAABBBounds(e,t,this._AABBBounds,this),{boundsPadding:n=t.boundsPadding}=e,r=Cd(n);return r&&i.expand(r),this.parent&&this.parent.addChildUpdateBoundTag(),this.clearUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),i}clearUpdateBoundTag(){this._updateTag&=xl.CLEAR_BOUNDS,this._childUpdateTag&=xl.CLEAR_BOUNDS}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}addUpdateBoundTag(){this._updateTag|=xl.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&xl.UPDATE_BOUNDS||(this._childUpdateTag|=xl.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(e){const t=super.appendChild(e);return this.stage&&t&&(t.stage=this.stage,t.layer=this.layer),this.addUpdateBoundTag(),se.graphicService.onAddIncremental(e,this,this.stage),t}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),se.graphicService.onClearIncremental(this,this.stage)}appendChild(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=super.appendChild(e);return t&&this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertBefore(e,t){const i=super.insertBefore(e,t);return this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertAfter(e,t){const i=super.insertAfter(e,t);return this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertInto(e,t){const i=super.insertInto(e,t);return this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}removeChild(e){const t=super.removeChild(e);return e.stage=null,se.graphicService.onRemove(e),this.addUpdateBoundTag(),t}removeAllChild(){this.forEachChildren((e=>{se.graphicService.onRemove(e)})),super.removeAllChild(),this.addUpdateBoundTag()}setStage(e,t){this.stage!==e&&(this.stage=e,this.layer=t,this.setStageToShadowRoot(e,t),this._onSetStage&&this._onSetStage(this,e,t),se.graphicService.onSetStage(this,e),this.forEachChildren((t=>{t.setStage(e,this.layer)})))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren((e=>{e.isContainer&&e.addUpdateGlobalPositionTag()}))}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren((e=>{e.isContainer&&e.addUpdateGlobalPositionTag()}))}tryUpdateGlobalTransMatrix(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){const e=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),e&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&xl.UPDATE_GLOBAL_MATRIX)}_getChildByName(e,t){return this.find((t=>t.name===e),t)}createOrUpdateChild(e,t,i){let n=this._getChildByName(e);return n?n.setAttributes(t):(n=se.graphicService.creator[i](t),n.name=e,this.add(n)),n}clone(){return new du(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return du.NOWORK_ANIMATE_ATTR}}function uu(e){return new du(e)}du.NOWORK_ANIMATE_ATTR=bd;class pu extends du{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw new Error("\u6682\u4e0d\u652f\u6301")}get dpr(){return this._dpr}constructor(e,t,i,n){var r;super({}),this.stage=e,this.global=t,this.window=i,this.main=n.main,this.layerHandler=n.layerHandler,this.layerHandler.init(this,i,{main:n.main,canvasId:n.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:null!==(r=n.zIndex)&&void 0!==r?r:0}),this.layer=this,this.subLayers=new Map,this.theme=new Dh,this.background="rgba(0, 0, 0, 0)",this.afterDrawCbs=[]}combineSubLayer(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Array.from(this.subLayers.values()).sort(((e,t)=>e.zIndex-t.zIndex));this.layerHandler.merge(t.map((t=>(t.layer.subLayers.size&&t.layer.combineSubLayer(e),t.layer.getNativeHandler())))),e&&t.forEach((e=>{e.group&&(e.group.incremental=0)})),t.forEach((e=>{se.layerService.releaseLayer(this.stage,e.layer)})),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(e,t){super.setStage(e,this)}pick(e,t){throw new Error("\u6682\u4e0d\u652f\u6301")}tryRenderSecondaryLayer(e,t){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach((i=>{i.layer.renderCount=this.renderCount,i.layer.render(e,t)}))}render(e,t){var i;const n=this.stage;this.layerHandler.render([this],{renderService:e.renderService,x:n.x,y:n.y,width:this.viewWidth,height:this.viewHeight,stage:this.stage,layer:this,background:null!==(i=e.background)&&void 0!==i?i:this.background,updateBounds:e.updateBounds},t),this.afterDrawCbs.forEach((e=>e(this))),this.tryRenderSecondaryLayer(e,t)}resize(e,t){this.layerHandler.resize(e,t)}resizeView(e,t){this.layerHandler.resizeView(e,t)}setDpr(e){this.layerHandler.setDpr(e)}afterDraw(e){this.afterDrawCbs.push(e)}startAnimate(e){throw new Error("\u6682\u4e0d\u652f\u6301")}setToFrame(e){throw new Error("\u6682\u4e0d\u652f\u6301")}prepare(e,t){}combineTo(e,t){var i,n,r;this.offscreen&&(this.layerHandler.drawTo(e,[this],Object.assign({background:null!==(i=t.background)&&void 0!==i?i:this.background,renderService:t.renderService,x:null!==(n=t.x)&&void 0!==n?n:this.stage.x,y:null!==(r=t.y)&&void 0!==r?r:this.stage.y,width:this.viewWidth,height:this.viewHeight,stage:this.stage,layer:this},t)),this.afterDrawCbs.forEach((e=>e(this))))}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach((e=>{se.layerService.releaseLayer(this.stage,e.layer)}))}drawTo(e,t){var i,n,r;this.layerHandler.drawTo(e,[this],Object.assign({background:null!==(i=t.background)&&void 0!==i?i:this.background,renderService:t.renderService,x:null!==(n=t.x)&&void 0!==n?n:this.stage.x,y:null!==(r=t.y)&&void 0!==r?r:this.stage.y,width:this.viewWidth,height:this.viewHeight,stage:this.stage,layer:this},t)),this.afterDrawCbs.forEach((e=>e(this)))}}const gu=Symbol.for("TransformUtil"),fu=Symbol.for("GraphicUtil"),mu=Symbol.for("LayerService"),vu=Symbol.for("StaticLayerHandlerContribution"),yu=Symbol.for("DynamicLayerHandlerContribution"),bu=Symbol.for("VirtualLayerHandlerContribution");var _u,xu=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Su=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let wu=_u=class{static GenerateLayerId(){return"".concat(_u.idprefix,"_").concat(_u.prefix_count++)}constructor(){this.layerMap=new Map,this.global=se.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(e){return this.layerMap.get(e)}getRecommendedLayerType(e){return e||(0!==this.staticLayerCountInEnv?"static":0!==this.dynamicLayerCountInEnv?"dynamic":"virtual")}getLayerHandler(e){let t;return t="static"===e?ph.get(vu):"dynamic"===e?ph.get(yu):ph.get(bu),t}createLayer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{main:!1};var i;this.tryInit();let n=this.getRecommendedLayerType(t.layerMode);n=t.main||t.canvasId?"static":n;const r=this.getLayerHandler(n),s=new pu(e,this.global,e.window,Object.assign(Object.assign({main:!1},t),{layerMode:n,canvasId:null!==(i=t.canvasId)&&void 0!==i?i:_u.GenerateLayerId(),layerHandler:r})),a=this.layerMap.get(e)||[];return a.push(s),this.layerMap.set(e,a),this.staticLayerCountInEnv--,s}prepareStageLayer(e){let t;e.forEachChildren((e=>{const i=e.getNativeHandler();"virtual"===i.type?(i.mainHandler=t,t.secondaryHandlers.push(i)):(t=i,t.secondaryHandlers=[])}))}releaseLayer(e,t){t.release();const i=this.layerMap.get(e)||[];this.layerMap.set(e,i.filter((e=>e!==t)))}layerCount(e){return(this.layerMap.get(e)||[]).length}restLayerCount(e){return"browser"===this.global.env?10:0}};wu.idprefix="visactor_layer",wu.prefix_count=0,wu=_u=xu([jo(),Su("design:paramtypes",[])],wu);const Cu=new Oo((e=>{e(qo).to(Jo).inSingletonScope(),e(_h).to(Sh),e(fu).to(Ah).inSingletonScope(),e(gu).to(Oh).inSingletonScope(),e(mu).to(wu).inSingletonScope()})),ku=Symbol.for("IncrementalDrawContribution"),Au=Symbol.for("ArcRender"),Eu=Symbol.for("Arc3dRender"),Tu=Symbol.for("AreaRender"),Ou=Symbol.for("CircleRender"),Pu=Symbol.for("GraphicRender"),Mu=Symbol.for("GroupRender"),Iu=Symbol.for("LineRender"),Ru=Symbol.for("PathRender"),Du=Symbol.for("PolygonRender"),Lu=Symbol.for("RectRender"),ju=Symbol.for("Rect3DRender"),Fu=Symbol.for("SymbolRender"),Bu=Symbol.for("TextRender"),Nu=Symbol.for("RichTextRender"),zu=Symbol.for("Pyramid3dRender"),Hu=Symbol.for("GlyphRender"),Vu=Symbol.for("ImageRender"),Uu=(Symbol.for("RenderSelector"),Symbol.for("DrawContribution"));var Wu=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Gu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ku=function(e,t){return function(i,n){t(i,n,e)}};const Yu=Symbol.for("RenderService");Symbol.for("BeforeRenderConstribution");let Xu=class{constructor(e){this.drawContribution=e}prepare(e){e&&this.renderTreeRoots.forEach((t=>{this._prepare(t,e)}))}_prepare(e,t){e.forEachChildren((e=>{this._prepare(e,t)})),e.update({bounds:t,trans:!0})}prepareRenderList(){}beforeDraw(e){}draw(e){this.drawContribution.draw(this,Object.assign({},this.drawParams))}afterDraw(e){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}render(e,t){this.renderTreeRoots=e,this.drawParams=t;const i=t.updateBounds;this.prepare(i),this.prepareRenderList(),this.beforeDraw(t),this.draw(t),this.afterDraw(t)}};Xu=Wu([jo(),Ku(0,Ho(Uu)),Gu("design:paramtypes",[Object])],Xu);const qu=new Oo((e=>{e(Yu).to(Xu).inSingletonScope()})),Zu=(Symbol.for("GraphicPicker"),Symbol.for("PickerService")),Qu=(Symbol.for("BoundsPicker"),Symbol.for("GlobalPickerService"));Symbol.for("MatrixAllocate"),Symbol.for("Mat4Allocate");class $u{constructor(){this.pools=[]}static identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}allocate(){if(!this.pools.length)return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];const e=this.pools.pop();return $u.identity(e),e}allocateByObj(e){let t;t=this.pools.length?this.pools.pop():[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];for(let i=0;i<t.length;i++)t[i]=e[i];return t}free(e){e&&this.pools.push(e)}get length(){return this.pools.length}release(){this.pools=[]}}const Ju=new class{constructor(){this.pools=[]}allocate(e,t,i,n,r,s){if(!this.pools.length)return new sl(e,t,i,n,r,s);const a=this.pools.pop();return a.a=e,a.b=t,a.c=i,a.d=n,a.e=r,a.f=s,a}allocateByObj(e){if(!this.pools.length)return new sl(e.a,e.b,e.c,e.d,e.e,e.f);const t=this.pools.pop();return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t}free(e){this.pools.push(e)}get length(){return this.pools.length}release(){this.pools=[]}},ep=new $u;var tp=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};const ip=Symbol.for("PickItemInterceptor");let np=class{constructor(){this.order=1}afterPickItem(e,t,i,n,r){return e.attribute.shadowRootIdx>0||!e.attribute.shadowRootIdx?this._pickItem(e,t,i,n,r):null}beforePickItem(e,t,i,n,r){return e.attribute.shadowRootIdx<0?this._pickItem(e,t,i,n,r):null}_pickItem(e,t,i,n,r){if(!e.shadowRoot)return null;const{parentMatrix:s}=r||{};if(!s)return null;const a=t.pickContext;a.highPerformanceSave();const o=e.shadowRoot,l=Ju.allocateByObj(s),c=new ir(l.a*i.x+l.c*i.y+l.e,l.b*i.x+l.d*i.y+l.f),h=t.pickGroup(o,c,l,n);return a.highPerformanceRestore(),h}};np=tp([jo()],np);let rp=class{constructor(){this.order=1}beforePickItem(e,t,i,n,r){const s=e.baseGraphic;if(s&&s.parent){const e=new ir(i.x,i.y),r=t.pickContext;r.highPerformanceSave();const a=s.parent.globalTransMatrix;a.transformPoint(e,e);const o=s.isContainer?t.pickGroup(s,e.clone(),a,n):t.pickItem(s,e.clone(),a,n);return r.highPerformanceRestore(),o}return null}};rp=tp([jo()],rp);let sp=class{constructor(){this.order=1}beforePickItem(e,t,i,n,r){if(!e.in3dMode||n.in3dInterceptor)return null;const s=t.pickContext,a=e.stage;if(!s||!a)return null;if(n.in3dInterceptor=!0,s.save(),this.initCanvasCtx(s),s.camera=a.camera,e.isContainer){let a,o=!1,l=!1;if(e.forEachChildren((e=>(o=e.numberType===Gd,!o))),e.forEachChildren((e=>(l=!!e.findFace,!l))),o){const s=e.getChildren(),o=[...s];o.sort(((e,t)=>{var i,n,r,s;let a=(null!==(n=null!==(i=e.attribute.startAngle)&&void 0!==i?i:0+e.attribute.endAngle)&&void 0!==n?n:0)/2,o=(null!==(s=null!==(r=t.attribute.startAngle)&&void 0!==r?r:0+t.attribute.endAngle)&&void 0!==s?s:0)/2;for(;a<0;)a+=zn;for(;o<0;)o+=zn;return o-a})),o.forEach((e=>{e._next=null,e._prev=null})),e.removeAllChild(),e.update(),o.forEach((t=>{e.appendChild(t)})),n.hack_pieFace="outside",a=t.pickGroup(e,i,r.parentMatrix,n),a.graphic||(n.hack_pieFace="inside",a=t.pickGroup(e,i,r.parentMatrix,n)),a.graphic||(n.hack_pieFace="top",a=t.pickGroup(e,i,r.parentMatrix,n)),e.removeAllChild(),s.forEach((e=>{e._next=null,e._prev=null})),s.forEach((t=>{e.appendChild(t)}))}else if(l){const o=e.getChildren(),l=o.map((e=>({ave_z:e.findFace().vertices.map((t=>{var i;return s.view(t[0],t[1],null!==(i=t[2]+e.attribute.z)&&void 0!==i?i:0)[2]})).reduce(((e,t)=>e+t),0),g:e})));l.sort(((e,t)=>t.ave_z-e.ave_z)),e.removeAllChild(),l.forEach((e=>{e.g._next=null,e.g._prev=null})),e.update(),l.forEach((t=>{e.add(t.g)})),a=t.pickGroup(e,i,r.parentMatrix,n),e.removeAllChild(),o.forEach((e=>{e._next=null,e._prev=null})),e.update(),o.forEach((t=>{e.add(t)}))}else a=t.pickGroup(e,i,r.parentMatrix,n);return s.camera=null,n.in3dInterceptor=!1,s.restore(),a}return s.restore(),null}initCanvasCtx(e){e.setTransformForCurrent()}};sp=tp([jo()],sp);const ap=new Oo(((e,t,i)=>{i(Zu)||(e(Qu).toSelf(),e(Zu).toService(Qu)),e(sp).toSelf().inSingletonScope(),e(ip).toService(sp),e(np).toSelf().inSingletonScope(),e(ip).toService(np),e(rp).toSelf().inSingletonScope(),e(ip).toService(rp),Go(e,ip)}));class op{updateBounds(e,t,i,n){const{outerBorder:r,shadowBlur:s=t.shadowBlur}=e;if(r){const e=t.outerBorder,{distance:n=e.distance,lineWidth:a=e.lineWidth}=r;i.expand(n+(s+a)/2)}return i}}class lp extends op{updateBounds(e,t,i,n){const{outerBorder:r,shadowBlur:s=t.shadowBlur,strokeBoundsBuffer:a=t.strokeBoundsBuffer}=e;if(r){const e=t.outerBorder,{distance:n=e.distance,lineWidth:o=e.lineWidth}=r;jd(i,n+(s+o)/2,!0,a)}return i}}var cp=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},hp=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},dp=function(e,t){return function(i,n){t(i,n,e)}};function up(e,t,i){const n=Math.sin(i),r=Math.cos(i),s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=t[9],d=t[10],u=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*r+c*n,e[5]=a*r+h*n,e[6]=o*r+d*n,e[7]=l*r+u*n,e[8]=c*r-s*n,e[9]=h*r-a*n,e[10]=d*r-o*n,e[11]=u*r-l*n,e}function pp(e,t,i){const n=Math.sin(i),r=Math.cos(i),s=t[0],a=t[1],o=t[2],l=t[3],c=t[8],h=t[9],d=t[10],u=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*r-c*n,e[1]=a*r-h*n,e[2]=o*r-d*n,e[3]=l*r-u*n,e[8]=s*n+c*r,e[9]=a*n+h*r,e[10]=o*n+d*r,e[11]=l*n+u*r,e}function gp(e,t,i){const n=i[0],r=i[1],s=i[2];let a,o,l,c,h,d,u,p,g,f,m,v;return t===e?(e[12]=t[0]*n+t[4]*r+t[8]*s+t[12],e[13]=t[1]*n+t[5]*r+t[9]*s+t[13],e[14]=t[2]*n+t[6]*r+t[10]*s+t[14],e[15]=t[3]*n+t[7]*r+t[11]*s+t[15]):(a=t[0],o=t[1],l=t[2],c=t[3],h=t[4],d=t[5],u=t[6],p=t[7],g=t[8],f=t[9],m=t[10],v=t[11],e[0]=a,e[1]=o,e[2]=l,e[3]=c,e[4]=h,e[5]=d,e[6]=u,e[7]=p,e[8]=g,e[9]=f,e[10]=m,e[11]=v,e[12]=a*n+h*r+g*s+t[12],e[13]=o*n+d*r+f*s+t[13],e[14]=l*n+u*r+m*s+t[14],e[15]=c*n+p*r+v*s+t[15]),e}function fp(e,t){e[0]=t.a,e[1]=t.b,e[2]=0,e[3]=0,e[4]=t.c,e[5]=t.d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t.e,e[13]=t.f,e[14]=0,e[15]=1}function mp(e,t,i){const n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=t[6],h=t[7],d=t[8],u=t[9],p=t[10],g=t[11],f=t[12],m=t[13],v=t[14],y=t[15];let b=i[0],_=i[1],x=i[2],S=i[3];return e[0]=b*n+_*o+x*d+S*f,e[1]=b*r+_*l+x*u+S*m,e[2]=b*s+_*c+x*p+S*v,e[3]=b*a+_*h+x*g+S*y,b=i[4],_=i[5],x=i[6],S=i[7],e[4]=b*n+_*o+x*d+S*f,e[5]=b*r+_*l+x*u+S*m,e[6]=b*s+_*c+x*p+S*v,e[7]=b*a+_*h+x*g+S*y,b=i[8],_=i[9],x=i[10],S=i[11],e[8]=b*n+_*o+x*d+S*f,e[9]=b*r+_*l+x*u+S*m,e[10]=b*s+_*c+x*p+S*v,e[11]=b*a+_*h+x*g+S*y,b=i[12],_=i[13],x=i[14],S=i[15],e[12]=b*n+_*o+x*d+S*f,e[13]=b*r+_*l+x*u+S*m,e[14]=b*s+_*c+x*p+S*v,e[15]=b*a+_*h+x*g+S*y,e}function vp(e,t,i){var n;const{x:r=i.x,y:s=i.y,z:a=i.z,dx:o=i.dx,dy:l=i.dy,dz:c=i.dz,scaleX:h=i.scaleX,scaleY:d=i.scaleY,scaleZ:u=i.scaleZ,alpha:p=i.alpha,beta:g=i.beta,angle:f=i.angle,anchor3d:m=t.attribute.anchor,anchor:v}=t.attribute,y=[0,0,0];if(m){if("string"==typeof m[0]){const e=parseFloat(m[0])/100,i=t.AABBBounds;y[0]=i.x1+(i.x2-i.x1)*e}else y[0]=m[0];if("string"==typeof m[1]){const e=parseFloat(m[1])/100,i=t.AABBBounds;y[1]=i.x1+(i.x2-i.x1)*e}else y[1]=m[1];y[2]=null!==(n=m[2])&&void 0!==n?n:0}if(function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e),gp(e,e,[r+o,s+l,a+c]),gp(e,e,[y[0],y[1],y[2]]),up(e,e,g),pp(e,e,p),gp(e,e,[-y[0],-y[1],y[2]]),function(e,t,i){const n=i[0],r=i[1],s=i[2];e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}(e,e,[h,d,u]),f){const i=ep.allocate(),n=[0,0];if(v){if("string"==typeof m[0]){const e=parseFloat(m[0])/100,i=t.AABBBounds;n[0]=i.x1+(i.x2-i.x1)*e}else n[0]=m[0];if("string"==typeof m[1]){const e=parseFloat(m[1])/100,i=t.AABBBounds;n[1]=i.x1+(i.x2-i.x1)*e}else n[1]=m[1]}gp(i,i,[n[0],n[1],0]),function(e,t,i){const n=Math.sin(i),r=Math.cos(i),s=t[0],a=t[1],o=t[2],l=t[3],c=t[4],h=t[5],d=t[6],u=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*r+c*n,e[1]=a*r+h*n,e[2]=o*r+d*n,e[3]=l*r+u*n,e[4]=c*r-s*n,e[5]=h*r-a*n,e[6]=d*r-o*n,e[7]=u*r-l*n}(i,i,f),gp(i,i,[-n[0],-n[1],0]),mp(e,e,i)}}let yp=class{constructor(e){this.creator=e,this.hooks={onAttributeUpdate:new Yo(["graphic"]),onSetStage:new Yo(["graphic","stage"]),onRemove:new Yo(["graphic"]),onRelease:new Yo(["graphic"]),onAddIncremental:new Yo(["graphic","group","stage"]),onClearIncremental:new Yo(["graphic","group","stage"]),beforeUpdateAABBBounds:new Yo(["graphic","stage","willUpdate","aabbBounds"]),afterUpdateAABBBounds:new Yo(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"])},this.tempAABBBounds1=new hl,this.tempAABBBounds2=new hl,this._rectBoundsContribitions=[new op],this._symbolBoundsContribitions=[new lp],this._circleBoundsContribitions=[new op],this._arcBoundsContribitions=[new op],this._pathBoundsContribitions=[new op]}onAttributeUpdate(e){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(e)}onSetStage(e,t){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(e,t)}onRemove(e){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(e)}onRelease(e){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(e)}onAddIncremental(e,t,i){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(e,t,i)}onClearIncremental(e,t){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(e,t)}beforeUpdateAABBBounds(e,t,i,n){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(e,t,i,n)}afterUpdateAABBBounds(e,t,i,n,r){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(e,t,i,n,r)}updatePathProxyAABBBounds(e,t){const i="function"==typeof t.pathProxy?t.pathProxy(t.attribute):t.pathProxy;if(!i)return!1;const n=new ol(e);return Dl(i.commandList,n,0,0),!0}updateRectAABBBounds(e,t,i,n){if(!this._validCheck(e,t,i,n))return i;if(!this.updatePathProxyAABBBounds(i,n)){let{width:t,height:n}=e;const{x1:r,y1:s,x:a,y:o}=e;t=null!=t?t:r-a,n=null!=n?n:s-o,i.set(0,0,t||0,n||0)}const r=this.tempAABBBounds1,s=this.tempAABBBounds2;return r.setValue(i.x1,i.y1,i.x2,i.y2),s.setValue(i.x1,i.y1,i.x2,i.y2),this._rectBoundsContribitions.length&&this._rectBoundsContribitions.forEach((a=>{a.updateBounds(e,t,r,n),i.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2)})),this.transformAABBBounds(e,i,t,!1,n),i}updateGroupAABBBounds(e,t,i,n){const{width:r,height:s,path:a,clip:o=t.clip}=e;a&&a.length?a.forEach((e=>{i.union(e.AABBBounds)})):null!=r&&null!=s&&i.set(0,0,r,s),o||n.forEachChildren((e=>{i.union(e.AABBBounds)}));const l=this.tempAABBBounds1,c=this.tempAABBBounds2;return l.setValue(i.x1,i.y1,i.x2,i.y2),c.setValue(i.x1,i.y1,i.x2,i.y2),this.transformAABBBounds(e,i,t,!1,n),i}updateGlyphAABBBounds(e,t,i,n){return this._validCheck(e,t,i,n)?(n.getSubGraphic().forEach((e=>{i.union(e.AABBBounds)})),i):i}updateRichTextAABBBounds(e,t,i,n){if(!this._validCheck(e,t,i,n))return i;if(!n)return i;const{width:r=t.width,height:s=t.height,maxWidth:a=t.maxWidth,maxHeight:o=t.maxHeight,textAlign:l=t.textAlign,textBaseline:c=t.textBaseline}=e;if(r>0&&s>0)i.set(0,0,r,s);else{const e=n.getFrameCache(),{width:t,height:l}=e.getActualSize();let c=r||t||0,h=s||l||0;h="number"==typeof o&&h>o?o:h||0,c="number"==typeof a&&c>a?a:c||0,i.set(0,0,c,h)}let h=0;switch(c){case"top":h=0;break;case"middle":h=-i.height()/2;break;case"bottom":h=-i.height()}let d=0;switch(l){case"left":d=0;break;case"center":d=-i.width()/2;break;case"right":d=-i.width()}i.translate(d,h);const u=this.tempAABBBounds1,p=this.tempAABBBounds2;return u.setValue(i.x1,i.y1,i.x2,i.y2),p.setValue(i.x1,i.y1,i.x2,i.y2),this.transformAABBBounds(e,i,t,!1,n),i}updateTextAABBBounds(e,t,i,n){if(!this._validCheck(e,t,i,n))return i;if(!n)return i;const{text:r=t.text}=n.attribute;Array.isArray(r)?n.updateMultilineAABBBounds(r):n.updateSingallineAABBBounds(r);const s=this.tempAABBBounds1,a=this.tempAABBBounds2;s.setValue(i.x1,i.y1,i.x2,i.y2),a.setValue(i.x1,i.y1,i.x2,i.y2);const{scaleX:o=t.scaleX,scaleY:l=t.scaleY,shadowBlur:c=t.shadowBlur,strokeBoundsBuffer:h=t.strokeBoundsBuffer}=e;if(c){jd(s,c/Math.abs(o+l),!0,h),i.union(s)}return this.combindShadowAABBBounds(i,n),ll(i,i,n.transMatrix),i}updatePathAABBBounds(e,t,i,n){if(!this._validCheck(e,t,i,n))return i;this.updatePathProxyAABBBounds(i,n)||this.updatePathAABBBoundsImprecise(e,t,i,n);const r=this.tempAABBBounds1,s=this.tempAABBBounds2;r.setValue(i.x1,i.y1,i.x2,i.y2),s.setValue(i.x1,i.y1,i.x2,i.y2),this._pathBoundsContribitions.length&&this._pathBoundsContribitions.forEach((a=>{a.updateBounds(e,t,r,n),i.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2)}));const{lineJoin:a=t.lineJoin}=e;return this.transformAABBBounds(e,i,t,"miter"===a,n),i}updatePathAABBBoundsImprecise(e,t,i,n){if(!n)return i;const r=n.getParsedPathShape();return i.union(r.getBounds()),i}updatePyramid3dAABBBounds(e,t,i,n){if(!n)return i;const r=n.stage;if(!r||!r.camera)return i;n.findFace().vertices.forEach((e=>{const t=e[0],n=e[1];i.add(t,n)}));const s=this.tempAABBBounds1,a=this.tempAABBBounds2;return s.setValue(i.x1,i.y1,i.x2,i.y2),a.setValue(i.x1,i.y1,i.x2,i.y2),this.transformAABBBounds(e,i,t,!1,n),i}updateArc3dAABBBounds(e,t,i,n){if(!n)return i;const r=n.stage;if(!r||!r.camera)return i;const{outerRadius:s=t.outerRadius,height:a=0}=e,o=s+a;i.setValue(-o,-o,o,o);const l=this.tempAABBBounds1,c=this.tempAABBBounds2;return l.setValue(i.x1,i.y1,i.x2,i.y2),c.setValue(i.x1,i.y1,i.x2,i.y2),this.transformAABBBounds(e,i,t,!1,n),i}updatePolygonAABBBounds(e,t,i,n){if(!this._validCheck(e,t,i,n))return i;this.updatePathProxyAABBBounds(i,n)||this.updatePolygonAABBBoundsImprecise(e,t,i,n);const r=this.tempAABBBounds1,s=this.tempAABBBounds2;r.setValue(i.x1,i.y1,i.x2,i.y2),s.setValue(i.x1,i.y1,i.x2,i.y2);const{lineJoin:a=t.lineJoin}=e;return this.transformAABBBounds(e,i,t,"miter"===a,n),i}updatePolygonAABBBoundsImprecise(e,t,i,n){const{points:r=t.points}=e;return r.forEach((e=>{i.add(e.x,e.y)})),i}updateLineAABBBounds(e,t,i,n){if(!this._validCheck(e,t,i,n))return i;this.updatePathProxyAABBBounds(i,n)||(e.segments?this.updateLineAABBBoundsBySegments(e,t,i,n):this.updateLineAABBBoundsByPoints(e,t,i,n));const r=this.tempAABBBounds1,s=this.tempAABBBounds2;r.setValue(i.x1,i.y1,i.x2,i.y2),s.setValue(i.x1,i.y1,i.x2,i.y2);const{lineJoin:a=t.lineJoin}=e;return this.transformAABBBounds(e,i,t,"miter"===a,n),i}updateLineAABBBoundsByPoints(e,t,i,n){const{points:r=t.points}=e,s=i;return r.forEach((e=>{s.add(e.x,e.y)})),s}updateLineAABBBoundsBySegments(e,t,i,n){const{segments:r=t.segments}=e,s=i;return r.forEach((e=>{e.points.forEach((e=>{s.add(e.x,e.y)}))})),s}updateAreaAABBBounds(e,t,i,n){if(!this._validCheck(e,t,i,n))return i;this.updatePathProxyAABBBounds(i,n)||(e.segments?this.updateAreaAABBBoundsBySegments(e,t,i,n):this.updateAreaAABBBoundsByPoints(e,t,i,n));const r=this.tempAABBBounds1,s=this.tempAABBBounds2;r.setValue(i.x1,i.y1,i.x2,i.y2),s.setValue(i.x1,i.y1,i.x2,i.y2);const{lineJoin:a=t.lineJoin}=e;return this.transformAABBBounds(e,i,t,"miter"===a,n),i}updateAreaAABBBoundsByPoints(e,t,i,n){const{points:r=t.points}=e,s=i;return r.forEach((e=>{var t,i;s.add(e.x,e.y),s.add(null!==(t=e.x1)&&void 0!==t?t:e.x,null!==(i=e.y1)&&void 0!==i?i:e.y)})),s}updateAreaAABBBoundsBySegments(e,t,i,n){const{segments:r=t.segments}=e,s=i;return r.forEach((e=>{e.points.forEach((e=>{var t,i;s.add(e.x,e.y),s.add(null!==(t=e.x1)&&void 0!==t?t:e.x,null!==(i=e.y1)&&void 0!==i?i:e.y)}))})),s}updateCircleAABBBounds(e,t,i,n,r){if(!this._validCheck(e,t,i,r))return i;this.updatePathProxyAABBBounds(i,r)||(n?this.updateCircleAABBBoundsImprecise(e,t,i,r):this.updateCircleAABBBoundsAccurate(e,t,i,r));const s=this.tempAABBBounds1,a=this.tempAABBBounds2;return s.setValue(i.x1,i.y1,i.x2,i.y2),a.setValue(i.x1,i.y1,i.x2,i.y2),this._circleBoundsContribitions.length&&this._circleBoundsContribitions.forEach((n=>{n.updateBounds(e,t,s,r),i.union(s),s.setValue(a.x1,a.y1,a.x2,a.y2)})),this.transformAABBBounds(e,i,t,!1,r),i}updateCircleAABBBoundsImprecise(e,t,i,n){const{radius:r=t.radius}=e;return i.set(-r,-r,r,r),i}updateCircleAABBBoundsAccurate(e,t,i,n){const{startAngle:r=t.startAngle,endAngle:s=t.endAngle,radius:a=t.radius}=e;return s-r>zn-jn?i.set(-a,-a,a,a):Ed(r,s,a,i),i}updateArcAABBBounds(e,t,i,n,r){if(!this._validCheck(e,t,i,r))return i;this.updatePathProxyAABBBounds(i,r)||(n?this.updateArcAABBBoundsImprecise(e,t,i,r):this.updateArcAABBBoundsAccurate(e,t,i,r));const s=this.tempAABBBounds1,a=this.tempAABBBounds2;s.setValue(i.x1,i.y1,i.x2,i.y2),a.setValue(i.x1,i.y1,i.x2,i.y2),this._arcBoundsContribitions.length&&this._arcBoundsContribitions.forEach((n=>{n.updateBounds(e,t,s,r),i.union(s),s.setValue(a.x1,a.y1,a.x2,a.y2)}));const{lineJoin:o=t.lineJoin}=e;return this.transformAABBBounds(e,i,t,"miter"===o,r),i}updateArcAABBBoundsImprecise(e,t,i,n){const{innerRadius:r=t.innerRadius}=e;let{outerRadius:s=t.outerRadius}=e;return s<r&&(s=r),i.set(-s,-s,s,s),i}updateArcAABBBoundsAccurate(e,t,i,n){let{outerRadius:r=t.outerRadius,innerRadius:s=t.innerRadius}=e;if(r<s){const e=r;r=s,s=e}let{endAngle:a=t.endAngle,startAngle:o=t.startAngle}=e;if(o>a){const e=o;o=a,a=e}return r<=jn?i.set(0,0,0,0):Math.abs(a-o)>zn-jn?i.set(-r,-r,r,r):(Ed(o,a,r,i),Ed(o,a,s,i)),i}updateSymbolAABBBounds(e,t,i,n,r){if(!this._validCheck(e,t,i,r))return i;this.updatePathProxyAABBBounds(i,r)||(n?this.updateSymbolAABBBoundsImprecise(e,t,i,r):this.updateSymbolAABBBoundsAccurate(e,t,i,r));const s=this.tempAABBBounds1,a=this.tempAABBBounds2;s.setValue(i.x1,i.y1,i.x2,i.y2),a.setValue(i.x1,i.y1,i.x2,i.y2),this._symbolBoundsContribitions.length&&this._symbolBoundsContribitions.forEach((n=>{n.updateBounds(e,t,s,r),i.union(s),s.setValue(a.x1,a.y1,a.x2,a.y2)}));const{lineJoin:o=t.lineJoin}=e;return this.transformAABBBounds(e,i,t,"miter"===o,r),i}updateSymbolAABBBoundsImprecise(e,t,i,n){const{size:r=t.size}=e;if(v(r))i.set(-r[0]/2,-r[1]/2,r[0]/2,r[1]/2);else{const e=r/2;i.set(-e,-e,e,e)}return i}updateSymbolAABBBoundsAccurate(e,t,i,n){if(!n)return i;const{size:r=t.size}=e;return n.getParsedPath().bounds(r,i),i}updateImageAABBBounds(e,t,i,n){if(!this._validCheck(e,t,i,n))return i;if(!this.updatePathProxyAABBBounds(i,n)){const{width:n=t.width,height:r=t.height}=e;i.set(0,0,n,r)}const r=this.tempAABBBounds1,s=this.tempAABBBounds2;return r.setValue(i.x1,i.y1,i.x2,i.y2),s.setValue(i.x1,i.y1,i.x2,i.y2),this.transformAABBBounds(e,i,t,!1,n),i}combindShadowAABBBounds(e,t){if(t&&t.shadowRoot){const i=t.shadowRoot.AABBBounds;e.union(i)}}transformAABBBounds(e,t,i,n,r){const{scaleX:s=i.scaleX,scaleY:a=i.scaleY,stroke:o=i.stroke,shadowBlur:l=i.shadowBlur,lineWidth:c=i.lineWidth,pickStrokeBuffer:h=i.pickStrokeBuffer,strokeBoundsBuffer:d=i.strokeBoundsBuffer}=e,u=this.tempAABBBounds1,p=this.tempAABBBounds2;if(o&&c){jd(u,(c+h)/Math.abs(s+a),n,d),t.union(u),u.setValue(p.x1,p.y1,p.x2,p.y2)}if(l){const{shadowOffsetX:n=i.shadowOffsetX,shadowOffsetY:r=i.shadowOffsetY}=e;jd(u,l/Math.abs(s+a)*2,!1,d+1),u.translate(n,r),t.union(u)}this.combindShadowAABBBounds(t,r);let g=!0;const f=r.transMatrix;r&&r.isContainer&&(g=!(1===f.a&&0===f.b&&0===f.c&&1===f.d&&0===f.e&&0===f.f)),g&&ll(t,t,f)}_validCheck(e,t,i,n){if(!n)return!0;if(!n.valid)return i.clear(),!1;const{visible:r=t.visible}=e;return!!r||(i.clear(),!1)}};yp=cp([jo(),dp(0,Ho(ou)),hp("design:paramtypes",[Object])],yp);const bp=new class{constructor(){this.store=new Map}RegisterGraphicCreator(e,t){this.store.set(e,t),this[e]=t}CreateGraphic(e,t){const i=this.store.get(e);return i?i(t):null}},_p=new Oo((e=>{e(au).to(yp).inSingletonScope(),e(ou).toConstantValue(bp)})),xp=Symbol.for("AutoEnablePlugins"),Sp=Symbol.for("PluginService");var wp=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Cp=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},kp=function(e,t){return function(i,n){t(i,n,e)}};let Ap=class{constructor(e){this.autoEnablePlugins=e,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}active(e,t){this.stage=e,this.actived=!0;const{pluginList:i}=t;i&&ph.isBound(xp)&&this.autoEnablePlugins.getContributions().forEach((e=>{i.includes(e.name)&&this.register(e)}))}findPluginsByName(e){const t=[];return this.onStartupFinishedPlugin.forEach((i=>{i.name===e&&t.push(i)})),this.onRegisterPlugin.forEach((i=>{i.name===e&&t.push(i)})),t}register(e){"onStartupFinished"===e.activeEvent?this.onStartupFinishedPlugin.push(e):"onRegister"===e.activeEvent&&(this.onRegisterPlugin.push(e),e.activate(this))}unRegister(e){"onStartupFinished"===e.activeEvent?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(e),1):"onRegister"===e.activeEvent&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(e),1),e.deactivate(this)}release(){this.onStartupFinishedPlugin.forEach((e=>{e.deactivate(this)})),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach((e=>{e.deactivate(this)})),this.onRegisterPlugin=[]}};Ap=wp([jo(),kp(0,Ho(Uo)),kp(0,Vo(xp)),Cp("design:paramtypes",[Object])],Ap);const Ep=new Oo((e=>{e(Sp).to(Ap),function(e,t){e(Uo).toDynamicValue((e=>{let{container:i}=e;return new Wo(t,i)})).whenTargetNamed(t)}(e,xp)})),Tp=new Oo((e=>{Go(e,Xo)})),Op=new Oo((e=>{e(qc).to(Zc).inSingletonScope(),Go(e,qc)}));var Pp=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Mp=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ip=class{constructor(){this.type="static",this.offscreen=!1,this.global=se.global}setDpr(e){this.canvas.dpr=e}init(e,t,i){if(this.layer=e,this.window=t,i.main)this.main=!0,this.context=t.getContext(),this.canvas=this.context.getCanvas();else{let e;this.main=!1,i.canvasId&&(e=this.global.getElementById(i.canvasId)),e||(e=this.global.createCanvas({width:t.width,height:t.height})),e.style&&(e.style["pointer-events"]="none");const n=t.getContext().getCanvas().nativeCanvas,r=mh({nativeCanvas:e,width:t.width,height:t.height,dpr:t.dpr,id:i.canvasId,canvasControled:!0,container:t.getContainer(),x:n.offsetLeft,y:n.offsetTop});r.applyPosition(),this.canvas=r,this.context=r.getContext()}}resize(e,t){this.canvas.resize(e,t)}resizeView(e,t){}render(e,t,i){var n;if(!this.main){const e=this.window.getContext().getCanvas().nativeCanvas;!e||this.canvas.x===e.offsetLeft&&this.canvas.y===e.offsetTop||(this.canvas.x=e.offsetLeft,this.canvas.y=e.offsetTop,this.canvas.applyPosition())}t.renderService.render(e,Object.assign(Object.assign({context:this.context,clear:null!==(n=t.background)&&void 0!==n?n:"#ffffff"},t),i))}merge(e){e.forEach((e=>{const t=e.getContext().canvas.nativeCanvas;this.context.drawImage(t,0,0)}))}prepare(e,t){}drawTo(e,t,i){var n;const r=e.getContext();i.renderService.render(t,Object.assign(Object.assign({context:r},i),{clear:i.clear?null!==(n=i.background)&&void 0!==n?n:"#fff":void 0}))}getContext(){return this.context}release(){this.canvas.release()}};Ip=Pp([jo(),Mp("design:paramtypes",[])],Ip);var Rp=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Dp=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Lp=class{constructor(){this.offscreen=!1,this.type="virtual",this.global=se.global}setDpr(e){}init(e,t,i){if(this.layer=e,this.window=t,i.main)throw new Error("virtual layer\u4e0d\u80fd\u4f5c\u4e3amain layer");this.main=!1,this.canvas=null,this.context=null}resize(e,t){}resizeView(e,t){}render(e,t,i){this.mainHandler.render(e,t,Object.assign(Object.assign({},i),{clear:!1}))}merge(e){}prepare(e,t){}drawTo(e,t,i){var n;const r=e.getContext();i.renderService.render(t,Object.assign(Object.assign({context:r},i),{clear:i.clear?null!==(n=i.background)&&void 0!==n?n:"#fff":void 0}))}getContext(){return null}release(){}};Lp=Rp([jo(),Dp("design:paramtypes",[])],Lp);var jp=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Fp=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Bp=class{constructor(){this.offscreen=!0,this.type="dynamic",this.global=se.global}setDpr(e){this.canvas.dpr=e}init(e,t,i){this.layer=e;const n=mh({nativeCanvas:this.global.createOffscreenCanvas({width:i.width,height:i.height,dpr:t.dpr}),width:i.width,height:i.height,dpr:t.dpr,canvasControled:!0});this.canvas=n,this.context=n.getContext()}resize(e,t){this.canvas.resize(e,t)}resizeView(e,t){this.canvas.resize(e,t)}render(e,t){var i;t.renderService.render(e,Object.assign(Object.assign({context:this.context},t),{x:0,y:0,clear:null!==(i=t.background)&&void 0!==i?i:"#ffffff"}))}prepare(e,t){}release(){this.canvas.release()}getContext(){return this.context}drawTo(e,t,i){const n=e.getContext(),r=e.dpr,{x:s=0,y:a=0,width:o=this.layer.viewWidth,height:l=this.layer.viewHeight}=i;n.nativeContext.save(),n.nativeContext.setTransform(r,0,0,r,0,0),i.clear&&n.clearRect(s,a,o,l),n.drawImage(this.canvas.nativeCanvas,0,0,this.canvas.width,this.canvas.height,s,a,o,l),n.nativeContext.restore()}merge(e){}};Bp=jp([jo(),Fp("design:paramtypes",[])],Bp);const Np=new Oo((e=>{e(Ip).toSelf(),e(Bp).toSelf(),e(Lp).toSelf(),e(vu).toService(Ip),e(yu).toService(Bp),e(bu).toService(Lp)}));const zp=zo(Io);var Hp=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};function Vp(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s={},a=[];let o=!1;if(r)o=!0;else{let i;e.forEachChildren(((e,n)=>{const{zIndex:r=t}=e.attribute;if(0===n)i=r;else if(i!==r)return o=!0,!0;return!1}),n)}if(o){e.forEachChildren((e=>{const{zIndex:i=t}=e.attribute;s[i]?s[i].push(e):(s[i]=[e],a.push(i))}),n),a.sort(((e,t)=>n?t-e:e-t));let o=!1;for(let e=0;e<a.length&&!o;e++){const t=a[e],l=s[t];r&&l.sort(((e,t)=>{var i,r;return(n?-1:1)*((null!==(i=t.attribute.z)&&void 0!==i?i:0)-(null!==(r=e.attribute.z)&&void 0!==r?r:0))}));for(let e=0;e<l.length;e++)if(i(l[e],e)){o=!0;break}}}else e.forEachChildren(i,n)}function Up(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Hp(this,void 0,void 0,(function*(){yield e.forEachChildrenAsync(i,n)}))}function Wp(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},s=[];let a=!1;e.forEachChildren(((e,t)=>{const{zIndex:n=i}=e.attribute;if(0===t);else if(void 0!==n)return a=!0,!0;return!1}),n);let o=null,l=!1;if(a){e.forEachChildren((e=>{const{zIndex:t=i}=e.attribute;r[t]?r[t].push(e):(r[t]=[e],s.push(t))}),n),s.sort(((e,t)=>n?t-e:e-t));let a=!1;for(let e=0;e<s.length&&!a;e++){const i=s[e],n=r[i];for(let e=0;e<n.length;e++){if(l){a=!0,o=n[e];break}n[e]._uid!==t||(l=!0)}}}else e.forEachChildren((e=>l?(o=e,!0):(e._uid===t&&(l=!0),!1)),n);return o}function Gp(e,t,i){e[0]=t[0]-i[0],e[1]=t[1]-i[1]}let Kp,Yp,Xp,qp,Zp,Qp,$p,Jp;function eg(e,t,i,n){let r,s=e[0],a=t[0],o=i[0],l=n[0];return a<s&&(r=a,a=s,s=r),l<o&&(r=l,l=o,o=r),!(a<o||l<s)&&(s=e[1],a=t[1],o=i[1],l=n[1],a<s&&(r=a,a=s,s=r),l<o&&(r=l,l=o,o=r),!(a<o||l<s))}function tg(e,t,i,n){if(!eg(e,t,i,n))return!1;const r=[0,0],s=[0,0],a=[0,0];if(Gp(r,t,e),Gp(s,n,i),function(e,t){return Hn(e[0]-t[0])+Hn(e[1]-t[1])<1e-12}(r,s))return!0;Gp(a,i,e);const o=$n(a,s)/$n(r,s);return o>=0&&o<=1&&[e[0]+r[0]*o,e[1]+r[1]*o]}function ig(e,t,i){return null===e?t:null===t?e:(Kp=e.x1,Yp=e.x2,Xp=e.y1,qp=e.y2,Zp=t.x1,Qp=t.x2,$p=t.y1,Jp=t.y2,i&&(Kp>Yp&&([Kp,Yp]=[Yp,Kp]),Xp>qp&&([Xp,qp]=[qp,Xp]),Zp>Qp&&([Zp,Qp]=[Qp,Zp]),$p>Jp&&([$p,Jp]=[Jp,$p])),Kp>=Qp||Yp<=Zp||Xp>=Jp||qp<=$p?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(Kp,Zp),y1:Math.max(Xp,$p),x2:Math.min(Yp,Qp),y2:Math.min(qp,Jp)})}var ng;function rg(e,t,i){return!e||!t||(i?(Kp=e.x1,Yp=e.x2,Xp=e.y1,qp=e.y2,Zp=t.x1,Qp=t.x2,$p=t.y1,Jp=t.y2,Kp>Yp&&([Kp,Yp]=[Yp,Kp]),Xp>qp&&([Xp,qp]=[qp,Xp]),Zp>Qp&&([Zp,Qp]=[Qp,Zp]),$p>Jp&&([$p,Jp]=[Jp,$p]),!(Kp>Qp||Yp<Zp||Xp>Jp||qp<$p)):!(e.x1>t.x2||e.x2<t.x1||e.y1>t.y2||e.y2<t.y1))}function sg(e,t,i){return!t||(i?(Kp=t.x1,Yp=t.x2,Xp=t.y1,qp=t.y2,Kp>Yp&&([Kp,Yp]=[Yp,Kp]),Xp>qp&&([Xp,qp]=[qp,Xp]),e.x>=Kp&&e.x<=Yp&&e.y>=Xp&&e.y<=qp):e.x>=t.x1&&e.x<=t.x2&&e.y>=t.y1&&e.y<=t.y2)}function ag(e,t){return Math.abs(t[0]*e[0]+t[1]*e[1])}function og(e,t){let{x:i,y:n}=e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return{x:(i-r.x)*Math.cos(t)+(n-r.y)*Math.sin(t)+r.x,y:(i-r.x)*Math.sin(t)+(r.y-n)*Math.cos(t)+r.y}}function lg(e){return e/180*Math.PI}function cg(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}function hg(e,t){const i=t?e.angle:lg(e.angle),n=cg(e);return[og({x:e.x1,y:e.y1},i,n),og({x:e.x2,y:e.y1},i,n),og({x:e.x2,y:e.y2},i,n),og({x:e.x1,y:e.y2},i,n)]}!function(e){e[e.NONE=0]="NONE",e[e.BBOX1=1]="BBOX1",e[e.BBOX2=2]="BBOX2"}(ng||(ng={}));var dg=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},ug=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const pg=Symbol.for("DrawItemInterceptor"),gg=new hl;class fg{constructor(){this.order=1}afterDrawItem(e,t,i,n,r){return(e.attribute.shadowRootIdx>0||!e.attribute.shadowRootIdx)&&this.drawItem(e,t,i,n,r),!1}beforeDrawItem(e,t,i,n,r){return e.attribute.shadowRootIdx<0&&this.drawItem(e,t,i,n,r),!1}drawItem(e,t,i,n,r){if(!e.shadowRoot)return!1;const{context:s}=i;if(s.highPerformanceSave(),s.transformFromMatrix(e.transMatrix,!0),n.dirtyBounds&&n.backupDirtyBounds){gg.copy(n.dirtyBounds);const t=e.globalTransMatrix.getInverse();n.dirtyBounds.copy(n.backupDirtyBounds).transformWithMatrix(t)}return n.renderGroup(e.shadowRoot,i,e.parent.globalTransMatrix),s.highPerformanceRestore(),n.dirtyBounds&&n.backupDirtyBounds&&n.dirtyBounds.copy(gg),!0}}class mg{constructor(){this.order=1}afterDrawItem(e,t,i,n,r){return e.attribute._debug_bounds&&this.drawItem(e,t,i,n,r),!1}drawItem(e,t,i,n,r){if(!e.attribute._debug_bounds)return!1;const{context:s}=i;s.highPerformanceSave(),e.parent&&s.setTransformFromMatrix(e.parent.globalTransMatrix,!0),e.glyphHost&&e.glyphHost.parent&&s.setTransformFromMatrix(e.glyphHost.parent.globalTransMatrix,!0);const a=e.AABBBounds;return!0!==e.attribute._debug_bounds&&e.attribute._debug_bounds(s,e),s.strokeRect(a.x1,a.y1,a.width(),a.height()),s.highPerformanceRestore(),!0}}let vg=class{constructor(){this.order=1,this.interceptors=[new fg,new bg,new yg,new mg]}afterDrawItem(e,t,i,n,r){for(let s=0;s<this.interceptors.length;s++)if(this.interceptors[s].afterDrawItem&&this.interceptors[s].afterDrawItem(e,t,i,n,r))return!0;return!1}beforeDrawItem(e,t,i,n,r){if((!e.in3dMode||i.in3dInterceptor)&&!e.shadowRoot&&!(e.baseGraphic||e.attribute.globalZIndex||e.interactiveGraphic))return!1;for(let s=0;s<this.interceptors.length;s++)if(this.interceptors[s].beforeDrawItem&&this.interceptors[s].beforeDrawItem(e,t,i,n,r))return!0;return!1}};vg=dg([jo(),ug("design:paramtypes",[])],vg);class yg{constructor(){this.order=1}beforeDrawItem(e,t,i,n,r){return!this.processing&&(e.baseGraphic?this.beforeDrawInteractive(e,t,i,n,r):this.beforeSetInteractive(e,t,i,n,r))}beforeSetInteractive(e,t,i,n,r){let s=e.interactiveGraphic;if(e.attribute.globalZIndex){s||(s=e.clone(),e.interactiveGraphic=s,s.baseGraphic=e),s.setAttributes({globalZIndex:0,zIndex:e.attribute.globalZIndex},!1,{skipUpdateCallback:!0}),i.stage.tryInitInteractiveLayer();const t=i.stage.getLayer("_builtin_interactive");return t&&this.getShadowRoot(t).add(s),!0}if(s){i.stage.tryInitInteractiveLayer();const t=i.stage.getLayer("_builtin_interactive");t&&this.getShadowRoot(t).removeChild(s),e.interactiveGraphic=null,s.baseGraphic=null}return!1}beforeDrawInteractive(e,t,i,n,r){const s=e.baseGraphic;if(s){this.processing=!0;const{context:e}=i;return e.highPerformanceSave(),e.setTransformFromMatrix(s.parent.globalTransMatrix,!0),s.isContainer?n.renderGroup(s,i,s.parent.globalTransMatrix):n.renderItem(s,i),e.highPerformanceRestore(),this.processing=!1,!0}return!1}getShadowRoot(e){var t;let i=e.getElementById("_interactive_group");return i||(i=bp.CreateGraphic("group",{}),i.id="_interactive_group",e.add(i)),null!==(t=i.shadowRoot)&&void 0!==t?t:i.attachShadow()}}class bg{constructor(){this.order=1}beforeDrawItem(e,t,i,n,r){if(!e.in3dMode||i.in3dInterceptor)return!1;i.in3dInterceptor=!0;const{context:s,stage:a}=t.drawParams;s.canvas,s.save(),this.initCanvasCtx(s),s.camera=a.camera;const o=s.currentMatrix;o.a/=s.dpr,o.b/=s.dpr,o.c/=s.dpr,o.d/=s.dpr,o.e/=s.dpr,o.f/=s.dpr;const l=ep.allocate();fp(l,o);const c=s.modelMatrix;if(c){if(l){const e=ep.allocate();s.modelMatrix=mp(e,c,l)}}else s.modelMatrix=l;if(s.setTransform(1,0,0,1,0,0,!0),e.isContainer){let t=!1,r=!1;if(e.forEachChildren((e=>(t=e.numberType===Gd,!t))),e.forEachChildren((e=>(r=!!e.findFace,!r))),t){const t=e.getChildren(),r=[...t];r.sort(((e,t)=>{var i,n,r,s;let a=((null!==(i=e.attribute.startAngle)&&void 0!==i?i:0)+(null!==(n=e.attribute.endAngle)&&void 0!==n?n:0))/2,o=((null!==(r=t.attribute.startAngle)&&void 0!==r?r:0)+(null!==(s=t.attribute.endAngle)&&void 0!==s?s:0))/2;for(;a<0;)a+=zn;for(;o<0;)o+=zn;return o-a})),r.forEach((e=>{e._next=null,e._prev=null})),e.removeAllChild(),e.update(),r.forEach((t=>{e.appendChild(t)}));const s=e.parent.globalTransMatrix;i.hack_pieFace="outside",n.renderGroup(e,i,s),i.hack_pieFace="inside",n.renderGroup(e,i,s),i.hack_pieFace="top",n.renderGroup(e,i,s),e.removeAllChild(),t.forEach((e=>{e._next=null,e._prev=null})),t.forEach((t=>{e.appendChild(t)}))}else if(r){const t=e.getChildren(),r=t.map((e=>({ave_z:e.findFace().vertices.map((t=>{var i;return s.view(t[0],t[1],null!==(i=t[2]+e.attribute.z)&&void 0!==i?i:0)[2]})).reduce(((e,t)=>e+t),0),g:e})));r.sort(((e,t)=>t.ave_z-e.ave_z)),e.removeAllChild(),r.forEach((e=>{e.g._next=null,e.g._prev=null})),e.update(),r.forEach((t=>{e.add(t.g)})),n.renderGroup(e,i,e.parent.globalTransMatrix,!0),e.removeAllChild(),t.forEach((e=>{e._next=null,e._prev=null})),e.update(),t.forEach((t=>{e.add(t)}))}else n.renderGroup(e,i,e.parent.globalTransMatrix)}else n.renderItem(e,i);return s.camera=null,s.restore(),s.modelMatrix!==c&&ep.free(s.modelMatrix),s.modelMatrix=c,i.in3dInterceptor=!1,!0}initCanvasCtx(e){e.setTransformForCurrent()}}const _g=function(){const e={linearGradient:/^(linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,fromAngleValue:/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/(^\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,rgbaColor:/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/};let t="";function i(e){const i=new Error(t+": "+e);throw i.source=t,i}function n(){return r("linear",e.linearGradient,s)||r("radial",e.radialGradient,o)||r("conic",e.conicGradient,a)}function r(t,n,r){return function(n,s){const a=v(n);if(a){v(e.startCall)||i("Missing (");const n=function(n){const s=r();return s&&(v(e.comma)||i("Missing comma before color stops")),{type:t,orientation:s,colorStops:u(p)}}();return v(e.endCall)||i("Missing )"),n}}(n)}function s(){return m("directional",e.sideOrCorner,1)||m("angular",e.angleValue,1)}function a(){return m("angular",e.fromAngleValue,1)}function o(){let i,n,r=l();return r&&(i=[],i.push(r),n=t,v(e.comma)&&(r=l(),r?i.push(r):t=n)),i}function l(){let e=function(){const e=m("shape",/^(circle)/i,0);return e&&(e.style=f()||c()),e}()||function(){const e=m("shape",/^(ellipse)/i,0);return e&&(e.style=g()||c()),e}();if(e)e.at=h();else{const t=c();if(t){e=t;const i=h();i&&(e.at=i)}else{const t=d();t&&(e={type:"default-radial",at:t})}}return e}function c(){return m("extent-keyword",e.extentKeywords,1)}function h(){if(m("position",/^at/,0)){const e=d();return e||i("Missing positioning value"),e}}function d(){const e={x:g(),y:g()};if(e.x||e.y)return{type:"position",value:e}}function u(t){let n=t();const r=[];if(n)for(r.push(n);v(e.comma);)n=t(),n?r.push(n):i("One extra comma");return r}function p(){const t=m("hex",e.hexColor,1)||m("rgba",e.rgbaColor,1)||m("rgb",e.rgbColor,1)||m("literal",e.literalColor,0);return t||i("Expected color definition"),t.length=g(),t}function g(){return m("%",e.percentageValue,1)||m("position-keyword",e.positionKeywords,1)||f()}function f(){return m("px",e.pixelValue,1)||m("em",e.emValue,1)}function m(e,t,i){const n=v(t);if(n)return{type:e,value:n[i]}}function v(e){const i=/^[\n\r\t\s]+/.exec(t);i&&y(i[0].length);const n=e.exec(t);return n&&y(n[0].length),n}function y(e){t=t.substr(e)}return function(e){return t=e.toString(),function(){const e=u(n);return t.length>0&&i("Invalid input not EOF"),e}()}}();class xg{static IsGradient(e){return!("string"==typeof e&&e.length<10)}static IsGradientStr(e){return"string"==typeof e&&e.length>10}static Parse(e){if(xg.IsGradientStr(e))try{const t=_g(e)[0];if(t){if("linear"===t.type)return xg.ParseLinear(t);if("radial"===t.type)return xg.ParseRadial(t);if("conic"===t.type)return xg.ParseConic(t)}}catch(H6){return e}return e}static ParseConic(e){const{orientation:t,colorStops:i=[]}=e,n=Fn/2,r=parseFloat(t.value)/180*Fn-n;return{gradient:"conical",x:.5,y:.5,startAngle:r,endAngle:r+zn,stops:i.map((e=>({color:e.value,offset:parseFloat(e.length.value)/100})))}}static ParseRadial(e){const{colorStops:t=[]}=e;return{gradient:"radial",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:t.map((e=>({color:e.value,offset:parseFloat(e.length.value)/100})))}}static ParseLinear(e){const{orientation:t,colorStops:i=[]}=e,n=Fn/2;let r="angular"===t.type?parseFloat(t.value)/180*Fn:0;for(;r<0;)r+=zn;for(;r>zn;)r-=zn;let s=0,a=0,o=0,l=0;return r<n?(s=0,a=1,o=Math.sin(r),l=Math.cos(r)):r<Fn?(s=0,a=0,o=Math.cos(r-n),l=Math.sin(r-n)):r<Fn+n?(s=1,a=0,o=s-Math.sin(r-Fn),l=Math.cos(r-Fn)):(s=1,o=s-Math.cos(r-n-Fn),l-=Math.sin(r-n-Fn)),{gradient:"linear",x0:s,y0:a,x1:o,y1:l,stops:i.map((e=>({color:e.value,offset:parseFloat(e.length.value)/100})))}}}function Sg(e,t,i){let n=t;const{a:r,b:s,c:a,d:o}=e.currentMatrix,l=Math.sign(r)*Math.sqrt(r*r+s*s),c=Math.sign(o)*Math.sqrt(a*a+o*o);return l+c===0?0:(n=n/Math.abs(l+c)*2*i,n)}function wg(e,t,i,n,r){if(!t||!0===t)return"black";let s,a;if(v(t))for(let o=0;o<t.length&&(a=t[o],!a);o++);else a=t;return a=xg.Parse(a),"string"==typeof a?a:("linear"===a.gradient?s=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;var s,a,o,l;const c=i.AABBBounds;if(!c)return;let h=c.x2-c.x1,d=c.y2-c.y1,u=c.x1-n,p=c.y1-r;if(i.attribute){const{scaleX:e=1,scaleY:t=1}=i.attribute;if(e*t==0)return;h/=e,d/=t,u/=e,p/=t}const g=e.createLinearGradient(u+(null!==(s=t.x0)&&void 0!==s?s:0)*h,p+(null!==(a=t.y0)&&void 0!==a?a:0)*d,u+(null!==(o=t.x1)&&void 0!==o?o:1)*h,p+(null!==(l=t.y1)&&void 0!==l?l:0)*d);return t.stops.forEach((e=>{g.addColorStop(e.offset,e.color)})),g}(e,a,i,n,r):"conical"===a.gradient?s=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;var s,a;const o=i.AABBBounds;if(!o)return;let l=o.x2-o.x1,c=o.y2-o.y1,h=o.x1-n,d=o.y1-r;if(i.attribute){const{scaleX:e=1,scaleY:t=1}=i.attribute;if(e*t==0)return;l/=e,c/=t,h/=e,d/=t}const u=e.createConicGradient(h+(null!==(s=t.x)&&void 0!==s?s:0)*l,d+(null!==(a=t.y)&&void 0!==a?a:0)*c,t.startAngle,t.endAngle);return t.stops.forEach((e=>{u.addColorStop(e.offset,e.color)})),u.GetPattern(l+h,c+d,void 0)}(e,a,i,n,r):"radial"===a.gradient&&(s=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;var s,a,o,l,c,h;const d=i.AABBBounds;if(!d)return;let u=d.x2-d.x1,p=d.y2-d.y1,g=d.x1-n,f=d.y1-r;if(i.attribute){const{scaleX:e=1,scaleY:t=1}=i.attribute;if(e*t==0)return;g/=e,f/=t,u/=e,p/=t}const m=e.createRadialGradient(g+(null!==(s=t.x0)&&void 0!==s?s:.5)*u,f+(null!==(a=t.y0)&&void 0!==a?a:.5)*p,Math.max(u,p)*(null!==(o=t.r0)&&void 0!==o?o:0),g+(null!==(l=t.x1)&&void 0!==l?l:.5)*u,f+(null!==(c=t.y1)&&void 0!==c?c:.5)*p,Math.max(u,p)*(null!==(h=t.r1)&&void 0!==h?h:.5));return t.stops.forEach((e=>{m.addColorStop(e.offset,e.color)})),m}(e,a,i,n,r)),s||"orange")}Symbol.for("BoundsAllocate");const Cg=new class{constructor(){this.pools=[];for(let e=0;e<10;e++)this.pools.push(new hl)}allocate(e,t,i,n){if(!this.pools.length)return(new hl).setValue(e,t,i,n);const r=this.pools.pop();return r.x1=e,r.y1=t,r.x2=i,r.y2=n,r}allocateByObj(e){if(!this.pools.length)return new hl(e);const t=this.pools.pop();return t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t}free(e){this.pools.push(e)}get length(){return this.pools.length}release(){this.pools=[]}};var kg=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Ag=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Eg=function(e,t){return function(i,n){t(i,n,e)}};let Tg=class{constructor(e,t){this.contributions=e,this.drawItemInterceptorContributions=t,this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new cl,this.backupDirtyBounds=new cl,this.global=se.global,this.layerService=se.layerService,this.init()}init(){this.contributions.forEach((e=>{if(e.style){const t=this.styleRenderMap.get(e.style)||new Map;t.set(e.numberType,e),this.styleRenderMap.set(e.style,t)}else this.defaultRenderMap.set(e.numberType,e)})),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort(((e,t)=>e.order-t.order))}prepareForDraw(e,t){t.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!t.stage.params.optimize.disableCheckGraphicWidthOutRange}draw(e,t){this.prepareForDraw(e,t),t.drawContribution=this,this.currentRenderMap=this.styleRenderMap.get(t.renderStyle)||this.defaultRenderMap,this.currentRenderService=e;const{context:i,stage:n,x:r=0,y:s=0,width:a,height:o}=t;if(!i)return;const l=this.dirtyBounds.setValue(0,0,a,o);if(n.dirtyBounds&&!n.dirtyBounds.empty()){const e=ig(l,n.dirtyBounds,!1);l.x1=Math.floor(e.x1),l.y1=Math.floor(e.y1),l.x2=Math.ceil(e.x2),l.y2=Math.ceil(e.y2)}const c=i.dpr%1;(c||.5!==c)&&(l.x1=Math.floor(l.x1*i.dpr)/i.dpr,l.y1=Math.floor(l.y1*i.dpr)/i.dpr,l.x2=Math.ceil(l.x2*i.dpr)/i.dpr,l.y2=Math.ceil(l.y2*i.dpr)/i.dpr),this.backupDirtyBounds.copy(l),i.inuse=!0,i.clearMatrix(),i.setTransformForCurrent(!0);const h=l.width()*i.dpr<i.canvas.width||l.height()*i.dpr<i.canvas.height;i.save(),i.translate(r,s,!0),h&&(i.beginPath(),i.rect(l.x1,l.y1,l.width(),l.height()),i.clip()),n.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(e,i,t),i.save(),e.renderTreeRoots.sort(((e,t)=>{var i,n;return(null!==(i=e.attribute.zIndex)&&void 0!==i?i:xc.zIndex)-(null!==(n=t.attribute.zIndex)&&void 0!==n?n:xc.zIndex)})).forEach((e=>{e.isContainer?this.renderGroup(e,t,Ju.allocate(1,0,0,1,0,0)):this.renderItem(e,t)})),i.restore(),i.restore(),i.draw(),i.inuse=!1}doRegister(){throw new Error("\u6682\u4e0d\u652f\u6301")}_findNextGraphic(e){let t=e.parent,i=e._uid;for(;t;){const e=Wp(t,i,xc.zIndex);if(e)return e;i=t._uid,t=t.parent}return null}renderGroup(e,t,i,n){if(t.break||!1===e.attribute.visibleAll)return;if(e.incremental&&(null==t.startAtId||t.startAtId===e._uid))return t.break=!0,void this._increaseRender(e,t);if(this.useDirtyBounds&&!rg(e.AABBBounds,this.dirtyBounds,!1))return;let r,s=i;if(this.useDirtyBounds){r=Cg.allocateByObj(this.dirtyBounds);const t=e.transMatrix;s=Ju.allocateByObj(i).multiply(t.a,t.b,t.c,t.d,t.e,t.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(s.getInverse())}this.renderItem(e,t,{drawingCb:()=>{var i;n?e.forEachChildren((e=>{t.break||(e.isContainer?this.renderGroup(e,t,s):this.renderItem(e,t))})):Vp(e,xc.zIndex,(e=>{t.break||(e.isContainer?this.renderGroup(e,t,s):this.renderItem(e,t))}),!1,!!(null===(i=t.context)||void 0===i?void 0:i.camera))}}),this.useDirtyBounds&&(this.dirtyBounds.copy(r),Cg.free(r),Ju.free(s))}_increaseRender(e,t){const{layer:i,stage:n}=t,{subLayers:r}=i;let s=r.get(e._uid);s||(s={layer:this.layerService.createLayer(n),zIndex:r.size,group:e},r.set(e._uid,s));const a=s.layer.getNativeHandler().getContext(),o=s.drawContribution||ph.get(ku);o.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:o,clear:"transparent",layer:s.layer,context:a,startAtId:e._uid,break:!1})),s.drawContribution=o;const l=this._findNextGraphic(e);if(l)if(l.isContainer&&l.incremental)this._increaseRender(l,t);else{let e=r.get(l._uid);e||(e={layer:this.layerService.createLayer(n),zIndex:r.size},r.set(l._uid,e));const i=e.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:o,clear:"transparent",layer:e.layer,context:i,startAtId:l._uid,break:!1}))}}getRenderContribution(e){let t;return t||(t=this.selectRenderByNumberType(e.numberType)),t||(t=this.selectRenderByType(e.type)),t}renderItem(e,t,i){if(this.InterceptorContributions.length)for(let o=0;o<this.InterceptorContributions.length;o++){const n=this.InterceptorContributions[o];if(n.beforeDrawItem&&n.beforeDrawItem(e,this.currentRenderService,t,this,i))return}const n=this.getRenderContribution(e);if(!n)return;let r,s=!1;if(e.parent){const{scrollX:t=0,scrollY:i=0}=e.parent.attribute;if(s=!(!t&&!i),s){r=this.dirtyBounds.clone();const n=e.globalTransMatrix.getInverse();this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(n),this.dirtyBounds.translate(-t,-i)}}if(this.useDirtyBounds&&!e.isContainer&&!rg(e.AABBBounds,this.dirtyBounds,!1))return void(s&&this.dirtyBounds.copy(r));const a=null!=t.startAtId&&e._uid!==t.startAtId;if(e._uid===t.startAtId&&(t.startAtId=null),i&&(i.skipDraw=a),a?e.isContainer&&n.draw(e,this.currentRenderService,t,i):n.draw(e,this.currentRenderService,t,i),s&&this.dirtyBounds.copy(r),this.InterceptorContributions.length)for(let o=0;o<this.InterceptorContributions.length;o++){const i=this.InterceptorContributions[o];if(i.afterDrawItem&&i.afterDrawItem(e,this.currentRenderService,t,this))return}}selectRenderByType(e){return u.getInstance().warn("\u672a\u77e5\u9519\u8bef\uff0c\u4e0d\u5e94\u8be5\u8d70\u5230\u8fd9\u91cc"),null}selectRenderByNumberType(e){return this.currentRenderMap.get(e)||this.defaultRenderMap.get(e)}clearScreen(e,t,i){var n,r;const{clear:s}=i;if(s){const a=t.getCanvas(),{width:o=a.width,height:l=a.height}=i,c=0,h=0;t.clearRect(c,h,o,l);const d=null===(n=e.drawParams)||void 0===n?void 0:n.stage;if(d&&(t.globalAlpha=null!==(r=d.attribute.opacity)&&void 0!==r?r:1),d&&d.backgroundImg&&d.resources){const e=d.resources.get(s);e&&"success"===e.state&&e.data&&t.drawImage(e.data,c,h,o,l)}else t.fillStyle=wg(t,s,{AABBBounds:{x1:c,y1:h,x2:c+o,y2:h+l}},0,0),t.fillRect(c,h,o,l)}}afterDraw(e,t){}};Tg=kg([jo(),Eg(0,zp(Pu)),Eg(1,Ho(Uo)),Eg(1,Vo(pg)),Ag("design:paramtypes",[Array,Object])],Tg);const Og=Fn/2;function Pg(e,t,i,n,r,s){let a;if(n<0&&(t+=n,n=-n),r<0&&(i+=r,r=-r),l(s,!0))a=[s=Hn(s),s,s,s];else if(Array.isArray(s)){const e=s;let t,i;switch(e.length){case 0:a=[0,0,0,0];break;case 1:t=Hn(e[0]),a=[t,t,t,t];break;case 2:case 3:t=Hn(e[0]),i=Hn(e[1]),a=[t,i,t,i];break;default:a=e,a[0]=Hn(a[0]),a[1]=Hn(a[1]),a[2]=Hn(a[2]),a[3]=Hn(a[3])}}else a=[0,0,0,0];if(n<0||a[0]+a[1]+a[2]+a[3]<1e-12)return e.rect(t,i,n,r);const[o,c,h,d]=[[t,i],[t+n,i],[t+n,i+r],[t,i+r]],u=Math.min(n/2,r/2),p=[Math.min(u,a[0]),Math.min(u,a[1]),Math.min(u,a[2]),Math.min(u,a[3])],g=[o[0]+p[0],o[1]],f=[o[0],o[1]+p[0]],m=[c[0]-p[1],c[1]],v=[c[0],c[1]+p[1]],y=[h[0]-p[2],h[1]],b=[h[0],h[1]-p[2]],_=[d[0]+p[3],d[1]],x=[d[0],d[1]-p[3]];if(e.moveTo(g[0],g[1]),e.lineTo(m[0],m[1]),!W(m,v)){const t=m[0],i=m[1]+p[1];e.arc(t,i,p[1],-Og,0,!1)}if(e.lineTo(b[0],b[1]),!W(y,b)){const t=b[0]-p[2],i=b[1];e.arc(t,i,p[2],0,Og,!1)}if(e.lineTo(_[0],_[1]),!W(_,x)){const t=_[0],i=_[1]-p[3];e.arc(t,i,p[3],Og,Fn,!1)}if(e.lineTo(f[0],f[1]),!W(g,f)){const t=g[0],i=g[1]+p[0];e.arc(t,i,p[0],Fn,Fn+Og,!1)}return e.closePath(),e}function Mg(e,t){return!(!e&&!t)}function Ig(e,t){let i;return i=v(e)?e.some((e=>e||void 0===e)):!!e,i&&t>0}function Rg(e,t,i){return i&&e*t>0}function Dg(e,t,i,n,r){return r&&e*t>0&&0!==i&&0!==n}function Lg(e,t){return e*t>0}function jg(e,t,i,n){return e*t>0&&0!==i&&0!==n}function Fg(e,t,i,n,r,s,a,o){const l=i-e,c=n-t,h=a-r,d=o-s;let u=d*l-h*c;return u*u<jn?[]:(u=(h*(t-s)-d*(e-r))/u,[e+u*l,t+u*c])}function Bg(e,t,i,n,r,s,a){const o=e-i,l=t-n,c=(a?s:-s)/Math.sqrt(o*o+l*l),h=c*l,d=-c*o,u=e+h,p=t+d,g=i+h,f=n+d,m=(u+g)/2,v=(p+f)/2,y=g-u,b=f-p,_=y*y+b*b,x=r-s,S=u*f-g*p,w=(b<0?-1:1)*Math.sqrt(Math.max(0,x*x*_-S*S));let C=(S*b-y*w)/_,k=(-S*y-b*w)/_;const A=(S*b+y*w)/_,E=(-S*y+b*w)/_,T=C-m,O=k-v,P=A-m,M=E-v;return T*T+O*O>P*P+M*M&&(C=A,k=E),{cx:C,cy:k,x01:-h,y01:-d,x11:C*(r/x-1),y11:k*(r/x-1)}}function Ng(e,t,i,n,r,s,a){const{startAngle:o,endAngle:l}=e.getParsedAngle(),c=Hn(l-o),h=l>o;let d=!1;if(r<s){const e=r;r=s,s=e}if(r<=jn)t.moveTo(i,n);else if(c>=zn-jn)t.moveTo(i+r*Un(o),n+r*Kn(o)),t.arc(i,n,r,o,l,!h),s>jn&&(t.moveTo(i+s*Un(l),n+s*Kn(l)),t.arc(i,n,s,l,o,h));else{const u=e.getParsedCornerRadius(),{outerDeltaAngle:p,innerDeltaAngle:g,outerStartAngle:f,outerEndAngle:m,innerEndAngle:v,innerStartAngle:y}=e.getParsePadAngle(o,l),b=u,_=u,x=u,S=u,w=Math.max(_,b),C=Math.max(x,S);let k=w,A=C;const E=r*Un(f),T=r*Kn(f),O=s*Un(v),P=s*Kn(v);let M,I,R,D;if((C>jn||w>jn)&&(M=r*Un(m),I=r*Kn(m),R=s*Un(y),D=s*Kn(y),c<Fn)){const e=Fg(E,T,R,D,M,I,O,P);if(e){const t=E-e[0],i=T-e[1],n=M-e[0],a=I-e[1],o=1/Kn(qn((t*n+i*a)/(Yn(t*t+i*i)*Yn(n*n+a*a)))/2),l=Yn(e[0]*e[0]+e[1]*e[1]);A=Gn(C,(s-l)/(o-1)),k=Gn(w,(r-l)/(o+1))}}if(p<.001)a&&(a[3]||a[1])&&t.moveTo(i+E,n+T),d=!0;else if(k>jn){const e=Gn(b,k),s=Gn(_,k),o=Bg(R,D,E,T,r,e,Number(h)),l=Bg(M,I,O,P,r,s,Number(h));k<w&&e===s?!a||a[0]?(t.moveTo(i+o.cx+o.x01,n+o.cy+o.y01),t.arc(i+o.cx,n+o.cy,k,Vn(o.y01,o.x01),Vn(l.y01,l.x01),!h)):t.moveTo(i+o.cx+k*Un(Vn(l.y01,l.x01)),n+o.cy+k*Kn(Vn(l.y01,l.x01))):!a||a[0]?(t.moveTo(i+o.cx+o.x01,n+o.cy+o.y01),e>0&&t.arc(i+o.cx,n+o.cy,e,Vn(o.y01,o.x01),Vn(o.y11,o.x11),!h),t.arc(i,n,r,Vn(o.cy+o.y11,o.cx+o.x11),Vn(l.cy+l.y11,l.cx+l.x11),!h),s>0&&t.arc(i+l.cx,n+l.cy,s,Vn(l.y11,l.x11),Vn(l.y01,l.x01),!h)):s>0?t.moveTo(i+l.cx+s*Un(Vn(l.y01,l.x01)),n+l.cy+s*Kn(Vn(l.y01,l.x01))):t.moveTo(i+M,n+r*Kn(m))}else!a||a[0]?(t.moveTo(i+E,n+T),t.arc(i,n,r,f,m,!h)):t.moveTo(i+r*Un(m),n+r*Kn(m));if(!(s>jn)||g<.001)!a||a[1]?t.lineTo(i+O,n+P):t.moveTo(i+O,n+P),d=!0;else if(A>jn){const e=Gn(S,A),r=Gn(x,A),o=Bg(O,P,M,I,s,-r,Number(h)),l=Bg(E,T,R,D,s,-e,Number(h));if(!a||a[1]?t.lineTo(i+o.cx+o.x01,n+o.cy+o.y01):t.moveTo(i+o.cx+o.x01,n+o.cy+o.y01),A<C&&e===r){const e=Vn(l.y01,l.x01);!a||a[2]?t.arc(i+o.cx,n+o.cy,A,Vn(o.y01,o.x01),e,!h):t.moveTo(i+o.cx+Un(e),n+o.cy+Kn(e))}else!a||a[2]?(r>0&&t.arc(i+o.cx,n+o.cy,r,Vn(o.y01,o.x01),Vn(o.y11,o.x11),!h),t.arc(i,n,s,Vn(o.cy+o.y11,o.cx+o.x11),Vn(l.cy+l.y11,l.cx+l.x11),h),e>0&&t.arc(i+l.cx,n+l.cy,e,Vn(l.y11,l.x11),Vn(l.y01,l.x01),!h)):e>0?t.moveTo(i+l.cx+e*Un(Vn(l.y01,l.x01)),n+l.cy+e*Kn(Vn(l.y01,l.x01))):t.moveTo(i+R,n+D)}else!a||a[1]?t.lineTo(i+O,n+P):t.moveTo(i+O,n+P),!a||a[2]?t.arc(i,n,s,v,y,h):t.moveTo(i+s*Un(y),n+s*Kn(y))}return a?a[3]&&t.lineTo(i+r*Un(o),n+r*Kn(o)):t.closePath(),d}const zg=Symbol.for("ArcRenderContribution"),Hg=Symbol.for("AreaRenderContribution"),Vg=Symbol.for("CircleRenderContribution"),Ug=Symbol.for("GroupRenderContribution"),Wg=Symbol.for("ImageRenderContribution"),Gg=Symbol.for("PathRenderContribution"),Kg=Symbol.for("PolygonRenderContribution"),Yg=Symbol.for("RectRenderContribution"),Xg=Symbol.for("SymbolRenderContribution"),qg=Symbol.for("TextRenderContribution"),Zg=(Symbol.for("CommonRenderContribution"),Symbol.for("InteractiveSubRenderContribution"));var Qg=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},$g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Jg=function(e,t){return function(i,n){t(i,n,e)}};class ef{constructor(){this.time=Ol.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,n,r,s,a,o,l,c,h,d,u){const{background:p,backgroundMode:g=l.backgroundMode,backgroundFit:f=l.backgroundFit}=e.attribute;if(p)if(e.backgroundImg&&e.resources){const r=e.resources.get(p);if("success"!==r.state||!r.data)return;if(t.save(),e.parent&&!e.transMatrix.onlyTranslate()){const i=jh(e.parent).group,{scrollX:n=i.scrollX,scrollY:r=i.scrollY}=e.parent.attribute;t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),t.translate(n,r)}t.clip();const s=e.AABBBounds;t.setCommonStyle(e,e.attribute,i,n,l),this.doDrawImage(t,r.data,s,g,f),t.restore(),e.transMatrix.onlyTranslate()||t.setTransformForCurrent()}else t.highPerformanceSave(),t.setCommonStyle(e,e.attribute,i,n,l),t.fillStyle=p,t.fill(),t.highPerformanceRestore()}doDrawImage(e,t,i,n,r){if("no-repeat"===n)e.drawImage(t,i.x1,i.y1,i.width(),i.height());else{const s=i.width(),a=i.height();let o=s,l=a;if(r&&"repeat"!==n&&(t.width||t.height)){const i=t.width,r=t.height;"repeat-x"===n?(o=i*(a/r),l=a):"repeat-y"===n&&(l=r*(s/i),o=s);const c=e.dpr,h=vh.allocate({width:o,height:l,dpr:c}),d=h.getContext("2d");d&&(d.inuse=!0,d.clearMatrix(),d.setTransformForCurrent(!0),d.clearRect(0,0,o,l),d.drawImage(t,0,0,o,l),t=h.nativeCanvas),vh.free(h)}const c=e.dpr,h=e.createPattern(t,n);h.setTransform&&h.setTransform(new DOMMatrix([1/c,0,0,1/c,0,0])),e.fillStyle=h,e.translate(i.x1,i.y1),e.fillRect(0,0,s,a),e.translate(-i.x1,-i.y1)}}}const tf=new ef;let nf=class{constructor(e){this.subRenderContribitions=e,this.time=Ol.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,n,r,s,a,o,l,c,h,d,u){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach((p=>{p.render(e,t,i,n,r,s,a,o,l,c,h,d,u)}))}};nf=Qg([jo(),Jg(0,Ho(Uo)),Jg(0,Vo(Zg)),$g("design:paramtypes",[Object])],nf);const rf=new class extends ef{constructor(){super(...arguments),this.time=Ol.beforeFillStroke}drawShape(e,t,i,n,r,s,a,o,l,c,h,d){const{background:u,backgroundMode:p=l.backgroundMode,backgroundFit:g=l.backgroundFit}=e.attribute;if(u)if(e.backgroundImg&&e.resources){const i=e.resources.get(u);if("success"!==i.state||!i.data)return;t.highPerformanceSave(),t.setTransformFromMatrix(e.parent.globalTransMatrix,!0);const n=e.AABBBounds;this.doDrawImage(t,i.data,n,p,g),t.highPerformanceRestore(),t.setTransformForCurrent()}else t.highPerformanceSave(),t.fillStyle=u,t.fill(),t.highPerformanceRestore()}};var sf=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},af=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},of=function(e,t){return function(i,n){t(i,n,e)}};let lf=class{constructor(e){this.groupRenderContribitions=e,this.numberType=qd}drawShape(e,t,i,n,r,s,a,o){const l=jh(e,null==s?void 0:s.theme).group,{fill:c=l.fill,background:h,stroke:d=l.stroke,opacity:u=l.opacity,width:p=l.width,height:g=l.height,clip:f=l.clip,fillOpacity:m=l.fillOpacity,strokeOpacity:y=l.strokeOpacity,cornerRadius:b=l.cornerRadius,path:_=l.path,lineWidth:x=l.lineWidth,visible:S=l.visible}=e.attribute,w=Dg(u,m,p,g,c),C=jg(u,y,p,g),k=Mg(c,h),A=Ig(d,x);if(!e.valid||!S)return;if(!f){if(!k&&!A)return;if(!(w||C||a||o||h))return}if(_&&_.length&&r.drawContribution){const e=t.disableFill,i=t.disableStroke,n=t.disableBeginPath;t.disableFill=!0,t.disableStroke=!0,t.disableBeginPath=!0,_.forEach((e=>{r.drawContribution.getRenderContribution(e).draw(e,r.renderService,r,s)})),t.disableFill=e,t.disableStroke=i,t.disableBeginPath=n}else 0===b||v(b)&&b.every((e=>0===e))?(t.beginPath(),t.rect(i,n,p,g)):(t.beginPath(),Pg(t,i,n,p,g,b));this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(rf));const E={doFill:k,doStroke:A};this._groupRenderContribitions.forEach((s=>{s.time===Ol.beforeFillStroke&&s.drawShape(e,t,i,n,k,A,w,C,l,r,a,o,E)})),f&&t.clip(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),E.doFill&&(a?a(t,e.attribute,l):w&&(t.setCommonStyle(e,e.attribute,i,n,l),t.fill())),E.doStroke&&(o?o(t,e.attribute,l):C&&(t.setStrokeStyle(e,e.attribute,i,n,l),t.stroke())),this._groupRenderContribitions.forEach((s=>{s.time===Ol.afterFillStroke&&s.drawShape(e,t,i,n,k,A,w,C,l,r,a,o)}))}draw(e,t,i,n){const{context:r}=i;if(!r)return;const{clip:s}=e.attribute;s?r.save():r.highPerformanceSave();const a=jh(e,null==n?void 0:n.theme).group,o=r.modelMatrix;if(r.camera){const t=ep.allocate(),i=ep.allocate();vp(i,e,a),mp(t,o||t,i),r.modelMatrix=t,ep.free(i),r.setTransform(1,0,0,1,0,0,!0)}else r.transformFromMatrix(e.transMatrix,!0);r.beginPath(),n.skipDraw?this.drawShape(e,r,0,0,i,n,(()=>!1),(()=>!1)):this.drawShape(e,r,0,0,i);const{scrollX:l=a.scrollX,scrollY:c=a.scrollY}=e.attribute;let h;(l||c)&&r.translate(l,c),n&&n.drawingCb&&(h=n.drawingCb()),r.modelMatrix!==o&&ep.free(r.modelMatrix),r.modelMatrix=o,h&&h.then?h.then((()=>{s?r.restore():r.highPerformanceRestore()})):s?r.restore():r.highPerformanceRestore()}};lf=sf([jo(),of(0,Ho(Uo)),of(0,Vo(Ug)),af("design:paramtypes",[Object])],lf);const cf={x:0,y:0,z:0,lastModelMatrix:null};class hf{init(e){e&&(this._renderContribitions=e.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions&&this.builtinContributions.forEach((e=>this._renderContribitions.push(e))),this._renderContribitions.length&&(this._renderContribitions.sort(((e,t)=>t.order-e.order)),this._beforeRenderContribitions=this._renderContribitions.filter((e=>e.time===Ol.beforeFillStroke)),this._afterRenderContribitions=this._renderContribitions.filter((e=>e.time===Ol.afterFillStroke)))}beforeRenderStep(e,t,i,n,r,s,a,o,l,c,h,d,u){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach((p=>{p.drawShape(e,t,i,n,r,s,a,o,l,c,h,d,u)}))}afterRenderStep(e,t,i,n,r,s,a,o,l,c,h,d,u){this._afterRenderContribitions&&this._afterRenderContribitions.forEach((p=>{p.drawShape(e,t,i,n,r,s,a,o,l,c,h,d,u)}))}valid(e,t,i,n){const{fill:r=t.fill,background:s,stroke:a=t.stroke,opacity:o=t.opacity,fillOpacity:l=t.fillOpacity,lineWidth:c=t.lineWidth,strokeOpacity:h=t.strokeOpacity,visible:d=t.visible}=e.attribute,u=Rg(o,l,r),p=Lg(o,h),g=Mg(r,s),f=Ig(a,c);return!(!e.valid||!d)&&!(!g&&!f)&&!!(u||p||i||n||s)&&{fVisible:u,sVisible:p,doFill:g,doStroke:f}}transform(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{x:r=t.x,y:s=t.y,z:a=t.z,scaleX:o=t.scaleX,scaleY:l=t.scaleY,angle:c=t.angle,postMatrix:h}=e.attribute,d=i.modelMatrix,u=i.camera;cf.x=r,cf.y=s,cf.z=a,cf.lastModelMatrix=d;const p=u&&(n||function(e){const{alpha:t,beta:i}=e.attribute;return t||i}(e)),g=p?e.transMatrix.onlyTranslate()&&!h:1===o&&1===l&&0===c&&!h;if(p){const n=ep.allocate(),r=ep.allocate();vp(r,e,t),mp(n,d||n,r),cf.x=0,cf.y=0,cf.z=0,i.modelMatrix=n,i.setTransform(1,0,0,1,0,0,!0),ep.free(r)}if(g&&!d){const n=e.getOffsetXY(t);cf.x+=n.x,cf.y+=n.y,cf.z=a,i.setTransformForCurrent()}else if(p)cf.x=0,cf.y=0,cf.z=0,i.setTransform(1,0,0,1,0,0,!0);else if(u&&i.project){const n=e.getOffsetXY(t);cf.x+=n.x,cf.y+=n.y,this.transformWithoutTranslate(i,cf.x,cf.y,cf.z,o,l,c)}else i.transformFromMatrix(e.transMatrix,!0),cf.x=0,cf.y=0,cf.z=0;return cf}transformUseContext2d(e,t,i,n){const r=n.camera;if(this.camera=r,r){const t=e.AABBBounds,r=t.x2-t.x1,s=t.y2-t.y1,a=n.project(0,0,i),o=n.project(r,0,i),l=n.project(r,s,i),c={x:0,y:0},h={x:r,y:0},d={x:r,y:s};n.camera=null;const u=1/(c.x*(d.y-h.y)-h.x*d.y+d.x*h.y+(h.x-d.x)*c.y),p=-(c.y*(l.x-o.x)-h.y*l.x+d.y*o.x+(h.y-d.y)*a.x)*u,g=(h.y*l.y+c.y*(o.y-l.y)-d.y*o.y+(d.y-h.y)*a.y)*u,f=(c.x*(l.x-o.x)-h.x*l.x+d.x*o.x+(h.x-d.x)*a.x)*u,m=-(h.x*l.y+c.x*(o.y-l.y)-d.x*o.y+(d.x-h.x)*a.y)*u,v=(c.x*(d.y*o.x-h.y*l.x)+c.y*(h.x*l.x-d.x*o.x)+(d.x*h.y-h.x*d.y)*a.x)*u,y=(c.x*(d.y*o.y-h.y*l.y)+c.y*(h.x*l.y-d.x*o.y)+(d.x*h.y-h.x*d.y)*a.y)*u;n.setTransform(p,g,f,m,v,y,!0)}}restoreTransformUseContext2d(e,t,i,n){this.camera&&(n.camera=this.camera)}transformWithoutTranslate(e,t,i,n,r,s,a){const o=e.project(t,i,n);e.translate(o.x,o.y,!1),e.scale(r,s,!1),e.rotate(a,!1),e.translate(-o.x,-o.y,!1),e.setTransformForCurrent()}_draw(e,t,i,n,r){const{context:s}=n;if(!s)return;s.highPerformanceSave();const a=this.transform(e,t,s,i),{x:o,y:l,z:c,lastModelMatrix:h}=a;this.z=c,function(e,t,i,n,r,s,a,o){if(!e.pathProxy)return!1;const l=jh(e,null==s?void 0:s.theme)[e.type],{fill:c=l.fill,stroke:h=l.stroke,opacity:d=l.opacity,fillOpacity:u=l.fillOpacity,lineWidth:p=l.lineWidth,strokeOpacity:g=l.strokeOpacity,visible:f=l.visible}=e.attribute,m=Rg(d,u,c),v=Lg(d,g),y=Mg(c),b=Ig(h,p);return!f||(!y&&!b||(!(m||v||a||o)||(t.beginPath(),Dl(("function"==typeof e.pathProxy?e.pathProxy(e.attribute):e.pathProxy).commandList,t,i,n),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),b&&(o?o(t,e.attribute,l):v&&(t.setStrokeStyle(e,e.attribute,i,n,l),t.stroke())),y&&(a?a(t,e.attribute,l):m&&(t.setCommonStyle(e,e.attribute,i,n,l),t.fill())),!0)))}(e,s,o,l,0,r)||(this.drawShape(e,s,o,l,n,r),this.z=0,s.modelMatrix!==h&&ep.free(s.modelMatrix),s.modelMatrix=h),s.highPerformanceRestore()}}function df(e,t,i,n){if(!t.p1)return;const{offsetX:r=0,offsetY:s=0,offsetZ:a=0}=n||{};if(1===i)t.p2&&t.p3?e.bezierCurveTo(r+t.p1.x,s+t.p1.y,r+t.p2.x,s+t.p2.y,r+t.p3.x,s+t.p3.y,a):e.lineTo(r+t.p1.x,s+t.p1.y,a);else if(t.p2&&t.p3){const[n]=Nl(t,i);e.bezierCurveTo(r+n.p1.x,s+n.p1.y,r+n.p2.x,s+n.p2.y,r+n.p3.x,s+n.p3.y,a)}else{const n=t.getPointAt(i);e.lineTo(r+n.x,s+n.y,a)}}function uf(e,t,i,n,r){var s;const{offsetX:a=0,offsetY:o=0,offsetZ:l=0,mode:c="none",drawConnect:h=!1,zeroX:d=0,zeroY:u=0}=r||{};if(h&&"none"===c)return;if(!t)return;let p=!0;const{curves:g}=t;if(i>=1){if(h){let t,i=!0;g.forEach(((n,r)=>{var s;let c=n.p0;if(n.originP1!==n.originP2){if(t&&t.originP1===t.originP2&&(c=t.p0),n.defined)i||(e.lineTo(c.x+a,c.y+o,l),i=!i);else{const{originP1:t,originP2:r}=n;let h;if(t&&!1!==t.defined?h=c:t&&!1!==r.defined&&(h=null!==(s=n.p3)&&void 0!==s?s:n.p1),i){i=!i;const t=h?h.x:n.p0.x,r=h?h.y:n.p0.y;e.moveTo(t+a,r+o,l)}else h&&(i=!i,e.lineTo(h.x+a,h.y+o,l))}t=n}else t=n}))}else g.forEach((t=>{t.defined?(p&&e.moveTo(t.p0.x+a,t.p0.y+o,l),df(e,t,1,r),p=!1):p=!0}));return}if(i<=0)return;let f;"x"===n?f=El.ROW:"y"===n?f=El.COLUMN:"auto"===n&&(f=t.direction);const m=i*t.tryUpdateLength(f);let v=0,y=!0,b=null;for(let _=0,x=g.length;_<x;_++){const t=g[_],i=t.getLength(f),n=(m-v)/i;if(v+=i,n<0)break;if(h){let i=t.p0;if(t.originP1===t.originP2){b=t;continue}if(b&&b.originP1===b.originP2&&(i=b.p0),t.defined)y||(e.lineTo(i.x+a,i.y+o,l),y=!y);else{const{originP1:n,originP2:r}=t;let c;if(n&&!1!==n.defined?c=i:n&&!1!==r.defined&&(c=null!==(s=t.p3)&&void 0!==s?s:t.p1),y){y=!y;const i=c?c.x:t.p0.x,n=c?c.y:t.p0.y;e.moveTo(i+a,n+o,l)}else c&&(y=!y,e.lineTo(c.x+a,c.y+o,l))}b=t}else{if(!t.defined){p=!0;continue}p&&e.moveTo(t.p0.x+a,t.p0.y+o,l),df(e,t,Gn(n,1),r),p=!1}}}var pf=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let gf=class extends hf{constructor(){super(...arguments),this.numberType=Qd}draw(e,t,i,n){const r=jh(e,null==n?void 0:n.theme).line;this._draw(e,r,!1,i,n)}drawSegmentItem(e,t,i,n,r,s,a,o,l,c,h,d,u,p,g){var f,m,y,b,_;if(!t)return;e.beginPath();const x=null!==(f=this.z)&&void 0!==f?f:0;uf(e.camera?e:e.nativeContext,t,l,c,{offsetX:h,offsetY:d,offsetZ:x}),u.cache&&!v(u.cache)&&u.cache.curves.every((e=>e.defined))&&u.attribute.curveType&&u.attribute.curveType.includes("Closed")&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(u,a,o);const{x:S=0,x:w=0}=a;!1!==i&&(p?p(e,a,o):r&&(e.setCommonStyle(u,a,S-h,w-d,o),e.fill())),!1!==n&&(g?g(e,a,o):s&&(e.setStrokeStyle(u,a,S-h,w-d,o),e.stroke()));let{connectedType:C,connectedX:k,connectedY:A,connectedStyle:E}=a;if(v(o)?(C=null!==(m=null!=C?C:o[0].connectedType)&&void 0!==m?m:o[1].connectedType,k=null!==(y=null!=k?k:o[0].connectedX)&&void 0!==y?y:o[1].connectedX,A=null!==(b=null!=A?A:o[0].connectedY)&&void 0!==b?b:o[1].connectedY,E=null!==(_=null!=E?E:o[0].connectedStyle)&&void 0!==_?_:o[1].connectedStyle):(C=null!=C?C:o.connectedType,k=null!=k?k:o.connectedX,A=null!=A?A:o.connectedY,E=null!=E?E:o.connectedStyle),"connect"!==C&&"zero"!==C&&(C="none"),"none"!==C){e.beginPath(),uf(e.camera?e:e.nativeContext,t,l,c,{offsetX:h,offsetY:d,offsetZ:x,drawConnect:!0,mode:C,zeroX:k,zeroY:A});const f=[];v(o)?o.forEach((e=>f.push(e))):f.push(o),f.push(a),!1!==i&&(p?p(e,a,o):r&&(e.setCommonStyle(u,E,S-h,w-d,f),e.fill())),!1!==n&&(g?g(e,a,o):s&&(e.setStrokeStyle(u,E,S-h,w-d,f),e.stroke()))}return!1}drawLinearLineHighPerformance(e,t,i,n,r,s,a,o,l,c,h,d,u){var p;t.beginPath();const g=null!==(p=this.z)&&void 0!==p?p:0,{points:f}=e.attribute,m=f[0];t.moveTo(m.x+a,m.y+o,g);for(let b=1;b<f.length;b++){const e=f[b];t.lineTo(e.x+a,e.y+o,g)}t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l);const{x:v=0,x:y=0}=e.attribute;!1!==i&&(d?d(t,e.attribute,l):r&&(t.setCommonStyle(e,e.attribute,v-a,y-o,l),t.fill())),!1!==n&&(u?u(t,e.attribute,l):s&&(t.setStrokeStyle(e,e.attribute,v-a,y-o,l),t.stroke()))}drawShape(e,t,i,n,r,s,a,o){const l=jh(e,null==s?void 0:s.theme).line,{fill:c=l.fill,stroke:h=l.stroke,fillOpacity:d=l.fillOpacity,strokeOpacity:u=l.strokeOpacity,segments:p,points:g,closePath:f}=e.attribute;if(!this.valid(e,l,a,o))return;let{curveType:m=l.curveType}=e.attribute;f&&"linear"===m&&(m="linearClosed");const{clipRange:v=l.clipRange,clipRangeByDimension:y=l.clipRangeByDimension}=e.attribute;if(1===v&&!p&&!g.some((e=>!1===e.defined))&&"linear"===m)return this.drawLinearLineHighPerformance(e,t,!!c,!!h,d,u,i,n,l,r,s,a,o);if(e.shouldUpdateShape()){const{points:t,segments:i}=e.attribute,n=t;if(i&&i.length){let t,n;if(e.cache=i.map(((e,i)=>{if(e.points.length<=1&&0===i)return e.points[0]&&(n={endX:e.points[0].x,endY:e.points[0].y,curves:[{defined:!1!==e.points[0].defined}]}),null;1===i?t={x:n.endX,y:n.endY,defined:n.curves[n.curves.length-1].defined}:i>1&&(t.x=n.endX,t.y=n.endY,t.defined=n.curves[n.curves.length-1].defined);const r=hc(e.points,m,{startPoint:t});return n=r,r})).filter((e=>!!e)),"linearClosed"===m){let t;for(let i=0;i<e.cache.length;i++){const n=e.cache[i];for(let e=0;e<n.curves.length;e++)if(n.curves[e].defined){t=n.curves[e].p0;break}if(t)break}e.cache[e.cache.length-1]&&e.cache[e.cache.length-1].lineTo(t.x,t.y,!0)}}else{if(!t||!t.length)return e.cache=null,void e.clearUpdateShapeTag();e.cache=hc(n,m)}e.clearUpdateShapeTag()}if(Array.isArray(e.cache)){const r=e.attribute.segments.filter((e=>e.points.length));if(1===r[0].points.length&&r.shift(),1===v){let s=!1;e.cache.forEach(((p,g)=>{s||(s=this.drawSegmentItem(t,p,!!c,!!h,d,u,r[g],[l,e.attribute],v,y,i,n,e,a,o))}))}else{const s=e.cache.reduce(((e,t)=>e+t.getLength()),0),p=v*s;let g=0,f=!1;e.cache.forEach(((s,m)=>{if(f)return;const v=s.getLength(),b=(p-g)/v;g+=v,b>0&&(f=this.drawSegmentItem(t,s,!!c,!!h,d,u,r[m],[l,e.attribute],Gn(b,1),y,i,n,e,a,o))}))}}else this.drawSegmentItem(t,e.cache,!!c,!!h,d,u,e.attribute,l,v,y,i,n,e,a,o)}};gf=pf([jo()],gf);var ff=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let mf=class extends gf{constructor(){super(...arguments),this.numberType=Qd}drawShape(e,t,i,n,r,s,a,o){if(e.incremental&&r.multiGraphicOptions){const{startAtIdx:t,length:s}=r.multiGraphicOptions,{segments:l=[]}=e.attribute;if(t>l.length)return;const c=jh(e).line,{fill:h=c.fill,stroke:d=c.stroke,opacity:u=c.opacity,fillOpacity:p=c.fillOpacity,strokeOpacity:g=c.strokeOpacity,lineWidth:f=c.lineWidth,visible:m=c.visible}=e.attribute,v=Rg(u,p,h),y=Lg(u,g),b=Mg(h),_=Ig(d,f);if(!e.valid||!m)return;if(!b&&!_)return;if(!(v||y||a||o))return;const{context:x}=r;for(let r=t;r<t+s;r++)this.drawIncreaseSegment(e,x,l[r-1],l[r],e.attribute.segments[r],[c,e.attribute],i,n)}else super.drawShape(e,t,i,n,r,s,a,o)}drawIncreaseSegment(e,t,i,n,r,s,a,o){n&&(t.beginPath(),function(e,t,i,n){const{offsetX:r=0,offsetY:s=0}=n||{},a=t?t.points[t.points.length-1]:i.points[0];e.moveTo(a.x+r,a.y+s),i.points.forEach((t=>{!1!==t.defined?e.lineTo(t.x+r,t.y+s):e.moveTo(t.x+r,t.y+s)}))}(t.nativeContext,i,n,{offsetX:a,offsetY:o}),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,r,s),t.setStrokeStyle(e,r,a,o,s),t.stroke())}};function vf(e,t,i,n){if(t.length<2)return;const{offsetX:r=0,offsetY:s=0,offsetZ:a=0,mode:o}=n||{};let l=t[0];e.moveTo(l.p0.x+r,l.p0.y+s,a),l=t[t.length-1];let c=l.p3||l.p1;e.lineTo(c.x+r,c.y+s,a),l=i[i.length-1],e.lineTo(l.p0.x+r,l.p0.y+s,a),l=i[0],c=l.p3||l.p1,e.lineTo(c.x+r,c.y+s,a),e.closePath()}function yf(e,t,i,n){const{offsetX:r=0,offsetY:s=0,offsetZ:a=0}=n||{};let o=!0;t.forEach((t=>{t.defined?(o&&e.moveTo(t.p0.x+r,t.p0.y+s,a),df(e,t,1,n),o=!1):o=!0})),o=!0;for(let l=i.length-1;l>=0;l--){const t=i[l];t.defined?(o&&e.lineTo(t.p0.x+r,t.p0.y+s,a),df(e,t,1,n),o=!1):o=!0}e.closePath()}mf=ff([jo()],mf);class bf{constructor(){this.time=Ol.afterFillStroke,this.useStyle=!0,this.order=10}createCommonPattern(e,t,i,n,r){const s=(e-2*t)/2,a=n.dpr,o=vh.allocate({width:e,height:e,dpr:a}),l=o.getContext("2d");if(!l)return null;l.inuse=!0,l.clearMatrix(),l.setTransformForCurrent(!0),l.clearRect(0,0,e,e),r(s,l);const c=n.createPattern(o.nativeCanvas,"repeat");return c.setTransform&&c.setTransform(new DOMMatrix([1/a,0,0,1/a,0,0])),vh.free(o),c}createCirclePattern(e,t,i,n){return this.createCommonPattern(e,t,i,n,((e,t)=>{t.fillStyle=i,t.arc(e,e,e,0,zn),t.fill()}))}createDiamondPattern(e,t,i,n){return this.createCommonPattern(e,t,i,n,((t,n)=>{const r=e/2,s=r;n.fillStyle=i,n.moveTo(r,s-t),n.lineTo(t+r,s),n.lineTo(r,s+t),n.lineTo(r-t,s),n.closePath(),n.fill()}))}createRectPattern(e,t,i,n){return this.createCommonPattern(e,t,i,n,((e,n)=>{const r=t,s=r;n.fillStyle=i,n.fillRect(r,s,2*e,2*e)}))}createVerticalLinePattern(e,t,i,n){return this.createCommonPattern(e,t,i,n,((n,r)=>{const s=t;r.fillStyle=i,r.fillRect(s,0,2*n,e)}))}createHorizontalLinePattern(e,t,i,n){return this.createCommonPattern(e,t,i,n,((n,r)=>{const s=t;r.fillStyle=i,r.fillRect(0,s,e,2*n)}))}createBiasLRLinePattern(e,t,i,n){return this.createCommonPattern(e,t,i,n,((t,n)=>{n.strokeStyle=i,n.lineWidth=t,n.moveTo(0,0),n.lineTo(e,e);const r=e/2,s=-r;n.moveTo(r,s),n.lineTo(r+e,s+e),n.moveTo(-r,-s),n.lineTo(-r+e,-s+e),n.stroke()}))}createBiasRLLinePattern(e,t,i,n){return this.createCommonPattern(e,t,i,n,((t,n)=>{n.strokeStyle=i,n.lineWidth=t,n.moveTo(e,0),n.lineTo(0,e);const r=e/2,s=r;n.moveTo(e+r,s),n.lineTo(r,s+e),n.moveTo(e-r,-s),n.lineTo(-r,-s+e),n.stroke()}))}createGridPattern(e,t,i,n){return this.createCommonPattern(e,t,i,n,((e,n)=>{const r=t,s=r;n.fillStyle=i,n.fillRect(r,s,e,e),n.fillRect(r+e,s+e,e,e)}))}initTextureMap(e,t){this.textureMap=new Map}drawShape(e,t,i,n,r,s,a,o,l,c,h,d,u){this.textureMap||this.initTextureMap(t,e.stage);const{texture:p=l.texture,textureColor:g=l.textureColor,textureSize:f=l.textureSize,texturePadding:m=l.texturePadding}=e.attribute;p&&this.drawTexture(p,e,t,i,n,l,g,f,m)}drawTexture(e,t,i,n,r,s,a,o,l){let c=this.textureMap.get(e);if(!c)switch(e){case"circle":c=this.createCirclePattern(o,l,a,i);break;case"diamond":c=this.createDiamondPattern(o,l,a,i);break;case"rect":c=this.createRectPattern(o,l,a,i);break;case"vertical-line":c=this.createVerticalLinePattern(o,l,a,i);break;case"horizontal-line":c=this.createHorizontalLinePattern(o,l,a,i);break;case"bias-lr":c=this.createBiasLRLinePattern(o,l,a,i);break;case"bias-rl":c=this.createBiasRLLinePattern(o,l,a,i);break;case"grid":c=this.createGridPattern(o,l,a,i)}c&&(i.highPerformanceSave(),i.setCommonStyle(t,t.attribute,n,r,s),i.fillStyle=c,i.fill(),i.highPerformanceRestore())}}const _f=new bf;const xf=new class extends bf{constructor(){super(...arguments),this.time=Ol.afterFillStroke}drawShape(e,t,i,n,r,s,a,o,l,c,h,d,u){var p,g,f,m;this.textureMap||this.initTextureMap(t,e.stage);const{attribute:v=e.attribute}=u||{},{texture:y=(null!==(p=e.attribute.texture)&&void 0!==p?p:Md(l,"texture")),textureColor:b=(null!==(g=e.attribute.textureColor)&&void 0!==g?g:Md(l,"textureColor")),textureSize:_=(null!==(f=e.attribute.textureSize)&&void 0!==f?f:Md(l,"textureSize")),texturePadding:x=(null!==(m=e.attribute.texturePadding)&&void 0!==m?m:Md(l,"texturePadding"))}=v;y&&this.drawTexture(y,e,t,i,n,l,b,_,x)}},Sf=tf;var wf=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Cf=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},kf=function(e,t){return function(i,n){t(i,n,e)}};function Af(e,t,i){switch(t){case"linear":default:return Xl(e,i);case"basis":return Ql(e,i);case"monotoneX":return rc(e,i);case"monotoneY":return sc(e,i);case"step":return oc(e,.5,i);case"stepBefore":return oc(e,0,i);case"stepAfter":return oc(e,1,i);case"linearClosed":return cc(e,i)}}let Ef=class extends hf{constructor(e){super(),this.areaRenderContribitions=e,this.numberType=Kd,this.builtinContributions=[xf,Sf],this.init(e)}drawLinearAreaHighPerformance(e,t,i,n,r,s,a,o,l,c,h,d,u){var p,g,f,m,y;t.beginPath();const b=null!==(p=this.z)&&void 0!==p?p:0,{points:_}=e.attribute,x=_[0];t.moveTo(x.x+a,x.y+o,b);for(let v=1;v<_.length;v++){const e=_[v];t.lineTo(e.x+a,e.y+o,b)}for(let v=_.length-1;v>=0;v--){const e=_[v];t.lineTo((null!==(g=e.x1)&&void 0!==g?g:e.x)+a,(null!==(f=e.y1)&&void 0!==f?f:e.y)+o,b)}t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),this.beforeRenderStep(e,t,a,o,!!r,!1,i,!1,l,c,d,null,{attribute:e.attribute});const{x:S=0,x:w=0}=e.attribute;if(!1!==i&&(d?d(t,e.attribute,l):r&&(t.setCommonStyle(e,e.attribute,S-a,w-o,l),t.fill())),this.afterRenderStep(e,t,a,o,!!r,!1,i,!1,l,c,d,null,{attribute:e.attribute}),n){const{stroke:i=l&&l.stroke}=e.attribute;if(v(i)&&(i[0]||i[2])&&!1===i[1])if(t.beginPath(),i[0]){t.moveTo(x.x+a,x.y+o,b);for(let e=1;e<_.length;e++){const i=_[e];t.lineTo(i.x+a,i.y+o,b)}}else if(i[2]){const e=_[_.length-1];t.moveTo(e.x+a,e.y+o,b);for(let i=_.length-2;i>=0;i--){const e=_[i];t.lineTo((null!==(m=e.x1)&&void 0!==m?m:e.x)+a,(null!==(y=e.y1)&&void 0!==y?y:e.y)+o,b)}}u?u(t,e.attribute,l):(t.setStrokeStyle(e,e.attribute,S-a,w-o,l),t.stroke())}}drawShape(e,t,i,n,r,s,a,o){var l,c,h,d,u,p;const g=jh(e,null==s?void 0:s.theme).area,{fill:f=g.fill,stroke:m=g.stroke,fillOpacity:v=g.fillOpacity,z:y=g.z,strokeOpacity:b=g.strokeOpacity}=e.attribute,_=this.valid(e,g,a,o);if(!_)return;const{doFill:x,doStroke:S}=_,{clipRange:w=g.clipRange,closePath:C,points:k,segments:A}=e.attribute;let{curveType:E=g.curveType}=e.attribute;if(C&&"linear"===E&&(E="linearClosed"),1===w&&!A&&!k.some((e=>!1===e.defined))&&"linear"===E)return this.drawLinearAreaHighPerformance(e,t,!!f,S,v,b,i,n,g,r,s,a,o);if(e.shouldUpdateShape()){if(A&&A.length){let t,i;const n=A.map(((e,n)=>{if(e.points.length<=1&&0===n)return e.points[0]&&(i={endX:e.points[0].x,endY:e.points[0].y}),null;1===n?t={x:i.endX,y:i.endY}:n>1&&(t.x=i.endX,t.y=i.endY);const r=Af(e.points,E,{startPoint:t});return i=r,r})).filter((e=>!!e));let r;const s=[];for(let e=A.length-1;e>=0;e--){const t=A[e].points,i=[];for(let e=t.length-1;e>=0;e--)i.push({x:null!==(l=t[e].x1)&&void 0!==l?l:t[e].x,y:null!==(c=t[e].y1)&&void 0!==c?c:t[e].y});if(0!==e){const t=A[e-1].points,n=t[t.length-1];n&&i.push({x:null!==(h=n.x1)&&void 0!==h?h:n.x,y:null!==(d=n.y1)&&void 0!==d?d:n.y})}i.length>1&&(r=Af(i,"stepBefore"===E?"stepAfter":"stepAfter"===E?"stepBefore":E),s.unshift(r))}e.cacheArea=s.map(((e,t)=>({top:n[t],bottom:e})))}else{if(!k||!k.length)return e.cacheArea=null,void e.clearUpdateShapeTag();{const t=k,i=[];for(let e=k.length-1;e>=0;e--)i.push({x:null!==(u=k[e].x1)&&void 0!==u?u:k[e].x,y:null!==(p=k[e].y1)&&void 0!==p?p:k[e].y});const n=Af(t,E),r=Af(i,"stepBefore"===E?"stepAfter":"stepAfter"===E?"stepBefore":E);e.cacheArea={top:n,bottom:r}}}e.clearUpdateShapeTag()}if(Array.isArray(e.cacheArea)){const s=e.attribute.segments.filter((e=>e.points.length));if(1===s[0].points.length&&s.shift(),1===w){let l=!1;e.cacheArea.forEach(((c,h)=>{l||(l=this.drawSegmentItem(t,c,x,v,S,b,s[h],[g,e.attribute],w,i,n,y,e,r,a,o))}))}else{const l=e.cacheArea.reduce(((e,t)=>e+t.top.getLength()),0),c=w*l;let h=0,d=!1;e.cacheArea.forEach(((l,u)=>{if(d)return;const p=l.top.getLength(),f=(c-h)/p;h+=p,f>0&&(d=this.drawSegmentItem(t,l,x,v,S,b,s[u],[g,e.attribute],Gn(f,1),i,n,y,e,r,a,o))}))}}else this.drawSegmentItem(t,e.cacheArea,x,v,S,b,e.attribute,g,w,i,n,y,e,r,a,o)}draw(e,t,i,n){const r=jh(e,null==n?void 0:n.theme).area;this._draw(e,r,!1,i,n)}drawSegmentItem(e,t,i,n,r,s,a,o,l,c,h,d,u,p,g,f){let m=!1;return m=m||this._drawSegmentItem(e,t,i,n,r,s,a,o,l,c,h,d,u,p,!1,g,f),m=m||this._drawSegmentItem(e,t,i,n,r,s,a,o,l,c,h,d,u,p,!0,g,f),m}_drawSegmentItem(e,t,i,n,r,s,a,o,l,c,h,d,u,p,g,f,m){var y,b,_,x;let{connectedType:S,connectedX:w,connectedY:C,connectedStyle:k}=a;const A=[];if(g&&(v(o)?(S=null!==(y=null!=S?S:o[0].connectedType)&&void 0!==y?y:o[1].connectedType,w=null!==(b=null!=w?w:o[0].connectedX)&&void 0!==b?b:o[1].connectedX,C=null!==(_=null!=C?C:o[0].connectedY)&&void 0!==_?_:o[1].connectedY,k=null!==(x=null!=k?k:o[0].connectedStyle)&&void 0!==x?x:o[1].connectedStyle):(S=null!=S?S:o.connectedType,w=null!=w?w:o.connectedX,C=null!=C?C:o.connectedY,k=null!=k?k:o.connectedStyle),"connect"!==S&&"zero"!==S&&(S="none"),v(o)?o.forEach((e=>A.push(e))):A.push(o),A.push(a)),g&&"none"===S)return!1;if(!t)return;e.beginPath();const{points:E,segments:T}=u.attribute;let O,P,M=El.ROW;if(T){const e=T[T.length-1];P=T[0].points[0],O=e.points[e.points.length-1]}else P=E[0],O=E[E.length-1];M=Hn(O.x-P.x)>Hn(O.y-P.y)?El.ROW:El.COLUMN,function(e,t,i,n){var r;const{drawConnect:s=!1,mode:a="none"}=n||{};if(s&&"none"===a)return;const{top:o,bottom:l}=t;if(o.curves.length!==l.curves.length)return;if(i>=1){const t=[],i=[];let r=!0;if(s){let r,s,a=!0;const c=o.curves.length;o.curves.forEach(((o,h)=>{const d=l.curves[c-h-1];let u=o,p=d;if(o.originP1===o.originP2)return r=o,void(s=d);if(r&&r.originP1===r.originP2&&(u=r,p=s),o.defined)a||(t.push(u),i.push(p),vf(e,t,i,n),t.length=0,i.length=0,a=!a);else{const{originP1:r,originP2:s}=o;let l,c;r&&!1!==r.defined?(l=u,c=p):r&&!1!==s.defined&&(l=o,c=d),a?(a=!a,t.push(l||o),i.push(c||d)):l&&(a=!a,t.push(l||o),i.push(c||d),vf(e,t,i,n),t.length=0,i.length=0)}r=o})),vf(e,t,i,n)}else{for(let s=0,a=o.curves.length;s<a;s++){const c=o.curves[s];r!==c.defined?(r?(yf(e,t,i,n),t.length=0,i.length=0):(t.push(c),i.push(l.curves[a-s-1])),r=!r):r&&(t.push(c),i.push(l.curves[a-s-1]))}yf(e,t,i,n)}return}if(i<=0)return;let{direction:c}=n||{};const{curves:h}=o,d=null!==(r=h[h.length-1].p3)&&void 0!==r?r:h[h.length-1].p1,u=Hn(d.x-h[0].p0.x),p=Hn(d.y-h[0].p0.y);c=null!=c?c:u>p?El.ROW:El.COLUMN,Number.isFinite(u)||(c=El.COLUMN),Number.isFinite(p)||(c=El.ROW);const g=i*(c===El.ROW?u:p);let f=0,m=!0;const v=[],y=[];let b,_,x=!0;for(let S=0,w=o.curves.length;S<w;S++){const t=o.curves[S],i=t.getLength(c),r=(g-f)/i;if(r<0)break;if(f+=i,s){const i=l.curves[w-S-1];let r=t,s=i;if(t.originP1===t.originP2){b=t,_=i;continue}if(b&&b.originP1===b.originP2&&(r=b,s=_),t.defined)x||(v.push(r),y.push(s),vf(e,v,y,n),v.length=0,y.length=0,x=!x);else{const{originP1:a,originP2:o}=t;let l,c;a&&!1!==a.defined?(l=r,c=s):a&&!1!==o.defined&&(l=t,c=i),x?(x=!x,v.push(l||t),y.push(c||i)):l&&(x=!x,v.push(l||t),y.push(c||i),vf(e,v,y,n),v.length=0,y.length=0)}b=t}else{let i=null,s=null;m!==t.defined?(m?(yf(e,v,y,n),v.length=0,y.length=0):(i=t,s=l.curves[w-S-1]),m=!m):m&&(i=t,s=l.curves[w-S-1]),i&&s&&(r<1&&(i=i.p2&&i.p3?Nl(i,r)[0]:Hl(i,r)[0],s=s.p2&&s.p3?Nl(s,1-r)[1]:Hl(s,1-r)[1]),i.defined=m,s.defined=m,v.push(i),y.push(s)),i=null,s=null}}s?vf(e,v,y,n):yf(e,v,y,n)}(e.camera?e:e.nativeContext,t,l,{offsetX:c,offsetY:h,offsetZ:d,direction:M,drawConnect:g,mode:S,zeroX:w,zeroY:C}),this.beforeRenderStep(u,e,c,h,!!n,!1,i,!1,o,p,f,null,{attribute:a}),e.setShadowBlendStyle&&e.setShadowBlendStyle(u,a,o);const{x:I=0,x:R=0}=a;if(!1!==i&&(f?f(e,a,o):n&&(e.setCommonStyle(u,g?k:a,I-c,R-h,g?A:o),e.fill())),this.afterRenderStep(u,e,c,h,!!n,!1,i,!1,o,p,f,null,{attribute:a}),!1!==r)if(m)m(e,a,o);else{const{stroke:i=o&&o[1]&&o[1].stroke}=a;v(i)&&(i[0]||i[2])&&!1===i[1]&&(e.beginPath(),uf(e.camera?e:e.nativeContext,i[0]?t.top:t.bottom,l,M===El.ROW?"x":"y",{offsetX:c,offsetY:h,offsetZ:d,drawConnect:g,mode:S,zeroX:w,zeroY:C})),e.setStrokeStyle(u,g?k:a,I-c,R-h,g?A:o),e.stroke()}return!1}};Ef=wf([jo(),kf(0,Ho(Uo)),kf(0,Vo(Hg)),Cf("design:paramtypes",[Object])],Ef);var Tf=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let Of=class extends Ef{constructor(){super(...arguments),this.numberType=Kd}drawShape(e,t,i,n,r,s,a){if(e.incremental&&r.multiGraphicOptions){const{startAtIdx:s,length:o}=r.multiGraphicOptions,{segments:l=[]}=e.attribute;if(s>l.length)return;const c=jh(e).area,{fill:h=c.fill,fillOpacity:d=c.fillOpacity,opacity:u=c.opacity,visible:p=c.visible}=e.attribute,g=Rg(u,d,h),f=Mg(h);if(!e.valid||!p)return;if(!f)return;if(!g&&!a)return;for(let r=s;r<s+o;r++)this.drawIncreaseSegment(e,t,l[r-1],l[r],e.attribute.segments[r],[c,e.attribute],i,n)}else super.drawShape(e,t,i,n,r,s,a)}drawIncreaseSegment(e,t,i,n,r,s,a,o){n&&(t.beginPath(),function(e,t,i,n){const{offsetX:r=0,offsetY:s=0}=n||{},{points:a}=i,o=[];let l=0;for(let c=0;c<a.length;c++)!1===a[c].defined&&(l+1!==c&&o.slice(l,c),l=c);o.length,o.push(a),o.forEach(((i,n)=>{var a,o,l,c;const h=t&&0===n?t.points[t.points.length-1]:i[0];e.moveTo(h.x+r,h.y+s),i.forEach((t=>{!1!==t.defined?e.lineTo(t.x+r,t.y+s):e.moveTo(t.x+r,t.y+s)}));for(let t=i.length-1;t>=0;t--){const n=i[t];e.lineTo(null!==(a=n.x1)&&void 0!==a?a:n.x,null!==(o=n.y1)&&void 0!==o?o:n.y)}e.lineTo(null!==(l=h.x1)&&void 0!==l?l:h.x,null!==(c=h.y1)&&void 0!==c?c:h.y),e.closePath()}))}(t.camera?t:t.nativeContext,i,n,{offsetX:a,offsetY:o}),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,r,s),t.setCommonStyle(e,r,a,o,s),t.fill())}};Of=Tf([jo()],Of);var Pf,Mf=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},If=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Rf=function(e,t){return function(i,n){t(i,n,e)}},Df=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};!function(e){e[e.NORMAL=0]="NORMAL",e[e.STOP=1]="STOP"}(Pf||(Pf={}));let Lf=class extends Tg{constructor(e,t,i,n){super(e,n),this.contributions=e,this.lineRender=t,this.areaRender=i,this.drawItemInterceptorContributions=n,this.rendering=!1,this.currFrameStartAt=0,this.currentIdx=0,this.status=Pf.NORMAL,this.checkingForDrawPromise=null,this.hooks={completeDraw:new Yo([])},this.defaultRenderMap.set(this.lineRender.numberType,this.lineRender),this.defaultRenderMap.set(this.areaRender.numberType,this.areaRender)}draw(e,t){return Df(this,void 0,void 0,(function*(){if(this.checkingForDrawPromise)return;this.lastRenderService=e,this.lastDrawContext=t,this.checkingForDrawPromise=this.checkForDraw(t);const i=yield this.checkingForDrawPromise;if(this.checkingForDrawPromise=null,i)return;this.currentRenderService=e;const{context:n,x:r=0,y:s=0}=t;n&&(n.inuse=!0,n.clearMatrix(),n.setTransformForCurrent(!0),n.save(),t.restartIncremental&&this.clearScreen(this.currentRenderService,n,t),n.translate(r,s,!0),n.save(),e.renderTreeRoots.sort(((e,t)=>{var i,n;return(null!==(i=e.attribute.zIndex)&&void 0!==i?i:xc.zIndex)-(null!==(n=t.attribute.zIndex)&&void 0!==n?n:xc.zIndex)})).forEach((e=>{this.renderGroup(e,t)})),this.hooks.completeDraw.tap("top-draw",(()=>{n.restore(),n.restore(),n.draw(),n.inuse=!1,this.rendering=!1})))}))}_increaseRender(e,t){return Df(this,void 0,void 0,(function*(){this.rendering=!0,yield this._renderIncrementalGroup(e,t)}))}_renderIncrementalGroup(e,t){return Df(this,void 0,void 0,(function*(){this.count=e.count,yield new Promise((i=>{this.renderItem(e,t,{drawingCb:()=>Df(this,void 0,void 0,(function*(){if(2!==e.count)yield Up(e,xc.zIndex,((i,n)=>{if(this.status===Pf.STOP)return!0;if(i.isContainer)return!1;if(n<this.currentIdx)return!1;const r=this.currFrameStartAt+e.incremental;return n<r&&(this.currentIdx=n+1,this.renderItem(i,t)),n===r-1&&(this.currFrameStartAt=this.currentIdx,this.waitToNextFrame())})),i(!1);else{const n=e.getChildAt(0);if(n.incremental&&n.attribute.segments)for(n.incrementalAt||(n.incrementalAt=0);n.incrementalAt<n.attribute.segments.length;)t.multiGraphicOptions={startAtIdx:n.incrementalAt,length:n.incremental},this.renderItem(n,t),n.incrementalAt+=n.incremental,yield this.waitToNextFrame();else this.renderItem(n,t);i(!1)}}))})})),this.hooks.completeDraw.call()}))}waitToNextFrame(){return Df(this,void 0,void 0,(function*(){return new Promise((e=>{this.global.getRequestAnimationFrame()((()=>{e(!1)}))}))}))}checkForDraw(e){return Df(this,void 0,void 0,(function*(){let t=this.rendering;return e.restartIncremental&&(t=!1,yield this.forceStop(),this.resetToInit()),t}))}forceStop(){return Df(this,void 0,void 0,(function*(){this.rendering&&(this.status=Pf.STOP,yield new Promise((e=>{this.hooks.completeDraw.tap("stopCb",(()=>{this.status=Pf.NORMAL,this.hooks.completeDraw.taps=this.hooks.completeDraw.taps.filter((e=>"stopCb"!==e.name)),e(!1)}))})))}))}resetToInit(){this.currFrameStartAt=0,this.currentIdx=0}renderGroup(e,t){return Df(this,void 0,void 0,(function*(){if(!t.break&&!1!==e.attribute.visibleAll)return e.incremental&&t.startAtId===e._uid?(yield this._increaseRender(e,t),void(t.break=!0)):void(yield new Promise((i=>{this.renderItem(e,t,{drawingCb:()=>Df(this,void 0,void 0,(function*(){yield Up(e,xc.zIndex,(e=>Df(this,void 0,void 0,(function*(){t.break||e.isContainer&&(yield this.renderGroup(e,t))})))),i(!1)}))})})))}))}};Lf=Mf([jo(),Rf(0,zp(Pu)),Rf(1,Ho(mf)),Rf(2,Ho(Of)),Rf(3,Ho(Uo)),Rf(3,Vo(pg)),If("design:paramtypes",[Array,Object,Object,Object])],Lf);const jf=new Oo((e=>{e(ef).toSelf().inSingletonScope(),e(bf).toSelf().inSingletonScope(),e(Uu).to(Tg),e(ku).to(Lf),e(Mu).to(lf).inSingletonScope(),e(Pu).toService(Mu),Go(e,Ug),e(nf).toSelf().inSingletonScope(),Go(e,Zg),Go(e,Pu),e(vg).toSelf().inSingletonScope(),e(pg).toService(vg),Go(e,pg)}));function Ff(){Ff.__loaded||(Ff.__loaded=!0,ph.load(Cu),ph.load(_p),ph.load(qu),ph.load(ap),ph.load(Ep),function(e){e.load(Tp),e.load(Op),e.load(Np)}(ph),function(e){e.load(jf)}(ph))}Ff.__loaded=!1,Ff();const Bf=ph.get(qo);se.global=Bf;const Nf=ph.get(fu);se.graphicUtil=Nf;const zf=ph.get(gu);se.transformUtil=zf;const Hf=ph.get(au);se.graphicService=Hf;const Vf=ph.get(mu);function Uf(e,t){return z(e).reduce(((e,i)=>{const n=_(i)?t.getGrammarById(i):i;return n&&e.push(n),e}),[])}function Wf(e,t){if(P(e))return[];if(!Q(i=e)&&(null==i?void 0:i.signal)){const i=e.signal;if(_(i))return z(t.getGrammarById(i));if("signal"===(null==i?void 0:i.grammarType))return[i]}else if(function(e){return!Q(e)&&!!(null==e?void 0:e.callback)}(e))return Uf(e.dependency,t);var i;return[]}function Gf(e){return Q(e)||(null==e?void 0:e.signal)||!!(null==e?void 0:e.callback)}function Kf(e,t,i,n){if(P(e))return e;if(Q(e))return n?e.call(null,i,n,t):e.call(null,i,t);if(e.signal){const i=e.signal;return _(i)?null==t?void 0:t[i]:i.output()}return e.callback?n?e.callback.call(null,i,n,t):e.callback.call(null,i,t):e}function Yf(e,t){if(P(e))return e;if(Q(e))return e.call(null,t);if(e.signal){const i=e.signal;return _(i)?null==t?void 0:t[i]:i.output()}return e.callback?e.callback.call(null,t):e}function Xf(e,t){return qf(e)?e.output():t[e]}se.layerService=Vf;const qf=e=>e&&!P(e.grammarType),Zf=e=>Q(e)?e:t=>t[e],Qf=(e,t)=>qf(e)?e.output():e&&D(e)?Q(e.callback)?i=>e.callback(i,t):Q(e.value)?e.value(t):e:e,$f=(e,t)=>e?D(e)?Object.keys(e).reduce(((i,n)=>{const r=e[n];return i[n]=Qf(r,t),i}),{}):e.map((e=>Qf(e,t))):e;var Jf=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};let em=-1;class tm extends(a()){constructor(e){super(),this.spec={},this.references=new Map,this.targets=[],this.transforms=[],this.view=e,this.uid=++em}parse(e){return this.id(e.id),this.name(e.name),this.depend(e.dependency),this}depend(e){var t;if(null===(t=this.spec)||void 0===t?void 0:t.dependency){const e=z(this.spec.dependency).map((e=>_(e)?this.view.getGrammarById(e):e));this.detach(e)}this.spec.dependency=e;const i=z(e).map((e=>_(e)?this.view.getGrammarById(e):e));return this.attach(i),this.commit(),this}addEventListener(e,t,i){let n=t;return i&&!1===i.trap||(n=t,n.raw=t),i&&i.target&&(n.target=i.target),this.on(e,n),this}removeEventListener(e,t){return t?this.off(e,t):this.off(e),this}emit(e){for(var t,i,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return null===(i=null===(t=this.view)||void 0===t?void 0:t.emit)||void 0===i||i.call(t,e,...r),super.emit(e,...r)}emitGrammarEvent(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return super.emit(e,...i)}evaluateTransform(e,t,i){return Jf(this,void 0,void 0,(function*(){if(!e||!e.length)return t;let n=t,r=0;const s=e.length;for(;r<s;){const t=e[r];this.emit($r.BEFORE_TRANSFORM,t.type),n=t.transform(t.isRawOptions?t.options:$f(t.options,i),n,i,this.view),(null==n?void 0:n.then)&&(n=yield n),r++,this.emit($r.AFTER_TRANSFORM,t.type)}return n}))}evaluateTransformSync(e,t,i){if(!e||!e.length)return t;let n=t,r=0;const s=e.length;for(;r<s;){const t=e[r];this.emit($r.BEFORE_TRANSFORM,t.type),n=t.transform(t.isRawOptions?t.options:$f(t.options,i),n,i,this.view),r++,this.emit($r.AFTER_TRANSFORM,t.type)}return n}set(e){return!1}id(e){return arguments.length?(this.view.grammars.unrecord(this),this._id=e,this.view.grammars.record(this),this):this._id}name(e){return arguments.length?(this._name=e,this):this._name}attach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return z(e).filter((e=>!P(e))).forEach((i=>{var n;P(e)||(i.targets.includes(this)||i.targets.push(this),this.references.set(i,(null!==(n=this.references.get(i))&&void 0!==n?n:0)+t))})),this}detach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return z(e).filter((e=>!P(e))).forEach((e=>{const i=this.references.get(e)-t;i>0?this.references.set(e,i-1):(this.references.delete(e),e.targets.includes(this)&&(e.targets=e.targets.filter((e=>e!==this))))})),this}detachAll(){this.references.forEach(((e,t)=>{this.detach(t,e)}))}link(e){this.grammarSource=e}run(){var e;const t=null===(e=this.grammarSource)||void 0===e?void 0:e.output(),i=this.parameters();return this.evaluate(t,i)}runSync(){var e;const t=null===(e=this.grammarSource)||void 0===e?void 0:e.output(),i=this.parameters();return this.evaluateSync?this.evaluateSync(t,i):this.evaluate(t,i)}commit(){this.view.commit(this)}parameters(){const e={};return this.references.forEach(((t,i)=>{x(i.id())&&(e[i.id()]=i.output())})),e}getSpec(){return this.spec}reuse(e){return this}clear(){this.spec=null,this.view=null}release(){this.clear()}setFunctionSpec(e,t){return P(this.spec[t])||this.detach(Wf(this.spec[t],this.view)),this.spec[t]=e,this.attach(Wf(e,this.view)),this.commit(),this}}class im{constructor(e,t,i,n){this.channelEncoder={},this.marks=e,t&&this.registerChannelEncoder(t),i&&this.registerDefaultEncoder(i),this.progressiveChannels&&this.registerProgressiveChannels(n)}getMarks(){return this.marks}registerChannelEncoder(e,t){return _(e)?this.channelEncoder[e]=t:Object.assign(this.channelEncoder,e),this}registerFunctionEncoder(e){return this.functionEncoder=e,this}registerDefaultEncoder(e){return this.defaultEncoder=e,this}registerProgressiveChannels(e){return this.progressiveChannels=z(e),this}getChannelEncoder(){return this.channelEncoder}getFunctionEncoder(){return this.functionEncoder}getDefaultEncoder(){return this.defaultEncoder}getProgressiveChannels(){return this.progressiveChannels}}class nm{static registerPlotMarks(e,t){nm._plotMarks[e]=t}static createPlotMark(e,t){return nm._plotMarks[e]?new(0,nm._plotMarks[e])(t):null}static registerMark(e,t){nm._marks[e]=t}static createMark(e,t,i){return nm._marks[e]?new(0,nm._marks[e])(t,e,i):null}static hasMark(e){return!!nm._marks[e]}static registerComponent(e,t){nm._components[e]=t}static createComponent(e,t,i,n){const r=nm._components[e];return r?new r(t,i,n):null}static hasComponent(e){return!!nm._components[e]}static registerGraphicComponent(e,t){nm._graphicComponents[e]=t}static createGraphicComponent(e,t,i){const n=nm._graphicComponents[e];return n?n(t,i):null}static registerTransform(e,t,i){nm._transforms[e]=Object.assign(t,{type:e,isBuiltIn:!!i})}static getTransform(e){return nm._transforms[e]}static unregisterRuntimeTransforms(){Object.keys(nm._transforms).forEach((e=>{nm._transforms[e]&&!nm._transforms[e].isBuiltIn&&(nm._transforms[e]=null)}))}static registerGrammar(e,t,i){nm._grammars[e]={grammarClass:t,specKey:null!=i?i:e}}static createGrammar(e,t,i){var n;const r=null===(n=nm._grammars[e])||void 0===n?void 0:n.grammarClass;return r?new r(t,i):null}static getGrammars(){return this._grammars}static getGlyph(e){return nm._glyphs[e]}static createInteraction(e,t,i){const n=nm._interactions[e];return n?new n(t,i):null}}nm._plotMarks={},nm._marks={},nm._components={},nm._graphicComponents={},nm._transforms={},nm._grammars={},nm._glyphs={},nm._animations={},nm._interactions={},nm._graphics={},nm.registerGlyph=(e,t,i,n,r)=>(nm._glyphs[e]=new im(t,i,n,r),nm._glyphs[e]),nm.registerAnimationType=(e,t)=>{nm._animations[e]=t},nm.getAnimationType=e=>nm._animations[e],nm.registerInteraction=(e,t)=>{nm._interactions[e]=t},nm.registerGraphic=(e,t)=>{nm._graphics[e]=t},nm.getGraphicType=e=>nm._graphics[e],nm.createGraphic=(e,t)=>{const i=nm._graphics[e];return i?i(t):null};const rm=(e,t,i)=>{var n,r;if("callback"===e&&Q(t))return{references:[],value:{callback:t,dependency:[]}};if(!P(t.data)){const e=i.getDataById(t.data);return{references:[e],value:e}}if(!P(t.customized)){const e=i.getCustomizedById(t.customized);return{references:[e],value:e}}if(!P(t.scale)){const e=i.getScaleById(t.scale);return{references:[e],value:e}}if((r=t)&&(r.signal||r.callback)){const e=Wf(t,i);return{references:e,value:t.callback?{value:t.callback,dependency:e}:null!==(n=null==e?void 0:e[0])&&void 0!==n?n:t}}return{value:t}},sm=(e,t)=>{const i=nm.getTransform(e.type);if(!i)return;const n={};let r=[];return Object.keys(e).forEach((i=>{var s;if("type"===i)return;const a=e[i];if("dependency"===i)return void((null==a?void 0:a.length)&&(r=r.concat(Uf(a,t))));const o=((e,t,i)=>{if(P(t))return{value:t};if(v(t)){const n=t.map((t=>rm(e,t,i)));return{references:n.reduce(((e,t)=>(t.references&&e.concat(t.references),e)),[]),value:n.map((e=>e.value))}}return rm(e,t,i)})(i,a,t);o&&((null===(s=o.references)||void 0===s?void 0:s.length)&&(r=r.concat(o.references)),n[i]=o.value)})),{markPhase:i.markPhase,transform:i.transform,canProgressive:i.canProgressive,type:i.type,options:n,references:r}},am=(e,t)=>{if(null==e?void 0:e.length){const i=[];let n=[];return e.forEach((e=>{var r;const s=sm(e,t);s&&((null===(r=s.references)||void 0===r?void 0:r.length)&&(n=n.concat(s.references)),i.push(s))})),{transforms:i,refs:n}}return null};var om=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const lm={csv:yn,dsv:vn,tsv:bn,json:function(e){if(!_(e))return z(e);try{return z(JSON.parse(e))}catch(t){return[]}}};var cm=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class hm extends tm{constructor(e,t,i){super(e),this.grammarType="data",this.spec={},this._dataIDKey="VGRAMMAR_DATA_ID_KEY_".concat(this.uid),this._loadTasks=[],this._postFilters=[],this.ingest=e=>{const t=Yf(e.format,this.parameters());return this._input=((e,t)=>{if(!t||!lm[t.type])return z(e);const i="dsv"===t.type?{delimiter:t.delimiter}:{};return lm[t.type](e,i,new R(new f))})(e.values,t),this._input},this.load=e=>{var t;if(e.values)return this.ingest(e);const i=Yf(e.url,this.parameters()),n=null!==(t=Yf(e.format,this.parameters()))&&void 0!==t?t:{type:"json"};return(e=>om(void 0,void 0,void 0,(function*(){try{return(yield fetch(e)).text()}catch(fe){return null}})))(i).then((e=>this.ingest({values:e,format:n})))},this.relay=e=>e[0],this.evaluateSync=(e,t)=>{this.view.emit($r.BEFORE_EVALUATE_DATA);const i=this._isLoaded?this.transforms:this._loadTasks.concat(this.transforms),n=this.evaluateTransformSync(i,this.grammarSource?e:this._input,t),r=this._evaluateFilter(n,t);return this.setValues(r),this._isLoaded=!0,this.view.emit($r.AFTER_EVALUATE_DATA),this},this._loadTasks=[],P(t)||this.values(t,i)}parse(e){return super.parse(e),this._isLoaded=!1,this.source(e.source,e.format,!1),this.url(e.url,e.format,!1),this.values(e.values,e.format,!1),this.transform(e.transform),this.parseLoad(e),this.commit(),this}parseDataSource(e){const t=[],i=[],n=e.format?Wf(e.format,this.view)[0]:null;if(n&&t.push(n),e.values){const n=Wf(e.values,this.view)[0];n&&t.push(n),i.push({type:"ingest",transform:this.ingest,isRawOptions:!0,options:{values:e.values,format:e.format}})}else if(e.url){const r=Wf(e.url,this.view)[0];r&&t.push(r),i.push({type:"load",transform:this.load,options:{url:null!=r?r:e.url,format:null!=n?n:e.format}})}else if(e.source){const n=[];z(e.source).forEach((e=>{const i=qf(e)?e:this.view.getDataById(e);i&&(t.push(i),n.push(i))})),n.length&&(i.push({type:"relay",transform:this.relay,options:n}),this.grammarSource=n[0])}return{transforms:i,refs:t}}evaluate(e,t){return cm(this,void 0,void 0,(function*(){this.view.emit($r.BEFORE_EVALUATE_DATA);const i=this._isLoaded?this.transforms:this._loadTasks.concat(this.transforms);this.grammarSource&&(this._input=e);const n=yield this.evaluateTransform(i,this._input,t),r=this._evaluateFilter(n,t);return this.setValues(r),this._isLoaded=!0,this.view.emit($r.AFTER_EVALUATE_DATA),this}))}output(){return this._values}getDataIDKey(){return this._dataIDKey}values(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=Object.assign({},this.spec,{values:e,format:t});return P(e)||(n.url=void 0,n.source=void 0),i?this.parseLoad(n):this}url(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=Object.assign({},this.spec,{url:e,format:t});return P(e)||(n.values=void 0,n.source=void 0),i?this.parseLoad(n):this}source(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=Object.assign({},this.spec,{source:e,format:t});return P(e)||(n.values=void 0,n.url=void 0),i?this.parseLoad(n):this}parseLoad(e){this.detach(this.parseDataSource(this.spec).refs),this.spec=e;const t=this.parseDataSource(this.spec);return this.attach(t.refs),this._loadTasks=t.transforms,this._isLoaded=!1,this.commit(),this}setValues(e){this._values=z(e).map(((e,t)=>{const i=e===Object(e)?e:{data:e};return i[this._dataIDKey]=t,i}))}field(e){return this._values.map((t=>t[e]))}transform(e){const t=am(this.spec.transform,this.view);t&&(this.detach(t.refs),this.transforms=[]),this.spec.transform=e;const i=am(this.spec.transform,this.view);return i&&(this.attach(i.refs),this.transforms=i.transforms),this.commit(),this}getValue(){return this._values}getInput(){return this._input}addDataFilter(e){return this._postFilters=this._postFilters.concat(z(e)),this._postFilters.sort(((e,t)=>{var i,n;return(null!==(i=e.rank)&&void 0!==i?i:0)-(null!==(n=t.rank)&&void 0!==n?n:0)})),this}removeDataFilter(e){const t=z(e);return this._postFilters=this._postFilters.filter((e=>!t.includes(e))),this}_evaluateFilter(e,t){return this._postFilters.reduce(((e,i)=>i.filter(e,t)),e)}reuse(e){return e.grammarType!==this.grammarType||(this._isLoaded=!1,this._values=e.output()),this}clear(){super.clear(),this._input=null,this._values=null}}const dm="window",um="view",pm={trap:!1},gm="width",fm="height",mm="viewWidth",vm="viewHeight",ym="padding",bm="viewBox",_m="autoFit";function xm(e,t,i,n){let r,s;const a=e[t];for(;t>i&&(s=Math.floor((t-1)/2),r=e[s],a&&r&&n(a,r)<0);)e[t]=r,t=s;return e[t]=a}function Sm(e,t,i,n){const r=t,s=null!=i?i:e.length,a=e[t];let o,l=2*t+1;for(;l<s;)o=l+1,o<s&&n(e[l],e[o])>=0&&(l=o),e[t]=e[l],l=2*(t=l)+1;return e[t]=a,xm(e,t,r,n)}class wm{constructor(e){this.compare=e,this.nodes=[]}size(){return this.nodes.length}last(){return this.nodes[0]}validate(){for(let e=this.nodes.length-1;e>0;e-=1){const t=Math.floor((e-1)/2);if(this.compare(this.nodes[t],this.nodes[e])>0)return!1}return!0}push(e){if(this.nodes.includes(e)){const t=this.nodes.indexOf(e);return xm(this.nodes,t,0,this.compare),Sm(this.nodes,t,null,this.compare)}return this.nodes.push(e),xm(this.nodes,this.nodes.length-1,0,this.compare)}remove(e){if(this.nodes.includes(e)){const t=this.nodes.indexOf(e);this.nodes=this.nodes.slice(0,t).concat(this.nodes.slice(t+1)),xm(this.nodes,t,0,this.compare),Sm(this.nodes,t,null,this.compare)}}pop(){const e=this.nodes.pop();let t;return this.nodes.length?(t=this.nodes[0],this.nodes[0]=e,Sm(this.nodes,0,null,this.compare)):t=e,t}clear(){this.nodes=[]}}const Cm=(e,t,i)=>(e.fields=t||[],e.fname=i,e);const km=e=>t=>Br(t,e),Am=e=>{u.getInstance().error(e)},Em=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Q(e))return e;const n=(e=>{const t=[],i=e.length;let n,r,s,a=null,o=0,l="";e+="";const c=()=>{t.push(l+e.substring(n,r)),l="",n=r+1};for(n=0,r=0;r<i;r+=1)if(s=e[r],"\\"===s)l+=e.substring(n,r),l+=e.substring(++r,++r),n=r;else if(s===a)c(),a=null,o=-1;else{if(a)continue;n===o&&'"'===s||n===o&&"'"===s?(n=r+1,a=s):"."!==s||o?"["===s?(r>n&&c(),n=r+1,o=n):"]"===s&&(o||Am("Access path missing open bracket: "+e),o>0&&c(),o=0,n=r+1):r>n?c():n=r+1}return o&&Am("Access path missing closing bracket: "+e),a&&Am("Access path missing closing quote: "+e),r>n&&(r+=1,c()),t})(e),r=1===n.length?n[0]:e;return Cm((i&&i.get||km)(n),[r],t||r)},Tm=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(v(e)){const n=e.map((e=>Em(e,t,i)));return e=>n.map((t=>t(e)))}return Em(e,t,i)},Om=(Tm("id"),Cm((function(e){return e}),[],"identity")),Pm=Cm((function(){return 0}),[],"zero");Cm((function(){return 1}),[],"one"),Cm((function(){return!0}),[],"true"),Cm((function(){return!1}),[],"false"),Cm((function(){return{}}),[],"emptyObject");class Mm{constructor(e){this.list=[],this.ids={},this.idFunc=e||Om}add(e){const t=this.idFunc(e);return this.ids[t]||(this.ids[t]=1,this.list.push(e)),this}remove(e){const t=this.idFunc(e);return this.ids[t]&&(this.ids[t]=0,this.list=this.list.filter((t=>t!==e))),this}forEach(e,t){t?this.list.slice().reverse().forEach(e):this.list.forEach(e)}filter(e){return this.list.filter(e)}get length(){return this.list.length}getElementByIndex(e){return this.list[e]}}var Im=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class Rm{constructor(){this.grammars=[],this.logger=u.getInstance(),this._curRank=0,this._committed=new Mm((e=>e.uid)),this._heap=new wm(((e,t)=>(null==e?void 0:e.qrank)-(null==t?void 0:t.qrank))),this._beforeRunner=null,this._afterRunner=null,this._isRunning=!1,this._updateCounter=0,this._finishFirstRender=!1}asyncCallback(e){return Im(this,void 0,void 0,(function*(){try{yield e(this)}catch(H6){this.logger.error(H6)}}))}add(e){if(e)return this._setRankOfGrammar(e),this.commit(e),!this.grammars.includes(e)&&(this.grammars.push(e),!0)}remove(e){e&&(this._committed.remove(e),this._heap.remove(e),this.grammars=this.grammars.filter((t=>t!==e)))}_setRankOfGrammar(e){e&&(e.rank=++this._curRank)}_reRank(e){const t=[e];for(;t.length;){const i=t.pop();this._setRankOfGrammar(i);const n=i.targets;n&&n.forEach((i=>{t.push(i),i===e&&this.logger.error("Cycle detected in dataflow graph.")}))}}_enqueue(e){e&&(e.qrank=e.rank,this._heap.push(e))}_logGrammarRunInfo(e){if(this.logger.canLogError()){const t=[{key:"id",value:e.id()},{key:"name",value:e.name()}].reduce(((e,t,i)=>P(t.value)?e:"".concat(e).concat(i?" , ":"").concat(t.key,": ").concat(t.value)),"");this.logger.debug("Run Operator: ",e,t)}}hasCommitted(){return!!this._committed.length}commit(e){return this._isRunning?this._enqueue(e):this._committed.add(e),this}_beforeEvaluate(){this.grammars.forEach((e=>{e.targets.some((t=>(null==t?void 0:t.rank)<(null==e?void 0:e.rank)))&&this._reRank(e)})),this._committed.forEach((e=>this._enqueue(e))),this._committed=new Mm((e=>e.uid))}_enqueueTargets(e){e.targets&&e.targets.length&&this._finishFirstRender&&e.targets.forEach((e=>this._enqueue(e)))}evaluate(){return Im(this,void 0,void 0,(function*(){if(this._isReleased)return;if(this._beforeRunner&&(yield this.asyncCallback(this._beforeRunner)),!this._committed.length)return this.logger.info("Dataflow invoked, but nothing to do."),!1;this._isRunning=!0,this._updateCounter+=1;let e,t,i,n,r=0;this.logger.canLogInfo()&&(i=Date.now(),this.logger.debug("-- START PROPAGATION (".concat(this._updateCounter,") -----"))),this._beforeEvaluate();try{for(;this._heap.size()>0&&!this._isReleased;)if(e=this._heap.pop(),e)if(e.rank===e.qrank){if(t=e.run(),t&&t.then&&(t=yield t),!this._isRunning)return!1;this._logGrammarRunInfo(e),this._enqueueTargets(e),r+=1}else this._enqueue(e)}catch(H6){this._heap.clear(),n=H6}return!this._isReleased&&(this._isRunning=!1,this.logger.canLogInfo()&&(i=Date.now()-i,this.logger.info("> ".concat(r," grammars; ").concat(i," ms"))),n?this.logger.error(n):this._afterRunner&&(yield this.asyncCallback(this._afterRunner)),this._finishFirstRender=!0,!0)}))}evaluateSync(){if(this._beforeRunner&&this._beforeRunner(this),!this._committed.length)return this.logger.info("Dataflow invoked, but nothing to do."),!1;this._isRunning=!0,this._updateCounter+=1;let e,t,i=0;for(this.logger.canLogInfo()&&(t=Date.now(),this.logger.debug("-- START PROPAGATION (".concat(this._updateCounter,") -----"))),this._beforeEvaluate();this._heap.size()>0;)e=this._heap.pop(),e&&(e.rank===e.qrank?(e.runSync(),this._logGrammarRunInfo(e),this._enqueueTargets(e),i+=1):this._enqueue(e));return this._isRunning=!1,this.logger.canLogInfo()&&(t=Date.now()-t,this.logger.info("> ".concat(i," grammars updated; ").concat(t," ms"))),this._afterRunner&&this._afterRunner(this),this._finishFirstRender=!0,!0}stop(){this._isRunning&&(this._isRunning=!1)}runBefore(e){this._beforeRunner=e}runAfter(e){this._afterRunner=e}release(){this.stop(),this._isReleased=!0,this._heap&&(this._heap.clear(),this._heap=null),this.logger=null,this._committed=null}}const Dm=(e,t,i,n,r)=>{const s=e=>{if(r||!e||n&&!n(e)||i.call(null,e),e.markType===Vr.group){const i=e[t];i&&i.forEach((e=>{s(e)}))}r&&(!e||n&&!n(e)||i.call(null,e))};s(e)},Lm="__vgrammar_scene_item__",jm=[Vr.line,Vr.area],Fm=[Vr.arc3d,Vr.rect3d,Vr.pyramid3d],Bm="key",Nm=[{}],zm=["key"],Hm=!0,Vm=!0,Um=!1,Wm=!0,Gm="VGRAMMAR_IMMEDIATE_ANIMATION",Km=0,Ym=1e3,Xm=0,qm=0,Zm=!1,Qm=!1,$m="quintInOut",Jm={stopWhenStateChange:!1,immediatelyApply:!0},ev="VGRAMMAR_ANIMATION_PARAMETERS",tv=e=>void 0===e;class iv extends Uh{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,n,r,s,a,o,l,c,h,d,u,p,g){throw new Error("Method not implemented.")}}class nv extends iv{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}clone(){var e,t,i;const n=new nv(this.manager);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n.nativeEvent=this.nativeEvent,n.originalEvent=this.originalEvent,null===(e=this.manager)||void 0===e||e.copyPointerData(this,n),null===(t=this.manager)||void 0===t||t.copyMouseData(this,n),null===(i=this.manager)||void 0===i||i.copyData(this,n),n.target=this.target,n.path=this.composedPath().slice(),n.type=this.type,n}}class rv extends iv{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var e,t,i;const n=new rv(this.manager);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n.nativeEvent=this.nativeEvent,n.originalEvent=this.originalEvent,null===(e=this.manager)||void 0===e||e.copyWheelData(this,n),null===(t=this.manager)||void 0===t||t.copyMouseData(this,n),null===(i=this.manager)||void 0===i||i.copyData(this,n),n.target=this.target,n.path=this.composedPath().slice(),n.type=this.type,n}}rv.DOM_DELTA_PIXEL=0,rv.DOM_DELTA_LINE=1,rv.DOM_DELTA_PAGE=2;const sv="object"==typeof performance&&performance.now?performance:Date;function av(e){return"mouse"===e||"pen"===e}class ov{constructor(e,t){this.dispatch=new(a()),this.cursorTarget=null,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(e,t)=>{if(!(e instanceof nv))return void u.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const i=this.createPointerEvent(e,e.type,t);if(this.dispatchEvent(i,"pointerdown"),"touch"===i.pointerType)this.dispatchEvent(i,"touchstart");else if(av(i.pointerType)){const e=2===i.button;this.dispatchEvent(i,e?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=i.composedPath(),this.freeEvent(i)},this.onPointerMove=(e,t)=>{var i,n;if(!(e instanceof nv))return void u.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const r=this.createPointerEvent(e,e.type,t),s=av(r.pointerType),a=this.trackingData(e.pointerId),o=this.findMountedTarget(a.overTargets);if(a.overTargets&&o&&o!==this.rootTarget&&o!==r.target){const t="mousemove"===e.type?"mouseout":"pointerout",i=this.createPointerEvent(e,t,o||void 0);if(this.dispatchEvent(i,"pointerout"),s&&this.dispatchEvent(i,"mouseout"),!r.composedPath().includes(o)){const t=this.createPointerEvent(e,"pointerleave",o||void 0);for(t.eventPhase=t.AT_TARGET;t.target&&!r.composedPath().includes(t.target);)t.currentTarget=t.target,this.notifyTarget(t),s&&this.notifyTarget(t,"mouseleave"),t.target=t.target.parent;this.freeEvent(t)}this.freeEvent(i)}if(o!==r.target){const t="mousemove"===e.type?"mouseover":"pointerover",i=this.clonePointerEvent(r,t);this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover");let n=null==o?void 0:o.parent;for(;n&&n!==this.rootTarget.parent&&n!==r.target;)n=n.parent;if(!n||n===this.rootTarget.parent){const e=this.clonePointerEvent(r,"pointerenter");for(e.eventPhase=e.AT_TARGET;e.target&&e.target!==o&&e.target!==this.rootTarget.parent;)e.currentTarget=e.target,this.notifyTarget(e),s&&this.notifyTarget(e,"mouseenter"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(i)}this.dispatchEvent(r,"pointermove"),"touch"===r.pointerType&&this.dispatchEvent(r,"touchmove"),s&&(this.dispatchEvent(r,"mousemove"),this.cursorTarget=r.target,this.cursor=(null===(n=null===(i=r.target)||void 0===i?void 0:i.attribute)||void 0===n?void 0:n.cursor)||this.rootTarget.getCursor()),a.overTargets=r.composedPath(),this.freeEvent(r)},this.onPointerOver=(e,t)=>{var i,n;if(!(e instanceof nv))return void u.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const r=this.trackingData(e.pointerId),s=this.createPointerEvent(e,e.type,t),a=av(s.pointerType);this.dispatchEvent(s,"pointerover"),a&&this.dispatchEvent(s,"mouseover"),"mouse"===s.pointerType&&(this.cursorTarget=s.target,this.cursor=(null===(n=null===(i=s.target)||void 0===i?void 0:i.attribute)||void 0===n?void 0:n.cursor)||this.rootTarget.getCursor());const o=this.clonePointerEvent(s,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),a&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;r.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(o)},this.onPointerOut=(e,t)=>{if(!(e instanceof nv))return void u.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const i=this.trackingData(e.pointerId);if(i.overTargets){const t=av(e.pointerType),n=this.findMountedTarget(i.overTargets),r=this.createPointerEvent(e,"pointerout",n||void 0);this.dispatchEvent(r),t&&this.dispatchEvent(r,"mouseout");const s=this.createPointerEvent(e,"pointerleave",n||void 0);for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),t&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;i.overTargets=[],this.freeEvent(r),this.freeEvent(s)}this.cursorTarget=null,this.cursor=""},this.onPointerUp=(e,t)=>{var i;if(!(e instanceof nv))return void u.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const n=sv.now(),r=this.createPointerEvent(e,e.type,t);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if(av(r.pointerType)){const e=2===r.button;this.dispatchEvent(r,e?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.pressTargetsByButton[e.button]);let o=a;if(a&&!r.composedPath().includes(a)){let t=a;for(;t&&!r.composedPath().includes(t);){if(r.currentTarget=t,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if(av(r.pointerType)){const e=2===r.button;this.notifyTarget(r,e?"rightupoutside":"mouseupoutside")}t=t.parent}delete s.pressTargetsByButton[e.button],o=t}if(o){const t=this.clonePointerEvent(r,"click");t.target=o,t.path=[],s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:t.target,timeStamp:n});const a=s.clicksByButton[e.button];a.target===t.target&&n-a.timeStamp<(null!==(i=this._config.clickInterval)&&void 0!==i?i:200)?++a.clickCount:a.clickCount=1,a.target=t.target,a.timeStamp=n,t.detail=a.clickCount,av(t.pointerType)?(this.dispatchEvent(t,"click"),2===a.clickCount&&this.dispatchEvent(t,"dblclick")):"touch"===t.pointerType&&(this.dispatchEvent(t,"tap"),2===a.clickCount&&this.dispatchEvent(t,"dbltap")),this.dispatchEvent(t,"pointertap"),this.freeEvent(t)}this.freeEvent(r)},this.onPointerUpOutside=(e,t)=>{if(!(e instanceof nv))return void u.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const i=this.trackingData(e.pointerId),n=this.findMountedTarget(i.pressTargetsByButton[e.button]),r=this.createPointerEvent(e,e.type,t);if(n){let t=n;for(;t;)r.currentTarget=t,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):av(r.pointerType)&&this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),t=t.parent;delete i.pressTargetsByButton[e.button]}this.freeEvent(r)},this.onWheel=(e,t)=>{if(!(e instanceof rv))return void u.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event");const i=this.createWheelEvent(e,t);this.dispatchEvent(i),this.freeEvent(i)},this.rootTarget=e,this.mappingTable={},this._config=Object.assign({clickInterval:200},t),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(((e,t)=>e.priority-t.priority))}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){var t,i,n,r,s,a,o;if(!this.rootTarget)return;const l=this.mappingTable[e.type];let c;const h="".concat(e.canvasX,"-").concat(e.canvasY);if((null===(t=this._prePointTargetCache)||void 0===t?void 0:t[h])&&(null===(n=null===(i=this._prePointTargetCache)||void 0===i?void 0:i[h])||void 0===n?void 0:n.stage)&&(null===(s=null===(r=this._prePointTargetCache)||void 0===r?void 0:r[h])||void 0===s?void 0:s.stage.renderCount)===(null===(a=this._prePointTargetCache)||void 0===a?void 0:a.stageRenderCount)?c=this._prePointTargetCache[h]:(c=this.pickTarget(e.canvasX,e.canvasY,e),e.pickParams||(this._prePointTargetCache={[h]:c,stageRenderCount:null!==(o=null==c?void 0:c.stage.renderCount)&&void 0!==o?o:-1})),l)for(let d=0,u=l.length;d<u;d++)l[d].fn(e,c);else u.getInstance().warn("[EventManager]: Event mapping not defined for ".concat(e.type))}propagate(e,t){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,r=i.length-1;n<r;n++)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}propagationPath(e){const t=[e];for(let i=0;i<2048&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}notifyTarget(e,t){t=null!=t?t:e.type;const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){const n=this.allocateEvent(nv);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=i||this.pickTarget(n.global.x,n.global.y,n),"string"==typeof t&&(n.type=t),n}createWheelEvent(e,t){const i=this.allocateEvent(rv);return this.copyWheelData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=t||this.pickTarget(i.global.x,i.global.y,i),i}clonePointerEvent(e,t){const i=this.allocateEvent(nv);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=null!=t?t:i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof nv&&t instanceof nv&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof iv&&t instanceof iv&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.metaKey=e.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach((i=>{t[i].x=e[i].x,t[i].y=e[i].y})))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=sv.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.x=e.layer.x,t.layer.y=e.layer.y,t.page.x=e.page.x,t.page.y=e.page.y,t.pickParams=e.pickParams}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){var t;this.eventPool.has(e)||this.eventPool.set(e,[]);const i=(null===(t=this.eventPool.get(e))||void 0===t?void 0:t.pop())||new e(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=[],i.target=null,i}freeEvent(e){var t;if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventManager!");const i=e.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),null===(t=this.eventPool.get(i))||void 0===t||t.push(e)}notifyListeners(e,t){const i=e.currentTarget._events[t];if(i)if("fn"in i)i.once&&e.currentTarget.removeEventListener(t,i.fn,{once:!0}),i.fn.call(i.context,e);else for(let n=0,r=i.length;n<r&&!e.propagationImmediatelyStopped;n++)i[n].once&&e.currentTarget.removeEventListener(t,i[n].fn,{once:!0}),i[n].fn.call(i[n].context,e);this.emitDelegation(e,t)}emitDelegation(e,t){const i=e.currentTarget._events["*"];if(i)if("fn"in i)i.fn.call(i.context,e,t);else for(let n=0,r=i.length;n<r&&!e.propagationImmediatelyStopped;n++)i[n].fn.call(i[n].context,e,t)}pickTarget(e,t,i){let n;const r=this.rootTarget.pick(e,t);return n=r&&r.graphic?r.graphic:r&&r.group?r.group:this.rootTarget.AABBBounds.contains(e,t)?this.rootTarget:null,i&&(i.pickParams=r.params),n}}const lv={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class cv{constructor(e){this.resolution=1,this.onPointerDown=e=>{if(this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,n=t.length;i<n;i++){const e=t[i],n=this.bootstrapEvent(this.rootPointerEvent,e);this.manager.mapEvent(n)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)},this.onPointerMove=e=>{if(this.supportsTouchEvents&&"touch"===e.pointerType)return;if(this.isEventOutsideOfTargetElement(e))return;const t=this.normalizeToPointerData(e);for(let i=0,n=t.length;i<n;i++){const e=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.manager.mapEvent(e)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)},this.onPointerUp=e=>{if(this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.isEventOutsideOfTargetElement(e)?"outside":"",i=this.normalizeToPointerData(e);for(let n=0,r=i.length;n<r;n++){const e=this.bootstrapEvent(this.rootPointerEvent,i[n]);e.type+=t,this.manager.mapEvent(e)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)},this.onPointerOverOut=e=>{if(this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.normalizeToPointerData(e);for(let i=0,n=t.length;i<n;i++){const e=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.manager.mapEvent(e)}this.setCursor(this.manager.cursor,this.manager.cursorTarget)},this.onWheel=e=>{const t=this.normalizeWheelEvent(e);this.manager.mapEvent(t)};const{targetElement:t,resolution:i,rootNode:n,global:r,viewport:s,autoPreventDefault:a=!1,clickInterval:o,supportsTouchEvents:l=r.supportsTouchEvents,supportsPointerEvents:c=r.supportsPointerEvents}=e;this.manager=new ov(n,{clickInterval:o}),this.globalObj=r,this.supportsPointerEvents=c,this.supportsTouchEvents=l,this.supportsMouseEvents=r.supportsMouseEvents,this.applyStyles=r.applyStyles,this.autoPreventDefault=a,this.eventsAdded=!1,this.viewport=s,this.rootPointerEvent=new nv,this.rootWheelEvent=new rv,this.cursorStyles={default:"inherit",pointer:"pointer"},this.resolution=i,this.setTargetElement(t)}release(){this.setTargetElement(null)}setCursor(e,t){if(!t&&!this.manager.rootTarget.window._handler.canvas.controled)return;e||(e="default");const{applyStyles:i,domElement:n}=this;if(this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];r?"string"==typeof r&&i?n.style.cursor=r:"function"==typeof r?r(e):"object"==typeof r&&i&&Object.assign(n.style,r):i&&_(e)&&!Bh(this.cursorStyles,e)&&(n.style.cursor=e)}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const{globalObj:e,domElement:t}=this;this.supportsPointerEvents?(e.getDocument()?(e.getDocument().addEventListener("pointermove",this.onPointerMove,!0),e.getDocument().addEventListener("pointerup",this.onPointerUp,!0)):(t.addEventListener("pointermove",this.onPointerMove,!0),t.addEventListener("pointerup",this.onPointerUp,!0)),t.addEventListener("pointerdown",this.onPointerDown,!0),t.addEventListener("pointerleave",this.onPointerOverOut,!0),t.addEventListener("pointerover",this.onPointerOverOut,!0)):(e.getDocument()?(e.getDocument().addEventListener("mousemove",this.onPointerMove,!0),e.getDocument().addEventListener("mouseup",this.onPointerUp,!0)):(t.addEventListener("mousemove",this.onPointerMove,!0),t.addEventListener("mouseup",this.onPointerUp,!0)),t.addEventListener("mousedown",this.onPointerDown,!0),t.addEventListener("mouseout",this.onPointerOverOut,!0),t.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(t.addEventListener("touchstart",this.onPointerDown,!0),t.addEventListener("touchend",this.onPointerUp,!0),t.addEventListener("touchmove",this.onPointerMove,!0)),t.addEventListener("wheel",this.onWheel,{capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const{globalObj:e,domElement:t}=this;this.supportsPointerEvents?(e.getDocument()?(e.getDocument().removeEventListener("pointermove",this.onPointerMove,!0),e.getDocument().removeEventListener("pointerup",this.onPointerUp,!0)):(t.removeEventListener("pointermove",this.onPointerMove,!0),t.removeEventListener("pointerup",this.onPointerUp,!0)),t.removeEventListener("pointerdown",this.onPointerDown,!0),t.removeEventListener("pointerleave",this.onPointerOverOut,!0),t.removeEventListener("pointerover",this.onPointerOverOut,!0)):(e.getDocument()?(e.getDocument().removeEventListener("mousemove",this.onPointerMove,!0),e.getDocument().removeEventListener("mouseup",this.onPointerUp,!0)):(t.removeEventListener("mousemove",this.onPointerMove,!0),t.removeEventListener("mouseup",this.onPointerUp,!0)),t.removeEventListener("mousedown",this.onPointerDown,!0),t.removeEventListener("mouseout",this.onPointerOverOut,!0),t.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(t.removeEventListener("touchstart",this.onPointerDown,!0),t.removeEventListener("touchend",this.onPointerUp,!0),t.removeEventListener("touchmove",this.onPointerMove,!0)),t.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapToViewportPoint(e){const t=this.viewport,{x:i,y:n}=e;return{x:i-t.x,y:n-t.y}}mapToCanvasPoint(e){var t;const i=null===(t=this.globalObj)||void 0===t?void 0:t.mapToCanvasPoint(e,this.domElement);if(i)return i;const{clientX:n,clientY:r}=e,s=this.domElement.getBoundingClientRect();return{x:n-s.left,y:r-s.top}}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e.changedTouches&&e.changedTouches.length)for(let i=0,n=e.changedTouches.length;i<n;i++){const n=e.changedTouches[i];tv(n.button)&&(n.button=0),tv(n.buttons)&&(n.buttons=1),tv(n.isPrimary)&&(n.isPrimary=1===e.touches.length&&"touchstart"===e.type),tv(n.width)&&(n.width=n.radiusX||1),tv(n.height)&&(n.height=n.radiusY||1),tv(n.tiltX)&&(n.tiltX=0),tv(n.tiltY)&&(n.tiltY=0),tv(n.pointerType)&&(n.pointerType="touch"),tv(n.pointerId)&&(n.pointerId=n.identifier||0),tv(n.pressure)&&(n.pressure=n.force||.5),tv(n.twist)&&(n.twist=0),tv(n.tangentialPressure)&&(n.tangentialPressure=0),tv(n.layerX)&&(n.layerX=n.offsetX=n.clientX),tv(n.layerY)&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(!this.globalObj.supportsMouseEvents||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof PointerEvent)){const i=e;tv(i.isPrimary)&&(i.isPrimary=!0),tv(i.width)&&(i.width=1),tv(i.height)&&(i.height=1),tv(i.tiltX)&&(i.tiltX=0),tv(i.tiltY)&&(i.tiltY=0),tv(i.pointerType)&&(i.pointerType="mouse"),tv(i.pointerId)&&(i.pointerId=1),tv(i.pressure)&&(i.pressure=.5),tv(i.twist)&&(i.twist=0),tv(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;const{x:i,y:n}=this.mapToCanvasPoint(e);t.canvas.x=i,t.canvas.y=n,t.global.x=i,t.global.y=n,t.offset.x=i,t.offset.y=n;const{x:r,y:s}=this.mapToViewportPoint(t);return t.viewport.x=r,t.viewport.y=s,t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);const{x:i,y:n}=this.mapToCanvasPoint(t);e.canvas.x=i,e.canvas.y=n,e.global.x=i,e.global.y=n,e.offset.x=i,e.offset.y=n;const{x:r,y:s}=this.mapToViewportPoint(e);return e.viewport.x=r,e.viewport.y=s,e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=lv[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=sv.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null}isEventOutsideOfTargetElement(e){let t=e.target;return e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]),t!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}}class hv{constructor(){this.name="AutoRenderPlugin",this.activeEvent="onRegister",this._uid=To.GenAutoIncrementId(),this.key=this.name+this._uid}activate(e){this.pluginService=e,se.graphicService.hooks.onAttributeUpdate.tap(this.key,(t=>{t.glyphHost&&(t=t.glyphHost),t.stage===e.stage&&null!=t.stage&&t.stage.renderNextFrame()})),se.graphicService.hooks.onSetStage.tap(this.key,(t=>{t.glyphHost&&(t=t.glyphHost),t.stage===e.stage&&null!=t.stage&&t.stage.renderNextFrame()}))}deactivate(e){se.graphicService.hooks.onAttributeUpdate.taps=se.graphicService.hooks.onAttributeUpdate.taps.filter((e=>e.name!==this.key)),se.graphicService.hooks.onSetStage.taps=se.graphicService.hooks.onSetStage.taps.filter((e=>e.name!==this.key))}}class dv{constructor(){this.name="ViewTransform3dPlugin",this.activeEvent="onRegister",this._uid=To.GenAutoIncrementId(),this.key=this.name+this._uid,this.onMouseDown=e=>{this.option3d||(this.option3d=this.pluginService.stage.option3d),this.option3d&&(this.mousedown=!0,this.pageX=e.page.x,this.pageY=e.page.y)},this.onMouseUp=e=>{this.option3d||(this.option3d=this.pluginService.stage.option3d),this.option3d&&(this.mousedown=!1)},this.onMouseMove=e=>{var t,i;const n=this.pluginService.stage;if(this.option3d||(this.option3d=n.option3d),this.option3d&&this.mousedown)if(this.pageX&&this.pageY){const r=e.page.x-this.pageX,s=e.page.y-this.pageY;this.pageX=e.page.x,this.pageY=e.page.y;const a=r/100,o=s/100;this.option3d.alpha=(null!==(t=this.option3d.alpha)&&void 0!==t?t:0)+a,this.option3d.beta=(null!==(i=this.option3d.beta)&&void 0!==i?i:0)+o,n.set3dOptions(this.option3d),n.renderNextFrame()}else this.pageX=e.page.x,this.pageY=e.page.y}}activate(e){this.pluginService=e;const t=e.stage;this.option3d=t.option3d,t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mousemove",this.onMouseMove)}deactivate(e){const t=e.stage;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mousemove",this.onMouseMove)}}class uv{constructor(){this.name="IncrementalAutoRenderPlugin",this.activeEvent="onRegister",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=To.GenAutoIncrementId(),this.key=this.name+this._uid}activate(e){this.pluginService=e,se.graphicService.hooks.onAddIncremental.tap(this.key,((t,i,n)=>{t.glyphHost&&(t=t.glyphHost),t.stage===e.stage&&null!=t.stage&&(this.nextUserParams.startAtId=i._uid,this.renderNextFrame(i))})),se.graphicService.hooks.onClearIncremental.tap(this.key,((t,i)=>{t.stage===e.stage&&null!=t.stage&&(this.nextUserParams.startAtId=t._uid,this.nextUserParams.restartIncremental=!0,this.renderNextFrame(t))}))}deactivate(e){se.graphicService.hooks.onAddIncremental.taps=se.graphicService.hooks.onAddIncremental.taps.filter((e=>e.name!==this.key)),se.graphicService.hooks.onClearIncremental.taps=se.graphicService.hooks.onClearIncremental.taps.filter((e=>e.name!==this.key))}renderNextFrame(e){this.nextFrameRenderGroupSet.add(e),this.willNextFrameRender||(this.willNextFrameRender=!0,se.global.getRequestAnimationFrame()((()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1})))}_doRenderInThisFrame(){const e=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach((t=>{const i=t.layer;if(!i||!t.layer.subLayers)return;const n=t.layer.subLayers.get(t._uid);n&&n.drawContribution&&n.drawContribution.draw(e.renderService,Object.assign({x:e.x,y:e.y,width:i.viewWidth,height:i.viewHeight,stage:e,layer:i,clear:"transparent",renderService:e.renderService,updateBounds:!1,startAtId:t._uid,context:n.layer.getNativeHandler().getContext()},this.nextUserParams))})),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}class pv{constructor(){this.name="HtmlAttributePlugin",this.activeEvent="onRegister",this._uid=To.GenAutoIncrementId(),this.key=this.name+this._uid}activate(e){this.pluginService=e,e.stage.hooks.afterRender.tap(this.key,(t=>{t&&t===this.pluginService.stage&&this.drawHTML(e.stage.renderService)})),se.graphicService.hooks.onRelease.tap(this.key,(e=>{this.removeDom(e)}))}deactivate(e){e.stage.hooks.afterRender.taps=e.stage.hooks.afterRender.taps.filter((e=>e.name!==this.key))}drawHTML(e){"browser"===se.global.env&&e.renderTreeRoots.sort(((e,t)=>{var i,n;return(null!==(i=e.attribute.zIndex)&&void 0!==i?i:xc.zIndex)-(null!==(n=t.attribute.zIndex)&&void 0!==n?n:xc.zIndex)})).forEach((e=>{this.renderGroupHTML(e)}))}renderGroupHTML(e){this.renderGraphicHTML(e),e.forEachChildren((e=>{e.isContainer?this.renderGroupHTML(e):this.renderGraphicHTML(e)}))}removeDom(e){e.bindDom&&e.bindDom.size&&(e.bindDom.forEach((e=>{e.dom&&e.dom.parentElement.removeChild(e.dom)})),e.bindDom.clear())}renderGraphicHTML(e){const{html:t}=e.attribute;if(!t)return void(e.bindDom&&e.bindDom.size&&(e.bindDom.forEach((e=>{e.dom&&e.dom.parentElement.removeChild(e.dom)})),e.bindDom.clear()));const i=e.stage;if(!i)return;const{dom:n,container:r,width:s,height:a,style:o,anchorType:l="boundsLeftTop"}=t;e.bindDom||(e.bindDom=new Map);const c=e.bindDom.get(n);if(c&&(!r||r===c.container))return;let h,d;e.bindDom.forEach((e=>{let{wrapGroup:t}=e;se.global.removeDom(t)})),"string"==typeof n?(h=(new DOMParser).parseFromString(n,"text/html").firstChild,h.lastChild&&(h=h.lastChild.firstChild)):h=n;const u=r||(!0===i.params.enableHtmlAttribute?null:i.params.enableHtmlAttribute);d=u?"string"==typeof u?se.global.getElementById(u):u:e.stage.window.getContainer();const p=se.global.createDom({tagName:"div",width:s,height:a,style:o,parent:d});p&&(p.appendChild(h),e.bindDom.set(n,{dom:h,container:r,wrapGroup:p})),p.style.pointerEvents="none",p.style.position||(p.style.position="absolute",d.style.position="relative");let g=0,f=0;const m=e.globalAABBBounds;if("position"===l||m.empty()){const t=e.globalTransMatrix;g=t.e,f=t.f}else g=m.x1,f=m.y1;const v=se.global.getElementTopLeft(d,!1),y=i.window.getTopLeft(!1),b=g+y.left-v.left,_=f+y.top-v.top;p.style.left="".concat(b,"px"),p.style.top="".concat(_,"px")}}const gv=new hl;class fv{constructor(){this.name="DirtyBoundsPlugin",this.activeEvent="onRegister",this._uid=To.GenAutoIncrementId(),this.key=this.name+this._uid}activate(e){this.pluginService=e,e.stage.hooks.afterRender.tap(this.key,(e=>{e&&e===this.pluginService.stage&&e.dirtyBounds.clear()})),se.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,((e,t,i,n)=>{e.glyphHost&&(e=e.glyphHost),t&&t===this.pluginService.stage&&t.renderCount&&(e.isContainer&&!e.shouldSelfChangeUpdateAABBBounds()||i&&(gv.setValue(n.x1,n.y1,n.x2,n.y2),t.dirty(gv,e.parent&&e.parent.globalTransMatrix)))})),se.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,((e,t,i,n,r)=>{t&&t===this.pluginService.stage&&t.renderCount&&(e.isContainer&&!r||t.dirty(n.globalAABBBounds))})),se.graphicService.hooks.onRemove.tap(this.key,(e=>{const t=e.stage;t&&t===this.pluginService.stage&&t.renderCount&&t&&t.dirty(e.globalAABBBounds)}))}deactivate(e){se.graphicService.hooks.beforeUpdateAABBBounds.taps=se.graphicService.hooks.beforeUpdateAABBBounds.taps.filter((e=>e.name!==this.key)),se.graphicService.hooks.afterUpdateAABBBounds.taps=se.graphicService.hooks.afterUpdateAABBBounds.taps.filter((e=>e.name!==this.key)),e.stage.hooks.afterRender.taps=e.stage.hooks.afterRender.taps.filter((e=>e.name!==this.key)),se.graphicService.hooks.onRemove.taps=se.graphicService.hooks.onRemove.taps.filter((e=>e.name!==this.key))}}const mv=new hl;class vv{constructor(){this.name="FlexLayoutPlugin",this.activeEvent="onRegister",this.id=To.GenAutoIncrementId(),this.key=this.name+this.id,this.tempBounds=new hl}tryLayout(e){if(this.layouting)return;this.layouting=!0;const t=e.parent;if(!t||!e.needUpdateLayout())return;const i=jh(t).group,{display:n=i.display}=t.attribute;if("flex"!==n)return;const{flexDirection:r=i.flexDirection,flexWrap:s=i.flexWrap,justifyContent:a=i.justifyContent,alignItems:o=i.alignItems,alignContent:l=i.alignContent,clip:c=i.clip}=t.attribute;let h=0,d=0,u=0;if(t.forEachChildren((e=>{const t=e.AABBBounds;"column"===r||"column-reverse"===r?(d+=t.height(),h=Math.max(h,t.width())):(h+=t.width(),d=Math.max(d,t.height())),u+=t.x1,u+=t.y1,u+=t.x2,u+=t.y2})),!isFinite(u))return;const p=t.attribute.width||h,g=t.attribute.height||d;t.attribute.width||(t.attribute.width=0),t.attribute.height||(t.attribute.height=0),this.tempBounds.copy(t._AABBBounds);const f={main:{len:p,field:"x"},cross:{len:g,field:"y"},dir:1},m=f.main,v=f.cross;"row-reverse"===r?f.dir=-1:"column"===r?(m.len=g,v.len=p,m.field="y",v.field="x"):"column-reverse"===r&&(m.len=g,v.len=p,m.field="y",v.field="x",f.dir=-1);let y=0,b=0;const _=[];t.forEachChildren((e=>{const t=e.AABBBounds,i="x"===m.field?t.width():t.height(),n="x"===v.field?t.width():t.height();_.push({mainLen:i,crossLen:n}),y+=i,b=Math.max(b,n)}));const x=[];if(y>m.len&&"wrap"===s){let e=0,t=0;_.forEach(((i,n)=>{let{mainLen:r,crossLen:s}=i;e+r>m.len?0===e?(x.push({idx:n,mainLen:e+r,crossLen:s}),e=0,t=0):(x.push({idx:n-1,mainLen:e,crossLen:s}),e=r,t=s):(e+=r,t=Math.max(t,s))})),x.push({idx:_.length-1,mainLen:e,crossLen:t})}else x.push({idx:_.length-1,mainLen:y,crossLen:b});const S=t.getChildren();let w=0;if(x.forEach((e=>{this.layoutMain(t,S,a,m,_,w,e),w=e.idx+1})),b=x.reduce(((e,t)=>e+t.crossLen),0),1===x.length)if("flex-end"===o){const e=v.len;this.layoutCross(S,o,v,e,_,x[0],0)}else if("center"===o){const e=v.len/2;this.layoutCross(S,o,v,e,_,x[0],0)}else S.forEach((e=>{e.attribute[v.field]=yv(e,v.field)}));else if("flex-start"===l){w=0;let e=0;x.forEach(((t,i)=>{this.layoutCross(S,"flex-start",v,e,_,x[i],w),w=t.idx+1,e+=t.crossLen}))}else if("center"===l){w=0;let e=Math.max(0,(v.len-b)/2);x.forEach(((t,i)=>{this.layoutCross(S,"center",v,e+t.crossLen/2,_,x[i],w),w=t.idx+1,e+=t.crossLen}))}else if("space-around"===l){w=0;const e=Math.max(0,(v.len-b)/x.length/2);let t=e;x.forEach(((i,n)=>{this.layoutCross(S,"flex-start",v,t,_,x[n],w),w=i.idx+1,t+=i.crossLen+2*e}))}else if("space-between"===l){w=0;const e=Math.max(0,(v.len-b)/(2*x.length-2));let t=0;x.forEach(((i,n)=>{this.layoutCross(S,"flex-start",v,t,_,x[n],w),w=i.idx+1,t+=i.crossLen+2*e}))}S.forEach(((e,t)=>{e.addUpdateBoundTag(),e.addUpdatePositionTag(),e.clearUpdateLayoutTag()})),t.addUpdateLayoutTag(),c||this.tempBounds.equals(t.AABBBounds)||(this.tryLayout(t),this.layouting=!1)}layoutMain(e,t,i,n,r,s,a){if("flex-start"===i){let e=0;for(let i=s;i<=a.idx;i++)t[i].attribute[n.field]=e+yv(t[i],n.field),e+=r[i].mainLen}else if("flex-end"===i){let e=n.len;for(let i=s;i<=a.idx;i++)e-=r[i].mainLen,t[i].attribute[n.field]=e+yv(t[i],n.field)}else if("space-around"===i)if(a.mainLen>=n.len){let e=0;for(let i=s;i<=a.idx;i++)t[i].attribute[n.field]=e+yv(t[i],n.field),e+=r[i].mainLen}else{const e=a.idx-s+1,i=(n.len-a.mainLen)/e/2;let o=i;for(let l=s;l<=a.idx;l++)t[l].attribute[n.field]=o+yv(t[l],n.field),o+=r[l].mainLen+2*i}else if("space-between"===i)if(a.mainLen>=n.len){let e=0;for(let i=s;i<=a.idx;i++)t[i].attribute[n.field]=e+yv(t[i],n.field),e+=r[i].mainLen}else{const e=a.idx-s+1,i=(n.len-a.mainLen)/(2*e-2);let o=0;for(let l=s;l<=a.idx;l++)t[l].attribute[n.field]=o+yv(t[l],n.field),o+=r[l].mainLen+2*i}else if("center"===i){let e=(n.len-a.mainLen)/2;for(let i=s;i<=a.idx;i++)t[i].attribute[n.field]=e+yv(t[i],n.field),e+=r[i].mainLen}}layoutCross(e,t,i,n,r,s,a){if("flex-end"===t)for(let o=a;o<=s.idx;o++)e[o].attribute[i.field]=n-r[o].crossLen+yv(e[o],i.field);else if("center"===t)for(let o=a;o<=s.idx;o++)e[o].attribute[i.field]=n-r[o].crossLen/2+yv(e[o],i.field);else for(let o=a;o<=s.idx;o++)e[o].attribute[i.field]=n+yv(e[o],i.field)}activate(e){this.pluginService=e,se.graphicService.hooks.onAttributeUpdate.tap(this.key,(e=>{e.glyphHost&&(e=e.glyphHost),this.tryLayout(e),this.layouting=!1})),se.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,((e,t,i,n)=>{e.glyphHost&&(e=e.glyphHost),t&&t===this.pluginService.stage&&e.isContainer&&mv.copy(n)})),se.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,((e,t,i,n,r)=>{t&&t===this.pluginService.stage&&e.isContainer&&(mv.equals(i)||(this.tryLayout(e),this.layouting=!1))})),se.graphicService.hooks.onSetStage.tap(this.key,(e=>{e.glyphHost&&(e=e.glyphHost),this.tryLayout(e),this.layouting=!1}))}deactivate(e){se.graphicService.hooks.onAttributeUpdate.taps=se.graphicService.hooks.onAttributeUpdate.taps.filter((e=>e.name!==this.key)),se.graphicService.hooks.onSetStage.taps=se.graphicService.hooks.onSetStage.taps.filter((e=>e.name!==this.key))}}function yv(e,t){if(!e.attribute.boundsPadding)return 0;if("number"==typeof(i=e.attribute.boundsPadding)&&Number.isFinite(i))return e.attribute.boundsPadding;var i;if(v(e.attribute.boundsPadding)&&1===e.attribute.boundsPadding.length)return e.attribute.boundsPadding[0];const n=Cd(e.attribute.boundsPadding);return"x"===t?n[3]:"y"===t?n[0]:0}class bv{constructor(){this.time=0}static Avaliable(){return!0}avaliable(){return bv.Avaliable()}tick(e,t){this.time=Math.max(0,e+this.time),t(this,{once:!0})}tickTo(e,t){this.time=Math.max(0,e),t(this,{once:!0})}release(){this.timerId>0&&(this.timerId=-1)}getTime(){return this.time}}class _v{static Avaliable(){return!0}avaliable(){return _v.Avaliable()}tick(e,t){this.timerId=setTimeout((()=>{t(this)}),e)}release(){this.timerId>0&&(clearTimeout(this.timerId),this.timerId=-1)}getTime(){return Date.now()}}class xv{static Avaliable(){return!!se.global.getRequestAnimationFrame()}avaliable(){return xv.Avaliable()}tick(e,t){se.global.getRequestAnimationFrame()((()=>{this.released||t(this)}))}release(){this.released=!0}getTime(){return Date.now()}}var Sv;!function(e){e[e.INITIAL=0]="INITIAL",e[e.RUNNING=1]="RUNNING",e[e.PAUSE=2]="PAUSE"}(Sv||(Sv={}));class wv{set mode(e){this._mode!==e&&(this._mode=e,this.setupTickHandler())}get mode(){return this._mode}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.handleTick=(e,t)=>{const{once:i=!1}=null!=t?t:{};this.ifCanStop()?this.stop():(this._handlerTick(e),i||e.tick(this.interval,this.handleTick))},this._handlerTick=e=>{const t=this.tickerHandler.getTime();let i=0;this.lastFrameTime>=0&&(i=t-this.lastFrameTime),this.lastFrameTime=t,this.status===Sv.RUNNING&&(this.tickCounts++,this.timelines.forEach((e=>{e.tick(i)})))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.timelines=e,this.autoStop=!0}init(){this.interval=NaN,this.status=Sv.INITIAL,se.global.hooks.onSetEnv.tap("default-ticker",(()=>{this.initHandler()})),se.global.env&&this.initHandler()}addTimeline(e){this.timelines.push(e)}remTimeline(e){this.timelines=this.timelines.filter((t=>t!==e))}initHandler(){if(this._mode)return null;const e=[{mode:"raf",cons:xv},{mode:"timeout",cons:_v},{mode:"manual",cons:bv}];for(let t=0;t<e.length;t++)if(e[t].cons.Avaliable()){this.mode=e[t].mode;break}return null}setupTickHandler(){let e;switch(this._mode){case"raf":e=new xv;break;case"timeout":e=new _v;break;case"manual":e=new bv;break;default:u.getInstance().warn("\u975e\u6cd5\u7684\u8ba1\u65f6\u5668\u6a21\u5f0f"),e=new xv}return!!e.avaliable()&&(this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=e,!0)}setInterval(e){this.interval=e}getInterval(){return this.interval}setFPS(e){this.setInterval(1e3/e)}getFPS(){return 1e3/this.interval}tick(e){this.tickerHandler.tick(e,(e=>{this.handleTick(e,{once:!0})}))}tickTo(e){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(e,(e=>{this.handleTick(e,{once:!0})}))}pause(){return this.status!==Sv.INITIAL&&(this.status=Sv.PAUSE,!0)}resume(){return this.status!==Sv.INITIAL&&(this.status=Sv.RUNNING,!0)}ifCanStop(){if(this.autoStop){if(!this.timelines.length)return!0;if(0===this.timelines.reduce(((e,t)=>e+t.animateCount),0))return!0}return!1}start(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.status===Sv.RUNNING)return!1;if(!this.tickerHandler)return!1;if(!e){if(this.status===Sv.PAUSE)return!1;if(!this.timelines.length)return!1;if(0===this.timelines.reduce(((e,t)=>e+t.animateCount),0))return!1}return this.status=Sv.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0}stop(){this.status=Sv.INITIAL,this.setupTickHandler(),this.lastFrameTime=-1}}const Cv=new wv;Cv.addTimeline(Xh);Cv.setFPS(60);class kv{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;this.dir=e,this.color=t,this.colorRgb=sd.Get(t,rd.Color1),this.ambient=i;const n=Yn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);this.formatedDir=[e[0]/n,e[1]/n,e[2]/n]}computeColor(e,t){const i=this.formatedDir,n=Gn(Wn((e[0]*i[0]+e[1]*i[1]+e[2]*i[2])*(1-this.ambient/2),0)+this.ambient,1);let r;r=_(t)?sd.Get(t,rd.Color1):t;const s=this.colorRgb;return"rgb(".concat(s[0]*r[0]*n,", ").concat(s[1]*r[1]*n,", ").concat(s[2]*r[2]*n,")")}}function Av(e,t,i){const n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=t[6],h=t[7],d=t[8],u=t[9],p=t[10],g=t[11],f=t[12],m=t[13],v=t[14],y=t[15];let b=i[0],_=i[1],x=i[2],S=i[3];return e[0]=b*n+_*o+x*d+S*f,e[1]=b*r+_*l+x*u+S*m,e[2]=b*s+_*c+x*p+S*v,e[3]=b*a+_*h+x*g+S*y,b=i[4],_=i[5],x=i[6],S=i[7],e[4]=b*n+_*o+x*d+S*f,e[5]=b*r+_*l+x*u+S*m,e[6]=b*s+_*c+x*p+S*v,e[7]=b*a+_*h+x*g+S*y,b=i[8],_=i[9],x=i[10],S=i[11],e[8]=b*n+_*o+x*d+S*f,e[9]=b*r+_*l+x*u+S*m,e[10]=b*s+_*c+x*p+S*v,e[11]=b*a+_*h+x*g+S*y,b=i[12],_=i[13],x=i[14],S=i[15],e[12]=b*n+_*o+x*d+S*f,e[13]=b*r+_*l+x*u+S*m,e[14]=b*s+_*c+x*p+S*v,e[15]=b*a+_*h+x*g+S*y,e}function Ev(e,t,i){const n=t[0],r=t[1],s=t[2];let a=i[3]*n+i[7]*r+i[11]*s+i[15];return a=a||1,e[0]=(i[0]*n+i[4]*r+i[8]*s+i[12])/a,e[1]=(i[1]*n+i[5]*r+i[9]*s+i[13])/a,e[2]=(i[2]*n+i[6]*r+i[10]*s+i[14])/a,e}class Tv{set params(e){this._params=Object.assign({},e),this._projectionMatrixCached=this.forceGetProjectionMatrix(),this._viewMatrixCached=this.forceGetViewMatrix()}get params(){return Object.assign({},this._params)}constructor(e){this.params=e}getViewMatrix(){return this._viewMatrixCached||(this._viewMatrixCached=ep.allocate()),this._viewMatrixCached}forceGetViewMatrix(){this._viewMatrixCached||(this._viewMatrixCached=ep.allocate());const{pos:e,center:t,up:i}=this.params.viewParams;return function(e,t,i,n){let r,s,a,o,l,c,h,d,u,p;const g=t[0],f=t[1],m=t[2],v=n[0],y=n[1],b=n[2],_=i[0],x=i[1],S=i[2];Math.abs(g-_)<jn&&Math.abs(f-x)<jn&&Math.abs(m-S)<jn?$u.identity(e):(h=g-_,d=f-x,u=m-S,p=1/Math.hypot(h,d,u),h*=p,d*=p,u*=p,r=y*u-b*d,s=b*h-v*u,a=v*d-y*h,p=Math.hypot(r,s,a),p?(p=1/p,r*=p,s*=p,a*=p):(r=0,s=0,a=0),o=d*a-u*s,l=u*r-h*a,c=h*s-d*r,p=Math.hypot(o,l,c),p?(p=1/p,o*=p,l*=p,c*=p):(o=0,l=0,c=0),e[0]=r,e[1]=o,e[2]=h,e[3]=0,e[4]=s,e[5]=l,e[6]=d,e[7]=0,e[8]=a,e[9]=c,e[10]=u,e[11]=0,e[12]=-(r*g+s*f+a*m),e[13]=-(o*g+l*f+c*m),e[14]=-(h*g+d*f+u*m),e[15]=1)}(this._viewMatrixCached,e,t,i),this._vp||(this._vp=ep.allocate()),this._vp=Av(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._viewMatrixCached}getProjectionMatrix(){return this._projectionMatrixCached||(this._projectionMatrixCached=ep.allocate()),this._projectionMatrixCached}forceGetProjectionMatrix(){this._projectionMatrixCached||(this._projectionMatrixCached=ep.allocate());const{left:e,top:t,right:i,bottom:n}=this._params;return function(e,t,i,n,r,s,a){const o=1/(t-i),l=1/(n-r),c=1/(s-a);e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*o,e[13]=(r+n)*l,e[14]=(a+s)*c,e[15]=1}(this._projectionMatrixCached,e,i,n,t,0,-2e6),this._vp||(this._vp=ep.allocate()),this._vp=Av(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._projectionMatrixCached}getField(){const{fieldRatio:e=.8,fieldDepth:t,left:i,right:n}=this._params;return(null!=t?t:n-i)*e}getProjectionScale(e){const t=this.getField();return t/(t+e)}view(e,t,i){const n=[0,0,0];return Ev(n,[e,t,i],this._viewMatrixCached),n}vp(e,t,i){const n=[0,0,0],{pos:r}=this._params.viewParams;Ev(n,[e,t,i],this._viewMatrixCached),e=n[0],t=n[1],i=n[2];const s=this.getProjectionScale(i);return{x:e*s+r[0],y:t*s+r[1]}}}const Ov="white";class Pv extends du{set viewBox(e){this._viewBox.setValue(e.x1,e.y1,e.x2,e.y2)}get viewBox(){return this._viewBox}get x(){return this._viewBox.x1}set x(e){this._viewBox.translate(e-this._viewBox.x1,0)}get y(){return this._viewBox.y1}set y(e){this._viewBox.translate(0,e-this._viewBox.y1)}get width(){return this.window.width}set width(e){this.resize(e,this.height)}get viewWidth(){return this._viewBox.width()}set viewWidth(e){this.resizeView(e,this.viewHeight)}get viewHeight(){return this._viewBox.height()}set viewHeight(e){this.resizeView(this.viewWidth,e)}get height(){return this.window.height}set height(e){this.resize(this.width,e)}get dpr(){return this.window.dpr}set dpr(e){this.setDpr(e)}get background(){var e;return null!==(e=this._background)&&void 0!==e?e:Ov}set background(e){this._background=e}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;super({}),this._onVisibleChange=e=>{this._skipRender<0||(e?(this.dirtyBounds&&this.dirtyBounds.setValue(0,0,this._viewBox.width(),this._viewBox.height()),this._skipRender>1&&this.renderNextFrame(),this._skipRender=0):this._skipRender=1)},this.beforeRender=e=>{this._beforeRender&&this._beforeRender(e)},this.afterRender=e=>{this.renderCount++,this._afterRender&&this._afterRender(e),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach((t=>t(e))),this._afterNextRenderCbs=null},this.params=e,this.theme=new Dh,this.hooks={beforeRender:new Yo(["stage"]),afterRender:new Yo(["stage"])},this.global=se.global,!this.global.env&&le()&&this.global.setEnv("browser"),this.window=ph.get(_h),this.renderService=ph.get(Yu),this.pluginService=ph.get(Sp),this.layerService=ph.get(mu),this.pluginService.active(this,e),this.window.create({width:e.width,height:e.height,container:e.container,dpr:e.dpr||this.global.devicePixelRatio,canvasControled:!1!==e.canvasControled,title:e.title||"",canvas:e.canvas}),this._viewBox=new hl,e.viewBox?this._viewBox.setValue(e.viewBox.x1,e.viewBox.y1,e.viewBox.x2,e.viewBox.y2):this._viewBox.setValue(0,0,this.width,this.height),this.state="normal",this.renderCount=0,this.tryInitEventSystem(),this._subView=!(this._viewBox.width()===this.width&&this._viewBox.height()===this.height),this._background=null!==(t=e.background)&&void 0!==t?t:Ov,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,this.stage=this,this.renderStyle=e.renderStyle,e.autoRender&&this.enableAutoRender(),!1===e.disableDirtyBounds&&this.enableDirtyBounds(),e.enableHtmlAttribute&&this.enableHtmlAttribute(e.enableHtmlAttribute),e.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap("constructor",this.beforeRender),this.hooks.afterRender.tap("constructor",this.afterRender),this._beforeRender=e.beforeRender,this._afterRender=e.afterRender,this.ticker=e.ticker||Cv,this.supportInteractiveLayer=!1!==e.interactiveLayer,this.timeline=new Yh,this.ticker.addTimeline(this.timeline),this.timeline.pause(),e.optimize||(e.optimize={}),this.optmize(e.optimize),e.background&&_(this._background)&&this._background.includes("/")&&this.setAttributes({background:this._background})}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new cv(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents,viewport:{viewBox:this._viewBox,get x(){return this.viewBox.x1},get y(){return this.viewBox.y1},get width(){return this.viewBox.width()},get height(){return this.viewBox.height()}}},this.params.event)))}preventRender(e){e?this._skipRender=-1/0:!1!==this.params.optimize.skipRenderWithOutRange?this._skipRender=this.window.isVisible()?0:1:this._skipRender=0}optmize(e){this.optmizeRender(e.skipRenderWithOutRange),this.params.optimize=e}optmizeRender(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this._skipRender=this._skipRender<0?this._skipRender:this.window.isVisible()?0:1,this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(e){const{center:t={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:i={},alpha:n=0,beta:r=0,camera:s,fieldRatio:a=1,fieldDepth:o}=e;return Object.assign(Object.assign({},e),{center:t,light:i,alpha:n,beta:r,camera:s,fieldRatio:a,fieldDepth:o})}set3dOptions(e){var t,i,n,r,s,a;this.option3d=e;const o=this.get3dOptions(e),{light:l,center:c,camera:h,alpha:d,beta:u,fieldRatio:p,fieldDepth:g}=o,{dir:f=[1,1,-1],color:m="white",ambient:v}=l,y=(null!==(t=c.x)&&void 0!==t?t:this.width/2)+(null!==(i=c.dx)&&void 0!==i?i:0),b=(null!==(n=c.y)&&void 0!==n?n:this.height/2)+(null!==(r=c.dy)&&void 0!==r?r:0),_=[y,b,(null!==(s=c.z)&&void 0!==s?s:0)+(null!==(a=c.dz)&&void 0!==a?a:0)];let x=0,S=0,w=0;h||(x=Math.sin(d)+y,S=Math.sin(u)+b,w=Math.cos(d)*Math.cos(u)*1),this.light=new kv(f,m,v);const C={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:p,fieldDepth:g,viewParams:{pos:[x,S,w],center:_,up:[0,1,0]}};this.camera?this.camera.params=C:this.camera=new Tv(C),e.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(e){this._beforeRender=e}setAfterRender(e){this._afterRender=e}afterNextRender(e){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(e)}enableView3dTransform(){this.view3dTranform||(this.view3dTranform=!0,this.pluginService.register(new dv))}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach((e=>{this.pluginService.unRegister(e)})))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new hv))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach((e=>{this.pluginService.unRegister(e)})))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new uv))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach((e=>{this.pluginService.unRegister(e)})))}enableDirtyBounds(){if(this.dirtyBounds)return;this.dirtyBounds=new cl;let e=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];e?e.activate(this.pluginService):(e=new fv,this.pluginService.register(e))}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach((e=>{this.pluginService.unRegister(e)})))}enableLayout(){this._enableLayout||(this._enableLayout=!0,this.pluginService.register(new vv))}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach((e=>{this.pluginService.unRegister(e)})))}enableHtmlAttribute(e){this.htmlAttribute||(this.htmlAttribute=e,this.pluginService.register(new pv))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach((e=>{this.pluginService.unRegister(e)})))}tryUpdateAABBBounds(){const e=this._viewBox;return this._AABBBounds.setValue(e.x1,e.y1,e.x2,e.y2),this._AABBBounds}combineLayer(e,t){throw new Error("\u6682\u4e0d\u652f\u6301")}createLayer(e,t){const i=this.layerService.createLayer(this,{main:!1,layerMode:t,canvasId:e});return this.appendChild(i),i}sortLayer(e){const t=this.children;t.sort(e),this.removeAllChild(),t.forEach((e=>{this.appendChild(e)}))}removeLayer(e){return this.removeChild(this.findChildByUid(e))}tryInitInteractiveLayer(){this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(e){this.window.clearViewBox(this._viewBox,e)}render(e,t){this.ticker.start(),this.timeline.resume();const i=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=t,this.hooks.beforeRender.call(this),this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear(),this.hooks.afterRender.call(this)),this.state=i,this._skipRender&&this._skipRender++}combineLayersToWindow(){}renderNextFrame(e,t){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(e||this).forEach((e=>{this.nextFrameRenderLayerSet.add(e)})),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getRequestAnimationFrame()((()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1})))}_doRenderInThisFrame(){this.timeline.resume(),this.ticker.start();const e=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.hooks.afterRender.call(this),this.nextFrameRenderLayerSet.clear()),this.state=e,this._skipRender&&this._skipRender++}renderLayerList(e,t){const i=[];for(let n=0;n<e.length;n++){let t=e[n];"virtual"===t.layerMode&&(t=t.getNativeHandler().mainHandler.layer),i.includes(t)||i.push(t)}i.forEach((e=>{e.renderCount>this.renderCount||(e.renderCount=this.renderCount+1,e.render({renderService:this.renderService,background:e===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())},Object.assign({renderStyle:this.renderStyle},t)))})),this.interactiveLayer&&!e.includes(this.interactiveLayer)&&this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())},Object.assign({renderStyle:this.renderStyle},t))}resizeWindow(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.window.resize(e,t),i&&this.render()}resize(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.window.resize(e,t),this.forEachChildren((i=>{i.resize(e,t)})),this._subView||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+e,this.viewBox.y1+t),this.camera&&this.option3d&&this.set3dOptions(this.option3d),i&&this.render()}resizeView(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+e,this.viewBox.y1+t),this.forEachChildren((i=>{i.resizeView(e,t)})),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),i&&this.render()}setViewBox(e,t,i,n,r){let s=!0;"object"==typeof e?(this.viewBox.setValue(e.x1,e.y1,e.x2,e.y2),!1===t&&(s=!1)):(this.viewBox.setValue(e,t,e+i,t+n),!1===r&&(s=!1)),this.forEachChildren((e=>{e.resizeView(this.viewBox.width(),this.viewBox.height())})),s&&this.render()}setDpr(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.forEachChildren((t=>{t.setDpr(e)})),t&&this.render()}setOrigin(e,t){throw new Error("\u6682\u4e0d\u652f\u6301")}export(e){throw new Error("\u6682\u4e0d\u652f\u6301")}pick(e,t){this.pickerService||(this.pickerService=ph.get(Zu));const i=this.pickerService.pick(this.children,new ir(e,t),{bounds:this.AABBBounds});return!(!(null==i?void 0:i.graphic)&&!(null==i?void 0:i.group))&&i}startAnimate(e){throw new Error("\u6682\u4e0d\u652f\u6301")}setToFrame(e){throw new Error("\u6682\u4e0d\u652f\u6301")}release(){super.release(),this.eventSystem&&this.eventSystem.release(),this.pluginService.release(),this.forEach((e=>{e.release()})),this.interactiveLayer&&this.interactiveLayer.release(),this.window.release()}setStage(e){}dirty(e,t){t&&e.transformWithMatrix(t),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(e.x1,e.y1,e.x2,e.y2),this.dirtyBounds.union(e)}getLayer(e){return this.children.filter((t=>t.name===e))[0]}renderTo(e,t){this.forEachChildren(((i,n)=>{i.drawTo(e,Object.assign(Object.assign({},t),{renderService:this.renderService,background:i===this.defaultLayer?this.background:void 0,clear:0===n,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())}))}))}renderToNewWindow(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;const i=ph.get(_h);if(e)i.create({width:this.viewWidth,height:this.viewHeight,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""});else{const e=t?t.width():Math.min(this.viewWidth,this.window.width-this.x),n=t?t.height():Math.min(this.viewHeight,this.window.height-this.y);i.create({width:e,height:n,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""})}const n=t?-t.x1:0,r=t?-t.y1:0;return this.renderTo(i,{x:n,y:r,width:t?t.x2:i.width,height:t?t.y2:i.height}),i}toCanvas(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;const i=this.renderToNewWindow(e,t).getNativeHandler();return i.nativeCanvas?i.nativeCanvas:null}setCursor(e){this._cursor=e,this.eventSystem.setCursor(e,"ignore")}getCursor(){return this._cursor}}class Mv{constructor(e){this.onPointerDown=e=>{const t=e.target,i=this.rootNode,n=t===i;if(t&&!n){let r,s=!1;function a(e){if(s||(e.type="dragstart",null==t||t.dispatchEvent(e),s=!0),e.type="drag",null==t||t.dispatchEvent(e),!n){t.pickable=!1;const n=(null==i?void 0:i.pick(e.global.x,e.global.y)).graphic;t.pickable=!0,r!==n&&(r&&(e.type="dragleave",e.target=r,r.dispatchEvent(e)),n&&(e.type="dragenter",e.target=n,n.dispatchEvent(e)),r=n,r&&(e.type="dragover",e.target=r,r.dispatchEvent(e)))}}null==i||i.addEventListener("pointermove",a);const o=function(){s&&(r&&(e.type="drop",e.target=r,r.dispatchEvent(e)),e.type="dragend",t.dispatchEvent(e),s=!1),null==i||i.removeEventListener("pointermove",a)};t.addEventListener("pointerup",o,{once:!0}),t.addEventListener("pointerupoutside",o,{once:!0})}},this.rootNode=e,this.initEvents()}initEvents(){var e;null===(e=this.rootNode)||void 0===e||e.addEventListener("pointerdown",this.onPointerDown)}removeEvents(){var e;null===(e=this.rootNode)||void 0===e||e.removeEventListener("pointerdown",this.onPointerDown)}release(){this.removeEvents(),this.rootNode=null}}const Iv=(e,t)=>{const i=t.x-e.x,n=t.y-e.y;return Math.abs(i)>Math.abs(n)?i>0?"right":"left":n>0?"down":"up"},Rv=(e,t)=>{const i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return Math.sqrt(i*i+n*n)};class Dv extends(a()){constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i,n,r,s,a,o,l,c,h,d;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=e=>{this.reset(),this.startTime=sv.now();const{cachedEvents:t,startPoints:i}=this;e&&t.push(e.clone()),i.length=t.length;for(let n=0;n<t.length;n++){const{x:e,y:r}=t[n],s={x:e,y:r};i[n]=s}if(1!==i.length)this.startDistance=Rv(i[0],i[1]),this.center=(e=>{const t=e.length;if(1===t)return{x:Math.round(e[0].x),y:Math.round(e[0].y)};let i=0,n=0,r=0;for(;r<t;)i+=e[r].x,n+=e[r].y,r++;return{x:Math.round(i/t),y:Math.round(n/t)}})([i[0],i[1]]);else{const e=t[0];this.pressTimeout=setTimeout((()=>{e.direction="none",e.deltaX=0,e.deltaY=0,e.points=i,this.triggerStartEvent("press",e),this.triggerEvent("press",e),this.eventType="press",this.direction="none"}),this.config.press.time)}},this.onMove=e=>{this.clearPressTimeout();const{startPoints:t,cachedEvents:i}=this;if(!t.length)return;const n=e.clone(),{x:r,y:s,pointerId:a}=n;for(let u=0,p=i.length;u<p;u++)if(a===i[u].pointerId){i[u]=n;break}const o={x:r,y:s},l=i.map((e=>({x:e.x,y:e.y}))),c=sv.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=c,this.lastMovePoint=o,1===t.length){const e=t[0],i=r-e.x,a=s-e.y,c=this.direction||Iv(e,o);this.direction=c;const h=this.getEventType(o);return n.direction=c,n.deltaX=i,n.deltaY=a,n.points=l,this.triggerStartEvent(h,n),void this.triggerEvent(h,n)}const{startDistance:h}=this,d=Rv(l[0],l[1]);n.scale=d/h,n.center=this.center,n.points=l,this.triggerStartEvent("pinch",n),this.triggerEvent("pinch",n)},this.onEnd=e=>{const t=e.clone(),{cachedEvents:i,startPoints:n}=this,r=i.map((e=>({x:e.x,y:e.y})));if(t.points=r,this.triggerEndEvent(t),1===i.length){const i=sv.now(),r=this.lastMoveTime;if(i-r<100){const e=r-(this.prevMoveTime||this.startTime);if(e>0){const i=this.prevMovePoint||n[0],r=this.lastMovePoint||n[0],s=Rv(i,r),a=s/e;a>this.config.swipe.velocity&&s>this.config.swipe.threshold&&(t.velocity=a,t.direction=Iv(i,r),this.triggerEvent("swipe",t))}}i-this.lastTapTime<this.config.tap.interval&&e.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=i,this.lastTapTarget=e.target,1===this.tapCount?this.triggerEvent("tap",t):2===this.tapCount&&(this.triggerEvent("doubletap",t),this.tapCount=0)}for(let s=0,a=i.length;s<a;s++)if(i[s].pointerId===t.pointerId){i.splice(s,1),n.splice(s,1);break}this.reset(),i.length>0&&this.onStart()},this.element=e,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:null!==(n=null===(i=null==t?void 0:t.press)||void 0===i?void 0:i.time)&&void 0!==n?n:251,threshold:null!==(s=null===(r=null==t?void 0:t.press)||void 0===r?void 0:r.threshold)&&void 0!==s?s:9},swipe:{threshold:null!==(o=null===(a=null==t?void 0:t.swipe)||void 0===a?void 0:a.threshold)&&void 0!==o?o:10,velocity:null!==(c=null===(l=null==t?void 0:t.swipe)||void 0===l?void 0:l.velocity)&&void 0!==c?c:.3},tap:{interval:null!==(d=null===(h=null==t?void 0:t.tap)||void 0===h?void 0:h.interval)&&void 0!==d?d:300}},this.initEvents()}initEvents(){const{element:e}=this;e&&(e.addEventListener("pointerdown",this.onStart),e.addEventListener("pointermove",this.onMove),e.addEventListener("pointerup",this.onEnd),e.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){const{element:e}=this;e&&(e.removeEventListener("pointerdown",this.onStart),e.removeEventListener("pointermove",this.onMove),e.removeEventListener("pointerup",this.onEnd),e.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(e){const{eventType:t,startTime:i,startPoints:n}=this;if(t)return t;let r;return r=sv.now()-i>this.config.press.time&&Rv(n[0],e)<this.config.press.threshold?"press":"pan",this.eventType=r,r}enable(e){this.processEvent[e]=!0}isProcess(e){return this.processEvent[e]}pushEvent(e,t){const{emitThrottles:i}=this,n={type:e,ev:t};for(let r=0,s=i.length;r<s;r++)if(i[r].type===e)return void i.splice(r,1,n);i.push(n)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(e,t){this.pushEvent(e,t);const{throttleTimer:i,emitThrottles:n}=this;i||(this.throttleTimer=se.global.getRequestAnimationFrame()((()=>{for(let e=0,t=n.length;e<t;e++){const{type:t,ev:i}=n[e];this.emitEvent(t,i)}this.throttleTimer=0,this.emitThrottles.length=0})))}triggerStartEvent(e,t){this.isProcess(e)||(this.enable(e),this.triggerEvent("".concat(e,"start"),t))}triggerEndEvent(e){const t=this.processEvent;Object.keys(t).forEach((i=>{this.triggerEvent("".concat(i,"end"),e),"press"===i&&this.triggerEvent("".concat(i,"up"),e),delete t[i]}))}emitEvent(e,t){const i=this.element._events["*"];if(i)if("fn"in i)i.fn.call(i.context,t,e);else for(let n=0,r=i.length;n<r&&!t.propagationImmediatelyStopped;n++)i[n].fn.call(i[n].context,t,e);this.emit(e,t)}}class Lv{constructor(e){this.handleAfterNextRender=()=>{this._stage&&!this._viewOptions.disableDirtyBounds&&this._stage.enableDirtyBounds(),this._view.emit($r.AFTER_VRENDER_DRAW),this._view.emit($r.AFTER_VRENDER_NEXT_RENDER)},this._view=e}initialize(e,t,i,n){return this._width=e,this._height=t,this._viewOptions=i,this._eventConfig=n,this.initStage(),this}stage(){var e;return null!==(e=this._stage)&&void 0!==e?e:null}gestureController(){var e;return null!==(e=this._gestureController)&&void 0!==e?e:null}canvas(){return this._stage?this._stage.window.getNativeHandler().nativeCanvas:null}context(){return this._stage?this._stage.window.getContext().nativeContext:null}combineIncrementalLayers(){return this._stage&&function(e){return Ld(this,void 0,void 0,(function*(){const t=[],i=e.getChildren();yield new Promise((e=>{se.global.getRequestAnimationFrame()((()=>{e(null)}))})),i.forEach((e=>{e.subLayers.size&&e.subLayers.forEach((e=>{e.drawContribution&&e.drawContribution.hooks&&e.drawContribution.rendering&&t.push(new Promise((t=>{e.drawContribution.hooks.completeDraw.tap("outWait",(()=>{e.drawContribution.hooks.completeDraw.taps=e.drawContribution.hooks.completeDraw.taps.filter((e=>"outWait"!==e.name)),t(null)}))})))}))})),yield Promise.all(t)}))}(this._stage).then((()=>{this._stage&&this._stage.defaultLayer.combineSubLayer()})),this}background(e){if(this._stage)return this._stage.background=e,this}setDpr(e,t){var i,n;return null===(n=null===(i=this._stage)||void 0===i?void 0:i.setDpr)||void 0===n||n.call(i,e),t&&this.renderNextFrame(),this}shouldResize(e,t){return e!==this._width||t!==this._height}resize(e,t){return this._view.emit($r.BEFORE_STAGE_RESIZE),this.shouldResize(e,t)&&(this._width=e,this._height=t,this._stage&&this._stage.resize(e,t)),this._view.emit($r.AFTER_STAGE_RESIZE),this}setViewBox(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._stage?(!e||this._viewBox&&e.x1===this._viewBox.x1&&e.x2===this._viewBox.x2&&e.y1===this._viewBox.y1&&e.y2===this._viewBox.y2||(this._viewBox=e,this._stage.setViewBox(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1,t)),this):this}render(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._view.emit($r.BEFORE_VRENDER_DRAW),this.initStage(),this._stage.disableDirtyBounds(),this._stage.afterNextRender(this.handleAfterNextRender),e&&(this._stage.render(),this._view.emit($r.AFTER_VRENDER_DRAW)),this}renderNextFrame(){return this.initStage(),this._stage.renderNextFrame(),this}toCanvas(){return this._stage?this._stage.toCanvas():null}preventRender(e){this._stage&&this._stage.preventRender(e)}release(){var e;this._view.traverseMarkTree((e=>{e.release()})),this._dragController&&this._dragController.release(),this._gestureController&&this._gestureController.release(),this._stage!==(null===(e=this._viewOptions)||void 0===e?void 0:e.stage)&&this._stage.release(),this._stage=null,this._layer=null,this._dragController=null,this._gestureController=null}createStage(){var e,t,i,n,r;this._view.emit($r.BEFORE_CREATE_VRENDER_STAGE);const s=this._viewOptions,a=null!==(e=s.stage)&&void 0!==e?e:(o={width:this._width,height:this._height,renderStyle:s.renderStyle,viewBox:s.viewBox,dpr:s.dpr,canvas:s.renderCanvas,canvasControled:s.canvasControled,container:s.container,title:s.rendererTitle,beforeRender:s.beforeRender,afterRender:s.afterRender,disableDirtyBounds:!0,autoRender:!0,pluginList:s.pluginList,enableHtmlAttribute:s.enableHtmlAttribute,optimize:s.optimize,supportsTouchEvents:s.supportsTouchEvents,supportsPointerEvents:s.supportsPointerEvents},new Pv(o));var o;(null===(t=s.options3d)||void 0===t?void 0:t.enable)&&a.set3dOptions(s.options3d),a.enableIncrementalAutoRender(),this._viewBox=s.viewBox,this._view.emit($r.AFTER_CREATE_VRENDER_STAGE),this._view.emit($r.BEFORE_CREATE_VRENDER_LAYER);const l=null!==(i=s.layer)&&void 0!==i?i:a.defaultLayer;if(this._view.emit($r.AFTER_CREATE_VRENDER_LAYER),(null===(n=this._eventConfig)||void 0===n?void 0:n.drag)&&(this._dragController=new Mv(a)),null===(r=this._eventConfig)||void 0===r?void 0:r.gesture){const e=D(this._eventConfig.gesture)?this._eventConfig.gesture:{};this._gestureController=new Dv(a,e)}return{stage:a,layer:l}}initStage(){if(!this._stage){const{stage:e,layer:t}=this.createStage();this._stage=e,this._layer=t;const i=this._view.background();this.background(i)}}}function jv(e){return P(e.offsetX)?P(e.x)?e.changedTouches&&e.changedTouches.length?function(e){return{canvasX:e.changedTouches[0].x,canvasY:e.changedTouches[0].y}}(e):{canvasX:0,canvasY:0}:function(e){return{canvasX:e.x,canvasY:e.y}}(e):function(e){return{canvasX:e.offsetX,canvasY:e.offsetY}}(e)}function Fv(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return L(t.canvasX)&&Object.defineProperty(e,"canvasX",{value:t.canvasX,writable:!0}),L(t.canvasY)&&Object.defineProperty(e,"canvasY",{value:t.canvasY,writable:!0}),i&&L(t.clientX)&&Object.defineProperty(e,"clientX",{value:t.clientX,writable:!0}),i&&L(t.clientY)&&Object.defineProperty(e,"clientY",{value:t.clientY,writable:!0}),[t.canvasX,t.canvasY]}function Bv(e,t,i,n,r){if(r===dm){!function(e){["touches","changedTouches","targetTouches"].forEach((t=>{e[t]&&e[t].length&&Array.from(e[t]).forEach((e=>{Fv(e,jv(e),!1)}))}));const t=jv(e);Fv(e,t)}(t.changedTouches?t.changedTouches[0]:t)}return t.element=i,t}class Nv extends tm{constructor(){super(...arguments),this.grammarType="signal",this.spec={value:null,update:null}}parse(e){return super.parse(e),this.value(e.value),this.update(e.update),this.commit(),this}evaluate(e,t){return this._signal=this.spec.update?Kf(this.spec.update,t,this._signal):this.spec.value,this.spec.value=this._signal,this}output(){return this._signal}getValue(){return this.output()}set(e){if(v(e)&&v(this.value)&&e.length===this.value.length){for(let t=0;t<e.length;t++)if(this.value[t]!==e[t])return this._signal=e,this.spec.value=e,!0;return!1}return this._signal!==e&&(this._signal=e,this.spec.value=e,!0)}update(e){return P(e)||this.value(void 0),this.setFunctionSpec(e,"update")}value(e){return P(e)||this.update(void 0),this.spec.value=e,this.commit(),this}reuse(e){return e.grammarType!==this.grammarType||(this._signal=e.output()),this}clear(){super.clear(),this._signal=null}}let zv=-1;const Hv=[gm,fm,ym,mm,vm,bm,_m],Vv=e=>{var t,i,n,r;return l(e)?{top:e,bottom:e,left:e,right:e}:{top:null!==(t=null==e?void 0:e.top)&&void 0!==t?t:0,bottom:null!==(i=null==e?void 0:e.bottom)&&void 0!==i?i:0,left:null!==(n=null==e?void 0:e.left)&&void 0!==n?n:0,right:null!==(r=null==e?void 0:e.right)&&void 0!==r?r:0}},Uv=e=>{var t,i,n,r,s;const{reuse:a=Hm,morph:o=Vm,morphAll:l=Um,animation:c={},enableExitAnimation:h=Wm}=null!=e?e:{};return{reuse:a,morph:o,morphAll:l,animation:{easing:null!==(t=c.easing)&&void 0!==t?t:$m,delay:null!==(i=c.delay)&&void 0!==i?i:Xm,duration:null!==(n=c.duration)&&void 0!==n?n:Ym,oneByOne:null!==(r=c.oneByOne)&&void 0!==r?r:Qm,splitPath:null!==(s=c.splitPath)&&void 0!==s?s:null},enableExitAnimation:h}},Wv=e=>!!Vr[e];function Gv(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n;const r=nm.getGraphicType(t)?nm.createGraphic(t,i):nm.createGraphicComponent(t,i,{skipDefault:null===(n=null==e?void 0:e.spec)||void 0===n?void 0:n.skipTheme});return r||u.getInstance().error("create ".concat(t," graphic failed!")),r}const Kv=e=>{e&&(e[Lm]=null,e.release(),e.parent&&e.parent.removeChild(e))};function Yv(e,t){switch(t){case"line":return e.some((e=>["x","y","defined"].includes(e)));case"area":return e.some((e=>["x","y","x1","y1","defined"].includes(e)));case"largeRects":return e.some((e=>["x","y","width","y1"].includes(e)));case"largeSymbols":return e.some((e=>["x","y"].includes(e)))}return!1}function Xv(e,t){if(["x","y","dx","dy"].includes(t))return!0;switch(e){case Vr.arc:return["innerRadius","outerRadius","startAngle","endAngle"].includes(t);case Vr.group:case Vr.rect:case Vr.image:return["width","height","y1"].includes(t);case Vr.path:case Vr.shape:return["path","customPath"].includes(t);case Vr.line:return"defined"===t;case Vr.area:return["x1","y1","defined"].includes(t);case Vr.rule:return["x1","y1"].includes(t);case Vr.symbol:return"size"===t;case Vr.polygon:return"points"===t;case Vr.text:return"text"===t}return!1}const qv=["fillOpacity"],Zv=(e,t,i)=>{var n;return"fillOpacity"===t?(e.fillOpacity=null!==(n=i.fillOpacity)&&void 0!==n?n:1,["fillOpacity"]):[]};const Qv={rect3d:[{channels:["x","y","z","x1","y1","width","height","length"],transform:(e,t,i)=>{var n,r,s,a,o,l,c,h,d,u,p,g;L(t.width)||!L(t.x1)&&L(i.width)?(e.x=Math.min(null!==(n=i.x)&&void 0!==n?n:0,null!==(r=i.x1)&&void 0!==r?r:1/0),e.width=i.width):L(t.x1)||!L(t.width)&&L(i.x1)?(e.x=Math.min(i.x,i.x1),e.width=Math.abs(i.x1-i.x)):(e.x=Math.min(null!==(s=i.x)&&void 0!==s?s:0,null!==(a=i.x1)&&void 0!==a?a:1/0),e.width=i.width),L(t.height)||!L(t.y1)&&L(i.height)?(e.y=Math.min(null!==(o=i.y)&&void 0!==o?o:0,null!==(l=i.y1)&&void 0!==l?l:1/0),e.height=i.height):L(t.y1)||!L(t.height)&&L(i.y1)?(e.y=Math.min(i.y,i.y1),e.height=Math.abs(i.y1-i.y)):(e.y=Math.min(null!==(c=i.y)&&void 0!==c?c:0,null!==(h=i.y1)&&void 0!==h?h:1/0),e.height=i.height),L(t.length)||!L(t.z1)&&L(i.length)?(e.z=Math.min(null!==(d=i.z)&&void 0!==d?d:0,null!==(u=i.z1)&&void 0!==u?u:1/0),e.length=i.length):L(t.z1)||!L(t.length)&&L(i.z1)?(e.z=Math.min(i.z,i.z1),e.length=Math.abs(i.z1-i.z)):(e.z=Math.min(null!==(p=i.z)&&void 0!==p?p:0,null!==(g=i.z1)&&void 0!==g?g:1/0),e.length=i.length)},storedAttrs:"sizeAttrs"}],[Vr.text]:[{channels:["text","limit","autoLimit","maxLineWidth"],transform:(e,t,i)=>{var n,r,s,a;const o=null!==(n=i.limit)&&void 0!==n?n:1/0,l=null!==(r=i.autoLimit)&&void 0!==r?r:1/0,c=Math.min(o,l),h=k(i.text)&&!P(i.text.text),d=h?i.text.text:i.text;Array.isArray(d),e.maxLineWidth=c===1/0?i.maxLineWidth:c,h?"html"===i.text.type?(e.html={dom:d,width:null!==(s=t.width)&&void 0!==s?s:c,height:null!==(a=t.height)&&void 0!==a?a:t.fontSize,anchorType:"position"},e.text=""):"rich"===i.text.type?e.textConfig=d:e.text=d:e.text=d},storedAttrs:"limitAttrs"}],[Vr.rule]:[{channels:["x","y","x1","y1"],transform:(e,t,i)=>{const n=function(e){const{x:t,y:i,x1:n,y1:r}=e;return L(t)&&L(i)&&L(n)&&L(r)?[{x:t,y:i},{x:n,y:r}]:[]}(i);e.points=n,e.x=0,e.y=0},storedAttrs:"pointAttrs"}],[Vr.symbol]:[{channels:["shape","symbolType"],transform:(e,t,i)=>{var n;e.symbolType=null!==(n=t.shape)&&void 0!==n?n:t.symbolType}},{channels:["image","fill","background"],transform:(e,t,i)=>{t.image?(e.background=t.image,e.fill=!1):i.image?(e.background=i.image,e.fill=!1):(e.fill=i.fill,e.background=i.background)},storedAttrs:"imageAttrs"}],[Vr.richtext]:[{channels:["text","textConfig"],transform:(e,t,i)=>{var n,r,s,a;e.text=null,"rich"===(null===(n=t.text)||void 0===n?void 0:n.type)?e.textConfig=t.text.text:"html"===(null===(r=t.textConfig)||void 0===r?void 0:r.type)?(e.html={dom:t.textConfig.text,width:t.width,height:null!==(s=t.height)&&void 0!==s?s:t.fontSize,anchorType:"position"},e.text=""):"rich"===(null===(a=t.textConfig)||void 0===a?void 0:a.type)?e.textConfig=t.textConfig.text:e.textConfig=t.textConfig}}]};const $v=(e,t,i,n)=>{const r={},s=t?Object.keys(t):[],a=_(e)?Qv[e]:e;if(a&&a.length){const e=[];s.forEach((s=>{let o=!1;a.forEach(((a,l)=>{if(a.channels.includes(s)){if(!e[l])if(a.storedAttrs){const e=function(e,t,i,n,r,s){const a=r.getGraphicAttribute(e,!1,s);if(a)return t.forEach((e=>{e in n&&(a[e]=n[e])})),a;const o={};return t.forEach((e=>{o[e]=n[e]})),i[e]=o,o}(a.storedAttrs,a.channels,r,t,i,n);a.transform(r,t,e)}else a.transform(r,t,null);e[l]=!0,o=!0}})),o||(qv.includes(s)?Zv(r,s,t):r[s]=t[s])}))}else s.forEach((e=>{qv.includes(e)?Zv(r,e,t):r[e]=t[e]}));return r};function Jv(e){return Object.prototype.toString.call(e)}function ey(e){return Object.keys(e)}function ty(e,t,i){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(null==e||null==t)return!1;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(Jv(e)!==Jv(t))return!1;if(Q(e))return!!(null==i?void 0:i.skipFunction);if("object"!=typeof e)return!1;if(v(e)){if(e.length!==t.length)return!1;for(let n=e.length-1;n>=0;n--)if(!ty(e[n],t[n],i))return!1;return!0}if(!k(e))return!1;const n=ey(e),r=ey(t);if(n.length!==r.length)return!1;n.sort(),r.sort();for(let s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(let s=n.length-1;s>=0;s--){const r=n[s];if(!ty(e[r],t[r],i))return!1}return!0}const iy=e=>({}.toString.call(e).replace(/^\[object /,"").replace(/]$/,"")),ny=Object.prototype,ry=function(e){const t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ny)},sy=Object.prototype.hasOwnProperty;const ay=function(e){if(P(e))return!0;if(w(e))return!e.length;const t=iy(e);if("Map"===t||"Set"===t)return!e.size;if(ry(e))return!Object.keys(e).length;for(const i in e)if(sy.call(e,i))return!1;return!0},oy=function(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t===i)return!0;if(P(t)||P(i))return P(t)&&P(i);if(!C(t)&&!C(i))return t===i;const r=v(t)?t:t[e],s=v(i)?i:i[e];return r===s||!1!==n&&(v(s)?!(!v(r)||s.length!==r.length||!s.every(((e,t)=>e===r[t]))):!!D(s)&&!(!D(r)||Object.keys(s).length!==Object.keys(r).length||!Object.keys(s).every((e=>oy(e,s,r)))))};function ly(e){return!!(null==e?void 0:e.scale)}function cy(e){return!!(null==e?void 0:e.field)}function hy(e,t){if(!e)return[];let i=[];return e.scale&&(i=qf(e.scale)?[e.scale]:z(t.getScaleById(e.scale))),i.concat(Wf(e,t))}function dy(e,t,i,n,r){i&&(Gf(i)?t.forEach((t=>{const r=Kf(i,n,t.datum,e);Object.assign(t.nextAttrs,r)})):Object.keys(i).forEach((s=>{var a,o;const c=i[s],h=r&&!Xv(e.mark.markType,s)?[t[0]]:t;if(ly(c)){const e=Xf(c.scale,n),t=null!==(a=null==c?void 0:c.offset)&&void 0!==a?a:0,i=!P(c.band)&&e.bandwidth?e.bandwidth()*c.band:null,r=_(null==c?void 0:c.field),d=r?Tm(c.field):null;let u=r?null:P(null==c?void 0:c.value)?0:null===(o=e.scale)||void 0===o?void 0:o.call(e,c.value);h.forEach((n=>{var a;r&&(u=null===(a=e.scale)||void 0===a?void 0:a.call(e,d(n.datum))),n.nextAttrs[s]=l(u)||l(i)?u+t+i:u}))}else if(cy(c)){const e=Tm(c.field);h.forEach((t=>{t.nextAttrs[s]=e(t.datum)}))}else h.forEach((t=>{t.nextAttrs[s]=Kf(c,n,t.datum,e)}))})))}function uy(e,t,i,n){if(!e)return null;if(Gf(e))return Kf(e,n,t,i);const r={};return Object.keys(e).forEach((s=>{var a,o,c;const h=e[s];if(ly(h)){const e=Xf(h.scale,n),i=null!==(a=null==h?void 0:h.offset)&&void 0!==a?a:0,d=!P(h.band)&&e.bandwidth?e.bandwidth()*h.band:null,u=_(null==h?void 0:h.field),p=u?Tm(h.field):null,g=u?null===(o=e.scale)||void 0===o?void 0:o.call(e,p(t)):P(null==h?void 0:h.value)?0:null===(c=e.scale)||void 0===c?void 0:c.call(e,h.value);r[s]=l(g)||l(d)?g+i+d:g}else if(cy(h)){const e=Tm(h.field);r[s]=e(t)}else r[s]=Kf(h,n,t,i)})),r}const py=(e,t,i)=>!(!P(e)||!P(t))||!P(e)&&!P(t)&&("lineDash"===i?((e,t)=>e.length===t.length&&e.join("-")===t.join("-"))(e,t):"stroke"===i||"fill"===i?((e,t)=>{if(e===t)return!0;if(typeof e!=typeof t)return!1;if(_(e))return!1;if(e.gradient!==t.gradient)return!1;const i=Object.keys(e),n=Object.keys(t);return i.length===n.length&&i.every((i=>"stops"===i?((e,t)=>{var i,n;if(e===t)return!0;const r=null!==(i=e&&e.length)&&void 0!==i?i:0;return r===(null!==(n=t&&t.length)&&void 0!==n?n:0)&&0!==r&&e.every(((e,i)=>!e&&!t[i]||e&&t[i]&&e.color===t[i].color&&e.offset===t[i].offset))})(e[i],t[i]):e[i]===t[i]))})(e,t):e===t),gy=["stroke","strokeOpacity","lineDash","lineDashOffset","lineCap","lineJoin","lineWidth","miterLimit"],fy=["fill","fillOpacity","background","texture","texturePadding","textureSize","textureColor"].concat(gy);function my(e){const t={};return e?(Object.keys(e).forEach((i=>{"x"!==i&&"y"!==i&&"x1"!==i&&"y1"!==i&&"defined"!==i&&"size"!==i&&"width"!==i&&"height"!==i&&"context"!==i&&(t[i]=e[i])})),t):t}class vy{constructor(e){this.data=null,this.states=[],this.diffState=Hr.enter,this.isReserved=!1,this.runtimeStatesEncoder=null,this.items=[],this.getStateAttrs=(e,t)=>{var i,n,r;const s=!P(null===(i=this.runtimeStatesEncoder)||void 0===i?void 0:i[e]),a=s?this.runtimeStatesEncoder[e]:null===(n=this.mark.getSpec().encode)||void 0===n?void 0:n[e];if(!a)return{};if(Q(a))return a(this.getDatum(),this,e,t);if(!s&&(null===(r=this.graphicItem.states)||void 0===r?void 0:r[e]))return this.graphicItem.states[e];const o=this.items.map((e=>Object.assign({},e,{nextAttrs:{}})));dy(this,o,a,this.mark.parameters());const l=this.transformElementItems(o,this.mark.markType);return this.graphicItem.states?this.graphicItem.states[e]||(this.graphicItem.states[e]=l):this.graphicItem.states={[e]:l},l},this.mark=e}initGraphicItem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.graphicItem)return;const t=this.mark.getAttributeTransforms();this.graphicItem=this.mark.addGraphicItem(t?$v(t,e,this):e,this.groupKey),this.graphicItem&&(this.graphicItem[Lm]=this,t&&(this.graphicItem.onBeforeAttributeUpdate=e=>this.mark?$v(t,e,this):e),this.clearGraphicAttributes(),this.mark.needAnimate()&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(e),this.setFinalGraphicAttributes(e)))}updateGraphicItem(e){if(!this.graphicItem)return;P(e.clip)||this.graphicItem.setAttribute("clip",e.clip),P(e.interactive)||this.graphicItem.setAttribute("pickable",e.interactive),P(e.zIndex)||this.graphicItem.setAttribute("zIndex",e.zIndex),this.diffState===Hr.exit?this.graphicItem.releaseStatus="willRelease":this.graphicItem.releaseStatus=void 0;const t=this.mark.animate.getAnimationConfigs("state");0!==t.length&&(this.graphicItem.stateAnimateConfig=t[0].originConfig)}getGraphicItem(){return this.graphicItem}removeGraphicItem(){var e,t;this.graphicItem&&(null===(t=null===(e=this.graphicItem.animates)||void 0===e?void 0:e.forEach)||void 0===t||t.call(e,(e=>e.stop()))),this.graphicItem&&(Kv(this.graphicItem),this.graphicItem[Lm]=null,this.graphicItem=null)}resetGraphicItem(){this.graphicItem&&(this.graphicItem=null)}getBounds(){var e;return null===(e=this.graphicItem)||void 0===e?void 0:e.AABBBounds}getStates(){return this.states}updateData(e,t,i){var n;this.mark.emit($r.BEFORE_ELEMENT_UPDATE_DATA,{groupKey:e,data:t,key:i},this),this.data=t;const r=Zf(i);return this.items=t.map((e=>({datum:e,key:r(e),view:this.mark.view,nextAttrs:{}}))),this.groupKey=e,this.key=this.mark.isCollectionMark()?e:null===(n=this.items)||void 0===n?void 0:n[0].key,this.mark.emit($r.AFTER_ELEMENT_UPDATE_DATA,{groupKey:e,data:t,key:i},this),this.items}state(e,t){var i;const n=this.mark.isCollectionMark(),r=this.states,s=z(Kf(e,t,this.getDatum(),this)),a=null===(i=this.mark.getSpec())||void 0===i?void 0:i.stateSort;a&&a.sort(a);const o=s.length!==r.length||s.some(((e,t)=>e!==r[t]));this.states=s,!n&&o&&this.diffState===Hr.unChange&&(this.diffState=Hr.update)}encodeGraphic(e){this.coordinateTransformEncode(this.items);const t=this.transformElementItems(this.items,this.mark.markType);e&&(this.mark.isCollectionMark()&&delete e.defined,Object.assign(t,e)),this.graphicItem?(this.graphicItem.clearStates(),this.graphicItem.states={},this.graphicItem.stateProxy=null,this.applyGraphicAttributes(t)):this.initGraphicItem(t),this.diffState!==Hr.enter&&this.diffState!==Hr.update||!this.states.length||this.useStates(this.states),this.mark.markType===Vr.shape&&(this.graphicItem.datum=this.items[0].datum),this.items.forEach((e=>{e.nextAttrs={}})),this._setCustomizedShape()}_setCustomizedShape(){var e;if(!this.graphicItem)return;const t=null===(e=this.mark.getSpec())||void 0===e?void 0:e.setCustomizedShape;t&&(this.graphicItem.pathProxy=e=>t(this.data,e,new dc))}encodeItems(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;const r=this.mark.isCollectionMark(),s=t[zr.update],a=t[zr.enter],o=t[zr.exit],l=this.mark.isLargeMode()||r&&!this.mark.getSpec().enableSegments;this.diffState===Hr.enter?(a&&dy(this,e,a,n,l),s&&dy(this,e,s,n,l)):this.diffState===Hr.update?((r&&a||i)&&dy(this,e,a,n,l),s&&dy(this,e,s,n,l)):this.diffState===Hr.exit&&o&&(i&&dy(this,e,a,n,l),dy(this,e,o,n,l))}coordinateTransformEncode(e){if(!this.mark.coord||"arc"===this.mark.markType||!0===this.mark.disableCoordinateTransform)return;const t=this.mark.coord.output();e.forEach((e=>{const i=e.nextAttrs,n=t.convert(i);Object.assign(i,n)}))}clearStates(e){const t=m(e)?e:0!==this.mark.animate.getAnimationConfigs("state").length;this.states=[],this.graphicItem&&this.graphicItem.clearStates(t),this.runtimeStatesEncoder&&(this.runtimeStatesEncoder={})}_updateRuntimeStates(e,t){this.runtimeStatesEncoder||(this.runtimeStatesEncoder={}),this.runtimeStatesEncoder[e]=t}hasState(e){return this.states&&e&&this.states.includes(e)}addState(e,t){var i;if(!this.graphicItem)return!1;if(t&&_(e)&&!ty(t,null===(i=this.runtimeStatesEncoder)||void 0===i?void 0:i[e])){const i=this.states.slice();return i.includes(e)?this.graphicItem.clearStates():i.push(e),this._updateRuntimeStates(e,t),this.useStates(i),!0}const n=this.mark.getSpec().encode,r=z(e).reduce(((e,t)=>(t&&!e.includes(t)&&(null==n?void 0:n[t])&&e.push(t),e)),this.states.slice());return r.length!==this.states.length&&(this.useStates(r),!0)}removeState(e){if(!this.graphicItem)return!1;const t=z(e);if(!t.length)return!1;const i=this.states.filter((e=>!t.includes(e)));return i.length!==this.states.length&&(this.runtimeStatesEncoder&&t.forEach((e=>{this.runtimeStatesEncoder[e]=null})),this.useStates(i),!0)}useStates(e,t){var i;if(!this.graphicItem)return!1;this.mark.emit($r.BEFORE_ELEMENT_STATE,{states:e},this);const n=null===(i=this.mark.getSpec())||void 0===i?void 0:i.stateSort;n&&e.sort(n),this.states=e;const r=m(t)?t:0!==this.mark.animate.getAnimationConfigs("state").length;return this.graphicItem.stateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,r),this.mark.emit($r.AFTER_ELEMENT_STATE,{states:e},this),!0}diffAttributes(e){const t={},i=this.getFinalGraphicAttributes();for(const n in e)oy(n,i,e)&&Bh(i,n)||(t[n]=e[n]);return t}transformElementItems(e,t,i){var n,r,s,a;const o=e[0];if(!o.nextAttrs||0===Object.keys(o.nextAttrs).length)return{};let l=o.nextAttrs;if(function(e){return[Vr.line,Vr.area,Vr.largeRects,Vr.largeSymbols].includes(e)}(t)&&e&&e.length&&P(null===(n=o.nextAttrs)||void 0===n?void 0:n.points)&&(!0===i||Yv(Object.keys(o.nextAttrs),this.mark.markType))){const i=this.getGraphicAttribute("points",!1),n=this.getGraphicAttribute("segments",!1),o=this.mark.getSpec().enableSegments,c=e.map((e=>e.nextAttrs)),h=this.mark.isProgressive();if(l=my(l),t===Vr.line||t===Vr.area){const d=function(e,t,i,n){return!e||!e.length||1===e.length&&t?[]:e.some((e=>Yv(Object.keys(e.nextAttrs),"line")))?e.map(((e,t)=>{var r;const s=e.nextAttrs,{x:a,y:o,x1:l,y1:c,defined:h}=null!==(r=null==i?void 0:i[t])&&void 0!==r?r:{};return P(s.x)&&(s.x=a),P(s.y)&&(s.y=o),P(s.defined)&&!1===h&&(s.defined=!1),s.context=e.key,n&&(P(s.x1)&&(s.x1=l),P(s.y1)&&(s.y1=c)),s})):null!=i?i:[]}(e,!0,i,t===Vr.area);if(o&&!h){const e=d&&0!==d.length?d:function(e){return e?e.reduce(((e,t)=>e.concat(t.points)),[]):null}(n),t=function(e,t,i){var n;if(!e||e.length<=1)return null;const r="area"===(null===(n=null==i?void 0:i.mark)||void 0===n?void 0:n.markType)?fy:gy,s=[];let a=null;return e.forEach(((e,t)=>{a&&r.every((t=>py(a[t],e[t],t)))||(s.length&&(s[s.length-1].endIndex=t),a=e,s.push({attrs:a,startIndex:t}))})),s.length>=2?s.map((e=>{const n=$v(Vr.line,my(e.attrs),i);return n.points=t.slice(e.startIndex,P(e.endIndex)?t.length:e.endIndex),n})):null}(c,e,this);t?(l.segments=t,l.points=null):(l.segments=null,l.points=e)}else h?l.segments=(null!==(a=null===(s=null===(r=this.graphicItem)||void 0===r?void 0:r.attribute)||void 0===s?void 0:s.segments)&&void 0!==a?a:[]).concat([{points:d}]):(l.points=d,l.segments=null)}else t===Vr.largeRects?l.points=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e||!e.length||1===e.length&&t)return[];const n=new Float32Array(4*e.length);return e.forEach(((e,t)=>{var r,s,a,o;const l=e.nextAttrs,c=null!==(r=l.x)&&void 0!==r?r:i[4*t],h=null!==(s=l.y)&&void 0!==s?s:i[4*t+1],d=null!==(a=l.width)&&void 0!==a?a:i[4*t+2],u=null!==(o=l.y1)&&void 0!==o?o:i[4*t+3];n[4*t]=c,n[4*t+1]=h,n[4*t+2]=d,n[4*t+3]=u-h})),n}(e,!0,i):t===Vr.largeSymbols&&(l.points=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e||!e.length||1===e.length&&t)return[];const n=new Float32Array(2*e.length);return e.forEach(((e,t)=>{var r,s;const a=e.nextAttrs,o=null!==(r=a.x)&&void 0!==r?r:i[2*t],l=null!==(s=a.y)&&void 0!==s?s:i[2*t+1];n[2*t]=o,n[2*t+1]=l})),n}(e,!0,i))}return l}applyGraphicAttributes(e){var t,i;if(!ay(e))if(this.mark.needAnimate()){const n=this.diffAttributes(e),r=null!==(t=this.getPrevGraphicAttributes())&&void 0!==t?t:{},s=null!==(i=this.getFinalGraphicAttributes())&&void 0!==i?i:{};Object.keys(n).forEach((e=>{r[e]=this.getGraphicAttribute(e),s[e]=n[e]})),this.setNextGraphicAttributes(n),this.setPrevGraphicAttributes(r),this.setFinalGraphicAttributes(s);const a=this.mark.animate.getElementAnimators(this).reduce(((e,t)=>Object.assign(e,t.getEndAttributes())),{}),o=Object.assign({},a,s);this.graphicItem.setAttributes(o)}else this.graphicItem.setAttributes(e)}getGraphicAttribute(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var i;if(!this.graphicItem)return;if(t){let t;const i=this.getPrevGraphicAttributes();if(!P(t=Br(i,e)))return t}const n=this.mark.getAttributeTransforms();let r=[e];if(n&&n.length){const t=n.find((t=>t.storedAttrs&&t.channels.includes(e)));t&&(r=[t.storedAttrs,e])}return Br(null===(i=this.graphicItem)||void 0===i?void 0:i.attribute,r)}setGraphicAttribute(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.graphicItem)return;const n=this.getFinalGraphicAttributes(),r=this.getPrevGraphicAttributes();i&&n&&(n[e]=t),r&&!Bh(r,e)&&(r[e]=this.graphicItem.attribute[e]),this.graphicItem.setAttribute(e,t)}setGraphicAttributes(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.graphicItem)return;const i=this.getFinalGraphicAttributes(),n=this.getPrevGraphicAttributes();Object.keys(e).forEach((r=>{i&&t&&(i[r]=e[r]),n&&!Bh(n,r)&&(n[r]=this.graphicItem.attribute[r])})),this.graphicItem.setAttributes(e)}getFinalGraphicAttributes(){return this.graphicItem.finalAttrs}setFinalGraphicAttributes(e){this.graphicItem.finalAttrs=e}getPrevGraphicAttributes(){return this.graphicItem.prevAttrs}setPrevGraphicAttributes(e){this.graphicItem.prevAttrs=e}getNextGraphicAttributes(){return this.graphicItem.nextAttrs}setNextGraphicAttributes(e){this.graphicItem.nextAttrs=e}clearChangedGraphicAttributes(){this.graphicItem&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null))}clearGraphicAttributes(){this.graphicItem&&(this.graphicItem.prevAttrs&&this.setPrevGraphicAttributes(null),this.graphicItem.nextAttrs&&this.setNextGraphicAttributes(null),this.graphicItem.finalAttrs&&this.setFinalGraphicAttributes(null))}remove(){this.graphicItem&&(Kv(this.graphicItem),this.graphicItem=null)}release(){this.removeGraphicItem(),this.mark=null,this.data=null,this.items=null}getItemAttribute(e){var t,i;if(null===(t=this.items)||void 0===t?void 0:t.length)return this.mark.isCollectionMark()?P(e)?this.items.map((e=>e.nextAttrs)):this.items.map((t=>{var i;return null===(i=t.nextAttrs)||void 0===i?void 0:i[e]})):P(e)?this.items[0].nextAttrs:null===(i=this.items[0].nextAttrs)||void 0===i?void 0:i[e]}setItemAttributes(e){var t;(null===(t=this.items)||void 0===t?void 0:t.length)&&(this.mark.isCollectionMark()?v(e)&&this.items.forEach(((t,i)=>{Object.assign(t.nextAttrs,e[i])})):Object.assign(this.items[0].nextAttrs,e))}getItem(){var e,t;return this.mark.isCollectionMark()?null!==(e=this.items)&&void 0!==e?e:[]:null===(t=this.items)||void 0===t?void 0:t[0]}getDatum(){var e,t;return this.mark.isCollectionMark()?null!==(e=this.data)&&void 0!==e?e:[]:null===(t=this.data)||void 0===t?void 0:t[0]}}class yy extends vy{constructor(e){super(e),this.getStateAttrs=(e,t)=>{var i,n,r;const s=!P(null===(i=this.runtimeStatesEncoder)||void 0===i?void 0:i[e]),a=s?this.runtimeStatesEncoder[e]:null===(n=this.mark.getSpec().encode)||void 0===n?void 0:n[e],o={};if(!a)return o;if(Q(a))return o.attributes=a(this.getDatum(),this,e,t),o;if(!s&&(null===(r=this.graphicItem.glyphStates)||void 0===r?void 0:r[e]))return this.graphicItem.glyphStates[e];if(a){const t=this.items[0],i=[Object.assign({},t,{nextAttrs:{}})];return dy(this,i,a,this.mark.parameters()),this.coordinateTransformEncode(i),o.attributes=i[0].nextAttrs,this.graphicItem.glyphStates?this.graphicItem.glyphStates[e]||(this.graphicItem.glyphStates[e]=o):this.graphicItem.glyphStates={[e]:o},o}return o},this.glyphMeta=this.mark.getGlyphMeta()}getGlyphGraphicItems(){return this.glyphGraphicItems}initGraphicItem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.graphicItem)return;this.graphicItem=this.mark.addGraphicItem(e,this.groupKey),this.graphicItem[Lm]=this,this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1);const t=this.glyphMeta.getMarks();this.glyphGraphicItems={},this.graphicItem.getSubGraphic().forEach((e=>{const i=t[e.name];this.glyphGraphicItems[e.name]=e,e.onBeforeAttributeUpdate=t=>this.mark?$v(i,t,this,e.name):t})),this.clearGraphicAttributes()}useStates(e,t){if(!this.graphicItem)return!1;this.mark.emit($r.BEFORE_ELEMENT_STATE,{states:e},this),this.states=e.slice();const i=m(t)?t:0!==this.mark.animate.getAnimationConfigs("state").length;return this.graphicItem.glyphStateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,i),this.mark.emit($r.AFTER_ELEMENT_STATE,{states:e},this),!0}encodeGraphic(){this.coordinateTransformEncode(this.items);const e=this.transformElementItems(this.items,this.mark.markType);this.graphicItem||this.initGraphicItem(),this.diffState===Hr.enter?(this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!0),this.applyGraphicAttributes(e),this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1)):this.applyGraphicAttributes(e),this.diffState!==Hr.enter&&this.diffState!==Hr.update||!this.states.length||(Object.values(this.glyphGraphicItems).forEach((e=>{e.states={}})),this.useStates(this.states)),this.items.map((e=>{e.nextAttrs={}}))}encodeCustom(e){var t;let i={};const n=this.glyphMeta.getChannelEncoder(),r=this.glyphMeta.getFunctionEncoder();if(r&&(i=r.call(null,Object.assign({},null===(t=this.graphicItem)||void 0===t?void 0:t.attribute,e),this.getDatum(),this,this.mark.getGlyphConfig())),n){let t;Object.keys(n).forEach((r=>{var s;if(!P(e[r])){t||(t=Object.assign({},null===(s=this.graphicItem)||void 0===s?void 0:s.attribute,e));const a=n[r].call(null,r,e[r],t,this.getDatum(),this,this.mark.getGlyphConfig());Object.keys(null!=a?a:{}).forEach((e=>{var t;i[e]=Object.assign(null!==(t=i[e])&&void 0!==t?t:{},a[e])}))}}))}return i}encodeDefault(){const e={};if(this.diffState===Hr.enter&&this.glyphMeta.getDefaultEncoder()){const t=this.glyphMeta.getDefaultEncoder().call(null,this.getDatum(),this,this.mark.getGlyphConfig());Object.assign(e,t)}return e}_onGlyphAttributeUpdate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{if(!this.mark)return t;const i=this.glyphMeta.getMarks(),n=$v(this.mark.getAttributeTransforms(),t,this),r=e?this.encodeDefault():null,s=this.encodeCustom(t);return Object.keys(i).forEach((n=>{const a=i[n],o=this.glyphGraphicItems[n],l=null==s?void 0:s[n],c=Object.assign({},l);if(e){const e=null==r?void 0:r[n];Object.keys(null!=e?e:{}).forEach((t=>{Bh(this.items[0].nextAttrs,t)||Bh(c,t)||(c[t]=e[t])}))}const h=Object.assign({},function(e,t){var i;return(null!==(i=Qv[e])&&void 0!==i?i:[]).reduce(((e,i)=>(i.channels.forEach((i=>{Bh(t,i)&&(e[i]=t[i])})),e)),{})}(a,t),c),d=this._generateGlyphItems(a,this.items,h);this.coordinateTransformEncode(d);const u=this.transformElementItems(d,a);this.applyGlyphGraphicAttributes(u,n,o),a===Vr.shape&&(o.datum=d[0].datum)})),n}}_generateGlyphItems(e,t,i){const n=t.map((e=>Object.assign({},e,{nextAttrs:i})));return jm.includes(e)&&this.mark.getSpec().enableSegments&&n.forEach(((e,n)=>{e.nextAttrs=Object.assign({},t[n].nextAttrs,i)})),n}getGraphicAttribute(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(!this.graphicItem)return;const n=this.getPrevGraphicAttributes(i);return t&&Bh(n,e)?n[e]:(i?this.glyphGraphicItems[i]:this.graphicItem).attribute[e]}setGraphicAttribute(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;if(!this.graphicItem)return;const r=n?this.glyphGraphicItems[n]:this.graphicItem,s=this.getFinalGraphicAttributes(n),a=this.getPrevGraphicAttributes(n);i&&(s[e]=t),Bh(a,e)||(a[e]=r.attribute[e]),r.setAttribute(e,t)}setGraphicAttributes(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;if(!this.graphicItem)return;const n=i?this.glyphGraphicItems[i]:this.graphicItem,r=this.getFinalGraphicAttributes(i),s=this.getPrevGraphicAttributes(i);Object.keys(e).forEach((i=>{t&&(r[i]=e[i]),Bh(s,i)||(s[i]=n.attribute[i])})),n.setAttributes(e)}diffAttributes(e,t){const i={},n=this.getFinalGraphicAttributes(t);for(const r in e)oy(r,n,e)||(i[r]=e[r]);return i}applyGlyphGraphicAttributes(e,t,i){var n,r;if(this.mark.needAnimate()){const s=this.diffAttributes(e,t),a=null!==(n=this.getPrevGraphicAttributes(t))&&void 0!==n?n:{},o=null!==(r=this.getFinalGraphicAttributes(t))&&void 0!==r?r:{};Object.keys(s).forEach((e=>{a[e]=i.attribute[e],o[e]=s[e]})),this.setNextGraphicAttributes(s,t),this.setPrevGraphicAttributes(a,t),this.setFinalGraphicAttributes(o,t),i.setAttributes(s)}else i.setAttributes(e)}getFinalGraphicAttributes(e){return(e?this.glyphGraphicItems[e]:this.graphicItem).finalAttrs}setFinalGraphicAttributes(e,t){(t?this.glyphGraphicItems[t]:this.graphicItem).finalAttrs=e}getPrevGraphicAttributes(e){return(e?this.glyphGraphicItems[e]:this.graphicItem).prevAttrs}setPrevGraphicAttributes(e,t){(t?this.glyphGraphicItems[t]:this.graphicItem).prevAttrs=e}getNextGraphicAttributes(e){return(e?this.glyphGraphicItems[e]:this.graphicItem).nextAttrs}setNextGraphicAttributes(e,t){(t?this.glyphGraphicItems[t]:this.graphicItem).nextAttrs=e}clearChangedGraphicAttributes(){this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach((e=>{this.setPrevGraphicAttributes(null,e),this.setNextGraphicAttributes(null,e)}))}clearGraphicAttributes(){this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),this.setFinalGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach((e=>{this.setPrevGraphicAttributes(null,e),this.setNextGraphicAttributes(null,e),this.setFinalGraphicAttributes(null,e)}))}remove(){this.glyphGraphicItems=null,super.remove()}release(){this.glyphGraphicItems&&(Object.values(this.glyphGraphicItems).forEach((e=>{e[Lm]=null})),this.glyphGraphicItems=null),super.release()}}const by=e=>e.markType===Vr.glyph?new yy(e):new vy(e);function _y(e,t,i){const n=new Map;if(!e||0===e.length)return{keys:[],data:n};if(!t)return n.set(Bm,i?e.slice().sort(i):e.slice()),{keys:zm,data:n};const r=Zf(t);if(1===e.length){const t=r(e[0]);return n.set(t,[e[0]]),{keys:[t],data:n}}const s=new Set;return e.forEach((e=>{var t;const i=r(e),a=null!==(t=n.get(i))&&void 0!==t?t:[];a.push(e),n.set(i,a),s.add(i)})),i&&s.forEach((e=>{n.get(e).sort(i)})),{keys:Array.from(s),data:n}}class xy{constructor(e,t,i){this.prevData=(null==e?void 0:e.length)?_y(e,null!=t?t:null,i):null}setCurrentData(e){this.currentData=e}getCurrentData(){return this.currentData}doDiff(){if(this.callback)if(this.currentData&&this.prevData){const e=new Map(this.prevData.data);this.currentData.keys.forEach((t=>{this.callback(t,this.currentData.data.get(t),e.get(t)),e.delete(t)})),this.prevData.keys.forEach((t=>{e.has(t)&&this.callback(t,null,e.get(t))}))}else this.currentData?this.currentData.keys.forEach((e=>{this.callback(e,this.currentData.data.get(e),null)})):this.prevData&&this.prevData.keys.forEach((e=>{this.callback(e,null,this.prevData.data.get(e))}))}setCallback(e){this.callback=e}updateToCurrent(){this.prevData=this.currentData,this.currentData=null}reset(){this.prevData=null}}class Sy extends qh{constructor(e,t,i,n,r){super(e,t,i,n,r)}getEndProps(){return!1===this.valid?{}:{text:this.to}}onBind(){var e,t,i,n,r,s,a,o;this.fromNumber=l(null===(e=this.from)||void 0===e?void 0:e.text)?null===(t=this.from)||void 0===t?void 0:t.text:Number.parseFloat(null===(i=this.from)||void 0===i?void 0:i.text),this.toNumber=l(null===(n=this.to)||void 0===n?void 0:n.text)?null===(r=this.to)||void 0===r?void 0:r.text:Number.parseFloat(null===(s=this.to)||void 0===s?void 0:s.text),Number.isFinite(this.toNumber)||(this.fromNumber=0),Number.isFinite(this.toNumber)||(this.valid=!1),!1!==this.valid&&(this.decimalLength=null!==(o=null===(a=this.params)||void 0===a?void 0:a.fixed)&&void 0!==o?o:Math.max(er(this.fromNumber),er(this.toNumber)))}onEnd(){}onUpdate(e,t,i){!1!==this.valid&&(i.text=e?this.toNumber:(this.fromNumber+(this.toNumber-this.fromNumber)*t).toFixed(this.decimalLength))}}var wy;!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.TOP_TO_BOTTOM=2]="TOP_TO_BOTTOM",e[e.BOTTOM_TO_TOP=3]="BOTTOM_TO_TOP",e[e.STROKE=4]="STROKE"}(wy||(wy={}));class Cy extends qh{constructor(e,t,i,n,r){super(e,t,i,n,r),this.newPointAnimateType="appear"===(null==r?void 0:r.newPointAnimateType)?"appear":"grow"}onBind(){var e,t;const i=null===(e=this.from)||void 0===e?void 0:e.points,n=null===(t=this.to)||void 0===t?void 0:t.points;this.fromPoints=i?Array.isArray(i)?i:[i]:[],this.toPoints=n?Array.isArray(n)?n:[n]:[];const r=new Map;this.fromPoints.forEach((e=>{e.context&&r.set(e.context,e)}));let s,a,o=1/0,l=-1/0;for(let h=0;h<this.toPoints.length;h+=1)if(r.has(this.toPoints[h].context)){o=h,s=r.get(this.toPoints[h].context);break}for(let h=this.toPoints.length-1;h>=0;h-=1)if(r.has(this.toPoints[h].context)){l=h,a=r.get(this.toPoints[h].context);break}let c=this.toPoints[0];this.interpolatePoints=this.toPoints.map(((e,t)=>{const i=r.get(e.context);return i?(c=i,[i,e]):"appear"===this.newPointAnimateType?[e,e]:t<o&&s?[s,e]:t>l&&a?[a,e]:[c,e]})),this.points=this.interpolatePoints.map((e=>{const t=e[0],i=e[1],n=new ir(t.x,t.y,t.x1,t.y1);return n.defined=i.defined,n.context=i.context,n}))}onUpdate(e,t,i){this.points=this.points.map(((e,i)=>{const n=Td(this.interpolatePoints[i][0],this.interpolatePoints[i][1],t);return n.context=e.context,n})),i.points=this.points}}class ky extends qh{constructor(e,t,i,n,r){super(null,null,i,n,r),this.clipFromAttribute=e,this.clipToAttribute=t,this._group=null==r?void 0:r.group,this._clipGraphic=null==r?void 0:r.clipGraphic}onBind(){this._group&&this._clipGraphic&&(this._lastClip=this._group.attribute.clip,this._lastPath=this._group.attribute.path,this._group.setAttributes({clip:!0,path:[this._clipGraphic]},!1,{type:wl.ANIMATE_BIND}))}onEnd(){this._group&&this._group.setAttributes({clip:this._lastClip,path:this._lastPath},!1,{type:wl.ANIMATE_END})}onUpdate(e,t,i){if(!this._clipGraphic)return;const n={};Object.keys(this.clipFromAttribute).forEach((e=>{n[e]=this.clipFromAttribute[e]+(this.clipToAttribute[e]-this.clipFromAttribute[e])*t})),this._clipGraphic.setAttributes(n,!1,{type:wl.ANIMATE_UPDATE,animationState:{ratio:t,end:e}})}}class Ay extends ky{constructor(e,t,i,n,r){var s,a,o,l,c,h,d,u,p,g,f,m;const v=null!==(a=null===(s=null==r?void 0:r.group)||void 0===s?void 0:s.attribute)&&void 0!==a?a:{},y=null!==(o=v.width)&&void 0!==o?o:0,b=null!==(l=v.height)&&void 0!==l?l:0,_=null!==(c=null==r?void 0:r.animationType)&&void 0!==c?c:"in",x=null!==(h=null==r?void 0:r.startAngle)&&void 0!==h?h:0,S=null!==(d=null==r?void 0:r.orient)&&void 0!==d?d:"clockwise";let w=0,C=0;"anticlockwise"===S?(C="in"===_?x+2*Math.PI:x,C=x+2*Math.PI):(w=x,C="out"===_?x+2*Math.PI:x);const k=se.graphicService.creator.arc({x:null!==(p=null===(u=null==r?void 0:r.center)||void 0===u?void 0:u.x)&&void 0!==p?p:y/2,y:null!==(f=null===(g=null==r?void 0:r.center)||void 0===g?void 0:g.y)&&void 0!==f?f:b/2,outerRadius:null!==(m=null==r?void 0:r.radius)&&void 0!==m?m:(y+b)/2,innerRadius:0,startAngle:w,endAngle:C,fill:!0});let A,E;"anticlockwise"===S?(A={startAngle:x+2*Math.PI},E={startAngle:x}):(A={endAngle:x},E={endAngle:x+2*Math.PI}),super("in"===_?A:E,"in"===_?E:A,i,n,{group:null==r?void 0:r.group,clipGraphic:k})}}class Ey extends ky{constructor(e,t,i,n,r){var s,a,o,l,c,h,d,u,p;const g=null!==(a=null===(s=null==r?void 0:r.group)||void 0===s?void 0:s.attribute)&&void 0!==a?a:{},f=null!==(l=null!==(o=null==r?void 0:r.width)&&void 0!==o?o:g.width)&&void 0!==l?l:0,m=null!==(h=null!==(c=null==r?void 0:r.height)&&void 0!==c?c:g.height)&&void 0!==h?h:0,v=null!==(d=null==r?void 0:r.animationType)&&void 0!==d?d:"in",y=null!==(u=null==r?void 0:r.direction)&&void 0!==u?u:"x",b=null!==(p=null==r?void 0:r.orient)&&void 0!==p?p:"positive",_=se.graphicService.creator.rect({x:0,y:0,width:"in"===v&&"x"===y?0:f,height:"in"===v&&"y"===y?0:m,fill:!0});let x={},S={};"y"===y?"negative"===b?(x={y:m,height:0},S={y:0,height:m}):(x={height:0},S={height:m}):"negative"===b?(x={x:f,width:0},S={x:0,width:f}):(x={width:0},S={width:f}),super("in"===v?x:S,"in"===v?S:x,i,n,{group:null==r?void 0:r.group,clipGraphic:_})}}class Ty extends qh{onStart(){const{center:e,r:t}="function"==typeof this.params?this.params():this.params,i=this.target.getComputedAttribute("x"),n=this.target.getComputedAttribute("y"),r=this.target.getComputedAttribute("z"),s=Math.acos((n-e.y)/t);let a=Math.acos((i-e.x)/t/Math.sin(s));r-e.z<0&&(a=zn-a),this.theta=a,this.phi=s}onBind(){}onEnd(){}onUpdate(e,t,i){if(null==this.phi||null==this.theta)return;const{center:n,r:r,cb:s}="function"==typeof this.params?this.params():this.params,a=2*Math.PI*t,o=this.theta+a,l=this.phi,c=r*Math.sin(l)*Math.cos(o)+n.x,h=r*Math.cos(l)+n.y,d=r*Math.sin(l)*Math.sin(o)+n.z;for(i.x=c,i.y=h,i.z=d,i.alpha=o+Fn/2;i.alpha>zn;)i.alpha-=zn;i.alpha=zn-i.alpha,i.zIndex=-1e4*i.z,s&&s(i)}}class Oy extends qh{getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:1}})}onEnd(){this.target.setTheme({common:{opacity:0}})}onUpdate(e,t,i){this.target.setTheme({common:{opacity:1-t}})}}class Py extends qh{constructor(e,t){super(null,null,e,"linear"),this.customAnimates=t}initAnimates(){this.customAnimates.forEach((e=>{e.step=this.step,e.subAnimate=this.subAnimate,e.target=this.target}))}getEndProps(){const e={};return this.customAnimates.forEach((t=>{Object.assign(e,t.getEndProps())})),e}onBind(){this.initAnimates(),this.customAnimates.forEach((e=>{e.onBind()}))}onEnd(){this.customAnimates.forEach((e=>{e.onEnd()}))}onStart(){this.customAnimates.forEach((e=>{e.onStart()}))}onUpdate(e,t,i){this.updating||(this.updating=!0,this.customAnimates.forEach((n=>{const r=n.easing,s="string"==typeof r?Kh[r]:r;t=s(t),n.onUpdate(e,t,i)})),this.updating=!1)}}const My=(e,t)=>{if(!e)return null;if(e.from){const i=e.from,n=Object.keys(i);n.forEach((e=>{P(i[e])&&delete i[e]}));const r=Yv(n,t.mark.markType)&&!x(i.segments);if(r){const n=t.items.map((e=>Object.assign({},e,{nextAttrs:Object.assign({},i)})));e.from=t.transformElementItems(n,t.mark.markType,r)}}if(e.to){const i=e.to,n=Object.keys(i);n.forEach((e=>{P(i[e])&&delete i[e]}));const r=Yv(n,t.mark.markType)&&!x(i.segments);if(r){const n=t.items.map((e=>Object.assign({},e,{nextAttrs:Object.assign({},i)})));e.to=t.transformElementItems(n,t.mark.markType,r)}}return e};const Iy=(e,t,i,n,r)=>Q(i)?i(e.getDatum(),e,r):i;class Ry extends qh{constructor(e,t,i,n,r){super(e,t,i,n,r),this._interpolator=null==r?void 0:r.interpolator,this._element=null==r?void 0:r.element}onBind(){var e,t;this.from=null!==(e=this.from)&&void 0!==e?e:{},this.to=null!==(t=this.to)&&void 0!==t?t:{}}getEndProps(){return this.to}onUpdate(e,t,i){this._interpolator&&this._element&&this._interpolator.call(this,t,this.from,this.to,i,this._element.getDatum(),this._element,this.params.parameters)}}class Dy extends qh{getEndProps(){return this.to}onBind(){var e,t;this.from=null!==(e=this.from)&&void 0!==e?e:{},this.to=null!==(t=this.to)&&void 0!==t?t:{}}onStart(){var e;const t=null!==(e=this.target.constructor.NOWORK_ANIMATE_ATTR)&&void 0!==e?e:bd,i=Object.keys(t).filter((e=>0!==t[e]));this.subAnimate.animate.preventAttrs(i);const n=Object.assign({},this.from),r=Object.assign({},this.to);Object.keys(r).forEach((e=>{i.includes(e)?(n[e]=r[e],this.from[e]=r[e]):P(n[e])&&(n[e]=this.target.getComputedAttribute(e))})),this.target.setAttributes(n,!1,{type:wl.ANIMATE_UPDATE,animationState:{ratio:0,end:!1}}),this._fromAttribute=n,this._toAttribute=r}onEnd(){this.target.setAttributes(this._toAttribute,!1,{type:wl.ANIMATE_END})}update(e,t,i){0===this.updateCount&&this.onFirstRun(),this.updateCount+=1;const n=this.step.getLastProps();Object.keys(n).forEach((e=>{this.subAnimate.animate.validAttr(e)&&(i[e]=n[e])})),this.onUpdate(e,t,i),e&&this.onEnd()}onUpdate(e,t,i){this.target.stepInterpolate(this.subAnimate,this.subAnimate.animate,i,this.step,t,e,this._toAttribute,this._fromAttribute)}}Qh.mode|=kl.SET_ATTR_IMMEDIATELY;let Ly=0;const jy=e=>!P(e)&&e.prototype instanceof qh;class Fy{constructor(e,t,i){this.id=Ly++,this.isAnimating=!1,this.runnings=[],this.element=e,this.animationOptions=i,this.unit=t}callback(e){return this.callbackFunction=e,this}animate(e,t){return this.isAnimating=!0,this.animateElement(e,t),0===this.runnings.length&&this.animationEnd(),this}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"end",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.runnings.forEach((t=>t.stop(e))),this.animationEnd(t),this}pause(){return this.runnings.forEach((e=>e.pause())),this}resume(){return this.runnings.forEach((e=>e.resume())),this}startAt(e){return this.runnings.forEach((t=>{const i=this.unit.initialDelay;t.startAt(i+e)})),this}getTotalAnimationTime(){var e;const t=this.unit.initialDelay+this.unit.loopDuration*this.unit.loopCount;return null!==(e=this.unit.totalTime)&&void 0!==e?e:t}getEndAttributes(){return this.runnings.reduce(((e,t)=>Object.assign(e,t.getEndProps())),{})}animationEnd(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;this.isAnimating=!1,this.runnings=null,e&&(null===(t=this.callbackFunction)||void 0===t||t.call(null))}animateElement(e,t){const i=this.element.getGraphicItem();if(!i)return;const n=i.animate();this.runnings.push(n),n.startAt(this.unit.initialDelay),n.wait(this.unit.loopDelay),this.unit.timeSlices.forEach((i=>{this.animateTimeSlice(n,i,e,t)})),n.wait(this.unit.loopDelayAfter),n.loop(this.unit.loopCount-1),L(this.unit.totalTime)&&setTimeout((()=>{n&&n.stop("end")}),this.unit.totalTime),n.onEnd((()=>{this.runnings=this.runnings.filter((e=>e!==n)),0===this.runnings.length&&this.animationEnd()}))}animateTimeSlice(e,t,i,n){const r=t.delay,s=t.delayAfter,a=t.duration,o=t.effects;if(r>0&&e.wait(r),o.length<0)e.wait(a);else{const t=o.map(((e,t)=>{var r;const s=null!==(r=e.type?function(e,t,i,n){const r=Q(t.options)?t.options.call(null,e.getDatum(),e,n):t.options;if(!t.type||!nm.getAnimationType(t.type))return null;const s=nm.getAnimationType(t.type)(e,r,i);return My(s,e)}(this.element,e,i,n):e.channel?function(e,t,i,n){const r=t.channel;let s=null;return v(r)?s=r.reduce(((t,i)=>(t.from[i]=e.getGraphicAttribute(i,!0),t.to[i]=e.getGraphicAttribute(i,!1),t)),{from:{},to:{}}):D(r)&&(s=Object.keys(r).reduce(((t,i)=>{var s,a;const o=!P(null===(s=r[i])||void 0===s?void 0:s.from),l=!P(null===(a=r[i])||void 0===a?void 0:a.to);return(o||l)&&(t.from[i]=o?Iy(e,0,r[i].from,0,n):void 0,t.to[i]=l?Iy(e,0,r[i].to,0,n):e.getGraphicAttribute(i,!1)),t}),{from:{},to:{}})),My(s,e)}(this.element,e,0,n):void 0)&&void 0!==r?r:{},o=s.custom||(null==e?void 0:e.custom),l=(null==s?void 0:s.customParameters)||(null==e?void 0:e.customParameters);s.from&&Object.keys(s.from).length&&this.unit&&this.animationOptions.timeline.controlOptions.immediatelyApply&&"component"!==this.element.mark.markType&&this.element.getGraphicItem().setAttributes(s.from);const c=jy(o);return P(o)||jy(o)?c?new o(s.from,s.to,a,e.easing,l):s.to?new Dy(s.from,s.to,a,e.easing):void 0:new Ry(s.from,s.to,a,e.easing,{interpolator:o,element:this.element,parameters:l})})).filter((e=>!P(e)));1===t.length?e.play(t[0]):t.length>1&&e.play(new Py(a,t))}s>0&&e.wait(s)}}function By(e){let t=[];return Object.keys(e).forEach((i=>{t=t.concat(Ny(i,e[i]))})),t}function Ny(e,t){const i=[];let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return z(t).forEach((t=>{var r;const s=function(e){var t,i,n,r,s,a,o,l,c,h,d,u;if(P(e.timeSlices)){const c=e;return{startTime:null!==(t=c.startTime)&&void 0!==t?t:Km,totalTime:c.totalTime,oneByOne:null!==(i=c.oneByOne)&&void 0!==i?i:Qm,loop:null!==(n=c.loop)&&void 0!==n?n:Zm,controlOptions:O({},Jm,null!==(r=c.controlOptions)&&void 0!==r?r:{}),timeSlices:[{duration:null!==(s=c.duration)&&void 0!==s?s:Ym,delay:null!==(a=c.delay)&&void 0!==a?a:Xm,delayAfter:null!==(o=c.delayAfter)&&void 0!==o?o:qm,effects:[{type:c.type,channel:c.channel,custom:c.custom,easing:null!==(l=c.easing)&&void 0!==l?l:$m,customParameters:c.customParameters,options:c.options}]}]}}const p=z(e.timeSlices).filter((e=>e.effects&&z(e.effects).filter((e=>e.channel||e.type)).length));if(p.length)return{startTime:null!==(c=e.startTime)&&void 0!==c?c:Km,totalTime:e.totalTime,oneByOne:null!==(h=e.oneByOne)&&void 0!==h?h:Qm,loop:null!==(d=e.loop)&&void 0!==d?d:Zm,controlOptions:O({},Jm,null!==(u=e.controlOptions)&&void 0!==u?u:{}),timeSlices:p.map((e=>{var t,i;return{duration:e.duration,delay:null!==(t=e.delay)&&void 0!==t?t:Xm,delayAfter:null!==(i=e.delayAfter)&&void 0!==i?i:qm,effects:z(e.effects).filter((e=>e.channel||e.type)).map((e=>{var t;return{type:e.type,channel:e.channel,custom:e.custom,easing:null!==(t=e.easing)&&void 0!==t?t:$m,customParameters:e.customParameters,options:e.options}}))}})),partitioner:e.partitioner,sort:e.sort}}(t);s&&(i.push({state:e,id:null!==(r=s.id)&&void 0!==r?r:"".concat(e,"-").concat(n),timeline:s,originConfig:t}),n+=1)})),i}function zy(e,t,i){return Q(e)?e.call(null,t.getDatum(),t,i):e}class Hy{constructor(e){this.parallelArrangers=[this],this.totalTime=0,this.startTime=0,this.endTime=0,this.animators=e.filter((e=>!P(e))),this.totalTime=this.animators.reduce(((e,t)=>Math.max(e,t.getTotalAnimationTime())),0)}parallel(e){const t=Array.from(new Set(this.parallelArrangers.concat(e.parallelArrangers)));return t.forEach((e=>{e.parallelArrangers=t})),this.arrangeTime(),this}after(e){return this.afterArranger=e,this.arrangeTime(),this}arrangeTime(){const e=this.parallelArrangers.reduce(((e,t)=>Math.max(e,t.totalTime)),this.totalTime),t=this.parallelArrangers.reduce(((e,t)=>{var i,n;return Math.max(e,null!==(n=null===(i=t.afterArranger)||void 0===i?void 0:i.endTime)&&void 0!==n?n:0)}),0);this.parallelArrangers.forEach((i=>{i.startTime=t,i.endTime=t+e,i.animators.forEach((e=>{e.startAt(t)}))}))}}class Vy{constructor(e,t){this.state=null,this.immediateConfigs=[],this.isEnabled=!0,this.disabledStates=[],this.animators=new Map,this.elementRecorder=new WeakMap,this.timelineCount={},this.mark=e,this.configs=By(null!=t?t:{})}getAnimationConfigs(e){var t;return this.isEnabled?(null!==(t=this.configs)&&void 0!==t?t:[]).filter((t=>t.state===e)):[]}updateConfig(e){this.configs=By(null!=e?e:{})}updateState(e){this.state=e}animate(){if(!this.isEnabled||!this.configs||!this.configs.length)return;const e=this.mark.getAllElements(),t=this.mark.parameters();return e.forEach((e=>{var t;e.isReserved&&e.diffState!==Hr.exit&&(e.isReserved=!1);const i=null===(t=this.elementRecorder.get(e))||void 0===t?void 0:t.prevState;this.configs.some((t=>i!==e.diffState&&t.state===i&&t.timeline.controlOptions.stopWhenStateChange))&&this.clearElementAnimation(e,!1)})),this.configs.forEach((i=>{this.animateByTimeline(i,e,t)})),this.mark.cleanExitElements(),this}runAnimationByState(e){if(!this.isEnabled)return;const t=this.configs.filter((t=>t.state===e)),i=this.mark.getAllElements(),n=this.mark.parameters(),r=t.reduce(((e,t)=>e.concat(this.animateByTimeline(t,i,n,!0))),[]);return new Hy(r)}stopAnimationByState(e){const t=this.animators.get(e);return t&&t.forEach((e=>e.stop())),this}pauseAnimationByState(e){const t=this.animators.get(e);return t&&t.forEach((e=>e.pause())),this}resumeAnimationByState(e){const t=this.animators.get(e);return t&&t.forEach((e=>e.resume())),this}run(e){if(!this.isEnabled)return;const t=Ny(Gm,e,this.immediateConfigs.length);this.immediateConfigs=this.immediateConfigs.concat(t);const i=this.mark.getAllElements(),n=this.mark.parameters(),r=t.reduce(((e,t)=>e.concat(this.animateByTimeline(t,i,n,!0))),[]);return new Hy(r)}stop(){return this.animators.forEach((e=>{e.forEach((e=>e.stop()))})),this}pause(){return this.animators.forEach((e=>e.forEach((e=>e.pause())))),this}resume(){return this.animators.forEach((e=>e.forEach((e=>e.resume())))),this}reverse(){return this}restart(){return this}record(){return this}recordEnd(){return this}isAnimating(){let e=!1;return this.animators.forEach((t=>{e=e||t.some((e=>e.isAnimating))})),e}isElementAnimating(e){var t;const i=null===(t=this.elementRecorder.get(e))||void 0===t?void 0:t.count;return P(i)||Object.values(i).every((e=>0===e))}getAnimatorCount(){let e=0;return this.animators.forEach((t=>e+=t.length)),e}getAllAnimators(){const e=[];return this.animators.forEach((t=>{e.push(...t)})),e}getElementAnimators(e,t){var i;const n=z(e);let r=[];return t?r=null!==(i=this.animators.get(t))&&void 0!==i?i:[]:this.animators.forEach((e=>{r=r.concat(e)})),r.filter((e=>n.includes(e.element)))}enable(){return this.isEnabled=!0,this}disable(){return this.isEnabled=!1,this.stop(),this.animators.clear(),this}enableAnimationState(e){const t=z(e);return this.disabledStates=this.disabledStates.filter((e=>!t.includes(e))),this}disableAnimationState(e){const t=z(e);return this.disabledStates=this.disabledStates.concat(t),this}release(){this.stop(),this.animators.clear(),this.configs=null,this.animators=null,this.elementRecorder=null,this.timelineCount=null}animateByTimeline(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r;const s=[],a=t.filter((t=>{const r=!(t.isReserved&&t.diffState===Hr.exit),s=this.getAnimationState(t),a=!this.disabledStates.includes(s),o=n||s===e.state,l=!e.timeline.partitioner||e.timeline.partitioner(t.getDatum(),t,i);return r&&a&&o&&l}));if(a.length){P(this.timelineCount[e.id])&&(this.timelineCount[e.id]=0),e.timeline.sort&&a.sort(((t,n)=>e.timeline.sort(t.getDatum(),n.getDatum(),t,n,i)));const t={width:this.mark.view.width(),height:this.mark.view.height(),group:null!==(r=this.mark.group)&&void 0!==r?r:null,mark:this.mark,view:this.mark.view,elementCount:a.length,elementIndex:0};a.forEach(((n,r)=>{t.elementIndex=r;const o=Object.assign({[ev]:t},i),l=this.getAnimationUnit(e.timeline,n,r,a.length,o);s.push(this.animateElement(e,l,n,t,o))}))}return s}animateElement(e,t,i,n,r){var s,a;const o=new Fy(i,t,e);if(o.animate(n,r),!o.isAnimating)return;i.diffState===Hr.exit&&(i.isReserved=!0);const l=0===this.timelineCount[e.id];this.timelineCount[e.id]+=1;const c=null!==(s=this.elementRecorder.get(i))&&void 0!==s?s:{prevState:e.state,count:{}};c.prevState=e.state,c.count[e.state]=(null!==(a=c.count[e.state])&&void 0!==a?a:0)+1,this.elementRecorder.set(i,c);const h=this.animators.get(e.state);h?h.push(o):this.animators.set(e.state,[o]),o.callback((()=>{this.handleAnimatorEnd(o)}));const d={mark:this.mark,animationState:e.state,animationConfig:e.originConfig};return l&&this.mark.emit($r.ANIMATION_START,d),this.mark.emit($r.ELEMENT_ANIMATION_START,d,i),o}getAnimationState(e){const t=Kf(this.state,this.mark.parameters(),e.getDatum(),e);return null!=t?t:e.diffState}getAnimationUnit(e,t,i,n,r){const s=[],a=zy(e.startTime,t,r),o=zy(e.totalTime,t,r),c=zy(e.oneByOne,t,r),h=zy(e.loop,t,r);let d=0;e.timeSlices.forEach((e=>{var i;const a=zy(e.delay,t,r),l=zy(e.delayAfter,t,r),c=null!==(i=zy(e.duration,t,r))&&void 0!==i?i:o/n,h=z(e.effects).map((e=>Object.assign({},e,{customParameters:zy(e.customParameters,t,r)})));s.push({effects:h,duration:c,delay:a,delayAfter:l}),d+=a+c+l}));const u=l(c)?c:!0===c?d:0;return{initialDelay:a,loopCount:l(h)?h:!0===h?1/0:1,loopDelay:u*i,loopDelayAfter:u*(n-i-1),loopAnimateDuration:d,loopDuration:d+u*(n-1),totalTime:o,timeSlices:s}}clearElementAnimation(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.animators.forEach((i=>{i.forEach((i=>{i.element===e&&(i.animationOptions.state===Hr.exit?i.stop("start",!1):i.stop("end",!1),this.handleAnimatorEnd(i,t))}))})),this.elementRecorder.delete(e)}clearAllElements(){const e=this.mark.getAllElements();e&&e.forEach(((t,i)=>{this.clearElement(t,i===e.length-1)}))}clearElement(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clearElementAnimation(e),e.getGraphicItem()&&(e.clearGraphicAttributes(),e.diffState===Hr.exit&&(e.isReserved=!1),t&&this.mark.cleanExitElements())}handleAnimatorEnd(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e.element,n=e.animationOptions,r=n.state,s=r===Gm,a=this.elementRecorder.get(i).count;a[r]-=1,this.animators.set(r,this.animators.get(r).filter((t=>t!==e))),0===this.animators.get(r).length&&this.animators.delete(r),this.timelineCount[n.id]-=1;const o=0===this.timelineCount[n.id],l=s?this.immediateConfigs.find((e=>e.id===n.id)).originConfig:this.configs.find((e=>e.id===n.id)).originConfig;o&&(delete this.timelineCount[n.id],s&&(this.immediateConfigs=this.immediateConfigs.filter((e=>e.id!==n.id)))),t&&(0===Object.keys(this.timelineCount).length?this.clearAllElements():r===Hr.exit&&0===a[Hr.exit]&&this.clearElement(i));const c={mark:this.mark,animationState:r,animationConfig:l};o&&this.mark.emit($r.ANIMATION_END,c),this.mark.emit($r.ELEMENT_ANIMATION_END,c,i)}}var Uy=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class Wy extends tm{constructor(e,t,i){super(e),this.grammarType="mark",this.elements=[],this.elementMap=new Map,this.isUpdated=!0,this._isReentered=!1,this.animate=new Vy(this,{}),this.differ=new xy([]),this.evaluateSync=(e,t)=>{var i;return this.evaluateMainTasks(e,t),(null===(i=this.renderContext)||void 0===i?void 0:i.progressive)||this.evaluateTransformSync(this._getTransformsAfterEncode(),this.elements,t),this},this.markType=t,this.spec.type=t,this.spec.encode={update:{}},this.spec.group=i,i&&(this.group=i,this.attach(i),i.appendChild(this))}parse(e){var t,i,n;if(super.parse(e),this.spec.group){const e=_(this.spec.group)?this.view.getMarkById(this.spec.group):this.spec.group;this.detach(e)}const r=_(e.group)?this.view.getMarkById(e.group):e.group;return this.attach(r),this.join(null===(t=e.from)||void 0===t?void 0:t.data,e.key,e.sort,e.groupBy,e.groupSort),this.coordinate(e.coordinate),this.state(e.state,this.spec.stateSort),Object.keys(null!==(i=this.spec.encode)&&void 0!==i?i:{}).forEach((e=>{this.encodeState(e,{},!0)})),Object.keys(null!==(n=e.encode)&&void 0!==n?n:{}).forEach((t=>{this.encodeState(t,e.encode[t])})),this.animation(e.animation),this.animationState(e.animationState),this.morph(e.morph,e.morphKey,e.morphElementKey),this.layout(e.layout),this.configure(e),this.transform(e.transform),this.parseAddition(e),this.spec=e,this.markType=e.type,this.commit(),this}parameters(){var e;return null!==(e=this._finalParameters)&&void 0!==e?e:super.parameters()}parseAddition(e){return this}reuse(e){if(e.grammarType!==this.grammarType)return this;const t=e;return this.markType=t.markType,this.coord=t.coord,this.elementMap=t.elementMap,this.elements=t.elements,this.elementMap.forEach((e=>e.mark=this)),this.differ=t.differ,this.animate=t.animate,this.animate.mark=this,this._context=t._context,this.graphicItem=t.graphicItem,this.graphicIndex=t.graphicIndex,this.graphicParent=t.graphicParent,this.needClear=t.needClear,this.isUpdated=t.isUpdated,this}needLayout(){return!P(this.spec.layout)}handleLayoutEnd(){}handleRenderEnd(){this.needClear&&(this.cleanExitElements(),this.elementMap.forEach((e=>{e.diffState===Hr.exit?e.clearGraphicAttributes():e.clearChangedGraphicAttributes()})),this.differ.updateToCurrent(),this.needClear=!1)}evaluateMainTasks(e,t){var i;if(this.needSkipBeforeLayout()&&this.view.getLayoutState()===Qr.before)return this;const n=null===(i=this.view.renderer)||void 0===i?void 0:i.stage();this.init(n,t);const r=this.evaluateTransformSync(this._getTransformsBeforeJoin(),null!=e?e:Nm,t);let s=(null==r?void 0:r.progressive)?e:r;return this.evaluateGroup(s),this.renderContext=this.parseRenderContext(s,t),this.renderContext.progressive?(this.differ.reset(),this.elementMap.clear(),this.evaluateProgressive()):((null==r?void 0:r.progressive)&&(this.renderContext.parameters=t,this.renderContext.beforeTransformProgressive=r.progressive,s=r.progressive.output()),this.emit($r.BEFORE_MARK_JOIN),this.evaluateJoin(s),this.emit($r.AFTER_MARK_JOIN),this.emit($r.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,t),this.emit($r.AFTER_MARK_STATE),this.emit($r.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),t),this.emit($r.AFTER_MARK_ENCODE)),this.emit($r.BEFORE_MARK_UPDATE),this.update(this.spec),this.emit($r.AFTER_MARK_UPDATE),this}evaluateGroup(e){if(this.markType===Vr.group)return;const t=_y(null!=e?e:Nm,this.spec.groupBy,this.spec.groupSort),i=t.keys;this._groupKeys=i,this.differ.setCurrentData(t)}_getTransformsAfterEncodeItems(){return this.transforms&&this.transforms.filter((e=>"afterEncodeItems"===e.markPhase))}_getTransformsAfterEncode(){return this.transforms&&this.transforms.filter((e=>P(e.markPhase)||"afterEncode"===e.markPhase))}_getTransformsBeforeJoin(){return this.transforms?this.transforms.filter((e=>"beforeJoin"===e.markPhase)):[]}evaluate(e,t){var i;return Uy(this,void 0,void 0,(function*(){return this.evaluateMainTasks(e,t),(null===(i=this.renderContext)||void 0===i?void 0:i.progressive)||(yield this.evaluateTransform(this._getTransformsAfterEncode(),this.elements,t)),this}))}output(){return this}join(e,t,i,n,r){return this.grammarSource&&(this.detach(this.grammarSource),this.grammarSource=null),this.spec.from=null,P(e)||(_(e)?this.grammarSource=this.view.getDataById(e):this.grammarSource=e,this.spec.from={data:e},this.attach(this.grammarSource)),this.spec.key=t,this.spec.sort=i,this.spec.groupBy=n,this.spec.groupSort=r,this.commit(),this}coordinate(e){return _(e)?this.coord=this.view.getCoordinateById(e):this.coord=e,this.attach(this.coord),this.commit(),this}state(e,t){return this.spec.stateSort=t,this.setFunctionSpec(e,"state")}encode(e,t,i){return this.encodeState(Hr.update,e,t,i)}encodeState(e,t,i,n){if(e===Hr.enter&&(this._isReentered=!0),this.spec.encode[e]){const r=this.spec.encode[e];if(Gf(r))this.detach(hy(r,this.view));else{const s=_(t);s&&n||!s&&i?(Object.keys(r).forEach((e=>{this.detach(hy(r[e],this.view))})),this.spec.encode[e]={}):s?this.detach(hy(r[t],this.view)):Object.keys(t).forEach((e=>{this.detach(hy(r[e],this.view))}))}}return t&&(this.spec.encode[e]||(this.spec.encode[e]={}),_(t)?(this.spec.encode[e][t]=i,this.attach(hy(i,this.view))):Gf(t)?(this.spec.encode[e]=t,this.attach(hy(t,this.view))):t&&(Object.assign(this.spec.encode[e],t),Object.values(t).forEach((e=>{this.attach(hy(e,this.view))})))),this.commit(),this}_getEncoders(){var e;return null!==(e=this.spec.encode)&&void 0!==e?e:{}}animation(e){return this.spec.animation=e,this}animationState(e){return this.setFunctionSpec(e,"animationState")}layout(e){return this.spec.layout=e,this.commit(),this}morph(e,t,i){return this.spec.morph=e,this.spec.morphKey=t,this.spec.morphElementKey=i,this}transform(e){const t=am(this.spec.transform,this.view);t&&(this.detach(t.refs),this.transforms=[]);const i=am(e,this.view);return i&&(this.attach(i.refs),this.transforms=i.transforms),this.spec.transform=e,this.commit(),this}configure(e){const t=["clip","zIndex","interactive","context","setCustomizedShape","large","largeThreshold","progressiveStep","progressiveThreshold","support3d","morph","morphKey","morphElementKey","attributeTransforms","skipTheme","enableSegments"];return null===e?(t.forEach((e=>{P(this.spec[e])||(this.spec[e]=void 0)})),this):(t.forEach((t=>{P(e[t])||(this.spec[t]=e[t])})),this)}context(e){return this.spec.context=e,this._context=e,this}isCollectionMark(){return jm.includes(this.markType)}needAnimate(){var e;return!(null===(e=this.renderContext)||void 0===e?void 0:e.progressive)&&!P(this.spec.animation)}getAllElements(){const e=this.elements.slice();return this.elementMap.forEach((t=>{t.diffState!==Hr.exit||e.includes(t)||e.push(t)})),this.spec.sort&&e.sort(((e,t)=>this.spec.sort(e.getDatum(),t.getDatum()))),e}getScales(){const e={};return this.references.forEach(((t,i)=>{i.grammarType===Jr.scale&&(e[i.id()]=i.output())})),e}getScalesByChannel(){const e=this.spec.encode;if(!e)return{};const t={},i=this.parameters();return Object.keys(e).forEach((n=>{const r=e[n];r&&!Gf(r)&&Object.keys(r).forEach((e=>{ly(r[e])&&(t[e]=Xf(r[e].scale,i))}))})),t}getFieldsByChannel(){const e=this.spec.encode;if(!e)return{};const t={};return Object.keys(e).forEach((i=>{const n=e[i];Gf(n)||Object.keys(n).forEach((e=>{cy(n[e])&&(t[e]=n[e].field)}))})),t}init(e,t){var i,n,r,s;if(this._delegateEvent||(this._delegateEvent=(e,t)=>{var i;const n=null===(i=e.target)||void 0===i?void 0:i[Lm];if((null==n?void 0:n.mark)===this){const i=Bv(this.view,e,n,0,um);this.emitGrammarEvent(t,i,n)}},this.initEvent()),this.animate||(this.animate=new Vy(this,this.spec.animation),this.needAnimate()&&this.animate.updateState(this.spec.animationState)),!this.group){const e=Xf(this.spec.group,t);this.group=e,e&&e.appendChild(this)}const a=this.group?this.group.getGroupGraphicItem():e.defaultLayer,o=null!==(r=null===(n=null===(i=this.group)||void 0===i?void 0:i.children)||void 0===n?void 0:n.indexOf(this))&&void 0!==r?r:0;if(this.markType!==Vr.group){if(!this.graphicItem){const e=Gv(this,Vr.group,{pickable:!1,zIndex:null!==(s=this.spec.zIndex)&&void 0!==s?s:0});(this.spec.support3d||Fm.includes(this.markType))&&e.setMode("3d"),e.name="".concat(this.id()||this.markType),this.graphicItem=e}this.graphicParent=this.graphicItem,!a||this.graphicIndex===o&&this.graphicItem.parent===a||a.insertIntoKeepIdx(this.graphicItem,o)}else this.graphicParent=a;this.graphicIndex=o}update(e){this._context=this.spec.context,this.isUpdated=!0,this.renderContext.progressive||(e.animation&&this.animate.updateConfig(e.animation),this.animate.updateState(e.animationState)),this.markType!==Vr.group?(P(e.zIndex)||this.graphicItem.setAttribute("zIndex",e.zIndex),P(e.clip)||this.graphicItem.setAttribute("clip",e.clip),this.elementMap.forEach((t=>{t.updateGraphicItem({interactive:e.interactive})}))):this.elementMap.forEach((t=>{t.updateGraphicItem({clip:e.clip,zIndex:e.zIndex,interactive:e.interactive})}))}evaluateJoin(e){var t,i,n,r;this.needClear=!0;const s=Zf(null!==(n=null!==(t=this.spec.key)&&void 0!==t?t:null===(i=this.grammarSource)||void 0===i?void 0:i.getDataIDKey())&&void 0!==n?n:()=>Bm),a=Zf(null!==(r=this.spec.groupBy)&&void 0!==r?r:()=>Bm),o=this.spec.sort,l=this.isCollectionMark(),c=new Set(this.elements.filter((e=>e.diffState===Hr.enter))),h=[];this.differ.setCallback(((e,t,i)=>{const n=e;let r;if(P(t))r=this.elementMap.get(n),r&&(r.diffState=Hr.exit);else if(P(i)){r=this.elementMap.has(n)?this.elementMap.get(n):by(this),r.diffState===Hr.exit&&(r.diffState=Hr.enter,this.animate.getElementAnimators(r,Hr.exit).forEach((e=>e.stop("start")))),r.diffState=Hr.enter;const i=l?e:a(t[0]);r.updateData(i,t,s,this.view),this.elementMap.set(n,r),h.push(r)}else if(r=this.elementMap.get(n),r){r.diffState=Hr.update;const i=l?e:a(t[0]);r.updateData(i,t,s,this.view),h.push(r)}c.delete(r)}));const d=null!=e?e:Nm;l||this.differ.setCurrentData(_y(d,(e=>"".concat(a(e),"-").concat(s(e))),void 0)),this.differ.doDiff(),c.forEach((e=>{this.elementMap.delete(l?e.groupKey:"".concat(e.groupKey,"-").concat(e.key)),e.remove(),e.release()})),this.elements=h,o&&this.elements.length>=2&&this.elements.sort(((e,t)=>o(e.getDatum(),t.getDatum())))}evaluateState(e,t,i){t&&e.forEach((e=>{e.state(t,i)}))}evaluateGroupEncode(e,t,i){var n;if(this.markType===Vr.group){const e=this.elements[0],r={};return dy(e,[Object.assign({},null===(n=e.items)||void 0===n?void 0:n[0],{nextAttrs:r})],t,i),r}if(!this._groupKeys||!t)return;const r={};return this._groupKeys.forEach((n=>{const s=e.find((e=>e.groupKey===n));s&&(r[n]=uy(t,s.items&&s.items[0]&&s.items[0].datum,s,i))})),r}evaluateEncode(e,t,i){if(t){this.emit($r.BEFORE_ELEMENT_ENCODE,{encoders:t,parameters:i},this);const n=this.evaluateGroupEncode(e,t[zr.group],i);e.forEach((e=>{this.markType===Vr.group&&n?e.items.forEach((e=>{e.nextAttrs=Object.assign(e.nextAttrs,n)})):(null==n?void 0:n[e.groupKey])&&!this.isCollectionMark()&&e.items.forEach((t=>{t.nextAttrs=Object.assign(t.nextAttrs,n[e.groupKey])})),e.encodeItems(e.items,t,this._isReentered,i)})),this._isReentered=!1,this.evaluateTransformSync(this._getTransformsAfterEncodeItems(),e,i),e.forEach((e=>{e.encodeGraphic(this.isCollectionMark()?null==n?void 0:n[e.groupKey]:null)})),this.emit($r.AFTER_ELEMENT_ENCODE,{encoders:t,parameters:i},this)}else e.forEach((e=>{e.initGraphicItem()}))}addGraphicItem(e,t,i){var n;const r=null!=i?i:Gv(this,this.markType,e);if(r){if(null===(n=this.renderContext)||void 0===n?void 0:n.progressive){let e;if(this._groupKeys){const i=this._groupKeys.indexOf(t);i>=0&&(e=this.graphicParent.getChildAt(i))}else e=this.graphicParent.at(0);this.isCollectionMark()?(r.incremental=1,e.appendChild(r)):e.incrementalAppendChild(r)}else this.graphicParent.appendChild(r);return r}}parseRenderContext(e,t){const i=this.markType!==Vr.group&&this.spec.progressiveStep>0&&this.spec.progressiveThreshold>0&&this.spec.progressiveStep<this.spec.progressiveThreshold,n=this.spec.large&&this.spec.largeThreshold>0&&e.length>=this.spec.largeThreshold;if(i){const i=this.differ.getCurrentData();return i&&i.keys&&i.keys.some((e=>i.data.get(e).length>this.spec.progressiveThreshold))?{large:n,parameters:t,progressive:{data:e,step:this.spec.progressiveStep,currentIndex:0,totalStep:i.keys.reduce(((e,t)=>Math.max(Math.ceil(i.data.get(t).length/this.spec.progressiveStep),e)),1),groupedData:i.data}}:{large:n}}return{large:n}}isProgressive(){return this.renderContext&&(!!this.renderContext.progressive||!!this.renderContext.beforeTransformProgressive)}isDoingProgressive(){return this.renderContext&&(this.renderContext.progressive&&this.renderContext.progressive.currentIndex<this.renderContext.progressive.totalStep||this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.unfinished())}clearProgressive(){this.renderContext&&this.renderContext.progressive&&(this.elements=[],this.graphicParent.children.forEach((e=>{e.incrementalClearChild()})),this.graphicParent.removeAllChild()),this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.release(),this.renderContext=null}restartProgressive(){this.renderContext&&this.renderContext.progressive&&(this.renderContext.progressive.currentIndex=0)}evaluateJoinProgressive(){var e,t,i;const n=this.renderContext.progressive.currentIndex,r=Zf(null!==(i=null!==(e=this.spec.key)&&void 0!==e?e:null===(t=this.grammarSource)||void 0===t?void 0:t.getDataIDKey())&&void 0!==i?i:()=>Bm),s=[];if(this.isCollectionMark())return this._groupKeys.forEach(((e,t)=>{const i=this.renderContext.progressive.groupedData.get(e),a=this.renderContext.progressive.step,o=i.slice(n*a,(n+1)*a);if(0===n){const t=by(this);t.diffState=Hr.enter,t.updateData(e,o,r,this.view),s.push(t)}else{const i=this.elements[t];i.updateData(e,o,r,this.view),s.push(i)}})),s;const a={};return this._groupKeys.forEach((e=>{const t=this.renderContext.progressive.groupedData.get(e),i=this.renderContext.progressive.step,o=t.slice(n*i,(n+1)*i),l=[];o.forEach((t=>{const i=by(this);i.diffState=Hr.enter,i.updateData(e,[t],r,this.view),l.push(i),s.push(i)})),a[e]=l})),{groupElements:a,elements:s}}evaluateEncodeProgressive(e,t,i){if(!t)return void e.forEach((e=>{e.initGraphicItem()}));const n=Object.keys(t).reduce(((e,i)=>(!t[i]||i!==zr.enter&&i!==zr.exit&&i!==zr.update||(e[i]=function(e,t,i){if(Gf(t))return{themeEncoder:{},positionEncoder:t};const n={},r={};if(e===Vr.glyph&&nm.getGlyph(i)){const e=nm.getGlyph(i),s=e.getProgressiveChannels();if(s)Object.keys(t).forEach((e=>{s.includes(e)?r[e]=t[e]:n[e]=t[e]}));else{const i=Array.from(new Set(Object.values(e.getMarks())));Object.keys(t).forEach((e=>{i.some((t=>Xv(t,e)))?r[e]=t[e]:n[e]=t[e]}))}}else Object.keys(t).forEach((i=>{Xv(e,i)?r[i]=t[i]:n[i]=t[i]}));return{positionEncoder:r,themeEncoder:n}}(this.markType,t[i],this.glyphType).positionEncoder),e)),{}),r=this.renderContext.progressive.currentIndex,s=this.isCollectionMark();this.emit($r.BEFORE_ELEMENT_ENCODE,{encoders:t,parameters:i},this);const a=this.evaluateGroupEncode(e,t[zr.group],i);if(e.forEach(((e,o)=>{const l=r>0||!s&&o>0;!l&&(null==a?void 0:a[e.groupKey])&&e.items.forEach((t=>{t.nextAttrs=Object.assign(t.nextAttrs,a[e.groupKey])})),e.encodeItems(e.items,l?n:t,this._isReentered,i)})),this._isReentered=!1,this.evaluateTransformSync(this._getTransformsAfterEncodeItems(),e,i),e.forEach((e=>{e.encodeGraphic()})),this.emit($r.AFTER_ELEMENT_ENCODE,{encoders:t,parameters:i},this),0===r&&!s){const t=e[0].getGraphicItem(),i=null==t?void 0:t.parent;if(i){const e=t.attribute,n={},r={};Object.keys(e).forEach((t=>{["pickable","zIndex"].includes(t)||(Xv(this.markType,t)?r[t]=e[t]:n[t]=e[t])})),i.setTheme({common:n}),t.initAttributes(r)}}}evaluateProgressive(){var e,t,i;if(null===(e=this.renderContext)||void 0===e?void 0:e.beforeTransformProgressive){this.renderContext.beforeTransformProgressive.progressiveRun();const e=this.renderContext.beforeTransformProgressive.output();return this.emit($r.BEFORE_MARK_JOIN),this.evaluateJoin(e),this.emit($r.AFTER_MARK_JOIN),this.emit($r.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,this.renderContext.parameters),this.emit($r.AFTER_MARK_STATE),this.emit($r.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),this.renderContext.parameters),void this.emit($r.AFTER_MARK_ENCODE)}if(!(null===(t=this.renderContext)||void 0===t?void 0:t.progressive))return;const n=this.renderContext.parameters;this.emit($r.BEFORE_MARK_JOIN);const r=this.evaluateJoinProgressive(),s=Array.isArray(r)?r:r.elements;if(this.emit($r.AFTER_MARK_JOIN),0===this.renderContext.progressive.currentIndex?(this.graphicParent.removeAllChild(),this._groupKeys.forEach((e=>{const t=Gv(this,Vr.group,{pickable:!1,zIndex:this.spec.zIndex});t.incremental=this.renderContext.progressive.step,this.graphicParent.appendChild(t)})),this.elements=s):this.elements=this.elements.concat(s),this.emit($r.BEFORE_MARK_STATE),this.evaluateState(s,this.spec.state,n),this.emit($r.AFTER_MARK_STATE),this.emit($r.BEFORE_MARK_ENCODE),Array.isArray(r))this.evaluateEncodeProgressive(s,this._getEncoders(),n);else{const e=r.groupElements;Object.keys(e).forEach((t=>{this.evaluateEncodeProgressive(e[t],this._getEncoders(),n)}))}this.emit($r.AFTER_MARK_ENCODE);const a=null===(i=this._getTransformsAfterEncode())||void 0===i?void 0:i.filter((e=>!0===e.canProgressive));(null==a?void 0:a.length)&&this.evaluateTransformSync(a,this.elements,n),this.renderContext.progressive.currentIndex+=1}isLargeMode(){return this.renderContext&&this.renderContext.large}cleanExitElements(){this.elementMap.forEach(((e,t)=>{e.diffState!==Hr.exit||e.isReserved||(this.elementMap.delete(t),e.remove(),e.release())}))}getGroupGraphicItem(){if(this.elements&&this.elements[0]&&this.elements[0].getGraphicItem)return this.elements[0].getGraphicItem()}getBounds(){var e;return this.graphicItem?this.graphicItem.AABBBounds:null===(e=this.getGroupGraphicItem())||void 0===e?void 0:e.AABBBounds}getMorphConfig(){var e;return{morph:null!==(e=this.spec.morph)&&void 0!==e&&e,morphKey:this.spec.morphKey,morphElementKey:this.spec.morphElementKey}}getAttributeTransforms(){var e;return null!==(e=this.spec.attributeTransforms)&&void 0!==e?e:Qv[this.markType]}getContext(){return this._context}needSkipBeforeLayout(){var e,t;if(!0===(null===(e=this.spec.layout)||void 0===e?void 0:e.skipBeforeLayouted))return!0;let i=this.group;for(;i;){if(!0===(null===(t=i.getSpec().layout)||void 0===t?void 0:t.skipBeforeLayouted))return!0;i=i.group}return!1}initEvent(){this._delegateEvent&&this.view.renderer.stage().on("*",this._delegateEvent)}releaseEvent(){if(this._delegateEvent){const e=this.view.renderer.stage();e&&e.off("*",this._delegateEvent)}}clear(){var e;super.clear(),this.transforms=null,this.elementMap=null,this.elements=null,this.graphicItem=null,this.animate=null,null===(e=this.group)||void 0===e||e.removeChild(this),this.group=null}prepareRelease(){this.animate.stop(),this.elementMap.forEach((e=>e.diffState=Hr.exit)),this._finalParameters=this.parameters()}release(){this.releaseEvent(),this.elements.forEach((e=>e.release())),this.elementMap.clear(),this._finalParameters=null,this.animate&&this.animate.release(),this.graphicItem&&Kv(this.graphicItem),this.detachAll(),super.release()}}class Gy extends Wy{constructor(e,t){super(e,Vr.group,t),this.children=[]}parseRenderContext(){return{large:!1}}appendChild(e){return this.children.push(e),this}removeChild(e){return this.children=this.children.filter((t=>t!==e)),this}includesChild(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!this.children.includes(e)||!!t&&this.children.some((t=>t.markType===Vr.group&&t.includesChild(e,!0)))}updateLayoutChildren(){return this.children.length?(this.layoutChildren||(this.layoutChildren=[]),this.layoutChildren=this.children.filter((e=>e.needLayout())),this):this}getAttributeTransforms(){return Qv.rect}evaluateJoin(e){if(!this.elements.length){const e=by(this);e.updateData(Bm,Nm,(()=>""),this.view),this.elements=[e],this.elementMap.set(Bm,e)}}addGraphicItem(e,t,i){const n=null!=i?i:Gv(this,this.markType,e);if(n)return this.emit($r.BEFORE_ADD_VRENDER_MARK),n.name="".concat(this.id()||this.markType),this.graphicParent.insertIntoKeepIdx(n,this.graphicIndex),this.emit($r.AFTER_ADD_VRENDER_MARK),n}}function Ky(e,t){if(L(e))return e;const i=e.trim();if("auto"===i)return 0;if(i.endsWith("%")){const e=parseFloat(i.substring(0,i.length-1));return L(e)?e*t:0}return 0}function Yy(e,t){return Math.min(e<0?e+t:e-1,t)}function Xy(e,t,i){let n=Yy(e,i),r=Yy(t,i);if(L(e)||L(t)?L(e)?L(t)||(n=Yy(Math.max(0,r-1),i)):r=Yy(n+1,i):(n=1,r=2),n>r){const e=r;r=n,n=e}return{start:n,end:r}}const qy=(e,t,i,n)=>{const r=function(e,t,i){var n,r,s,a;const o=null!==(n=e.gridTemplateRows)&&void 0!==n?n:[i],l=null!==(r=e.gridTemplateColumns)&&void 0!==r?r:[t],c=null!==(s=e.gridRowGap)&&void 0!==s?s:0,h=null!==(a=e.gridColumnGap)&&void 0!==a?a:0,d=o.map((e=>Ky(e,i))),u=l.map((e=>Ky(e,t))),p=Math.max(0,d.reduce(((e,t)=>e-t),i)-d.length*c)/o.filter((e=>"auto"===e)).length,g=Math.max(0,u.reduce(((e,t)=>e-t),t)-u.length*h)/l.filter((e=>"auto"===e)).length;let f=0;const m=d.map(((e,t)=>{const i="auto"===o[t]?p:e,n=f;return f+=i+c,n}));m.push(f);let v=0;const y=u.map(((e,t)=>{const i="auto"===l[t]?g:e,n=v;return v+=i+h,n}));return y.push(v),{rows:m,columns:y,rowGap:c,columnGap:h}}(e.getSpec().layout,i.width(),i.height());t&&t.forEach((e=>{const t=e.getSpec().layout;e.layoutBounds=function(e,t,i,n,r){const s=e.rows.length,a=e.columns.length,{start:o,end:l}=Xy(t,i,s),{start:c,end:h}=Xy(n,r,a),d=e.columns[o],u=e.columns[l]-(h===a?0:e.columnGap),p=e.rows[c],g=e.rows[h]-(l===s?0:e.rowGap);return(new cl).set(d,p,u,g)}(r,t.gridRowStart,t.gridRowEnd,t.gridColumnStart,t.gridColumnEnd),e.commit()}))},Zy=(e,t)=>P(e)?t:_(e)?t*parseFloat(e)/100:e,Qy={[Ur.axis]:0,[Ur.legend]:1,[Ur.slider]:2,[Ur.player]:3,[Ur.datazoom]:4},$y=e=>{var t,i,n;return null!==(i=null===(t=e.getSpec().layout)||void 0===t?void 0:t.order)&&void 0!==i?i:"component"===e.markType&&null!==(n=Qy[e.componentType])&&void 0!==n?n:1/0},Jy=(e,t,i,n)=>{const r=i.clone(),s=e.getSpec().layout,a=Zy(s.maxChildWidth,r.width()),o=Zy(s.maxChildHeight,r.width());let l=0,c=0,h=0,d=0;t.forEach((e=>{const t=e.getSpec().layout,s=Vv(t.padding),u=n.parseMarkBounds?n.parseMarkBounds(e.getBounds(),e):e.getBounds();if("top"===t.position||"bottom"===t.position){const e=Math.min(u.height()+s.top+s.bottom,o);"top"===t.position?r.y1+=e:r.y2-=e,u.x1<i.x1&&(l=Math.max(l,i.x1-u.x1)),u.x2>i.x2&&(c=Math.max(c,u.x2-i.x2))}if("left"===t.position||"right"===t.position){const e=Math.min(u.width()+s.left+s.right,a);"left"===t.position?r.x1+=e:r.x2-=e,u.y1<i.y1&&(h=Math.max(h,i.y1-u.y1)),u.y2>i.y2&&(d=Math.max(d,u.y2-i.y2))}"outside"===t.position&&(r.x1+=Math.max(i.x1-u.x1,0)+s.left,r.x2-=Math.max(u.x2-i.x2,0)+s.right,r.y1+=Math.max(i.y1-u.y1,0)+s.top,r.y2-=Math.max(u.y2-i.y2)+s.bottom)})),l>r.x1-i.x1&&l<i.width()&&(r.x1=i.x1+l),c>i.x2-r.x2&&c<i.width()&&(r.x2=i.x2-c),h>r.y1-i.y1&&h<i.height()&&(r.y1=i.y1+h),d>i.y2-r.y2&&d<i.height()&&(r.y2=i.y2-d);let u=r.y1,p=r.y2,g=r.x1,f=r.x2;const m=t.slice().sort(((e,t)=>$y(e)-$y(t)));for(let v=0,y=m.length;v<y;v++){const e=m[v],t=e.getSpec().layout,s=Vv(t.padding),l=n.parseMarkBounds?n.parseMarkBounds(e.getBounds(),e):e.getBounds();if("top"===t.position||"bottom"===t.position){const i=Math.min(l.height()+s.top+s.bottom,o);if("top"===t.position?(e.layoutBounds=(new cl).set(r.x1,u-i,r.x2,u),u-=i):(e.layoutBounds=(new cl).set(r.x1,p,r.x2,p+i),p+=i),e.relativePosition={top:e.layoutBounds.y1-r.y1,bottom:e.layoutBounds.y1-r.y2},t.align){const i=l.width()+s.left+s.right;i<r.width()&&("center"===t.align?(e.layoutBounds.x1=(r.x1+r.x2)/2-i/2,e.layoutBounds.x2=e.layoutBounds.x1+i,e.relativePosition.left=e.relativePosition.right=(r.width()-i)/2):"right"===t.align?(e.layoutBounds.x1=r.x2-i,e.layoutBounds.x2=r.x2,e.relativePosition.right=0,e.relativePosition.left=r.width()-i):"left"===t.align&&(e.layoutBounds.x1=r.x1,e.layoutBounds.x2=r.x1+i,e.relativePosition.left=0,e.relativePosition.right=r.width()-i))}}else if("left"===t.position||"right"===t.position){const i=Math.min(l.width()+s.left+s.right,a);if("left"===t.position?(e.layoutBounds=(new cl).set(g-i,r.y1,g,r.y2),g-=i):(e.layoutBounds=(new cl).set(f,r.y1,f+i,r.y2),f+=i),e.relativePosition={left:e.layoutBounds.x1-r.x1,right:e.layoutBounds.x1-r.x2},t.align){const n=l.height()+s.top+s.bottom;i<r.width()&&("middle"===t.align?(e.layoutBounds.y1=(r.y1+r.y2)/2-n/2,e.layoutBounds.y2=e.layoutBounds.y1+n,e.relativePosition.top=e.relativePosition.bottom=(r.height()-n)/2):"bottom"===t.align?(e.layoutBounds.y1=r.y2-n,e.layoutBounds.y2=r.y2,e.relativePosition.top=r.height()-n,e.relativePosition.bottom=0):"top"===t.align&&(e.layoutBounds.y1=r.y1,e.layoutBounds.y2=r.y1+n,e.relativePosition.bottom=r.height()-n,e.relativePosition.top=0))}}else"outside"===t.position?(g-=Math.max(i.x1-l.x1,0)+s.left,f-=Math.max(l.x2-i.x2,0)+s.right,u-=Math.max(i.y1-l.y1,0)+s.top,p+=Math.max(l.y2-i.y2)+s.bottom):e.layoutBounds=r}return r},eb=(e,t,i)=>{null==e||e.forEach((e=>{var n;if(e.markType!==Vr.group)return;const r=e.layoutChildren,s=e.getSpec().layout,a=null!==(n=e.layoutBounds)&&void 0!==n?n:e.getBounds();if(a){if(Q(s))s.call(null,e,r,a,t);else if(Q(s.callback))s.callback.call(null,e,r,a,t);else if("relative"===s.display)if(s.updateViewSignals){const n=i.getViewBox();n&&a.intersect(n);const s=Jy(e,r,a,t),o=s.width(),l=s.height(),c={top:s.y1,right:i.width()-s.x2,left:s.x1,bottom:i.height()-s.y2};i.updateSignal(mm,o),i.updateSignal(vm,l),i.updateSignal(ym,c)}else Jy(e,r,a,t);else"grid"===s.display&&qy(e,r,a);eb(r,t,i)}}))};class tb extends Wy{constructor(e,t,i){super(e,Vr.glyph,i),this.glyphType=t,this.glyphMeta=nm.getGlyph(t)}configureGlyph(e){return this.spec.glyphConfig=e,this.commit(),this}getGlyphMeta(){return this.glyphMeta}getGlyphConfig(){return this.spec.glyphConfig}addGraphicItem(e,t){const i=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!nm.getGraphicType(Vr.glyph))return;const n=nm.createGraphic(Vr.glyph,i),r=t.getMarks(),s=Object.keys(r).map((e=>{if(nm.getGraphicType(r[e])){const t=nm.createGraphic(r[e]);if(t)return t.name=e,t}}));return n.setSubGraphic(s),n}(this,this.glyphMeta,e);return super.addGraphicItem(e,t,i)}}const ib=1e-10,nb=1e-10;function rb(e,t){const i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ib,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:nb)*Math.max(e,t);return Math.abs(e-t)<=Math.max(i,n)}function sb(e,t,i,n){return e>t&&!rb(e,t,i,n)}function ab(e,t,i,n){return e<t&&!rb(e,t,i,n)}function ob(e,t,i,n,r,s){const a=(t-e)*r+e,o=(i-t)*r+t,l=(n-i)*r+i,c=(o-a)*r+a,h=(l-o)*r+o,d=(h-c)*r+c;s[0]=e,s[1]=a,s[2]=c,s[3]=d,s[4]=d,s[5]=h,s[6]=l,s[7]=n}function lb(e,t){const i=e.length,n=t.length;if(i===n)return[e,t];const r=[],s=[],a=i<n?e:t,o=Math.min(i,n),l=Math.abs(n-i)/6,c=(o-2)/6,h=Math.ceil(l/c),d=[a[0],a[1]];let u=l;for(let p=2;p<o;p+=6){let e=a[p-2],t=a[p-1],i=a[p],n=a[p+1],o=a[p+2],l=a[p+3];const c=a[p+4],g=a[p+5];if(u<=0){d.push(i,n,o,l,c,g);continue}const f=Math.min(u,h)+1;for(let a=1;a<=f;a++){const h=a/f;ob(e,i,o,c,h,r),ob(t,n,l,g,h,s),e=r[3],t=s[3],d.push(r[1],s[1],r[2],s[2],e,t),i=r[5],n=s[5],o=r[6],l=s[6]}u-=f-1}return a===e?[d,t]:[e,d]}function cb(e,t){const i=e||t,n=i.length,r=i[n-2],s=i[n-1],a=[];for(let o=0;o<t.length;o+=2)a[o]=r,a[o+1]=s;return a}function hb(e){const t=[],i=e.length;for(let n=0;n<i;n+=2)t[n]=e[i-n-2],t[n+1]=e[i-n-1];return t}function db(e){let t=0,i=0,n=0;const r=e.length;for(let s=0,a=r-2;s<r;a=s,s+=2){const r=e[a],o=e[a+1],l=e[s],c=e[s+1],h=r*c-l*o;t+=h,i+=(r+l)*h,n+=(o+c)*h}return 0===t?[e[0]||0,e[1]||0,0]:[i/t/3,n/t/3,t]}function ub(e,t,i,n){const r=(e.length-2)/6;let s=1/0,a=0;const o=e.length,l=o-2;for(let c=0;c<r;c++){const r=6*c;let h=0;for(let s=0;s<o;s+=2){const a=0===s?r:(r+s-2)%l+2,o=e[a]-i[0],c=e[a+1]-i[1],d=t[s]-n[0]-o,u=t[s+1]-n[1]-c;h+=d*d+u*u}h<s&&(s=h,a=c)}return a}const pb=(e,t,i,n,r)=>{rb(t,n)&&rb(i,r)||e.push(t,i,n,r,n,r)};function gb(e){const t=e.commandList,i=[];let n,r=0,s=0,a=0,o=0;const l=(e,t)=>{n&&n.length>2&&i.push(n),n=[e,t]};let c,h,d,u;for(let p=0,g=t.length;p<g;p++){const e=t[p],i=0===p;switch(i&&(a=r=e[1],o=s=e[2],[gl.L,gl.C,gl.Q].includes(e[0])&&(n=[a,o])),e[0]){case gl.M:r=a=e[1],s=o=e[2],l(a,o);break;case gl.L:c=e[1],h=e[2],pb(n,r,s,c,h),r=c,s=h;break;case gl.C:n.push(e[1],e[2],e[3],e[4],r=e[5],s=e[6]);break;case gl.Q:c=e[1],h=e[2],d=e[3],u=e[4],n.push(r+2/3*(c-r),s+2/3*(h-s),d+2/3*(c-d),u+2/3*(h-u),d,u),r=d,s=u;break;case gl.A:{const t=e[1],d=e[2],u=e[3],p=u,g=e[4],f=e[5],m=!!e[6];c=Math.cos(g)*u+t,h=Math.sin(g)*u+d,i?(a=c,o=h,l(a,o)):pb(n,r,s,c,h),r=Math.cos(f)*u+t,s=Math.sin(f)*u+d;const v=(m?-1:1)*Math.PI/2;for(let e=g;m?e>f:e<f;e+=v){const i=m?Math.max(e+v,f):Math.min(e+v,f);Il(n,e,i,t,d,u,p)}break}case gl.E:{const t=e[1],d=e[2],u=e[3],p=e[4],g=e[5],f=e[6],m=e[7]+f,v=!!e[8],y=!rb(g,0),b=Math.cos(g),_=Math.sin(g);let x=Math.cos(f)*u,S=Math.sin(f)*p;y?(c=x*b-S*_+t,h=x*_+S*b+d):(c=x+t,h=S+d),i?(a=c,o=h,l(a,o)):pb(n,r,s,c,h),x=Math.cos(m)*u,S=Math.sin(m)*p,y?(r=x*b-S*_+t,s=x*_+S*b+d):(r=x+t,s=S+d);const w=(v?-1:1)*Math.PI/2;for(let e=f;v?e>m:e<m;e+=w){const i=v?Math.max(e+w,m):Math.min(e+w,m);if(Il(n,e,i,t,d,u,p),y){const e=n.length;for(let i=e-6;i<=e-1;i+=2)x=n[i],S=n[i+1],n[i]=(x-t)*b-(S-d)*_+t,n[i+1]=(x-t)*_+(S-d)*b+d}}break}case gl.R:a=r=e[1],o=s=e[2],c=a+e[3],h=o+e[4],l(c,o),pb(n,c,o,c,h),pb(n,c,h,a,h),pb(n,a,h,a,o),pb(n,a,o,c,o);break;case gl.AT:{const t=e[1],i=e[2],l=e[3],c=e[4],h=e[5],d=nr.distancePP({x:r,y:s},{x:t,y:i}),u=nr.distancePP({x:l,y:c},{x:t,y:i}),p=((r-t)*(l-t)+(s-i)*(c-i))/(d*u),g=h/Math.sin(p/2),f=(r+l-2*t)/2,m=(s+c-2*i)/2,v=nr.distancePP({x:f,y:m},{x:0,y:0}),y=t+g*f/v,b=l+g*m/v,_=Math.sqrt(g*g-h*h);a=t+_*(r-t)/d,o=i+_*(s-i)/d,pb(n,r,s,a,o),r=t+_*(l-t)/u,s=i+_*(c-i)/u;const x=rl({x:y,y:b},{x:a,y:o}),S=rl({x:y,y:b},{x:r,y:s});Il(n,x,S,y,b,h,h);break}case gl.Z:n&&pb(n,r,s,a,o),r=a,s=o}}return n&&n.length>2&&i.push(n),i}function fb(e,t){for(let i=0;i<e.length;i++){const n=e[i];for(let e=0;e<n.length;e+=2){const i=n[e],r=n[e+1],s={x:i,y:r};t.transformPoint({x:i,y:r},s),n[e]=s.x,n[e+1]=s.y}}}function mb(e){const t=new dc;for(let i=0;i<e.length;i++){const n=e[i];if(n.length>2){t.moveTo(n[0],n[1]);for(let e=2;e<n.length;e+=6)t.bezierCurveTo(n[e],n[e+1],n[e+2],n[e+3],n[e+4],n[e+5])}}return t}const vb=e=>{if(!e)return{x:0,y:0,width:0,height:0};let t=P(e.width)?e.x1-e.x:e.width,i=P(e.height)?e.y1-e.y:e.height,n=0,r=0;return t<0?(n=t,t=-t):Number.isNaN(t)&&(t=0),i<0?(r=i,i=-i):Number.isNaN(i)&&(i=0),{x:n,y:r,width:t,height:i}};function yb(e,t,i){const n=e/t;let r,s;e>=t?(s=Math.ceil(Math.sqrt(i*n)),r=Math.floor(i/s),0===r&&(r=1,s=i)):(r=Math.ceil(Math.sqrt(i/n)),s=Math.floor(i/r),0===s&&(s=1,r=i));const a=[];for(let l=0;l<r;l++)a.push(s);const o=i-r*s;if(o>0)for(let l=0;l<o;l+=s)l+s<o?a.push(s):a.push(o-l);return a}const bb=(e,t)=>{const i=e.filter((e=>!1!==e.defined&&l(e.x)&&l(e.y)));if(0===i.length)return[];if(1===i.length)return new Array(t).fill(0).map((e=>i[0]));const n=[];if(t<=i.length){const e=i.length/t;let r=0,s=0;for(;r<t;)n.push(i[Math.floor(s)]),s+=e,r++;return n}const r=t-i.length,s=1/(r/(i.length-1)+1);let a=0;for(let o=0,l=e.length;o<l;o++)if(n.push(e[o]),o<l-1){let t=s;const i=e[o].x,l=e[o].y,c=e[o+1].x,h=e[o+1].y;for(;t<1&&a<r;)n.push({x:i+(c-i)*t,y:l+(h-l)*t}),t+=s,a+=1}return n};const _b=e=>e.map((e=>({x:e.x,y:e.y}))),xb=(e,t,i)=>{const n=e.length,r=[];for(let p=0;p<n;p++){const o=e[p],l=p===n-1?e[0]:e[p+1],c=tg([t.x,t.y],[i.x,i.y],[o.x,o.y],[l.x,l.y]);c&&"boolean"!=typeof c&&r.push({dot:(s=[c[0]-t.x,c[1]-t.x],a=[i.x-t.x,i.y-t.x],s[0]*a[1]-s[1]*a[0]),point:{x:c[0],y:c[1]},edgeIndex:p})}var s,a;if(r.length<2)return[_b(e),_b(e)];r.sort(((e,t)=>e.dot-t.dot));let o=r[0],l=r[r.length-1];o.edgeIndex>l.edgeIndex&&([o,l]=[l,o]);const c=o.point,h=l.point,d=[{x:c.x,y:c.y}];for(let p=o.edgeIndex+1;p<=l.edgeIndex;p++)d.push({x:e[p].x,y:e[p].y});d.push({x:h.x,y:h.y});const u=[{x:h.x,y:h.y}];for(let p=l.edgeIndex+1,g=o.edgeIndex+n;p<=g;p++){const t=e[p%n];u.push({x:t.x,y:t.y})}return u.push({x:c.x,y:c.y}),[d,u]},Sb=(e,t,i)=>{if(1===t)i.push({points:e});else{const n=Math.floor(t/2),r=(e=>{const t=new cl;e.forEach((e=>{t.add(e.x,e.y)}));const i=t.width(),n=t.height();if(i>=n){const n=t.x1+i/2;return xb(e,{x:n,y:t.y1},{x:n,y:t.y2})}const r=t.y1+n/2;return xb(e,{x:t.x1,y:r},{x:t.x2,y:r})})(e);Sb(r[0],n,i),Sb(r[1],t-n,i)}},wb=(e,t,i)=>{e.forEach((e=>{if(Number.isFinite(e.to))t[e.key]=e.from+(e.to-e.from)*i;else if("fill"===e.key||"stroke"===e.key){const n=od(e.from,e.to,i,!1);n&&(t[e.key]=n)}}))},Cb=(e,t,i)=>{const n=[],r=[];t.clear();for(let s=0;s<e.length;s++){const a=e[s],o=a.from,l=a.to,c=a.rotation*i,h=a.fromCp,d=a.toCp,u=Math.sin(c),p=Math.cos(c);r[0]=h[0]+(d[0]-h[0])*i,r[1]=h[1]+(d[1]-h[1])*i;for(let e=0;e<o.length;e+=2){const t=o[e],s=o[e+1],a=t*(1-i)+l[e]*i,c=s*(1-i)+l[e+1]*i;n[e]=a*p-c*u+r[0],n[e+1]=a*u+c*p+r[1]}let g=n[0],f=n[1];t.moveTo(g,f);for(let e=2;e<o.length;e+=6){const i=n[e],r=n[e+1],s=n[e+2],a=n[e+3],o=n[e+4],l=n[e+5];g===i&&f===r&&s===o&&a===l?t.lineTo(o,l):t.bezierCurveTo(i,r,s,a,o,l),g=o,f=l}}},kb=(e,t,i)=>{const n=e?gb(e):[],r=gb(t);i&&n&&(i.fromTransform&&fb(n,i.fromTransform.clone().getInverse()),fb(n,i.toTransfrom));const[s,a]=function(e,t){let i,n;const r=[],s=[];for(let a=0;a<Math.max(e.length,t.length);a++){const o=e[a],l=t[a];let c,h;o?l?([c,h]=lb(o,l),i=c,n=h):(h=cb(n,o),c=o):(c=cb(i,l),h=l),r.push(c),s.push(h)}return[r,s]}(n,r);return e?function(e,t,i,n){const r=[];let s;for(let a=0;a<e.length;a++){let o=e[a];const l=t[a],c=db(o),h=db(l);null==s&&(s=c[2]<0!=h[2]<0);const d=[],u=[];let p=0,g=1/0;const f=[],m=o.length;s&&(o=hb(o));const v=6*ub(o,l,c,h),y=m-2;for(let e=0;e<y;e+=2){const t=(v+e)%y+2;d[e+2]=o[t]-c[0],d[e+3]=o[t+1]-c[1]}if(d[0]=o[v]-c[0],d[1]=o[v+1]-c[1],i>0){const e=n/i;for(let t=-n/2;t<=n/2;t+=e){const e=Math.sin(t),i=Math.cos(t);let n=0;for(let t=0;t<o.length;t+=2){const r=d[t],s=d[t+1],a=l[t]-h[0],o=l[t+1]-h[1],c=a*i-o*e,u=a*e+o*i;f[t]=c,f[t+1]=u;const p=c-r,g=u-s;n+=p*p+g*g}if(n<g){g=n,p=t;for(let e=0;e<f.length;e++)u[e]=f[e]}}}else for(let e=0;e<m;e+=2)u[e]=l[e]-h[0],u[e+1]=l[e+1]-h[1];r.push({from:d,to:u,fromCp:c,toCp:h,rotation:-p})}return r}(s,a,10,Math.PI):a.map(((e,t)=>({from:s[t],to:e,fromCp:[0,0],toCp:[0,0],rotation:0})))},Ab=["fill","fillOpacity","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","lineDashOffset"],Eb=(e,t)=>{if(!e||!t)return null;const i=[];let n=!1;return Object.keys(e).forEach((r=>{if(!Ab.includes(r))return;const s=t[r];P(s)||P(e[r])||s===e[r]||("fill"===r||"stroke"===r?i.push({from:"string"==typeof e[r]?sd.Get(e[r],rd.Color255):e[r],to:"string"==typeof s?sd.Get(s,rd.Color255):s,key:r}):i.push({from:e[r],to:s,key:r}),n=!0)})),n?i:null};class Tb extends qh{constructor(e,t,i){super(0,1,t,i),this.morphingData=e.morphingData,this.otherAttrs=e.otherAttrs,this.saveOnEnd=e.saveOnEnd}getEndProps(){return{}}onBind(){this.target.createPathProxy(),this.onUpdate(!1,0,this.target.attribute)}onEnd(){}onUpdate(e,t,i){const n=this.target,r="function"==typeof n.pathProxy?n.pathProxy(n.attribute):n.pathProxy;Cb(this.morphingData,r,t),this.otherAttrs&&this.otherAttrs.length&&wb(this.otherAttrs,i,t),e&&!this.saveOnEnd&&(this.target.pathProxy=null)}}const Ob=(e,t,i,n)=>{var r,s,a;if(e&&(!e.valid||!e.toCustomPath))return __DEV__&&console.error(e," is not validate"),null;if(!t.valid||!t.toCustomPath)return __DEV__&&console.error(t," is not validate"),null;let o=null==e?void 0:e.globalTransMatrix;n&&o&&(o=n.clone().multiply(o.a,o.b,o.c,o.d,o.e,o.f));const l=kb(null===(r=null==e?void 0:e.toCustomPath)||void 0===r?void 0:r.call(e),t.toCustomPath(),{fromTransform:o,toTransfrom:t.globalTransMatrix}),c=Eb(null==e?void 0:e.attribute,t.attribute),h=t.animate(i);return(null==i?void 0:i.delay)&&h.wait(i.delay),h.play(new Tb({morphingData:l,otherAttrs:c},null!==(s=null==i?void 0:i.duration)&&void 0!==s?s:id,null!==(a=null==i?void 0:i.easing)&&void 0!==a?a:nd)),h};class Pb extends qh{constructor(e,t,i){super(0,1,t,i),this.morphingData=e.morphingData,this.otherAttrs=e.otherAttrs}getEndProps(){return{}}onBind(){this.addPathProxy()}addPathProxy(){this.target.shadowRoot.forEachChildren((e=>{e.createPathProxy()})),this.onUpdate(!1,0,this.target.attribute)}clearPathProxy(){this.target.shadowRoot.forEachChildren((e=>{e.pathProxy=null}))}onEnd(){}onUpdate(e,t,i){this.target.shadowRoot.forEachChildren(((e,i)=>{var n;Cb(this.morphingData[i],"function"==typeof e.pathProxy?e.pathProxy(e.attribute):e.pathProxy,t),(null===(n=this.otherAttrs)||void 0===n?void 0:n[i])&&this.otherAttrs[i].length&&wb(this.otherAttrs[i],e.attribute,t)})),e&&(this.clearPathProxy(),this.morphingData=null)}}const Mb=e=>{const t={};return Object.keys(e).forEach((i=>{(e=>Pd.includes(e))(i)||(t[i]=e[i])})),t},Ib=(e,t,i)=>{const n=Mb(e.attribute),r=e.attachShadow();if(t.length)r.setTheme({[t[0].type]:n}),t.forEach((e=>{r.appendChild(e)}));else{const s=e.AABBBounds,a=s.width(),o=s.height();r.setTheme({rect:n}),new Array(i).fill(0).forEach((e=>{const i=se.graphicService.creator.rect({x:0,y:0,width:a,height:o});r.appendChild(i),t.push(i)}))}},Rb=(e,t,i)=>{const n=[],r=i?null:Mb(e.attribute),s=e.toCustomPath();for(let a=0;a<t;a++){const e={path:(new dc).fromCustomPath2D(s)};n.push(se.graphicService.creator.path(i?e:Object.assign({},r,e)))}return i&&Ib(e,n,t),n},Db=(e,t,i)=>{const n=[],r=i?null:Mb(e.attribute);if("rect"===e.type)((e,t)=>{const{width:i,height:n}=vb(e.attribute),r=yb(i,n,t),s=[],a=n/r.length;for(let o=0,l=r.length;o<l;o++){const e=r[o],t=i/e;for(let i=0;i<e;i++)s.push({x:0+i*t,y:0+o*a,width:t,height:a})}return s})(e,t).forEach((e=>{n.push(se.graphicService.creator.rect(i?e:Object.assign({},r,e)))}));else if("arc"===e.type)((e,t)=>{const i=e.getParsedAngle(),n=i.startAngle,r=i.endAngle,s=e.getComputedAttribute("innerRadius"),a=e.getComputedAttribute("outerRadius"),o=Math.abs(n-r),l=Math.abs(a-s),c=yb(o*(s+a)/2,l,t),h=[],d=l/c.length,u=a>=s?1:-1,p=r>=n?1:-1;for(let g=0,f=c.length;g<f;g++){const e=c[g],t=o/e;for(let i=0;i<e;i++)h.push({innerRadius:a-d*g*u,outerRadius:a-d*(g+1)*u,startAngle:n+t*i*p,endAngle:n+t*(i+1)*p})}return h})(e,t).forEach((e=>{n.push(se.graphicService.creator.arc(i?e:Object.assign({},r,e)))}));else if("circle"===e.type)((e,t)=>{const i=e.getComputedAttribute("startAngle"),n=e.getComputedAttribute("endAngle"),r=e.getComputedAttribute("radius"),s=Math.abs(i-n),a=yb(s*r,r,t),o=[],l=s/a[0],c=r/a.length,h=n>=i?1:-1;for(let d=0,u=a.length;d<u;d++)for(let e=0,t=a[d];e<t;e++)o.push({innerRadius:c*d,outerRadius:c*(d+1),startAngle:i+l*e*h,endAngle:i+l*(e+1)*h});return o})(e,t).forEach((e=>{n.push(se.graphicService.creator.arc(i?e:Object.assign({},r,e)))}));else if("line"===e.type){const s=((e,t)=>{const i=e.attribute,n=i.points;if(n)return bb(n,t);if(i.segments){const e=i.segments.reduce(((e,t)=>{var i;return e.concat(null!==(i=t.points)&&void 0!==i?i:[])}),[]);return bb(e,t)}return[]})(e,t),a={size:10,symbolType:"circle"};s.forEach((e=>{n.push(se.graphicService.creator.symbol(i?Object.assign({},e,a):Object.assign({},r,e,a)))}))}else"polygon"===e.type?((e,t)=>{const i=e.attribute.points;if(!i||!i.length)return[];if(1===t)return[{points:_b(i)}];const n=[];return Sb(i,t,n),n})(e,t).forEach((e=>{n.push(se.graphicService.creator.polygon(i?e:Object.assign({},r,e)))})):"area"===e.type?((e,t)=>{var i,n;const r=e.attribute;let s=r.points;const a=r.segments;s||(s=a.reduce(((e,t)=>{var i;return e.concat(null!==(i=t.points)&&void 0!==i?i:[])}),[]));const o=s.filter((e=>!1!==e.defined&&l(e.x)&&l(e.y)));if(!o.length)return[];const c=[];o.forEach((e=>{c.push({x:e.x,y:e.y})}));for(let l=o.length-1;l>=0;l--){const e=o[l];c.push({x:null!==(i=e.x1)&&void 0!==i?i:e.x,y:null!==(n=e.y1)&&void 0!==n?n:e.y})}const h=[];return Sb(s,t,h),h})(e,t).forEach((e=>{n.push(se.graphicService.creator.polygon(i?e:Object.assign({},r,e)))})):"path"===e.type&&((e,t)=>{const i=gb(e.getParsedPathShape());if(!i.length||t<0)return[];const n=i.length;if(i.length>=t){const e=[],r=Math.floor(i.length/t);for(let s=0;s<t;s++){const a=i.slice(s*r,s===t-1?n:(s+1)*r);e.push({path:mb(a)})}return e}const r=[],s=Math.floor(t/n);let a=t;for(let o=0;o<n;o++){const e=[];for(let t=2,n=i[o].length;t<n;t+=2)e.push({x:i[0][t],y:i[0][t+1]});Sb(e,o===n-1?a:s,r),a-=s}return r})(e,t).forEach((e=>{"path"in e?n.push(se.graphicService.creator.path(i?e:Object.assign({},r,e))):n.push(se.graphicService.creator.polygon(i?e:Object.assign({},r,e)))}));return i&&Ib(e,n,t),n},Lb=Symbol.for("key");class jb{diffGrammar(e,t){return function(e,t,i){const n={enter:[],exit:[],update:[]},r=new xy(e,i);return r.setCallback(((e,t,i)=>{P(t)?n.exit.push({prev:i[0]}):P(i)?n.enter.push({next:t[0]}):n.update.push({next:t[0],prev:i[0]})})),r.setCurrentData(_y(t,i)),r.doDiff(),n}(e,t,(e=>{var t;return null!==(t=e.id())&&void 0!==t?t:Symbol()}))}diffMark(e,t,i){const n={enter:[],exit:[],update:[]};let r=[],s=[];e.forEach((e=>{e.markType!==Vr.group&&(i.morph&&e.getMorphConfig().morph||i.morphAll||i.reuse)?r.push(e):n.exit.push({prev:[e]})})),t.forEach((e=>{e.markType!==Vr.group&&(i.morph&&e.getMorphConfig().morph||i.morphAll||i.reuse)?s.push(e):n.enter.push({next:[e]})}));const a=this.diffUpdateByGroup(r,s,(e=>e.getMorphConfig().morphKey),(e=>e.getMorphConfig().morphKey));r=a.prev,s=a.next,n.update=n.update.concat(a.update);const o=this.diffUpdateByGroup(r,s,(e=>e.id()),(e=>e.id()));r=o.prev,s=o.next,n.update=n.update.concat(o.update);const l=_y(r,(e=>{var t,i;return null===(i=null===(t=e.group)||void 0===t?void 0:t.id)||void 0===i?void 0:i.call(t)})),c=_y(s,(e=>{var t,i;return null===(i=null===(t=e.group)||void 0===t?void 0:t.id)||void 0===i?void 0:i.call(t)}));return Object.keys(c).forEach((e=>{const t=l.data.get(e),i=c.data.get(e);if(t&&i){for(let e=0;e<Math.max(t.length,i.length);e+=1){const r=t[e],s=i[e];r&&s?n.update.push({prev:[r],next:[s]}):r?n.exit.push({prev:[r]}):s&&n.enter.push({next:[s]})}r=r.filter((e=>!t.includes(e))),s=s.filter((e=>!i.includes(e)))}})),r.forEach((e=>n.exit.push({prev:[e]}))),s.forEach((e=>n.enter.push({next:[e]}))),n}_appendMorphKeyToElements(e){const t=e.getMorphConfig();if(!P(t.morphElementKey)){const i=Zf(t.morphElementKey);e.elements&&e.elements.forEach((e=>{e.morphKey=i(e.getDatum())}))}}morph(e,t,i){const n=function(e,t,i){const n={enter:[],exit:[],update:[]},r=new xy(e,i);return r.setCallback(((e,t,i)=>{P(t)?n.exit.push({prev:i}):P(i)?n.enter.push({next:t}):n.update.push({next:t,prev:i})})),r.setCurrentData(_y(t,i)),r.doDiff(),n}(e.reduce(((e,t)=>(this._appendMorphKeyToElements(t),e.concat(t.elements))),[]),t.reduce(((e,t)=>(this._appendMorphKeyToElements(t),e.concat(t.elements))),[]),(e=>{var t;return null!==(t=e.morphKey)&&void 0!==t?t:e.key}));e.forEach((e=>{var t,i;return null===(i=null===(t=e.animate)||void 0===t?void 0:t.disable)||void 0===i?void 0:i.call(t)})),t.forEach((e=>{var t,i;return null===(i=null===(t=e.animate)||void 0===t?void 0:t.disable)||void 0===i?void 0:i.call(t)}));const r=e.concat(t).reduce(((e,t)=>(Object.assign(e,t.parameters()),e)),{});let s=0;const a=()=>{s-=1,0===s&&t.forEach((e=>{var t,i;null===(i=null===(t=e.animate)||void 0===t?void 0:t.enable)||void 0===i||i.call(t)}))};n.enter.forEach((e=>{e.next.forEach((e=>{this.doMorph([],[e],i,a,r)})),s+=1})),n.update.forEach((e=>{const t=Math.min(e.prev.length,e.next.length),n=this.divideElements(e.prev,t),o=this.divideElements(e.next,t);for(let l=0;l<t;l++)this.doMorph(n[l],o[l],i,a,r),s+=1}))}diffUpdateByGroup(e,t,i,n){const r=_y(e,(e=>{var t;return null!==(t=i(e))&&void 0!==t?t:Lb})),s=_y(t,(e=>{var t;return null!==(t=n(e))&&void 0!==t?t:Lb}));let a=e,o=t;const l=[];return s.keys.forEach((e=>{if(e!==Lb){const t=r.data.get(e),i=s.data.get(e);t&&i&&(l.push({prev:t,next:i}),a=a.filter((e=>!t.includes(e))),o=o.filter((e=>!i.includes(e))))}})),{prev:a,next:o,update:l}}doMorph(e,t,i,n,r){var s,a;const o={prev:e.map((e=>e.getDatum())),next:t.map((e=>e.getDatum()))},c={prev:e.slice(),next:t.slice()},h=i.animation.easing,d=Kf(i.animation.delay,r,o,c),u=Kf(i.animation.duration,r,o,c),p=Kf(i.animation.oneByOne,r,o,c),g=Kf(i.animation.splitPath,r,o,c),f=L(p)&&p>0?e=>l(p)?e*p:!0===p?e*u:0:void 0;1!==e.length&&0!==e.length||1!==t.length?1===e.length&&t.length>1?((e,t,i)=>{var n;const r=t.filter((e=>e&&e.toCustomPath&&e.valid));r.length||__DEV__&&console.error(r," is not validate"),e.valid&&e.toCustomPath||__DEV__&&console.error(e," is not validate");const s=("clone"===(null==i?void 0:i.splitPath)?Rb:null!==(n=null==i?void 0:i.splitPath)&&void 0!==n?n:Db)(e,r.length,!1),a=null==i?void 0:i.onEnd;let o=r.length;const l=()=>{o--,0===o&&a&&a()};r.forEach(((t,n)=>{var a;const o=s[n],c=(null!==(a=null==i?void 0:i.delay)&&void 0!==a?a:0)+((null==i?void 0:i.individualDelay)?i.individualDelay(n,r.length,o,t):0);Ob(o,t,Object.assign({},i,{onEnd:l,delay:c}),e.globalTransMatrix)}))})(e[0].getGraphicItem(),t.map((e=>e.getGraphicItem())),{delay:d,duration:u,easing:h,onEnd:n,individualDelay:f,splitPath:g}):e.length>1&&1===t.length&&((e,t,i)=>{var n,r,s;const a=e.filter((e=>e.toCustomPath&&e.valid));a.length||__DEV__&&console.error(e," is not validate"),t.valid&&t.toCustomPath||__DEV__&&console.error(t," is not validate");const o=("clone"===(null==i?void 0:i.splitPath)?Rb:null!==(n=null==i?void 0:i.splitPath)&&void 0!==n?n:Db)(t,a.length,!0),l=t.attribute;t.setAttribute("visible",!1);const c=a.map(((e,t)=>kb(e.toCustomPath(),o[t].toCustomPath(),{fromTransform:e.globalTransMatrix,toTransfrom:o[t].globalTransMatrix}))),h=a.map(((e,t)=>Eb(e.attribute,l)));if(null==i?void 0:i.individualDelay){const n=i.onEnd;let r=a.length;const s=()=>{r--,0===r&&(t.setAttributes({visible:!0,ratio:null},!1,{type:wl.ANIMATE_END}),t.detachShadow(),n&&n())};o.forEach(((t,n)=>{var r,o,l;const d=(null!==(r=i.delay)&&void 0!==r?r:0)+i.individualDelay(n,a.length,e[n],t),u=t.animate(Object.assign({},i,{onEnd:s}));u.wait(d),u.play(new Tb({morphingData:c[n],saveOnEnd:!0,otherAttrs:h[n]},null!==(o=i.duration)&&void 0!==o?o:id,null!==(l=i.easing)&&void 0!==l?l:nd))}))}else{const e=null==i?void 0:i.onEnd,n=i?Object.assign({},i):{};n.onEnd=()=>{t.setAttribute("visible",!0,!1,{type:wl.ANIMATE_END}),t.detachShadow(),e&&e()};const a=t.animate(n);(null==i?void 0:i.delay)&&a.wait(i.delay),a.play(new Pb({morphingData:c,otherAttrs:h},null!==(r=null==i?void 0:i.duration)&&void 0!==r?r:id,null!==(s=null==i?void 0:i.easing)&&void 0!==s?s:nd))}})(e.map((e=>e.getGraphicItem())),t[0].getGraphicItem(),{delay:d,duration:u,easing:h,onEnd:n,individualDelay:f,splitPath:g}):Ob(null===(a=null===(s=e[0])||void 0===s?void 0:s.getGraphicItem)||void 0===a?void 0:a.call(s),t[0].getGraphicItem(),{delay:d,duration:u,easing:h,onEnd:n})}divideElements(e,t){const i=Math.floor(e.length/t);return new Array(t).fill(0).map(((n,r)=>e.slice(i*r,r===t-1?e.length:i*(r+1))))}}class Fb{constructor(e,t){this._grammars={signal:[],data:[],scale:[],coordinate:[],mark:[],customized:[]},this._grammarMap={signal:{},data:{},scale:{},coordinate:{},mark:{},customized:{}},this._size=0,this._mapKey=_(e)?t=>t[e]:e,this._warning=t}record(e){var t,i;const n=e.grammarType,r=this._mapKey(e);return this._grammarMap[n]?(this._grammars[n].push(e),P(r)||(this._grammarMap[n][r]?null===(t=this._warning)||void 0===t||t.call(this,r,e):this._grammarMap[n][r]=e)):(this._grammars.customized.push(e),P(r)||(this._grammarMap.customized[r]?null===(i=this._warning)||void 0===i||i.call(this,r,e):this._grammarMap.customized[r]=e)),this._size+=1,this}unrecord(e){const t=e.grammarType,i=this._mapKey(e);return this._grammarMap[t]?(this._grammars[t]=this._grammars[t].filter((t=>t!==e)),P(i)||this._grammarMap[t][i]!==e||delete this._grammarMap[t][i]):(this._grammars.customized=this._grammars.customized.filter((t=>t!==e)),P(i)||this._grammarMap.customized[i]!==e||delete this._grammarMap.customized[i]),this._size-=1,this}size(){return this._size}getSignal(e){var t;return null!==(t=this._grammarMap.signal[e])&&void 0!==t?t:null}getData(e){var t;return null!==(t=this._grammarMap.data[e])&&void 0!==t?t:null}getScale(e){var t;return null!==(t=this._grammarMap.scale[e])&&void 0!==t?t:null}getCoordinate(e){var t;return null!==(t=this._grammarMap.coordinate[e])&&void 0!==t?t:null}getMark(e){var t;return null!==(t=this._grammarMap.mark[e])&&void 0!==t?t:null}getCustomized(e){var t;return null!==(t=this._grammarMap.customized[e])&&void 0!==t?t:null}getGrammar(e){return this._grammarMap.data[e]?this._grammarMap.data[e]:this._grammarMap.signal[e]?this._grammarMap.signal[e]:this._grammarMap.scale[e]?this._grammarMap.scale[e]:this._grammarMap.coordinate[e]?this._grammarMap.coordinate[e]:this._grammarMap.mark[e]?this._grammarMap.mark[e]:this._grammarMap.customized[e]?this._grammarMap.customized[e]:null}getAllSignals(){return this._grammars.signal}getAllData(){return this._grammars.data}getAllScales(){return this._grammars.scale}getAllCoordinates(){return this._grammars.coordinate}getAllMarks(){return this._grammars.mark}getAllCustomized(){return this._grammars.customized}traverse(e){var t;Object.values(null!==(t=this._grammars)&&void 0!==t?t:{}).forEach((t=>(null!=t?t:[]).forEach((t=>{e.call(null,t)}))))}find(e){let t=null;return this.traverse((i=>!0===e.call(null,i)&&(t=i,!0))),t}filter(e){const t=[];return this.traverse((i=>{!0===e.call(null,i)&&t.push(i)})),t}clear(){this._size=0,this._grammars={signal:[],data:[],scale:[],coordinate:[],mark:[],customized:[]},this._grammarMap={signal:{},data:{},scale:{},coordinate:{},mark:{},customized:{}}}release(){this._size=0,this._grammars=null,this._grammarMap=null}}class Bb extends Fb{constructor(){super(...arguments),this._markNodes=[]}record(e){if(super.record(e),"mark"===e.grammarType){const t=e,i={mark:t,parent:null,children:[]};this._markNodes.forEach((e=>{const n=e.mark;n.markType===Vr.group&&n.includesChild(t,!1)?(e.children.push(i),i.parent=e):t.markType===Vr.group&&t.includesChild(n,!1)&&(i.children.push(e),e.parent=i)})),this._markNodes.push(i)}return this}unrecord(e){if(super.unrecord(e),"mark"===e.grammarType){const t=e,i=this._markNodes.find((e=>e.mark===t));this._markNodes.forEach((e=>{const n=e.mark;n.markType===Vr.group&&n.includesChild(t,!1)?(e.children=e.children.filter((e=>e!==i)),i.parent=null):t.markType===Vr.group&&t.includesChild(n,!1)&&(i.children=i.children.filter((t=>t!==e)),e.parent=null)})),this._markNodes=this._markNodes.filter((e=>e!==i))}return this}getAllMarkNodes(){return this._markNodes}clear(){super.clear(),this._markNodes=[]}release(){super.release(),this._markNodes=null}}class Nb{constructor(e){this._animations=[],this._additionalAnimateMarks=[],this.isEnabled=!0,this._onAnimationStart=e=>{this._additionalAnimateMarks=this._additionalAnimateMarks.filter((e=>{var t;return null===(t=null==e?void 0:e.animate)||void 0===t?void 0:t.isAnimating()})),0===this._animations.length&&0===this._additionalAnimateMarks.length&&this._view.emit($r.ALL_ANIMATION_START,{}),this._animations=this._animations.concat({config:e.animationConfig,mark:e.mark})},this._onAnimationEnd=e=>{this._additionalAnimateMarks=this._additionalAnimateMarks.filter((e=>{var t;return null===(t=null==e?void 0:e.animate)||void 0===t?void 0:t.isAnimating()})),this._animations=this._animations.filter((t=>t.config!==e.animationConfig||t.mark!==e.mark)),0===this._animations.length&&0===this._additionalAnimateMarks.length&&this._view.emit($r.ALL_ANIMATION_END,{})},this._view=e,this._view.addEventListener($r.ANIMATION_START,this._onAnimationStart),this._view.addEventListener($r.ANIMATION_END,this._onAnimationEnd)}stop(){return this._view.traverseMarkTree((e=>{var t,i;e.animate&&(null===(i=(t=e.animate).stop)||void 0===i||i.call(t))})),this._additionalAnimateMarks.forEach((e=>{var t,i;e.view&&e.animate&&(null===(i=(t=e.animate).stop)||void 0===i||i.call(t))})),this._additionalAnimateMarks=[],this}pause(){return this._view.traverseMarkTree((e=>{var t,i;e.animate&&(null===(i=(t=e.animate).pause)||void 0===i||i.call(t))})),this._additionalAnimateMarks.forEach((e=>{var t,i;e.view&&e.animate&&(null===(i=(t=e.animate).pause)||void 0===i||i.call(t))})),this}resume(){return this._view.traverseMarkTree((e=>{var t,i;e.animate&&(null===(i=(t=e.animate).resume)||void 0===i||i.call(t))})),this._additionalAnimateMarks.forEach((e=>{var t,i;e.view&&e.animate&&(null===(i=(t=e.animate).resume)||void 0===i||i.call(t))})),this}enable(){return this.isEnabled=!0,this._view.traverseMarkTree((e=>{var t,i;e.animate&&(null===(i=(t=e.animate).enable)||void 0===i||i.call(t))})),this}disable(){return this.isEnabled=!1,this._view.traverseMarkTree((e=>{var t,i;e.animate&&(null===(i=(t=e.animate).disable)||void 0===i||i.call(t))})),this._additionalAnimateMarks.forEach((e=>{var t,i;e.view&&e.animate&&(null===(i=(t=e.animate).stop)||void 0===i||i.call(t))})),this._additionalAnimateMarks=[],this}enableAnimationState(e){return this._view.traverseMarkTree((t=>{var i,n;t.animate&&(null===(n=(i=t.animate).enableAnimationState)||void 0===n||n.call(i,e))})),this}disableAnimationState(e){return this._view.traverseMarkTree((t=>{var i,n;t.animate&&(null===(n=(i=t.animate).disableAnimationState)||void 0===n||n.call(i,e))})),this}isAnimating(){return 0!==this._animations.length||this._additionalAnimateMarks.some((e=>{var t;return(null===(t=null==e?void 0:e.animate)||void 0===t?void 0:t.isAnimating())||!1}))}animate(){return this.isEnabled?(this._view.traverseMarkTree((e=>{e.isUpdated&&e.animate&&e.animate.animate(),e.cleanExitElements(),e.isUpdated=!1}),null,!0),this):this}animateAddition(e){return e.animate.animate(),this._additionalAnimateMarks.push(e),this}release(){this._additionalAnimateMarks=[],this._view.removeEventListener($r.ALL_ANIMATION_START,this._onAnimationStart),this._view.removeEventListener($r.ALL_ANIMATION_END,this._onAnimationEnd)}}class zb extends Wy{addGraphicItem(e,t){const i=null==e?void 0:e.text,n="rich"===(null==i?void 0:i.type),r=Gv(this,n?Vr.richtext:Vr.text,e);return n&&(e.textConfig=[]),super.addGraphicItem(e,t,r)}getAttributeTransforms(){var e;return"richtext"===(null===(e=this.getGroupGraphicItem())||void 0===e?void 0:e.type)?Qv.richtext:Qv.text}release(){super.release()}}zb.markType=Vr.text;const Hb={axis:{label:{visible:!0,inside:!1,space:4,style:{fontSize:12,fill:"#89909d",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},items:[],start:{x:0,y:0},end:{x:100,y:0},x:0,y:0},circleAxis:{title:{space:4,padding:[0,0,0,0],textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1},text:"theta"},label:{visible:!0,inside:!1,space:4,style:{fontSize:12,fill:"#6F6F6F",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},items:[],startAngle:0,endAngle:2*Math.PI,radius:100,innerRadius:0,center:{x:0,y:0},x:0,y:0},grid:{style:{stroke:"#f1f2f5"}},circleGrid:{style:{stroke:"#f1f2f5"}},discreteLegend:{layout:"vertical",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:10,spaceRow:10,shape:{space:4,style:{size:10,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8",stroke:"#D8D8D8",fillOpacity:.5}}},label:{space:4,style:{fontSize:12,fill:"black",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8",fillOpacity:.5}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"},state:{selectedHover:{fillOpacity:.7,fill:"gray"},unSelectedHover:{fillOpacity:.2,fill:"gray"}}},focus:!1,focusIconStyle:{size:10,fill:"#333",cursor:"pointer"},visible:!0,padding:{top:2,bottom:2,left:2,right:2}},autoPage:!0,pager:{space:12,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!1,items:[{index:0,id:"",label:"",shape:{fill:"#6690F2",stroke:"#6690F2",symbolType:"circle"}}]},colorLegend:{title:{visible:!1,text:""},colors:[],layout:"horizontal",railWidth:200,railHeight:8,railStyle:{cornerRadius:5}},sizeLegend:{title:{visible:!1,text:""},trackStyle:{fill:"#ccc"},layout:"horizontal",align:"bottom",railWidth:200,railHeight:6,min:0,max:1,value:[0,1]},lineCrosshair:{start:{x:0,y:0},end:{x:0,y:0}},rectCrosshair:{start:{x:0,y:0},end:{x:0,y:0},rectStyle:{width:10,height:10}},sectorCrosshair:{center:{x:0,y:0},radius:100,startAngle:0,endAngle:Math.PI/6},circleCrosshair:{center:{x:0,y:0},radius:100,startAngle:0,endAngle:2*Math.PI},polygonCrosshair:{center:{x:0,y:0},radius:100,startAngle:0,endAngle:2*Math.PI,sides:6},slider:{layout:"horizontal",railWidth:200,railHeight:10,railStyle:{cornerRadius:5},range:{draggableTrack:!0},startText:{visible:!0,text:"",space:8},endText:{visible:!0,text:"",space:8},min:0,max:1,value:[0,1]},dataLabel:{size:{width:400,height:400},dataLabels:[]},pointLabel:{data:[{text:"",fill:"#606773",data:{}}],overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},lineLabel:{type:"line",data:[{text:"",data:{}}],position:"start",overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},areaLabel:{type:"area",data:[{text:"",data:{}}],position:"end",overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},rectLabel:{type:"rect",data:[{text:"",fill:"#606773",data:{}}],position:"top",overlap:{size:{width:1e3,height:1e3},strategy:[{type:"position"}]},smartInvert:!1},symbolLabel:{type:"symbol",data:[{text:"",fill:"#606773",data:{}}],position:"top",overlap:{avoidBaseMark:!0,size:{width:1e3,height:1e3},strategy:[{type:"position"}]},smartInvert:!1},arcLabel:{type:"arc",data:[{text:"",fill:"#606773",data:{}}],width:800,height:600,position:"outside",zIndex:302},lineDataLabel:{type:"line-data",data:[{text:""}],position:"top",overlap:{avoidBaseMark:!1,clampForce:!1},smartInvert:!1},datazoom:{orient:"bottom",showDetail:"auto",brushSelect:!0,start:0,end:1,position:{x:0,y:0},size:{width:500,height:40},previewData:[]},continuousPlayer:{},discretePlayer:{},tooltip:{},title:{textStyle:{fill:"#21252c"},subtextStyle:{fill:"#606773"}},scrollbar:{width:12,height:12,padding:[2,2],railStyle:{fill:"rgba(0, 0, 0, .1)"}}},Vb={symbol:{shape:"circle",size:8},text:{fontSize:14,fill:"#000000"}},Ub=Object.assign({},Hb);Ub.axis=Object.assign({},Ub.axis,{label:{style:{fill:"#bbbdc3"}},line:{style:{stroke:"#4b4f54"}},tick:{style:{stroke:"#4b4f54"}},subTick:{style:{stroke:"#4b4f54"}}}),Ub.circleAxis=Object.assign({},Ub.circleAxis,{label:{style:{fill:"#bbbdc3"}},line:{style:{stroke:"#4b4f54"}},tick:{style:{stroke:"#4b4f54"}},subTick:{style:{stroke:"#4b4f54"}}}),Ub.grid=Object.assign({},Ub.grid,{style:{stroke:"#404349"}}),Ub.circleGrid=Object.assign({},Ub.circleGrid,{style:{stroke:"#404349"}}),Ub.rectLabel=Object.assign({},Ub.rectLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),Ub.lineLabel=Object.assign({},Ub.lineLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),Ub.symbolLabel=Object.assign({},Ub.symbolLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),Ub.title=Object.assign({},Ub.title,{textStyle:{fill:"#fdfdfd"},subtextStyle:{fill:"#888c93"}});const Wb={name:"dark",padding:5,background:"#202226",palette:{default:["#5383F4","#7BCF8E","#FF9D2C","#FFDB26","#7568D9","#80D8FB","#1857A3","#CAB0E8","#FF8867","#B9E493","#2CB4A8","#B9E4E3"]},marks:Vb,components:Ub},Gb={name:"default",padding:5,palette:{default:["#6690F2","#70D6A3","#B4E6E2","#63B5FC","#FF8F62","#FFDC83","#BCC5FD","#A29BFE","#63C4C7","#F68484"]},marks:Vb,components:Hb};class Kb{static registerTheme(e,t){e&&Kb._themes.set(e,t)}static unregisterTheme(e){Kb._themes.delete(e)}static getTheme(e){return Kb._themes.get(e)}static getDefaultTheme(){return Kb.getTheme("default")}}Kb._themes=new Map,Kb.registerTheme("default",Gb),Kb.registerTheme("dark",Wb);class Yb extends Wy{constructor(e,t,i,n){super(e,Vr.component,i),this._componentDatum={[Bm]:0},this.componentType=t,this.spec.type="component",this.spec.componentType=t,this.mode=n,this._updateComponentEncoders()}configureComponent(e){return this.spec.componentConfig=e,this.commit(),this}addGraphicItem(e,t,i){const n=null!=i?i:nm.createGraphicComponent(this.componentType,e,{mode:this.mode,skipDefault:this.spec.skipTheme});return this.emit($r.BEFORE_ADD_VRENDER_MARK),this.graphicParent.appendChild(n),this.emit($r.AFTER_ADD_VRENDER_MARK),n}join(e){return super.join(e,Bm)}encodeState(e,t,i){return super.encodeState(e,t,i),this._updateComponentEncoders(),this}parseRenderContext(){return{large:!1}}_prepareRejoin(){this._componentDatum[Bm]+=1}evaluateJoin(e){return this.spec.key=Bm,super.evaluateJoin([this._componentDatum])}_updateComponentEncoders(){this._encoders=this.spec.encode}_getEncoders(){var e;return null!==(e=this._encoders)&&void 0!==e?e:{}}}var Xb,qb=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class Zb extends(a()){static useRegisters(e){e.forEach((e=>{e()}))}constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),e=this,this._observer=null,this._onResize=F((function(){const t=e._getContainerSize();t&&e.resize(t.width,t.height)}),100),this.delegateEvent=(e,t)=>{var i;const n=null===(i=e.target)||void 0===i?void 0:i[Lm],r=Bv(0,e,n,0,um);this.emit(t,r,n)},this.handleProgressiveFrame=()=>{this._progressiveMarks.length&&this._progressiveMarks.forEach((e=>{e.isDoingProgressive()&&e.evaluateProgressive()})),this.doPreProgressive()},this._config=i,this._options=Object.assign({mode:"browser"},t),this.initialize()}getGrammarById(e){return this.grammars.getGrammar(e)}getSignalById(e){return this.grammars.getSignal(e)}getDataById(e){return this.grammars.getData(e)}getScaleById(e){return this.grammars.getScale(e)}getCoordinateById(e){return this.grammars.getCoordinate(e)}getMarkById(e){return this.grammars.getMark(e)}getCustomizedById(e){return this.grammars.getCustomized(e)}getGrammarsByName(e){return this.grammars.filter((t=>t.name()===e))}getGrammarsByType(e){return this.grammars.filter((t=>t.grammarType===e))}getMarksByType(e){return this.grammars.getAllMarks().filter((t=>t.markType===e))}getMarksByName(e){return this.grammars.getAllMarks().filter((t=>t.name()===e))}getMarksBySelector(e){if(!e)return null;const t=z(e),i=[];return t.forEach((e=>{if(qf(e))return void i.push(e);if("#"===e[0]){const t=this.getMarkById(e.slice(1));return void(t&&i.push(t))}const t="@"===e[0]?this.getMarksByName(e.slice(1)):Wv(e)?this.getMarksByType(e):null;t&&t.length&&t.forEach((e=>{i.push(e)}))})),i}updateSignal(e,t){_(e)&&(e=this.getSignalById(e)),e.set(t),this.commit(e)}signal(e,t){const i=new Nv(this);return arguments.length>=1&&i.value(e),arguments.length>=2&&i.update(t),this.grammars.record(i),this._dataflow.add(i),i}data(e){const t=new hm(this,e);return this.grammars.record(t),this._dataflow.add(t),t}scale(e){const t=nm.createGrammar("scale",this,e);return t&&(this.grammars.record(t),this._dataflow.add(t)),t}coordinate(e){const t=nm.createGrammar("coordinate",this,e);return t&&(this.grammars.record(t),this._dataflow.add(t)),t}mark(e,t,i){const n=_(t)?this.getMarkById(t):t;let r;switch(e){case Vr.group:r=new Gy(this,n);break;case Vr.glyph:r=new tb(this,null==i?void 0:i.glyphType,n);break;case Vr.component:r=nm.hasComponent(null==i?void 0:i.componentType)?nm.createComponent(null==i?void 0:i.componentType,this,n,null==i?void 0:i.mode):new Yb(this,null==i?void 0:i.componentType,n,null==i?void 0:i.mode);break;case Vr.text:r=new zb(this,e,n);break;default:r=nm.hasMark(e)?nm.createMark(e,this,n):new Wy(this,e,n)}return this.grammars.record(r),this._dataflow.add(r),r}group(e){return this.mark(Vr.group,e)}glyph(e,t){return this.mark(Vr.glyph,t,{glyphType:e})}component(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2d";return this.mark(Vr.component,t,{componentType:e,mode:i})}axis(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2d";return this.mark(Vr.component,e,{componentType:Ur.axis,mode:t})}grid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2d";return this.mark(Vr.component,e,{componentType:Ur.grid,mode:t})}legend(e){return this.mark(Vr.component,e,{componentType:Ur.legend})}slider(e){return this.mark(Vr.component,e,{componentType:Ur.slider})}label(e){return this.mark(Vr.component,e,{componentType:Ur.label})}datazoom(e){return this.mark(Vr.component,e,{componentType:Ur.datazoom})}player(e){return this.mark(Vr.component,e,{componentType:Ur.player})}title(e){return this.mark(Vr.component,e,{componentType:Ur.title})}scrollbar(e){return this.mark(Vr.component,e,{componentType:Ur.scrollbar})}customized(e,t){const i=nm.createGrammar(e,this,null==t?void 0:t.type);if(i)return i.parse(t),this.grammars.record(i),this._dataflow.add(i),i}addGrammar(e){return this.grammars.find((t=>t.uid===e.uid))||(this.grammars.record(e),this._dataflow.add(e),e.parse(e.getSpec()),this._needBuildLayoutTree=!0),this}removeGrammar(e){const t=_(e)?this.getGrammarById(e):e;return t&&this.grammars.find((e=>e.uid===t.uid))?("mark"===t.grammarType&&t.prepareRelease(),this._cachedGrammars.record(t),this._dataflow.remove(t),this.grammars.unrecord(t),this._needBuildLayoutTree=!0,this):this}removeAllGrammars(){return this.grammars.traverse((e=>{"signal"===e.grammarType&&Hv.includes(e.id())||"mark"===e.grammarType&&"root"===e.id()||this.removeGrammar(e)})),this}removeAllGraphicItems(){return this.traverseMarkTree((e=>{e.graphicItem&&(Kv(e.graphicItem),e.elementMap.forEach((e=>{e.resetGraphicItem()})),e.graphicItem=null)})),this}parseSpec(e){var t,i,n,r,s,a;if(this.emit($r.BEFORE_PARSE_VIEW),this._spec=e,(e=>{var t;const i=(e,t)=>{var n,r;e.group=t;const s=null!==(n=e.id)&&void 0!==n?n:"VGRAMMAR_MARK_"+ ++zv;e.id=s,(null!==(r=e.marks)&&void 0!==r?r:[]).forEach((e=>i(e,s)))};(null!==(t=e.marks)&&void 0!==t?t:[]).forEach((e=>i(e,"root")))})(e),e.theme?this.theme(e.theme):this.theme(Kb.getDefaultTheme()),e.width&&this.width(e.width),e.height&&this.height(e.height),this.padding(null!==(i=null!==(t=e.padding)&&void 0!==t?t:this._options.padding)&&void 0!==i?i:this._theme.padding),!this.width()||!this.height()){const e=this._getContainerSize();e&&(this.updateSignal(gm,e.width),this.updateSignal(fm,e.height))}(null===(n=e.signals)||void 0===n?void 0:n.length)&&e.signals.forEach((e=>{this.signal().parse(e)})),(null===(r=e.data)||void 0===r?void 0:r.length)&&e.data.forEach((e=>{this.data(null).parse(e)})),(null===(s=e.coordinates)||void 0===s?void 0:s.length)&&e.coordinates.forEach((e=>{var t;null===(t=this.coordinate(e.type))||void 0===t||t.parse(e)})),(null===(a=e.scales)||void 0===a?void 0:a.length)&&e.scales.forEach((e=>{var t;null===(t=this.scale(e.type))||void 0===t||t.parse(e)}));const o=nm.getGrammars();return Object.keys(o).forEach((t=>{const{specKey:i}=o[t];e[i]&&e[i].length&&e[i].forEach((e=>{this.customized(t,e)}))})),e.marks&&e.marks.length&&e.marks.forEach((e=>{this.parseMarkSpec(e)})),e.events&&e.events.length&&e.events.forEach((e=>{this.event(e)})),e.interactions&&e.interactions.length&&e.interactions.forEach((e=>{this.interaction(e.type,e)})),!1===e.animation?this.animate.disable():this.animate.enable(),this.emit($r.AFTER_PARSE_VIEW),this._needBuildLayoutTree=!0,this._layoutState=Qr.before,this}updateSpec(e){return this.removeAllInteractions(),this.removeAllGrammars(),this.parseSpec(e)}parseBuiltIn(){((e,t,i)=>{var n,r,s,a,o;return[{id:gm,value:null!==(n=e[gm])&&void 0!==n?n:0},{id:fm,value:null!==(r=e[fm])&&void 0!==r?r:0},{id:ym,value:Vv(null!==(a=null!==(s=e[ym])&&void 0!==s?s:t[ym])&&void 0!==a?a:null==i?void 0:i.padding)},{id:mm,update:{callback:(e,t)=>{const i=Vv(t[ym]);return t[gm]-i.left-i.right},dependency:[gm,ym]}},{id:vm,update:{callback:(e,t)=>{const i=Vv(t[ym]);return t[fm]-i.top-i.bottom},dependency:[fm,ym]}},{id:bm,update:{callback:(e,t)=>{const i=Vv(t[ym]);return(e||new cl).setValue(i.left,i.top,i.left+t[mm],i.top+t[vm])},dependency:[mm,vm,ym]}},{id:_m,value:null!==(o=e[_m])&&void 0!==o?o:t[_m]}]})(this._options,this._config,this.getCurrentTheme()).forEach((e=>{const t=this.signal().parse(e);e.value&&t.set(e.value)})),this.parseMarkSpec({id:"root",type:"group",encode:{enter:{x:0,y:0},update:{width:{signal:"width"},height:{signal:"height"}}}}),this.rootMark=this.getMarkById("root")}parseMarkSpec(e){var t;const i=e.type===Vr.glyph?{glyphType:e.glyphType}:e.type===Vr.component?{componentType:e.componentType,mode:e.mode}:null;this.mark(e.type,e.group,i).parse(e),null===(t=e.marks)||void 0===t||t.forEach((e=>{this.parseMarkSpec(e)}))}theme(e){var t,i,n,r,s,a;_(e)?this._theme=null!==(t=Kb.getTheme(e))&&void 0!==t?t:Kb.getDefaultTheme():this._theme=e;const{background:o,padding:l}=null!==(i=this._spec)&&void 0!==i?i:{};return this._theme?(this.background(null!==(n=null!=o?o:this._options.background)&&void 0!==n?n:this._theme.background),this.padding(null!==(r=null!=l?l:this._options.padding)&&void 0!==r?r:this._theme.padding),null===(a=null===(s=this.renderer.stage())||void 0===s?void 0:s.setTheme)||void 0===a||a.call(s,Object.assign({},this._theme.marks))):(this.background(null!=o?o:this._options.background),this.padding(null!=l?l:this._options.padding)),this}getCurrentTheme(){return this._theme}setCurrentTheme(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return qb(this,void 0,void 0,(function*(){if(!this._isReleased){if(this.theme(e),this.grammars.getAllMarks().forEach((e=>{e.commit()})),t){if(yield this.evaluate(),this._isReleased)return;this.renderer.render(!0)}else yield this._dataflow.evaluate();return this}}))}background(e){return arguments.length?(this._background=e,this.renderer.background(e),e):this._background}width(e){const t=this.getSignalById(gm);return arguments.length?(this._options.width=e,this.updateSignal(t,e),e):t.output()}height(e){const t=this.getSignalById(fm);return arguments.length?(this._options.height=e,this.updateSignal(t,e),e):t.output()}viewWidth(e){const t=this.getSignalById(mm);if(arguments.length){const t=this.padding();return this.width(e+t.left+t.right),e}return t.output()}viewHeight(e){const t=this.getSignalById(vm);if(arguments.length){const t=this.padding();return this.height(e+t.top+t.bottom),e}return t.output()}padding(e){const t=this.getSignalById(ym);if(arguments.length){const i=Vv(e);return this.updateSignal(t,i),i}return Vv(t.output())}autoFit(e){const t=this.getSignalById(_m);return arguments.length?(this.updateSignal(t,e),e):t.output()}getViewBox(){const e=this.getSignalById(bm);return null==e?void 0:e.output()}updateLayoutTag(){return this._layoutState=Qr.before,this}getLayoutState(){return this._layoutState}buildLayoutTree(){const e={},t=[];this.traverseMarkTree((i=>{e[i.id()]=!0,i.group&&e[i.group.id()]||t.push(i),i.markType===Vr.group&&i.updateLayoutChildren()}),(e=>e.needLayout())),this._layoutMarks=t}doLayout(){var e;const t=this._options.doLayout||eb;t&&(null===(e=this._layoutMarks)||void 0===e?void 0:e.length)&&(this.emit($r.BEFORE_DO_LAYOUT),t(this._layoutMarks,this._options,this),this.emit($r.AFTER_DO_LAYOUT))}handleLayoutEnd(){this.emit($r.BEFORE_MARK_LAYOUT_END),this._layoutMarks.forEach((e=>{Dm(e,"layoutChildren",(e=>{e.handleLayoutEnd()}),(t=>t!==e))})),this.emit($r.AFTER_MARK_LAYOUT_END)}handleRenderEnd(){this.emit($r.BEFORE_MARK_RENDER_END),Dm(this.rootMark,"children",(e=>{e.handleRenderEnd()})),this.emit($r.AFTER_MARK_RENDER_END)}commit(e){return this._dataflow.commit(e),this}run(e){return this.evaluate(e),this}runSync(e){return this.evaluateSync(e),this}isRunning(){return this._running}runAsync(e){return qb(this,void 0,void 0,(function*(){if(this._isReleased)return;for(;this._running&&(yield this._running,!this._isReleased););const t=()=>{this._running=null};return(this._running=this.evaluate(e)).then(t,t),this._running}))}runNextTick(e){return qb(this,void 0,void 0,(function*(){return this._currentDataflow||(this._currentDataflow=Promise.resolve().then((()=>this.runAsync(e).then((()=>{this._currentDataflow=null})).catch((e=>{this._currentDataflow=null,this.logger.error(e)}))))),yield this._currentDataflow,this}))}doRender(e){this.emit($r.BEFORE_DO_RENDER),this.renderer&&(this._progressiveMarks||this.animate.animate(),this.renderer.render(e),this.handleRenderEnd()),this.emit($r.AFTER_DO_RENDER)}evaluate(e){var t,i,n,r;return qb(this,void 0,void 0,(function*(){if(this._isReleased)return;const s=Uv(e),a=this._cachedGrammars.size()>0;a&&(this.reuseCachedGrammars(s),this.detachCachedGrammar());const o=this._resizeRenderer(),l=this._dataflow.hasCommitted();if(!(a||l||this._layoutState||o))return this;if(this.clearProgressive(),null===(t=this.renderer)||void 0===t||t.preventRender(!0),yield this._dataflow.evaluate(),!this._isReleased){if(this._needBuildLayoutTree&&(this.buildLayoutTree(),this._needBuildLayoutTree=!1),this._layoutState){if(this._layoutState=Qr.layouting,this.doLayout(),this._dataflow.hasCommitted()&&(this._layoutState=Qr.reevaluate,yield this._dataflow.evaluate(),this._isReleased))return;this._layoutState=Qr.after,(null===(i=this._layoutMarks)||void 0===i?void 0:i.length)&&this.handleLayoutEnd()}return null===(n=this.renderer)||void 0===n||n.preventRender(!1),this._layoutState=null,this.findProgressiveMarks(),this._resizeRenderer(),this.doRender(!1),null===(r=this._willMorphMarks)||void 0===r||r.forEach((e=>{this._morph.morph(e.prev,e.next,s)})),this._willMorphMarks=null,this.releaseCachedGrammars(s),this.doPreProgressive(),this}}))}evaluateSync(e){var t,i;const n=Uv(e),r=this._cachedGrammars.size()>0;r&&(this.reuseCachedGrammars(n),this.detachCachedGrammar());const s=this._resizeRenderer(),a=this._dataflow.hasCommitted();return r||a||this._layoutState||s?(this.clearProgressive(),this._dataflow.evaluateSync(),this._needBuildLayoutTree&&(this.buildLayoutTree(),this._needBuildLayoutTree=!1),this._layoutState&&(this._layoutState=Qr.layouting,this.doLayout(),this._dataflow.hasCommitted()&&(this._layoutState=Qr.reevaluate,this._dataflow.evaluateSync()),this._layoutState=Qr.after,(null===(t=this._layoutMarks)||void 0===t?void 0:t.length)&&this.handleLayoutEnd()),this._layoutState=null,this.findProgressiveMarks(),this._resizeRenderer(),this.doRender(!0),null===(i=this._willMorphMarks)||void 0===i||i.forEach((e=>{this._morph.morph(e.prev,e.next,n)})),this._willMorphMarks=null,this.releaseCachedGrammars(n),this.doPreProgressive(),this):this}reuseCachedGrammars(e){if(this._willMorphMarks||(this._willMorphMarks=[]),e.reuse){const e=e=>{e.next.reuse(e.prev),e.prev.detachAll(),e.prev.clear(),this._cachedGrammars.unrecord(e.prev)};this._morph.diffGrammar(this._cachedGrammars.getAllSignals(),this.grammars.getAllSignals().filter((e=>!Hv.includes(e.id())))).update.forEach(e),this._morph.diffGrammar(this._cachedGrammars.getAllData(),this.grammars.getAllData()).update.forEach(e),this._morph.diffGrammar(this._cachedGrammars.getAllScales(),this.grammars.getAllScales()).update.forEach(e),this._morph.diffGrammar(this._cachedGrammars.getAllCoordinates(),this.grammars.getAllCoordinates()).update.forEach(e)}this._morph.diffMark(this._cachedGrammars.getAllMarks(),this.grammars.getAllMarks().filter((e=>"root"!==e.id())),e).update.forEach((t=>{const i=1===t.prev.length&&1===t.next.length&&t.prev[0].markType===t.next[0].markType,n=t.prev.every((e=>e.getMorphConfig().morph))&&t.next.every((e=>e.getMorphConfig().morph));i&&e.reuse?(t.next[0].reuse(t.prev[0]),t.prev[0].detachAll(),t.prev[0].clear(),this._cachedGrammars.unrecord(t.prev[0])):(e.morph&&n||e.morphAll)&&this._willMorphMarks.push({prev:t.prev,next:t.next})}))}detachCachedGrammar(){this._cachedGrammars.traverse((e=>{var t,i;if(e.detachAll(),"mark"===e.grammarType){const n=e;null===(i=null===(t=n.group)||void 0===t?void 0:t.removeChild)||void 0===i||i.call(t,n)}}))}releaseCachedGrammars(e){this._cachedGrammars.traverse((e=>{"mark"!==e.grammarType&&e.release()}));const t=this._cachedGrammars.getAllMarkNodes();t.forEach((t=>{t.mark.animate.stop(),e.enableExitAnimation&&this.animate.animateAddition(t.mark)}));const i=e=>{if(e.mark.view&&0===e.mark.animate.getAnimatorCount()&&(!e.children||0===e.children.length)){e.mark.release();const t=e.parent;t&&(e.parent.children=e.parent.children.filter((t=>t!==e)),e.parent=null,i(t))}};t.forEach((e=>{const t=e.mark;0===t.animate.getAnimatorCount()?i(e):t.addEventListener("animationEnd",(()=>{0===t.animate.getAnimatorCount()&&i(e)}))})),this._cachedGrammars.clear()}runAfter(e){return this._dataflow.runAfter((()=>{e.call(null,this)})),this}runBefore(e){return this._dataflow.runBefore((()=>{e.call(null,this)})),this}getImageBuffer(){var e,t;if("node"!==this._options.mode)return void this.logger.error(new TypeError("getImageBuffer() now only support node environment."));const i=null===(t=null===(e=this.renderer)||void 0===e?void 0:e.stage)||void 0===t?void 0:t.call(e);return i?(i.render(),i.window.getImageBuffer()):(this.logger.error(new ReferenceError("render is not defined")),null)}traverseMarkTree(e,t,i){return Dm(this.rootMark,"children",e,t,i),this}_bindResizeEvent(){var e,t,i,n,r,s;if(this.autoFit()){const a=null===(r=null===(n=null===(i=null===(t=null===(e=this.renderer)||void 0===e?void 0:e.stage)||void 0===t?void 0:t.call(e))||void 0===i?void 0:i.window)||void 0===n?void 0:n.getContainer)||void 0===r?void 0:r.call(n);if(a){const e=window.ResizeObserver;this._observer=new e(this._onResize),null===(s=this._observer)||void 0===s||s.observe(a)}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this.autoFit()&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}_getContainerSize(){var e,t,i,n,r,s,a,o,l,c,h;const d=null===(r=null===(n=null===(i=null===(t=null===(e=this.renderer)||void 0===e?void 0:e.stage)||void 0===t?void 0:t.call(e))||void 0===i?void 0:i.window)||void 0===n?void 0:n.getContainer)||void 0===r?void 0:r.call(n);if(d){const{width:e,height:t}=Ao(d);return{width:null!==(o=null!==(a=null===(s=this._spec)||void 0===s?void 0:s.width)&&void 0!==a?a:this._options.width)&&void 0!==o?o:e,height:null!==(h=null!==(c=null===(l=this._spec)||void 0===l?void 0:l.height)&&void 0!==c?c:this._options.height)&&void 0!==h?h:t}}return null}resize(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return qb(this,void 0,void 0,(function*(){let n=!1;return e!==this.width()&&(n=!0,this.updateSignal(gm,e)),t!==this.height()&&(n=!0,this.updateSignal(fm,t)),n&&(i?yield this.evaluate():yield this._dataflow.evaluate()),this}))}_resizeRenderer(){const e=this.width(),t=this.height();return!!this.renderer.shouldResize(e,t)&&(this.renderer.resize(e,t),this.emit("resize",{},{width:e,height:t}),!0)}bindEvents(e){if(this._eventConfig.disable)return;const{type:t,filter:i,callback:n,throttle:r,debounce:s,consume:a,target:o,dependency:l}=e,c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:um;const i={},n=e.split(":");if(2===n.length){const[e,r]=n;"#"===e[0]?(i.markId=e.slice(1),i.source=t):"@"===e[0]?(i.markName=e.slice(1),i.source=t):Wv(e)?(i.markType=e,i.source=t):i.source=e===dm?dm:t,i.type=r}else 1===n.length&&(i.type=e,i.source=t);return i}(t);if(!c)return;const{source:h,type:d}=c,u=P((m=c).markId)?e=>e&&e.mark.id()===m.markId:P(m.markName)?e=>e&&e.mark.name()===m.markName:P(m.type)?e=>e&&e.mark.markType===m.type:()=>!0,p=(Array.isArray(o)&&o.length?o.map((e=>({signal:this.getSignalById(e.target),callback:e.callback}))):[{signal:_(o)?this.getSignalById(o):null,callback:n}]).filter((e=>e.signal||e.callback)),g=Uf(l,this),f=((e,t)=>t&&t.debounce?F(e,t.debounce):t&&t.throttle?Nr(e,t.throttle):e)(((e,t)=>{const n=h===um&&function(e,t){const i=e.defaults,n=i.prevent,r=i.allow;return!1!==n&&!0!==r&&(!0===n||!1===r||(n?n[t]:!!r&&!r[t]))}(this._eventConfig,d)||a&&(void 0===e.cancelable||e.cancelable);h===dm&&(e=Bv(0,e,t,0,dm));let r=!1;if((!i||i(e))&&(!u||u(t))&&p.length){const t=g.reduce(((e,t)=>(e[t.id()]=t.output(),e)),{});p.forEach((i=>{i.callback&&i.signal?i.signal.set(i.callback(e,t))&&(this.commit(i.signal),r=!0):i.callback?i.callback(e,t):(this.commit(i.signal),r=!0)}))}n&&e.preventDefault(),a&&e.stopPropagation(),r&&this.runAsync()}),{throttle:r,debounce:s});var m;if(h===um){if(function(e,t,i){const n=null==e?void 0:e[t];return!(!1===n||D(n)&&!n[i])}(this._eventConfig,um,d))return this.addEventListener(d,f,pm),()=>{this.removeEventListener(d,f)}}else if(h===dm)return Bf.addEventListener(d,f),this._eventListeners.push({type:d,source:Bf,handler:f}),()=>{Bf.removeEventListener(d,f);const e=this._eventListeners.findIndex((e=>e.type===d&&e.source===Bf&&e.handler===f));e>=0&&this._eventListeners.splice(e,1)}}event(e){if("between"in e){const[t,i]=e.between,n="".concat(t.type,"-").concat(e.type,"-").concat(i.type);let r;this.bindEvents(Object.assign({},t,{callback:()=>{if(this._eventCache||(this._eventCache={}),!this._eventCache[n]){const t=this.bindEvents(e);this._eventCache[n]=t}r||(r=this.bindEvents(Object.assign({},i,{callback:()=>{this._eventCache[n]&&(this._eventCache[n](),this._eventCache[n]=null)}})))}}))}else"merge"in e?e.merge.forEach((t=>{const i=Object.assign({},e);_(t)?i.type=t:D(t)&&Object.assign(i,t),i.debounce=50,this.bindEvents(i)})):this.bindEvents(e)}interaction(e,t){const i=nm.createInteraction(e,this,t);return i&&(i.bind(),this._boundInteractions||(this._boundInteractions=[]),this._boundInteractions.push(i)),i}removeInteraction(e,t){if(this._boundInteractions){const i=this._boundInteractions.filter((i=>{var n;return P(t)?_(e)?i.type===e:e?i===e:void 0:(null===(n=i.options)||void 0===n?void 0:n.id)===t}));i.length&&i.forEach((e=>{e.unbind()}))}return this}removeAllInteractions(){return this._boundInteractions&&(this._boundInteractions.forEach((e=>{e.unbind()})),this._boundInteractions=null),this}initEvent(){const e=this.renderer.stage();e&&e.on("*",this.delegateEvent)}addEventListener(e,t,i){let n=t;return i&&!1===i.trap||(n=t,n.raw=t),i&&i.target&&(n.target=i.target),this.on(e,n),this}removeEventListener(e,t){return t?this.off(e,t):this.off(e),this}initializeRenderer(){const e=this._options.width,t=this._options.height;this.renderer=new Lv(this),this.renderer.initialize(e,t,this._options,this._eventConfig).background(this._background)}initialize(){var e,t;this.grammars=new Fb((e=>e.id()),((e,t)=>this.logger.warn("Grammar id '".concat(e,"' has been occupied"),t))),this._cachedGrammars=new Bb((e=>e.id())),this._options.logger&&u.setInstance(this._options.logger),this.logger=u.getInstance(null!==(e=this._options.logLevel)&&void 0!==e?e:0),this._dataflow=new Rm,this.animate=new Nb(this),this._morph=new jb,this._options.hooks&&(Object.keys(this._options.hooks).forEach((e=>{this.on(e,this._options.hooks[e])})),this.hooks=this._options.hooks),this.container=null,this.renderer=null,this._eventListeners=[],this._eventConfig=function(e){const t=Object.assign({defaults:{}},e),i=(e,t)=>{t.forEach((t=>{v(e[t])&&(e[t]=e[t].reduce(((e,t)=>(e[t]=!0,e)),{}))}))};return i(t.defaults,["prevent","allow"]),i(t,[um,dm]),t}(this._options.eventConfig),this._theme=this._options.disableTheme?null:Kb.getDefaultTheme(),this.parseBuiltIn(),(t=this._options).mode&&Bf.setEnv(t.mode,t.modeParams||{}),this.initializeRenderer(),this._eventConfig.disable||this.initEvent(),this._bindResizeEvent(),this._currentDataflow=null,this._needBuildLayoutTree=!0,this._layoutState=Qr.before,this.theme(this._theme)}pauseProgressive(){return!1}resumeProgressive(){return!1}restartProgressive(){return!1}findProgressiveMarks(){const e=[];return this.traverseMarkTree((t=>{e.push(t)}),(e=>e.markType!==Vr.group&&e.isProgressive())),e.length?(this._progressiveMarks=e,this.renderer&&this.renderer.combineIncrementalLayers(),e):(this._progressiveMarks=null,null)}doPreProgressive(){if(this._progressiveMarks&&this._progressiveMarks.some((e=>e.isDoingProgressive()))){const e=Bf.getRequestAnimationFrame();this._progressiveRafId=e(this.handleProgressiveFrame)}}clearProgressive(){this._progressiveRafId&&Bf.getCancelAnimationFrame()(this._progressiveRafId),this._progressiveMarks&&this._progressiveMarks.length&&(this._progressiveMarks.forEach((e=>{e.clearProgressive()})),this._progressiveMarks=null)}release(){var e,t,i;this._isReleased=!0,this._unBindResizeEvent(),this.clearProgressive(),nm.unregisterRuntimeTransforms(),this.animate.stop(),this.grammars.release(),this._cachedGrammars.release(),this._dataflow.release(),this._dataflow=null,null===(t=null===(e=this.renderer)||void 0===e?void 0:e.release)||void 0===t||t.call(e),this.renderer=null,this._boundInteractions=null,this.removeAllListeners(),null===(i=this._eventListeners)||void 0===i||i.forEach((e=>{e.source.removeEventListener(e.type,e.handler)})),this._eventListeners=null}}function Qb(e){switch(e){case n["desktop-browser"]:case n["mobile-browser"]:return"browser";case n.node:case n.worker:return"node";case n.miniApp:case n["desktop-miniApp"]:return"feishu";case n.lynx:return"lynx";case n.wx:return"wx"}return"browser"}!function(e){e.data="data",e.signal="signal",e.mark="mark"}(Xb||(Xb={}));var $b=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class Jb{getVGrammarView(){return this._view}getModel(){return this._model}constructor(e,t){this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this.isInited=!1,this.isReleased=!1,this._model={[Xb.signal]:{},[Xb.data]:{},[Xb.mark]:{}},this._compileChart=null,this._container=e,this._option=t}getRenderer(){var e;return null===(e=this._view)||void 0===e?void 0:e.renderer}getCanvas(){var e;return null===(e=this._view)||void 0===e?void 0:e.renderer.canvas()}getStage(){var e;return null===(e=this._view)||void 0===e?void 0:e.renderer.stage()}initView(){var e,t,i,n,r=this;if(this.isReleased)return;if(this.isInited=!0,this._view)return;const s=new u(null!==(e=this._option.logLevel)&&void 0!==e?e:d.Error);(null===(t=this._option)||void 0===t?void 0:t.onError)&&s.addErrorHandler((function(){for(var e,t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];null===(t=null===(e=r._option)||void 0===e?void 0:e.onError)||void 0===t||t.call(e,...n)})),this._view=new Zb(Object.assign(Object.assign({width:this._width,height:this._height,container:null!==(i=this._container.dom)&&void 0!==i?i:null,renderCanvas:null!==(n=this._container.canvas)&&void 0!==n?n:null,hooks:this._option.performanceHook},this._option),{mode:Qb(this._option.mode),autoFit:!1,eventConfig:{gesture:ue(this._option.mode),disable:!1===this._option.interactive},doLayout:()=>{var e;null===(e=this._compileChart)||void 0===e||e.onLayout(this._view)},logger:s,logLevel:s.level()})),this._setCanvasStyle(),this.getStage().hooks.afterRender.tap("chart-event",(()=>{var e,t;null===(t=null===(e=this._compileChart)||void 0===e?void 0:e.getEvent())||void 0===t||t.emit(Ir.afterRender,{chart:this._compileChart})})),!1!==this._option.interactive&&this._viewListeners.forEach((e=>{var t;null===(t=this._view)||void 0===t||t.addEventListener(e.type,e.callback)}))}_setCanvasStyle(){if(this._view&&this._container.dom&&!_(this._container.dom)){this._container.dom.style.display="block",this._container.dom.style.position="relative";const e=this.getCanvas();e&&(e.style.display="block")}}compile(e,t){const{chart:i}=e;this._compileChart=i,this.initView(),this._view&&(i.compile(),i.afterCompile(),this.updateDepend())}clear(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{chart:i}=e;i.clear(),this.releaseGrammar(t)}renderAsync(e){var t;return $b(this,void 0,void 0,(function*(){if(!this.isReleased)return this.initView(),this._view?(yield null===(t=this._view)||void 0===t?void 0:t.runNextTick(e),this):Promise.reject("srView init fail")}))}renderSync(e){var t;this.initView(),this._view&&(null===(t=this._view)||void 0===t||t.runSync(e))}updateViewBox(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._view&&this._view.renderer.setViewBox(e,t)}resize(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._view?(this._width=e,this._height=t,this._view.resize(e,t),i?this.renderAsync({morph:!1}):this):Promise.reject()}setBackground(e){var t;null===(t=this._view)||void 0===t||t.background(e)}setSize(e,t){this._width=e,this._height=t,this._view&&(this._view.width(e),this._view.height(t))}setViewBox(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._view&&this._view.renderer.setViewBox(e,t)}addEventListener(e,t,i){var n,r;if(!1!==this._option.interactive)if(e===Rr.chart){const r=function(n,r){var s,a,o;const l=null!==(a=null===(s=null==r?void 0:r.mark)||void 0===s?void 0:s.getContext())&&void 0!==a?a:{},c=x(l.modelId)?l.modelId:null,h=x(l.markId)?l.markId:null,d=x(l.modelUserId)?l.modelUserId:null,u=x(l.markUserId)?l.markUserId:null,p={event:n,type:t,source:e,item:r,datum:(null===(o=null==r?void 0:r.getDatum)||void 0===o?void 0:o.call(r))||null,markId:h,modelId:c,markUserId:u,modelUserId:d};i.call(null,p)}.bind(this);this._viewListeners.set(i,{type:t,callback:r}),null===(n=this._view)||void 0===n||n.addEventListener(t,r)}else if(e===Rr.window){const n=function(n){const r={event:n,type:t,source:e,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null};i.call(null,r)}.bind(this);this._windowListeners.set(i,{type:t,callback:n});const r=this._getGlobalThis();null==r||r.addEventListener(t,n)}else if(e===Rr.canvas){const n=function(n){const r={event:n,type:t,source:e,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null};i.call(null,r)}.bind(this);this._canvasListeners.set(i,{type:t,callback:n});const s=null===(r=this.getStage())||void 0===r?void 0:r.window;null==s||s.addEventListener(t,n)}}removeEventListener(e,t,i){var n,r,s,a;if(!1!==this._option.interactive)if(e===Rr.chart){const e=null===(n=this._viewListeners.get(i))||void 0===n?void 0:n.callback;e&&(null===(r=this._view)||void 0===r||r.removeEventListener(t,e)),this._viewListeners.delete(i)}else if(e===Rr.window){const e=this._getGlobalThis(),n=null===(s=this._windowListeners.get(i))||void 0===s?void 0:s.callback;n&&(null==e||e.removeEventListener(t,n)),this._windowListeners.delete(i)}else if(e===Rr.canvas){const e=this._getGlobalThis(),n=null===(a=this._canvasListeners.get(i))||void 0===a?void 0:a.callback;n&&(null==e||e.removeEventListener(t,n)),this._canvasListeners.delete(i)}}releaseEvent(){this._viewListeners.clear(),this._windowListeners.clear(),this._canvasListeners.clear()}release(){var e;this.releaseEvent(),this._option=this._container=null,this._releaseModel(),null===(e=this._view)||void 0===e||e.release(),this._view=null,this.isInited=!1,this.isReleased=!0}releaseGrammar(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t,i;this._releaseModel(),e&&(null===(t=this._view)||void 0===t||t.removeAllGraphicItems()),null===(i=this._view)||void 0===i||i.removeAllGrammars()}_releaseModel(){Object.keys(this._model).forEach((e=>{Object.values(this._model[e]).forEach((e=>{Object.values(e).forEach((e=>{e.removeProduct(!0)}))})),this._model[e]={}}))}addGrammarItem(e){const t=e.getProduct();if(P(t))return;const i=t.id(),n=e.grammarType;P(this._model[n][i])&&(this._model[n][i]={}),this._model[n][i][e.id]=e}removeGrammarItem(e,t){var i;const n=e.getProduct();if(P(n))return;const r=n.id(),s=e.grammarType,a=this._model[s][r];x(a)&&(delete a[e.id],0===Object.keys(a).length&&delete this._model[s][r]),t||null===(i=this._view)||void 0===i||i.removeGrammar(n)}updateDepend(e){return x(e)&&e.length>0?e.every((e=>e.updateDepend())):(Object.values(this._model).forEach((e=>{Object.values(e).forEach((e=>{const t=Object.values(e),i=t[0].getProduct(),n=t.reduce(((e,t)=>t.getDepend().length>0?e.concat(t.getDepend()):e),[]).filter((e=>!!e)).map((e=>e.getProduct()));i.depend(n)}))})),!0)}_getGlobalThis(){var e;return de(this._option.mode)?globalThis:null===(e=this.getStage())||void 0===e?void 0:e.window}}var e_=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};function t_(e,t){var i;return e_(this,void 0,void 0,(function*(){if(!e)return"";try{if(void 0!==OffscreenCanvas&&e instanceof OffscreenCanvas)return function(e){return new Promise((t=>{e.convertToBlob().then((e=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{t(i.result)}}))}))}(e)}catch(n){(null!==(i=null==t?void 0:t.onError)&&void 0!==i?i:fe)("getCanvasDataURL error : ".concat(n.toString()))}return e.toDataURL()}))}const i_={visible:!0,position:"auto",titleStyle:{fontSize:16,fill:"#08979c"},contentStyle:{fontSize:12,fill:"green"},panel:{visible:!0,fill:"#e6fffb",size:12,space:0,stroke:"#87e8de",lineWidth:1,cornerRadius:4}},n_={poptip:O({},i_)};function r_(){r_.__loaded||(r_.__loaded=!0,bp.RegisterGraphicCreator("group",uu))}r_.__loaded=!1;const s_=r_;class a_{constructor(e,t,i){this.fontFamily=e,this.textOptions=t,this.textMeasure=i}LayoutBBox(e,t,i){if("left"===t||"start"===t)e.xOffset=0;else if("center"===t)e.xOffset=e.width/-2;else{if("right"!==t&&"end"!==t)throw new Error("\u975e\u6cd5\u7684textAlign");e.xOffset=-e.width}return e.yOffset="top"===i?0:"middle"===i?e.height/-2:"alphabetic"===i?-.79*e.height:-e.height,e}GetLayout(e,t,i,n,r,s,a,o,l){const c=[],h=[t,i],d=[0,0];for(;e.length>0;){const{str:i}=this.textMeasure.clipTextWithSuffix(e,this.textOptions,t,a,o,l);c.push({str:i,width:this.textMeasure.measureTextWidth(i,this.textOptions)}),e=e.substring(i.length)}"left"===n||"start"===n||("center"===n?d[0]=h[0]/-2:"right"!==n&&"end"!==n||(d[0]=-h[0])),"top"===r||("middle"===r?d[1]=h[1]/-2:"bottom"===r&&(d[1]=-h[1]));const u={xOffset:d[0],yOffset:d[1],width:h[0],height:h[1]};return this.layoutWithBBox(u,c,n,r,s)}GetLayoutByLines(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"end";e=e.map((e=>e.toString()));const l=[],c=[0,0];if("number"==typeof a&&a!==1/0){let t;for(let i=0,n=e.length;i<n;i++)t=Math.min(this.textMeasure.measureTextWidth(e[i],this.textOptions),a),l.push({str:this.textMeasure.clipTextWithSuffix(e[i],this.textOptions,t,r,s,o).str,width:t});c[0]=a}else{let t,i;a=0;for(let n=0,r=e.length;n<r;n++)i=e[n],t=this.textMeasure.measureTextWidth(i,this.textOptions),a=Math.max(a,t),l.push({str:i,width:t});c[0]=a}c[1]=l.length*n,c[0]=l.reduce(((e,t)=>Math.max(e,t.width)),0);const h={xOffset:0,yOffset:0,width:c[0],height:c[1]};return this.LayoutBBox(h,t,i),this.layoutWithBBox(h,l,t,i,n)}layoutWithBBox(e,t,i,n,r){const s=[0,0],a=t.length*r;"top"===n||("middle"===n?s[1]=(e.height-a)/2:"bottom"===n&&(s[1]=e.height-a));for(let o=0;o<t.length;o++)this.lineOffset(e,t[o],i,n,r,s);return{bbox:e,lines:t,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:r,textAlign:i,textBaseline:n}}lineOffset(e,t,i,n,r,s){return"left"===i||"start"===i?t.leftOffset=0:"center"===i?t.leftOffset=(e.width-t.width)/2:"right"!==i&&"end"!==i||(t.leftOffset=e.width-t.width),t.topOffset=(r-this.textOptions.fontSize)/2+.79*this.textOptions.fontSize+s[1],s[1]+=r,t}}function o_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;i||(i=1);const{fontStyle:n=t.fontStyle,fontVariant:r=t.fontVariant,fontWeight:s=t.fontWeight,fontSize:a=t.fontSize,fontFamily:o=t.fontFamily}=e;return(n?n+" ":"")+(r?r+" ":"")+(s?s+" ":"")+a*i+"px "+(o||"sans-serif")}function l_(e,t){return"end"===e||"right"===e?-t:"center"===e?-t/2:0}function c_(e,t,i){return"middle"===e?-t/2:"top"===e?0:"bottom"===e?(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)-t:e&&"alphabetic"!==e?0:(i||(i=t),-(t-i)/2-.79*i)}const h_=["text","maxLineWidth","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp",...gd];class d_ extends _d{get font(){const e=jh(this).text;return this._font||(this._font=o_(this.attribute,e)),this._font}get clipedText(){var e;const t=this.attribute,i=jh(this).text;if(!this.isSimplify())return;const{maxLineWidth:n=i.maxLineWidth}=t;return Number.isFinite(n)?(this.tryUpdateAABBBounds(),this.cache.clipedText):(null!==(e=t.text)&&void 0!==e?e:i.text).toString()}get clipedWidth(){if(this.isSimplify())return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){const e=jh(this).text,t=this.attribute;if(this.isMultiLine)return;const{maxLineWidth:i=e.maxLineWidth}=t;return!!Number.isFinite(i)&&(this.tryUpdateAABBBounds(),"vertical"===t.direction&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map((e=>e.text)).join("")!==t.text.toString():null!=this.clipedText&&this.clipedText!==t.text.toString())}get multilineLayout(){if(this.isMultiLine)return this.tryUpdateAABBBounds(),this.cache.layoutData}isSimplify(){return!this.isMultiLine&&"vertical"!==this.attribute.direction}get isMultiLine(){return Array.isArray(this.attribute.text)||"normal"===this.attribute.whiteSpace}constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:"",fontSize:16}),this.type="text",this.numberType=su,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{text:e}=this.attribute;return v(e)?!e.every((e=>null==e||""===e)):null!=e&&""!==e}doUpdateAABBBounds(){const e=jh(this).text;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const t=this.attribute,i=se.graphicService.updateTextAABBBounds(t,e,this._AABBBounds,this),{boundsPadding:n=e.boundsPadding}=this.attribute,r=Cd(n);return r&&i.expand(r),this.clearUpdateBoundTag(),i}updateWrapAABBBounds(e){var t,i,n,r;const s=jh(this).text,{fontFamily:a=s.fontFamily,textAlign:o=s.textAlign,textBaseline:l=s.textBaseline,fontSize:c=s.fontSize,ellipsis:h=s.ellipsis,maxLineWidth:d,stroke:u=s.stroke,lineWidth:p=s.lineWidth,wordBreak:g=s.wordBreak,fontWeight:f=s.fontWeight,ignoreBuf:m=s.ignoreBuf,suffixPosition:y=s.suffixPosition,heightLimit:b=0,lineClamp:_}=this.attribute,x=null!==(t=Dd(this.attribute.lineHeight,this.attribute.fontSize||s.fontSize))&&void 0!==t?t:this.attribute.fontSize||s.fontSize,S=m?0:2;if(!this.shouldUpdateShape()&&(null===(i=this.cache)||void 0===i?void 0:i.layoutData)){const e=this.cache.layoutData.bbox;return this._AABBBounds.set(e.xOffset,e.yOffset,e.xOffset+e.width,e.yOffset+e.height),u&&this._AABBBounds.expand(p/2),this._AABBBounds}const w=se.graphicUtil.textMeasure,C=new a_(a,{fontSize:c,fontWeight:f,fontFamily:a},w),k=v(e)?e.map((e=>e.toString())):[e.toString()],A=[],E=[0,0];let T=1/0;if(b>0&&(T=Math.max(Math.floor(b/x),1)),_&&(T=Math.min(T,_)),"number"==typeof d&&d!==1/0){if(d>0)for(let t=0;t<k.length;t++){const e=k[t];let i=!0;if(t===T-1){const t=C.textMeasure.clipTextWithSuffix(e,C.textOptions,d,h,!1,y);A.push({str:t.str,width:t.width});break}const s=C.textMeasure.clipText(e,C.textOptions,d,"break-word"===g);if(""!==e&&""===s.str){if(h){const t=C.textMeasure.clipTextWithSuffix(e,C.textOptions,d,h,!1,y);s.str=null!==(n=t.str)&&void 0!==n?n:"",s.width=null!==(r=t.width)&&void 0!==r?r:0}else s.str="",s.width=0;i=!1}if(A.push({str:s.str,width:s.width}),s.str.length===e.length);else if(i){const i=e.substring(s.str.length);k.splice(t+1,0,i)}}let e=0;A.forEach((t=>{e=Math.max(e,t.width)})),E[0]=e}else{let e,t,i=0;for(let n=0,r=k.length;n<r;n++){if(n===T-1){const e=C.textMeasure.clipTextWithSuffix(k[n],C.textOptions,d,h,!1,y);A.push({str:e.str,width:e.width}),i=Math.max(i,e.width);break}t=k[n],e=C.textMeasure.measureTextWidth(t,C.textOptions,"break-word"===g),i=Math.max(i,e),A.push({str:t,width:e})}E[0]=i}E[1]=A.length*(x+S);const O={xOffset:0,yOffset:0,width:E[0],height:E[1]};C.LayoutBBox(O,o,l);const P=C.layoutWithBBox(O,A,o,l,x);return this.cache.layoutData=P,this.clearUpdateShapeTag(),this._AABBBounds.set(O.xOffset,O.yOffset,O.xOffset+O.width,O.yOffset+O.height),u&&this._AABBBounds.expand(p/2),this._AABBBounds}updateSingallineAABBBounds(e){const t=jh(this).text,{direction:i=t.direction}=this.attribute;return"horizontal"===i?this.updateHorizontalSinglelineAABBBounds(e):this.updateVerticalSinglelineAABBBounds(e)}updateMultilineAABBBounds(e){const t=jh(this).text,{direction:i=t.direction}=this.attribute;return"horizontal"===i?this.updateHorizontalMultilineAABBBounds(e):this.updateVerticalMultilineAABBBounds(e)}updateHorizontalSinglelineAABBBounds(e){var t,i;const n=jh(this).text,{wrap:r=n.wrap}=this.attribute;if(r)return this.updateWrapAABBBounds([e]);const s=se.graphicUtil.textMeasure;let a,o;const l=this.attribute,{maxLineWidth:c=n.maxLineWidth,ellipsis:h=n.ellipsis,textAlign:d=n.textAlign,textBaseline:u=n.textBaseline,fontFamily:p=n.fontFamily,fontSize:g=n.fontSize,fontWeight:f=n.fontWeight,stroke:m=n.stroke,lineWidth:v=n.lineWidth,ignoreBuf:y=n.ignoreBuf,whiteSpace:b=n.whiteSpace,suffixPosition:_=n.suffixPosition}=l;if("normal"===b)return this.updateWrapAABBBounds(e);const x=y?0:Math.max(2,.075*g),S=l.fontSize||n.fontSize,w=null!==(t=Dd(l.lineHeight,S))&&void 0!==t?t:S+x;if(!this.shouldUpdateShape()&&this.cache){a=null!==(i=this.cache.clipedWidth)&&void 0!==i?i:0;const e=l_(d,a),t=c_(u,w,g);return this._AABBBounds.set(e,t,e+a,t+w),m&&this._AABBBounds.expand(v/2),this._AABBBounds}if(Number.isFinite(c)){if(h){const t=!0===h?n.ellipsis:h,i=s.clipTextWithSuffix(e.toString(),{fontSize:g,fontWeight:f,fontFamily:p},c,t,!1,_);o=i.str,a=i.width}else{const t=s.clipText(e.toString(),{fontSize:g,fontWeight:f,fontFamily:p},c,!1);o=t.str,a=t.width}this.cache.clipedText=o,this.cache.clipedWidth=a}else a=s.measureTextWidth(e.toString(),{fontSize:g,fontWeight:f,fontFamily:p}),this.cache.clipedText=e.toString(),this.cache.clipedWidth=a;this.clearUpdateShapeTag();const C=l_(d,a);let k=w;se.global&&se.global.isSafari()&&(k+=.2*g);const A=c_(u,k,g,x);return this._AABBBounds.set(C,A,C+a,A+k),m&&this._AABBBounds.expand(v/2),this._AABBBounds}getBaselineMapAlign(){return d_.baselineMapAlign}getAlignMapBaseline(){return d_.alignMapBaseline}updateVerticalSinglelineAABBBounds(e){var t,i,n;const r=jh(this).text,s=se.graphicUtil.textMeasure;let a;const o=this.attribute,{ignoreBuf:l=r.ignoreBuf}=o,c=l?0:2,{maxLineWidth:h=r.maxLineWidth,ellipsis:d=r.ellipsis,fontSize:u=r.fontSize,fontWeight:p=r.fontWeight,fontFamily:g=r.fontFamily,stroke:f=r.stroke,lineWidth:m=r.lineWidth,verticalMode:v=r.verticalMode,suffixPosition:y=r.suffixPosition}=o,b=null!==(t=Dd(o.lineHeight,o.fontSize||r.fontSize))&&void 0!==t?t:(o.fontSize||r.fontSize)+c;let{textAlign:_=r.textAlign,textBaseline:x=r.textBaseline}=o;if(!v){const e=_;_=null!==(i=d_.baselineMapAlign[x])&&void 0!==i?i:"left",x=null!==(n=d_.alignMapBaseline[e])&&void 0!==n?n:"top"}if(!this.shouldUpdateShape()&&this.cache){a=this.cache.clipedWidth;const e=l_(_,a),t=c_(x,b,u);return this._AABBBounds.set(t,e,t+b,e+a),f&&this._AABBBounds.expand(m/2),this._AABBBounds}let S=[zd(e.toString())];if(Number.isFinite(h)){if(d){const e=!0===d?r.ellipsis:d,t=s.clipTextWithSuffixVertical(S[0],{fontSize:u,fontWeight:p,fontFamily:g},h,e,!1,y);S=[t.verticalList],a=t.width}else{const e=s.clipTextVertical(S[0],{fontSize:u,fontWeight:p,fontFamily:g},h,!1);S=[e.verticalList],a=e.width}this.cache.verticalList=S,this.cache.clipedWidth=a}else a=0,S[0].forEach((e=>{const t=e.direction===Nd.HORIZONTAL?u:s.measureTextWidth(e.text,{fontSize:u,fontWeight:p,fontFamily:g});a+=t,e.width=t})),this.cache.verticalList=S,this.cache.clipedWidth=a;this.clearUpdateShapeTag();const w=l_(_,a),C=c_(x,b,u);return this._AABBBounds.set(C,w,C+b,w+a),f&&this._AABBBounds.expand(m/2),this._AABBBounds}updateHorizontalMultilineAABBBounds(e){var t,i;const n=jh(this).text,{wrap:r=n.wrap}=this.attribute;if(r)return this.updateWrapAABBBounds(e);const s=this.attribute,{fontFamily:a=n.fontFamily,textAlign:o=n.textAlign,textBaseline:l=n.textBaseline,fontSize:c=n.fontSize,fontWeight:h=n.fontWeight,ellipsis:d=n.ellipsis,maxLineWidth:u,stroke:p=n.stroke,lineWidth:g=n.lineWidth,whiteSpace:f=n.whiteSpace,suffixPosition:m=n.suffixPosition}=s,v=null!==(t=Dd(s.lineHeight,s.fontSize||n.fontSize))&&void 0!==t?t:s.fontSize||n.fontSize;if("normal"===f)return this.updateWrapAABBBounds(e);if(!this.shouldUpdateShape()&&(null===(i=this.cache)||void 0===i?void 0:i.layoutData)){const e=this.cache.layoutData.bbox;return this._AABBBounds.set(e.xOffset,e.yOffset,e.xOffset+e.width,e.yOffset+e.height),p&&this._AABBBounds.expand(g/2),this._AABBBounds}const y=se.graphicUtil.textMeasure,b=new a_(a,{fontSize:c,fontWeight:h,fontFamily:a},y).GetLayoutByLines(e,o,l,v,!0===d?n.ellipsis:d||void 0,!1,u,m),{bbox:_}=b;return this.cache.layoutData=b,this.clearUpdateShapeTag(),this._AABBBounds.set(_.xOffset,_.yOffset,_.xOffset+_.width,_.yOffset+_.height),p&&this._AABBBounds.expand(g/2),this._AABBBounds}updateVerticalMultilineAABBBounds(e){var t,i,n;const r=jh(this).text,s=se.graphicUtil.textMeasure;let a;const o=this.attribute,{ignoreBuf:l=r.ignoreBuf}=o,c=l?0:2,{maxLineWidth:h=r.maxLineWidth,ellipsis:d=r.ellipsis,fontFamily:u=r.fontFamily,fontSize:p=r.fontSize,fontWeight:g=r.fontWeight,stroke:f=r.stroke,lineWidth:m=r.lineWidth,verticalMode:v=r.verticalMode,suffixPosition:y=r.suffixPosition}=o,b=null!==(t=Dd(o.lineHeight,o.fontSize||r.fontSize))&&void 0!==t?t:(o.fontSize||r.fontSize)+c;let{textAlign:_=r.textAlign,textBaseline:x=r.textBaseline}=o;if(!v){const e=_;_=null!==(i=d_.baselineMapAlign[x])&&void 0!==i?i:"left",x=null!==(n=d_.alignMapBaseline[e])&&void 0!==n?n:"top"}if(a=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach((e=>{const t=e.reduce(((e,t)=>e+t.width),0);a=Wn(t,a)}));const e=l_(_,a),t=this.cache.verticalList.length*b,i=c_(x,t,p);return this._AABBBounds.set(i,e,i+t,e+a),f&&this._AABBBounds.expand(m/2),this._AABBBounds}const S=e.map((e=>zd(e.toString())));S.forEach(((e,t)=>{if(Number.isFinite(h))if(d){const i=!0===d?r.ellipsis:d,n=s.clipTextWithSuffixVertical(e,{fontSize:p,fontWeight:g,fontFamily:u},h,i,!1,y);S[t]=n.verticalList,a=n.width}else{const i=s.clipTextVertical(e,{fontSize:p,fontWeight:g,fontFamily:u},h,!1);S[t]=i.verticalList,a=i.width}else a=0,e.forEach((e=>{const t=e.direction===Nd.HORIZONTAL?p:s.measureTextWidth(e.text,{fontSize:p,fontWeight:g,fontFamily:u});a+=t,e.width=t}))})),this.cache.verticalList=S,this.clearUpdateShapeTag(),this.cache.verticalList.forEach((e=>{const t=e.reduce(((e,t)=>e+t.width),0);a=Wn(t,a)}));const w=l_(_,a),C=this.cache.verticalList.length*b,k=c_(x,C,p);return this._AABBBounds.set(k,w,k+C,w+a),f&&this._AABBBounds.expand(m/2),this._AABBBounds}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}getDefaultAttribute(e){return jh(this).text[e]}needUpdateTags(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h_;return super.needUpdateTags(e,t)}needUpdateTag(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h_;return super.needUpdateTag(e,t)}clone(){return new d_(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d_.NOWORK_ANIMATE_ATTR}}function u_(e){return new d_(e)}d_.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},bd),d_.baselineMapAlign={top:"left",bottom:"right",middle:"center"},d_.alignMapBaseline={left:"top",right:"bottom",center:"middle"};const p_=["heightLimit","lineClamp"];class g_ extends d_{constructor(e){super(Object.assign(Object.assign({},e),{wrap:!0}))}_isValid(){const{text:e}=this.attribute;return v(e)?!e.every((e=>null==e||""===e)):null!=e&&""!==e}updateMultilineAABBBounds(e){var t,i,n,r;const s=jh(this).text,{fontFamily:a=s.fontFamily,textAlign:o=s.textAlign,textBaseline:l=s.textBaseline,fontSize:c=s.fontSize,ellipsis:h=s.ellipsis,maxLineWidth:d,stroke:u=s.stroke,lineWidth:p=s.lineWidth,wordBreak:g=s.wordBreak,fontWeight:f=s.fontWeight,ignoreBuf:m=s.ignoreBuf,heightLimit:v=0,suffixPosition:y=s.suffixPosition,lineClamp:b}=this.attribute,_=null!==(t=Dd(this.attribute.lineHeight,this.attribute.fontSize||s.fontSize))&&void 0!==t?t:this.attribute.fontSize||s.fontSize,x=m?0:2;if(!this.shouldUpdateShape()&&(null===(i=this.cache)||void 0===i?void 0:i.layoutData)){const e=this.cache.layoutData.bbox;return this._AABBBounds.set(e.xOffset,e.yOffset,e.xOffset+e.width,e.yOffset+e.height),u&&this._AABBBounds.expand(p/2),this._AABBBounds}const S=se.graphicUtil.textMeasure,w=new a_(a,{fontSize:c,fontWeight:f,fontFamily:a},S),C=e.map((e=>e.toString())),k=[],A=[0,0];let E=1/0;if(v>0&&(E=Math.max(Math.floor(v/_),1)),b&&(E=Math.min(E,b)),"number"==typeof d&&d!==1/0){if(d>0)for(let t=0;t<C.length;t++){const e=C[t];let i=!0;if(t===E-1){const t=w.textMeasure.clipTextWithSuffix(e,w.textOptions,d,h,!1,y);k.push({str:t.str,width:t.width});break}const s=w.textMeasure.clipText(e,w.textOptions,d,"break-word"===g);if(""!==e&&""===s.str){if(h){const t=w.textMeasure.clipTextWithSuffix(e,w.textOptions,d,h,!1,y);s.str=null!==(n=t.str)&&void 0!==n?n:"",s.width=null!==(r=t.width)&&void 0!==r?r:0}else s.str="",s.width=0;i=!1}if(k.push({str:s.str,width:s.width}),s.str.length===e.length);else if(i){const i=e.substring(s.str.length);C.splice(t+1,0,i)}}let e=0;k.forEach((t=>{e=Math.max(e,t.width)})),A[0]=e}else{let e,t,i=0;for(let n=0,r=C.length;n<r;n++){if(n===E-1){const e=w.textMeasure.clipTextWithSuffix(C[n],w.textOptions,d,h,!1,y);k.push({str:e.str,width:e.width}),i=Math.max(i,e.width);break}t=C[n],e=w.textMeasure.measureTextWidth(t,w.textOptions,"break-word"===g),i=Math.max(i,e),k.push({str:t,width:e})}A[0]=i}A[1]=k.length*(_+x);const T={xOffset:0,yOffset:0,width:A[0],height:A[1]};w.LayoutBBox(T,o,l);const O=w.layoutWithBBox(T,k,o,l,_);return this.cache.layoutData=O,this.clearUpdateShapeTag(),this._AABBBounds.set(T.xOffset,T.yOffset,T.xOffset+T.width,T.yOffset+T.height),u&&this._AABBBounds.expand(p/2),this._AABBBounds}needUpdateTags(e){for(let t=0;t<p_.length;t++){const i=p_[t];if(-1!==e.indexOf(i))return!0}return super.needUpdateTags(e)}needUpdateTag(e){for(let t=0;t<p_.length;t++)if(e===p_[t])return!0;return super.needUpdateTag(e)}getNoWorkAnimateAttr(){return g_.NOWORK_ANIMATE_ATTR}}function f_(e){return new g_(e)}function m_(){m_.__loaded||(m_.__loaded=!0,bp.RegisterGraphicCreator("wrapText",f_))}m_.__loaded=!1;const v_=m_;class y_{bounds(e,t){if(l(e)){const i=e/2;t.x1=-i,t.x2=i,t.y1=-i,t.y2=i}else t.x1=-e[0]/2,t.x2=e[0]/2,t.y1=-e[1]/2,t.y2=e[1]/2}}function b_(e,t,i,n,r){return r?e.arc(i,n,t,0,Nn,!1,r):e.arc(i,n,t,0,Nn),!1}const __=new class extends y_{constructor(){super(...arguments),this.type="circle",this.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0"}draw(e,t,i,n,r){return b_(e,t/2,i,n,r)}drawOffset(e,t,i,n,r,s){return b_(e,t/2+r,i,n,s)}drawToSvgPath(e,t,i,n){const r=e/2;return"M ".concat(t-r,", ").concat(i," a ").concat(r,",").concat(r," 0 1,0 ").concat(2*r,",0 a ").concat(r,",").concat(r," 0 1,0 -").concat(2*r,",0")}};const x_=new class extends y_{constructor(){super(...arguments),this.type="cross",this.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z"}draw(e,t,i,n,r){return function(e,t,i,n,r){return e.moveTo(-3*t+i,-t+n,r),e.lineTo(-t+i,-t+n,r),e.lineTo(-t+i,-3*t+n,r),e.lineTo(t+i,-3*t+n,r),e.lineTo(t+i,-t+n,r),e.lineTo(3*t+i,-t+n,r),e.lineTo(3*t+i,t+n,r),e.lineTo(t+i,t+n,r),e.lineTo(t+i,3*t+n,r),e.lineTo(-t+i,3*t+n,r),e.lineTo(-t+i,t+n,r),e.lineTo(-3*t+i,t+n,r),e.closePath(),!0}(e,t/6,i,n,r)}drawOffset(e,t,i,n,r,s){return function(e,t,i,n,r,s){return e.moveTo(-3*t+i-r,-t+n-r,s),e.lineTo(-t+i-r,-t+n-r,s),e.lineTo(-t+i-r,-3*t+n-r,s),e.lineTo(t+i+r,-3*t+n-r,s),e.lineTo(t+i+r,-t+n-r,s),e.lineTo(3*t+i+r,-t+n-r,s),e.lineTo(3*t+i+r,t+n+r,s),e.lineTo(t+i+r,t+n+r,s),e.lineTo(t+i+r,3*t+n+r,s),e.lineTo(-t+i-r,3*t+n+r,s),e.lineTo(-t+i-r,t+n+r,s),e.lineTo(-3*t+i-r,t+n+r,s),e.closePath(),!0}(e,t/6,i,n,r,s)}};function S_(e,t,i,n,r){return e.moveTo(i,n-t,r),e.lineTo(t+i,n,r),e.lineTo(i,n+t,r),e.lineTo(i-t,n,r),e.closePath(),!0}const w_=new class extends y_{constructor(){super(...arguments),this.type="diamond",this.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z"}draw(e,t,i,n,r){return S_(e,t/2,i,n,r)}drawFitDir(e,t,i,n,r){return S_(e,t/2,i,n,r)}drawOffset(e,t,i,n,r,s){return S_(e,t/2+r,i,n,s)}};function C_(e,t,i,n){const r=2*t;return e.rect(i-t,n-t,r,r),!1}const k_=new class extends y_{constructor(){super(...arguments),this.type="square",this.pathStr="M-0.5,-0.5h1v1h-1Z"}draw(e,t,i,n){return C_(e,t/2,i,n)}drawOffset(e,t,i,n,r){return C_(e,t/2+r,i,n)}};class A_ extends y_{constructor(){super(...arguments),this.type="triangleUp",this.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z"}draw(e,t,i,n){return function(e,t,i,n){return e.moveTo(i+t,t+n),e.lineTo(i-t,t+n),e.lineTo(i,n-t),e.closePath(),!0}(e,t/2,i,n)}drawOffset(e,t,i,n,r){return function(e,t,i,n,r){return e.moveTo(i+t+2*r,t+n+r),e.lineTo(i-t-2*r,t+n+r),e.lineTo(i,n-t-2*r),e.closePath(),!0}(e,t/2,i,n,r)}}const E_=new A_;const T_=new class extends A_{constructor(){super(...arguments),this.type="triangle"}},O_=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),P_=Math.sin(Nn/10)*O_,M_=-Math.cos(Nn/10)*O_;function I_(e,t,i,n){const r=P_*t,s=M_*t;e.moveTo(i,-t+n),e.lineTo(r+i,s+n);for(let a=1;a<5;++a){const o=Nn*a/5,l=Math.cos(o),c=Math.sin(o);e.lineTo(c*t+i,-l*t+n),e.lineTo(l*r-c*s+i,c*r+l*s+n)}return e.closePath(),!0}const R_=new class extends y_{constructor(){super(...arguments),this.type="star",this.pathStr="M4.51351666838205,0A4.51351666838205,4.51351666838205,0,1,1,-4.51351666838205,0A4.51351666838205,4.51351666838205,0,1,1,4.51351666838205,0"}draw(e,t,i,n){return I_(e,t/2,i,n)}drawOffset(e,t,i,n,r){return I_(e,t/2+r,i,n)}},D_=Yn(3);function L_(e,t,i,n){const r=t,s=r/D_,a=s/5,o=t;return e.moveTo(0+i,-r+n),e.lineTo(s/2+i,n),e.lineTo(a/2+i,n),e.lineTo(a/2+i,o+n),e.lineTo(-a/2+i,o+n),e.lineTo(-a/2+i,n),e.lineTo(-s/2+i,n),e.closePath(),!0}const j_=new class extends y_{constructor(){super(...arguments),this.type="arrow",this.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z"}draw(e,t,i,n){return L_(e,t/2,i,n)}drawOffset(e,t,i,n,r){return L_(e,t/2+r,i,n)}};function F_(e,t,i,n){const r=2*t;return e.moveTo(i,-t+n),e.lineTo(r/3/2+i,t+n),e.lineTo(-r/3/2+i,t+n),e.closePath(),!0}const B_=new class extends y_{constructor(){super(...arguments),this.type="wedge",this.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z"}draw(e,t,i,n){return F_(e,t/2,i,n)}drawOffset(e,t,i,n,r){return F_(e,t/2+r,i,n)}};function N_(e,t,i,n){return e.moveTo(-t+i,n),e.lineTo(i,t+n),!1}const z_=new class extends y_{constructor(){super(...arguments),this.type="stroke",this.pathStr=""}draw(e,t,i,n){return N_(e,t/2,i,n)}drawOffset(e,t,i,n,r){return N_(e,t/2+r,i,n)}},H_=-.5,V_=Yn(3)/2,U_=1/Yn(12);function W_(e,t,i,n){const r=t/2,s=t*U_,a=r,o=t*U_+t,l=-a,c=o;return e.moveTo(r+i,s+n),e.lineTo(a+i,o+n),e.lineTo(l+i,c+n),e.lineTo(H_*r-V_*s+i,V_*r+H_*s+n),e.lineTo(H_*a-V_*o+i,V_*a+H_*o+n),e.lineTo(H_*l-V_*c+i,V_*l+H_*c+n),e.lineTo(H_*r+V_*s+i,H_*s-V_*r+n),e.lineTo(H_*a+V_*o+i,H_*o-V_*a+n),e.lineTo(H_*l+V_*c+i,H_*c-V_*l+n),e.closePath(),!1}const G_=new class extends y_{constructor(){super(...arguments),this.type="wye",this.pathStr="M4.51351666838205,0A4.51351666838205,4.51351666838205,0,1,1,-4.51351666838205,0A4.51351666838205,4.51351666838205,0,1,1,4.51351666838205,0"}draw(e,t,i,n){return W_(e,t/2,i,n)}drawOffset(e,t,i,n,r){return W_(e,t/2+r,i,n)}};const K_=new class extends y_{constructor(){super(...arguments),this.type="triangleLeft",this.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z"}draw(e,t,i,n){return function(e,t,i,n){return e.moveTo(-t+i,n),e.lineTo(t+i,t+n),e.lineTo(t+i,n-t),e.closePath(),!0}(e,t/2,i,n)}drawOffset(e,t,i,n,r){return function(e,t,i,n,r){return e.moveTo(-t+i-2*r,n),e.lineTo(t+i+r,t+n+2*r),e.lineTo(t+i+r,n-t-2*r),e.closePath(),!0}(e,t/2,i,n,r)}};const Y_=new class extends y_{constructor(){super(...arguments),this.type="triangleRight",this.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z"}draw(e,t,i,n){return function(e,t,i,n){return e.moveTo(i-t,t+n),e.lineTo(t+i,n),e.lineTo(i-t,n-t),e.closePath(),!0}(e,t/2,i,n)}drawOffset(e,t,i,n,r){return function(e,t,i,n,r){return e.moveTo(i-t-r,t+n+2*r),e.lineTo(t+i+2*r,n),e.lineTo(i-t-r,n-t-2*r),e.closePath(),!0}(e,t/2,i,n,r)}};const X_=new class extends y_{constructor(){super(...arguments),this.type="triangleDown",this.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z"}draw(e,t,i,n){return function(e,t,i,n){return e.moveTo(i-t,n-t),e.lineTo(i+t,n-t),e.lineTo(i,n+t),e.closePath(),!0}(e,t/2,i,n)}drawOffset(e,t,i,n,r){return function(e,t,i,n,r){return e.moveTo(i-t-2*r,n-t-r),e.lineTo(i+t+2*r,n-t-r),e.lineTo(i,n+t+2*r),e.closePath(),!0}(e,t/2,i,n,r)}},q_=Yn(3);function Z_(e,t,i,n){const r=t*q_;return e.moveTo(i,n+-r/3*2),e.lineTo(t+i,n+r),e.lineTo(i-t,n+r),e.closePath(),!0}const Q_=new class extends A_{constructor(){super(...arguments),this.type="thinTriangle",this.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z"}draw(e,t,i,n){return Z_(e,t/2/q_,i,n)}drawOffset(e,t,i,n,r){return Z_(e,t/2/q_+r,i,n)}};function $_(e,t,i,n){const r=2*t;return e.moveTo(t+i,n-r),e.lineTo(i-t,n),e.lineTo(t+i,r+n),!0}const J_=new class extends y_{constructor(){super(...arguments),this.type="arrow2Left",this.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5"}draw(e,t,i,n){return $_(e,t/4,i,n)}drawOffset(e,t,i,n,r){return $_(e,t/4+r,i,n)}};function ex(e,t,i,n){const r=2*t;return e.moveTo(i-t,n-r),e.lineTo(i+t,n),e.lineTo(i-t,r+n),!0}const tx=new class extends y_{constructor(){super(...arguments),this.type="arrow2Right",this.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5"}draw(e,t,i,n){return ex(e,t/4,i,n)}drawOffset(e,t,i,n,r){return ex(e,t/4+r,i,n)}};function ix(e,t,i,n){const r=2*t;return e.moveTo(i-r,n+t),e.lineTo(i,n-t),e.lineTo(i+r,n+t),!0}const nx=new class extends y_{constructor(){super(...arguments),this.type="arrow2Up",this.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25"}draw(e,t,i,n){return ix(e,t/4,i,n)}drawOffset(e,t,i,n,r){return ix(e,t/4+r,i,n)}};function rx(e,t,i,n){const r=2*t;return e.moveTo(i-r,n-t),e.lineTo(i,n+t),e.lineTo(i+r,n-t),!0}const sx=new class extends y_{constructor(){super(...arguments),this.type="arrow2Down",this.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25"}draw(e,t,i,n){return rx(e,t/4,i,n)}drawOffset(e,t,i,n,r){return rx(e,t/4+r,i,n)}};function ax(e,t,i,n,r){return e.moveTo(i,n-t),e.lineTo(i,n+t),!0}const ox=new class extends y_{constructor(){super(...arguments),this.type="lineV",this.pathStr="M0,-0.5L0,0.5"}draw(e,t,i,n,r){return ax(e,t/2,i,n)}drawOffset(e,t,i,n,r,s){return ax(e,t/2+r,i,n)}drawToSvgPath(e,t,i,n){const r=e/2;return"M ".concat(t,", ").concat(i-r," L ").concat(t,",").concat(i+r)}};function lx(e,t,i,n,r){return e.moveTo(i-t,n),e.lineTo(i+t,n),!0}const cx=new class extends y_{constructor(){super(...arguments),this.type="lineH",this.pathStr="M-0.5,0L0.5,0"}draw(e,t,i,n,r){return lx(e,t/2,i,n)}drawOffset(e,t,i,n,r,s){return lx(e,t/2+r,i,n)}drawToSvgPath(e,t,i,n){const r=e/2;return"M ".concat(t-r,", ").concat(i," L ").concat(t+r,",").concat(i)}};function hx(e,t,i,n,r){return e.moveTo(i-t,n-t),e.lineTo(i+t,n+t),e.moveTo(i+t,n-t),e.lineTo(i-t,n+t),!0}const dx=new class extends y_{constructor(){super(...arguments),this.type="close",this.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5"}draw(e,t,i,n,r){return hx(e,t/2,i,n)}drawOffset(e,t,i,n,r,s){return hx(e,t/2+r,i,n)}drawToSvgPath(e,t,i,n){const r=e/2;return"M ".concat(t-r,", ").concat(i-r," L ").concat(t+r,",").concat(i+r," M ").concat(t+r,", ").concat(i-r," L ").concat(t-r,",").concat(i+r)}};function ux(e,t,i,n){return e.rect(i-t[0]/2,n-t[1]/2,t[0],t[1]),!1}function px(e,t,i,n){const r=t,s=t/2;return e.rect(i-r/2,n-s/2,r,s),!1}const gx=new class extends y_{constructor(){super(...arguments),this.type="rect",this.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z"}draw(e,t,i,n){return l(t)?px(e,t,i,n):ux(e,t,i,n)}drawOffset(e,t,i,n,r){return l(t)?px(e,t+2*r,i,n):ux(e,[t[0]+2*r,t[1]+2*r],i,n)}},fx={};[__,x_,w_,k_,Q_,T_,R_,j_,B_,z_,G_,K_,Y_,E_,X_,J_,tx,nx,sx,gx,ox,cx,dx].forEach((e=>{fx[e.type]=e}));const mx={arrowLeft:"M 0.25 -0.5 L -0.25 0 l 0.5 0.5",arrowRight:"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5",rectRound:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",roundLine:"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"},vx=new hl;class yx{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.pathStr="",this.type=e,v(t)?this.svgCache=t:this.path=t,this.isSvg=i}drawOffset(e,t,i,n,r,s,a){return this.isSvg?!!this.svgCache&&(this.svgCache.forEach((r=>{e.beginPath(),Dl(r.path.commandList,e,i,n,t,t),a&&a(r.path,r.attribute)})),!1):(Dl(this.path.commandList,e,i,n,t+r,t+r),!1)}draw(e,t,i,n,r,s){return this.isSvg?!!this.svgCache&&(this.svgCache.forEach((r=>{e.beginPath(),Dl(r.path.commandList,e,i,n,t,t),s&&s(r.path,r.attribute)})),!1):(Dl(this.path.commandList,e,i,n,t,t),!1)}bounds(e,t){if(this.isSvg){if(!this.svgCache)return;return t.clear(),void this.svgCache.forEach((i=>{let{path:n}=i;vx.x1=n.bounds.x1*e,vx.y1=n.bounds.y1*e,vx.x2=n.bounds.x2*e,vx.y2=n.bounds.y2*e,t.union(vx)}))}this.path.bounds&&(t.x1=this.path.bounds.x1*e,t.y1=this.path.bounds.y1*e,t.x2=this.path.bounds.x2*e,t.y2=this.path.bounds.y2*e)}}class bx{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}function _x(e,t,i,n){const r=e.indexOf(t,i);if(-1===r)throw new Error(n);return r+t.length-1}function xx(e,t,i){const n=function(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:">",r="";for(let s=t;s<e.length;s++){let t=e[s];if(i)t===i&&(i="");else if('"'===t||"'"===t)i=t;else if(t===n[0]){if(!n[1])return{data:r,index:s};if(e[s+1]===n[1])return{data:r,index:s}}else"\t"===t&&(t=" ");r+=t}}(e,t+1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:">");if(!n)return;let r=n.data;const s=n.index,a=r.search(/\s/);let o=r,l=!0;-1!==a&&(o=r.substr(0,a).replace(/\s\s*$/,""),r=r.substr(a+1));const c=o;if(i){const e=o.indexOf(":");-1!==e&&(o=o.substr(e+1),l=o!==n.data.substr(e+1))}return{tagName:o,tagExp:r,closeIndex:s,attrExpPresent:l,rawTagName:c}}const Sx=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");class wx{constructor(e){this.currentNode=null,this.options=e,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(e,t,i){const n=t.tagname;"string"==typeof n?(t.tagname=n,e.addChild(t)):e.addChild(t)}buildAttributesMap(e,t,i){const n={};if(!e)return;const r=function(e,t){const i=[];let n=t.exec(e);for(;n;){const r=[];r.startIndex=t.lastIndex-n[0].length;const s=n.length;for(let e=0;e<s;e++)r.push(n[e]);i.push(r),n=t.exec(e)}return i}(e,Sx),s=r.length;for(let a=0;a<s;a++){const e=r[a][1],t=r[a][4];e&&(n[e]=void 0===t||(isNaN(t)?t:Number(t)))}return n}parseXml(e){e=e.replace(/\r\n?/g,"\n");const t=new bx("!xml");let i=t,n="",r="";for(let s=0;s<e.length;s++)if("<"===e[s])if("/"===e[s+1]){const t=_x(e,">",s,"Closing Tag is not closed."),a=r.lastIndexOf(".");r=r.substring(0,a),i=this.tagsNodeStack.pop(),i&&i.child&&n&&i.child[i.child.length-1][":@"]&&(i.child[i.child.length-1][":@"].text=n),n="",s=t}else if("?"===e[s+1])s=xx(e,s,!1,"?>").closeIndex+1;else if("!--"===e.substr(s+1,3))s=_x(e,"--\x3e",s+4,"Comment is not closed.");else{const a=xx(e,s,!1);let o=a.tagName,l=a.tagExp;const c=a.attrExpPresent,h=a.closeIndex;if(o!==t.tagname&&(r+=r?"."+o:o),l.length>0&&l.lastIndexOf("/")===l.length-1){"/"===o[o.length-1]?(o=o.substr(0,o.length-1),r=r.substr(0,r.length-1),l=o):l=l.substr(0,l.length-1);const e=new bx(o);o!==l&&c&&(e[":@"]=this.buildAttributesMap(l,r,o)),this.addChild(i,e,r),r=r.substr(0,r.lastIndexOf("."))}else{const e=new bx(o);this.tagsNodeStack.push(i),o!==l&&c&&(e[":@"]=this.buildAttributesMap(l,r,o)),this.addChild(i,e,r),i=e}n="",s=h}else n+=e[s];return t.child}}function Cx(e,t){return kx(e)}function kx(e,t){const i={};for(let r=0;r<e.length;r++){const s=e[r],a=Ax(s);let o="";if(o=void 0===t?a:t+"."+a,void 0!==a&&s[a]){const e=kx(s[a],o);n=e,Object.keys(n).length,s[":@"]&&Ex(e,s[":@"],o),void 0!==i[a]&&i.hasOwnProperty(a)?(Array.isArray(i[a])||(i[a]=[i[a]]),i[a].push(e)):i[a]=e}}var n;return i}function Ax(e){const t=Object.keys(e);for(let i=0;i<t.length;i++){const e=t[i];if(":@"!==e)return e}}function Ex(e,t,i){if(t){const i=Object.keys(t),n=i.length;for(let r=0;r<n;r++){const n=i[r];e[n]=t[n]}}}class Tx{constructor(e){this.options=Object.assign({},Tx.defaultOptions,e)}valid(e){return e.startsWith("<")}parse(e){if(!this.valid)return!1;return Cx(new wx(this.options).parseXml(e),this.options)}}Tx.defaultOptions={};const Ox=new hl,Px=["symbolType","size",...gd];class Mx extends _d{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{symbolType:"circle"}),this.type="symbol",this.numberType=ru}getParsedPath(){return this.shouldUpdateShape()&&(this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{size:e}=this.attribute;return v(e)?2===e.length&&e.every(this._validNumber):this._validNumber(e)}doUpdateParsedPath(){const e=jh(this).symbol;let{symbolType:t=e.symbolType}=this.attribute,i=fx[t];if(i)return this._parsedPath=i,i;if(i=Mx.userSymbolMap[t],i)return this._parsedPath=i,i;if(t=mx[t]||t,!0===((n=t).startsWith("<svg")||n.startsWith("<?xml"))){const e=new Tx,{svg:i}=e.parse(t);if(!i)return null;const n=v(i.path)?i.path:[i.path];Ox.clear();const r=[];n.forEach((e=>{const t=(new dc).fromString(e.d),i={};cu.forEach((t=>{e[t]&&(i[lu[t]]=e[t])})),r.push({path:t,attribute:i}),Ox.union(t.bounds)}));const s=Ox.width(),a=Ox.height(),o=1/Wn(s,a);return r.forEach((e=>e.path.transform(0,0,o,o))),this._parsedPath=new yx(t,r,!0),Mx.userSymbolMap[t]=this._parsedPath,this._parsedPath}var n;const r=(new dc).fromString(t),s=r.bounds.width(),a=r.bounds.height(),o=1/Wn(s,a);return r.transform(0,0,o,o),this._parsedPath=new yx(t,r),Mx.userSymbolMap[t]=this._parsedPath,this._parsedPath}doUpdateAABBBounds(e){const t=jh(this).symbol;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const i=this.attribute,n=se.graphicService.updateSymbolAABBBounds(i,jh(this).symbol,this._AABBBounds,e,this),{boundsPadding:r=t.boundsPadding}=i,s=Cd(r);return s&&n.expand(s),this.clearUpdateBoundTag(),n}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}getDefaultAttribute(e){return jh(this).symbol[e]}needUpdateTags(e){return super.needUpdateTags(e,Px)}needUpdateTag(e){return super.needUpdateTag(e,Px)}toCustomPath(){const e=this.getParsedPath(),t=this.attribute.size,i=v(t)?t:[t,t];return e.path?(new dc).fromCustomPath2D(e.path,0,0,i[0],i[1]):(new dc).fromString(e.pathStr,0,0,i[0],i[1])}clone(){return new Mx(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Mx.NOWORK_ANIMATE_ATTR}}function Ix(e){return new Mx(e)}Mx.userSymbolMap={},Mx.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},bd);const Rx=new class{constructor(){this.time=Ol.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,n,r,s,a,o,l,c,h,d){const u=e.getParsedPath();if(!u)return;const{outerBorder:p,innerBorder:g}=e.attribute,f=p&&!1!==p.visible,m=g&&!1!==g.visible;if(!f&&!m)return;const{size:v=l.size,opacity:y=l.opacity,x:b=l.x,y:_=l.y,scaleX:x=l.scaleX,scaleY:S=l.scaleY}=e.attribute,w=!(!p||!p.stroke),C=!(!g||!g.stroke);if(f){const{distance:r=l.outerBorder.distance}=p,s=Sg(t,r,t.dpr);if(t.beginPath(),!1===u.drawOffset(t,v,i,n,s)&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),d)d(t,p,l.outerBorder);else if(w){const r=l.outerBorder.opacity;l.outerBorder.opacity=y,t.setStrokeStyle(e,p,(b-i)/x,(_-n)/S,l.outerBorder),l.outerBorder.opacity=r,t.stroke()}}if(m){const{distance:r=l.innerBorder.distance}=g,s=Sg(t,r,t.dpr);if(t.beginPath(),!1===u.drawOffset(t,v,i,n,-s)&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),d)d(t,g,l.innerBorder);else if(C){const r=l.innerBorder.opacity;l.innerBorder.opacity=y,t.setStrokeStyle(e,g,(b-i)/x,(_-n)/S,l.innerBorder),l.innerBorder.opacity=r,t.stroke()}}}},Dx=_f,Lx=tf;var jx=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Fx=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Bx=function(e,t){return function(i,n){t(i,n,e)}};let Nx=class extends hf{constructor(e){super(),this.symbolRenderContribitions=e,this.numberType=ru,this.builtinContributions=[Rx,Lx,Dx],this.init(e)}drawShape(e,t,i,n,r,s,a,o){var l;const c=jh(e,null==s?void 0:s.theme).symbol,{size:h=c.size,x:d=c.x,y:u=c.y,scaleX:p=c.scaleX,scaleY:g=c.scaleY}=e.attribute,f=this.valid(e,c,a,o);if(!f)return;const{fVisible:m,sVisible:y,doFill:b,doStroke:_}=f,x=e.getParsedPath();if(!x)return;const{keepDirIn3d:S=c.keepDirIn3d}=e.attribute,w=null!==(l=this.z)&&void 0!==l?l:0;if(t.beginPath(),S&&t.camera&&t.project){const r=t.project(i,n,w),s=t.camera;t.camera=null,!1===x.draw(t,v(h)?[h[0]*p,h[1]*g]:h*p,r.x,r.y,void 0,((r,s)=>{var l,h,f;if(e._parsedPath.svgCache){const t=Object.assign({},s);t.fill=null!==(l=s.fill)&&void 0!==l?l:e.attribute.fill,t.opacity=null!==(h=s.fill)&&void 0!==h?h:e.attribute.opacity,t.fillOpacity=e.attribute.fillOpacity,t.stroke=null!==(f=s.stroke)&&void 0!==f?f:e.attribute.stroke,s=t}s.fill&&(a?a(t,e.attribute,c):(t.setCommonStyle(e,s,d-i,u-n,c),t.fill())),s.stroke&&(o?o(t,e.attribute,c):(t.setStrokeStyle(e,s,(d-i)/p,(u-n)/g,c),t.stroke()))}))&&t.closePath(),t.camera=s}else!1===x.draw(t,h,i,n,w,((r,s)=>{var l,h,f;if(e._parsedPath.svgCache){const t=Object.assign({},s);t.fill=null!==(l=s.fill)&&void 0!==l?l:e.attribute.fill,t.opacity=null!==(h=s.opacity)&&void 0!==h?h:e.attribute.opacity,t.fillOpacity=e.attribute.fillOpacity,t.stroke=null!==(f=s.stroke)&&void 0!==f?f:e.attribute.stroke,s=t}s.fill&&(a?a(t,e.attribute,c):(t.setCommonStyle(e,s,d-i,u-n,c),t.fill())),s.stroke&&(o?o(t,e.attribute,c):(t.setStrokeStyle(e,s,(d-i)/p,(u-n)/g,c),t.stroke()))}))&&t.closePath();t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,c),this.beforeRenderStep(e,t,i,n,b,_,m,y,c,r,a,o),b&&!x.isSvg&&(a?a(t,e.attribute,c):m&&(t.setCommonStyle(e,e.attribute,d-i,u-n,c),t.fill())),_&&!x.isSvg&&(o?o(t,e.attribute,c):y&&(t.setStrokeStyle(e,e.attribute,(d-i)/p,(u-n)/g,c),t.stroke())),this.afterRenderStep(e,t,i,n,b,_,m,y,c,r,a,o)}draw(e,t,i,n){const r=jh(e,null==n?void 0:n.theme).symbol;this._draw(e,r,!1,i,n)}};Nx=jx([jo(),Bx(0,Ho(Uo)),Bx(0,Vo(Xg)),Fx("design:paramtypes",[Object])],Nx);let zx=!1;const Hx=new Oo((e=>{zx||(zx=!0,e(Nx).toSelf().inSingletonScope(),e(Fu).to(Nx).inSingletonScope(),e(Pu).toService(Fu),e(Xg).toService(nf),Go(e,Xg))})),Vx=le(),Ux=Symbol.for("MathPickerContribution"),Wx=Symbol.for("MathArcPicker"),Gx=Symbol.for("MathAreaPicker"),Kx=Symbol.for("MathCirclePicker"),Yx=Symbol.for("MathImagePicker"),Xx=Symbol.for("MathLinePicker"),qx=Symbol.for("MathPathPicker"),Zx=Symbol.for("MathRectPicker"),Qx=Symbol.for("MathSymbolPicker"),$x=Symbol.for("MathTextPicker"),Jx=Symbol.for("MathPolygonPicker"),eS=Symbol.for("MathGlyphPicker"),tS=Symbol.for("CanvasArcPicker"),iS=Symbol.for("CanvasArc3dPicker"),nS=Symbol.for("CanvasAreaPicker"),rS=Symbol.for("CanvasCirclePicker"),sS=Symbol.for("CanvasImagePicker"),aS=Symbol.for("CanvasLinePicker"),oS=Symbol.for("CanvasPathPicker"),lS=Symbol.for("CanvasRectPicker"),cS=Symbol.for("CanvasRect3dPicker"),hS=Symbol.for("CanvasSymbolPicker"),dS=Symbol.for("CanvasTextPicker"),uS=Symbol.for("CanvasPolygonPicker"),pS=Symbol.for("CanvasPyramid3dPicker"),gS=Symbol.for("CanvasRichTextPicker"),fS=Symbol.for("CanvasGlyphPicker"),mS=Symbol.for("CanvasGroupPicker"),vS=Symbol.for("CanvasPickerContribution");var yS=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let bS=class extends hf{};bS=yS([jo()],bS);var _S=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},xS=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},SS=function(e,t){return function(i,n){t(i,n,e)}};let wS=class extends bS{constructor(e){super(),this.canvasRenderer=e,this.type="symbol",this.numberType=ru}contains(e,t,i){const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=e.getParsedPath();if(!n.camera){if(!e.AABBBounds.containsPoint(t))return!1;if(r.isSvg||"imprecise"===e.attribute.pickMode)return!0}n.highPerformanceSave();const s=jh(e).symbol,a=this.transform(e,s,n),{x:o,y:l,z:c,lastModelMatrix:h}=a;let d=t;if(n.camera){d=t.clone();const i=e.parent.globalTransMatrix;d.x=i.a*t.x+i.c*t.y+i.e,d.y=i.b*t.x+i.d*t.y+i.f}this.canvasRenderer.z=c;let u=!1;return this.canvasRenderer.drawShape(e,n,o,l,{},null,((e,t,i)=>!!u||(u=e.isPointInPath(d.x,d.y),u)),((e,t,i)=>{if(u)return!0;const r=t.lineWidth||i.lineWidth,s=t.pickStrokeBuffer||i.pickStrokeBuffer;return n.lineWidth=Sg(n,r+s,n.dpr),u=e.isPointInStroke(d.x,d.y),u})),this.canvasRenderer.z=0,n.modelMatrix!==h&&ep.free(n.modelMatrix),n.modelMatrix=h,n.highPerformanceRestore(),u}};wS=_S([jo(),SS(0,Ho(Fu)),xS("design:paramtypes",[Object])],wS);let CS=!1;const kS=new Oo(((e,t,i,n)=>{CS||(CS=!0,e(hS).to(wS).inSingletonScope(),e(vS).toService(hS))}));var AS=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},ES=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},TS=function(e,t){return function(i,n){t(i,n,e)}};let OS=class{constructor(e){this.canvasRenderer=e,this.type="symbol",this.numberType=ru}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).symbol;let{x:s=r.x,y:a=r.y}=e.attribute;if(n.highPerformanceSave(),e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,((e,i,n)=>!!o||(o=e.isPointInPath(t.x,t.y),o)),((e,i,r)=>{if(o)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=s+a,o=e.isPointInStroke(t.x,t.y),o})),n.highPerformanceRestore(),o}};OS=AS([jo(),TS(0,Ho(Fu)),ES("design:paramtypes",[Object])],OS);let PS=!1;const MS=new Oo(((e,t,i,n)=>{PS||(PS=!0,e(Qx).to(OS).inSingletonScope(),e(Ux).toService(Qx))}));function IS(){IS.__loaded||(IS.__loaded=!0,bp.RegisterGraphicCreator("symbol",Ix),ph.load(Hx),ph.load(Vx?kS:MS))}IS.__loaded=!1;const RS=IS,DS=["width","x1","y1","height","cornerRadius",...gd];class LS extends _d{constructor(e){super(e),this.type="rect",this.numberType=tu}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}doUpdateAABBBounds(){const e=jh(this).rect;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const t=this.attribute,i=se.graphicService.updateRectAABBBounds(t,jh(this).rect,this._AABBBounds,this),{boundsPadding:n=e.boundsPadding}=t,r=Cd(n);return r&&i.expand(r),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}getDefaultAttribute(e){return jh(this).rect[e]}needUpdateTags(e){return super.needUpdateTags(e,DS)}needUpdateTag(e){return super.needUpdateTag(e,DS)}toCustomPath(){const e=this.attribute,{x:t,y:i,width:n,height:r}=vb(e),s=new dc;return s.moveTo(t,i),s.rect(t,i,n,r),s}clone(){return new LS(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return LS.NOWORK_ANIMATE_ATTR}}function jS(e){return new LS(e)}LS.NOWORK_ANIMATE_ATTR=bd;var FS=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let BS=class{constructor(){this.time=Ol.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,n,r,s,a,o,l,c,h,d,u){const{stroke:p=l.stroke}=e.attribute;Array.isArray(p)&&p.some((e=>!1===e))&&(u.doStroke=!1)}};BS=FS([jo()],BS);let NS=class{constructor(){this.time=Ol.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,n,r,s,a,o,l,c,h,d){const{width:u=l.width,height:p=l.height,stroke:g=l.stroke}=e.attribute;if(Array.isArray(g)&&g.some((e=>!1===e))){if(t.setStrokeStyle(e,e.attribute,i,n,l),t.beginPath(),t.moveTo(i,n),g[0]?t.lineTo(i+u,n):t.moveTo(i+u,n),g[1]?t.lineTo(i+u,n+p):t.moveTo(i+u,n+p),g[2]?t.lineTo(i,n+p):t.moveTo(i,n+p),g[3]){const e=g[0]?n-t.lineWidth/2:n;t.lineTo(i,e)}else t.moveTo(i,n);t.stroke()}}};NS=FS([jo()],NS);const zS=new class{constructor(){this.time=Ol.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,n,r,s,a,o,l,c,h,d){const{outerBorder:u,innerBorder:p}=e.attribute,g=u&&!1!==u.visible,f=p&&!1!==p.visible;if(!g&&!f)return;const{cornerRadius:m=l.cornerRadius,opacity:y=l.opacity,x:b=l.x,y:_=l.y,scaleX:x=l.scaleX,scaleY:S=l.scaleY,x1:w,y1:C}=e.attribute;let{width:k,height:A}=e.attribute;k=(null!=k?k:w-i)||0,A=(null!=A?A:C-n)||0;const E=!(!u||!u.stroke),T=!(!p||!p.stroke);if(g){const{distance:r=l.outerBorder.distance}=u,s=Sg(t,r,t.dpr),a=i-s,o=n-s,c=2*s;if(0===m||v(m)&&m.every((e=>0===e))?(t.beginPath(),t.rect(a,o,k+c,A+c)):(t.beginPath(),Pg(t,a,o,k+c,A+c,m)),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),d)d(t,u,l.outerBorder);else if(E){const r=l.outerBorder.opacity;l.outerBorder.opacity=y,t.setStrokeStyle(e,u,(b-i)/x,(_-n)/S,l.outerBorder),l.outerBorder.opacity=r,t.stroke()}}if(f){const{distance:r=l.innerBorder.distance}=p,s=Sg(t,r,t.dpr),a=i+s,o=n+s,c=2*s;if(0===m||v(m)&&m.every((e=>0===e))?(t.beginPath(),t.rect(a,o,k-c,A-c)):(t.beginPath(),Pg(t,a,o,k-c,A-c,m)),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),d)d(t,p,l.innerBorder);else if(T){const r=l.innerBorder.opacity;l.innerBorder.opacity=y,t.setStrokeStyle(e,p,(b-i)/x,(_-n)/S,l.innerBorder),l.innerBorder.opacity=r,t.stroke()}}}},HS=_f,VS=tf;var US=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},WS=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},GS=function(e,t){return function(i,n){t(i,n,e)}};let KS=class extends hf{constructor(e){super(),this.rectRenderContribitions=e,this.type="rect",this.numberType=tu,this.builtinContributions=[zS,VS,HS],this.init(e)}drawShape(e,t,i,n,r,s,a,o){var l;const c=null!==(l=this.tempTheme)&&void 0!==l?l:jh(e,null==s?void 0:s.theme).rect,{fill:h=c.fill,background:d,stroke:u=c.stroke,cornerRadius:p=c.cornerRadius,opacity:g=c.opacity,fillOpacity:f=c.fillOpacity,lineWidth:m=c.lineWidth,strokeOpacity:y=c.strokeOpacity,visible:b=c.visible,x1:_,y1:x,x:S=c.x,y:w=c.y}=e.attribute;let{width:C,height:k}=e.attribute;C=(null!=C?C:_-S)||0,k=(null!=k?k:x-w)||0;const A=Dg(g,f,C,k,h),E=jg(g,y,C,k),T=Mg(h,d),O=Ig(u,m);if(!e.valid||!b)return;if(!T&&!O)return;if(!(A||E||a||o||d))return;0===p||v(p)&&p.every((e=>0===e))?(t.beginPath(),t.rect(i,n,C,k)):(t.beginPath(),Pg(t,i,n,C,k,p));const P={doFill:T,doStroke:O};t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,c),this.beforeRenderStep(e,t,i,n,T,O,A,E,c,r,a,o,P),P.doFill&&(a?a(t,e.attribute,c):A&&(t.setCommonStyle(e,e.attribute,S-i,w-n,c),t.fill())),P.doStroke&&(o?o(t,e.attribute,c):E&&(t.setStrokeStyle(e,e.attribute,S-i,w-n,c),t.stroke())),this.afterRenderStep(e,t,i,n,T,O,A,E,c,r,a,o)}draw(e,t,i,n){const r=jh(e,null==n?void 0:n.theme).rect;this.tempTheme=r,this._draw(e,r,!1,i,n),this.tempTheme=null}};KS=US([jo(),GS(0,Ho(Uo)),GS(0,Vo(Yg)),WS("design:paramtypes",[Object])],KS);let YS=!1;const XS=new Oo((e=>{YS||(YS=!0,e(KS).toSelf().inSingletonScope(),e(Lu).to(KS).inSingletonScope(),e(Pu).toService(Lu),e(NS).toSelf(),e(BS).toSelf(),e(Yg).toService(NS),e(Yg).toService(BS),e(Yg).toService(nf),Go(e,Yg))}));var qS=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},ZS=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},QS=function(e,t){return function(i,n){t(i,n,e)}};const $S=new hl;let JS=class{constructor(e){this.canvasRenderer=e,this.type="rect",this.numberType=tu}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).rect,{cornerRadius:s=r.cornerRadius}=e.attribute;let{x:a=r.x,y:o=r.y}=e.attribute;n.highPerformanceSave();let c=!0;if(e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);a+=t.x,o+=t.y,n.setTransformForCurrent()}else a=0,o=0,c=!1,n.transformFromMatrix(e.transMatrix,!0);let h=!0;if(!c||e.shadowRoot||l(s,!0)&&0!==s||v(s)&&s.some((e=>0!==e)))h=!1,this.canvasRenderer.drawShape(e,n,a,o,{},null,((e,i,n)=>!!h||(h=e.isPointInPath(t.x,t.y),h)),((e,i,r)=>{if(h)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=Sg(n,s+a,n.dpr),h=e.isPointInStroke(t.x,t.y),h}));else{const{fill:i=r.fill,stroke:n=r.stroke,lineWidth:s=r.lineWidth}=e.attribute;if(i)h=!0;else if(n){const i=e.AABBBounds;$S.setValue(i.x1,i.y1,i.x2,i.y2),$S.expand(-s/2),h=!$S.containsPoint(t)}}return n.highPerformanceRestore(),h}};JS=qS([jo(),QS(0,Ho(Lu)),ZS("design:paramtypes",[Object])],JS);let ew=!1;const tw=new Oo(((e,t,i,n)=>{ew||(ew=!0,e(lS).to(JS).inSingletonScope(),e(vS).toService(lS))}));var iw=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},nw=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},rw=function(e,t){return function(i,n){t(i,n,e)}};const sw=new hl;let aw=class{constructor(e){this.canvasRenderer=e,this.type="rect",this.numberType=tu}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).rect,{cornerRadius:s=r.cornerRadius}=e.attribute;let{x:a=r.x,y:o=r.y}=e.attribute;n.highPerformanceSave();let c=!0;if(e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);a+=t.x,o+=t.y,n.setTransformForCurrent()}else a=0,o=0,c=!1,n.transformFromMatrix(e.transMatrix,!0);let h=!0;if(!c||l(s,!0)&&0!==s||v(s)&&s.some((e=>0!==e)))h=!1,this.canvasRenderer.drawShape(e,n,a,o,{},null,((e,i,n)=>!!h||(h=e.isPointInPath(t.x,t.y),h)),((e,i,r)=>{if(h)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=s+a,h=e.isPointInStroke(t.x,t.y),h}));else if(h){const{fill:i=r.fill,stroke:n=r.stroke,lineWidth:s=r.lineWidth}=e.attribute;if(i)h=!0;else if(n){const i=e.AABBBounds;sw.setValue(i.x1,i.y1,i.x2,i.y2),sw.expand(-s/2),h=!sw.containsPoint(t)}}return n.highPerformanceRestore(),h}};aw=iw([jo(),rw(0,Ho(Lu)),nw("design:paramtypes",[Object])],aw);let ow=!1;const lw=new Oo(((e,t,i,n)=>{ow||(ow=!0,e(Zx).to(aw).inSingletonScope(),e(Ux).toService(Zx))}));function cw(){cw.__loaded||(cw.__loaded=!0,bp.RegisterGraphicCreator("rect",jS),ph.load(XS),ph.load(Vx?tw:lw))}cw.__loaded=!1;const hw=cw;function dw(e){e.crosshair=z(e.crosshair||{}).map((t=>_e({["horizontal"===e.direction?"yField":"xField"]:{visible:!0,line:{visible:!0,type:"rect"}}},t)))}function uw(e,t,i){var n;const{width:r,height:s}=e;if(x(r)&&x(s))return{width:r,height:s};let a=i.width,o=i.height;const l=t.container,c=t.canvas;if(l){const{width:e,height:t}=Ao(l,i.width,i.height);a=e,o=t}else if(c&&de(t.mode)){let e;e=_(c)?null===document||void 0===document?void 0:document.getElementById(c):c;const{width:t,height:n}=Ao(e,i.width,i.height);a=t,o=n}else if(pe(t.mode)&&(null===(n=t.modeParams)||void 0===n?void 0:n.domref)){const e=t.modeParams.domref;a=e.width,o=e.height}return a=null!=r?r:a,o=null!=s?s:o,{width:a,height:o}}function pw(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const r=t=>i.reduce(((e,i)=>e||(null==i?void 0:i[t])),e[t]);return Object.assign(e,{change:r("change"),reCompile:r("reCompile"),reMake:r("reMake"),reRender:r("reRender"),reSize:r("reSize")}),e}function gw(e,t){return"line"===e||"area"===e||"common"===e&&t.series.every((e=>"area"===e.type||"line"===e.type))?{paddingInner:1,paddingOuter:0}:{paddingOuter:0}}var fw,mw;!function(e){e.STATE_NORMAL="normal",e.STATE_HOVER="hover",e.STATE_HOVER_REVERSE="hover_reverse",e.STATE_DIMENSION_HOVER="dimension_hover",e.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",e.STATE_SELECTED="selected",e.STATE_SELECTED_REVERSE="selected_reverse"}(fw||(fw={})),function(e){e.STATE_HOVER_REVERSE="hover_reverse",e.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",e.STATE_SELECTED_REVERSE="selected_reverse"}(mw||(mw={}));class vw{constructor(){this._children=[],this._markNameMap={},this._infoMap=new Map}getMarkNameMap(){return this._markNameMap}addMark(e,t){P(e)||(this._children.push(e),this._markNameMap[e.name]=e,this._infoMap.set(e,O({},vw.defaultMarkInfo,t)))}removeMark(e){const t=this._children.findIndex((t=>t.name===e));t>=0&&(this._infoMap.delete(this._children[t]),delete this._markNameMap[e],this._children.splice(t,1))}clear(){this._children=[],this._markNameMap={},this._infoMap.clear()}forEach(e){this._children.forEach(e)}includes(e,t){return this._children.includes(e,t)}get(e){return isNaN(Number(e))?this._markNameMap[e]:this._children[e]}getMarks(){return this._children.slice()}getMarksInType(e){const t=z(e);return this._children.filter((e=>t.includes(e.type)))}getMarkInId(e){return this._children.find((t=>t.id===e))}getMarkWithInfo(e){return this._children.find((t=>Object.keys(e).every((i=>e[i]===this._infoMap.get(t)[i]))))}}vw.defaultMarkInfo={};class yw{get hover(){return this._hover}get select(){return this._select}constructor(e){this._marks=new vw,this._markReverse=new vw,this._lastDimensionEvent=null,this.onHover=e=>{const t=this.getEventElement(e);switch(e.action){case"enter":this.interaction.getEventElement(fw.STATE_DIMENSION_HOVER).forEach((e=>{this.interaction.addEventElement(fw.STATE_DIMENSION_HOVER_REVERSE,e)})),this.interaction.clearEventElement(fw.STATE_DIMENSION_HOVER,!1),t.forEach((e=>{let{el:t,mark:i}=e;this.interaction.addEventElement(fw.STATE_DIMENSION_HOVER,t)})),this.interaction.reverseEventElement(fw.STATE_DIMENSION_HOVER);break;case"leave":this.interaction.clearEventElement(fw.STATE_DIMENSION_HOVER,!0),e=null}this._lastDimensionEvent=e},this._option=e,this.event=this._option.model.getOption().getChart().getEvent(),this.interaction=e.interaction,this.initConfig(e.mode)}setStateKeys(e){}registerMark(e){ay(e.stateStyle[fw.STATE_DIMENSION_HOVER])||this._marks.addMark(e),ay(e.stateStyle[fw.STATE_DIMENSION_HOVER_REVERSE])||this._markReverse.addMark(e)}init(){this.initEvent()}release(){this.releaseEvent()}initEvent(){this.event.on(xn.dimensionHover,this.onHover)}releaseEvent(){this.event.release()}initConfig(e){}getEventElement(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=[];return e.dimensionInfo.forEach((e=>{e.data.forEach((e=>{(t?this._markReverse:this._marks).getMarks().filter((t=>t.model===e.series&&t.getVisible())).forEach((n=>{const r=n.getProduct().elements.filter((i=>{const n=i.getDatum();let r;return r=v(n)?n.every(((t,i)=>t===e.datum[i])):e.datum.some((e=>e===n)),t?!r:r})).map((e=>({el:e,mark:n})));i.push(...r)}))}))})),i}dimensionDataEqual(e){if(this._lastDimensionEvent===e)return!0;if(!this._lastDimensionEvent||!e)return!1;if(this._lastDimensionEvent.dimensionInfo.length!==e.dimensionInfo.length)return!1;for(let t=0;t<this._lastDimensionEvent.dimensionInfo.length;t++){const i=this._lastDimensionEvent.dimensionInfo[t],n=e.dimensionInfo[t];if(i.value!==n.value)return!1;if(i.axis!==n.axis)return!1;if(i.data.length!==n.data.length)return!1;for(let e=0;e<i.data.length;e++){const t=i.data[e],r=n.data[e];if(t.series!==r.series)return!1;if(t.datum.length!==r.datum.length)return!1;for(let e=0;e<t.datum.length;e++)if(t.datum[e]!==r.datum[e])return!1}}return!0}}function bw(e,t){return("fill"===e||"stroke"===e)&&(null==t?void 0:t.gradient)&&(null==t?void 0:t.stops)}const _w={};Object.values(fw).forEach((e=>{_w[e]=!0}));const xw={[fw.STATE_HOVER]:fw.STATE_HOVER_REVERSE,[fw.STATE_SELECTED]:fw.STATE_SELECTED_REVERSE,[fw.STATE_DIMENSION_HOVER]:fw.STATE_DIMENSION_HOVER_REVERSE};function Sw(e){return xw[e]}class ww{constructor(){this._stateMarks=new Map,this._stateElements=new Map,this._disableTriggerEvent=!1}static markStateEnable(e,t){return!ay(e.stateStyle[t])}setDisableActiveEffect(e){this._disableTriggerEvent=e}registerMark(e,t){var i;this._stateMarks.has(e)||this._stateMarks.set(e,[]),null===(i=this._stateMarks.get(e))||void 0===i||i.push(t)}getStateMark(e){return this._stateMarks.get(e)}filterEventMark(e,t){var i;return!(!e.mark||!(null===(i=this._stateMarks.get(t))||void 0===i?void 0:i.includes(e.mark)))}getEventElement(e){var t;return null!==(t=this._stateElements.get(e))&&void 0!==t?t:[]}getEventElementData(e){return this.getEventElement(e).map((e=>e.getDatum()))}exchangeEventElement(e,t){var i;if(this._disableTriggerEvent)return;const n=Sw(e);null===(i=this._stateElements.get(e))||void 0===i||i.forEach((t=>{t.removeState(e),n&&this.addEventElement(n,t)})),t.getStates().includes(e)||(t.addState(e),n&&t.removeState(n)),this._stateElements.set(e,[t])}removeEventElement(e,t){var i,n;if(this._disableTriggerEvent)return;t.removeState(e);const r=null!==(n=null===(i=this._stateElements.get(e))||void 0===i?void 0:i.filter((e=>e!==t)))&&void 0!==n?n:[];this._stateElements.set(e,r);const s=Sw(e);s&&(0===r.length?this.clearEventElement(s,!1):this.addEventElement(s,t))}addEventElement(e,t){var i;if(this._disableTriggerEvent)return;t.getStates().includes(e)||t.addState(e);const n=null!==(i=this._stateElements.get(e))&&void 0!==i?i:[];n.push(t),this._stateElements.set(e,n)}clearEventElement(e,t){var i;if(!this._disableTriggerEvent&&(null===(i=this._stateElements.get(e))||void 0===i||i.forEach((t=>{t.removeState(e)})),this._stateElements.set(e,[]),t)){const t=Sw(e);t&&this.clearEventElement(t,!1)}}reverseEventElement(e){if(this._disableTriggerEvent)return;const t=Sw(e);if(!t)return;const i=this.getStateMark(t);if(!i)return;const n=this.getEventElement(e);n.length&&(this.getEventElement(t).length||(1===n.length?i.forEach((e=>{e.getProduct().elements.filter((e=>e!==n[0])).forEach((e=>{this.addEventElement(t,e)}))})):i.forEach((e=>{e.getProduct().elements.filter((e=>!n.includes(e))).forEach((e=>{this.addEventElement(t,e)}))}))))}}"".concat(Ge,"_MEASURE_CANVAS_ID");const Cw="".concat(Ge,"_DEFAULT_DATA_INDEX"),kw="".concat(Ge,"_DEFAULT_DATA_KEY"),Aw="".concat(Ge,"_DEFAULT_DATA_SERIES_FIELD"),Ew="".concat(Ge,"_DEFAULT_SERIES_STYLE_NAME");var Tw;!function(e){e[e.Default=0]="Default",e[e.Theme=1]="Theme",e[e.Chart=2]="Chart",e[e.Base_Series=3]="Base_Series",e[e.Series=4]="Series",e[e.Mark=5]="Mark",e[e.User_Chart=6]="User_Chart",e[e.User_Series=7]="User_Series",e[e.User_Mark=8]="User_Mark",e[e.Built_In=99]="Built_In"}(Tw||(Tw={}));const Ow="".concat(Ge,"_STACK_START"),Pw="".concat(Ge,"_STACK_END"),Mw="".concat(Ge,"_STACK_START_PERCENT"),Iw="".concat(Ge,"_STACK_END_PERCENT"),Rw="".concat(Ge,"_STACK_START_OffsetSilhouette"),Dw="".concat(Ge,"_STACK_END_OffsetSilhouette"),Lw="".concat(Ge,"_STACK_TOTAL"),jw="".concat(Ge,"_STACK_TOTAL_PERCENT"),Fw="".concat(Ge,"_STACK_TOTAL_TOP"),Bw="".concat(Ge,"_SEGMENT_START"),Nw="".concat(Ge,"_SEGMENT_END");var zw,Hw;!function(e){e[e.Axis_Grid=50]="Axis_Grid",e[e.CrossHair_Grid=100]="CrossHair_Grid",e[e.Region=450]="Region",e[e.Mark=300]="Mark",e[e.Node=400]="Node",e[e.Axis=100]="Axis",e[e.MarkLine=500]="MarkLine",e[e.MarkArea=100]="MarkArea",e[e.MarkPoint=500]="MarkPoint",e[e.DataZoom=500]="DataZoom",e[e.ScrollBar=500]="ScrollBar",e[e.Player=500]="Player",e[e.Legend=500]="Legend",e[e.CrossHair=500]="CrossHair",e[e.Indicator=500]="Indicator",e[e.Title=500]="Title",e[e.Label=500]="Label",e[e.Brush=500]="Brush",e[e.CustomMark=500]="CustomMark",e[e.Interaction=700]="Interaction"}(zw||(zw={})),function(e){e[e.Indicator=10]="Indicator",e[e.Region=20]="Region",e[e.Axis=30]="Axis",e[e.DataZoom=40]="DataZoom",e[e.Player=40]="Player",e[e.ScrollBar=40]="ScrollBar",e[e.Legend=50]="Legend",e[e.Title=70]="Title",e[e.CustomMark=70]="CustomMark"}(Hw||(Hw={}));const Vw=["linear","radial","conical"],Uw={linear:{x0:0,y0:0,x1:1,y1:1},radial:{x0:0,y0:0,x1:1,y1:1,r0:0,r1:1},conical:{x:.5,y:.5,startAngle:0,endAngle:2*Math.PI}};class Ww{getOption(){return this._option}constructor(e){this._option=e,this.getCompiler=this._option.getCompiler}getVGrammarView(){var e;return null===(e=this.getCompiler())||void 0===e?void 0:e.getVGrammarView()}release(){this._option=null}}class Gw extends Ww{constructor(){super(...arguments),this.id=X(),this._compiledProductId=null,this._depend=[]}getProduct(){if(x(this._product))return this._product;const e=this.getVGrammarView(),t=this.getProductId();return x(t)&&x(e)&&(this._product=this._lookupGrammar(t)),this._product}getProductId(){var e;return null!==(e=this._compiledProductId)&&void 0!==e?e:this.generateProductId()}getDepend(){return this._depend}setDepend(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._depend=t}compile(e){this._compileProduct(e),this._afterCompile(e)}_afterCompile(e){var t;x(this._product)&&(null===(t=this.getCompiler())||void 0===t||t.addGrammarItem(this))}updateDepend(){if(x(this._product)){const e=this.getDepend().map((e=>e.getProduct())).filter(x);return this._product.depend(e),e.length===this.getDepend().length}return!1}release(){this.removeProduct(),super.release(),this._depend=[]}removeProduct(e){this.getCompiler().removeGrammarItem(this,e),this._product=null,this._compiledProductId=null}}class Kw extends Gw{getValue(){return this._value}getUpdateFunc(){return this._updateFunc}constructor(e,t,i,n){super(e),this.grammarType=Xb.signal,this.name=t,this._value=i,this._updateFunc=n}updateSignal(e,t){this._value=e,this._updateFunc=t,this.compile()}_compileProduct(){const e=this.getVGrammarView();if(e){if(!this.getProduct()){const t=this.getProductId();this._product=e.signal().id(t),this._compiledProductId=t}x(this._value)&&this._product.value(this._value),x(this._updateFunc)&&this._product.update(this._updateFunc)}}generateProductId(){return this.name}_lookupGrammar(e){var t;return null===(t=this.getCompiler().getVGrammarView())||void 0===t?void 0:t.getSignalById(e)}}class Yw extends Ww{constructor(){super(...arguments),this._signalMap={}}getSignalMap(){return this._signalMap}getSignal(e){return this._signalMap[e]}updateSignal(e,t,i){this._signalMap[e]?this._signalMap[e].updateSignal(t,i):(this._signalMap[e]=new Kw(this._option,e,t,i),this._signalMap[e].compile())}compile(){Object.values(this._signalMap).forEach((e=>{e.compile()}))}release(){super.release(),Object.values(this._signalMap).forEach((e=>{e.release()})),this._signalMap={}}}class Xw extends Yw{getStateMap(){return this._stateMap}_getDefaultStateMap(){return{}}constructor(e){super(e),e.stateKeyToSignalName?this.stateKeyToSignalName=e.stateKeyToSignalName:this.stateKeyToSignalName=()=>"state_signal",this.initStateMap()}initStateMap(e){this._stateMap=null!=e?e:this._getDefaultStateMap()}compile(e){const t=null!=e?e:this._stateMap;Object.keys(t).forEach((e=>{const i=this.stateKeyToSignalName(e),n=t[e];this.updateSignal(i,n)}))}updateState(e,t){return e?(O(this._stateMap,e),this.compile(e),t?Promise.resolve():this.getCompiler().renderAsync()):Promise.resolve()}}class qw extends Xw{constructor(){super(...arguments),this.id=X(),this.stateKeyToSignalName=e=>"".concat(Ge,"_animate_").concat(this.id,"_").concat(e)}getAnimationStateSignalName(){return this.stateKeyToSignalName("animationState")}updateAnimateState(e,t){e===ko.update?this.updateState({animationState:{callback:(e,t)=>t.diffState}},t):e===ko.appear?this.updateState({animationState:{callback:(e,t)=>"exit"===t.diffState?ko.none:ko.appear}},t):this.updateState({animationState:{callback:(t,i)=>e}},t)}_getDefaultStateMap(){return{animationState:{callback:(e,t)=>"exit"===t.diffState?ko.exit:ko.appear}}}}class Zw{constructor(e){this._option=e,this.type=e.type}_initTheme(e,t){return this._theme=this.getTheme(e,t),this._mergeThemeToSpec(e,t)}getTheme(e,t){}transformSpec(e,t,i){this._transformSpecBeforeMergingTheme(e,t,i);const n=this._initTheme(e,t);return this._transformSpecAfterMergingTheme(n.spec,t,i),n}_transformSpecBeforeMergingTheme(e,t,i){}_transformSpecAfterMergingTheme(e,t,i){}_mergeThemeToSpec(e,t){const i=this._theme;if(this._shouldMergeThemeToSpec()){const n=this._getDefaultSpecFromChart(t),r=e=>_e({},i,n,e);return v(e)?{spec:e.map((e=>r(e))),theme:i}:{spec:r(e),theme:i}}return{spec:e,theme:i}}_shouldMergeThemeToSpec(){return!0}_getDefaultSpecFromChart(e){}}const Qw=(e,t,i)=>{if(P(t))return e;const n=t[0];return P(n)?e:1===t.length?(e[n]=i,e):(P(e[n])&&("number"==typeof t[1]?e[n]=[]:e[n]={}),Qw(e[n],t.slice(1),i))};class $w extends Ww{getSpec(){return this._spec||{}}getSpecPath(){return this._option.specPath}getSpecInfoPath(){var e;return null!==(e=this._option.specInfoPath)&&void 0!==e?e:this._option.specPath}getData(){return this._data}get layout(){return this._layout}getSpecIndex(){return this._specIndex}getOption(){return this._option}getMarks(){var e,t;return null!==(t=null===(e=this._marks)||void 0===e?void 0:e.getMarks())&&void 0!==t?t:[]}getMarkNameMap(){var e;return null===(e=this._marks)||void 0===e?void 0:e.getMarkNameMap()}getMarkSet(){return this._marks}getMarkInfoList(){return this.getMarks().map((e=>({type:e.type,name:e.name})))}getChart(){return this._option.getChart()}get _theme(){var e;return null===(e=this.getSpecInfo())||void 0===e?void 0:e.theme}constructor(e,t){var i,n;super(t),this.transformerConstructor=Zw,this.type="null",this.modelType="null",this.userId=void 0,this._data=null,this._layout=null,this._specIndex=0,this.specKey="",this._marks=new vw,this._lastLayoutRect=null,this.id=X(),this.userId=e.id,this._spec=e,this._specIndex=null!==(i=t.specIndex)&&void 0!==i?i:0,this.effect={},this.event=new jr(t.eventDispatcher,t.mode),null===(n=t.map)||void 0===n||n.set(this.id,this)}_releaseEvent(){this.event.release()}created(){this.setAttrFromSpec()}init(e){}afterInit(){}getVisible(){var e;return!1!==(null===(e=this._spec)||void 0===e?void 0:e.visible)}onLayoutStart(e,t,i){var n;null===(n=this._layout)||void 0===n||n.onLayoutStart(e,t,i)}onLayoutEnd(e){var t;null===(t=this._layout)||void 0===t||t.onLayoutEnd(e),this.getMarks().forEach((e=>e.updateLayoutState(!0,!0)))}onEvaluateEnd(e){}onDataUpdate(){}beforeRelease(){}release(){var e;this._releaseEvent(),this._spec=void 0,this.getMarks().forEach((e=>e.release())),null===(e=this._data)||void 0===e||e.release(),this._data=this._specIndex=null,this._marks.clear(),super.release()}updateSpec(e){const t=this._compareSpec(e,this._spec);return this._spec=e,t.reMake||this.reInit(),t}_compareSpec(e,t){return{change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1}}reInit(e){e&&(this._spec=e),this.setAttrFromSpec()}updateLayoutAttribute(){}setAttrFromSpec(){var e;null===(e=this._layout)||void 0===e||e.setAttrFromSpec(this._spec,this._option.getChartViewRect())}_convertMarkStyle(e){return Object.assign({},e)}setMarkStyle(e,t,i,n){x(e)&&x(t)&&e.setStyle(this._convertMarkStyle(t),i,n)}initMarkStyleWithSpec(e,t,i){if(!x(e)||!x(t))return;const{style:n,state:r}=t,s=Object.assign({},t);n&&(s.style=this._convertMarkStyle(n)),r&&(s.state={},Object.keys(r).forEach((e=>{s.state[e]=this._convertMarkStyle(r[e])}))),e.initStyleWithSpec(s,i)}stateKeyToSignalName(e,t){let i="".concat(Ge,"_").concat(this.modelType,"_").concat(this.type,"_").concat(this.id,"_").concat(e);return t&&(i+="_".concat(t)),i}compileData(){var e;null===(e=this._data)||void 0===e||e.compile()}compileMarks(e){this.getMarks().forEach((t=>{t.compile({group:e})}))}_createMark(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{type:i,name:n}=e,r=_n.createMark(i,n,Object.assign({model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._option.globalScale},t));return null==r||r.created(),r}_getDataIdKey(){}getColorScheme(){var e,t;return null===(t=(e=this._option).getTheme)||void 0===t?void 0:t.call(e).colorScheme}getSpecInfo(){var e,t,i;return((e,t,i)=>{if(!P(t))return Br(e,t,i)})(null!==(i=null===(t=(e=this._option).getSpecInfo)||void 0===t?void 0:t.call(e))&&void 0!==i?i:{},this.getSpecInfoPath())}}class Jw{getSpec(){return this._spec||{}}getLayoutStartPoint(){return this._layoutStartPoint}get layoutRectLevelMap(){return this._layoutRectLevelMap}get minWidth(){return this._minWidth}set minWidth(e){this._minWidth=e}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth=e}get minHeight(){return this._minHeight}set minHeight(e){this._minHeight=e}get maxHeight(){return this._maxHeight}set maxHeight(e){this._maxHeight=e}getLastComputeOutBounds(){return this._lastComputeOutBounds}get layoutOrient(){return this._layoutOrient}set layoutOrient(e){this._layoutOrient=e}get model(){return this._model}get type(){return this._model.type}constructor(e,t){var i;this.layoutClip=!1,this.autoIndent=!1,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:0,height:0},this._layoutRectLevelMap={width:0,height:0},this._minWidth=null,this._maxWidth=null,this._minHeight=null,this._maxHeight=null,this._lastComputeRect=null,this._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0},this.getLayoutRect=()=>this._layoutRect,this.layoutType="normal",this._layoutOrient="left",this.layoutPaddingLeft=0,this.layoutPaddingTop=0,this.layoutPaddingRight=0,this.layoutPaddingBottom=0,this.layoutOffsetX=0,this.layoutOffsetY=0,this.layoutLevel=Hw.Region,this._model=e,this._option=t,this.layoutLevel=t.layoutLevel,this.layoutType=t.layoutType,t.layoutOrient&&(this.layoutOrient=t.layoutOrient),this._spec=null===(i=null==e?void 0:e.getSpec)||void 0===i?void 0:i.call(e)}_setLayoutAttributeFromSpec(e,t){var i,n,r,s;if(this._spec&&!1!==this._spec.visible){const a=te(ie(e.padding),t,t);this.layoutPaddingLeft=a.left,this.layoutPaddingRight=a.right,this.layoutPaddingTop=a.top,this.layoutPaddingBottom=a.bottom,this._minHeight=P(e.minHeight)?null!==(i=this._minHeight)&&void 0!==i?i:null:ee(e.minHeight,t.height,t),this._maxHeight=P(e.maxHeight)?null!==(n=this._maxHeight)&&void 0!==n?n:null:ee(e.maxHeight,t.height,t),this._minWidth=P(e.minWidth)?null!==(r=this._minWidth)&&void 0!==r?r:null:ee(e.minWidth,t.width,t),this._maxWidth=P(e.maxWidth)?null!==(s=this._maxWidth)&&void 0!==s?s:null:ee(e.maxWidth,t.width,t),e.width&&this.setLayoutRect({width:ee(e.width,t.width,t)},{width:9}),e.height&&this.setLayoutRect({height:ee(e.height,t.height,t)},{height:9}),P(e.offsetX)||(this.layoutOffsetX=ee(e.offsetX,t.width,t)),P(e.offsetY)||(this.layoutOffsetY=ee(e.offsetY,t.height,t)),e.alignSelf&&(this.alignSelf=e.alignSelf)}}setAttrFromSpec(e,t){var i,n,r,s;this._spec=e,this.layoutType=null!==(i=e.layoutType)&&void 0!==i?i:this.layoutType,this.layoutLevel=null!==(n=e.layoutLevel)&&void 0!==n?n:this.layoutLevel,this.layoutOrient=null!==(r=e.orient)&&void 0!==r?r:this.layoutOrient,this._setLayoutAttributeFromSpec(e,t),this.layoutClip=null!==(s=e.clip)&&void 0!==s?s:this.layoutClip}onLayoutStart(e,t,i){this._setLayoutAttributeFromSpec(this._spec,t)}onLayoutEnd(e){}_getAbsoluteSpecValue(e){const t={top:null,bottom:null,left:null,right:null};return["top","bottom","left","right"].forEach((i=>{P(this._spec[i])||(t[i]=ee(this._spec[i],"top"===i||"bottom"===i?e.height:e.width,e))})),t}absoluteLayoutInRect(e){const{top:t,bottom:i,left:n,right:r}=this._getAbsoluteSpecValue(e),s={width:e.width-this.layoutPaddingLeft-this.layoutPaddingRight,height:e.height-this.layoutPaddingTop-this.layoutPaddingBottom};P(n)||(s.width-=n),P(r)||(s.width-=r),P(t)||(s.height-=t),P(i)||(s.height-=i),this.setLayoutRect(s);const{width:a,height:o}=this.computeBoundsInRect(this.getLayoutRect());this.setLayoutRect({width:a,height:o});const l={x:e.x,y:e.y};!0===this._spec.center?(l.x=e.x+.5*e.width-.5*a,l.y=e.y+.5*e.height-.5*o):(P(n)?P(r)||(l.x=e.x+e.width-this.layoutPaddingRight-r-a):l.x=e.x+n+this.layoutPaddingLeft,P(t)?P(i)||(l.y=e.y+e.height-this.layoutPaddingBottom-i-o):l.y=e.y+t+this.layoutPaddingTop),this.setLayoutStartPosition(l)}setLayoutStartPosition(e){var t,i;this._option.transformLayoutPosition&&(e=this._option.transformLayoutPosition(e)),L(e.x)&&(this._layoutStartPoint.x=e.x),L(e.y)&&(this._layoutStartPoint.y=e.y),null===(i=(t=this._model).afterSetLayoutStartPoint)||void 0===i||i.call(t,this._layoutStartPoint)}setLayoutRect(e,t){let{width:i,height:n}=e;var r,s,a,o;L(i)&&(null!==(r=null==t?void 0:t.width)&&void 0!==r?r:0)>=this._layoutRectLevelMap.width&&(this._layoutRect.width=i,this._layoutRectLevelMap.width=null!==(s=null==t?void 0:t.width)&&void 0!==s?s:0),L(n)&&(null!==(a=null==t?void 0:t.height)&&void 0!==a?a:0)>=this._layoutRectLevelMap.height&&(this._layoutRect.height=n,this._layoutRectLevelMap.height=null!==(o=null==t?void 0:t.height)&&void 0!==o?o:0),this.setRectInSpec(this._layoutRect)}getLayout(){return{x:this._layoutStartPoint.x,y:this._layoutStartPoint.y,width:this._layoutRect.width,height:this._layoutRect.height}}mergeLayoutRect(e){let{width:t,height:i}=e;const n={width:t,height:i};return this._layoutRectLevelMap.width>0&&(n.width=this._layoutRect.width),this._layoutRectLevelMap.height>0&&(n.height=this._layoutRect.height),n}getOrientPosAttribute(){return"bottom"===this._layoutOrient||"top"===this._layoutOrient?"x":"y"}getOrientSizeAttribute(){return"bottom"===this._layoutOrient||"top"===this._layoutOrient?"width":"height"}changeBoundsBySetting(e){return this._layoutRectLevelMap.width>0&&(e.x2=e.x1+this._layoutRect.width),this._layoutRectLevelMap.height>0&&(e.y2=e.y1+this._layoutRect.height),e.x1-=this._layoutStartPoint.x,e.x2-=this._layoutStartPoint.x,e.y1-=this._layoutStartPoint.y,e.y2-=this._layoutStartPoint.y,e}setRectInSpec(e){const t=Object.assign({},e);return this._layoutRectLevelMap.width<9?(P(this._minWidth)||(t.width=Math.max(t.width,this._minWidth)),P(this._maxWidth)||(t.width=Math.min(t.width,this._maxWidth))):t.width=this._layoutRect.width,this._layoutRectLevelMap.height<9?(P(this._minHeight)||(t.height=Math.max(t.height,this._minHeight)),P(this._maxHeight)||(t.height=Math.min(t.height,this._maxHeight))):t.height=this._layoutRect.height,t}computeBoundsInRect(e){if(this._lastComputeRect=e,"region-relative"===this.layoutType&&(9===this._layoutRectLevelMap.width&&("left"===this.layoutOrient||"right"===this.layoutOrient)||9===this._layoutRectLevelMap.height&&("bottom"===this.layoutOrient||"top"===this.layoutOrient)))return this._layoutRect;const t=Object.assign({},this._model.getBoundsInRect(this.setRectInSpec(e),e));this.changeBoundsBySetting(t),this.autoIndent&&t.x2-t.x1>0&&t.y2-t.y1>0&&(this._lastComputeOutBounds.x1=Math.ceil(-t.x1),this._lastComputeOutBounds.x2=Math.ceil(t.x2-e.width),this._lastComputeOutBounds.y1=Math.ceil(-t.y1),this._lastComputeOutBounds.y2=Math.ceil(t.y2-e.height));let i=this.setRectInSpec(function(e,t){return e?{width:Math.ceil(Math.min(e.x2-e.x1,t.width)),height:Math.ceil(Math.min(e.y2-e.y1,t.height))}:{width:0,height:0}}(t,e));return this._option.transformLayoutRect&&(i=this._option.transformLayoutRect(i)),i}getModelId(){return this._model.id}getModelVisible(){return this._model.getVisible()}}class eC extends $w{constructor(){super(...arguments),this.layoutType="normal",this.layoutLevel=0,this.layoutZIndex=0,this._forceLayoutTag=!1,this._layout=null,this._orient=null,this._layoutRect={width:0,height:0},this._layoutStartPos={x:0,y:0},this._isLayout=!0,this.getGraphicBounds=()=>this._layout?{x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}:{x1:0,x2:0,y1:0,y2:0},this._transformLayoutRect=null,this._transformLayoutPosition=null}get layoutOrient(){return this._orient}set layoutOrient(e){this._orient=e,this._layout&&(this._layout.layoutOrient=e)}initLayout(){"none"!==this.layoutType&&(this._layout=new Jw(this,{layoutType:this.layoutType,layoutLevel:this.layoutLevel,layoutOrient:this._orient,transformLayoutRect:this._transformLayoutRect,transformLayoutPosition:this._transformLayoutPosition}),this._orient&&"radius"!==this._orient&&"angle"!==this._orient&&this.layout&&(this._layout.layoutOrient=this._orient))}onLayoutStart(e,t,i){this._isLayout=!0,super.onLayoutStart(e,t,i)}onLayoutEnd(e){super.onLayoutEnd(e),this.updateLayoutAttribute();const t=this.getLayoutRect();!this._forceLayoutTag&&ty(this._lastLayoutRect,t)||(this._lastLayoutRect=Object.assign({},t)),this._forceLayoutTag=!1,this._isLayout=!1}afterSetLayoutStartPoint(e){}_forceLayout(){var e;this._isLayout||(this._forceLayoutTag=!0,null===(e=this._option.globalInstance.getChart())||void 0===e||e.setLayoutTag(!0))}getLayoutStartPoint(){return this._layout?this._layout.getLayoutStartPoint():this._layoutStartPos}setLayoutStartPosition(e){return this._layout?this._layout.setLayoutStartPosition(e):this._layoutStartPos=O(this._layoutStartPos,e)}getLayoutRect(){return this._layout?this._layout.getLayoutRect():this._layoutRect}setLayoutRect(e,t){return this._layout?this._layout.setLayoutRect(e):this._lastLayoutRect=O(this._layoutRect,e)}getLastComputeOutBounds(){var e;return null===(e=this._layout)||void 0===e?void 0:e.getLastComputeOutBounds()}setAttrFromSpec(){var e,t,i;super.setAttrFromSpec(),this.layoutClip=null!==(e=this._spec.clip)&&void 0!==e?e:this.layoutClip,this.layoutZIndex=null!==(t=this._spec.zIndex)&&void 0!==t?t:this.layoutZIndex,this.layoutType=null!==(i=this._spec.layoutType)&&void 0!==i?i:this.layoutType}}class tC extends Zw{_initTheme(e,t){return{spec:e,theme:this._theme}}}class iC extends eC{getMaxWidth(){return this._layout.maxWidth}setMaxWidth(e){this._layout.maxWidth=e}getMaxHeight(){return this._layout.maxHeight}setMaxHeight(e){this._layout.maxHeight=e}getGroupMark(){return this._groupMark}getInteractionMark(){return this._interactionMark}getStackInverse(){return!0===this._spec.stackInverse}constructor(e,t){var i;super(e,t),this.transformerConstructor=tC,this.modelType="region",this.specKey="region",this.type=iC.type,this._series=[],this.layoutType="region",this.layoutZIndex=zw.Region,this.interaction=new ww,this.seriesDataFilterOver=()=>{this.event.emit(Ir.regionSeriesDataFilterOver,{model:this}),this._series.forEach((e=>{e.getViewDataFilter()&&e.reTransformViewData()}))},this.getBoundsInRect=()=>({x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}),this.userId=e.id,this.coordinate=null!==(i=e.coordinate)&&void 0!==i?i:"cartesian",this._option.animation&&(this.animate=new qw({getCompiler:t.getCompiler})),this.interaction.setDisableActiveEffect(this._option.disableTriggerEvent)}_getClipDefaultValue(){var e,t,i,n;const r=this._option.getChart().getSpec(),s=null===(t=null===(e=r.dataZoom)||void 0===e?void 0:e.some)||void 0===t?void 0:t.call(e,(e=>{var t;return"axis"===(null!==(t=e.filterMode)&&void 0!==t?t:"filter")})),a=null===(n=null===(i=r.scrollBar)||void 0===i?void 0:i.some)||void 0===n?void 0:n.call(i,(e=>{var t;return"axis"===(null!==(t=e.filterMode)&&void 0!==t?t:"axis")}));return!(!s&&!a)||this._layout.layoutClip}created(){var e;this.initLayout(),super.created();const t=null!==(e=this._spec.clip)&&void 0!==e?e:this._getClipDefaultValue();this._groupMark=this._createGroupMark("regionGroup",this.userId,this.layoutZIndex),this._interactionMark=this._createGroupMark("regionInteractionGroup",this.userId+"_interaction",zw.Interaction),this._spec.style&&(this._backgroundMark=this._createMark({type:"rect",name:"regionBackground"}),t&&(this._foregroundMark=this._createMark({type:"rect",name:"regionForeground"})),[this._backgroundMark,this._foregroundMark].forEach((e=>{e&&(e.created(),this.setMarkStyle(e,{width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height},"normal",Tw.Built_In),this._groupMark.addMark(e))})),this._backgroundMark&&this._backgroundMark.setZIndex(0),this._foregroundMark&&this._foregroundMark.setZIndex(zw.Mark+1)),this.createTrigger()}_createGroupMark(e,t,i){var n,r;const s=this._createMark({type:"group",name:e});s.setUserId(t),s.setZIndex(i);const a=null!==(n=this._spec.clip)&&void 0!==n?n:this._getClipDefaultValue();return this.setMarkStyle(s,{x:()=>this.getLayoutStartPoint().x,y:()=>this.getLayoutStartPoint().y,width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height,clip:a},"normal",Tw.Built_In),this.setMarkStyle(s,{cornerRadius:null===(r=this._spec.style)||void 0===r?void 0:r.cornerRadius},"normal",Tw.User_Mark),this._marks.addMark(s),s}init(e){super.init(e),this.initMark(),this.initSeriesDataflow(),this.initInteraction(),this.initTrigger()}initMark(){this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}_initBackgroundMarkStyle(){var e,t;this._backgroundMark&&(this.setMarkStyle(this._backgroundMark,Object.assign({fillOpacity:(null===(e=this._spec.style)||void 0===e?void 0:e.fill)?1:0},this._spec.style),"normal",Tw.User_Mark),(null!==(t=this._spec.clip)&&void 0!==t?t:this._getClipDefaultValue())&&this.setMarkStyle(this._backgroundMark,{strokeOpacity:0},"normal",Tw.Built_In))}_initForegroundMarkStyle(){this._foregroundMark&&this.setMarkStyle(this._foregroundMark,Object.assign(Object.assign({},this._spec.style),{fillOpacity:0}),"normal",Tw.User_Mark)}_compareSpec(e,t){const i=super._compareSpec(e,t);return ty(null==t?void 0:t.style,null==e?void 0:e.style)||(i.reMake=!0),i}reInit(e){super.reInit(e),this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}addSeries(e){e&&(this._series.includes(e)||this._series.push(e))}removeSeries(e){if(!e)return;const t=this._series.findIndex((t=>t===e));t>=0&&this._series.splice(t,1)}getSeries(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._series.filter((t=>{var i,n;return(!e.name||(null==t?void 0:t.name)===e.name)&&(!e.userId||z(e.userId).includes(t.userId))&&(!x(e.specIndex)||!t.getSpecIndex||z(e.specIndex).includes(t.getSpecIndex()))&&(!e.id||t.id===e.id)&&(!e.type||t.type===e.type)&&(!e.coordinateType||t.coordinate===e.coordinateType)&&(!e.dataName||(null===(n=null===(i=t.getRawData)||void 0===i?void 0:i.call(t))||void 0===n?void 0:n.name)===e.dataName)}))}getSeriesInName(e){return this.getSeries({name:e})[0]}getSeriesInUserId(e){return this.getSeries({userId:e})[0]}getSeriesInId(e){return this.getSeries({id:e})[0]}getSeriesInType(e){return this.getSeries({type:e})}getSeriesInCoordinateType(e){return this.getSeries({coordinateType:e})}getSeriesInDataName(e){return this.getSeries({dataName:e})}onRender(e){}initSeriesDataflow(){const e=this._series.map((e=>{var t;return null!==(t=e.getViewDataFilter())&&void 0!==t?t:e.getViewData()})).filter((e=>!!e));this._option.dataSet.multipleDataViewAddListener(e,"change",this.seriesDataFilterOver)}release(){super.release(),this._series=[]}createTrigger(){const e=Object.assign(Object.assign({},this._option),{model:this,interaction:this.interaction});this._trigger=new yw(e)}initTrigger(){this._series.forEach((e=>{e.getMarksWithoutRoot().forEach((e=>{this._trigger.registerMark(e)}))})),this._trigger.init()}initInteraction(){this._series.forEach((e=>{e.getMarksWithoutRoot().forEach((e=>{for(const t in mw)ay(e.stateStyle[mw[t]])||this.interaction.registerMark(mw[t],e)}))}))}compileMarks(e){this.getMarks().forEach((t=>{var i;t.compile({group:e}),null===(i=t.getProduct())||void 0===i||i.configure({context:{model:this}}).layout(((e,t,i,n)=>{}))}))}compile(){var e;null===(e=this.animate)||void 0===e||e.compile(),this.compileMarks()}onLayoutEnd(e){this._series.forEach((t=>t.onLayoutEnd(e))),super.onLayoutEnd(e)}}function nC(e){const t=[],i=[],n=[];return e.forEach((e=>{P(e.getSpec().position)||"start"===e.getSpec().position?t.push(e):"middle"===e.getSpec().position?i.push(e):"end"===e.getSpec().position&&n.push(e)})),{startItems:t,endItems:n,middleItems:i}}function rC(e,t,i){t?e.forEach((e=>{const t=H(e),n=t.getLayoutStartPoint().y+t.getLayoutRect().height-e[0].getLayoutStartPoint().y,r=(i-n)/2;e.forEach((e=>{e.setLayoutStartPosition({x:e.getLayoutStartPoint().x,y:e.getLayoutStartPoint().y+r})}))})):e.forEach((e=>{const t=H(e),n=t.getLayoutStartPoint().x+t.getLayoutRect().width-e[0].getLayoutStartPoint().x,r=(i-n)/2;e.forEach((e=>{e.setLayoutStartPosition({x:e.getLayoutStartPoint().x+r,y:e.getLayoutStartPoint().y})}))}))}function sC(e,t,i,n){let r;e.forEach(((e,s)=>{e.length>1&&(r=i[s],e.forEach((e=>{if(!e.alignSelf||"start"===e.alignSelf)return;const i=e.getLayoutStartPoint(),s="middle"===e.alignSelf?.5:1,a=t?r-(e.getLayoutRect().width+e.layoutPaddingLeft+e.layoutPaddingRight):r-(e.getLayoutRect().height+e.layoutPaddingTop+e.layoutPaddingBottom);t?e.setLayoutStartPosition({x:i.x+n*a*s,y:i.y}):e.setLayoutStartPosition({x:i.x,y:i.y+n*a*s})})))}))}function aC(e,t,i,n,r){if(e.length){let s=0;const a="right"===r,o=a?-1:1;let l=a?t.rightCurrent:t.leftCurrent,c=t.topCurrent;const h=[];let d=[];const u=[];e.forEach((e=>{const n=t.getItemComputeLayoutRect(e),r=e.computeBoundsInRect(n);e.setLayoutRect(r);const p=r.height+e.layoutPaddingTop+e.layoutPaddingBottom,g=r.width+e.layoutPaddingLeft+e.layoutPaddingRight,f=a?-r.width-e.layoutPaddingRight:e.layoutPaddingLeft;e.setLayoutStartPosition({x:l+e.layoutOffsetX+f,y:c+e.layoutOffsetY+e.layoutPaddingTop}),c+=p,c>i&&d.length?(u.push(s),l+=o*s,s=g,c=t.topCurrent+p,e.setLayoutStartPosition({x:l+e.layoutOffsetX+f,y:t.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),h.push(d),d=[e]):(s=Math.max(s,g),d.push(e))})),u.push(s),h.push(d),sC(h,!0,u,o),n&&rC(h,!0,i),a?t.rightCurrent=l+o*s:t.leftCurrent=l+o*s}}function oC(e,t,i,n){if(e.length){let i=0;const r="right"===n,s=r?-1:1;let a=r?t.rightCurrent:t.leftCurrent,o=t.bottomCurrent;const l=[];let c=[];const h=[];e.forEach((e=>{const n=t.getItemComputeLayoutRect(e),d=e.computeBoundsInRect(n);e.setLayoutRect(d);const u=d.height+e.layoutPaddingTop+e.layoutPaddingBottom,p=d.width+e.layoutPaddingLeft+e.layoutPaddingRight,g=r?-d.width-e.layoutPaddingRight:e.layoutPaddingLeft;o<u&&c.length?(h.push(i),a+=s*i,i=p,o=t.bottomCurrent,e.setLayoutStartPosition({x:a+e.layoutOffsetX+g,y:o+e.layoutOffsetY-d.height-e.layoutPaddingBottom}),l.push(c),c=[e]):(e.setLayoutStartPosition({x:a+e.layoutOffsetX+g,y:o+e.layoutOffsetY-d.height-e.layoutPaddingBottom}),i=Math.max(i,p),o-=u,c.push(e))})),h.push(i),l.push(c),sC(l,!0,h,s),r?t.rightCurrent=a+s*i:t.leftCurrent=a+s*i}}function lC(e,t,i,n,r){if(e.length){const s="top"===r,a=s?1:-1;let o=0,l=t.leftCurrent,c=s?t.topCurrent:t.bottomCurrent;const h=[];let d=[];const u=[];e.forEach((e=>{const n=t.getItemComputeLayoutRect(e),r=e.computeBoundsInRect(n);e.setLayoutRect(r);const p=r.height+e.layoutPaddingTop+e.layoutPaddingBottom,g=r.width+e.layoutPaddingLeft+e.layoutPaddingRight,f=s?e.layoutPaddingTop:-r.height-e.layoutPaddingBottom;e.setLayoutStartPosition({x:l+e.layoutOffsetX+e.layoutPaddingLeft,y:c+e.layoutOffsetY+f}),l+=g,l>i&&d.length?(u.push(o),l=t.leftCurrent+g,c+=a*o,o=p,e.setLayoutStartPosition({x:t.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft,y:c+e.layoutOffsetY+f}),h.push(d),d=[e]):(o=Math.max(o,p),d.push(e))})),u.push(o),h.push(d),sC(h,!1,u,a),n&&rC(h,!1,i),s?t.topCurrent=c+a*o:t.bottomCurrent=c+a*o}}function cC(e,t,i,n){if(e.length){const i="top"===n,r=i?1:-1;let s=0,a=t.rightCurrent,o=i?t.topCurrent:t.bottomCurrent;const l=[];let c=[];const h=[];e.forEach((e=>{const n=t.getItemComputeLayoutRect(e),h=e.computeBoundsInRect(n);e.setLayoutRect(h);const d=h.height+e.layoutPaddingTop+e.layoutPaddingBottom,u=h.width+e.layoutPaddingLeft+e.layoutPaddingRight,p=i?e.layoutPaddingTop:-h.height-e.layoutPaddingBottom;a<u&&c.length?(a=t.rightCurrent,o+=r*s,s=d,e.setLayoutStartPosition({x:t.rightCurrent+e.layoutOffsetX-h.width-e.layoutPaddingRight,y:o+e.layoutOffsetY+p}),l.push(c),c=[e]):(c.push(e),e.setLayoutStartPosition({x:a+e.layoutOffsetX-h.width-e.layoutPaddingRight,y:o+e.layoutOffsetY+p}),s=Math.max(s,d),a-=u)})),h.push(s),l.push(c),sC(l,!1,h,r),i?t.topCurrent=o+r*s:t.bottomCurrent=o+r*s}}iC.type="region",iC.transformerConstructor=tC,iC.specKey="region";class hC{constructor(e,t){this.leftCurrent=0,this.topCurrent=0,this.rightCurrent=0,this.bottomCurrent=0,this._onError=null==t?void 0:t.onError}_layoutInit(e,t,i,n){this._chartLayoutRect=i,this._chartViewBox=n,this.leftCurrent=i.x,this.topCurrent=i.y,this.rightCurrent=i.x+i.width,this.bottomCurrent=i.height+i.y,t.sort(((e,t)=>t.layoutLevel-e.layoutLevel))}_layoutNormalItems(e){this.layoutNormalInlineItems(e.filter((e=>"normal-inline"===e.layoutType))),this.layoutNormalItems(e.filter((e=>"normal"===e.layoutType)))}_groupItems(e){const t=e.filter((e=>"region"===e.layoutType)),i=e.filter((e=>"region-relative"===e.layoutType)),n=e.filter((e=>"region-relative-overlap"===e.layoutType)),r=i.concat(n),s={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}};return n.forEach((e=>{s[e.layoutOrient].items.push(e)})),{regionItems:t,relativeItems:i,relativeOverlapItems:n,allRelatives:r,overlapItems:s}}layoutItems(e,t,i,n){this._layoutInit(e,t,i,n),this._layoutNormalItems(t);const r={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},{regionItems:s,relativeItems:a,relativeOverlapItems:o,allRelatives:l,overlapItems:c}=this._groupItems(t);this.layoutRegionItems(s,a,o,c),this._processAutoIndent(s,a,o,c,l,r),this.layoutAbsoluteItems(t.filter((e=>"absolute"===e.layoutType)))}_processAutoIndent(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}},r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;if(r.some((e=>e.autoIndent))){const{top:a,bottom:o,left:l,right:c}=this._checkAutoIndent(r,s);(a||o||l||c)&&(this.topCurrent=s.top+a,this.bottomCurrent=s.bottom-o,this.leftCurrent=s.left+l,this.rightCurrent=s.right-c,this.layoutRegionItems(e,t,i,n))}}layoutNormalItems(e){e.forEach((e=>{const t=this.getItemComputeLayoutRect(e),i=e.computeBoundsInRect(t);e.setLayoutRect(i),"left"===e.layoutOrient?(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.leftCurrent+=i.width+e.layoutPaddingLeft+e.layoutPaddingRight):"top"===e.layoutOrient?(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.topCurrent+=i.height+e.layoutPaddingTop+e.layoutPaddingBottom):"right"===e.layoutOrient?(e.setLayoutStartPosition({x:this.rightCurrent+e.layoutOffsetX-i.width-e.layoutPaddingRight,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.rightCurrent-=i.width+e.layoutPaddingLeft+e.layoutPaddingRight):"bottom"===e.layoutOrient&&(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingRight,y:this.bottomCurrent+e.layoutOffsetY-i.height-e.layoutPaddingBottom}),this.bottomCurrent-=i.height+e.layoutPaddingTop+e.layoutPaddingBottom)}))}layoutNormalInlineItems(e){const t=e.filter((e=>"left"===e.layoutOrient)),i=e.filter((e=>"right"===e.layoutOrient)),n=e.filter((e=>"top"===e.layoutOrient)),r=e.filter((e=>"bottom"===e.layoutOrient)),s=this._chartLayoutRect.width+this._chartLayoutRect.x,a=this._chartLayoutRect.height+this._chartLayoutRect.y;t.length&&function(e,t,i){const{startItems:n,middleItems:r,endItems:s}=nC(e);n.length&&aC(n,t,i,!1,"left"),r.length&&aC(r,t,i,!0,"left"),s.length&&oC(s,t,0,"left")}(t,this,a),n.length&&function(e,t,i){const{startItems:n,middleItems:r,endItems:s}=nC(e);n.length&&lC(n,t,i,!1,"top"),r.length&&lC(r,t,i,!0,"top"),s.length&&cC(s,t,0,"top")}(n,this,s),i.length&&function(e,t,i){const{startItems:n,middleItems:r,endItems:s}=nC(e);n.length&&aC(n,t,i,!1,"right"),r.length&&aC(r,t,i,!0,"right"),s.length&&oC(s,t,0,"right")}(i,this,a),r.length&&function(e,t,i){const{startItems:n,middleItems:r,endItems:s}=nC(e);n.length&&lC(n,t,i,!1,"bottom"),r.length&&lC(r,t,i,!0,"bottom"),s.length&&cC(s,t,0,"bottom")}(r,this,s)}_layoutRelativeOverlap(e,t){t.items.forEach((e=>{const i=this.getItemComputeLayoutRect(e),n=e.computeBoundsInRect(i);t.rect.width=Math.max(n.width,t.rect.width),t.rect.height=Math.max(n.height,t.rect.height)})),t.items.forEach((i=>{i.setLayoutRect(t.rect),"left"===e?i.setLayoutStartPosition({x:this.leftCurrent+i.layoutOffsetX+i.layoutPaddingLeft}):"right"===e?i.setLayoutStartPosition({x:this.rightCurrent+i.layoutOffsetX+i.layoutPaddingLeft}):"top"===e?i.setLayoutStartPosition({x:this.topCurrent+i.layoutOffsetX+i.layoutPaddingLeft}):i.setLayoutStartPosition({x:this.bottomCurrent+i.layoutOffsetX+i.layoutPaddingLeft})})),"left"===e?this.leftCurrent+=t.rect.width:"right"===e?this.rightCurrent-=t.rect.width:"top"===e?this.topCurrent+=t.rect.height:this.bottomCurrent-=t.rect.height}_layoutRelativeItem(e,t){const i=e.computeBoundsInRect(t);"left"===e.layoutOrient||"right"===e.layoutOrient?e.setLayoutRect({width:i.width}):e.setLayoutRect({height:i.height}),"left"===e.layoutOrient?(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft}),this.leftCurrent+=i.width+e.layoutPaddingLeft+e.layoutPaddingRight):"right"===e.layoutOrient?(this.rightCurrent-=i.width+e.layoutPaddingLeft+e.layoutPaddingRight,e.setLayoutStartPosition({x:this.rightCurrent+e.layoutOffsetX+e.layoutPaddingLeft})):"top"===e.layoutOrient?(e.setLayoutStartPosition({y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.topCurrent+=i.height+e.layoutPaddingTop+e.layoutPaddingBottom):"bottom"===e.layoutOrient&&(this.bottomCurrent-=i.height+e.layoutPaddingTop+e.layoutPaddingBottom,e.setLayoutStartPosition({y:this.bottomCurrent+e.layoutOffsetY+e.layoutPaddingTop}))}_layoutRegionItem(e,t,i){const n=Math.max(Math.min(t,...e.map((e=>{var t;return null!==(t=e.maxWidth)&&void 0!==t?t:Number.MAX_VALUE}))),0),r=Math.max(Math.min(i,...e.map((e=>{var t;return null!==(t=e.maxHeight)&&void 0!==t?t:Number.MAX_VALUE}))),0);return e.forEach((e=>{e.setLayoutRect({width:n,height:r}),e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop})})),{regionHeight:r,regionWidth:n}}layoutRegionItems(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}},r=this.rightCurrent-this.leftCurrent,s=this.bottomCurrent-this.topCurrent;t.filter((e=>"left"===e.layoutOrient||"right"===e.layoutOrient)).forEach((e=>{this._layoutRelativeItem(e,this.getItemComputeLayoutRect(e))})),this._layoutRelativeOverlap("left",n.left),this._layoutRelativeOverlap("right",n.right),r=this.rightCurrent-this.leftCurrent,t.filter((e=>"top"===e.layoutOrient||"bottom"===e.layoutOrient)).forEach((e=>{this._layoutRelativeItem(e,this.getItemComputeLayoutRect(e))})),this._layoutRelativeOverlap("top",n.top),this._layoutRelativeOverlap("bottom",n.bottom),s=this.bottomCurrent-this.topCurrent;const{regionWidth:a,regionHeight:o}=this._layoutRegionItem(e,r,s);t.concat(i).forEach((t=>{if(["left","right"].includes(t.layoutOrient)){const i=this.filterRegionsWithID(e,t.layoutBindRegionID[0]);t.setLayoutRect({height:i.getLayoutRect().height}),t.setLayoutStartPosition({y:i.getLayoutStartPoint().y+t.layoutOffsetY+t.layoutPaddingTop}),"right"===t.layoutOrient&&t.setLayoutStartPosition({x:t.getLayoutStartPoint().x+a-r})}else if(["top","bottom"].includes(t.layoutOrient)){const i=this.filterRegionsWithID(e,t.layoutBindRegionID[0]);t.setLayoutRect({width:i.getLayoutRect().width}),t.setLayoutStartPosition({x:i.getLayoutStartPoint().x+t.layoutOffsetX+t.layoutPaddingLeft}),"bottom"===t.layoutOrient&&t.setLayoutStartPosition({y:t.getLayoutStartPoint().y+o-s})}}))}layoutAbsoluteItems(e){e.forEach((e=>{e.absoluteLayoutInRect(this._chartLayoutRect)}))}filterRegionsWithID(e,t){var i;const n=e.find((e=>e.getModelId()===t));return n||(null!==(i=this._onError)&&void 0!==i?i:fe)("can not find target region item, invalid id"),n}getItemComputeLayoutRect(e){return{width:this.rightCurrent-this.leftCurrent-e.layoutPaddingLeft-e.layoutPaddingRight,height:this.bottomCurrent-this.topCurrent-e.layoutPaddingTop-e.layoutPaddingBottom}}_checkAutoIndent(e,t){const i={top:0,left:0,bottom:0,right:0};return e.forEach((e=>{if(!e.getModelVisible()||!e.autoIndent)return;const n="left"===e.layoutOrient||"right"===e.layoutOrient,r=e.getLastComputeOutBounds(),s=this._getOutInLayout(r,e,t);n?(i.top=Math.max(i.top,s.top),i.bottom=Math.max(i.bottom,s.bottom)):(i.left=Math.max(i.left,s.left),i.right=Math.max(i.right,s.right))})),i}_getOutInLayout(e,t,i){const{x:n,y:r}=t.getLayoutStartPoint(),{width:s,height:a}=t.getLayoutRect();return{left:i.left-(n-e.x1),right:n+s+e.x2-i.right,top:i.top-(r-e.y1),bottom:r+a+e.y2-i.bottom}}}function dC(e,t,i){x(t)||(t=e,e=0),x(i)||(i=1);let n=-1;const r=0|Math.max(0,Math.ceil((t-e)/i)),s=new Array(r);for(;++n<r;)s[n]=e+n*i;return s}hC.type="base";const uC=e=>{let t=null,i=null;return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t&&r.every(((e,i)=>e===t[i]))||(t=r,i=e(...r)),i}};function pC(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;for(P(n)&&(n=e.length);i<n;){const r=i+n>>>1;Rn(e[r],t)>0?n=r:i=r+1}return i}function gC(e){return e}const fC=e=>e<0?-Math.sqrt(-e):Math.sqrt(e),mC=e=>e<0?-e*e:e*e,vC=e=>-Math.log(-e),yC=e=>-Math.exp(-e),bC=e=>isFinite(e)?Math.pow(10,e):e<0?0:e,_C=e=>10===e?bC:e===Math.E?Math.exp:t=>Math.pow(e,t),xC=e=>e===Math.E?Math.log:10===e?Math.log10:2===e?Math.log2:(e=Math.log(e),t=>Math.log(t)/e),SC=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),wC=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e;function CC(e,t){if(e=Number(e),t=Number(t),t-=e)return i=>(i-e)/t;const i=Number.isNaN(t)?NaN:.5;return()=>i}function kC(e,t,i){const n=e[0],r=e[1],s=t[0],a=t[1];let o,l;return r<n?(o=CC(r,n),l=i(a,s)):(o=CC(n,r),l=i(s,a)),e=>l(o(e))}function AC(e,t,i){let n;return n=1===e?e+2*i:e-t+2*i,e?n>0?n:1:0}function EC(e,t,i,n){return 1===i&&(i=0),AC(e,i,n)*(t/(1-i))}function TC(e,t){const i=(e[1]-e[0])/(t[1]-t[0]),n=e[0]-i*t[0];return[n,i+n]}function OC(e,t,i){const n=Math.min(e.length,t.length)-1,r=new Array(n),s=new Array(n);let a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)r[a]=CC(e[a],e[a+1]),s[a]=i(t[a],t[a+1]);return function(t){const i=pC(e,t,1,n)-1;return s[i](r[i](t))}}const PC=(e,t)=>{const i=e.slice();let n=0,r=i.length-1,s=i[n],a=i[r];return a<s&&([n,r]=[r,n],[s,a]=[a,s]),i[n]=t.floor(s),i[r]=t.ceil(a),i},MC=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Math.floor(Math.log10(e)),n=e/Math.pow(10,i);let r;return r=t?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10,r*Math.pow(10,i)},IC=Math.sqrt(50),RC=Math.sqrt(10),DC=Math.sqrt(2),LC=[1,2,5,10],jC=(e,t,i)=>{let n=1,r=e;const s=Math.floor((t-1)/2),a=Math.abs(e);return e>=0&&e<=Number.MIN_VALUE?r=0:e<0&&e>=-Number.MIN_VALUE?r=-(t-1):!i&&a<1?n=zC(a).step:(i||a>1)&&(r=Math.floor(e)-s*n),n>0?(e>0?r=Math.max(r,0):e<0&&(r=Math.min(r,-(t-1)*n)),dC(0,t).map((e=>r+e*n))):e>0?BC(0,-(t-1)/n,n):BC((t-1)/n,0,n)},FC=uC(((e,t,i,n)=>{let r,s,a,o,l=-1;if(i=+i,(e=+e)===(t=+t))return[e];if(Math.abs(e-t)<=Number.MIN_VALUE&&i>0)return[e];if((r=t<e)&&(s=e,e=t,t=s),o=HC(e,t,i).step,!isFinite(o))return[];if(o>0){let i=Math.round(e/o),n=Math.round(t/o);for(i*o<e&&++i,n*o>t&&--n,a=new Array(s=n-i+1);++l<s;)a[l]=(i+l)*o}else if(o<0&&(null==n?void 0:n.noDecimals)){o=1;const i=Math.ceil(e),n=Math.floor(t);if(!(i<=n))return[];for(a=new Array(s=n-i+1);++l<s;)a[l]=i+l}else{o=-o;let i=Math.round(e*o),n=Math.round(t*o);for(i/o<e&&++i,n/o>t&&--n,a=new Array(s=n-i+1);++l<s;)a[l]=(i+l)/o}return r&&a.reverse(),a})),BC=(e,t,i)=>{let n,r,s=-1;if(i>0){let a=Math.floor(e/i),o=Math.ceil(t/i);for((a+1)*i<e&&++a,(o-1)*i>t&&--o,r=new Array(n=o-a+1);++s<n;)r[s]=(a+s)*i}else{i=-i;let a=Math.floor(e*i),o=Math.ceil(t*i);for((a+1)/i<e&&++a,(o-1)/i>t&&--o,r=new Array(n=o-a+1);++s<n;)r[s]=(a+s)/i}return r},NC=uC(((e,t,i,n)=>{let r,s,a;if(i=+i,(e=+e)===(t=+t))return jC(e,i,null==n?void 0:n.noDecimals);if(Math.abs(e-t)<=Number.MIN_VALUE&&i>0)return jC(e,i,null==n?void 0:n.noDecimals);(r=t<e)&&(a=e,e=t,t=a);const o=HC(e,t,i);let l=o.step;if(!isFinite(l))return[];if(l>0){let n=1;const{power:r,gap:a}=o,c=10===a?2*10**r:1*10**r;for(;n<=5&&(s=BC(e,t,l),s.length>i+1)&&i>2;)l+=c,n+=1;i>2&&s.length<i-1&&(s=((e,t,i)=>{let n;const r=e[0],s=e[e.length-1],a=t-e.length;if(s<=0){const t=[];for(n=a;n>=1;n--)t.push(r-n*i);return t.concat(e)}if(r>=0){for(n=1;n<=a;n++)e.push(s+n*i);return e}let o=[];const l=[];for(n=1;n<=a;n++)n%2==0?o=[r-Math.floor(n/2)*i].concat(o):l.push(s+Math.ceil(n/2)*i);return o.concat(e).concat(l)})(s,i,l))}else(null==n?void 0:n.noDecimals)&&l<0&&(l=1),s=BC(e,t,l);return r&&s.reverse(),s})),zC=e=>{const t=Math.floor(Math.log(e)/Math.LN10),i=e/10**t;let n=LC[0];return i>=IC?n=LC[3]:i>=RC?n=LC[2]:i>=DC&&(n=LC[1]),t>=0?{step:n*10**t,gap:n,power:t}:{step:-(10**-t)/n,gap:n,power:t}};function HC(e,t,i){const n=(t-e)/Math.max(0,i);return zC(n)}function VC(e,t,i){let n;if(i=+i,(e=+e)===(t=+t)&&i>0)return[e];if(i<=0||0===(n=function(e,t,i){return(t-e)/Math.max(1,i-1)}(e,t,i))||!isFinite(n))return[];const r=new Array(i);for(let s=0;s<i;s++)r[s]=e+s*n;return r}function UC(e,t,i){let n,r,s=-1;if(i=+i,(r=(t=+t)<(e=+e))&&(n=e,e=t,t=n),!isFinite(i)||t-e<=i)return[e];const a=Math.floor((t-e)/i+1),o=new Array(a);for(;++s<a;)o[s]=e+s*i;return r&&o.reverse(),o}function WC(e){let t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=0,s=e.length-1,a=e[r],o=e[s],l=10;for(o<a&&(i=a,a=o,o=i,i=r,r=s,s=i);l-- >0;){if(i=HC(a,o,n).step,i===t)return e[r]=a,e[s]=o,e;if(i>0)a=Math.floor(a/i)*i,o=Math.ceil(o/i)*i;else{if(!(i<0))break;a=Math.ceil(a*i)/i,o=Math.floor(o*i)/i}t=i}}function GC(e,t){const i=l(t.forceMin),n=l(t.forceMax);let r=null;const s=[];let a=null;const o=i&&n?e=>e>=t.forceMin&&e<=t.forceMax:i?e=>e>=t.forceMin:n?e=>e<=t.forceMax:null;return i?s[0]=t.forceMin:l(t.min)&&t.min<=Math.min(e[0],e[e.length-1])&&(s[0]=t.min),n?s[1]=t.forceMax:l(t.max)&&t.max>=Math.max(e[0],e[e.length-1])&&(s[1]=t.max),l(s[0])&&l(s[1])?(a=e.slice(),a[0]=s[0],a[a.length-1]=s[1]):r=l(s[0])||l(s[1])?l(s[0])?"max":"min":"all",{niceType:r,niceDomain:a,niceMinMax:s,domainValidator:o}}const KC=(e,t,i)=>Math.abs(t-e)<1?+i.toFixed(1):Math.round(+i),YC=uC(((e,t,i,n,r,s,a)=>{let o=e,l=t;const c=l<o;c&&([o,l]=[l,o]);let h,d,u=r(o),p=r(l),g=[];if(!(n%1)&&p-u<i){if(u=Math.floor(u),p=Math.ceil(p),o>0){for(;u<=p;++u)for(h=1;h<n;++h)if(d=u<0?h/s(-u):h*s(u),!(d<o)){if(d>l)break;g.push(d)}}else for(;u<=p;++u)for(h=n-1;h>=1;--h)if(d=u>0?h/s(-u):h*s(u),!(d<o)){if(d>l)break;g.push(d)}2*g.length<i&&(g=NC(o,l,i))}else g=NC(u,p,Math.min(p-u,i)).map(s);return g=g.filter((e=>0!==e)),(null==a?void 0:a.noDecimals)&&(g=Array.from(new Set(g.map((e=>Math.floor(e)))))),c?g.reverse():g})),XC=uC(((e,t,i,n,r,s)=>{const a=[],o={},l=r(e),c=r(t);let h=[];if(Number.isInteger(n))h=NC(l,c,i);else{const e=(c-l)/(i-1);for(let t=0;t<i;t++)h.push(l+t*e)}return h.forEach((i=>{const r=s(i),l=Number.isInteger(n)?KC(e,t,r):KC(e,t,MC(r)),c=KC(e,t,((e,t)=>{let i,n;return t[0]<t[1]?(i=t[0],n=t[1]):(i=t[1],n=t[0]),Math.min(Math.max(e,i),n)})(l,[e,t]));!o[c]&&!isNaN(c)&&h.length>1&&(o[c]=1,a.push(c))})),a})),qC=uC(((e,t,i,n,r)=>VC(n(e),n(t),i).map((e=>MC(r(e))))));uC(((e,t,i,n,r)=>UC(n(e),n(t),i).map((e=>MC(r(e))))));class ZC{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(e){return this._wholeRange?this._wholeRange:x(this._rangeFactorStart)&&x(this._rangeFactorEnd)&&2===e.length?(this._wholeRange=TC(e,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):e}rangeFactor(e,t,i){return e?(2===e.length&&e.every((e=>e>=0&&e<=1))&&(this._wholeRange=null,0===e[0]&&1===e[1]?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=e[0],this._rangeFactorEnd=e[1])),this):i?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):x(this._rangeFactorStart)&&x(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(e,t){var i;return P(e)?this._rangeFactorStart:(e>=0&&e<=1&&(this._wholeRange=null,0!==e||!P(this._rangeFactorEnd)&&1!==this._rangeFactorEnd?(this._rangeFactorStart=e,this._rangeFactorEnd=null!==(i=this._rangeFactorEnd)&&void 0!==i?i:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}rangeFactorEnd(e,t){var i;return P(e)?this._rangeFactorEnd:(e>=0&&e<=1&&(this._wholeRange=null,0!==e||!P(this._rangeFactorStart)&&0!==this._rangeFactorStart?(this._rangeFactorEnd=e,this._rangeFactorStart=null!==(i=this._rangeFactorStart)&&void 0!==i?i:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}generateFishEyeTransform(){var e;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);const{distortion:t=2,radiusRatio:i=.1,radius:n}=this._fishEyeOptions,r=this.range(),s=r[0],a=r[r.length-1],o=Math.min(s,a),l=Math.max(s,a),c=At(null!==(e=this._fishEyeOptions.focus)&&void 0!==e?e:0,o,l),h=P(n)?(l-o)*i:n;let d=Math.exp(t);d=d/(d-1)*h;const u=t/h;this._fishEyeTransform=e=>{const t=Math.abs(e-c);if(t>=h)return e;if(t<=1e-6)return c;const i=d*(1-Math.exp(-t*u))/t*.75+.25;return c+(e-c)*i}}unknown(e){return arguments.length?(this._unknown=e,this):this._unknown}}function QC(e,t){const i=e.r,n=t.r,r=e.g,s=t.g,a=e.b,o=t.b,l=e.opacity,c=t.opacity;return e=>{const t=Math.round(i*(1-e)+n*e),h=Math.round(r*(1-e)+s*e),d=Math.round(a*(1-e)+o*e);return new Ft(t,h,d,l*(1-e)+c*e)}}function $C(e,t){return i=>e*(1-i)+t*i}function JC(e,t){return function(i){return Math.round(e*(1-i)+t*i)}}const ek=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tk=new RegExp(ek.source,"g");const{interpolateRgb:ik}=e;function nk(e,t){const i=typeof t;let n;if(P(t)||"boolean"===i)return()=>t;if("number"===i)return $C(e,t);if("string"===i){if(n=jt.parseColorString(t)){const t=ik(jt.parseColorString(e),n);return e=>t(e).formatRgb()}return $C(Number(e),Number(t))}return t instanceof Ft?ik(e,t):t instanceof jt?ik(e.color,t.color):t instanceof Date?function(e,t){const i=e.valueOf(),n=t.valueOf(),r=new Date;return e=>(r.setTime(i*(1-e)+n*e),r)}(e,t):$C(Number(e),Number(t))}function rk(e,t){let i;return e>t&&(i=e,e=t,t=i),i=>Math.max(e,Math.min(t,i))}class sk extends ZC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gC,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gC;super(),this._unknown=void 0,this.transformer=e,this.untransformer=t,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=gC,this._piecewise=kC,this._interpolate=nk}calculateVisibleDomain(e){var t;return x(this._rangeFactorStart)&&x(this._rangeFactorEnd)&&2===e.length?[this.invert(e[0]),this.invert(e[1])]:null!==(t=this._niceDomain)&&void 0!==t?t:this._domain}fishEye(e,t,i){return e||i?(this._fishEyeOptions=e,this._fishEyeTransform=null,this.rescale(t)):this._fishEyeOptions}scale(e){var t;if(e=Number(e),Number.isNaN(e)||this._domainValidator&&!this._domainValidator(e))return this._unknown;this._output||(this._output=this._piecewise((null!==(t=this._niceDomain)&&void 0!==t?t:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const i=this._output(this.transformer(this._clamp(e)));return this._fishEyeTransform?this._fishEyeTransform(i):i}invert(e){var t;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),(null!==(t=this._niceDomain)&&void 0!==t?t:this._domain).map(this.transformer),$C)),this._clamp(this.untransformer(this._input(e)))}domain(e,t){var i;if(!e)return(null!==(i=this._niceDomain)&&void 0!==i?i:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;const n=Array.from(e,Dn);return this._domain=n,this.rescale(t)}range(e,t){if(!e)return this._range.slice();const i=Array.from(e);return this._range=i,this.rescale(t)}rangeRound(e,t){const i=Array.from(e);return this._range=i,this._interpolate=JC,this.rescale(t)}rescale(e){var t;if(e)return this;const i=null!==(t=this._niceDomain)&&void 0!==t?t:this._domain,n=i.length,r=this._range.length;let s=Math.min(n,r);if(n&&n<r&&this._forceAlign){const e=r-n+1,t=i[n-1],a=n>=2?(t-i[n-2])/e:0;for(let r=1;r<=e;r++)i[n-2+r]=t-a*(e-r);s=r}return this._autoClamp&&(this._clamp=rk(i[0],i[s-1])),this._piecewise=s>2?OC:kC,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(e,t,i){return arguments.length?(t?(this._autoClamp=!1,this._clamp=t):(this._autoClamp=!!e,this._clamp=e?void 0:gC),this.rescale(i)):this._clamp!==gC}interpolate(e,t){return arguments.length?(this._interpolate=e,this.rescale(t)):this._interpolate}ticks(){return[]}tickData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=this.ticks(e);return(null!=t?t:[]).map(((e,t)=>({index:t,tick:e,value:(this.scale(e)-this._range[0])/(this._range[1]-this._range[0])})))}rangeFactor(e,t){return e?(super.rangeFactor(e),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(e,t){return P(e)?super.rangeFactorStart():(super.rangeFactorStart(e),this._output=this._input=null,this)}rangeFactorEnd(e,t){return P(e)?super.rangeFactorEnd():(super.rangeFactorEnd(e),this._output=this._input=null,this)}forceAlignDomainRange(e){return arguments.length?(this._forceAlign=e,this):this._forceAlign}}class ak extends sk{constructor(){super(...arguments),this.type=Sn.Linear}clone(){return(new ak).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}tickFormat(){return()=>{}}d3Ticks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0;const i=this.calculateVisibleDomain(this._range);return FC(i[0],i[i.length-1],e,t)}ticks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0;var i;if(x(this._rangeFactorStart)&&x(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&2===this._range.length||!this._niceType)return this.d3Ticks(e,t);const n=null!==(i=this._niceDomain)&&void 0!==i?i:this._domain,r=this._domain,s=n[0],a=n[n.length-1];let o=NC(r[0],r[r.length-1],e,t);if(!o.length)return o;if(this._domainValidator)o=o.filter(this._domainValidator);else if((o[0]!==s||o[o.length-1]!==a)&&this._niceType){const e=n.slice();if("all"===this._niceType?(e[0]=o[0],e[e.length-1]=o[o.length-1],this._niceDomain=e,this.rescale()):"min"===this._niceType&&o[0]!==s?(e[0]=o[0],this._niceDomain=e,this.rescale()):"max"===this._niceType&&o[o.length-1]!==a&&(e[e.length-1]=o[o.length-1],this._niceDomain=e,this.rescale()),"all"!==this._niceType){const t=Math.min(e[0],e[e.length-1]),i=Math.max(e[0],e[e.length-1]);o=o.filter((e=>e>=t&&e<=i))}}return o}forceTicks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=this.calculateVisibleDomain(this._range);return VC(t[0],t[t.length-1],e)}stepTicks(e){const t=this.calculateVisibleDomain(this._range);return UC(t[0],t[t.length-1],e)}nice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0;var i,n;const r=this._domain;let s=[];if(t){const e=GC(r,t);if(s=e.niceMinMax,this._domainValidator=e.domainValidator,this._niceType=e.niceType,e.niceDomain)return this._niceDomain=e.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){const t=WC(r.slice(),e);"min"===this._niceType?t[t.length-1]=null!==(i=s[1])&&void 0!==i?i:t[t.length-1]:"max"===this._niceType&&(t[0]=null!==(n=s[0])&&void 0!==n?n:t[0]),this._niceDomain=t,this.rescale()}return this}niceMin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this._niceType="min";const t=this._domain[this._domain.length-1],i=WC(this.domain(),e);return i&&(i[i.length-1]=t,this._niceDomain=i,this.rescale()),this}niceMax(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this._niceType="max";const t=this._domain[0],i=WC(this._domain.slice(),e);return i&&(i[0]=t,this._niceDomain=i,this.rescale()),this}}const ok=Symbol("implicit");class lk extends ZC{specified(e){var t;return e?(this._specified=Object.assign(null!==(t=this._specified)&&void 0!==t?t:{},e),this):Object.assign({},this._specified)}_getSpecifiedValue(e){if(this._specified)return this._specified[e]}constructor(){super(),this.type=Sn.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=ok}clone(){return(new lk).domain(this._domain).range(this._ordinalRange).unknown(this._unknown)}calculateVisibleDomain(e){return x(this._rangeFactorStart)&&x(this._rangeFactorEnd)&&2===e.length?[this.invert(e[0]),this.invert(e[1])]:this._domain}scale(e){const t="".concat(e),i=this._getSpecifiedValue(t);if(void 0!==i)return i;let n=this._index.get(t);if(!n){if(this._unknown!==ok)return this._unknown;n=this._domain.push(e),this._index.set(t,n)}const r=this._ordinalRange[(n-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(r):r}invert(e){let t=0;for(;t<this._ordinalRange.length&&this._ordinalRange[t]!==e;)t++;return this._domain[(t-1)%this._domain.length]}domain(e){if(!e)return this._domain.slice();this._domain=[],this._index=new Map;for(const t of e){const e="".concat(t);this._index.has(e)||this._index.set(e,this._domain.push(t))}return this}range(e){if(!e)return this._ordinalRange.slice();const t=Array.from(e);return this._ordinalRange=t,this}}function ck(e,t,i,n){let r;const s=[];let a;if(t=Math.floor(+t),e=Math.floor(+e),!(i=Math.floor(+i)))return[];if(e===t)return[e];if(r=t<e){const i=e;e=t,t=i}let o=rk(1,t-e+1)(i);if(a=Math.floor((t-e+1)/o),!n)for(;Math.ceil((t-e+1)/a)>i&&o>1;)o-=1,a=Math.floor((t-e)/o);let l=e;for(;l<=t;)s.push(l),l+=a;return r&&s.reverse(),s}class hk extends lk{constructor(e){super(),this.type=Sn.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(e)}rescale(e,t){if(e)return this;this._wholeRange=null;const i=this._calculateWholeRange(this._range,t),n=super.domain().length,r=i[1]<i[0];let s=i[Number(r)-0];const a=i[1-Number(r)],o=AC(n,this._paddingInner,this._paddingOuter);return this._step=(a-s)/Math.max(1,o||1),this._round&&(this._step=Math.floor(this._step)),s+=(a-s-this._step*(n-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(s=Math.round(s),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:r,start:r?s+this._step*(n-1):s,count:n},this.generateFishEyeTransform(),this}scale(e){if(!this._bandRangeState)return;const t="".concat(e),i=this._getSpecifiedValue(t);if(void 0!==i)return i;let n=this._index.get(t);if(!n){if(this._unknown!==ok)return this._unknown;n=this._domain.push(e),this._index.set(t,n)}const{count:r,start:s,reverse:a}=this._bandRangeState,o=s+(n-1)%r*(a?-1:1)*this._step;return this._fishEyeTransform?this._fishEyeTransform(o):o}_calculateWholeRange(e,t){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let t;if(x(this._rangeFactorStart)&&x(this._rangeFactorEnd)&&2===e.length){const i=TC(e,[this._rangeFactorStart,this._rangeFactorEnd]);t=Math.abs(i[1]-i[0])}else t=Math.abs(e[1]-e[0]);const i=function(e,t,i,n,r){const s=AC(e,i,n);let a=t/Math.max(1,s||1);r&&(a=Math.floor(a));let o=a*(1-i);return r&&(o=Math.round(o)),o}(super.domain().length,t,this._paddingInner,this._paddingOuter,this._round);i<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):i>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=i,this._isFixed=!1)}if(this.isBandwidthFixed()){const i=EC(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(e[1]-e[0]),n=Math.min((e[1]-e[0])/i,1);if(x(this._rangeFactorStart)&&x(this._rangeFactorEnd)){if(i>0){const t=e[0]-i*this._rangeFactorStart,n=t+i;this._wholeRange=[t,n]}else{const t=e[1]+i*(1-this._rangeFactorEnd),n=t-i;this._wholeRange=[n,t]}const r=this._rangeFactorStart+n<=1,s=this._rangeFactorEnd-n>=0;"rangeFactorStart"===t&&r?this._rangeFactorEnd=this._rangeFactorStart+n:"rangeFactorEnd"===t&&s?this._rangeFactorStart=this._rangeFactorEnd-n:e[0]<=e[1]?r?this._rangeFactorEnd=this._rangeFactorStart+n:s?this._rangeFactorStart=this._rangeFactorEnd-n:(this._rangeFactorStart=0,this._rangeFactorEnd=n):s?this._rangeFactorStart=this._rangeFactorEnd-n:r?this._rangeFactorEnd=this._rangeFactorStart+n:(this._rangeFactorStart=1-n,this._rangeFactorEnd=1)}else this._rangeFactorStart=0,this._rangeFactorEnd=n,this._wholeRange=[e[0],e[0]+i];return this._wholeRange}return super._calculateWholeRange(e)}calculateWholeRangeSize(){const e=this._calculateWholeRange(this._range);return Math.abs(e[1]-e[0])}calculateVisibleDomain(e){const t=this._domain;if(x(this._rangeFactorStart)&&x(this._rangeFactorEnd)&&t.length){const i=this._getInvertIndex(e[0]),n=this._getInvertIndex(e[1]);return t.slice(Math.min(i,n),Math.max(i,n)+1)}return t}domain(e,t){return e?(super.domain(e),this.rescale(t)):super.domain()}range(e,t){return e?(this._range=[Dn(e[0]),Dn(e[1])],this.rescale(t)):this._range}rangeRound(e,t){return this._range=[Dn(e[0]),Dn(e[1])],this._round=!0,this.rescale(t)}ticks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=this.calculateVisibleDomain(this._range);return-1===e?t:ck(0,t.length-1,e,!1).map((e=>t[e]))}tickData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.ticks(e).map(((e,t)=>({index:t,tick:e,value:(this.scale(e)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])})))}forceTicks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=this.calculateVisibleDomain(this._range);return ck(0,t.length-1,e,!0).filter((e=>e<t.length)).map((e=>t[e]))}stepTicks(e){const t=this.calculateVisibleDomain(this._range);return function(e,t,i){const n=[];let r;if(i=rk(1,(t=Math.floor(+t))-(e=Math.floor(+e))+1)(Math.floor(+i)),r=t<e){const i=e;e=t,t=i}let s=e;for(;s<=t;)n.push(s),s+=i;return r&&n.reverse(),n}(0,t.length-1,e).map((e=>t[e]))}_getInvertIndex(e){let t=0;const i=this.step()/2,n=this.bandwidth()/2,r=this._domain.length,s=this.range(),a=s[0]>s[s.length-1];for(t=0;t<r;t++){const s=this.scale(this._domain[t])+n;if(0===t&&(!a&&!sb(e,s+i)||a&&!ab(e,s-i)))break;if(t===r-1)break;if(!ab(e,s-i)&&!sb(e,s+i))break}return t>=0&&t<=r-1?t:r-1}invert(e){return this._domain[this._getInvertIndex(e)]}padding(e,t){return void 0!==e?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(e)?Math.min.apply(null,e):e)),this._paddingInner=this._paddingOuter,this.rescale(t)):this._paddingInner}paddingInner(e,t){return void 0!==e?(this._paddingInner=Math.max(0,Math.min(1,e)),this.rescale(t)):this._paddingInner}paddingOuter(e,t){return void 0!==e?(this._paddingOuter=Math.max(0,Math.min(1,e)),this.rescale(t)):this._paddingOuter}step(){return this._step}round(e,t){return void 0!==e?(this._round=e,this.rescale(t)):this._round}align(e,t){return void 0!==e?(this._align=Math.max(0,Math.min(1,e)),this.rescale(t)):this._align}rangeFactor(e,t){return e?(super.rangeFactor(e),this.rescale(t)):super.rangeFactor()}rangeFactorStart(e,t){return P(e)?super.rangeFactorStart():(super.rangeFactorStart(e),this.rescale(t,"rangeFactorStart"))}rangeFactorEnd(e,t){return P(e)?super.rangeFactorEnd():(super.rangeFactorEnd(e),this.rescale(t,"rangeFactorEnd"))}bandwidth(e,t){return e?("auto"===e?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=e,this._isFixed=!0),this._userBandwidth=e,this.rescale(t)):this._bandwidth}maxBandwidth(e,t){return e?(this._maxBandwidth="auto"===e?void 0:e,this.rescale(t)):this._maxBandwidth}minBandwidth(e,t){return e?(this._minBandwidth="auto"===e?void 0:e,this.rescale(t)):this._minBandwidth}fishEye(e,t,i){return e||i?(this._fishEyeOptions=e,this._fishEyeTransform=null,this.rescale(t)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&l(this._userBandwidth)}clone(){var e,t,i;return new hk(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth(null!==(e=this._userBandwidth)&&void 0!==e?e:"auto",!0).maxBandwidth(null!==(t=this._maxBandwidth)&&void 0!==t?t:"auto",!0).minBandwidth(null!==(i=this._maxBandwidth)&&void 0!==i?i:"auto")}}class dk{constructor(){this.type=Sn.Threshold,this._range=[0,1],this._domain=[.5],this.n=1}unknown(e){return arguments.length?(this._unknown=e,this):this._unknown}scale(e){return!P(e)&&L(+e)?this._range[pC(this._domain,e,0,this.n)]:this._unknown}invertExtent(e){const t=this._range.indexOf(e);return[this._domain[t-1],this._domain[t]]}domain(e){return e?(this._domain=Array.from(e),this.n=Math.min(this._domain.length,this._range.length-1),this):this._domain.slice()}range(e){return e?(this._range=Array.from(e),this.n=Math.min(this._domain.length,this._range.length-1),this):this._range.slice()}clone(){return(new dk).domain(this._domain).range(this._range).unknown(this._unknown)}}class uk extends lk{range(e){return e?(this._range=e,this._resetRange(),this):super.range()}domain(e){return e?(super.domain(e),this._resetRange(),this):super.domain()}_resetRange(){if(!Yt(this._range))return void super.range(this._range);const e=Wt(this._range,this._domain);super.range(e)}}const pk={linear:ak,band:hk,point:class extends hk{constructor(e){super(!1),this.type=Sn.Point,this._padding=0,this.paddingInner(1,e),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}},ordinal:lk,threshold:dk,colorOrdinal:uk};function gk(e){const t=pk[e];return t?new t:null}function fk(e,t){if(!t)return e;const i=t.range(),n=Math.min(i[0],i[i.length-1]),r=Math.max(i[0],i[i.length-1]);return Math.min(Math.max(n,e),r)}function mk(e){return x(null==e?void 0:e.field)&&x(null==e?void 0:e.scale)}const vk=["line","area","trail"];function yk(e){return vk.includes(e)}class bk extends Xw{getStateInfoList(){return this._stateInfoList}constructor(e,t){super(e),this._stateInfoList=[],this._mark=t}_getDefaultStateMap(){return{markUpdateRank:1}}getStateInfo(e){return this._stateInfoList.find((t=>t.stateValue===e))}addStateInfo(e){if(this.getStateInfo(e.stateValue))return;e.level=e.level||0;let t=!0;for(let i=0;i<this._stateInfoList.length;i++){const n=this._stateInfoList[i].level;if(n&&n>e.level){this._stateInfoList.splice(i,0,e),t=!1;break}}t&&this._stateInfoList.push(e)}_clearStateBeforeSet(e){e.datums=null,e.items=null,e.fields=null,e.filter=null}changeStateInfo(e){const t=this.getStateInfo(e.stateValue);if(t){if(void 0!==e.datums&&(this._clearStateBeforeSet(t),t.datums=e.datums,t.datumKeys=e.datumKeys),void 0!==e.items&&(this._clearStateBeforeSet(t),t.items=e.items),void 0!==e.fields)if(this._clearStateBeforeSet(t),null===e.fields)t.fields=e.fields;else{t.fields=t.fields||{};for(const i in e.fields){const n=e.fields[i];t.fields[i]=t.fields[i]||{};const r=t.fields[i];x(n.domain)&&(r.domain=n.domain),x(n.type)&&(r.type=n.type)}}e.filter&&(this._clearStateBeforeSet(t),t.filter=e.filter)}else this.addStateInfo(e)}clearStateInfo(e){e.forEach((e=>{this.getStateInfo(e)&&this.changeStateInfo({stateValue:e,datumKeys:null,datums:null,fields:null,items:null,filter:null,cache:{}})}))}checkOneState(e,t,i,n){var r;n=m(yk)?n:!e.mark||yk(e.mark.markType);let s=!1,a=!1;if(x(i.datums)&&i.datums.length>0)s=this.checkDatumState(i,t,n),a=!0;else if(i.items)s=null!==(r=this.checkItemsState(i,e))&&void 0!==r&&r,a=!0;else if(i.fields)s=this.checkFieldsState(i,t,e,n),a=!0;else if(!s&&i.filter){const n={mark:this._mark,renderNode:e,type:e.mark.markType};s=i.filter(t,n),a=!0}return a?s?"in":"out":"skip"}checkState(e,t){const i=e.getStates().filter((e=>!!_w[e])).map((e=>[e,10])),n=!e.mark||yk(e.mark.markType);for(let r=0;r<this._stateInfoList.length;r++){const s=this._stateInfoList[r],a=this.checkOneState(e,t,s,n);"skip"!==a&&"in"===a&&i.push([s.stateValue,s.level])}return i.map((e=>e[0]))}checkDatumState(e,t,i){let n=!1;const r=i?t[0]:t;if(v(e.datums)){const t=e.datumKeys||Object.keys(e.datums[0]).filter((e=>!e.startsWith(Ge)));n=e.datums.some((e=>i&&v(null==e?void 0:e.items)?t.every((t=>{var i,n;return(null===(n=null===(i=null==e?void 0:e.items)||void 0===i?void 0:i[0])||void 0===n?void 0:n[t])===(null==r?void 0:r[t])})):t.every((t=>(null==e?void 0:e[t])===(null==r?void 0:r[t])))))}else n=D(e.datums)?(e.datumKeys||Object.keys(e.datums).filter((e=>!e.startsWith(Ge)))).every((t=>{var n,s;return i?(null===(n=e.datums.items)||void 0===n?void 0:n[0][t])===r[t]:(null===(s=e.datums)||void 0===s?void 0:s[t])===r[t]})):t===e.datums;return n}checkItemsState(e,t){var i;return null===(i=e.items)||void 0===i?void 0:i.includes(t)}checkFieldsState(e,t,i,n){var r;let s=!0;for(const a in e.fields){const o=e.fields[a],l=o.type,c=o.domain,h=n?null===(r=t[0])||void 0===r?void 0:r[a]:t[a];if(Cn(l)&&c.length>1){if(this.checkLinearFieldState(c,a,t,i,n)){s=!1;break}s=!0}else{if(!c.some((e=>e===h))){s=!1;break}s=!0}}return s}checkLinearFieldState(e,t,i,n,r){var s;const a=r?null===(s=i[0])||void 0===s?void 0:s[t]:i[t];return a<e[0]||a>e[e.length-1]}updateLayoutState(e){return this._stateMap.markUpdateRank++,this.updateState({markUpdateRank:this._stateMap.markUpdateRank},e)}compileState(e){e.state({callback:(e,t)=>this.checkState(t,e)})}}class _k extends Gw{getDataView(){return this._data}setDataView(e){this._data=e}getLatestData(){var e;return null===(e=this._data)||void 0===e?void 0:e.latestData}constructor(e,t){super(e),this.grammarType=Xb.data,this._data=null,this._data=t}release(){super.release(),this._data=null}updateData(e){const t=this.getProduct(),i=this.getLatestData();return t&&i&&(t.values(i),!e)?this.getCompiler().renderAsync():Promise.resolve()}_compileProduct(){const e=this.getLatestData();P(e)||(P(this.getProduct())?this._initProduct(e):this._product.values(e))}_initProduct(e){const t=this.getVGrammarView();if(!t||!e)return;const i=this.getProductId();this._product=t.data(e).id(i),this._compiledProductId=i}generateProductId(){var e;return"".concat(null===(e=this.getDataView())||void 0===e?void 0:e.name)}_lookupGrammar(e){var t,i;return null===(i=null===(t=this.getCompiler().getVGrammarView())||void 0===t?void 0:t.getDataById)||void 0===i?void 0:i.call(t,e)}}class xk extends _k{constructor(e){super(e),this._mark=e.mark}setCompiledProductId(e){this._compiledProductId=e}generateProductId(){const e=super.generateProductId();return x(e)?e:"".concat(Ge,"_markData_").concat(this._mark.id)}_compileProduct(){var e;const t=null===(e=this._data)||void 0===e?void 0:e.latestData;P(t)||x(this.getProduct())||this._initProduct(t)}}var Sk=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class wk extends Gw{getSkipTheme(){return this._skipTheme}setSkipTheme(e){this._skipTheme=e}getSupport3d(){return this._support3d}setSupport3d(e){this._support3d=e}getFacet(){return this._facet}setFacet(e){this._facet=e}getInteractive(){return this._interactive}setInteractive(e){this._interactive=e}getZIndex(){return this._zIndex}setZIndex(e){this._zIndex=e}getVisible(){return this._visible}setVisible(e){this._visible=e}getUserId(){return this._userId}setUserId(e){x(e)&&(this._userId=e)}getDataView(){var e;return null===(e=this._data)||void 0===e?void 0:e.getDataView()}setDataView(e,t){P(this._data)&&this.initMarkData(Object.assign(Object.assign({},this._option),{mark:this})),x(t)&&this._data.setCompiledProductId(t),this._data.setDataView(e)}getData(){return this._data}setData(e){this._data=e}hasState(e){return e in this.state.getStateMap()}getState(e){return this.state.getStateMap()[e]}getAnimationConfig(){return this._animationConfig}setAnimationConfig(e){this._animationConfig=e}setSkipBeforeLayouted(e){this._skipBeforeLayouted=e}getSkipBeforeLayouted(){return this._skipBeforeLayouted}getMorph(){return this._morph}setMorph(e){this._morph=e}getMorphKey(){return this._morphKey}setMorphKey(e){this._morphKey=e}getMorphElementKey(){return this._morphElementKey}setMorphElementKey(e){this._morphElementKey=e}getGroupKey(){return this._groupKey}setGroupKey(e){this._groupKey=e}getProgressiveConfig(){return this._progressiveConfig}setProgressiveConfig(e){this._progressiveConfig=e}setCustomizedShapeCallback(e){this._setCustomizedShape=e}setEnableSegments(e){this._enableSegments=e}constructor(e,t,i){super(e),this.grammarType=Xb.mark,this.type=void 0,this.name="mark",this._interactive=!0,this._zIndex=zw.Mark,this._visible=!0,this.stateStyle={},this._unCompileChannel={},this._skipBeforeLayouted=!1,this._morph=!1,this.name=t,this.model=i,this.key=e.key,this.state=new bk(Object.assign(Object.assign({},e),{stateKeyToSignalName:this.stateKeyToSignalName.bind(this)}),this),this._option.support3d&&this.setSupport3d(!0),this._option.skipTheme&&this.setSkipTheme(!0),this._event=new jr(i.getOption().eventDispatcher,i.getOption().mode)}setTransform(e){this._transform=e}initMarkData(e){this._data=new xk(e)}stateKeyToSignalName(e){return"".concat(Ge,"_").concat(this.type,"_").concat(this.id,"_").concat(e)}getAttribute(e,t,i,n){}_compileProduct(e){const t=this.getProduct();this.getVisible()?x(t)||this.getCompiler().isInited&&(this._initProduct(null==e?void 0:e.group),P(this._product)||(this.compileSignal(),this.compileData(),this.compileState(),this.compileEncode(),this.compileAnimation(),this.compileContext(),this.compileTransform())):x(t)&&this.removeProduct()}_initProduct(e){const t=this.getVGrammarView(),i=this.getProductId();this._product=t.mark(this.type,null!=e?e:t.rootMark).id(i),this._compiledProductId=i}generateProductId(){return this._userId?"".concat(this._userId):"".concat(this.name,"_").concat(this.id)}compileData(){var e;if(P(this._data))return;this._data.compile();const t=this._data.getProduct();x(this._product)&&x(t)&&this._product.join(t,this.key,void 0,null!==(e=this._groupKey)&&void 0!==e?e:this._facet)}updateStaticEncode(){if(!this._product)return;const{enterStyles:e,updateStyles:t}=this._separateStyle();this._product.encodeState("group",e,!0),this._product.encode(t,!0)}_separateStyle(){const e=this.stateStyle,t=fw.STATE_NORMAL,i=e[t],n=(Sk(e,["symbol"==typeof t?t:t+""]),this._option.noSeparateStyle?null:{}),r={};return Object.keys(i).forEach((e=>{this._unCompileChannel[e]||(this._option.noSeparateStyle||function(e,t,i){var n;const r=null===(n=t[e])||void 0===n?void 0:n.style;return!!bw(e,r)||!!Q(r)||!(!(null==r?void 0:r.scale)||r.field===i)}(e,i,this.getFacet())?r[e]={callback:this.compileCommonAttributeCallback(e,"normal"),dependency:[this.stateKeyToSignalName("markUpdateRank")]}:n[e]=this.compileCommonAttributeCallback(e,"normal"))})),{enterStyles:n,updateStyles:r}}compileEncode(){const e=this.stateStyle,t=fw.STATE_NORMAL,i=(e[t],Sk(e,["symbol"==typeof t?t:t+""])),{enterStyles:n,updateStyles:r}=this._separateStyle();this._product.encode(r,!0),this._product.encodeState("group",n,!0),Object.keys(i).forEach((e=>{const t={};Object.keys(i[e]).forEach((i=>{this._unCompileChannel[i]||(t[i]={callback:this.compileCommonAttributeCallback(i,e),dependency:[this.stateKeyToSignalName("markUpdateRank")]})})),this._product.encodeState(e,t,!0)})),this._skipBeforeLayouted&&this._product.layout({skipBeforeLayouted:this._skipBeforeLayouted})}compileState(){this.state.compileState(this._product)}compileAnimation(){var e,t;if(this._animationConfig){let i;if("component"===this.type)i=null===(e=this.model.animate)||void 0===e?void 0:e.getAnimationStateSignalName();else{const e=this.model.getRegion();i=null===(t=e.animate)||void 0===t?void 0:t.getAnimationStateSignalName()}this._product.animation(this._animationConfig),this._product.animationState({callback:(e,t,n)=>{var r;return null===(r=n[i])||void 0===r?void 0:r.callback(e,t)},dependency:i}),this._animationConfig.normal&&this._event.on($r.ANIMATION_END,(e=>{let{event:t}=e;t.mark===this.getProduct()&&t.animationState===ko.appear&&this.runAnimationByState(ko.normal)}))}}compileContext(){const e={interactive:this.getInteractive(),zIndex:this.getZIndex(),context:{markId:this.id,modelId:this.model.id,markUserId:this._userId,modelUserId:this.model.userId},skipTheme:this.getSkipTheme(),support3d:this.getSupport3d(),enableSegments:!!this._enableSegments};this._progressiveConfig&&(e.progressiveStep=this._progressiveConfig.progressiveStep,e.progressiveThreshold=this._progressiveConfig.progressiveThreshold,e.large=this._progressiveConfig.large,e.largeThreshold=this._progressiveConfig.largeThreshold),this._morph&&this._morphKey&&(e.morph=this._morph,e.morphKey=this._morphKey,e.morphElementKey=this._morphElementKey),this._setCustomizedShape&&(e.setCustomizedShape=this._setCustomizedShape),this._product.configure(e)}compileSignal(){this.state.compile()}_computeAttribute(e,t){return(e,t)=>{}}compileCommonAttributeCallback(e,t){const i=this._computeAttribute(e,t),n={mark:null,parent:null,element:null};return(e,t)=>(n.mark=t.mark,n.parent=t.mark.group,n.element=t,i(e,n))}compileTransform(){var e;(null===(e=this._transform)||void 0===e?void 0:e.length)&&this.getProduct().transform(this._transform)}_lookupGrammar(e){var t;return null===(t=this.getCompiler().getVGrammarView())||void 0===t?void 0:t.getMarkById(e)}updateState(e,t){return this.state.updateState(e,t)}updateLayoutState(e,t){return t&&this.getMarks().length>0&&this.getMarks().forEach((e=>e.state.updateLayoutState(!0))),this.state.updateLayoutState(e)}updateMarkState(e){if(!this._product)return;const t=this.state.getStateInfo(e);this._product.elements.forEach((i=>{"in"===this.state.checkOneState(i,i.getDatum(),t)?i.addState(e):i.removeState(e)}))}getMarks(){return[]}runAnimationByState(e){var t,i;return null===(i=null===(t=this.getProduct())||void 0===t?void 0:t.animate)||void 0===i?void 0:i.runAnimationByState(e)}stopAnimationByState(e){var t,i;return null===(i=null===(t=this.getProduct())||void 0===t?void 0:t.animate)||void 0===i?void 0:i.stopAnimationByState(e)}pauseAnimationByState(e){var t,i;return null===(i=null===(t=this.getProduct())||void 0===t?void 0:t.animate)||void 0===i?void 0:i.pauseAnimationByState(e)}resumeAnimationByState(e){var t,i;return null===(i=null===(t=this.getProduct())||void 0===t?void 0:t.animate)||void 0===i?void 0:i.resumeAnimationByState(e)}release(){super.release(),this.state.release()}}var Ck=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class kk extends wk{constructor(e,t){var i;super(t,e,t.model),this._extensionChannel={},this._computeExChannel={},this._attributeContext=t.attributeContext,null===(i=t.map)||void 0===i||i.set(this.id,this)}created(){this._initStyle()}initStyleWithSpec(e,t){e&&(x(e.id)&&(this._userId=e.id),m(e.interactive)&&(this._interactive=e.interactive),x(e.zIndex)&&this.setZIndex(e.zIndex),m(e.visible)&&this.setVisible(e.visible),this._initSpecStyle(e,this.stateStyle,t))}convertAngleToRadian(e){if(l(e))return el(e);if(e.scale){const t=e.scale.range();return e.scale.range(t.map(el)),e}return"function"==typeof e?(t,i,n,r)=>el(e(t,i,n,r)):e}isUserLevel(e){return[Tw.User_Mark,Tw.User_Series,Tw.User_Chart].includes(e)}setStyle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.stateStyle;if(P(e))return;e=this._filterStyle(e,t,i,n),void 0===n[t]&&(n[t]={});const r=this.isUserLevel(i);Object.keys(e).forEach((s=>{let a=e[s];P(a)||(a=this._filterAttribute(s,a,t,i,r,n),this.setAttribute(s,a,t,i,n))}))}getStyle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";var i;return null===(i=this.stateStyle[t][e])||void 0===i?void 0:i.style}_filterStyle(e,t,i){arguments.length>3&&void 0!==arguments[3]||this.stateStyle;return e}_filterAttribute(e,t,i,n,r){arguments.length>5&&void 0!==arguments[5]||this.stateStyle;let s=this._styleConvert(t);return r&&"angle"===e&&(s=this.convertAngleToRadian(s)),s}setReferer(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.stateStyle;var r;if(e)if(t&&i){const s=null!==(r=n[i])&&void 0!==r?r:{[t]:{}};n[i][t]=Object.assign(Object.assign({},s[t]),{referer:e})}else Object.entries(n).forEach((t=>{let[i,r]=t;Object.entries(r).forEach((t=>{let[r,s]=t;n[i][r].referer=e}))}))}setPostProcess(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";var n;(null===(n=this.stateStyle[i])||void 0===n?void 0:n[e])&&(this.stateStyle[i][e].postProcess=t)}getAttribute(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",n=arguments.length>3?arguments[3]:void 0;return this._computeAttribute(e,i)(t,n)}setAttribute(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.stateStyle;var s;void 0===r[i]&&(r[i]={}),void 0===r[i][e]&&(r[i][e]={level:n,style:t,referer:void 0});const a=null===(s=r[i][e])||void 0===s?void 0:s.level;x(a)&&a<=n&&_e(r[i][e],{style:t,level:n}),"normal"!==i&&e in this._extensionChannel&&this._extensionChannel[e].forEach((e=>{void 0===r[i][e]&&(r[i][e]=r.normal[e])}))}_getDefaultStyle(){return{visible:!0,x:0,y:0}}_styleConvert(e){if(!e)return e;if(kn(e.type)||e.scale){const t=function(e,t){if("scale"in e&&e.scale)return _(e.scale)&&(null==t?void 0:t.globalScale)?t.globalScale.registerMarkAttributeScale(e,t.seriesId):e.scale;const i=gk(e.type);return i&&function(e,t){e&&t&&(t.domain&&e.domain(t.domain),t.range&&e.range(t.range),t.specified&&e.specified&&e.specified(t.specified))}(i,e),i}(e,{globalScale:this._option.globalScale,seriesId:this._option.seriesId});if(t)return{scale:t,field:e.field,changeDomain:e.changeDomain}}return e}_computeAttribute(e,t){var i;let n=null===(i=this.stateStyle[t])||void 0===i?void 0:i[e];n||(n=this.stateStyle.normal[e]);const r=this._computeStateAttribute(n,e,t),s=Q(null==n?void 0:n.postProcess),a=e in this._computeExChannel;if(s&&a){const i=this._computeExChannel[e];return(s,a)=>{let o=r(s,a);return o=n.postProcess(o,s,this._attributeContext,a,this.getDataView()),i(e,s,t,a,o)}}if(s)return(e,t)=>n.postProcess(r(e,t),e,this._attributeContext,t,this.getDataView());if(a){const i=this._computeExChannel[e];return(n,s)=>i(e,n,t,s,r(n,s))}return r}_computeStateAttribute(e,t,i){var n;return e?e.referer?e.referer._computeAttribute(t,i):"function"==typeof e.style?(t,i)=>e.style(t,this._attributeContext,i,this.getDataView()):Vw.includes(e.style.gradient)?this._computeGradientAttr(e.style):["outerBorder","innerBorder"].includes(t)?this._computeBorderAttr(e.style):kn(null===(n=e.style.scale)||void 0===n?void 0:n.type)?(t,i)=>e.style.scale.scale(t[e.style.field]):(t,i)=>e.style:(e,t)=>{}}_initStyle(){const e=this._getDefaultStyle();this.setStyle(e,"normal",0)}_initSpecStyle(e,t,i){e.style&&this.setStyle(e.style,"normal",Tw.User_Mark,t);const n=e.state;n&&Object.keys(n).forEach((e=>{const i=n[e];if("style"in i){const n=i.style;let r={stateValue:e};"level"in i&&(r.level=i.level),"filter"in i&&(r=Q(i.filter)?Object.assign({filter:i.filter},r):Object.assign(Object.assign({},i.filter),r)),this.state.addStateInfo(r),this.setStyle(n,e,Tw.User_Mark,t)}else this.setStyle(i,e,Tw.User_Mark,t)}))}_computeGradientAttr(e){var t,i;const{gradient:n,scale:r,field:s}=e,a=Ck(e,["gradient","scale","field"]);let o=r,l=s;if(!(r&&s||"series"!==this.model.modelType)){const{scale:e,field:t}=this.model.getColorAttribute();r||(o=e),l||(l=t)}const c=Wt(Ut(this.model.getColorScheme(),"series"===this.model.modelType?null===(i=(t=this.model).getSpec)||void 0===i?void 0:i.call(t):void 0),this.model.getDefaultColorDomain()),h=Object.assign(Object.assign({},Uw[n]),a);return(e,t)=>{const i={},r=this.getDataView();return Object.keys(h).forEach((n=>{const s=h[n];"stops"===n?i.stops=s.map((i=>{const{opacity:n,color:s,offset:a}=i;let h=null!=s?s:null==o?void 0:o.scale(e[l]);return Q(s)&&(h=s(e,this._attributeContext,t,r)),x(n)&&(h=jt.SetOpacity(h,n)),{offset:Q(a)?a(e,this._attributeContext,t,r):a,color:h||c[0]}})):Q(s)?i[n]=s(e,this._attributeContext,t,r):i[n]=s})),i.gradient=n,i}}_computeBorderAttr(e){const{scale:t,field:i}=e,n=Ck(e,["scale","field"]);return(e,r)=>{var s,a,o;const l={};if(Object.keys(n).forEach((t=>{const i=n[t];Q(i)?l[t]=i(e,this._attributeContext,r,this.getDataView()):l[t]=i})),"stroke"in l)Vw.includes(null===(o=n.stroke)||void 0===o?void 0:o.gradient)&&(l.stroke=this._computeGradientAttr(n.stroke)(e,r));else{const n=Wt(Ut(this.model.getColorScheme(),"series"===this.model.modelType?null===(a=(s=this.model).getSpec)||void 0===a?void 0:a.call(s):void 0),this.model.getDefaultColorDomain());let r=t,o=i;if(!(t&&i||"series"!==this.model.modelType)){const{scale:i,field:s}=this.model.getColorAttribute();t||(r=i),o||(o=s),l.stroke=(null==r?void 0:r.scale(e[o]))||n[0]}}return l}}}class Ak extends du{constructor(e){super({x:0,y:0}),this.type="shadowroot",this.shadowHost=e}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.shouldUpdateGlobalMatrix()){const t=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f):this._globalTransMatrix=t.clone(),this.doUpdateGlobalMatrix(),e&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}doUpdateGlobalMatrix(){if(this.shadowHost){const e=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(e.a,e.b,e.c,e.d,e.e,e.f)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}}function Ek(e){return new Ak(e)}function Tk(){Tk.__loaded||(Tk.__loaded=!0,bp.RegisterGraphicCreator("shadowRoot",Ek))}Tk.__loaded=!1;const Ok=Tk,Pk=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap",...gd];class Mk extends _d{constructor(e){super(e),this.type="arc",this.numberType=Wd}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{startAngle:e,endAngle:t,outerRadius:i,innerRadius:n}=this.attribute;return this._validNumber(e)&&this._validNumber(t)&&this._validNumber(i)&&this._validNumber(n)}getParsedCornerRadius(){const e=jh(this).arc,{cornerRadius:t=e.cornerRadius,outerRadius:i=e.outerRadius,innerRadius:n=e.innerRadius}=this.attribute;if(0===t||"0%"===t)return 0;const r=Math.abs(i-n);return Math.min(l(t,!0)?t:r*parseFloat(t)/100,r/2)}getParsedAngle(){const e=jh(this).arc;let{startAngle:t=e.startAngle,endAngle:i=e.endAngle}=this.attribute;const{cap:n=e.cap}=this.attribute,r=i-t>=0?1:-1,s=i-t;if(t=il(t),i=t+s,n&&Hn(s)<zn-jn){let s=1,a=1;n.length&&(s=Number(n[0]),a=Number(n[1]));const{outerRadius:o=e.outerRadius,innerRadius:l=e.innerRadius}=this.attribute,c=Math.abs(o-l)/2,h=c/o;if(c>jn&&o>jn)return{startAngle:t-r*h*s,endAngle:i+r*h*a,sc:r*h*s,ec:r*h*a}}return{startAngle:t,endAngle:i}}getParsePadAngle(e,t){const i=jh(this).arc,{outerRadius:n=i.outerRadius,innerRadius:r=i.innerRadius,padAngle:s=i.padAngle}=this.attribute,{padRadius:a=Yn(n*n+r*r)}=this.attribute,o=Hn(t-e);let l=e,c=t,h=e,d=t;const u=s/2;let p=o,g=o;if(u>jn&&a>jn){const i=t>e?1:-1;let s=Zn(Number(a)/r*Kn(u)),o=Zn(Number(a)/n*Kn(u));return(p-=2*s)>jn?(s*=i,h+=s,d-=s):(p=0,h=d=(e+t)/2),(g-=2*o)>jn?(o*=i,l+=o,c-=o):(g=0,l=c=(e+t)/2),{outerStartAngle:l,outerEndAngle:c,innerStartAngle:h,innerEndAngle:d,innerDeltaAngle:p,outerDeltaAngle:g}}return{outerStartAngle:l,outerEndAngle:c,innerStartAngle:h,innerEndAngle:d,innerDeltaAngle:p,outerDeltaAngle:g}}doUpdateAABBBounds(e){const t=jh(this).arc;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const i=this.attribute,n=se.graphicService.updateArcAABBBounds(i,jh(this).arc,this._AABBBounds,e,this),{boundsPadding:r=t.boundsPadding}=i,s=Cd(r);return s&&n.expand(s),this.clearUpdateBoundTag(),n}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}needUpdateTags(e){return super.needUpdateTags(e,Pk)}needUpdateTag(e){return super.needUpdateTag(e,Pk)}getDefaultAttribute(e){return jh(this).arc[e]}toCustomPath(){const e=this.attribute,{startAngle:t,endAngle:i}=this.getParsedAngle();let n=e.innerRadius,r=e.outerRadius;const s=Hn(i-t),a=i>t;if(r<n){const e=r;r=n,n=e}const o=new dc;if(r<=jn)o.moveTo(0,0);else if(s>=zn-jn)o.moveTo(0+r*Un(t),0+r*Kn(t)),o.arc(0,0,r,t,i,!a),n>jn&&(o.moveTo(0+n*Un(i),0+n*Kn(i)),o.arc(0,0,n,i,t,a));else{const e=r*Un(t),s=r*Kn(t),l=n*Un(i),c=n*Kn(i);o.moveTo(0+e,0+s),o.arc(0,0,r,t,i,!a),o.lineTo(0+l,0+c),o.arc(0,0,n,i,t,a),o.closePath()}return o}clone(){return new Mk(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Mk.NOWORK_ANIMATE_ATTR}}function Ik(e){return new Mk(e)}Mk.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},bd);class Rk{constructor(){this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}clearCache(e,t){const{CLEAN_THRESHOLD:i=this.CLEAN_THRESHOLD,L_TIME:n=this.L_TIME,R_COUNT:r=this.R_COUNT}=t;if(e.size<i)return 0;let s=0;const a=t=>{s++,e.delete(t)},o=Date.now();return e.forEach(((e,t)=>{if(e.timestamp.length<r)return a(t);let i=0;for(;o-e.timestamp[e.timestamp.length-1-i]<n&&(i++,!(i>=r)););if(i<r)return a(t);for(;o-e.timestamp[0]>n;)e.timestamp.shift()})),s}addLimitedTimestamp(e,t,i){const{R_TIMESTAMP_MAX_SIZE:n=this.R_TIMESTAMP_MAX_SIZE}=i;e.timestamp.length>n&&e.timestamp.shift(),e.timestamp.push(t)}clearTimeStamp(e,t){const{L_TIME:i=this.L_TIME}=t,n=Date.now();e.forEach((e=>{for(;n-e.timestamp[0]>i;)e.timestamp.shift()}))}clearItemTimestamp(e,t){const{L_TIME:i=this.L_TIME}=t,n=Date.now();for(;n-e.timestamp[0]>i;)e.timestamp.shift()}}class Dk{static GetCanvas(){try{return Dk.canvas||(Dk.canvas=se.global.createCanvas({})),Dk.canvas}catch(H6){return null}}static GetCtx(){if(!Dk.ctx){const e=Dk.GetCanvas();Dk.ctx=e.getContext("2d")}return Dk.ctx}}class Lk extends Rk{static getInstance(){return Lk._instance||(Lk._instance=new Lk),Lk._instance}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;const i=Dk.GetCanvas(),n=Dk.GetCtx();if(i.width=t,i.height=1,!n)return;if(n.translate(0,0),!n)throw new Error("\u83b7\u53d6ctx\u53d1\u751f\u9519\u8bef");const r=n.createLinearGradient(0,0,t,0);e.forEach((e=>{r.addColorStop(e[0],e[1])})),n.fillStyle=r,n.fillRect(0,0,t,1),this.rgbaSet=n.getImageData(0,0,t,1).data}getColor(e){const t=this.rgbaSet.slice(4*e,4*e+4);return"rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(t[3]/255,")")}GetOrCreate(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,a="".concat(e).concat(t).concat(i).concat(n);r.forEach((e=>a+=e.join())),a+=s;let o=this.dataMap.get(a);return o||(o={data:new Lk(r,s),timestamp:[]},this.addLimitedTimestamp(o,Date.now(),{}),this.dataMap.set(a,o)),this.clearCache(this.dataMap,this.cacheParams),o.data}}class jk{static GetSize(e){for(let t=0;t<jk.ImageSize.length;t++)if(jk.ImageSize[t]>=e)return jk.ImageSize[t];return e}static Get(e,t,i,n,r,s,a){const o=jk.GenKey(e,t,i,n,r),l=jk.cache[o];if(!l||0===l.length)return null;for(let c=0;c<l.length;c++)if(l[c].width>=s&&l[c].height>=a)return l[c].pattern;return null}static Set(e,t,i,n,r,s,a,o){const l=jk.GenKey(e,t,i,n,r);jk.cache[l]?jk.cache[l].push({width:a,height:o,pattern:s}):jk.cache[l]=[{width:a,height:o,pattern:s}]}static GenKey(e,t,i,n,r){return"".concat(t,",").concat(i,",").concat(n,",").concat(r,",").concat(e.join())}}jk.cache={},jk.ImageSize=[20,40,80,160,320,640,1280,2560];const Fk=new class{constructor(){this.time=Ol.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,n,r,s,a,o,l,c,h,d){const{outerBorder:u,innerBorder:p}=e.attribute,g=u&&!1!==u.visible,f=p&&!1!==p.visible;if(!g&&!f)return;const{innerRadius:m=l.innerRadius,outerRadius:v=l.outerRadius,startAngle:y=l.startAngle,endAngle:b=l.endAngle,opacity:_=l.opacity,x:x=l.x,y:S=l.y,scaleX:w=l.scaleX,scaleY:C=l.scaleY}=e.attribute,k=!(!u||!u.stroke),A=!(!p||!p.stroke);if(g){const{distance:r=l.outerBorder.distance}=u,s=Sg(t,r,t.dpr),a=r/v;if(e.setAttributes({outerRadius:v+s,innerRadius:m-s,startAngle:y-a,endAngle:b+a}),t.beginPath(),Ng(e,t,i,n,v+s,m-s),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),d)d(t,u,l.outerBorder);else if(k){const r=l.outerBorder.opacity;l.outerBorder.opacity=_,t.setStrokeStyle(e,u,(x-i)/w,(S-n)/C,l.outerBorder),l.outerBorder.opacity=r,t.stroke()}}if(f){const{distance:r=l.innerBorder.distance}=p,s=Sg(t,r,t.dpr),a=r/v;if(e.setAttributes({outerRadius:v-s,innerRadius:m+s,startAngle:y+a,endAngle:b-a}),t.beginPath(),Ng(e,t,i,n,v-s,m+s),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),d)d(t,p,l.innerBorder);else if(A){const r=l.innerBorder.opacity;l.innerBorder.opacity=_,t.setStrokeStyle(e,p,(x-i)/w,(S-n)/C,l.innerBorder),l.innerBorder.opacity=r,t.stroke()}}e.setAttributes({outerRadius:v,innerRadius:m,startAngle:y,endAngle:b})}},Bk=_f,Nk=tf;var zk=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Hk=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Vk=function(e,t){return function(i,n){t(i,n,e)}};let Uk=class extends hf{constructor(e){super(),this.arcRenderContribitions=e,this.numberType=Wd,this.builtinContributions=[Fk,Nk,Bk],this.init(e)}drawArcTailCapPath(e,t,i,n,r,s,a,o){const l=o-a,c=e.getParsedAngle(),h=c.startAngle;let d=c.endAngle;d=o;const u=Hn(d-h),p=d>h;let g=!1;if(r<s){const e=r;r=s,s=e}const f=e.getParsedCornerRadius(),{outerDeltaAngle:m,innerDeltaAngle:v,outerStartAngle:y,outerEndAngle:b,innerEndAngle:_,innerStartAngle:x}=e.getParsePadAngle(h,d),S=f,w=f,C=f,k=f,A=Math.max(w,S),E=Math.max(C,k);let T=A,O=E;const P=r*Un(y),M=r*Kn(y),I=s*Un(_),R=s*Kn(_);let D,L,j,F;if((E>jn||A>jn)&&(D=r*Un(b),L=r*Kn(b),j=s*Un(x),F=s*Kn(x),u<Fn)){const e=Fg(P,M,j,F,D,L,I,R);if(e){const t=P-e[0],i=M-e[1],n=D-e[0],a=L-e[1],o=1/Kn(qn((t*n+i*a)/(Yn(t*t+i*i)*Yn(n*n+a*a)))/2),l=Yn(e[0]*e[0]+e[1]*e[1]);O=Gn(E,(s-l)/(o-1)),T=Gn(A,(r-l)/(o+1))}}if(T>jn){const e=Gn(S,T),s=Gn(w,T),a=Bg(j,F,P,M,r,e,Number(p)),o=Bg(D,L,I,R,r,s,Number(p));if(T<A&&e===s)t.moveTo(i+a.cx+a.x01,n+a.cy+a.y01),t.arc(i+a.cx,n+a.cy,T,Vn(a.y01,a.x01),Vn(o.y01,o.x01),!p);else{const e=d-l-.03,a=Vn(o.y11,o.x11);t.arc(i,n,r,e,a,!p),s>0&&t.arc(i+o.cx,n+o.cy,s,Vn(o.y11,o.x11),Vn(o.y01,o.x01),!p)}}else t.moveTo(i+P,n+M);if(!(s>jn)||v<.001)t.lineTo(i+I,n+R),g=!0;else if(O>jn){const e=Gn(k,O),r=Gn(C,O),a=Bg(I,R,D,L,s,-r,Number(p)),o=Bg(P,M,j,F,s,-e,Number(p));if(t.lineTo(i+a.cx+a.x01,n+a.cy+a.y01),O<E&&e===r){const e=Vn(o.y01,o.x01);t.arc(i+a.cx,n+a.cy,O,Vn(a.y01,a.x01),e,!p)}else{r>0&&t.arc(i+a.cx,n+a.cy,r,Vn(a.y01,a.x01),Vn(a.y11,a.x11),!p);const e=Vn(a.cy+a.y11,a.cx+a.x11),o=d-l-.03;t.arc(i,n,s,e,o,p)}}else t.lineTo(i+s*Un(x),n+s*Kn(x));return g}drawShape(e,t,i,n,r,s,a,o){const l=jh(e,null==s?void 0:s.theme).arc,{fill:c=l.fill,stroke:h=l.stroke,x:d=l.x,y:u=l.y}=e.attribute,p=this.valid(e,l,a,o);if(!p)return;const{fVisible:g,sVisible:f,doFill:v,doStroke:y}=p,{outerRadius:b=l.outerRadius,innerRadius:_=l.innerRadius,cap:x=l.cap,forceShowCap:S=l.forceShowCap}=e.attribute;let w=0;const C=(m(x)&&x||x[0])&&"conical"===c.gradient;if(C){const{sc:t,startAngle:i,endAngle:n}=e.getParsedAngle();Hn(n-i)<zn-jn&&(w=t||0,c.startAngle-=w,c.endAngle-=w)}let k=!1;const{isFullStroke:A,stroke:E}=(e=>{var t;let i=!0;if(m(e,!0)){for(let n=0;n<4;n++)Sd[n]=e,i&&(i=!(null!==(t=Sd[n])&&void 0!==t&&!t));i=e}else if(Array.isArray(e))for(let n=0;n<4;n++)Sd[n]=!!e[n],i&&(i=!!Sd[n]);else Sd[0]=!1,Sd[1]=!1,Sd[2]=!1,Sd[3]=!1;return{isFullStroke:i,stroke:Sd}})(h);if((v||A)&&(t.beginPath(),Ng(e,t,i,n,b,_),k=!0,t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),this.beforeRenderStep(e,t,i,n,v,y,g,f,l,r,a,o),v&&(a?a(t,e.attribute,l):g&&(t.setCommonStyle(e,e.attribute,d-i,u-n,l),t.fill())),y&&A&&(o?o(t,e.attribute,l):f&&(t.setStrokeStyle(e,e.attribute,d-i,u-n,l),t.stroke()))),!A&&y&&(t.beginPath(),Ng(e,t,i,n,b,_,E),k||this.beforeRenderStep(e,t,i,n,v,y,g,f,l,r,a,o),o?o(t,e.attribute,l):f&&(t.setStrokeStyle(e,e.attribute,i,n,l),t.stroke())),(m(x)&&x||x[1])&&S){const{startAngle:s,endAngle:c}=e.getParsedAngle();if(Hn(c-s)>=zn-jn){t.beginPath();const s=Math.abs(b-_)/2/b,{endAngle:c=l.endAngle,fill:h=l.fill}=e.attribute,d=c;if(this.drawArcTailCapPath(e,t,i,n,b,_,d,d+s),k||this.beforeRenderStep(e,t,i,n,v,y,g,f,l,r,a,o),v){const r=h;if("conical"===r.gradient){const s=function(e,t,i,n){const{stops:r,startAngle:s,endAngle:a}=n;for(;i<0;)i+=zn;for(;i>zn;)i-=zn;if(i<s)return r[0].color;if(i>a)return r[0].color;let o,l,c=(i-s)/(a-s);for(let h=0;h<r.length;h++)if(r[h].offset>=c){o=r[h-1],l=r[h];break}return c=(c-o.offset)/(l.offset-o.offset),od(o.color,l.color,c,!1)}(0,0,c,r);a||Rg&&(t.setCommonStyle(e,e.attribute,i,n,l),t.fillStyle=s,t.fill())}}y&&(o||f&&(t.setStrokeStyle(e,e.attribute,i,n,l),t.stroke()))}}this.afterRenderStep(e,t,i,n,v,y,g,f,l,r,a,o),C&&(c.startAngle+=w,c.endAngle+=w)}draw(e,t,i,n){const r=jh(e,null==n?void 0:n.theme).arc;this._draw(e,r,!1,i,n)}};Uk=zk([jo(),Vk(0,Ho(Uo)),Vk(0,Vo(zg)),Hk("design:paramtypes",[Object])],Uk);let Wk=!1;const Gk=new Oo((e=>{Wk||(Wk=!0,e(Uk).toSelf().inSingletonScope(),e(Au).to(Uk).inSingletonScope(),e(Pu).toService(Au),e(zg).toService(nf),Go(e,zg))}));var Kk=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Yk=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Xk=function(e,t){return function(i,n){t(i,n,e)}};let qk=class{constructor(e){this.canvasRenderer=e,this.type="arc",this.numberType=Wd}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).arc;n.highPerformanceSave();let{x:s=r.x,y:a=r.y}=e.attribute;if(e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,((e,i,n)=>!!o||(o=e.isPointInPath(t.x,t.y),o)),((e,i,r)=>{if(o)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=Sg(n,s+a,n.dpr),o=e.isPointInStroke(t.x,t.y),o})),n.highPerformanceRestore(),o}};qk=Kk([jo(),Xk(0,Ho(Au)),Yk("design:paramtypes",[Object])],qk);let Zk=!1;const Qk=new Oo(((e,t,i,n)=>{Zk||(Zk=!0,e(tS).to(qk).inSingletonScope(),e(vS).toService(tS))}));var $k=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Jk=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},eA=function(e,t){return function(i,n){t(i,n,e)}};let tA=class{constructor(e){this.canvasRenderer=e,this.type="arc",this.numberType=Wd}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).arc;n.highPerformanceSave();let{x:s=r.x,y:a=r.y}=e.attribute;if(e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,((e,i,n)=>!!o||(o=e.isPointInPath(t.x,t.y),o)),((e,i,r)=>{if(o)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=s+a,o=e.isPointInStroke(t.x,t.y),o})),n.highPerformanceRestore(),o}};tA=$k([jo(),eA(0,Ho(Au)),Jk("design:paramtypes",[Object])],tA);let iA=!1;const nA=new Oo(((e,t,i,n)=>{iA||(iA=!0,e(Wx).to(tA).inSingletonScope(),e(Ux).toService(Wx))}));function rA(){rA.__loaded||(rA.__loaded=!0,bp.RegisterGraphicCreator("arc",Ik),ph.load(Gk),ph.load(Vx?Qk:nA))}rA.__loaded=!1;const sA=rA;class aA extends Mk{constructor(e){super(e),this.type="arc3d",this.numberType=Gd}doUpdateAABBBounds(){const e=jh(this).arc;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const t=this.attribute,i=se.graphicService.updateArc3dAABBBounds(t,jh(this).polygon,this._AABBBounds,this),{boundsPadding:n=e.boundsPadding}=t,r=Cd(n);return r&&i.expand(r),this.clearUpdateBoundTag(),this._AABBBounds}getNoWorkAnimateAttr(){return aA.NOWORK_ANIMATE_ATTR}}function oA(e){return new aA(e)}aA.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},bd);var lA=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let cA=class extends hf{constructor(){super(...arguments),this.numberType=Gd}drawShape(e,t,i,n,r,s,a,o){var l;const c=jh(e,null==s?void 0:s.theme).arc,{fill:h=c.fill}=e.attribute,d=this.valid(e,c,a,o);if(!d)return;const{fVisible:u,sVisible:p,doFill:g,doStroke:f}=d,m=null!==(l=this.z)&&void 0!==l?l:0,{outerRadius:v=c.outerRadius,innerRadius:y=c.innerRadius,height:b=10}=e.attribute,_=sd.Get(h,rd.Color255),{light:x}=r.stage||{},S=r.hack_pieFace,w={top:m,bottom:m+b},C={top:[0,1,0],bottom:[0,-1,0],outside:[1,0,-1],inside:[1,0,-1]};"bottom"===S||"top"===S?(t.beginPath(),function(e,t,i,n,r,s,a){const{startAngle:o,endAngle:l}=e.getParsedAngle(),c=Hn(l-o),h=l>o;let d=!1;if(s<a){const e=s;s=a,a=e}if(s<=jn)t.moveTo(i,n,r);else if(c>=zn-jn)t.moveTo(i+s*Un(o),n+s*Kn(o),r),t.arc(i,n,s,o,l,!h,r),a>jn&&(t.moveTo(i+a*Un(l),n+a*Kn(l),r),t.arc(i,n,a,l,o,h,r));else{const{outerDeltaAngle:c,innerDeltaAngle:u,outerStartAngle:p,outerEndAngle:g,innerEndAngle:f,innerStartAngle:m}=e.getParsePadAngle(o,l),v=s*Un(p),y=s*Kn(p),b=a*Un(f),_=a*Kn(f);c<.001?d=!0:(t.moveTo(i+v,n+y,r),t.arc(i,n,s,p,g,!h,r)),!(a>jn)||u<.001?(t.lineTo(i+b,n+_,r),d=!0):(t.lineTo(i+b,n+_,r),t.arc(i,n,a,f,m,h,r))}t.closePath()}(e,t,i,n,w[S],v,y),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,c),g&&(a?a(t,e.attribute,c):u&&(t.setCommonStyle(e,e.attribute,i,n,c),t.fillStyle=x?x.computeColor(C[S],_):h,t.fill())),f&&(o?o(t,e.attribute,c):p&&(t.setStrokeStyle(e,e.attribute,i,n,c),t.stroke()))):"outside"!==S&&"inside"!==S||("inside"===S&&(t.save(),t.beginPath(),t.arc(i,n,y,0,zn,!0,w.top),t.clip()),t.beginPath(),function(e,t,i,n,r,s,a,o){const{startAngle:l,endAngle:c}=e.getParsedAngle(),h=Hn(c-l),d=c>l;let u=!1;if(a<=jn)t.moveTo(i,n,r);else if(h>=zn-jn)t.moveTo(i+a*Un(l),n+a*Kn(l),r),t.arc(i,n,a,l,c,!d,r),t.lineTo(i+a*Un(c),n+a*Kn(c),s),t.arc(i,n,a,c,l,d,s);else{const{innerouterDeltaAngle:e,innerouterStartAngle:h,innerouterEndAngle:p}=o(l,c),g=a*Un(h),f=a*Kn(h),m=a*Un(p),v=a*Kn(p);e<.001?u=!0:(t.moveTo(i+g,n+f,r),t.arc(i,n,a,h,p,!d,r),t.lineTo(i+m,n+v,s),t.arc(i,n,a,p,h,d,s))}t.closePath()}(e,t,i,n,w.top,w.bottom,"outside"===S?v:y,((t,i)=>{const{outerDeltaAngle:n,innerDeltaAngle:r,outerStartAngle:s,outerEndAngle:a,innerEndAngle:o,innerStartAngle:l}=e.getParsePadAngle(t,i);return"outside"===S?{innerouterDeltaAngle:n,innerouterEndAngle:a,innerouterStartAngle:s}:{innerouterDeltaAngle:r,innerouterEndAngle:o,innerouterStartAngle:l}})),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,c),g&&(a?a(t,e.attribute,c):u&&(t.setCommonStyle(e,e.attribute,i,n,c),t.fillStyle=x?x.computeColor(C[S],_):h,t.fill())),f&&(o?o(t,e.attribute,c):p&&(t.setStrokeStyle(e,e.attribute,i,n,c),t.stroke())),"inside"===S&&t.restore())}draw(e,t,i,n){const r=jh(e,null==n?void 0:n.theme).arc;this._draw(e,r,!1,i,n)}};cA=lA([jo()],cA);let hA=!1;const dA=new Oo((e=>{hA||(hA=!0,e(Eu).to(cA).inSingletonScope(),e(Pu).toService(Eu))}));var uA=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},pA=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},gA=function(e,t){return function(i,n){t(i,n,e)}};let fA=class extends bS{constructor(e){super(),this.canvasRenderer=e,this.type="arc3d",this.numberType=Gd}contains(e,t,i){const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).arc;n.highPerformanceSave();const s=this.transform(e,r,n),{x:a,y:o,z:l,lastModelMatrix:c}=s;let h=t;if(n.camera){h=t.clone();const i=e.parent.globalTransMatrix;h.x=i.a*t.x+i.c*t.y+i.e,h.y=i.b*t.x+i.d*t.y+i.f}this.canvasRenderer.z=l;let d=!1;return this.canvasRenderer.drawShape(e,n,a,o,i,null,((e,t,i)=>!!d||(d=e.isPointInPath(h.x,h.y),d))),this.canvasRenderer.z=0,n.modelMatrix!==c&&ep.free(n.modelMatrix),n.modelMatrix=c,n.highPerformanceRestore(),d}};fA=uA([jo(),gA(0,Ho(Eu)),pA("design:paramtypes",[Object])],fA);let mA=!1;const vA=new Oo(((e,t,i,n)=>{mA||(mA=!0,e(iS).to(fA).inSingletonScope(),e(vS).toService(iS))}));function yA(){yA.__loaded||(yA.__loaded=!0,bp.RegisterGraphicCreator("arc3d",oA),ph.load(dA),ph.load(vA))}yA.__loaded=!1;const bA=yA,_A=["points","cornerRadius",...gd];class xA extends _d{constructor(e){super(e),this.type="polygon",this.numberType=Jd}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{points:e}=this.attribute;return e&&e.length>=2}doUpdateAABBBounds(){const e=jh(this).polygon;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const t=this.attribute,i=se.graphicService.updatePolygonAABBBounds(t,jh(this).polygon,this._AABBBounds,this),{boundsPadding:n=e.boundsPadding}=t,r=Cd(n);return r&&i.expand(r),this.clearUpdateBoundTag(),this._AABBBounds}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}_interpolate(e,t,i,n,r){"points"===e&&(r.points=Od(i,n,t))}getDefaultAttribute(e){return jh(this).polygon[e]}needUpdateTags(e){return super.needUpdateTags(e,_A)}needUpdateTag(e){return super.needUpdateTag(e,_A)}toCustomPath(){const e=this.attribute.points,t=new dc;return e.forEach(((e,i)=>{0===i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),t.closePath(),t}clone(){return new xA(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return xA.NOWORK_ANIMATE_ATTR}}function SA(e){return new xA(e)}xA.NOWORK_ANIMATE_ATTR=bd;class wA extends xA{constructor(e){super(e),this.type="pyramid3d",this.numberType=eu}doUpdateAABBBounds(){const e=jh(this).polygon;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const t=this.attribute,i=se.graphicService.updatePyramid3dAABBBounds(t,jh(this).polygon,this._AABBBounds,this),{boundsPadding:n=e.boundsPadding}=t,r=Cd(n);return r&&i.expand(r),this.clearUpdateBoundTag(),this._AABBBounds}findFace(){const{points:e}=this.attribute,t=e.map(((t,i)=>{const n=3===i?e[0]:e[i+1],r=t.x-n.x;return 0===r?0:(t.y-n.y)/r})),i=e.map((e=>({p:e,d:0})));let n=!1,r=0;for(let a=0;a<t.length-1;a++){for(let e=a+1;e<t.length;e++){if(t[a]===t[e]){n=!0;const t=nr.distancePP(i[a].p,i[a+1].p);i[a].d=t,i[a+1].d=t,r=Wn(r,t);const s=nr.distancePP(i[e].p,i[e+1].p);i[e].d=s,i[e+1].d=s,r=Wn(r,s)}if(n)break}if(n)break}for(let a=e.length-1;a>=0;a--){const t=e[a];i.unshift({p:t,d:0})}for(let a=0;a<e.length;a++){const t=(r-i[a+e.length].d)/2;i[a].d+=t,i[a+e.length].d+=t}const s={polygons:[],vertices:[],edges:[]};return i.forEach((e=>{s.vertices.push([e.p.x,e.p.y,e.d])})),s.polygons.push({polygon:[0,4,5,1],normal:[0,-1,0]}),s.polygons.push({polygon:[7,6,2,3],normal:[0,1,0]}),s.polygons.push({polygon:[0,4,7,3],normal:[-1,0,0]}),s.polygons.push({polygon:[1,5,6,2],normal:[1,0,0]}),s.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),s.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),s.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],s}_isValid(){return super._isValid()&&4===this.attribute.points.length}getNoWorkAnimateAttr(){return wA.NOWORK_ANIMATE_ATTR}}function CA(e){return new wA(e)}wA.NOWORK_ANIMATE_ATTR=bd;var kA=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let AA=class extends hf{constructor(){super(...arguments),this.type="pyramid3d",this.numberType=eu}drawShape(e,t,i,n,r,s,a,o){var l;const c=jh(e,null==s?void 0:s.theme).polygon,{fill:h=c.fill,stroke:d=c.stroke,face:u=[!0,!0,!0,!0,!0,!0]}=e.attribute,p=null!==(l=this.z)&&void 0!==l?l:0;if(!this.valid(e,c,a,o))return;const{light:g,camera:f}=r.stage||{},m=e.findFace();if(!1!==h){t.setCommonStyle(e,e.attribute,i,n,c);let r=h;"string"!=typeof r&&(r="black"),this.fill(i,n,p,m,u,r,t,g,f,e,c,a)}!1!==d&&(t.setStrokeStyle(e,e.attribute,i,n,c),this.stroke(i,n,p,m,t))}stroke(e,t,i,n,r){const s=n.vertices;n.edges.forEach((n=>{const a=s[n[0]],o=s[n[1]],l={x:e+a[0],y:t+a[1],z:i+a[2]},c={x:e+o[0],y:t+o[1],z:i+o[2]};r.beginPath(),r.moveTo(l.x,l.y,l.z),r.lineTo(c.x,c.y,c.z),r.stroke()}))}fill(e,t,i,n,r,s,a,o,l,c,h,d){const u=sd.Get(s,rd.Color255),p=n.vertices,g=p.map((e=>a.view(e[0],e[1],e[2])[2])),f=[];n.polygons.forEach(((e,t)=>{if(!r[t])return;f.push({faceIdx:t,polygon:e});const{polygon:i,normal:n}=e,s=g[i[0]],a=g[i[1]],o=g[i[2]],l=g[i[3]];e.ave_z=s+a+o+l})),f.sort(((e,t)=>t.polygon.ave_z-e.polygon.ave_z)),f.forEach((n=>{const{polygon:r,normal:l}=n.polygon,g=p[r[0]],f=p[r[1]],m=p[r[2]],v=p[r[3]],y={x:e+g[0],y:t+g[1],z:i+g[2]},b={x:e+f[0],y:t+f[1],z:i+f[2]},_={x:e+m[0],y:t+m[1],z:i+m[2]},x={x:e+v[0],y:t+v[1],z:i+v[2]};a.beginPath(),a.moveTo(y.x,y.y,y.z),a.lineTo(b.x,b.y,b.z),a.lineTo(_.x,_.y,_.z),a.lineTo(x.x,x.y,x.z),a.closePath(),d?d(a,c.attribute,h):(a.fillStyle=o?o.computeColor(l,u):s,a.fill())}))}draw(e,t,i){const n=jh(e).polygon;this._draw(e,n,!1,i)}};AA=kA([jo()],AA);let EA=!1;const TA=new Oo((e=>{EA||(EA=!0,e(zu).to(AA).inSingletonScope(),e(Pu).toService(zu))}));var OA=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},PA=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},MA=function(e,t){return function(i,n){t(i,n,e)}};let IA=class extends bS{constructor(e){super(),this.canvasRenderer=e,this.type="pyramid3d",this.numberType=eu}contains(e,t,i){const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).polygon;n.highPerformanceSave();const s=this.transform(e,r,n),{x:a,y:o,z:l,lastModelMatrix:c}=s;let h=t;if(n.camera){h=t.clone();const i=e.parent.globalTransMatrix;h.x=i.a*t.x+i.c*t.y+i.e,h.y=i.b*t.x+i.d*t.y+i.f}this.canvasRenderer.z=l;let d=!1;return this.canvasRenderer.drawShape(e,n,a,o,{},null,((e,t,i)=>!!d||(d=e.isPointInPath(h.x,h.y),d)),((e,t,i)=>!1)),this.canvasRenderer.z=0,n.modelMatrix!==c&&ep.free(n.modelMatrix),n.modelMatrix=c,n.highPerformanceRestore(),d}};IA=OA([jo(),MA(0,Ho(zu)),PA("design:paramtypes",[Object])],IA);let RA=!1;const DA=new Oo(((e,t,i,n)=>{RA||(RA=!0,e(pS).to(IA).inSingletonScope(),e(vS).toService(pS))}));function LA(){LA.__loaded||(LA.__loaded=!0,bp.RegisterGraphicCreator("pyramid3d",CA),ph.load(TA),ph.load(DA))}LA.__loaded=!1;const jA=LA,FA=["segments","points","curveType",...gd];class BA extends _d{constructor(e){super(e),this.type="area",this.numberType=Kd}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;const{points:e,segments:t}=this.attribute;return t?0!==t.length:!!e&&0!==e.length}doUpdateAABBBounds(){const e=jh(this).area;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const t=this.attribute,i=se.graphicService.updateAreaAABBBounds(t,jh(this).area,this._AABBBounds,this),{boundsPadding:n=e.boundsPadding}=t,r=Cd(n);return r&&i.expand(r),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}_interpolate(e,t,i,n,r){"points"===e&&(r.points=Od(i,n,t))}getDefaultAttribute(e){return jh(this).area[e]}needUpdateTags(e){return super.needUpdateTags(e,FA)}needUpdateTag(e){return super.needUpdateTag(e,FA)}toCustomPath(){const e=new dc,t=this.attribute,i=t.segments,n=t=>{if(t&&t.length){let i=!0;const n=[];if(t.forEach((t=>{var r,s;!1!==t.defined&&(i?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y),n.push({x:null!==(r=t.x1)&&void 0!==r?r:t.x,y:null!==(s=t.y1)&&void 0!==s?s:t.y}),i=!1)})),n.length){for(let t=n.length-1;t>=0;t--)e.lineTo(n[t].x,n[t].y);e.closePath()}}};return t.points?n(t.points):i&&i.length&&i.forEach((e=>{n(e.points)})),e}clone(){return new BA(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return BA.NOWORK_ANIMATE_ATTR}}function NA(e){return new BA(e)}BA.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},bd);let zA=!1;const HA=new Oo((e=>{zA||(zA=!0,e(Ef).toSelf().inSingletonScope(),e(Tu).to(Ef).inSingletonScope(),e(Pu).toService(Tu),e(Hg).toService(nf),Go(e,Hg),e(Of).toSelf().inSingletonScope())}));var VA=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},UA=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},WA=function(e,t){return function(i,n){t(i,n,e)}};let GA=class{constructor(e){this.canvasRenderer=e,this.type="area",this.numberType=Kd}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).area;let{x:s=r.x,y:a=r.y}=e.attribute;const{fillPickable:o=r.fillPickable,strokePickable:l=r.strokePickable}=e.attribute;if(n.highPerformanceSave(),e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let c=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,(e=>!!c||!!o&&(c=e.isPointInPath(t.x,t.y),c)),((e,i,r)=>{if(c)return!0;if(!l)return!1;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=Sg(n,s+a,n.dpr),c=e.isPointInStroke(t.x,t.y),c})),n.highPerformanceRestore(),c}};GA=VA([jo(),WA(0,Ho(Tu)),UA("design:paramtypes",[Object])],GA);let KA=!1;const YA=new Oo(((e,t,i,n)=>{KA||(KA=!0,e(nS).to(GA).inSingletonScope(),e(vS).toService(nS))}));var XA=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},qA=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ZA=function(e,t){return function(i,n){t(i,n,e)}};let QA=class{constructor(e){this.canvasRenderer=e,this.type="area",this.numberType=Kd}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).area;let{x:s=r.x,y:a=r.y}=e.attribute;if(n.highPerformanceSave(),e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,(e=>!!o||(o=e.isPointInPath(t.x,t.y),o))),n.highPerformanceRestore(),o}};QA=XA([jo(),ZA(0,Ho(Tu)),qA("design:paramtypes",[Object])],QA);let $A=!1;const JA=new Oo(((e,t,i,n)=>{$A||($A=!0,e(Gx).to(QA).inSingletonScope(),e(Ux).toService(Gx))}));function eE(){eE.__loaded||(eE.__loaded=!0,bp.RegisterGraphicCreator("area",NA),ph.load(HA),ph.load(Vx?YA:JA))}eE.__loaded=!1;const tE=eE,iE=["width","height","image",...gd];class nE extends _d{constructor(e){super(e),this.type="image",this.numberType=Zd,this.loadImage(this.attribute.image)}get width(){var e;return null!==(e=this.attribute.width)&&void 0!==e?e:0}set width(e){this.attribute.width===e&&(this.attribute.width=e,this.addUpdateShapeAndBoundsTag())}get height(){var e;return null!==(e=this.attribute.height)&&void 0!==e?e:0}set height(e){this.attribute.height===e&&(this.attribute.height=e,this.addUpdateShapeAndBoundsTag())}get repeatX(){var e;return null!==(e=this.attribute.repeatX)&&void 0!==e?e:"no-repeat"}set repeatX(e){this.attribute.repeatX===e&&(this.attribute.repeatX=e)}get repeatY(){var e;return null!==(e=this.attribute.repeatY)&&void 0!==e?e:"no-repeat"}set repeatY(e){this.attribute.repeatY===e&&(this.attribute.repeatY=e)}get image(){return this.attribute.image}set image(e){e!==this.attribute.image&&(this.attribute.image=e,this.loadImage(this.attribute.image))}imageLoadSuccess(e,t,i){super.imageLoadSuccess(e,t,(()=>{this.successCallback&&this.successCallback()}))}imageLoadFail(e,t){super.imageLoadFail(e,(()=>{this.failCallback&&this.failCallback()}))}setAttributes(e,t,i){return e.image&&this.loadImage(e.image),super.setAttributes(e,t,i)}setAttribute(e,t,i,n){return"image"===e&&this.loadImage(t),super.setAttribute(e,t,i,n)}doUpdateAABBBounds(){const e=jh(this).image;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const t=this.attribute,i=se.graphicService.updateImageAABBBounds(t,jh(this).image,this._AABBBounds,this),{boundsPadding:n=e.boundsPadding}=t,r=Cd(n);return r&&i.expand(r),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}getDefaultAttribute(e){return Lc[e]}needUpdateTags(e){return super.needUpdateTags(e,iE)}needUpdateTag(e){return super.needUpdateTag(e,iE)}clone(){return new nE(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return nE.NOWORK_ANIMATE_ATTR}}function rE(e){return new nE(e)}nE.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},bd);const sE=new class extends ef{constructor(){super(...arguments),this.time=Ol.beforeFillStroke}drawShape(e,t,i,n,r,s,a,o,c,h,d,u){const{background:p,backgroundMode:g=c.backgroundMode,backgroundFit:f=c.backgroundFit}=e.attribute;if(p)if(e.backgroundImg){const i=e.resources.get(p);if("success"!==i.state||!i.data)return;if(t.save(),e.parent&&!e.transMatrix.onlyTranslate()){const i=jh(e.parent).group,{scrollX:n=i.scrollX,scrollY:r=i.scrollY}=e.parent.attribute;t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),t.translate(n,r)}const n=e.AABBBounds;this.doDrawImage(t,i.data,n,g,f),t.restore(),e.transMatrix.onlyTranslate()||t.setTransformForCurrent()}else if(D(p)){const{stroke:i,fill:n,lineWidth:r=1,cornerRadius:s=0,expandX:a=0,expandY:o=0}=p;if(!i&&!n)return;t.beginPath();const{x:c,y:h,width:d,height:u}=function(e){const t=Cd(e.attribute.boundsPadding),i=e.AABBBounds;let n=i.x1,r=i.y1,s=i.width(),a=i.height();return l(t)?(n+=t,r+=t,s-=2*t,a-=2*t):(n+=t[3],r+=t[0],s-=t[1]+t[3],a-=t[0]+t[2]),{x:n,y:r,width:s,height:a}}(e);s?Pg(t,c-a,h-o,d+2*a,u+2*o,s):t.rect(c-a,h-o,d+2*a,u+2*o),t.globalAlpha=1,n&&(t.fillStyle=n,t.fill()),i&&r>0&&(t.lineWidth=r,t.strokeStyle=i,t.stroke())}else{t.beginPath();const r=e.AABBBounds;t.rect(i,n,r.width(),r.height()),t.fillStyle=p,t.globalAlpha=1,t.fill()}}};var aE=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},oE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},lE=function(e,t){return function(i,n){t(i,n,e)}};const cE=["","repeat-x","repeat-y","repeat"];let hE=class extends hf{constructor(e){super(),this.imageRenderContribitions=e,this.numberType=Zd,this.builtinContributions=[sE],this.init(e)}drawShape(e,t,i,n,r,s,a){const o=jh(e).image,{width:l=o.width,height:c=o.height,repeatX:h=o.repeatX,repeatY:d=o.repeatY,cornerRadius:u=o.cornerRadius,image:p}=e.attribute,g=this.valid(e,o,a);if(!g)return;const{fVisible:f,sVisible:m,doFill:y,doStroke:b}=g;if(t.setShadowBlendStyle&&t.setShadowBlendStyle(e,o),this.beforeRenderStep(e,t,i,n,y,!1,f,!1,o,r,a),y)if(a)a(t,e.attribute,o);else if(f){if(!p||!e.resources)return;const r=e.resources.get(p);if("success"!==r.state)return;let s=!1;0===u||v(u)&&u.every((e=>0===e))||(t.beginPath(),Pg(t,i,n,l,c,u),t.save(),t.clip(),s=!0),t.setCommonStyle(e,e.attribute,i,n,o);let a=0;if("repeat"===h&&(a|=1),"repeat"===d&&(a|=2),a){const e=t.createPattern(r.data,cE[a]);t.fillStyle=e,t.translate(i,n,!0),t.fillRect(0,0,l,c),t.translate(-i,-n,!0)}else t.drawImage(r.data,i,n,l,c);s&&t.restore()}this.afterRenderStep(e,t,i,n,y,!1,f,!1,o,r,a)}draw(e,t,i){const{image:n}=e.attribute;if(!n||!e.resources)return;if("success"!==e.resources.get(n).state)return;const{context:r}=t.drawParams;if(!r)return;const s=jh(e).image;this._draw(e,s,!1,i)}};hE=aE([jo(),lE(0,Ho(Uo)),lE(0,Vo(Wg)),oE("design:paramtypes",[Object])],hE);let dE=!1;const uE=new Oo((e=>{dE||(dE=!0,e(Vu).to(hE).inSingletonScope(),e(Pu).toService(Vu),e(Wg).toService(nf),Go(e,Wg))}));var pE=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let gE=class{constructor(){this.type="image",this.numberType=Zd}contains(e,t,i){const{pickContext:n}=null!=i?i:{};return!!n&&!!e.AABBBounds.containsPoint(t)}};gE=pE([jo()],gE);let fE=!1;const mE=new Oo(((e,t,i,n)=>{fE||(fE=!0,e(sS).to(gE).inSingletonScope(),e(vS).toService(sS))}));var vE=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let yE=class{constructor(){this.type="image",this.numberType=Zd}contains(e,t,i){const{pickContext:n}=null!=i?i:{};return!!n&&!!e.AABBBounds.containsPoint(t)}};yE=vE([jo()],yE);let bE=!1;const _E=new Oo(((e,t,i,n)=>{bE||(bE=!0,e(Yx).to(yE).inSingletonScope(),e(yE).toService(Yx))}));function xE(){xE.__loaded||(xE.__loaded=!0,bp.RegisterGraphicCreator("image",rE),ph.load(uE),ph.load(Vx?mE:_E))}xE.__loaded=!1;const SE=xE,wE=["segments","points","curveType",...gd];class CE extends _d{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.type="line",this.numberType=Qd}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;const{points:e,segments:t}=this.attribute;return t?0!==t.length:!!e&&!(e.length<=1)}_interpolate(e,t,i,n,r){"points"===e&&(r.points=Od(i,n,t))}doUpdateAABBBounds(){const e=jh(this).line;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const t=this.attribute,i=se.graphicService.updateLineAABBBounds(t,jh(this).line,this._AABBBounds,this),{boundsPadding:n=e.boundsPadding}=t,r=Cd(n);return r&&i.expand(r),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}getDefaultAttribute(e){return jh(this).line[e]}needUpdateTags(e){return super.needUpdateTags(e,wE)}needUpdateTag(e){return super.needUpdateTag(e,wE)}toCustomPath(){const e=this.attribute,t=new dc,i=e.segments,n=e=>{if(e&&e.length){let i=!0;e.forEach((e=>{!1!==e.defined&&(i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y),i=!1)}))}};return i&&i.length?i.forEach((e=>{n(e.points)})):e.points&&n(e.points),t}clone(){return new CE(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return CE.NOWORK_ANIMATE_ATTR}}function kE(e){return new CE(e)}CE.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},bd);let AE=!1;const EE=new Oo((e=>{AE||(AE=!0,e(gf).toSelf().inSingletonScope(),e(mf).toSelf().inSingletonScope(),e(Iu).to(gf).inSingletonScope(),e(Pu).toService(Iu))}));var TE=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},OE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},PE=function(e,t){return function(i,n){t(i,n,e)}};let ME=class extends bS{constructor(e){super(),this.canvasRenderer=e,this.type="line",this.numberType=Qd}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;n.highPerformanceSave();const r=jh(e).line,s=this.transform(e,r,n),{x:a,y:o,z:l,lastModelMatrix:c}=s;let h=t;if(n.camera){h=t.clone();const i=e.parent.globalTransMatrix;h.x=i.a*t.x+i.c*t.y+i.e,h.y=i.b*t.x+i.d*t.y+i.f}this.canvasRenderer.z=l;let d=!1;return this.canvasRenderer.drawShape(e,n,a,o,{},null,(e=>!!d||(d=e.isPointInPath(h.x,h.y),d)),((e,t,i)=>{if(d)return!0;const r=t.lineWidth||i.lineWidth,s=t.pickStrokeBuffer||i.pickStrokeBuffer;return n.lineWidth=Sg(n,r+s,n.dpr),d=e.isPointInStroke(h.x,h.y),d})),this.canvasRenderer.z=0,n.modelMatrix!==c&&ep.free(n.modelMatrix),n.modelMatrix=c,n.highPerformanceRestore(),d}};ME=TE([jo(),PE(0,Ho(Iu)),OE("design:paramtypes",[Object])],ME);let IE=!1;const RE=new Oo(((e,t,i,n)=>{IE||(IE=!0,e(aS).to(ME).inSingletonScope(),e(vS).toService(aS))}));var DE=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},LE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},jE=function(e,t){return function(i,n){t(i,n,e)}};let FE=class{constructor(e){this.canvasRenderer=e,this.type="line",this.numberType=Qd}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).line;let{x:s=r.x,y:a=r.y}=e.attribute;if(n.highPerformanceSave(),e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,(e=>!!o||(o=e.isPointInPath(t.x,t.y),o)),((e,i,r)=>{if(o)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=s+a,o=e.isPointInStroke(t.x,t.y),o})),n.highPerformanceRestore(),o}};FE=DE([jo(),jE(0,Ho(Iu)),LE("design:paramtypes",[Object])],FE);let BE=!1;const NE=new Oo(((e,t,i,n)=>{BE||(BE=!0,e(Xx).to(FE).inSingletonScope(),e(Ux).toService(Xx))}));function zE(){zE.__loaded||(zE.__loaded=!0,bp.RegisterGraphicCreator("line",kE),ph.load(EE),ph.load(Vx?RE:NE))}zE.__loaded=!1;const HE=zE,VE=["path","customPath",...gd];class UE extends _d{constructor(e){super(e),this.type="path",this.numberType=$d}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{path:e}=this.attribute;return null!=e&&""!==e}getParsedPathShape(){const e=jh(this).path;if(!this.valid)return e.path;const t=this.attribute;return t.path instanceof dc?t.path:(P(this.cache)&&this.doUpdatePathShape(),this.cache instanceof dc?this.cache:e.path)}doUpdateAABBBounds(){const e=jh(this).path;this.doUpdatePathShape(),this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const t=this.attribute,i=se.graphicService.updatePathAABBBounds(t,jh(this).path,this._AABBBounds,this),{boundsPadding:n=e.boundsPadding}=t,r=Cd(n);return r&&i.expand(r),this.clearUpdateBoundTag(),i}doUpdatePathShape(){const e=this.attribute;_(e.path,!0)?this.cache=(new dc).fromString(e.path):e.customPath&&(this.cache=new dc,e.customPath(this.cache,this))}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}getDefaultAttribute(e){return jh(this).path[e]}needUpdateTags(e){return super.needUpdateTags(e,VE)}needUpdateTag(e){return super.needUpdateTag(e,VE)}toCustomPath(){return(new dc).fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new UE(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return UE.NOWORK_ANIMATE_ATTR}}function WE(e){return new UE(e)}UE.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},bd);const GE=_f,KE=tf;var YE=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},XE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qE=function(e,t){return function(i,n){t(i,n,e)}};let ZE=class extends hf{constructor(e){super(),this.pathRenderContribitions=e,this.numberType=$d,this.builtinContributions=[KE,GE],this.init(e)}drawShape(e,t,i,n,r,s,a,o){var l,c,h;const d=null!==(l=this.tempTheme)&&void 0!==l?l:jh(e,null==s?void 0:s.theme).path,{x:u=d.x,y:p=d.y}=e.attribute,g=null!==(c=this.z)&&void 0!==c?c:0,f=this.valid(e,d,a,o);if(!f)return;const{fVisible:m,sVisible:v,doFill:y,doStroke:b}=f;if(t.beginPath(),e.pathShape)Dl(e.pathShape.commandList,t,i,n,1,1,g);else{Dl((null!==(h=e.attribute.path)&&void 0!==h?h:d.path).commandList,t,i,n,1,1,g)}t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,d),this.beforeRenderStep(e,t,i,n,y,b,m,v,d,r,a,o),b&&(o?o(t,e.attribute,d):v&&(t.setStrokeStyle(e,e.attribute,u-i,p-n,d),t.stroke())),y&&(a?a(t,e.attribute,d):m&&(t.setCommonStyle(e,e.attribute,u-i,p-n,d),t.fill())),this.afterRenderStep(e,t,i,n,y,b,m,v,d,r,a,o)}draw(e,t,i,n){const r=jh(e,null==n?void 0:n.theme).path;this.tempTheme=r,this._draw(e,r,!1,i,n),this.tempTheme=null}};ZE=YE([jo(),qE(0,Ho(Uo)),qE(0,Vo(Gg)),XE("design:paramtypes",[Object])],ZE);let QE=!1;const $E=new Oo((e=>{QE||(QE=!0,e(ZE).toSelf().inSingletonScope(),e(Ru).to(ZE).inSingletonScope(),e(Pu).toService(Ru),e(Gg).toService(nf),Go(e,Gg))}));var JE=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},eT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},tT=function(e,t){return function(i,n){t(i,n,e)}};let iT=class extends bS{constructor(e){super(),this.canvasRenderer=e,this.type="path",this.numberType=$d}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).path;n.highPerformanceSave();const s=this.transform(e,r,n),{x:a,y:o,z:l,lastModelMatrix:c}=s;let h=t;if(n.camera){h=t.clone();const i=e.parent.globalTransMatrix;h.x=i.a*t.x+i.c*t.y+i.e,h.y=i.b*t.x+i.d*t.y+i.f}this.canvasRenderer.z=l;let d=!1;return this.canvasRenderer.drawShape(e,n,a,o,{},null,((e,t,i)=>!!d||(d=e.isPointInPath(h.x,h.y),d)),((e,t,i)=>{if(d)return!0;const r=t.lineWidth||i.lineWidth,s=t.pickStrokeBuffer||i.pickStrokeBuffer;return n.lineWidth=Sg(n,r+s,n.dpr),d=e.isPointInStroke(h.x,h.y),d})),this.canvasRenderer.z=0,n.modelMatrix!==c&&ep.free(n.modelMatrix),n.modelMatrix=c,n.highPerformanceRestore(),d}};iT=JE([jo(),tT(0,Ho(Ru)),eT("design:paramtypes",[Object])],iT);let nT=!1;const rT=new Oo(((e,t,i,n)=>{nT||(nT=!0,e(oS).to(iT).inSingletonScope(),e(vS).toService(oS))}));var sT=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},aT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},oT=function(e,t){return function(i,n){t(i,n,e)}};let lT=class{constructor(e){this.canvasRenderer=e,this.type="path",this.numberType=$d}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).path;let{x:s=r.x,y:a=r.y}=e.attribute;if(n.highPerformanceSave(),e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,((e,i,n)=>!!o||(o=e.isPointInPath(t.x,t.y),o)),((e,i,r)=>{if(o)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=s+a,o=e.isPointInStroke(t.x,t.y),o})),n.highPerformanceRestore(),o}};lT=sT([jo(),oT(0,Ho(Ru)),aT("design:paramtypes",[Object])],lT);let cT=!1;const hT=new Oo(((e,t,i,n)=>{cT||(cT=!0,e(qx).to(lT).inSingletonScope(),e(Ux).toService(qx))}));function dT(){dT.__loaded||(dT.__loaded=!0,bp.RegisterGraphicCreator("path",WE),ph.load($E),ph.load(Vx?rT:hT))}dT.__loaded=!1;const uT=dT,pT=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]];class gT extends LS{constructor(e){super(e),this.type="rect3d",this.numberType=iu}findFace(){const e={polygons:[],vertices:[],edges:[]},t=jh(this).rect3d,{x1:i,y1:n,x:r,y:s,length:a=Gn(t.width,t.height)}=this.attribute;let{width:o,height:l}=this.attribute;o=null!=o?o:i-r,l=null!=l?l:n-s;for(let c=0;c<pT.length;c++){const t=pT[c];e.vertices.push([t[0]*o,t[1]*l,t[2]*a])}return e.polygons.push({polygon:[0,1,5,4],normal:[0,-1,0]}),e.polygons.push({polygon:[2,3,7,6],normal:[0,1,0]}),e.polygons.push({polygon:[4,7,3,0],normal:[-1,0,0]}),e.polygons.push({polygon:[1,2,6,5],normal:[1,0,0]}),e.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),e.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),e.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],e}getNoWorkAnimateAttr(){return gT.NOWORK_ANIMATE_ATTR}}function fT(e){return new gT(e)}gT.NOWORK_ANIMATE_ATTR=bd;var mT=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let vT=class extends hf{constructor(){super(...arguments),this.type="rect3d",this.numberType=iu}drawShape(e,t,i,n,r,s,a,o){var l;const c=jh(e,null==s?void 0:s.theme).rect3d,{fill:h=c.fill,stroke:d=c.stroke,x1:u,y1:p,x:g,y:f,opacity:m=c.opacity,fillOpacity:v=c.fillOpacity,lineWidth:y=c.lineWidth,strokeOpacity:b=c.strokeOpacity,visible:_=c.visible}=e.attribute;let{width:x,height:S}=e.attribute;x=(null!=x?x:u-g)||0,S=(null!=S?S:p-f)||0;const w=null!==(l=this.z)&&void 0!==l?l:0,C=Dg(m,v,x,S,h),k=jg(m,b,x,S),A=Mg(h),E=Ig(d,y);if(!e.valid||!_)return;if(!A&&!E)return;if(!(C||k||a||o))return;const{light:T,camera:O}=r.stage||{},P=e.findFace();if(!1!==h){t.setCommonStyle(e,e.attribute,i,n,c);let r=h;"string"!=typeof r&&(r="black"),this.fill(i,n,w,P,r,t,T,a)}!1!==d&&(t.setStrokeStyle(e,e.attribute,i,n,c),this.stroke(i,n,w,P,t))}stroke(e,t,i,n,r){const s=n.vertices;n.edges.forEach((n=>{const a=s[n[0]],o={x:e+a[0],y:t+a[1],z:i+a[2]},l=s[n[1]],c={x:e+l[0],y:t+l[1],z:i+l[2]};r.beginPath(),r.moveTo(o.x,o.y,o.z),r.lineTo(c.x,c.y,c.z),r.stroke()}))}fill(e,t,i,n,r,s,a,o){const l=sd.Get(r,rd.Color255),c=n.vertices,h=c.map((e=>s.view(e[0],e[1],e[2])[2])),d=[];n.polygons.forEach(((e,t)=>{d.push({faceIdx:t,polygon:e});const{polygon:i,normal:n}=e,r=h[i[0]],s=h[i[1]],a=h[i[2]],o=h[i[3]];e.ave_z=r+s+a+o})),d.sort(((e,t)=>t.polygon.ave_z-e.polygon.ave_z)),d.forEach((n=>{const{polygon:h,normal:d}=n.polygon,u=c[h[0]],p=c[h[1]],g=c[h[2]],f=c[h[3]],m={x:e+u[0],y:t+u[1],z:i+u[2]},v={x:e+p[0],y:t+p[1],z:i+p[2]},y={x:e+g[0],y:t+g[1],z:i+g[2]},b={x:e+f[0],y:t+f[1],z:i+f[2]};s.beginPath(),s.moveTo(m.x,m.y,m.z),s.lineTo(v.x,v.y,v.z),s.lineTo(y.x,y.y,y.z),s.lineTo(b.x,b.y,b.z),s.closePath(),o?o(s,null,null):(s.fillStyle=a?a.computeColor(d,l):r,s.fill())}))}draw(e,t,i){const n=jh(e).rect;this._draw(e,n,!1,i)}};vT=mT([jo()],vT);let yT=!1;const bT=new Oo((e=>{yT||(yT=!0,e(ju).to(vT).inSingletonScope(),e(Pu).toService(ju))}));var _T=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},xT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ST=function(e,t){return function(i,n){t(i,n,e)}};new hl;let wT=class extends bS{constructor(e){super(),this.canvasRenderer=e,this.type="rect3d",this.numberType=iu}contains(e,t,i){const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).rect;n.highPerformanceSave();const s=this.transform(e,r,n),{x:a,y:o,z:l,lastModelMatrix:c}=s;let h=t;if(n.camera){h=t.clone();const i=e.parent.globalTransMatrix;h.x=i.a*t.x+i.c*t.y+i.e,h.y=i.b*t.x+i.d*t.y+i.f}this.canvasRenderer.z=l;let d=!1;return this.canvasRenderer.drawShape(e,n,a,o,i,null,((e,t,i)=>!!d||(d=e.isPointInPath(h.x,h.y),d))),this.canvasRenderer.z=0,n.modelMatrix!==c&&ep.free(n.modelMatrix),n.modelMatrix=c,n.highPerformanceRestore(),d}};wT=_T([jo(),ST(0,Ho(ju)),xT("design:paramtypes",[Object])],wT);let CT=!1;const kT=new Oo(((e,t,i,n)=>{CT||(CT=!0,e(cS).to(wT).inSingletonScope(),e(vS).toService(cS))}));function AT(){AT.__loaded||(AT.__loaded=!0,bp.RegisterGraphicCreator("rect3d",fT),ph.load(bT),ph.load(kT))}AT.__loaded=!1;const ET=AT;const TT=new class extends ef{constructor(){super(...arguments),this.time=Ol.beforeFillStroke}drawShape(e,t,i,n,r,s,a,o,l,c,h,d){var u,p,g,f,m,v,y,b,_,x;const{backgroundMode:S=l.backgroundMode,backgroundFit:w=l.backgroundFit}=e.attribute;let C,{background:k}=e.attribute;if(!k)return;const A=D(k)&&k.background,E=e.transMatrix.onlyTranslate();if(A){const t=e.AABBBounds,i=(null!==(u=k.x)&&void 0!==u?u:t.x1)+(null!==(p=k.dx)&&void 0!==p?p:0),n=(null!==(g=k.y)&&void 0!==g?g:t.y1)+(null!==(f=k.dy)&&void 0!==f?f:0),r=null!==(m=k.width)&&void 0!==m?m:t.width(),s=null!==(v=k.height)&&void 0!==v?v:t.height();if(C=Cg.allocate(i,n,i+r,n+s),k=k.background,!E){const e=C.width(),t=C.height();C.set((null!==(y=k.x)&&void 0!==y?y:0)+(null!==(b=k.dx)&&void 0!==b?b:0),(null!==(_=k.y)&&void 0!==_?_:0)+(null!==(x=k.dy)&&void 0!==x?x:0),e,t)}}else C=e.AABBBounds,E||C.set(0,0,C.width(),C.height());if(e.backgroundImg&&e.resources){const r=e.resources.get(k);if("success"!==r.state||!r.data)return;t.highPerformanceSave(),E&&t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),t.setCommonStyle(e,e.attribute,i,n,l),this.doDrawImage(t,r.data,C,S,w),t.highPerformanceRestore(),t.setTransformForCurrent()}else t.highPerformanceSave(),t.setCommonStyle(e,e.attribute,i,n,l),t.fillStyle=k,t.fillRect(C.x1,C.y1,C.width(),C.height()),t.highPerformanceRestore();A&&Cg.free(C)}};var OT=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},PT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},MT=function(e,t){return function(i,n){t(i,n,e)}};let IT=class extends hf{constructor(e){super(),this.textRenderContribitions=e,this.numberType=su,this.builtinContributions=[TT],this.init(e)}drawShape(e,t,i,n,r,s,a,o){var l,c,h;const d=jh(e,null==s?void 0:s.theme).text,{text:u,underline:p=d.underline,lineThrough:g=d.lineThrough,keepDirIn3d:f=d.keepDirIn3d,direction:m=d.direction,whiteSpace:v=d.whiteSpace,fontSize:y=d.fontSize,verticalMode:b=d.verticalMode,x:_=d.x,y:x=d.y}=e.attribute;let{textAlign:S=d.textAlign,textBaseline:w=d.textBaseline}=e.attribute;if(!b&&"vertical"===m){const t=S;S=null!==(l=e.getBaselineMapAlign()[w])&&void 0!==l?l:"left",w=null!==(c=e.getAlignMapBaseline()[t])&&void 0!==c?c:"top"}const C=null!==(h=Dd(e.attribute.lineHeight,y))&&void 0!==h?h:y,k=this.valid(e,d,a,o);if(!k)return;const{fVisible:A,sVisible:E,doFill:T,doStroke:O}=k,P=!f,M=this.z||0;t.beginPath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,d),this.beforeRenderStep(e,t,i,n,T,O,A,E,d,r,a,o),P&&this.transformUseContext2d(e,d,M,t);const I=(r,s,l,c)=>{let h=i+s;const u=n+l;if(c){t.highPerformanceSave(),h+=y;const e=Ju.allocate(1,0,0,1,0,0);e.rotateByCenter(Math.PI/2,h,u),t.transformFromMatrix(e,!0),Ju.free(e)}O&&(o?o(t,e.attribute,d):E&&(t.setStrokeStyle(e,e.attribute,_-i,x-n,d),t.strokeText(r,h,u,M))),T&&(a?a(t,e.attribute,d):A&&(t.setCommonStyle(e,e.attribute,_-i,x-n,d),t.fillText(r,h,u,M),this.drawUnderLine(p,g,e,h,u,M,d,t))),c&&(t.highPerformanceRestore(),t.setTransformForCurrent())};if(e.isMultiLine)if(t.setTextStyleWithoutAlignBaseline(e.attribute,d,M),"horizontal"===m){const{multilineLayout:r}=e;if(!r)return void t.highPerformanceRestore();const{xOffset:s,yOffset:l}=r.bbox;O&&(o?o(t,e.attribute,d):E&&(t.setStrokeStyle(e,e.attribute,_-i,x-n,d),r.lines.forEach((e=>{t.strokeText(e.str,(e.leftOffset||0)+s+i,(e.topOffset||0)+l+n,M)})))),T&&(a?a(t,e.attribute,d):A&&(t.setCommonStyle(e,e.attribute,_-i,x-n,d),r.lines.forEach((r=>{t.fillText(r.str,(r.leftOffset||0)+s+i,(r.topOffset||0)+l+n,M),this.drawMultiUnderLine(p,g,e,(r.leftOffset||0)+i,(r.topOffset||0)+l+n,M,r.width,d,t)}))))}else{e.tryUpdateAABBBounds();const i=e.cache,{verticalList:n}=i;t.textAlign="left",t.textBaseline="top";const r=C*n.length;let s=0;n.forEach((e=>{const t=e.reduce(((e,t)=>e+(t.width||0)),0);s=Wn(t,s)}));let a=0,o=0;"bottom"===w?o=-r:"middle"===w&&(o=-r/2),"center"===S?a-=s/2:"right"===S&&(a-=s),n.forEach(((e,t)=>{const i=e.reduce(((e,t)=>e+(t.width||0)),0),n=s-i;let l=a;"center"===S?l+=n/2:"right"===S&&(l+=n),e.forEach((e=>{const{text:i,width:n,direction:s}=e;I(i,r-(t+1)*C+o,l,s),l+=n}))}))}else if("horizontal"===m){t.setTextStyle(e.attribute,d,M);const i=e.clipedText;let n=0;C!==y&&("top"===w?n=(C-y)/2:"middle"===w||"bottom"===w&&(n=-(C-y)/2)),I(i,0,n,0)}else{e.tryUpdateAABBBounds();const i=e.cache;if(i){t.setTextStyleWithoutAlignBaseline(e.attribute,d,M);const{verticalList:n}=i;let r=0;const s=n[0].reduce(((e,t)=>e+(t.width||0)),0);let a=0;"bottom"===w?a=-C:"middle"===w&&(a=-C/2),"center"===S?r-=s/2:"right"===S&&(r-=s),t.textAlign="left",t.textBaseline="top",n[0].forEach((e=>{const{text:t,width:i,direction:n}=e;I(t,a,r,n),r+=i}))}}P&&this.restoreTransformUseContext2d(e,d,M,t),this.afterRenderStep(e,t,i,n,T,O,A,E,d,r,a,o)}draw(e,t,i,n){const r=jh(e,null==n?void 0:n.theme).text,{keepDirIn3d:s=r.keepDirIn3d}=e.attribute,a=!s;this._draw(e,r,a,i,n)}drawUnderLine(e,t,i,n,r,s,a,o){if(t+e<=0)return;const{textAlign:l=a.textAlign,textBaseline:c=a.textBaseline,fontSize:h=a.fontSize,fill:d=a.fill,opacity:u=a.opacity,fillOpacity:p=a.fillOpacity}=i.attribute,g=i.clipedWidth,f=l_(l,g),m=c_(c,h,h),v={lineWidth:0,stroke:d,opacity:u,strokeOpacity:p};if(e){v.lineWidth=e,o.setStrokeStyle(i,v,n,r,a),o.beginPath();const t=r+m+h;o.moveTo(n+f,t,s),o.lineTo(n+f+g,t,s),o.stroke()}if(t){v.lineWidth=t,o.setStrokeStyle(i,v,n,r,a),o.beginPath();const e=r+m+h/2;o.moveTo(n+f,e,s),o.lineTo(n+f+g,e,s),o.stroke()}}drawMultiUnderLine(e,t,i,n,r,s,a,o,l){if(t+e<=0)return;const{textAlign:c=o.textAlign,fontSize:h=o.fontSize,fill:d=o.fill,opacity:u=o.opacity,fillOpacity:p=o.fillOpacity}=i.attribute,g=l_(c,a),f=c_("alphabetic",h,h),m={lineWidth:0,stroke:d,opacity:u,strokeOpacity:p};let v=-3;if(e){m.lineWidth=e,l.setStrokeStyle(i,m,n,r,o),l.beginPath();const t=r+f+h+v;l.moveTo(n+g,t,s),l.lineTo(n+g+a,t,s),l.stroke()}if(v=-1,t){m.lineWidth=t,l.setStrokeStyle(i,m,n,r,o),l.beginPath();const e=r+f+h/2+v;l.moveTo(n+g,e,s),l.lineTo(n+g+a,e,s),l.stroke()}}};IT=OT([jo(),MT(0,Ho(Uo)),MT(0,Vo(qg)),PT("design:paramtypes",[Object])],IT);let RT=!1;const DT=new Oo((e=>{RT||(RT=!0,e(Bu).to(IT).inSingletonScope(),e(Pu).toService(Bu),e(qg).toService(nf),Go(e,qg))}));var LT=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},jT=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},FT=function(e,t){return function(i,n){t(i,n,e)}};let BT=class extends bS{constructor(e){super(),this.canvasRenderer=e,this.type="text",this.numberType=su}contains(e,t,i){const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=e.AABBBounds;if(!n.camera)return!!r.containsPoint(t);n.highPerformanceSave();const s=jh(e).text,{keepDirIn3d:a=s.keepDirIn3d}=e.attribute,o=!a,l=this.transform(e,s,n,o),{x:c,y:h,z:d,lastModelMatrix:u}=l;this.canvasRenderer.z=d;let p=t;if(n.camera){p=t.clone();const i=e.parent.globalTransMatrix;p.x=i.a*t.x+i.c*t.y+i.e,p.y=i.b*t.x+i.d*t.y+i.f}let g=!1;return this.canvasRenderer.drawShape(e,n,c,h,{},null,((t,i,n)=>{if(g)return!0;const{fontSize:r=s.fontSize,textBaseline:a=s.textBaseline,textAlign:o=s.textAlign}=e.attribute,l=e.AABBBounds,u=l.height(),f=l.width(),m=c_(a,u,r),v=l_(o,f);return t.rect(v+c,m+h,f,u,d),g=t.isPointInPath(p.x,p.y),g}),((e,t,i)=>g)),this.canvasRenderer.z=0,n.modelMatrix!==u&&ep.free(n.modelMatrix),n.modelMatrix=u,n.highPerformanceRestore(),g}};BT=LT([jo(),FT(0,Ho(Bu)),jT("design:paramtypes",[Object])],BT);let NT=!1;const zT=new Oo(((e,t,i,n)=>{NT||(NT=!0,e(dS).to(BT).inSingletonScope(),e(vS).toService(dS))}));var HT=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let VT=class{constructor(){this.type="text",this.numberType=su}contains(e,t,i){return!!e.AABBBounds.containsPoint(t)}};VT=HT([jo()],VT);let UT=!1;const WT=new Oo(((e,t,i,n)=>{UT||(UT=!0,e($x).to(VT).inSingletonScope(),e(Ux).toService($x))}));function GT(){GT.__loaded||(GT.__loaded=!0,bp.RegisterGraphicCreator("text",u_),ph.load(DT),ph.load(Vx?zT:WT))}GT.__loaded=!1;const KT=GT;class YT{constructor(e,t,i,n,r,s,a,o,l,c,h,d,u,p){this.left=e,this.top=t,this.width=i,this.height=n,this.actualHeight=0,this.bottom=t+n,this.right=e+i,this.ellipsis=r,this.wordBreak=s,this.verticalDirection=a,this.lines=[],this.globalAlign=o,this.globalBaseline=l,this.layoutDirection=c,this.directionKey=Fc[this.layoutDirection],this.isWidthMax=h,this.isHeightMax=d,this.singleLine=u,p?(p.clear(),this.icons=p):this.icons=new Map}draw(e,t){const{width:i,height:n}=this.getActualSize(),r=this.isWidthMax?Math.min(this.width,i):this.width||i||0;let s=this.isHeightMax?Math.min(this.height,n):this.height||n||0;s=Math.min(s,n);let a=0;switch(this.globalBaseline){case"top":a=0;break;case"middle":a=-s/2;break;case"bottom":a=-s}let o=0;switch(this.globalAlign){case"left":o=0;break;case"center":o=-r/2;break;case"right":o=-r}let l=this[this.directionKey.height];this.singleLine&&(l=this.lines[0].height+1);let c=!1;if("middle"===this.verticalDirection)if(this.actualHeight>=l&&0!==l)for(let h=0;h<this.lines.length;h++){const{top:i,height:n}=this.lines[h];if(i+n<this[this.directionKey.top]||i+n>this[this.directionKey.top]+l)return c;let r=!1;this.ellipsis&&this.lines[h+1]&&this.lines[h+1].top+this.lines[h+1].height>this[this.directionKey.top]+l&&(r=!0,c=!0),this.lines[h].draw(e,r,this.lines[h][this.directionKey.left]+o,this.lines[h][this.directionKey.top]+a,t)}else{const i=Math.floor((l-this.actualHeight)/2);"vertical"===this.layoutDirection?o+=i:a+=i;for(let n=0;n<this.lines.length;n++)this.lines[n].draw(e,!1,this.lines[n][this.directionKey.left]+o,this.lines[n][this.directionKey.top]+a,t)}else if("bottom"===this.verticalDirection&&"vertical"!==this.layoutDirection)for(let h=0;h<this.lines.length;h++){const{top:i,height:n}=this.lines[h],r=l-this.lines[h].top-this.lines[h].height;if(0===l)this.lines[h].draw(e,!1,o,r+a,t);else{if(r+n>this[this.directionKey.top]+l||r<this[this.directionKey.top])return c;{let i=!1;this.ellipsis&&this.lines[h+1]&&r-this.lines[h+1].height<this[this.directionKey.top]&&(i=!0,c=!0),this.lines[h].draw(e,i,o,r+a,t)}}}else{"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&this.singleLine&&this.isWidthMax&&(o+=this.lines[0].height+1);for(let i=0;i<this.lines.length;i++){"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&(o-=this.lines[i].height+this.lines[i].top);const{top:n,height:r}=this.lines[i];if(0===l)this.lines[i].draw(e,!1,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,t);else{if(n+r<this[this.directionKey.top]||n+r>this[this.directionKey.top]+l)return c;{let n=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+l&&(n=!0,c=!0),this.lines[i].draw(e,n,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,t)}}}}return c}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let e=0,t=0;for(let i=0;i<this.lines.length;i++){const n=this.lines[i];n.actualWidth>e&&(e=n.actualWidth),t+=n.height}return{width:"vertical"===this.layoutDirection?t:e,height:"vertical"===this.layoutDirection?e:t}}getActualSizeWidthEllipsis(){let e=0,t=0;const{width:i,height:n}=this.getRawActualSize();this.width;let r=this.height||n||0;r=Math.min(r,n);let s=this[this.directionKey.height];if(this.singleLine&&(s=this.lines[0].height+1),"middle"===this.verticalDirection)if(this.actualHeight>=s&&0!==s)for(let a=0;a<this.lines.length;a++){const{top:i,height:n}=this.lines[a];if(i+n<this[this.directionKey.top]||i+n>this[this.directionKey.top]+s);else if(this.ellipsis&&this.lines[a+1]&&this.lines[a+1].top+this.lines[a+1].height>this[this.directionKey.top]+s){const i=this.lines[a].getWidthWithEllips();i>e&&(e=i),t+=this.lines[a].height}else this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height}else{Math.floor((s-this.actualHeight)/2);for(let i=0;i<this.lines.length;i++)this.lines[i].actualWidth>e&&(e=this.lines[i].actualWidth),t+=this.lines[i].height}else if("bottom"===this.verticalDirection)for(let a=0;a<this.lines.length;a++){const{top:i,height:n}=this.lines[a],r=s-this.lines[a].top-this.lines[a].height;if(0===s)this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height;else if(r+n>this[this.directionKey.top]+s||r<this[this.directionKey.top]);else if(this.ellipsis&&this.lines[a+1]&&r-this.lines[a+1].height<this[this.directionKey.top]){const i=this.lines[a].getWidthWithEllips();i>e&&(e=i),t+=this.lines[a].height}else this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height}else for(let a=0;a<this.lines.length;a++){const{top:i,height:n}=this.lines[a];if(0===s)this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height;else if(i+n<this[this.directionKey.top]||i+n>this[this.directionKey.top]+s);else if(this.ellipsis&&this.lines[a+1]&&this.lines[a+1].top+this.lines[a+1].height>this[this.directionKey.top]+s){const i=this.lines[a].getWidthWithEllips();i>e&&(e=i),t+=this.lines[a].height}else this.lines[a].actualWidth>e&&(e=this.lines[a].actualWidth),t+=this.lines[a].height}return{width:"vertical"===this.layoutDirection?t:e,height:"vertical"===this.layoutDirection?e:t}}}class XT{constructor(e,t,i){this.fontSize=i.fontSize||16,this.textBaseline=i.textBaseline||"alphabetic";const n=Dd(i.lineHeight,this.fontSize);this.lineHeight="number"==typeof n?n>this.fontSize?n:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;const{ascent:r,height:s,descent:a,width:o}=Gc(e,i);let l=0,c=0,h=0;this.height>s&&(l=(this.height-s)/2,c=Math.ceil(l),h=Math.floor(l)),"top"===this.textBaseline?(this.ascent=l,this.descent=s-l):"bottom"===this.textBaseline?(this.ascent=s-l,this.descent=l):"middle"===this.textBaseline?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=r+c,this.descent=a+h),this.length=e.length,this.width=o||0,this.text=e||"",this.newLine=t||!1,this.character=i,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,"vertical"===i.direction&&(this.direction=i.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height)}updateWidth(){const{width:e}=Gc(this.text,this.character);this.width=e,"vertical"===this.direction&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}draw(e,t,i,n,r){let s=this.text,a=this.left+i;t+=this.top;let o=this.direction;if(this.verticalEllipsis)s="...",o="vertical",t-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)s+="...","right"===r&&(a-=this.ellipsisWidth);else if("replace"===this.ellipsis){const e=Uc(s,("vertical"===o?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,s.length-1);if(s=s.slice(0,e),s+="...","right"===r){const{width:t}=Gc(this.text.slice(e),this.character);"vertical"===o||(a-=this.ellipsisWidth-t)}}}switch(this.character.script){case"super":t-=this.ascent*(1/3);break;case"sub":t+=this.descent/2}"vertical"===o&&(e.save(),e.rotateAbout(Math.PI/2,a,t),e.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),e.translate(a,t),a=0,t=0),this.character.stroke&&(function(e,t){const i=t&&t.stroke||Nc;if(!i)return void(e.globalAlpha=0);e.globalAlpha=1,e.lineWidth=t&&"number"==typeof t.lineHeight?t.lineHeight:1,e.strokeStyle=i;let n=t.fontSize||16;switch(t.script){case"super":case"sub":n*=.8}e.setTextStyle({textAlign:"left",textBaseline:t.textBaseline||"alphabetic",fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||"",fontSize:n,fontFamily:t.fontFamily||"sans-serif"})}(e,this.character),e.strokeText(s,a,t)),function(e,t){const i=t&&t.fill||Bc;if(!i)return void(e.globalAlpha=0);e.globalAlpha=1,e.fillStyle=i;let n=t.fontSize||16;switch(t.script){case"super":case"sub":n*=.8}e.setTextStyle({textAlign:"left",textBaseline:t.textBaseline||"alphabetic",fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||"",fontSize:n,fontFamily:t.fontFamily||"sans-serif"})}(e,this.character),this.character.fill&&e.fillText(s,a,t),this.character.fill&&("boolean"==typeof this.character.lineThrough||"boolean"==typeof this.character.underline?(this.character.underline&&e.fillRect(a,1+t,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1),this.character.lineThrough&&e.fillRect(a,1+t-this.ascent/2,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)):"underline"===this.character.textDecoration?e.fillRect(a,1+t,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1):"line-through"===this.character.textDecoration&&e.fillRect(a,1+t-this.ascent/2,this.widthOrigin||this.width,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)),"vertical"===o&&e.restore()}getWidthWithEllips(e){let t=this.text;const i="vertical"===e?this.height:this.width;if("hide"===this.ellipsis)return i;if("add"===this.ellipsis)return i+this.ellipsisWidth;if("replace"===this.ellipsis){const e=Uc(t,i-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,t.length-1);t=t.slice(0,e),t+="...";const{width:n}=Gc(this.text.slice(e),this.character);return i+this.ellipsisWidth-n}return i}}class qT extends nE{constructor(e){if(super(e),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],"always"===e.backgroundShowMode&&(this._hovered=!0),e.margin){const t=Cd(e.margin);this._marginArray="number"==typeof t?[t,t,t,t]:t}this.onBeforeAttributeUpdate=(e,t,i)=>{if(v(i)&&-1!==i.indexOf("margin")||"margin"===i)if(t.margin){const e=Cd(t.margin);this._marginArray="number"==typeof e?[e,e,e,e]:e}else this._marginArray=[0,0,0,0]}}get width(){var e;return(null!==(e=this.attribute.width)&&void 0!==e?e:0)+this._marginArray[1]+this._marginArray[3]}get height(){var e;return(null!==(e=this.attribute.height)&&void 0!==e?e:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();const{width:e=Lc.width,height:t=Lc.height}=this.attribute,{backgroundWidth:i=e,backgroundHeight:n=t}=this.attribute,r=(i-e)/2,s=(n-t)/2;return this._AABBBounds.expand([0,2*r,2*s,0]),this._AABBBounds}setHoverState(e){"hover"===this.attribute.backgroundShowMode&&this._hovered!==e&&(this._hovered=e)}}class ZT{constructor(e,t,i,n,r,s,a,o){this.left=e,this.width=t,this.baseline=i,this.ascent=n,this.descent=r,this.top=i-n,this.paragraphs=s.map((e=>e)),this.textAlign=(this.paragraphs[0]instanceof qT?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=a,this.directionKey=Fc[this.direction],this.actualWidth=0;let l=0;this.paragraphs.forEach(((e,t)=>{if(0===t&&e instanceof XT){const t=Vc.exec(e.text);0!==(null==t?void 0:t.index)&&(e.text=e.text.slice(null==t?void 0:t.index),e.updateWidth())}this.actualWidth+=e[this.directionKey.width],l=Math.max(e[this.directionKey.height],l)})),this.height=l,this.blankWidth=o?0:this.width-this.actualWidth,this.calcOffset(t,o)}calcOffset(e,t){const i=this.directionKey,n=this.height;let r=this.left,s=0;if(this.actualWidth<e&&!t)switch(this.textAlign){case"right":r=e-this.actualWidth;break;case"center":r=(e-this.actualWidth)/2;break;case"justify":this.paragraphs.length<2?r=(e-this.actualWidth)/2:s=(e-this.actualWidth)/(this.paragraphs.length-1)}this.paragraphs.map((function(e){e instanceof qT?(e["_"+i.x]=r,r+=e[i.width]+s,e["_"+i.y]="top"===e.attribute.textBaseline?0:"bottom"===e.attribute.textBaseline?n-e.height:(n-e.height)/2):(e[i.left]=r,r+=e[i.width]+s)}))}draw(e,t,i,n,r){if(t){let e=0;for(let t=this.paragraphs.length-1;t>=0;t--){const i=this.paragraphs[t];if(i instanceof qT)break;if("vertical"===this.direction&&"vertical"!==i.direction){i.verticalEllipsis=!0;break}const{width:n}=Gc("...",i.character),r=n||0;if(r<=this.blankWidth+e){i.ellipsis="add";break}if(r<=this.blankWidth+e+i.width){i.ellipsis="replace",i.ellipsisWidth=r,i.ellipsisOtherParagraphWidth=this.blankWidth+e;break}i.ellipsis="hide",e+=i.width}}this.paragraphs.map(((t,s)=>{if(t instanceof qT)return t.setAttributes({x:i+t._x,y:n+t._y}),void r(t,e,i+t._x,n+t._y,this.ascent);t.draw(e,n+this.ascent,i,0===s,this.textAlign)}))}getWidthWithEllips(){let e=0;for(let i=this.paragraphs.length-1;i>=0;i--){const t=this.paragraphs[i];if(t instanceof qT)break;const{width:n}=Gc("...",t.character),r=n||0;if(r<=this.blankWidth+e){t.ellipsis="add",t.ellipsisWidth=r;break}if(r<=this.blankWidth+e+t.width){t.ellipsis="replace",t.ellipsisWidth=r,t.ellipsisOtherParagraphWidth=this.blankWidth+e;break}t.ellipsis="hide",e+=t.width}let t=0;return this.paragraphs.map(((e,i)=>{t+=e instanceof qT?e.width:e.getWidthWithEllips(this.direction)})),t}}class QT{constructor(e){this.frame=e,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=e.layoutDirection,this.directionKey=Fc[this.direction]}store(e){if(e instanceof qT){this.frame.icons.set(e.richtextId,e),this.lineBuffer.push(e),this.lineWidth+=e[this.directionKey.width];let t=0,i=0;"top"===e.attribute.textBaseline?(t=0,i=e.height):"bottom"===e.attribute.textBaseline?(t=e.height,i=0):(t=e.height/2,i=e.height/2),this.maxAscent=Math.max(this.maxAscent,t),this.maxDescent=Math.max(this.maxDescent,i)}else this.lineBuffer.push(e),0!==e.text.length?(this.lineWidth+=e[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,e.ascent),this.maxDescent=Math.max(this.maxDescent,e.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,e.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,e.descent))}send(){if(0===this.lineBuffer.length)return;const e=0===this.maxAscent?this.maxAscentForBlank:this.maxAscent,t=0===this.maxDescent?this.maxDescentForBlank:this.maxDescent,i=new ZT(this.frame.left,this[this.directionKey.width],this.y+e,e,t,this.lineBuffer,this.direction,"horizontal"===this.direction?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(i),this.frame.actualHeight+=i.height,this.y+=i.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}deal(e){e instanceof qT?"horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+e[this.directionKey.width]<=this[this.directionKey.width]?this.store(e):0===this.lineBuffer.length?(this.store(e),this.send()):(this.send(),this.deal(e)):"number"!=typeof this.width||this.width<0||(e.newLine&&this.send(),0!==e.text.length&&("horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+e[this.directionKey.width]<=this[this.directionKey.width]?this.store(e):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(e)):this.cut(e)))}cut(e){const t=this[this.directionKey.width]-this.lineWidth||0,i=Math.ceil(t/e[this.directionKey.width]*e.length)||0,n=Uc(e.text,t,e.character,i,"break-word"===this.frame.wordBreak);if(0!==n){const[t,i]=function(e,t){const i=e.text.slice(0,t),n=e.text.slice(t);return[new XT(i,e.newLine,e.character),new XT(n,!0,e.character)]}(e,n);this.store(t),this.deal(i)}else 0!==this.lineBuffer.length&&(this.send(),this.deal(e))}}const $T=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection",...gd];class JT extends _d{constructor(e){super(e),this.type="richtext",this._currentHoverIcon=null,this.numberType=nu}get width(){var e;return null!==(e=this.attribute.width)&&void 0!==e?e:Dc.width}set width(e){this.attribute.width!==e&&(this.attribute.width=e,this.addUpdateShapeAndBoundsTag())}get height(){var e;return null!==(e=this.attribute.height)&&void 0!==e?e:Dc.height}set height(e){this.attribute.height!==e&&(this.attribute.height=e,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(e){this.attribute.maxWidth!==e&&(this.attribute.maxWidth=e,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(e){this.attribute.maxHeight!==e&&(this.attribute.maxHeight=e,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var e;return null!==(e=this.attribute.ellipsis)&&void 0!==e?e:Dc.ellipsis}set ellipsis(e){this.attribute.ellipsis!==e&&(this.attribute.ellipsis=e,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var e;return null!==(e=this.attribute.wordBreak)&&void 0!==e?e:Dc.wordBreak}set wordBreak(e){this.attribute.wordBreak!==e&&(this.attribute.wordBreak=e,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var e;return null!==(e=this.attribute.verticalDirection)&&void 0!==e?e:Dc.verticalDirection}set verticalDirection(e){this.attribute.verticalDirection!==e&&(this.attribute.verticalDirection=e,this.addUpdateShapeAndBoundsTag())}get textAlign(){var e;return null!==(e=this.attribute.textAlign)&&void 0!==e?e:Dc.textAlign}set textAlign(e){this.attribute.textAlign!==e&&(this.attribute.textAlign=e,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var e;return null!==(e=this.attribute.textBaseline)&&void 0!==e?e:Dc.textBaseline}set textBaseline(e){this.attribute.textBaseline!==e&&(this.attribute.textBaseline=e,this.addUpdateShapeAndBoundsTag())}get textConfig(){var e;return null!==(e=this.attribute.textConfig)&&void 0!==e?e:Dc.textConfig}set textConfig(e){this.attribute.textConfig=e,this.addUpdateShapeAndBoundsTag()}doUpdateAABBBounds(){const e=jh(this).richtext;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const t=this.attribute,i=se.graphicService.updateRichTextAABBBounds(t,jh(this).richtext,this._AABBBounds,this),{boundsPadding:n=e.boundsPadding}=t,r=Cd(n);return r&&i.expand(r),this.clearUpdateBoundTag(),i}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}getDefaultAttribute(e){return Dc[e]}needUpdateTags(e){return super.needUpdateTags(e,$T)}needUpdateTag(e){return super.needUpdateTag(e,$T)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}doUpdateFrameCache(){var e;const{textConfig:t=[],maxWidth:i,maxHeight:n,width:r,height:s,ellipsis:a,wordBreak:o,verticalDirection:l,textAlign:c,textBaseline:h,layoutDirection:d,singleLine:u}=this.attribute,p=[];for(let _=0;_<t.length;_++)if("image"in t[_]){const e=t[_],i=e.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(e.id);if(i)p.push(i);else{const t=new qT(e);t.successCallback=()=>{var e;this.addUpdateBoundTag(),null===(e=this.stage)||void 0===e||e.renderNextFrame()},t.richtextId=e.id,p.push(t)}}else if(t[_].text.includes("\n")){const e=t[_].text.split("\n");for(let i=0;i<e.length;i++)p.push(new XT(e[i],0!==i,t[_]))}else p.push(new XT(t[_].text,!1,t[_]));const g="number"==typeof i&&Number.isFinite(i)&&i>0,f="number"==typeof n&&Number.isFinite(n)&&n>0,m="number"==typeof r&&Number.isFinite(r)&&r>0&&(!g||r<=i),v="number"==typeof s&&Number.isFinite(s)&&s>0&&(!f||s<=n),y=new YT(0,0,(m?r:g?i:0)||0,(v?s:f?n:0)||0,a,o,l,c,h,d||"horizontal",!m&&g,!v&&f,u||!1,null===(e=this._frameCache)||void 0===e?void 0:e.icons),b=new QT(y);for(let _=0;_<p.length;_++)b.deal(p[_]);if(b.send(),!("horizontal"===y.layoutDirection?m:v)){const e=y.getActualSizeWidthEllipsis();let t="horizontal"===y.layoutDirection?e.width:e.height;("horizontal"===y.layoutDirection?g:f)&&(t=Math.min(t,"horizontal"===y.layoutDirection?i:n)),y.lines.forEach((function(e){e.calcOffset(t,!1)}))}this._frameCache=y}clone(){return new JT(Object.assign({},this.attribute))}setStage(e,t){super.setStage(e,t),this.getFrameCache().icons.forEach((i=>{i.setStage(e,t)}))}bindIconEvent(){this.addEventListener("pointermove",(e=>{var t,i,n,r,s;const a=this.pickIcon(e.global);a&&a===this._currentHoverIcon||(a?(null===(t=this._currentHoverIcon)||void 0===t||t.setHoverState(!1),this._currentHoverIcon=a,this._currentHoverIcon.setHoverState(!0),null===(i=this.stage)||void 0===i||i.setCursor(a.attribute.cursor),null===(n=this.stage)||void 0===n||n.renderNextFrame()):!a&&this._currentHoverIcon&&(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,null===(r=this.stage)||void 0===r||r.setCursor(),null===(s=this.stage)||void 0===s||s.renderNextFrame()))})),this.addEventListener("pointerleave",(e=>{var t,i;this._currentHoverIcon&&(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,null===(t=this.stage)||void 0===t||t.setCursor(),null===(i=this.stage)||void 0===i||i.renderNextFrame())}))}pickIcon(e){const t=this.getFrameCache(),{e:i,f:n}=this.globalTransMatrix;let r;return t.icons.forEach((t=>{var s,a;t.AABBBounds.containsPoint({x:e.x-i,y:e.y-n})&&(r=t,r.globalX=(null!==(s=r.attribute.x)&&void 0!==s?s:0)+i,r.globalY=(null!==(a=r.attribute.y)&&void 0!==a?a:0)+n)})),r}getNoWorkAnimateAttr(){return JT.NOWORK_ANIMATE_ATTR}}function eO(e){return new JT(e)}JT.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},bd);var tO=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},iO=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let nO=class extends hf{constructor(){super(),this.numberType=nu,this.builtinContributions=[TT],this.init()}drawShape(e,t,i,n,r){const s=jh(e).richtext,{strokeOpacity:a=s.strokeOpacity,opacity:o=s.opacity,fillOpacity:l=s.fillOpacity,visible:c=s.visible}=e.attribute;if(!e.valid||!c)return;const h=Rg(o,l,!0),d=Rg(o,a,!0);h&&(t.translate(i,n),this.beforeRenderStep(e,t,i,n,h,d,h,d,s,r),e.getFrameCache().draw(t,this.drawIcon),this.afterRenderStep(e,t,i,n,h,d,h,d,s,r))}drawIcon(e,t,i,n,r){var s;const a=jh(e).richtextIcon,{width:o=a.width,height:l=a.height,opacity:c=a.opacity,image:h,backgroundFill:d=a.backgroundFill,backgroundFillOpacity:u=a.backgroundFillOpacity,backgroundStroke:p=a.backgroundStroke,backgroundStrokeOpacity:g=a.backgroundStrokeOpacity,backgroundRadius:f=a.backgroundRadius,margin:m}=e.attribute,{backgroundWidth:v=o,backgroundHeight:y=l}=e.attribute;if(m&&(i+=e._marginArray[3],n+=e._marginArray[0]),e._hovered){const e=(v-o)/2,r=(y-l)/2;0===f?(t.beginPath(),t.rect(i-e,n-r,v,y)):(t.beginPath(),Pg(t,i-e,n-r,v,y,f)),d&&(t.globalAlpha=u,t.fillStyle=d,t.fill()),p&&(t.globalAlpha=g,t.strokeStyle=p,t.stroke())}const b=h&&(null===(s=null==e?void 0:e.resources)||void 0===s?void 0:s.get(h));b&&"success"===b.state&&(t.globalAlpha=c,t.drawImage(b.data,i,n,o,l))}draw(e,t,i){const n=jh(e).richtext;this._draw(e,n,!1,i)}};nO=tO([jo(),iO("design:paramtypes",[])],nO);let rO=!1;const sO=new Oo((e=>{rO||(rO=!0,e(Nu).to(nO).inSingletonScope(),e(Pu).toService(Nu))}));var aO=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},oO=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},lO=function(e,t){return function(i,n){t(i,n,e)}};let cO=class{constructor(e){this.canvasRenderer=e,this.type="richtext",this.numberType=nu}contains(e,t,i){return!!e.AABBBounds.containsPoint(t)}};cO=aO([jo(),lO(0,Ho(Nu)),oO("design:paramtypes",[Object])],cO);let hO=!1;const dO=new Oo(((e,t,i,n)=>{hO||(hO=!0,e(gS).to(cO).inSingletonScope(),e(vS).toService(gS))}));let uO=!1;const pO=new Oo(((e,t,i,n)=>{uO||(uO=!0,e(Yx).to(yE).inSingletonScope(),e(yE).toService(Yx))}));function gO(){gO.__loaded||(gO.__loaded=!0,bp.RegisterGraphicCreator("richtext",eO),ph.load(sO),ph.load(Vx?dO:pO))}gO.__loaded=!1;const fO=gO;function mO(e,t,i,n){e.moveTo(t[0].x+i,t[0].y+n);for(let r=1;r<t.length;r++)e.lineTo(t[r].x+i,t[r].y+n)}function vO(e,t){return Math.sqrt(e*e+t*t)}function yO(e,t,i,n,r){const s=t/i;return{x:e.x-n*s,y:e.y-r*s}}const bO=_f,_O=tf;var xO=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},SO=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},wO=function(e,t){return function(i,n){t(i,n,e)}};let CO=class extends hf{constructor(e){super(),this.polygonRenderContribitions=e,this.numberType=Jd,this.builtinContributions=[_O,bO],this.init(e)}drawShape(e,t,i,n,r,s,a,o){const l=jh(e,null==s?void 0:s.theme).polygon,{points:c=l.points,cornerRadius:h=l.cornerRadius,x:d=l.x,y:u=l.y,closePath:p=l.closePath}=e.attribute,g=this.valid(e,l,a,o);if(!g)return;const{fVisible:f,sVisible:m,doFill:y,doStroke:b}=g;t.beginPath(),h<=0||v(h)&&h.every((e=>0===e))?mO(t.camera?t:t.nativeContext,c,i,n):function(e,t,i,n,r){let s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];var a;if(t.length<3)return void mO(e,t,i,n);let o=0,l=t.length-1;s||(o+=1,l-=1,e.moveTo(t[0].x+i,t[0].y+n));for(let c=o;c<=l;c++){const s=t[0===c?l:(c-1)%t.length],o=t[c%t.length],h=t[(c+1)%t.length],d=o.x-s.x,u=o.y-s.y,p=o.x-h.x,g=o.y-h.y,f=(Math.atan2(u,d)-Math.atan2(g,p))/2,m=Math.abs(Math.tan(f));let v=Array.isArray(r)?null!==(a=r[c%t.length])&&void 0!==a?a:0:r,y=v/m;const b=vO(d,u),_=vO(p,g),x=Math.min(b,_);y>x&&(y=x,v=x*m);const S=yO(o,y,b,d,u),w=yO(o,y,_,p,g),C=2*o.x-S.x-w.x,k=2*o.y-S.y-w.y,A=vO(C,k),E=yO(o,vO(y,v),A,C,k);let T=Math.atan2(S.y-E.y,S.x-E.x);const O=Math.atan2(w.y-E.y,w.x-E.x);let P=O-T;P<0&&(T=O,P=-P),P>Math.PI&&(P-=Math.PI),0===c?e.moveTo(S.x+i,S.y+n):e.lineTo(S.x+i,S.y+n),P&&e.arcTo(o.x+i,o.y+n,w.x+i,w.y+n,v),e.lineTo(w.x+i,w.y+n)}s||e.lineTo(t[l+1].x+i,t[l+1].y+n)}(t.camera?t:t.nativeContext,c,i,n,h,p),p&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),this.beforeRenderStep(e,t,i,n,y,b,f,m,l,r,a,o),y&&(a?a(t,e.attribute,l):f&&(t.setCommonStyle(e,e.attribute,d-i,u-n,l),t.fill())),b&&(o?o(t,e.attribute,l):m&&(t.setStrokeStyle(e,e.attribute,d-i,u-n,l),t.stroke())),this.afterRenderStep(e,t,i,n,y,b,f,m,l,r,a,o)}draw(e,t,i,n){const r=jh(e,null==n?void 0:n.theme).polygon;this._draw(e,r,!1,i,n)}};CO=xO([jo(),wO(0,Ho(Uo)),wO(0,Vo(Kg)),SO("design:paramtypes",[Object])],CO);let kO=!1;const AO=new Oo((e=>{kO||(kO=!0,e(Du).to(CO).inSingletonScope(),e(Pu).toService(Du),e(Kg).toService(nf),Go(e,Kg))}));var EO=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},TO=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},OO=function(e,t){return function(i,n){t(i,n,e)}};let PO=class{constructor(e){this.canvasRenderer=e,this.type="polygon",this.numberType=Jd}contains(e,t,i){if(!e.AABBBounds.contains(t.x,t.y))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).polygon;let{x:s=r.x,y:a=r.y}=e.attribute;if(n.highPerformanceSave(),e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,((e,i,n)=>!!o||(o=e.isPointInPath(t.x,t.y),o)),((e,i,r)=>{if(o)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=Sg(n,s+a,n.dpr),o=e.isPointInStroke(t.x,t.y),o})),n.highPerformanceRestore(),o}};PO=EO([jo(),OO(0,Ho(Du)),TO("design:paramtypes",[Object])],PO);let MO=!1;const IO=new Oo(((e,t,i,n)=>{MO||(MO=!0,e(uS).to(PO).inSingletonScope(),e(vS).toService(uS))}));var RO=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},DO=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},LO=function(e,t){return function(i,n){t(i,n,e)}};let jO=class{constructor(e){this.canvasRenderer=e,this.type="polygon",this.numberType=Jd}contains(e,t,i){if(!e.AABBBounds.contains(t.x,t.y))return!1;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).polygon;let{x:s=r.x,y:a=r.y}=e.attribute;if(n.highPerformanceSave(),e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,((e,i,n)=>!!o||(o=e.isPointInPath(t.x,t.y),o)),((e,i,r)=>{if(o)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=s+a,o=e.isPointInStroke(t.x,t.y),o})),n.highPerformanceRestore(),o}};jO=RO([jo(),LO(0,Ho(Du)),DO("design:paramtypes",[Object])],jO);let FO=!1;const BO=new Oo(((e,t,i,n)=>{FO||(FO=!0,e(Jx).to(jO).inSingletonScope(),e(Ux).toService(Jx))}));function NO(){NO.__loaded||(NO.__loaded=!0,bp.RegisterGraphicCreator("polygon",SA),ph.load(AO),ph.load(Vx?IO:BO))}NO.__loaded=!1;const zO=NO;class HO extends _d{constructor(e){super(e),this.type="glyph",this.numberType=Xd,this.subGraphic=[],this._onInit&&this._onInit(this),this.valid=this.isValid()}setSubGraphic(e){this.detachSubGraphic(),this.subGraphic=e,e.forEach((e=>{e.glyphHost=this,Object.setPrototypeOf(e.attribute,this.attribute)})),this.valid=this.isValid(),this.addUpdateBoundTag()}detachSubGraphic(){this.subGraphic.forEach((e=>{e.glyphHost=null,Object.setPrototypeOf(e.attribute,{})}))}getSubGraphic(){return this.subGraphic}onInit(e){this._onInit=e}onUpdate(e){this._onUpdate=e}isValid(){return!0}setAttribute(e,t,i,n){super.setAttribute(e,t,i,n),this.subGraphic.forEach((e=>{e.addUpdateShapeAndBoundsTag(),e.addUpdatePositionTag()}))}setAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;super.setAttributes(e,t,i),this.subGraphic.forEach((e=>{e.addUpdateShapeAndBoundsTag(),e.addUpdatePositionTag()}))}translate(e,t){return super.translate(e,t),this.subGraphic.forEach((e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()})),this}translateTo(e,t){return super.translateTo(e,t),this.subGraphic.forEach((e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()})),this}scale(e,t,i){return super.scale(e,t,i),this.subGraphic.forEach((e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()})),this}scaleTo(e,t){return super.scaleTo(e,t),this.subGraphic.forEach((e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()})),this}rotate(e){return super.rotate(e),this.subGraphic.forEach((e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()})),this}rotateTo(e){return super.rotate(e),this.subGraphic.forEach((e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()})),this}doUpdateAABBBounds(){this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const e=se.graphicService.updateGlyphAABBBounds(this.attribute,jh(this).glyph,this._AABBBounds,this);return this.clearUpdateBoundTag(),e}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}needUpdateTags(e){return!1}needUpdateTag(e){return!1}useStates(e,t){var i;if(!e.length)return void this.clearStates(t);if((null===(i=this.currentStates)||void 0===i?void 0:i.length)===e.length&&!e.some(((e,t)=>this.currentStates[t]!==e)))return;const n={},r=this.subGraphic.map((()=>({})));e.forEach((t=>{var i;const s=this.glyphStateProxy?this.glyphStateProxy(t,e):this.glyphStates[t];s&&(Object.assign(n,s.attributes),(null===(i=s.subAttributes)||void 0===i?void 0:i.length)&&r.forEach(((e,t)=>{Object.assign(e,s.subAttributes[t])})))})),this.subGraphic.forEach(((i,n)=>{i.updateNormalAttrs(r[n]),i.applyStateAttrs(r[n],e,t)})),this.updateNormalAttrs(n),this.currentStates=e,this.applyStateAttrs(n,e,t)}clearStates(e){this.hasState()&&this.normalAttrs&&(this.subGraphic.forEach((t=>{t.applyStateAttrs(t.normalAttrs,this.currentStates,e,!0),t.normalAttrs=null})),this.applyStateAttrs(this.normalAttrs,this.currentStates,e,!0),this.normalAttrs=null,this.currentStates=[])}clone(){const e=new HO(Object.assign({},this.attribute));return e.setSubGraphic(this.subGraphic.map((e=>e.clone()))),e}getNoWorkAnimateAttr(){return HO.NOWORK_ANIMATE_ATTR}}function VO(e){return new HO(e)}HO.NOWORK_ANIMATE_ATTR=bd;var UO=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let WO=class{constructor(){this.numberType=Xd}drawShape(e,t,i,n,r,s,a,o){r.drawContribution&&e.getSubGraphic().forEach((e=>{const l=r.drawContribution.getRenderContribution(e);l&&l.drawShape&&l.drawShape(e,t,i,n,r,s,a,o)}))}draw(e,t,i,n){const{context:r}=i;if(!r)return;if(r.highPerformanceSave(),!i.drawContribution)return;const s=jh(e),a=e.getSubGraphic();a.length&&a.forEach((e=>{i.drawContribution.renderItem(e,i,{theme:s})})),r.highPerformanceRestore()}};WO=UO([jo()],WO);let GO=!1;const KO=new Oo((e=>{GO||(GO=!0,e(Hu).to(WO).inSingletonScope(),e(Pu).toService(Hu))}));var YO=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},XO=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qO=function(e,t){return function(i,n){t(i,n,e)}};let ZO=class{constructor(e){this.canvasRenderer=e,this.type="glyph",this.numberType=Xd}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=null==i?void 0:i.pickerService;if(r){let n=!1;return e.getSubGraphic().forEach((e=>{if(n)return;const s=r.pickItem(e,t,null,i);n=!(!s||!s.graphic)})),n}return!1}};ZO=YO([jo(),qO(0,Ho(Hu)),XO("design:paramtypes",[Object])],ZO);let QO=!1;const $O=new Oo(((e,t,i,n)=>{QO||(QO=!0,e(fS).to(ZO).inSingletonScope(),e(vS).toService(fS))}));var JO=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},eP=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},tP=function(e,t){return function(i,n){t(i,n,e)}};let iP=class{constructor(e){this.canvasRenderer=e,this.type="glyph",this.numberType=Xd}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=null==i?void 0:i.pickerService;if(r){let n=!1;return e.getSubGraphic().forEach((e=>{n||(n=!!r.pickItem(e,t,null,i))})),n}return!1}};iP=JO([jo(),tP(0,Ho(Hu)),eP("design:paramtypes",[Object])],iP);let nP=!1;const rP=new Oo(((e,t,i,n)=>{nP||(nP=!0,e(eS).to(iP).inSingletonScope(),e(iP).toService(eS))}));function sP(){sP.__loaded||(sP.__loaded=!0,bp.RegisterGraphicCreator("glyph",VO),ph.load(KO),ph.load(Vx?$O:rP))}sP.__loaded=!1;const aP=sP,oP=()=>{Ok(),sA(),nm.registerGraphic(Vr.arc,Ik)},lP=()=>{Ok(),uT(),nm.registerGraphic(Vr.path,WE)},cP=()=>{Ok(),hw(),nm.registerGraphic(Vr.rect,jS)},hP=()=>{Ok(),HE(),nm.registerGraphic(Vr.rule,kE)},dP=()=>{Ok(),RS(),nm.registerGraphic(Vr.symbol,Ix)},uP=()=>{Ok(),KT(),fO(),nm.registerGraphic(Vr.text,u_)},pP=()=>{Ok(),aP(),nm.registerGraphic(Vr.glyph,VO)};class gP extends kk{constructor(){super(...arguments),this.type=gP.type,this._marks=[]}getMarks(){return this._marks}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{clip:!1})}isMarkExist(e){return void 0!==this._marks.find((t=>t.id===e.id||t.name===e.name))}addMark(e){return this.isMarkExist(e)?(ge("Mark already exists, add mark failed."),!1):(this._marks.push(e),!0)}removeMark(e){const t=this._marks.findIndex((t=>t.id===e.id||t.name===e.name));return-1===t?(ge("Mark does not exists, removeMark failed."),!1):(this._marks.splice(t,1),!0)}getMarkInType(e){return this._marks.filter((t=>t.type===e))}getMarkInId(e){return this._marks.find((t=>t.id===e))}getMarkInName(e){return this._marks.find((t=>t.name===e))}_compileProduct(e){super._compileProduct(e),this._product.configure({zIndex:this.getZIndex()}),(null==e?void 0:e.ignoreChildren)||this.getMarks().forEach((e=>{e.getProduct()&&e.removeProduct(),e.compile({group:this._product})}))}}gP.type="group";const fP={type:"clipIn"},mP={type:"fadeIn"};function vP(e,t){switch(t){case"grow":return(e=>({type:"horizontal"===e.direction?"growPointsXIn":"growPointsYIn",options:{orient:"horizontal"===e.direction?"positive":"negative"}}))(e);case"fadeIn":return mP;default:return fP}}const yP=(e,t,i)=>{var n;const r=e.getGraphicAttribute("clipRangeByDimension",!1),s=null!==(n=e.getGraphicAttribute("clipRange",!1))&&void 0!==n?n:1;return t&&t.clipDimension?{from:{clipRange:0,clipRangeByDimension:t.clipDimension},to:{clipRange:s,clipRangeByDimension:r}}:{from:{clipRange:0},to:{clipRange:s}}},bP=(e,t,i)=>{var n;const r=e.getGraphicAttribute("clipRangeByDimension",!0),s=null!==(n=e.getGraphicAttribute("clipRange",!0))&&void 0!==n?n:1;return t&&t.clipDimension?{from:{clipRange:s,clipRangeByDimension:t.clipDimension},to:{clipRange:0,clipRangeByDimension:r}}:{from:{clipRange:s},to:{clipRange:0}}},_P=(e,t,i)=>{var n,r,s;return{from:{opacity:0,fillOpacity:0,strokeOpacity:0},to:{opacity:null!==(n=e.getGraphicAttribute("opacity",!1))&&void 0!==n?n:1,fillOpacity:null!==(r=e.getGraphicAttribute("fillOpacity",!1))&&void 0!==r?r:1,strokeOpacity:null!==(s=e.getGraphicAttribute("strokeOpacity",!1))&&void 0!==s?s:1}}},xP=(e,t,i)=>{var n,r,s;return{from:{opacity:null!==(n=e.getGraphicAttribute("opacity",!0))&&void 0!==n?n:1,fillOpacity:null!==(r=e.getGraphicAttribute("fillOpacity",!0))&&void 0!==r?r:1,strokeOpacity:null!==(s=e.getGraphicAttribute("strokeOpacity",!0))&&void 0!==s?s:1},to:{opacity:0,fillOpacity:0,strokeOpacity:0}}},SP=(e,t,i)=>{switch(null==t?void 0:t.direction){case"x":{const t=e.getGraphicAttribute("x",!1),i=e.getGraphicAttribute("x1",!1),n=e.getGraphicAttribute("width",!1);return{from:x(n)?{x:t+n/2,x1:void 0,width:0}:{x:(t+i)/2,x1:(t+i)/2,width:void 0},to:{x:t,x1:i,width:n}}}case"y":{const t=e.getGraphicAttribute("y",!1),i=e.getGraphicAttribute("y1",!1),n=e.getGraphicAttribute("height",!1);return{from:x(n)?{y:t+n/2,y1:void 0,height:0}:{y:(t+i)/2,y1:(t+i)/2,height:void 0},to:{y:t,y1:i,height:n}}}default:{const t=e.getGraphicAttribute("x",!1),i=e.getGraphicAttribute("x1",!1),n=e.getGraphicAttribute("width",!1),r=e.getGraphicAttribute("y",!1),s=e.getGraphicAttribute("y1",!1),a=e.getGraphicAttribute("height",!1),o={};return x(n)?(o.x=t+n/2,o.width=0,o.x1=void 0):(o.x=(t+i)/2,o.x1=(t+i)/2,o.width=void 0),x(a)?(o.y=r+a/2,o.height=0,o.y1=void 0):(o.y=(r+s)/2,o.y1=(r+s)/2,o.height=void 0),{from:o,to:{x:t,y:r,x1:i,y1:s,width:n,height:a}}}}},wP=(e,t,i)=>{switch(null==t?void 0:t.direction){case"x":{const t=e.getGraphicAttribute("x",!1),i=e.getGraphicAttribute("x1",!1),n=e.getGraphicAttribute("width",!1);return{to:x(n)?{x:t+n/2,x1:void 0,width:0}:{x:(t+i)/2,x1:(t+i)/2,width:void 0}}}case"y":{const t=e.getGraphicAttribute("y",!1),i=e.getGraphicAttribute("y1",!1),n=e.getGraphicAttribute("height",!1);return{to:x(n)?{y:t+n/2,y1:void 0,height:0}:{y:(t+i)/2,y1:(t+i)/2,height:void 0}}}default:{const t=e.getGraphicAttribute("x",!1),i=e.getGraphicAttribute("y",!1),n=e.getGraphicAttribute("x1",!1),r=e.getGraphicAttribute("y1",!1),s=e.getGraphicAttribute("width",!1),a=e.getGraphicAttribute("height",!1),o={};return x(s)?(o.x=t+s/2,o.width=0,o.x1=void 0):(o.x=(t+n)/2,o.x1=(t+n)/2,o.width=void 0),x(a)?(o.y=i+a/2,o.height=0,o.y1=void 0):(o.y=(i+r)/2,o.y1=(i+r)/2,o.height=void 0),{to:o}}}};const CP=(e,t,i)=>{var n;return!1!==(null!==(n=null==t?void 0:t.overall)&&void 0!==n&&n)?function(e,t,i){var n;const r=e.getGraphicAttribute("x",!1),s=e.getGraphicAttribute("x1",!1),a=e.getGraphicAttribute("width",!1);let o;return t&&"negative"===t.orient?l(t.overall)?o=t.overall:i.group?(o=null!==(n=i.groupWidth)&&void 0!==n?n:i.group.getBounds().width(),i.groupWidth=o):o=i.width:o=l(null==t?void 0:t.overall)?null==t?void 0:t.overall:0,{from:{x:o,x1:P(s)?void 0:o,width:P(a)?void 0:0},to:{x:r,x1:s,width:a}}}(e,t,i):function(e,t,i){const n=e.getGraphicAttribute("x",!1),r=e.getGraphicAttribute("x1",!1),s=e.getGraphicAttribute("width",!1);if(t&&"negative"===t.orient){const e=x(s)?Math.max(n,n+s):Math.max(n,r);return{from:{x:e,x1:P(r)?void 0:e,width:P(s)?void 0:0},to:{x:n,x1:r,width:s}}}const a=x(s)?Math.min(n,n+s):Math.min(n,r);return{from:{x:a,x1:P(r)?void 0:a,width:P(s)?void 0:0},to:{x:n,x1:r,width:s}}}(e,t)};const kP=(e,t,i)=>{var n;return!1!==(null!==(n=null==t?void 0:t.overall)&&void 0!==n&&n)?function(e,t,i){var n;const r=e.getGraphicAttribute("x1",!1),s=e.getGraphicAttribute("width",!1);let a;return t&&"negative"===t.orient?l(t.overall)?a=t.overall:i.group?(a=null!==(n=i.groupWidth)&&void 0!==n?n:i.group.getBounds().width(),i.groupWidth=a):a=i.width:a=l(null==t?void 0:t.overall)?t.overall:0,{to:{x:a,x1:P(r)?void 0:a,width:P(s)?void 0:0}}}(e,t,i):function(e,t,i){const n=e.getGraphicAttribute("x",!1),r=e.getGraphicAttribute("x1",!1),s=e.getGraphicAttribute("width",!1);if(t&&"negative"===t.orient){const e=x(s)?Math.max(n,n+s):Math.max(n,r);return{to:{x:e,x1:P(r)?void 0:e,width:P(s)?void 0:0}}}const a=x(s)?Math.min(n,n+s):Math.min(n,r);return{to:{x:a,x1:P(r)?void 0:a,width:P(s)?void 0:0}}}(e,t)};const AP=(e,t,i)=>{var n;return!1!==(null!==(n=null==t?void 0:t.overall)&&void 0!==n&&n)?function(e,t,i){var n;const r=e.getGraphicAttribute("y",!1),s=e.getGraphicAttribute("y1",!1),a=e.getGraphicAttribute("height",!1);let o;return t&&"negative"===t.orient?l(t.overall)?o=t.overall:i.group?(o=null!==(n=i.groupHeight)&&void 0!==n?n:i.group.getBounds().height(),i.groupHeight=o):o=i.height:o=l(null==t?void 0:t.overall)?t.overall:0,{from:{y:o,y1:P(s)?void 0:o,height:P(a)?void 0:0},to:{y:r,y1:s,height:a}}}(e,t,i):function(e,t,i){const n=e.getGraphicAttribute("y",!1),r=e.getGraphicAttribute("y1",!1),s=e.getGraphicAttribute("height",!1);if(t&&"negative"===t.orient){const e=x(s)?Math.max(n,n+s):Math.max(n,r);return{from:{y:e,y1:P(r)?void 0:e,height:P(s)?void 0:0},to:{y:n,y1:r,height:s}}}const a=x(s)?Math.min(n,n+s):Math.min(n,r);return{from:{y:a,y1:P(r)?void 0:a,height:P(s)?void 0:0},to:{y:n,y1:r,height:s}}}(e,t)};const EP=(e,t,i)=>{var n;return!1!==(null!==(n=null==t?void 0:t.overall)&&void 0!==n&&n)?function(e,t,i){var n;const r=e.getGraphicAttribute("y1",!1),s=e.getGraphicAttribute("height",!1);let a;return t&&"negative"===t.orient?l(t.overall)?a=t.overall:i.group?(a=null!==(n=i.groupHeight)&&void 0!==n?n:i.group.getBounds().height(),i.groupHeight=a):a=i.height:a=l(null==t?void 0:t.overall)?t.overall:0,{to:{y:a,y1:P(r)?void 0:a,height:P(s)?void 0:0}}}(e,t,i):function(e,t,i){const n=e.getGraphicAttribute("y",!1),r=e.getGraphicAttribute("y1",!1),s=e.getGraphicAttribute("height",!1);if(t&&"negative"===t.orient){const e=x(s)?Math.max(n,n+s):Math.max(n,r);return{to:{y:e,y1:P(r)?void 0:e,height:P(s)?void 0:0}}}const a=x(s)?Math.min(n,n+s):Math.min(n,r);return{to:{y:a,y1:P(r)?void 0:a,height:P(s)?void 0:0}}}(e,t)},TP=(e,t,i)=>{var n;return!1!==(null!==(n=null==t?void 0:t.overall)&&void 0!==n&&n)?((e,t,i)=>{if(t&&"anticlockwise"===t.orient){const i=l(t.overall)?t.overall:2*Math.PI;return{from:{startAngle:i,endAngle:i},to:{startAngle:e.getGraphicAttribute("startAngle",!1),endAngle:e.getGraphicAttribute("endAngle",!1)}}}const n=l(null==t?void 0:t.overall)?t.overall:0;return{from:{startAngle:n,endAngle:n},to:{startAngle:e.getGraphicAttribute("startAngle",!1),endAngle:e.getGraphicAttribute("endAngle",!1)}}})(e,t):((e,t,i)=>t&&"anticlockwise"===t.orient?{from:{startAngle:e.getGraphicAttribute("endAngle",!1)},to:{startAngle:e.getGraphicAttribute("startAngle",!1)}}:{from:{endAngle:e.getGraphicAttribute("startAngle",!1)},to:{endAngle:e.getGraphicAttribute("endAngle",!1)}})(e,t)},OP=(e,t,i)=>{var n;return!1!==(null!==(n=null==t?void 0:t.overall)&&void 0!==n&&n)?((e,t,i)=>{if(t&&"anticlockwise"===t.orient){const i=l(t.overall)?t.overall:2*Math.PI;return{from:{startAngle:e.getGraphicAttribute("startAngle",!0),endAngle:e.getGraphicAttribute("endAngle",!0)},to:{startAngle:i,endAngle:i}}}const n=l(null==t?void 0:t.overall)?t.overall:0;return{from:{startAngle:e.getGraphicAttribute("startAngle",!0),endAngle:e.getGraphicAttribute("endAngle",!0)},to:{startAngle:n,endAngle:n}}})(e,t):((e,t,i)=>t&&"anticlockwise"===t.orient?{from:{startAngle:e.getGraphicAttribute("startAngle",!0)},to:{startAngle:e.getGraphicAttribute("endAngle",!1)}}:{from:{endAngle:e.getGraphicAttribute("endAngle",!0)},to:{endAngle:e.getGraphicAttribute("startAngle",!1)}})(e,t)},PP=(e,t,i)=>{var n;return!1!==(null!==(n=null==t?void 0:t.overall)&&void 0!==n&&n)?((e,t,i)=>{const n=l(null==t?void 0:t.overall)?t.overall:0;return{from:{innerRadius:n,outerRadius:n},to:{innerRadius:e.getGraphicAttribute("innerRadius",!1),outerRadius:e.getGraphicAttribute("outerRadius",!1)}}})(e,t):((e,t,i)=>t&&"inside"===t.orient?{from:{innerRadius:e.getGraphicAttribute("outerRadius",!1)},to:{innerRadius:e.getGraphicAttribute("innerRadius",!1)}}:{from:{outerRadius:e.getGraphicAttribute("innerRadius",!1)},to:{outerRadius:e.getGraphicAttribute("outerRadius",!1)}})(e,t)},MP=(e,t,i)=>{var n;return!1!==(null!==(n=null==t?void 0:t.overall)&&void 0!==n&&n)?((e,t,i)=>{const n=l(null==t?void 0:t.overall)?t.overall:0;return{from:{innerRadius:e.getGraphicAttribute("innerRadius",!0),outerRadius:e.getGraphicAttribute("outerRadius",!0)},to:{innerRadius:n,outerRadius:n}}})(e,t):((e,t,i)=>t&&"inside"===t.orient?{from:{innerRadius:e.getGraphicAttribute("innerRadius",!0)},to:{innerRadius:e.getGraphicAttribute("outerRadius",!1)}}:{from:{outerRadius:e.getGraphicAttribute("outerRadius",!0)},to:{outerRadius:e.getGraphicAttribute("innerRadius",!1)}})(e,t)},IP=(e,t,i)=>{const n=e.getGraphicAttribute("points",!1),r={x:0,y:0};return n.forEach((e=>{r.x+=e.x,r.y+=e.y})),r.x/=n.length,r.y/=n.length,t&&t.center&&(L(t.center.x)&&(r.x=t.center.x),L(t.center.y)&&(r.y=t.center.y)),"area"===e.mark.markType&&(r.x1=r.x,r.y1=r.y),n.map((()=>Object.assign(r)))},RP=(e,t,i)=>({from:{points:IP(e,t)},to:{points:e.getGraphicAttribute("points",!1)}}),DP=(e,t,i)=>({from:{points:e.getGraphicAttribute("points",!0)},to:{points:IP(e,t)}}),LP=(e,t,i)=>e.getGraphicAttribute("points",!1).map((e=>{var n;if(t&&"negative"===t.orient){let t=i.width;return i.group&&(t=null!==(n=i.groupWidth)&&void 0!==n?n:i.group.getBounds().width(),i.groupWidth=t),{x:t,y:e.y,x1:t,y1:e.y1,defined:!1!==e.defined}}return{x:0,y:e.y,x1:0,y1:e.y1,defined:!1!==e.defined}})),jP=(e,t,i)=>({from:{points:LP(e,t,i)},to:{points:e.getGraphicAttribute("points",!1)}}),FP=(e,t,i)=>({from:{points:e.getGraphicAttribute("points",!0)},to:{points:LP(e,t,i)}}),BP=(e,t,i)=>e.getGraphicAttribute("points",!1).map((e=>{var n;if(t&&"negative"===t.orient){let t=i.height;return i.group&&(t=null!==(n=i.groupHeight)&&void 0!==n?n:i.group.getBounds().height(),i.groupHeight=t),{x:e.x,y:t,x1:e.x1,y1:t,defined:!1!==e.defined}}return{x:e.x,y:0,x1:e.x1,y1:0,defined:!1!==e.defined}})),NP=(e,t,i)=>({from:{points:BP(e,t,i)},to:{points:e.getGraphicAttribute("points",!1)}}),zP=(e,t,i)=>({from:{points:e.getGraphicAttribute("points",!0)},to:{points:BP(e,t,i)}}),HP=(e,t,i)=>{var n,r;const{offset:s=0,orient:a,direction:o,point:l}=null!=t?t:{};let c=0,h=0;"negative"===a&&(i.group?(c=null!==(n=i.groupWidth)&&void 0!==n?n:i.group.getBounds().width(),h=null!==(r=i.groupHeight)&&void 0!==r?r:i.group.getBounds().height(),i.groupWidth=c,i.groupHeight=h):(c=i.width,h=i.height)),c+=s,h+=s;const d=Q(l)?l.call(null,e.getDatum(),e,i):l,u=d&&L(d.x)?d.x:c,p=d&&L(d.y)?d.y:h;switch(o){case"x":return{from:{x:u},to:{x:e.getGraphicAttribute("x",!1)}};case"y":return{from:{y:p},to:{y:e.getGraphicAttribute("y",!1)}};default:return{from:{x:u,y:p},to:{x:e.getGraphicAttribute("x",!1),y:e.getGraphicAttribute("y",!1)}}}},VP=(e,t,i)=>{var n,r;const{offset:s=0,orient:a,direction:o,point:l}=null!=t?t:{},c=i.group?i.group.getBounds():null,h=null!==(n=null==c?void 0:c.width())&&void 0!==n?n:i.width,d=null!==(r=null==c?void 0:c.height())&&void 0!==r?r:i.height,u=("negative"===a?h:0)+s,p=("negative"===a?d:0)+s,g=Q(l)?l.call(null,e.getDatum(),e,i):l,f=g&&L(g.x)?g.x:u,m=g&&L(g.y)?g.y:p;switch(o){case"x":return{from:{x:e.getGraphicAttribute("x",!0)},to:{x:f}};case"y":return{from:{y:e.getGraphicAttribute("y",!0)},to:{y:m}};default:return{from:{x:e.getGraphicAttribute("x",!0),y:e.getGraphicAttribute("y",!0)},to:{x:f,y:m}}}},UP=(e,t,i)=>{var n,r,s,a;switch(null==t?void 0:t.direction){case"x":return{from:{scaleX:0},to:{scaleX:null!==(n=e.getGraphicAttribute("scaleX",!1))&&void 0!==n?n:1}};case"y":return{from:{scaleY:0},to:{scaleY:null!==(r=e.getGraphicAttribute("scaleY",!1))&&void 0!==r?r:1}};default:return{from:{scaleX:0,scaleY:0},to:{scaleX:null!==(s=e.getGraphicAttribute("scaleX",!1))&&void 0!==s?s:1,scaleY:null!==(a=e.getGraphicAttribute("scaleY",!1))&&void 0!==a?a:1}}}},WP=(e,t,i)=>{var n,r,s,a;switch(null==t?void 0:t.direction){case"x":return{from:{scaleX:null!==(n=e.getGraphicAttribute("scaleX",!0))&&void 0!==n?n:1},to:{scaleX:0}};case"y":return{from:{scaleY:null!==(r=e.getGraphicAttribute("scaleY",!0))&&void 0!==r?r:1},to:{scaleY:0}};default:return{from:{scaleX:null!==(s=e.getGraphicAttribute("scaleX",!0))&&void 0!==s?s:1,scaleY:null!==(a=e.getGraphicAttribute("scaleY",!0))&&void 0!==a?a:1},to:{scaleX:0,scaleY:0}}}},GP=(e,t,i)=>{const n=Object.assign({},e.getPrevGraphicAttributes()),r=Object.assign({},e.getNextGraphicAttributes());return t&&z(t.excludeChannels).forEach((e=>{delete n[e],delete r[e]})),Object.keys(r).forEach((e=>{oy(e,n,r)&&(delete n[e],delete r[e])})),{from:n,to:r}},KP=(e,t,i)=>{var n;const r=null!==(n=e.getGraphicAttribute("angle",!1))&&void 0!==n?n:0;let s=0;return s=rb(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:L(null==t?void 0:t.angle)?t.angle:"anticlockwise"===(null==t?void 0:t.orient)?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2,{from:{angle:s},to:{angle:r}}},YP=(e,t,i)=>{var n;const r=null!==(n=e.getGraphicAttribute("angle",!0))&&void 0!==n?n:0;let s=0;return s=rb(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:L(null==t?void 0:t.angle)?t.angle:"anticlockwise"===(null==t?void 0:t.orient)?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2,{from:{angle:r},to:{angle:s}}},XP=()=>{nm.registerAnimationType("clipIn",yP)},qP=()=>{nm.registerAnimationType("clipOut",bP)},ZP=()=>{nm.registerAnimationType("fadeIn",_P)},QP=()=>{nm.registerAnimationType("fadeOut",xP)},$P=()=>{nm.registerAnimationType("growCenterIn",SP)},JP=()=>{nm.registerAnimationType("growCenterOut",wP)},eM=()=>{nm.registerAnimationType("growHeightIn",AP)},tM=()=>{nm.registerAnimationType("growHeightOut",EP)},iM=()=>{nm.registerAnimationType("growWidthIn",CP)},nM=()=>{nm.registerAnimationType("growWidthOut",kP)},rM=()=>{nm.registerAnimationType("growPointsIn",RP)},sM=()=>{nm.registerAnimationType("growPointsOut",DP)},aM=()=>{nm.registerAnimationType("growPointsXIn",jP)},oM=()=>{nm.registerAnimationType("growPointsXOut",FP)},lM=()=>{nm.registerAnimationType("growPointsYIn",NP)},cM=()=>{nm.registerAnimationType("growPointsYOut",zP)},hM=()=>{nm.registerAnimationType("growAngleIn",TP)},dM=()=>{nm.registerAnimationType("growAngleOut",OP)},uM=()=>{nm.registerAnimationType("growRadiusIn",PP)},pM=()=>{nm.registerAnimationType("growRadiusOut",MP)},gM=()=>{nm.registerAnimationType("moveIn",HP)},fM=()=>{nm.registerAnimationType("moveOut",VP)},mM=()=>{nm.registerAnimationType("scaleIn",UP)},vM=()=>{nm.registerAnimationType("scaleOut",WP)},yM=()=>{nm.registerAnimationType("rotateIn",KP)},bM=()=>{nm.registerAnimationType("rotateOut",YP)},_M=()=>{nm.registerAnimationType("update",GP)},xM={appear:{duration:1e3,easing:"cubicOut"},update:{type:"update",duration:300,easing:"linear"},enter:{duration:300,easing:"linear"},exit:{duration:300,easing:"linear"},disappear:{duration:500,easing:"cubicIn"}},SM={appear:{type:"scaleIn"},enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:{type:"scaleOut"}},wM={appear:{type:"fadeIn"},enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}},CM=()=>{_n.registerAnimation("scaleInOut",(()=>SM))},kM=()=>{_n.registerAnimation("fadeInOut",(()=>wM))},AM=()=>{_n.registerAnimation("line",((e,t)=>({appear:vP(e,t),enter:{type:"fadeIn"},exit:{type:"fadeOut"},update:[{type:"update",options:{excludeChannels:["points","defined"]}},{channel:["points"],custom:Cy,duration:xM.update.duration,easing:xM.update.easing}],disappear:{type:"clipOut"}})))},EM=()=>{Zb.useRegisters([eM,tM,iM,nM,$P,JP])},TM=()=>{Zb.useRegisters([uM,pM,hM,dM])},OM=()=>{Zb.useRegisters([rM,sM,aM,oM,lM,cM,XP,qP])},PM=()=>{Zb.useRegisters([rM,sM])},MM=(e,t,i)=>t.filter((t=>e.callback(t,i))),IM=(e,t,i)=>{const n=e.callback,r=e.as;if(!e.all)return t.forEach((e=>{const t=n(e,i);if(!P(r)){if(P(e))return;e[r]=t}return t})),t;const s=n(t,i);return P(r)||P(t)?s:(t[r]=s,t)};function RM(e){return e.reduce(((e,t)=>e+t),0)}const DM={min:U,max:V,average:function(e){return 0===e.length?0:RM(e)/e.length},sum:RM};function LM(e,t,i,n){const r=Math.floor(t.length/e),s=[],a=t.length;let o,l,c,h=0,d=0;s[d++]=h;for(let u=1;u<a-1;u+=r){const e=Math.min(u+r,a-1),i=Math.min(u+2*r,a),p=(i+e)/2;let g=0;for(let r=e;r<i;r++){const e=t[r][n];Number.isNaN(e)||(g+=e)}g/=i-e;const f=u,m=Math.min(u+r,a),v=u-1,y=t[h][n];o=-1,c=f;for(let r=f;r<m;r++){const e=t[r][n];Number.isNaN(n)||(l=Math.abs((v-p)*(e-y)-(v-r)*(g-y)),l>o&&(o=l,c=r))}s[d++]=c,h=c}return s[d-1]!==a-1&&(s[d++]=a-1),s.map((e=>i?t[e].i:e))}function jM(e,t,i,n,r){let s=Math.floor(t.length/e);const a=[],o=t.length;let l=0,c=[];a.push(l),t[l][r]=t[l][r];for(let h=1;h<o-1;h+=s){s>o-h&&(s=o-h,c.length=s),c=[];for(let i=0;i<s;i++)c.push(t[h+i][r]);const e=DM[n](c);l=Math.min(Math.round(h+c.length/2)||0,o-1),t[l][r]=e,a.push(l)}return a.map((e=>i?t[e].i:e))}function FM(e,t,i,n){return jM(e,t,i,"min",n)}function BM(e,t,i,n){return jM(e,t,i,"max",n)}function NM(e,t,i,n){return jM(e,t,i,"average",n)}function zM(e,t,i,n){return jM(e,t,i,"sum",n)}const HM=(e,t)=>{let i=e.size;const n=e.factor||1;if(Array.isArray(i)&&(i=Math.floor(i[1]-i[0])),i*=n,i<=0)return[];if(t.length<=i)return t;if(e.skipfirst)return t.slice(0,1);const{mode:r,yfield:s,groupBy:a}=e,o=null!=s?s:"y";let l=LM;if("min"===r?l=FM:"max"===r?l=BM:"average"===r?l=NM:"sum"===r&&(l=zM),t.length){const e={};if(a){for(let i=0,r=t.length;i<r;i++){const n=t[i],r=n[a];e[r]?e[r].push({[o]:n[o],i:i}):(e[r]=[],e[r].push({[o]:n[o],i:i}))}let n=[];return Object.keys(e).forEach((r=>{const s=e[r];if(s.length<=i){const e=s.map((e=>e.i));n=n.concat(e)}else{const e=l(i,s,!0,o);n=n.concat(e),s.forEach((e=>t[e.i][o]=e[o]))}})),n.sort(((e,t)=>e-t)),n.map((e=>t[e]))}return l(i,t,!1,o).map((e=>t[e]))}return[]},VM="_mo_hide_";const UM=(e,t)=>{if(!t||0===t.length)return;let{radius:i}=e;P(i)&&"symbol"===t[0].mark.markType&&(i=!0);const{direction:n,delta:r,deltaMul:s=1,groupBy:a}=e,o=e=>{!function(e){e.forEach((e=>{e.getGraphicAttribute("HIDE_KEY")&&(e.setGraphicAttribute("visible",!0),e.setGraphicAttribute(VM,!1))}))}(e);const t=e.slice().sort(((e,t)=>e.getGraphicAttribute("x")-t.getGraphicAttribute("x")));0===n?function(e,t,i,n){if(n){const n=-1/0;let r=-1/0,s=0,a=0;const o=P(t);let l=t;e.forEach((e=>{if(!1===e.getGraphicAttribute("visible"))return;const t=e.getGraphicAttribute("size")/2,c=e.getGraphicAttribute("x"),h=e.getGraphicAttribute("y");o&&(l=(t+s)*i),a=(n-c)**2+(r-h)**2,a<(l+s+t)**2?e.getGraphicAttribute("forceShow")||(e.setGraphicAttribute(VM,!0),e.setGraphicAttribute("visible",!1)):r=h,s=t}))}}(t,r,s,i):1===n?function(e,t,i,n){if(n){let n=-1/0,r=0;const s=P(t);let a=t;e.forEach((e=>{if(!1===e.getGraphicAttribute("visible"))return;const t=e.getGraphicAttribute("size")/2,o=e.getGraphicAttribute("x");s&&(a=(t+r)*i),Math.abs(o-n)<a+r+t?e.getGraphicAttribute("forceShow")||(e.setGraphicAttribute(VM,!0),e.setGraphicAttribute("visible",!1)):n=o,r=t}))}}(t,r,s,i):function(e,t,i,n){if(n){let n=-1/0,r=0;const s=P(t);let a=t;e.forEach((e=>{if(!1===e.getGraphicAttribute("visible"))return;const t=e.getGraphicAttribute("size")/2,o=e.getGraphicAttribute("y");s&&(a=(t+r)*i),Math.abs(o-n)<a+r+t?e.getGraphicAttribute("forceShow")||(e.setGraphicAttribute(VM,!0),e.setGraphicAttribute("visible",!1)):n=o,r=t}))}}(t,r,s,i)};if(a){const e=t.reduce(((e,t)=>{const i=t.getDatum()[a];return e[i]?e[i].push(t):e[i]=[t],e}),{});Object.keys(e).forEach((t=>{o(e[t])}))}else o(t);return t},WM=()=>{nm.registerTransform("sampling",{transform:HM,markPhase:"afterEncode"},!0)},GM=()=>{nm.registerTransform("markoverlap",{transform:UM,markPhase:"afterEncode"},!0)};let KM,YM;function XM(e){return KM||(KM=bp.CreateGraphic("text",{})),KM.initAttributes(e),KM.AABBBounds}const qM=(e,t,i,n)=>new $c(Object.assign({defaultFontParams:Object.assign({fontFamily:"PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",fontSize:14},n),getTextBounds:i?void 0:XM,specialCharSet:"-/: .,@%'\"~"+$c.ALPHABET_CHAR_SET+$c.ALPHABET_CHAR_SET.toUpperCase()},null!=t?t:{}),e),ZM={measureText:(e,t,i,n)=>((e,t,i)=>qM(e,t,i,{fontFamily:Ce,fontSize:ke}))(t,i,n).measure(e)};class QM{static instance(){return QM.instance_||(QM.instance_=new QM),QM.instance_}constructor(){this.functions={}}registerFunction(e,t){e&&t&&(this.functions[e]=t)}unregisterFunction(e){e&&delete this.functions[e]}getFunction(e){return this.functions[e]||null}getFunctionNameList(){return Object.keys(this.functions)}}var $M=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},JM=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const eI={WIDTH:500,HEIGHT:500,DPR:1};let tI=class{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}get nativeCanvas(){return this._nativeCanvas}get width(){return this._pixelWidth}set width(e){this._pixelWidth=e,this._displayWidth=e/(this._dpr||1)}get height(){return this._pixelHeight}set height(e){this._pixelHeight=e,this._displayHeight=e/(this._dpr||1)}getContext(e){return this._context}get visiable(){return this._visiable}set visiable(e){this._visiable=e,e?this.show():this.hide()}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this.resize(this._displayWidth,this._displayHeight)}constructor(e){var t;const{nativeCanvas:i,width:n=eI.WIDTH,height:r=eI.HEIGHT,dpr:s=eI.DPR,x:a,y:o,id:l,canvasControled:c=!0}=e;this._x=null!=a?a:0,this._y=null!=o?o:0,this._pixelWidth=n*s,this._pixelHeight=r*s,this._visiable=!1!==e.visiable,this.controled=c,this._displayWidth=n,this._displayHeight=r,this._dpr=s,this._nativeCanvas=i,this._id=null!==(t=i.id)&&void 0!==t?t:l,l&&(i.id=l),this.init(e)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(e){}resize(e,t){}toDataURL(e,t){return""}readPixels(e,t,i,n){return this._context.getImageData(e,t,i,n)}convertToBlob(e){throw new Error("\u6682\u672a\u5b9e\u73b0")}transferToImageBitmap(){throw new Error("\u6682\u672a\u5b9e\u73b0")}release(){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}};tI.env="browser",tI=$M([jo(),JM("design:paramtypes",[Object])],tI);var iI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},nI=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const rI=[0,0,0],sI=new sl(1,0,0,1,0,0);let aI=class{set fillStyle(e){this.nativeContext.fillStyle=e}get fillStyle(){return this.nativeContext.fillStyle}set font(e){this.nativeContext.font=e}get font(){return this.nativeContext.font}set globalAlpha(e){this.nativeContext.globalAlpha=e}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(e){this.nativeContext.lineCap=e}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(e){this.nativeContext.lineDashOffset=e}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(e){this.nativeContext.lineJoin=e}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(e){this.nativeContext.lineWidth=e}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(e){this.nativeContext.miterLimit=e}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(e){this.nativeContext.shadowBlur=e}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(e){this.nativeContext.shadowColor=e}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(e){this.nativeContext.shadowOffsetX=e}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(e){this.nativeContext.shadowOffsetY=e}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(e){this.nativeContext.strokeStyle=e}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(e){this.nativeContext.textAlign=e}get textAlign(){return this.nativeContext.textAlign}set textBaseline(e){this.nativeContext.textBaseline=e}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(e){e!==!!this._inuse&&(this._inuse=e,e?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(e,t){this.fillAttributes=Object.assign(Object.assign({},fc),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},vc),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},yc),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;const i=e.nativeCanvas.getContext("2d");if(!i)throw new Error("\u53d1\u751f\u9519\u8bef\uff0c\u83b7\u53d62d\u4e0a\u4e0b\u6587\u5931\u8d25");this.nativeContext=i,this.canvas=e,this.matrix=new sl(1,0,0,1,0,0),this.stack=[],this.dpr=t,this.applyedMatrix=new sl(1,0,0,1,0,0)}reset(){this.stack.length&&u.getInstance().warn("\u53ef\u80fd\u5b58\u5728bug\uff0cmatrix\u6ca1\u6709\u6e05\u7a7a"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new sl(1,0,0,1,0,0),this.stack.length=0,this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(e){return Ju.allocateByObj(e)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(Ju.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0))}highPerformanceRestore(){this.stack.length>0&&(Ju.free(this.matrix),this.matrix=this.stack.pop())}rotate(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.matrix.rotate(e),t&&this.setTransformForCurrent()}save(){const e=this.cloneMatrix(this.matrix);this.stack.push(e),this.nativeContext.save()}highPerformanceSave(){const e=this.cloneMatrix(this.matrix);this.stack.push(e)}scale(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.matrix.scale(e,t),i&&this.setTransformForCurrent()}setScale(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.matrix.setScale(e,t),i&&this.setTransformForCurrent()}scalePoint(e,t,i,n){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.translate(i,n,!1),this.scale(e,t,!1),this.translate(-i,-n,!1),r&&this.setTransformForCurrent()}setTransform(e,t,i,n,r,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:this.dpr;this.matrix.setValue(o*e,o*t,o*i,o*n,o*r,o*s),a&&this.setTransformForCurrent()}setTransformFromMatrix(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dpr;this.matrix.setValue(e.a*i,e.b*i,e.c*i,e.d*i,e.e*i,e.f*i),t&&this.setTransformForCurrent()}resetTransform(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.dpr;this.setTransform(t,0,0,t,0,0),e&&this.setTransformForCurrent()}transform(e,t,i,n,r,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];this.matrix.multiply(e,t,i,n,r,s),a&&this.setTransformForCurrent()}transformFromMatrix(e,t){this.matrix.multiply(e.a,e.b,e.c,e.d,e.e,e.f),t&&this.setTransformForCurrent()}translate(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.matrix.translate(e,t),i&&this.setTransformForCurrent()}rotateDegrees(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e*Math.PI/180;this.rotate(i,t)}rotateAbout(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.translate(t,i,!1),this.rotate(e,!1),this.translate(-t,-i,!1),n&&this.setTransformForCurrent()}rotateDegreesAbout(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.translate(t,i,!1),this.rotateDegrees(e,!1),this.translate(-t,-i,!1),n&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(e,t){e?"string"==typeof e?this.nativeContext.clip(e):this.nativeContext.clip(e,t):this.nativeContext.clip()}arc(e,t,i,n,r,s,a){if(a=a||0,this.camera){const o=[];((e,t,i,n,r,s,a,o)=>{if(o)for(;i>t;)i-=zn;else for(;i<t;)i+=zn;const l=Fn/3*(i>t?1:-1);let c=t,h=c;for(;h!==i;){h=l>0?Math.min(h+l,i):Math.max(h+l,i);const t=Math.abs(h-c),o=4*Math.tan(t/4)/3,d=h<c?-1:1,u=Math.cos(c),p=Math.sin(c),g=Math.cos(h),f=Math.sin(h),m=u*s+n,v=p*a+r,y=g*s+n,b=f*a+r,_=s*o*d,x=a*o*d;e.push([m-_*p,v+x*u,y+_*f,b-x*g,y,b]),c=h}})(o,n,r,e,t,i,i,s);for(let e=0;e<o.length;++e){const t=o[e];this.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5],a)}}else this.nativeContext.arc(e,t,i,n,r,s)}arcTo(e,t,i,n,r){this.nativeContext.arcTo(e,t,i,n,r)}bezierCurveTo(e,t,i,n,r,s,a){if(a=a||0,this.camera){let o=a,l=a;this.modelMatrix&&(Ev(rI,[e,t,a],this.modelMatrix),e=rI[0],t=rI[1],o=rI[2],Ev(rI,[i,n,a],this.modelMatrix),i=rI[0],n=rI[1],l=rI[2],Ev(rI,[r,s,a],this.modelMatrix),r=rI[0],s=rI[1],a=rI[2]);let c=this.camera.vp(r,s,a);r=c.x,s=c.y,c=this.camera.vp(e,t,o),e=c.x,t=c.y,c=this.camera.vp(i,n,l),i=c.x,n=c.y}this.nativeContext.bezierCurveTo(e,t,i,n,r,s)}closePath(){this.nativeContext.closePath()}ellipse(e,t,i,n,r,s,a,o){null==o?this.nativeContext.ellipse(e,t,i,n,r,s,a):this.nativeContext.ellipse(e,t,i,n,r,s,a,o)}lineTo(e,t,i){if(i=i||0,this.camera){this.modelMatrix&&(Ev(rI,[e,t,i],this.modelMatrix),e=rI[0],t=rI[1],i=rI[2]);const n=this.camera.vp(e,t,i);e=n.x,t=n.y}this.nativeContext.lineTo(e,t)}moveTo(e,t,i){if(i=i||0,this.camera){this.modelMatrix&&(Ev(rI,[e,t,i],this.modelMatrix),e=rI[0],t=rI[1],i=rI[2]);const n=this.camera.vp(e,t,i);e=n.x,t=n.y}this.nativeContext.moveTo(e,t)}quadraticCurveTo(e,t,i,n,r){if(r=r||0,this.camera){let s=r;this.modelMatrix&&(Ev(rI,[e,t,r],this.modelMatrix),e=rI[0],t=rI[1],s=rI[2],Ev(rI,[i,n,r],this.modelMatrix),i=rI[0],n=rI[1],r=rI[2]);let a=this.camera.vp(i,n,r);i=a.x,n=a.y,a=this.camera.vp(e,t,s),e=a.x,t=a.y}this.nativeContext.quadraticCurveTo(e,t,i,n)}rect(e,t,i,n,r){r=r||0,this.camera?(this.moveTo(e,t,r),this.lineTo(e+i,t,r),this.lineTo(e+i,t+n,r),this.lineTo(e,t+n,r),this.closePath()):this.nativeContext.rect(e,t,i,n)}createImageData(){const e=arguments;return 2===e.length?this.nativeContext.createImageData(e[0],e[1]):1===e.length?this.nativeContext.createImageData(e[0]):null}createLinearGradient(e,t,i,n){return this.nativeContext.createLinearGradient(e,t,i,n)}createPattern(e,t){return 0===e.width||0===e.height?null:this.nativeContext.createPattern(e,t)}createRadialGradient(e,t,i,n,r,s){return this.nativeContext.createRadialGradient(e,t,i,n,r,s)}createConicGradient(e,t,i,n){let r,s=!1;const a=this;return{stops:[],addColorStop(e,t){this.stops.push([e,t]),s=!0},GetPattern(o,l,c){return s&&(c||(c=n-i),r=function(e,t,i,n,r,s,a,o,l){const c=Math.floor(180*r/Math.PI),h=Dk.GetCanvas(),d=Dk.GetCtx();if(!d)return null;const u=jk.GetSize(o),p=jk.GetSize(l);let g=jk.Get(t,i,n,s,a,u,p);if(g)return g;const f=Math.sqrt(Math.max(Math.max(Math.pow(i,2)+Math.pow(n,2),Math.pow(u-i,2)+Math.pow(n,2)),Math.max(Math.pow(u-i,2)+Math.pow(p-n,2),Math.pow(i,2)+Math.pow(p-n,2)))),m=c+1,v=r/Math.max(1,m-1),y=Lk.getInstance().GetOrCreate(i,n,u,p,t,m),b=2*Math.PI*f/360;h.width=u,h.height=p,d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,u,p),d.translate(i,n),d.rotate(s);for(let x=0,S=m-1;x<S&&!(s+x*v>a);x++){const e=y.getColor(x);d.beginPath(),d.rotate(v),d.moveTo(0,0),d.lineTo(f,-2*b),d.lineTo(f,0),d.fillStyle=e,d.closePath(),d.fill()}const _=d.getImageData(0,0,u,p);return h.width=_.width,h.height=_.height,d.putImageData(_,0,0),g=e.createPattern(h,"no-repeat"),g&&jk.Set(t,i,n,s,a,g,u,p),g}(a,this.stops,e,t,c,i,n,o,l),s=!1),r}}}fill(e,t){this.disableFill||(e?this.nativeContext.fill(e):this.nativeContext.fill())}fillRect(e,t,i,n){this.nativeContext.fillRect(e,t,i,n)}clearRect(e,t,i,n){this.nativeContext.clearRect(e,t,i,n)}project(e,t,i){if(i=i||0,this.camera){this.modelMatrix&&(Ev(rI,[e,t,i],this.modelMatrix),e=rI[0],t=rI[1],i=rI[2]);const n=this.camera.vp(e,t,i);e=n.x,t=n.y}return{x:e,y:t}}view(e,t,i){return i=i||0,this.camera?(this.modelMatrix&&(Ev(rI,[e,t,i],this.modelMatrix),e=rI[0],t=rI[1],i=rI[2]),this.camera.view(e,t,i)):[e,t,i]}fillText(e,t,i,n){if(n=n||0,this.camera){this.modelMatrix&&(Ev(rI,[t,i,n],this.modelMatrix),t=rI[0],i=rI[1],n=rI[2]);const e=this.camera.vp(t,i,n);t=e.x,i=e.y}this.nativeContext.fillText(e,t,i)}getImageData(e,t,i,n){return this.nativeContext.getImageData(e,t,i,n)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(e,t){return this.nativeContext.isPointInPath(e,t)}isPointInStroke(e,t){return this.nativeContext.isPointInStroke(e,t)}measureText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:se.global.measureTextMethod;var i,n;if(!t||"native"===t)return this.nativeContext.measureText(e);this.mathTextMeasure||(this.mathTextMeasure=se.graphicUtil.createTextMeasureInstance({},{},(()=>this.canvas.nativeCanvas)));const r=null!==(i=this.fontFamily)&&void 0!==i?i:yc.fontFamily,s=null!==(n=this.fontSize)&&void 0!==n?n:yc.fontSize;return this.mathTextMeasure.textSpec.fontFamily===r&&this.mathTextMeasure.textSpec.fontSize===s||(this.mathTextMeasure.textSpec.fontFamily=r,this.mathTextMeasure.textSpec.fontSize=s,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(e,t)}putImageData(e,t,i){this.nativeContext.putImageData(e,t,i)}setLineDash(e){const t=arguments,i=this.nativeContext;this.nativeContext.setLineDash?i.setLineDash(t[0]):"mozDash"in i?i.mozDash=t[0]:"webkitLineDash"in i&&(i.webkitLineDash=t[0])}stroke(e){this.disableStroke||(e?this.nativeContext.stroke(e):this.nativeContext.stroke())}strokeRect(e,t,i,n){this.nativeContext.strokeRect(e,t,i,n)}strokeText(e,t,i,n){if(n=n||0,this.camera){this.modelMatrix&&(Ev(rI,[t,i,n],this.modelMatrix),t=rI[0],i=rI[1],n=rI[2]);const e=this.camera.vp(t,i,n);t=e.x,i=e.y}this.nativeContext.strokeText(e,t,i)}drawImage(){const e=this.nativeContext,t=arguments;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}setCommonStyle(e,t,i,n,r){if(Array.isArray(r)){if(r.length<=1)return this._setCommonStyle(e,t,i,n,r[0]);const s=Object.create(r[0]);return r.forEach(((e,t)=>{0!==t&&Object.assign(s,e)})),this._setCommonStyle(e,t,i,n,s)}return this._setCommonStyle(e,t,i,n,r)}_setCommonStyle(e,t,i,n,r){const s=this.nativeContext;r||(r=this.fillAttributes);const{fillOpacity:a=r.fillOpacity,opacity:o=r.opacity,fill:l=r.fill}=t;a>1e-12&&o>1e-12?(s.globalAlpha=a*o,s.fillStyle=wg(this,l,e,i,n)):s.globalAlpha=a*o}setShadowBlendStyle(e,t,i){if(Array.isArray(i)){if(i.length<=1)return this._setShadowBlendStyle(e,i[0]);const n=Object.create(i[0]);return i.forEach(((e,t)=>{0!==t&&Object.assign(n,e)})),this._setShadowBlendStyle(e,t,n)}return this._setShadowBlendStyle(e,t,i)}_setShadowBlendStyle(e,t,i){const n=this.nativeContext;i||(i=this.fillAttributes);const{opacity:r=i.opacity,shadowBlur:s=i.shadowBlur,shadowColor:a=i.shadowColor,shadowOffsetX:o=i.shadowOffsetX,shadowOffsetY:l=i.shadowOffsetY,blur:c=i.blur,globalCompositeOperation:h=i.globalCompositeOperation}=t;r<=1e-12||(s||o||l?(n.shadowBlur=s*this.dpr,n.shadowColor=a,n.shadowOffsetX=o*this.dpr,n.shadowOffsetY=l*this.dpr,this._clearShadowStyle=!0):this._clearShadowStyle&&(n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0),c?(n.filter="blur(".concat(c,"px)"),this._clearFilterStyle=!0):this._clearFilterStyle&&(n.filter="blur(0px)",this._clearFilterStyle=!1),h?(n.globalCompositeOperation=h,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(n.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1))}setStrokeStyle(e,t,i,n,r){if(Array.isArray(r)){if(r.length<=1)return this._setStrokeStyle(e,t,i,n,r[0]);const s=Object.create(r[0]);return r.forEach(((e,t)=>{0!==t&&Object.assign(s,e)})),this._setStrokeStyle(e,t,i,n,s)}return this._setStrokeStyle(e,t,i,n,r)}_setStrokeStyle(e,t,i,n,r){const s=this.nativeContext;r||(r=this.strokeAttributes);const{strokeOpacity:a=r.strokeOpacity,opacity:o=r.opacity}=t;if(a>1e-12&&o>1e-12){const{lineWidth:l=r.lineWidth,stroke:c=r.stroke,lineJoin:h=r.lineJoin,lineDash:d=r.lineDash,lineCap:u=r.lineCap,miterLimit:p=r.miterLimit}=t;s.globalAlpha=a*o,s.lineWidth=Sg(this,l,this.dpr),s.strokeStyle=wg(this,c,e,i,n),s.lineJoin=h,s.setLineDash(d),s.lineCap=u,s.miterLimit=p}}setTextStyleWithoutAlignBaseline(e,t,i){const n=this.nativeContext;t||(t=this.textAttributes);const{scaleIn3d:r=t.scaleIn3d}=e;e.font?n.font=e.font:n.font=o_(e,t,r&&this.camera&&this.camera.getProjectionScale(i));const{fontFamily:s=t.fontFamily,fontSize:a=t.fontSize}=e;this.fontFamily=s,this.fontSize=a,n.textAlign="left",n.textBaseline="alphabetic"}setTextStyle(e,t,i){var n,r;const s=this.nativeContext;t||(t=this.textAttributes),e.font?s.font=e.font:s.font=o_(e,t,this.camera&&this.camera.getProjectionScale(i));const{fontFamily:a=t.fontFamily,fontSize:o=t.fontSize}=e;this.fontFamily=a,this.fontSize=o,s.textAlign=null!==(n=e.textAlign)&&void 0!==n?n:t.textAlign,s.textBaseline=null!==(r=e.textBaseline)&&void 0!==r?r:t.textBaseline}draw(){}clearMatrix(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.dpr;this.setTransformFromMatrix(sI,e,t)}onlyTranslate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dpr;return this.matrix.a===e&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===e}release(){this.stack.forEach((e=>Ju.free(e))),this.stack.length=0}};aI.env="browser",aI=iI([jo(),nI("design:paramtypes",[Object,Number])],aI);var oI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},lI=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let cI=class extends tI{constructor(e){super(e)}init(e){const{container:t}=e;if("string"==typeof t){const e=se.global.getElementById(t);e&&(this._container=e)}else this._container=t;this._context=new aI(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;const{nativeCanvas:e}=this;e.width=this._pixelWidth,e.height=this._pixelHeight,!e.style||this.setCanvasStyle(e,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(e),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){const e=this._nativeCanvas;e.style.position="absolute",e.style.top="".concat(this._y,"px"),e.style.left="".concat(this._x,"px")}resetStyle(e){if(!this.controled)return;const{width:t=this._displayWidth,height:i=this._displayHeight,dpr:n=this._dpr,x:r=this._x,y:s=this._y}=e,{nativeCanvas:a}=this;a.width=t*n,a.height=i*n,!a.style||this.setCanvasStyle(a,r,s,t,i),e.id&&(a.id=e.id),this.visiable||this.hide()}setCanvasStyle(e,t,i,n,r){this.controled&&(e.style.width="".concat(n,"px"),e.style.height="".concat(r,"px"))}toDataURL(e,t){return"image/jpeg"===e?this._nativeCanvas.toDataURL(e,t):"image/png"===e?this._nativeCanvas.toDataURL(e):this._nativeCanvas.toDataURL(e,t)}resize(e,t){this.controled&&(this._pixelWidth=e*this._dpr,this._pixelHeight=t*this._dpr,this._displayWidth=e,this._displayHeight=t,this._nativeCanvas.style&&(this._nativeCanvas.style.width="".concat(e,"px"),this._nativeCanvas.style.height="".concat(t,"px")),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};function hI(e,t){return new Oo((i=>{i(gh).toDynamicValue((()=>t=>new e(t))).whenTargetNamed(e.env),i(fh).toDynamicValue((()=>(e,i)=>new t(e,i))).whenTargetNamed(t.env)}))}cI.env="browser",cI=oI([jo(),lI("design:paramtypes",[Object])],cI);const dI=hI(cI,aI);var uI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},pI=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},gI=function(e,t){return function(i,n){t(i,n,e)}};let fI=class{constructor(e){this.pickItemInterceptorContributions=e,this.type="default",this.global=se.global}_init(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort(((e,t)=>e.order-t.order))}pick(e,t,i){let n={graphic:null,group:null};i.pickerService=this;let r=0,s=0;if(i&&i.bounds){if(!i.bounds.contains(t.x,t.y))return n;r=i.bounds.x1,s=i.bounds.y1}this.pickContext&&(this.pickContext.inuse=!0),i.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);const a=new sl(1,0,0,1,r,s);let o;for(let l=e.length-1;l>=0&&(n=e[l].isContainer?this.pickGroup(e[l],t,a,i):this.pickItem(e[l],t,a,i),!n.graphic);l--)o||(o=n.group);if(n.graphic||(n.group=o),this.pickContext&&(this.pickContext.inuse=!1),n.graphic){let e=n.graphic;for(;e.parent;)e=e.parent;e.shadowHost&&(n.params={shadowTarget:n.graphic},n.graphic=e.shadowHost)}return n}containsPoint(e,t,i){var n;return!!(null===(n=this.pickItem(e,t,null,null!=i?i:{pickContext:this.pickContext,pickerService:this}))||void 0===n?void 0:n.graphic)}pickGroup(e,t,i,n){let r={group:null,graphic:null};if(!1===e.attribute.visibleAll)return r;const s=n.pickContext,a=s.modelMatrix;if(s.camera){const t=e.transMatrix,i=ep.allocate();if(fp(i,t),a){if(i){const e=ep.allocate();s.modelMatrix=mp(e,a,i),ep.free(i)}}else fp(i,e.globalTransMatrix),s.modelMatrix=i}if(this.InterceptorContributions.length)for(let p=0;p<this.InterceptorContributions.length;p++){const r=this.InterceptorContributions[p];if(r.beforePickItem){const o=r.beforePickItem(e,this,t,n,{parentMatrix:i});if(o)return s.modelMatrix!==a&&ep.free(s.modelMatrix),s.modelMatrix=a,o}}const o=e.transMatrix,l=Ju.allocateByObj(i),c=new ir(t.x,t.y);l.transformPoint(c,c);const h=e.AABBBounds.containsPoint(c);if(!h&&!e.stage.camera)return r;const d=this.pickItem(e,c.clone(),i,n);d&&d.graphic&&(r.graphic=d.graphic,r.params=d.params);const u=!1!==e.attribute.pickable&&h;return l.multiply(o.a,o.b,o.c,o.d,o.e,o.f),!1===e.attribute.childrenPickable||d&&d.graphic||Vp(e,xc.zIndex,(s=>{if(s.isContainer){const i=new ir(t.x,t.y),a=jh(e).group,{scrollX:o=a.scrollX,scrollY:c=a.scrollY}=e.attribute;i.x-=o,i.y-=c,r=this.pickGroup(s,i,l,n)}else{const a=new ir(t.x,t.y);l.transformPoint(a,a);const o=jh(e).group,{scrollX:c=o.scrollX,scrollY:h=o.scrollY}=e.attribute;a.x-=c,a.y-=h;const d=this.pickItem(s,a,i,n);d&&d.graphic&&(r.graphic=d.graphic,r.params=d.params)}return!!r.graphic||!!r.group}),!0,!!s.camera),s.modelMatrix!==a&&ep.free(s.modelMatrix),s.modelMatrix=a,r.graphic||r.group||!u||e.stage.camera||(r.group=e),Ju.free(l),r}selectPicker(e){return this.pickerMap.get(e.numberType)||null}};fI=uI([jo(),gI(0,Ho(Uo)),gI(0,Vo(ip)),pI("design:paramtypes",[Object])],fI);var mI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},vI=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},yI=function(e,t){return function(i,n){t(i,n,e)}};let bI=class extends fI{constructor(e,t,i){super(i),this.contributions=e,this.drawContribution=t,this.pickItemInterceptorContributions=i,this.global.hooks.onSetEnv.tap("canvas-picker-service",((e,t,i)=>{this.configure(i,t)})),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach((e=>{this.pickerMap.set(e.numberType,e)})),super._init()}configure(e,t){this.pickCanvas=vh.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(e,t,i,n){if(!1===e.attribute.pickable)return null;if(this.InterceptorContributions.length)for(let o=0;o<this.InterceptorContributions.length;o++){const r=this.InterceptorContributions[o];if(r.beforePickItem){const s=r.beforePickItem(e,this,t,n,{parentMatrix:i});if(s)return s}}const r=this.pickerMap.get(e.numberType);if(!r)return null;const s=r.contains(e,t,n)?e:null,a={graphic:s};if(s)return a;if(this.InterceptorContributions.length)for(let o=0;o<this.InterceptorContributions.length;o++){const r=this.InterceptorContributions[o];if(r.afterPickItem){const s=r.afterPickItem(e,this,t,n,{parentMatrix:i});if(s)return s}}return a}};bI=mI([jo(),yI(0,Ho(Uo)),yI(0,Vo(vS)),yI(1,Ho(Uu)),yI(2,Ho(Uo)),yI(2,Vo(ip)),vI("design:paramtypes",[Object,Object,Object])],bI);var _I=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let xI=class{constructor(){this.type="group",this.numberType=qd}contains(e,t,i){return!1}};xI=_I([jo()],xI);const SI=new Oo(((e,t,i,n)=>{SI.__vloaded||(SI.__vloaded=!0,e(mS).to(xI).inSingletonScope(),e(vS).toService(mS),Go(e,vS))}));SI.__vloaded=!1;const wI=SI,CI=new Oo(((e,t,i,n)=>{i(bI)||e(bI).toSelf().inSingletonScope(),i(Zu)?n(Zu).toService(bI):e(Zu).toService(bI)}));var kI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},AI=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let EI=class{constructor(){this._uid=To.GenAutoIncrementId()}onChange(e){this._onChangeCb=e}configure(e,t){t.env===this.type&&e.setWindowHandler(this)}release(){this.releaseWindow()}isVisible(e){return!0}onVisibleChange(e){}getTopLeft(e){return{top:0,left:0}}};EI=kI([jo(),AI("design:paramtypes",[])],EI);var TI,OI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},PI=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let MI=TI=class extends EI{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return"".concat(TI.idprefix,"_").concat(TI.prefix_count++)}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=se.global}getTitle(){return this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(e){e.canvas?this.createWindowByCanvas(e):this.createWindowByConfig(e),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch(H6){console.error("\u53d1\u751f\u9519\u8bef\uff0c\u8be5\u73af\u5883\u4e0d\u5b58\u5728IntersectionObserver")}}isElementVisible(e){const t=e.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight;return!(t.right<0||t.bottom<0||t.left>i||t.top>n)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{this._canvasIsIntersecting!==e.isIntersecting?(this._canvasIsIntersecting=e.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(e.isIntersecting)):this._canvasIsIntersecting=e.isIntersecting}))}));e&&e.observe(this.canvas.nativeCanvas)}createWindowByConfig(e){const t=this.global.createCanvas({width:e.width,height:e.height});let i;if(i="string"==typeof e.container?this.global.getElementById(e.container):e.container?e.container:this.global.getRootElement(),!i)throw new Error("\u53d1\u751f\u9519\u8bef\uff0ccontainerId\u53ef\u80fd\u4f20\u5165\u6709\u8bef");e.offscreen?i=null:i.appendChild(t);const n={width:e.width,height:e.height,dpr:e.dpr,nativeCanvas:t,container:i,id:TI.GenerateCanvasId(),canvasControled:!0};this.canvas=new cI(n)}createWindowByCanvas(e){var t;let i;if("string"==typeof e.canvas){if(i=this.global.getElementById(e.canvas),!i)throw new Error("canvasId \u53c2\u6570\u4e0d\u6b63\u786e\uff0c\u8bf7\u786e\u8ba4canvas\u5b58\u5728\u5e76\u63d2\u5165dom")}else i=e.canvas;if(!i)throw new Error("\u53d1\u751f\u9519\u8bef\uff0c\u4f20\u5165\u7684canvas\u4e0d\u6b63\u786e");let n=e.width,r=e.height;if(null==n||null==r||!e.canvasControled){const e=i.getBoundingClientRect();n=e.width,r=e.height}let s=e.dpr;null==s&&(s=null!==(t=i.getContext("2d").pixelRatio)&&void 0!==t?t:i.width/n),this.canvas=new cI({width:n,height:r,dpr:s,nativeCanvas:i,canvasControled:e.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(e,t){this.canvas.resize(e,t)}setDpr(e){this.canvas.dpr=e}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(e,t,i){return this.canvas.nativeCanvas.addEventListener(e,t,i)}removeEventListener(e,t,i){return this.canvas.nativeCanvas.removeEventListener(e,t,i)}dispatchEvent(e){return this.canvas.nativeCanvas.dispatchEvent(e)}getStyle(){return this.canvas.nativeCanvas.style}setStyle(e){this.canvas.nativeCanvas.style=e}getBoundingClientRect(){const e=this.canvas.nativeCanvas,t=this.getWH();return e.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:t.width,height:t.height,left:0,top:0,right:0,bottom:0}}clearViewBox(e,t){const i=this.getContext(),n=this.getDpr();i.nativeContext.save(),i.nativeContext.setTransform(n,0,0,n,0,0),i.clearRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1),t&&(i.fillStyle=t,i.fillRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1)),i.nativeContext.restore()}isVisible(e){return this._canvasIsIntersecting}onVisibleChange(e){this._onVisibleChangeCb=e}getTopLeft(e){return this.global.getElementTopLeft(this.canvas.nativeCanvas,e)}};MI.env="browser",MI.idprefix="visactor_window",MI.prefix_count=0,MI=TI=OI([jo(),PI("design:paramtypes",[])],MI);const II=new Oo((e=>{e(MI).toSelf(),e(xh).toDynamicValue((e=>e.container.get(MI))).whenTargetNamed(MI.env)}));var RI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let DI=class{configure(e){e.env===this.type&&e.setActiveEnvContribution(this)}getNativeAABBBounds(e){return new hl}removeDom(e){return!1}createDom(e){return null}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(e){return document.getElementById(e)}getRootElement(){return document.body}loadJson(e){const t=fetch(e).then((e=>e.json()));return t.then((e=>({data:e,state:"success"}))).catch((()=>({data:null,state:"fail"}))),t}loadArrayBuffer(e){return fetch(e).then((e=>e.arrayBuffer())).then((e=>({data:e,loadState:"success"}))).catch((()=>({data:null,loadState:"fail"})))}loadBlob(e){return fetch(e).then((e=>e.blob())).then((e=>({data:e,loadState:"success"}))).catch((()=>({data:null,loadState:"fail"})))}getElementTop(e,t){return 0}getElementLeft(e,t){return 0}getElementTopLeft(e,t){return{top:0,left:0}}};DI=RI([jo()],DI);var LI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},jI=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class FI{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(e){this.dom=e}}function BI(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=document.createElement("img");if(i.crossOrigin="anonymous",t){const t=new Blob([e],{type:"image/svg+xml"});e=window.URL.createObjectURL(t)}return i.src=e,i.complete?Promise.resolve(i):new Promise(((e,t)=>{i.onload=()=>{e(i)},i.onerror=()=>{t(new Error("\u52a0\u8f7d\u5931\u8d25"))}}))}let NI=class extends DI{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch(H6){this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(e,t){var i;if(t){const{clientX:n,clientY:r}=e,s=t.getBoundingClientRect(),a=null===(i=t.getNativeHandler)||void 0===i?void 0:i.call(t).nativeCanvas;let o,l;return a&&(o=s.width/a.offsetWidth,l=s.height/a.offsetHeight),{x:(n-s.left)/(L(o)?o:1),y:(r-s.top)/(L(l)?l:1)}}return{x:e.offsetX,y:e.offsetY}}getNativeAABBBounds(e){let t=e;if("string"==typeof e&&(t=(new DOMParser).parseFromString(e,"text/html").firstChild,t.lastChild&&(t=t.lastChild.firstChild)),t.getBoundingClientRect){const e=t.getBoundingClientRect();return new FI(e)}return new hl}removeDom(e){return e.parentElement.removeChild(e),!0}createDom(e){const{tagName:t="div",width:i,height:n,style:r,parent:s}=e,a=document.createElement(t);if(r&&(_(r)?a.setAttribute("style",r):Object.keys(r).forEach((e=>{a.setAttribute(e,r[e])}))),null!=i&&(a.style.width="".concat(i,"px")),null!=n&&(a.style.height="".concat(n,"px")),s){const e=_(s)?this.getElementById(s):s;e&&e.appendChild&&e.appendChild(a)}return a}loadImage(e){return BI(e,!1).then((e=>({data:e,loadState:"success"}))).catch((()=>({data:null,loadState:"fail"})))}loadSvg(e){return BI(e,!0).then((e=>({data:e,loadState:"success"}))).catch((()=>({data:null,loadState:"fail"})))}createCanvas(e){var t,i;const n=document.createElement("canvas");e.id&&(n.id=null!==(t=e.id)&&void 0!==t?t:To.GenAutoIncrementId().toString());const r=null!==(i=e.dpr)&&void 0!==i?i:window.devicePixelRatio;return e.width&&e.height&&(n.style.width="".concat(e.width,"px"),n.style.height="".concat(e.height,"px"),n.width=e.width*r,n.height=e.height*r),n}createOffscreenCanvas(e){var t;const i=null!==(t=e.dpr)&&void 0!==t?t:window.devicePixelRatio;return new OffscreenCanvas(e.width*i,e.height*i)}releaseCanvas(e){let t;t="string"==typeof e?document.getElementById(e):e,t&&t.parentElement&&t.parentElement.removeChild(t)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(e,t,i){return document.addEventListener(e,t,i)}removeEventListener(e,t,i){return document.removeEventListener(e,t,i)}dispatchEvent(e){return document.dispatchEvent(e)}getElementById(e){return document.getElementById(e)}getRootElement(){return document.body}getDocument(){return document}release(){}getElementTop(e,t){let i=e.offsetTop,n=e.offsetParent;for(;null!==n;)i+=n.offsetTop,n=n.offsetParent;return i}getElementLeft(e,t){let i=e.offsetLeft,n=e.offsetParent;for(;null!==n;)i+=n.offsetLeft,n=n.offsetParent;return i}getElementTopLeft(e,t){let i=e.offsetTop,n=e.offsetLeft,r=e.offsetParent;for(;null!==r;)i+=r.offsetTop,n+=r.offsetLeft,r=r.offsetParent;return{top:i,left:n}}};NI=LI([jo(),jI("design:paramtypes",[])],NI);const zI=new Oo((e=>{zI.isBrowserBound||(zI.isBrowserBound=!0,e(NI).toSelf().inSingletonScope(),e(Xo).toService(NI))}));function HI(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];HI.__loaded||(HI.__loaded=!0,e.load(zI),e.load(dI),e.load(II),t&&function(e){e.load(wI),e.load(CI)}(e))}zI.isBrowserBound=!1,HI.__loaded=!1;var VI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},UI=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let WI=class extends aI{constructor(e,t){super(e,t);const i=e.nativeCanvas.getContext("2d");if(!i)throw new Error("\u53d1\u751f\u9519\u8bef\uff0c\u83b7\u53d62d\u4e0a\u4e0b\u6587\u5931\u8d25");this.nativeContext=i,this.canvas=e,this.matrix=new sl(1,0,0,1,0,0),this.stack=[],this.dpr=null!=t?t:1}release(){}};WI.env="node",WI=VI([jo(),UI("design:paramtypes",[Object,Number])],WI);var GI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},KI=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let YI=class extends tI{constructor(e){super(e)}init(){this._context=new WI(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(){this._nativeCanvas.release&&Q(this._nativeCanvas.release)&&this._nativeCanvas.release()}};YI.env="node",YI=GI([jo(),KI("design:paramtypes",[Object])],YI);const XI=hI(YI,WI);var qI=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},ZI=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},QI=function(e,t){return function(i,n){t(i,n,e)}};let $I=class extends EI{get container(){return null}constructor(e){super(),this.global=e,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(e){e.canvas?this.createWindowByCanvas(e):this.createWindowByConfig(e)}createWindowByConfig(e){const t=this.global.createCanvas({width:e.width,height:e.height}),i={width:e.width,height:e.height,dpr:e.dpr,nativeCanvas:t,id:To.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new YI(i)}createWindowByCanvas(e){const t=e.canvas;let i=e.width,n=e.height;null!=i&&null!=n&&e.canvasControled||(i=t.width,n=t.height),this.canvas=new YI({width:i,height:n,dpr:1,nativeCanvas:t,canvasControled:e.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(e,t){this.canvas.resize(e,t)}setDpr(e){this.canvas.dpr=e}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return this.canvas.nativeCanvas.toBuffer(e)}addEventListener(e,t,i){}dispatchEvent(e){return!0}removeEventListener(e,t,i){}getStyle(){}setStyle(e){}getBoundingClientRect(){return null}clearViewBox(e,t){}};$I.env="node",$I=qI([jo(),QI(0,Ho(qo)),ZI("design:paramtypes",[Object])],$I);const JI=new Oo((e=>{e($I).toSelf(),e(xh).toDynamicValue((e=>e.container.get($I))).whenTargetNamed($I.env)}));var eR=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let tR=class extends DI{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(e,t){e.env===this.type&&(e.setActiveEnvContribution(this),this.pkg=t)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(e){const t=fetch(e).then((e=>e.json()));return t.then((e=>({data:e,state:"success"}))).catch((()=>({data:null,state:"fail"}))),t}loadArrayBuffer(e){return fetch(e).then((e=>e.arrayBuffer())).then((e=>({data:e,loadState:"success"}))).catch((()=>({data:null,loadState:"fail"})))}loadImage(e){const{loadImage:t}=this.pkg;return t?t(e).then((e=>({loadState:e?"success":"fail",data:e}))).catch((()=>({loadState:"fail",data:null}))):Promise.reject(new Error("node-canvas loadImage could not be found!"))}loadSvg(e){const t=this.pkg.Resvg;if(!t)return Promise.reject(new Error("@resvg/resvg-js svgParser could not be found!"));const i=new t(e).render().asPng();return this.loadImage(i)}createCanvas(e){return this.pkg.createCanvas(e.width,e.height)}releaseCanvas(e){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(e){return Rd.call(e)}}getCancelAnimationFrame(){return e=>{Rd.clear(e)}}addEventListener(e,t,i){}removeEventListener(e,t,i){}getElementById(e){return null}getRootElement(){return null}dispatchEvent(e){}release(){}createOffscreenCanvas(e){}};tR=eR([jo()],tR);const iR=new Oo((e=>{iR.isNodeBound||(iR.isNodeBound=!0,e(tR).toSelf().inSingletonScope(),e(Xo).toService(tR))}));function nR(e){nR.__loaded||(nR.__loaded=!0,e.load(iR),e.load(XI),e.load(JI))}iR.isNodeBound=!1,nR.__loaded=!1;const rR={name:"dark",colorScheme:{default:{dataScheme:Se,palette:{backgroundColor:"#202226",borderColor:"#404349",shadowColor:"rgba(0,0,0,0.1)",hoverBackgroundColor:"#404349",sliderRailColor:"#404349",sliderHandleColor:"#202226",sliderTrackColor:"#4284FF",popupBackgroundColor:"#404349",primaryFontColor:"#fdfdfd",secondaryFontColor:"#bbbdc3",tertiaryFontColor:"#888c93",axisLabelFontColor:"#888c93",disableFontColor:"#55595f",axisMarkerFontColor:"#202226",axisGridColor:"#404349",axisDomainColor:"#4b4f54",dataZoomHandleStrokeColor:"#bbbdc3",dataZoomChartColor:"#55595F",playerControllerColor:"#4284FF",scrollBarSliderColor:"rgba(255,255,255,0.3)",axisMarkerBackgroundColor:"#fdfdfd",markLabelBackgroundColor:"#404349",markLineStrokeColor:"#bbbdc3",dangerColor:"#eb4b4b",warningColor:"#f0bd30",successColor:"#14b267",infoColor:"#4284ff"}}},component:{dataZoom:{selectedBackground:{style:{fillOpacity:.4,outerBorder:{strokeOpacity:.4}}}}}};class sR{constructor(){this.id=X(),this._plugins=[]}add(e){if(!e||0===e.length)return null;const t=[];return e.forEach((e=>{this._plugins.find((t=>t.id===e.id))?ge("\u4e0d\u8981\u91cd\u590d\u6dfb\u52a0\u76f8\u540c\u7684plugin"):(this._plugins.push(e),t.push(e),e.onAdd&&e.onAdd(this))})),t}load(e){const t=this.add(e);t&&t.length&&this.activate(e)}activate(e){e.length&&e.forEach((e=>{e.init&&e.init()}))}get(e){return this._plugins.find((t=>t.id===e))}getAll(){return this._plugins.slice()}dispose(e){const t=this._plugins.find((t=>t.id===e));t&&t.dispose&&t.dispose(this)}disposeAll(){this._plugins.forEach((e=>{e.dispose&&e.dispose(this)}))}}class aR extends sR{constructor(e){super(),this.globalInstance=e}onInit(e){this._plugins.forEach((t=>{t.onInit&&t.onInit(this,e)}))}onBeforeResize(e,t){this._plugins.forEach((i=>{i.onBeforeResize&&i.onBeforeResize(this,e,t)}))}onAfterChartSpecTransform(e,t){this._plugins.forEach((i=>{i.onAfterChartSpecTransform&&i.onAfterChartSpecTransform(this,e,t)}))}onBeforeInitChart(e,t){this._plugins.forEach((i=>{i.onBeforeInitChart&&i.onBeforeInitChart(this,e,t)}))}}var oR=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))},lR=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class cR{static useRegisters(e){e.forEach((e=>{"function"==typeof e?e():console.error("Invalid function:",e)}))}static useChart(e){e.forEach((e=>_n.registerChart(e.type,e)))}static useSeries(e){e.forEach((e=>_n.registerSeries(e.type,e)))}static useComponent(e){e.forEach((e=>_n.registerComponent(e.type,e)))}static useMark(e){e.forEach((e=>{var t;return _n.registerMark(null!==(t=e.constructorType)&&void 0!==t?t:e.type,e)}))}static useLayout(e){e.forEach((e=>_n.registerLayout(e.type,e)))}static registerDataSetTransform(e,t){_n.registerTransform(e,t)}static registerFunction(e,t){e&&t&&QM.instance().registerFunction(e,t)}static unregisterFunction(e){e&&QM.instance().unregisterFunction(e)}static getFunction(e){return e?QM.instance().getFunction(e):null}static getFunctionList(){return QM.instance().getFunctionNameList()}static registerMap(e,t,i){const n=_n.getImplementInKey("registerMap");n&&n(e,t,i)}static unregisterMap(e){const t=_n.getImplementInKey("unregisterMap");t&&t(e)}static getMap(e){return t=e,go.get(t);var t}static hideTooltip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Yi.forEach((e=>{var t;return null===(t=null==e?void 0:e.hideTooltip)||void 0===t?void 0:t.call(e)}),e)}static getLogger(){return u.getInstance()}getSpec(){return this._spec}getSpecInfo(){return this._specInfo}getDataSet(){return this._dataSet}constructor(e,t){var i,r,s,a,o,l,c,h=this;this.id=X(),this._userEvents=[],this._autoSize=!0,this._option={mode:n["desktop-browser"],onError:e=>{throw new Error(e)},optimize:{disableCheckGraphicWidthOutRange:!0}},this._observer=null,this._context={},this._onResize=F((function(){h._doResize()}),100),this._option=O(this._option,{animation:!1!==e.animation},t),this._onError=null===(i=this._option)||void 0===i?void 0:i.onError;const d=this._option,{dom:u,renderCanvas:p,mode:g,stage:f,poptip:m}=d,v=lR(d,["dom","renderCanvas","mode","stage","poptip"]),y=de(g);y&&u&&(this._container=_(u)?null===document||void 0===document?void 0:document.getElementById(u):u),p&&(this._canvas=p),f&&(this._stage=f),"node"===g||this._container||this._canvas||this._stage?(y?HI(ph):"node"===g&&nR(ph),this._viewBox=this._option.viewBox,this._currentThemeName=Xi.getCurrentThemeName(),this._setNewSpec(e),this._updateCurrentTheme(),this._currentSize=this.getCurrentSize(),this._compiler=new Jb({dom:null!==(s=this._container)&&void 0!==s?s:"none",canvas:p},Object.assign(Object.assign({mode:this._option.mode,stage:f,pluginList:!1!==m?["poptipForText"]:[]},v),{background:this._getBackground(),onError:this._onError})),this._compiler.setSize(this._currentSize.width,this._currentSize.height),this._eventDispatcher=new is(this,this._compiler),this._event=new jr(this._eventDispatcher,g),this._compiler.initView(),null===(a=this.getStage())||void 0===a||a.setTheme({text:{fontFamily:null===(o=this._currentTheme)||void 0===o?void 0:o.fontFamily}}),this._initDataSet(this._option.dataSet),this._autoSize=!!y&&(null===(c=null!==(l=e.autoFit)&&void 0!==l?l:this._option.autoFit)||void 0===c||c),this._bindResizeEvent(),this._bindVGrammarViewEvent(),this._initChartPlugin(),Yi.registerInstance(this)):null===(r=this._option)||void 0===r||r.onError("please specify container or renderCanvas!")}_setNewSpec(e,t){return!!e&&(_(e)&&(e=JSON.parse(e)),t&&this._originalSpec&&(e=_e({},this._originalSpec,e)),this._originalSpec=e,this._spec=this._getSpecFromOriginalSpec(),!0)}_getSpecFromOriginalSpec(){var e;const t=B(this._originalSpec);return t.data=null!==(e=t.data)&&void 0!==e?e:[],t}_initChartSpec(e,t){var i;cR.getFunctionList()&&cR.getFunctionList().length&&(e=N(e,cR)),this._spec=e,this._chartSpecTransformer||(this._chartSpecTransformer=_n.createChartSpecTransformer(this._spec.type,{type:this._spec.type,getTheme:()=>{var e;return null!==(e=this._currentTheme)&&void 0!==e?e:{}},animation:this._option.animation})),this._chartSpecTransformer.transformSpec(this._spec),this._chartPluginApply("onAfterChartSpecTransform",this._spec,t),this._specInfo=null===(i=this._chartSpecTransformer)||void 0===i?void 0:i.transformModelSpec(this._spec),this._chartPluginApply("onAfterModelSpecTransform",this._spec,this._specInfo,t)}_updateSpecInfo(){var e;this._chartSpecTransformer||(this._chartSpecTransformer=_n.createChartSpecTransformer(this._spec.type,{type:this._spec.type,getTheme:()=>{var e;return null!==(e=this._currentTheme)&&void 0!==e?e:{}}})),this._specInfo=null===(e=this._chartSpecTransformer)||void 0===e?void 0:e.createSpecInfo(this._spec)}_initChart(e){var t,i;if(!this._compiler)return void(null===(t=this._option)||void 0===t||t.onError("compiler is not initialized"));const r=_n.createChart(e.type,e,{type:e.type,globalInstance:this,eventDispatcher:this._eventDispatcher,dataSet:this._dataSet,container:this._container,canvas:this._canvas,map:new Map,mode:this._option.mode||n["desktop-browser"],modeParams:this._option.modeParams,getCompiler:()=>this._compiler,performanceHook:this._option.performanceHook,viewBox:this._viewBox,animation:this._option.animation,getTheme:()=>{var e;return null!==(e=this._currentTheme)&&void 0!==e?e:{}},getSpecInfo:()=>{var e;return null!==(e=this._specInfo)&&void 0!==e?e:{}},layout:this._option.layout,onError:this._onError,disableTriggerEvent:!0===this._option.disableTriggerEvent});r?(this._chart=r,this._chart.setCanvasRect(this._currentSize.width,this._currentSize.height),this._chart.created(),this._chart.init(),this._event.emit(Ir.initialized,{})):null===(i=this._option)||void 0===i||i.onError("init chart fail")}_releaseData(){this._dataSet&&(this._dataSet.dataViewMap={},this._dataSet=null)}_bindVGrammarViewEvent(){this._compiler&&!this._compiler.isReleased&&(this._compiler.getVGrammarView().addEventListener($r.ALL_ANIMATION_END,(()=>{this._event.emit(Ir.animationFinished,{})})),this._compiler.getVGrammarView().addEventListener($r.AFTER_VRENDER_NEXT_RENDER,(()=>{this._event.emit(Ir.renderFinished,{})})))}_bindResizeEvent(){var e;if(this._autoSize){if(this._container){const t=window.ResizeObserver;this._observer=new t(this._onResize),null===(e=this._observer)||void 0===e||e.observe(this._container)}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this._autoSize&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}getCurrentSize(){var e,t,i,r;return uw(this._spec,{container:this._container,canvas:this._canvas,mode:this._option.mode||n["desktop-browser"],modeParams:this._option.modeParams},{width:null!==(t=null===(e=this._currentSize)||void 0===e?void 0:e.width)&&void 0!==t?t:Ke,height:null!==(r=null===(i=this._currentSize)||void 0===i?void 0:i.height)&&void 0!==r?r:Ye})}_doResize(){const{width:e,height:t}=this.getCurrentSize();this._currentSize.width===e&&this._currentSize.height===t||(this._currentSize={width:e,height:t},this.resize(e,t))}_initDataSet(e){this._dataSet=e instanceof f?e:new f,po(this._dataSet,"dataview",y),po(this._dataSet,"array",t),uo(this._dataSet,"stackSplit",Co),uo(this._dataSet,"copyDataView",bo);for(const t in _n.transforms)uo(this._dataSet,t,_n.transforms[t]);for(const t in _n.dataParser)po(this._dataSet,t,_n.dataParser[t])}updateCustomConfigAndRerender(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._isReleased&&e)return Q(e)&&(e=e()),this._reCompile(e),t?this._renderSync(i):this._renderAsync(i)}_updateCustomConfigAndRecompile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!e&&(this._reCompile(e),this._beforeRender(t))}_reCompile(e,t){var i,n,r,s,a,o,l;if(e.reMake)this._releaseData(),this._initDataSet(),this._chartSpecTransformer=null,this._chart.release(),this._chart=null,null===(i=this._compiler)||void 0===i||i.releaseGrammar(!1===(null===(n=this._option)||void 0===n?void 0:n.animation)||!1===(null===(r=this._spec)||void 0===r?void 0:r.animation)),this._userEvents.forEach((e=>{var t;return null===(t=this._event)||void 0===t?void 0:t.on(e.eType,e.query,e.handler)})),e.reSize&&this._doResize();else if(e.reCompile&&(null===(s=this._compiler)||void 0===s||s.clear({chart:this._chart,vChart:this},!this._option.animation||!this._spec.animation),null===(a=this._compiler)||void 0===a||a.compile({chart:this._chart,vChart:this},{})),e.reSize){const{width:e,height:t}=this.getCurrentSize();this._chart.onResize(e,t,!1),null===(l=(o=this._compiler).resize)||void 0===l||l.call(o,e,t,!1)}}_beforeRender(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,i,n,r,s,a,o,l;if(this._isReleased)return!1;if(this._chart)return!0;const{transformSpec:c,actionSource:h}=e;return c&&this._initChartSpec(this._spec,"render"),this._chartPluginApply("onBeforeInitChart",this._spec,h),null===(i=null===(t=this._option.performanceHook)||void 0===t?void 0:t.beforeInitializeChart)||void 0===i||i.call(t),this._initChart(this._spec),null===(r=null===(n=this._option.performanceHook)||void 0===n?void 0:n.afterInitializeChart)||void 0===r||r.call(n),!(!this._chart||!this._compiler)&&(null===(a=null===(s=this._option.performanceHook)||void 0===s?void 0:s.beforeCompileToVGrammar)||void 0===a||a.call(s),this._compiler.compile({chart:this._chart,vChart:this},{performanceHook:this._option.performanceHook}),null===(l=null===(o=this._option.performanceHook)||void 0===o?void 0:o.afterCompileToVGrammar)||void 0===l||l.call(o),!0)}_afterRender(){return!this._isReleased&&(this._updateAnimateState(),this._event.emit(Ir.rendered,{}),!0)}renderSync(e){return this._renderSync({morphConfig:e,transformSpec:!0,actionSource:"render"})}renderAsync(e){return oR(this,void 0,void 0,(function*(){return this._renderAsync({morphConfig:e,transformSpec:!0,actionSource:"render"})}))}_renderSync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return this._beforeRender(e)?(null===(t=this._compiler)||void 0===t||t.renderSync(e.morphConfig),this._afterRender(),this):this}_renderAsync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return oR(this,void 0,void 0,(function*(){return this._beforeRender(e)?(yield null===(t=this._compiler)||void 0===t?void 0:t.renderAsync(e.morphConfig),this._afterRender(),this):this}))}_updateAnimateState(){var e,t;this._option.animation&&(null===(e=this._chart)||void 0===e||e.getAllRegions().forEach((e=>{var t;null===(t=e.animate)||void 0===t||t.updateAnimateState(ko.update,!0)})),null===(t=this._chart)||void 0===t||t.getAllComponents().forEach((e=>{var t;null===(t=e.animate)||void 0===t||t.updateAnimateState(ko.update,!0)})))}release(){var e,t,i,n;(null===(e=this._onResize)||void 0===e?void 0:e.cancel)&&this._onResize.cancel(),this._chartPluginApply("disposeAll"),this._chartSpecTransformer=null,null===(t=this._chart)||void 0===t||t.release(),null===(i=this._compiler)||void 0===i||i.release(),null===(n=this._eventDispatcher)||void 0===n||n.release(),this._unBindResizeEvent(),this._releaseData(),this._chart=null,this._compiler=null,this._spec=null,this._originalSpec=null,this._userEvents=null,this._event=null,this._eventDispatcher=null,this._isReleased=!0,Yi.unregisterInstance(this)}updateData(e,t,i){return oR(this,void 0,void 0,(function*(){if(P(this._dataSet))return this;if(this._chart)return this._chart.updateData(e,t,!0,i),yield this._compiler.renderAsync(),this;this._spec.data=z(this._spec.data);const n=this._spec.data.find((t=>t.name===e||t.id===e));return n?n.id===e?n.values=t:n.name===e&&n.parse(t,i):v(t)?this._spec.data.push({id:e,values:t}):this._spec.data.push(t),this}))}updateDataInBatches(e){return oR(this,void 0,void 0,(function*(){return this._chart?(this._chart.updateFullData(e.map((e=>{let{id:t,data:i,options:n}=e;return{id:t,values:i,parser:n}}))),this._chart.updateGlobalScaleDomain(),yield this._compiler.renderAsync(),this):(e.forEach((e=>{let{id:t,data:i,options:n}=e;const r=this._spec.data.find((e=>e.name===t));if(r)r.parse(i,n);else{const e=new R(this._dataSet,{name:t});e.parse(i,n),this._spec.data.push(e)}})),this)}))}updateDataSync(e,t,i){if(P(this._dataSet))return this;if(this._chart)return this._chart.updateData(e,t,!0,i),this._compiler.renderSync(),this;const n=this._spec.data.find((t=>t.name===e));if(n)n.parse(t,i);else{const n=new R(this._dataSet,{name:e});n.parse(t,i),this._spec.data.push(n)}return this}updateFullDataSync(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._chart?(this._chart.updateFullData(e),t&&this._compiler.renderSync(),this):(z(e).forEach((e=>{var t;const{id:i,values:n,parser:r,fields:s}=e,a=this._spec.data.find((e=>e.name===i));if(a)a.setFields(S(s)),a.parse(n,S(r));else{const i=xo(e,this._dataSet,this._spec.data,{onError:null===(t=this._option)||void 0===t?void 0:t.onError});this._spec.data.push(i)}})),this)}updateFullData(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return oR(this,void 0,void 0,(function*(){return this._chart?(this._chart.updateFullData(e),t&&(yield this._compiler.renderAsync()),this):(z(e).forEach((e=>{var t;const{id:i,values:n,parser:r,fields:s}=e,a=this._spec.data.find((e=>e.name===i));if(a)a.setFields(S(s)),a.parse(n,S(r));else{const i=xo(e,this._dataSet,this._spec.data,{onError:null===(t=this._option)||void 0===t?void 0:t.onError});this._spec.data.push(i)}})),this)}))}updateSpec(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;return oR(this,void 0,void 0,(function*(){const n=this._updateSpec(e,t);return yield this.updateCustomConfigAndRerender(n,!1,{morphConfig:i,transformSpec:!0,actionSource:"updateSpec"}),this}))}updateSpecSync(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const n=this._updateSpec(e,t);return this.updateCustomConfigAndRerender(n,!0,{morphConfig:i,transformSpec:!0,actionSource:"updateSpec"}),this}updateSpecAndRecompile(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this._updateSpec(e,t);return this._updateCustomConfigAndRecompile(n,Object.assign({actionSource:"updateSpecAndRecompile"},i))}_updateSpec(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var i,n;const r=this._spec;if(!this._setNewSpec(e,t))return;ty(r.theme,this._spec.theme)||this._setCurrentTheme();const s=this._shouldChartResize(r);return null===(n=null===(i=this._compiler)||void 0===i?void 0:i.getVGrammarView())||void 0===n||n.updateLayoutTag(),pw(this._chart.updateSpec(this._spec),{change:s,reMake:!1,reCompile:!1,reSize:s})}updateModelSpec(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return oR(this,void 0,void 0,(function*(){if(!t||!this._spec)return this;if(_(t)&&(t=JSON.parse(t)),Q(e)||xe(this._spec,e,t,i),this._chart){const r=this._chart.getModelInFilter(e);if(r)return this._updateModelSpec(r,t,!1,i,n)}return this}))}updateModelSpecSync(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;if(!t||!this._spec)return this;if(_(t)&&(t=JSON.parse(t)),Q(e)||xe(this._spec,e,t,i),this._chart){const r=this._chart.getModelInFilter(e);if(r)return this._updateModelSpec(r,t,!0,i,n)}return this}_updateModelSpec(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>4?arguments[4]:void 0;arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&(t=_e({},e.getSpec(),t));const r=e.updateSpec(t);return e.reInit(t),(r.change||r.reCompile||r.reMake||r.reSize||r.reRender)&&this._chart.reDataFlow(),this.updateCustomConfigAndRerender(r,i,{morphConfig:n,transformSpec:!1,actionSource:"updateModelSpec"})}resize(e,t){var i,n,r,s,a,o;return oR(this,void 0,void 0,(function*(){if(!this._chart||!this._compiler)return this;const l=this._chart.getCanvasRect();return l&&l.width===e&&l.height===t||(this._chartPluginApply("onBeforeResize",e,t),null===(n=null===(i=this._option.performanceHook)||void 0===i?void 0:i.beforeResizeWithUpdate)||void 0===n||n.call(i),this._chart.onResize(e,t,!1),null===(s=null===(r=this._option.performanceHook)||void 0===r?void 0:r.afterResizeWithUpdate)||void 0===s||s.call(r),yield null===(o=(a=this._compiler).resize)||void 0===o?void 0:o.call(a,e,t),this._isReleased||this._event.emit(Ir.afterResize,{chart:this._chart})),this}))}updateViewBox(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._chart&&this._compiler?(this._viewBox=e,this._chart.updateViewBox(e,i),i&&(this._compiler.renderSync(),this._chart.onEvaluateEnd()),this._compiler.updateViewBox(e,t),this):this}on(e,t,i){var n;this._userEvents&&(this._userEvents.push({eType:e,query:"function"==typeof t?null:t,handler:"function"==typeof t?t:i}),null===(n=this._event)||void 0===n||n.on(e,t,i))}off(e,t){var i;if(this._userEvents&&0!==this._userEvents.length)if(t){const n=this._userEvents.findIndex((i=>i.eType===e&&i.handler===t));n>=0&&(this._userEvents.splice(n,1),null===(i=this._event)||void 0===i||i.off(e,t))}else this._userEvents.forEach((t=>{var i;t.eType===e&&(null===(i=this._event)||void 0===i||i.off(e,t.handler))})),this._userEvents=this._userEvents.filter((t=>t.eType!==e))}updateState(e,t){this._chart&&this._chart.updateState(e,t)}setSelected(e,t,i){this._chart&&this._chart.setSelected(e,t,i)}setHovered(e,t,i){this._chart&&this._chart.setHovered(e,t,i)}_updateCurrentTheme(e){var t,i;const n=this._option.theme,r=null===(t=this._spec)||void 0===t?void 0:t.theme;if(e&&(this._currentThemeName=e),ay(n)&&ay(r))this._currentTheme=qi(this._currentThemeName,!0);else if(_(n)&&(!r||_(r))||_(r)&&(!n||_(n))){const e=Di({},qi(this._currentThemeName,!0),qi(n,!0),qi(r,!0));this._currentTheme=e}else{const e=Di({},qi(this._currentThemeName),qi(n),qi(r));this._currentTheme=Bi(e,e.colorScheme)}var s;s=Br(this._currentTheme,"component.poptip"),O(n_.poptip,i_,s),null===(i=this._compiler)||void 0===i||i.setBackground(this._getBackground())}_shouldChartResize(e){var t,i;let n=!1;P(this._spec.width)?this._spec.width=e.width:this._spec.width!==e.width&&(n=!0),P(this._spec.height)?this._spec.height=e.height:this._spec.height!==e.height&&(n=!0);const r=this._autoSize;return this._autoSize=!!de(this._option.mode)&&(null===(i=null!==(t=this._spec.autoFit)&&void 0!==t?t:this._option.autoFit)||void 0===i||i),this._autoSize!==r&&(n=!0),n}_getBackground(){return("string"==typeof this._spec.background?this._spec.background:null)||this._currentTheme.background||this._option.background}getCurrentTheme(){return qi(this._currentThemeName)}getCurrentThemeName(){return this._currentThemeName}setCurrentTheme(e){return oR(this,void 0,void 0,(function*(){if(!Xi.themeExist(e))return this;const t=this._setCurrentTheme(e);return yield this.updateCustomConfigAndRerender(t,!1,{transformSpec:!1,actionSource:"setCurrentTheme"}),this}))}setCurrentThemeSync(e){if(!Xi.themeExist(e))return this;const t=this._setCurrentTheme(e);return this.updateCustomConfigAndRerender(t,!0,{transformSpec:!1,actionSource:"setCurrentTheme"}),this}_setCurrentTheme(e){var t;return this._updateCurrentTheme(e),this._initChartSpec(this._getSpecFromOriginalSpec(),"setCurrentTheme"),null===(t=this._chart)||void 0===t||t.setCurrentTheme(),{change:!0,reMake:!1}}_getTooltipComponent(){var e;return null===(e=this._chart)||void 0===e?void 0:e.getAllComponents().find((e=>e.type===r.tooltip))}setTooltipHandler(e){var t,i;this._context.tooltipHandler=e;const n=this._getTooltipComponent();n&&(null===(i=null===(t=n.tooltipHandler)||void 0===t?void 0:t.release)||void 0===i||i.call(t),n.tooltipHandler=e)}getTooltipHandlerByUser(){var e;return null===(e=this._context)||void 0===e?void 0:e.tooltipHandler}getTooltipHandler(){const e=this._getTooltipComponent();return e?e.tooltipHandler:this._context.tooltipHandler}showTooltip(e,t){var i;const n=this._getTooltipComponent();return null!==(i=x(e)&&"none"!==(null==n?void 0:n.showTooltip(e,t)))&&void 0!==i&&i}hideTooltip(){var e;const t=this._getTooltipComponent();return null!==(e=null==t?void 0:t.hideTooltip())&&void 0!==e&&e}getLegendDataById(e){var t;const i=null===(t=this._chart)||void 0===t?void 0:t.getComponentByUserId(e);return i?i.getLegendData():[]}getLegendDataByIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t;const i=null===(t=this._chart)||void 0===t?void 0:t.getAllComponents().filter((e=>e.type===r.discreteLegend));return i[e]?i[e].getLegendData():[]}getLegendSelectedDataById(e){var t;const i=null===(t=this._chart)||void 0===t?void 0:t.getComponentByUserId(e);return i?i.getSelectedData():[]}getLegendSelectedDataByIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t;const i=null===(t=this._chart)||void 0===t?void 0:t.getAllComponents().filter((e=>e.type===r.discreteLegend));return i[e]?i[e].getSelectedData():[]}setLegendSelectedDataById(e,t){var i;const n=null===(i=this._chart)||void 0===i?void 0:i.getComponentByUserId(e);n&&n.setSelectedData(t)}setLegendSelectedDataByIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;var i;const n=null===(i=this._chart)||void 0===i?void 0:i.getAllComponents().filter((e=>e.type===r.discreteLegend));n[e]&&n[e].setSelectedData(t)}getDataURL(){var e;return oR(this,void 0,void 0,(function*(){const t=this.getStage();if(this._chart&&t){t.render();const e=this._chart.getCanvas();return yield t_(e,{onError:this._onError})}return null===(e=this._option)||void 0===e||e.onError(new ReferenceError("render is not defined")),null}))}exportImg(e){var t,i;return oR(this,void 0,void 0,(function*(){if(!de(this._option.mode))return void(null===(t=this._option)||void 0===t||t.onError(new TypeError("non-browser environment can not export img")));const n=yield this.getDataURL();n?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vchart",t=arguments.length>1?arguments[1]:void 0;const i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("target","_blank"),i.setAttribute("download","".concat(e,".png")),i.dispatchEvent(new MouseEvent("click"))}(e,n):null===(i=this._option)||void 0===i||i.onError(new ReferenceError("render is not defined"))}))}exportCanvas(){var e;const t=this.getStage();if(this._chart&&t)return t.toCanvas();null===(e=this._option)||void 0===e||e.onError(new ReferenceError("render is not defined"))}getImageBuffer(){var e,t;if("node"!==this._option.mode)return void(null===(e=this._option)||void 0===e||e.onError(new TypeError("getImageBuffer() now only support node environment.")));const i=this.getStage();return i?(i.render(),i.window.getImageBuffer()):(null===(t=this._option)||void 0===t||t.onError(new ReferenceError("render is not defined")),null)}setLayout(e){var t;this._option.layout=e,null===(t=this._chart)||void 0===t||t.setLayout(e)}reLayout(){var e;null===(e=this._chart)||void 0===e||e.setLayoutTag(!0)}getCompiler(){return this._compiler}getChart(){return this._chart}getStage(){return this._compiler.getStage()}getCanvas(){var e;return null===(e=this._compiler)||void 0===e?void 0:e.getCanvas()}getContainer(){var e;if(x(this._container))return this._container;let t;return t=_(this._canvas)?null===document||void 0===document?void 0:document.getElementById(this._canvas):this._canvas,x(t)?t.parentElement:null===(e=this.getCanvas())||void 0===e?void 0:e.parentElement}getComponents(){return this._chart.getAllComponents()}setDimensionIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;return null===(i=this._chart)||void 0===i?void 0:i.setDimensionIndex(e,t)}stopAnimation(){var e,t,i;null===(i=null===(t=null===(e=this._compiler)||void 0===e?void 0:e.getVGrammarView())||void 0===t?void 0:t.animate)||void 0===i||i.stop()}pauseAnimation(){var e,t,i;null===(i=null===(t=null===(e=this._compiler)||void 0===e?void 0:e.getVGrammarView())||void 0===t?void 0:t.animate)||void 0===i||i.pause()}resumeAnimation(){var e,t,i;null===(i=null===(t=null===(e=this._compiler)||void 0===e?void 0:e.getVGrammarView())||void 0===t?void 0:t.animate)||void 0===i||i.resume()}convertDatumToPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n;if(!this._chart)return null;if(ay(e))return null;const{seriesId:r,seriesIndex:s=0}=t;let a;if(x(r)?a=this._chart.getSeriesInUserId(r):x(s)&&(a=null===(n=this._chart.getSeriesInIndex([s]))||void 0===n?void 0:n[0]),a){const t=Object.keys(e),n=a.getViewData().latestData.find((i=>t.every((t=>i[t]==e[t])))),r=a.getRegion().getLayoutStartPoint();let s;return s=n?a.dataToPosition(n):a.dataToPosition(e),ne(s,r,i)}return null}convertValueToPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n,r;if(!this._chart||P(e)||ay(t))return null;if(!v(e)){const{axisId:r,axisIndex:s}=t;let a;if(x(r)?a=this._chart.getComponentsByKey("axes").find((e=>e.userId===r)):x(s)&&(a=null===(n=this._chart.getComponentsByKey("axes"))||void 0===n?void 0:n[s]),!a)return ge("Please check whether the `axisId` or `axisIndex` is set!"),null;const o=null==a?void 0:a.valueToPosition(e);if(i){const e=a.getLayoutStartPoint(),t=a.getOrient();return o+("bottom"===t||"top"===t?e.x:e.y)}return o}const{seriesId:s,seriesIndex:a}=t;let o;return x(s)?o=this._chart.getSeriesInUserId(s):x(a)&&(o=null===(r=this._chart.getSeriesInIndex([a]))||void 0===r?void 0:r[0]),o?ne(o.valueToPosition(e[0],e[1]),o.getRegion().getLayoutStartPoint(),i):(ge("Please check whether the `seriesId` or `seriesIndex` is set!"),null)}getFunction(e){return QM.instance().getFunction(e)}registerFunction(e,t){e&&t&&QM.instance().registerFunction(e,t)}unregisterFunction(e){e&&QM.instance().unregisterFunction(e)}getFunctionList(){return QM.instance().getFunctionNameList()}setRuntimeSpec(e){this._spec=e,this._updateSpecInfo()}_initChartPlugin(){const e=_n.getChartPlugins();e.length>0&&(this._chartPlugin=new aR(this),this._chartPlugin.load(e.map((e=>new e))),this._chartPluginApply("onInit",this._spec))}_chartPluginApply(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this._chartPlugin&&this._chartPlugin[e]&&this._chartPlugin[e].apply(this._chartPlugin,i)}}cR.InstanceManager=Yi,cR.ThemeManager=Xi,cR.globalConfig={uniqueTooltip:!0},cR.Utils=ZM;function hR(e,t){for(let i=0;i<t.length;i++){const n=t[i],r=dR(e,n.key);r?r.operations=[...new Set(r.operations.concat(n.operations))]:e.push(n)}return e}function dR(e,t){return e.find((e=>e.key===t))}function uR(e,t){var i;if(!e)return null!=t?t:null;const n=e.getFields();return n&&n[t]?null!==(i=n[t].alias)&&void 0!==i?i:t:null!=t?t:null}function pR(e,t,i){const n={};return e.getSeries().forEach((e=>{var r;const s=e.getStackData(),a=e.getStackValue(),o=e.getStackValueField(),l=!i||i(e);s&&o&&l&&(n[a]=null!==(r=n[a])&&void 0!==r?r:{nodes:{}},vR(e,s,n[a],o,t))})),n}function gR(e,t){if("values"in e&&e.values.length){const i=cr(e.values,t),n=lr(e.values,Iw);e.values.forEach((e=>{e[Lw]=i,e[jw]=n,delete e[Fw]}));const r=e.values.reduce(((e,t)=>t[Pw]>e[Pw]?t:e));r[Fw]=!0}else for(const i in e.nodes)gR(e.nodes[i],t)}function fR(e){if(!e.values.length)return;const t=e.values[e.values.length-1][Pw]/2;for(let i=0;i<e.values.length;i++)e.values[i][Rw]=e.values[i][Ow]-t,e.values[i][Dw]=e.values[i][Pw]-t}function mR(e,t,i){if(e.values.length>0){let n=0,r=0,s=1,a=0;const o=e.values.length;for(let i=0;i<o;i++){const s=e.values[t?o-1-i:i];a=s[Pw],a>=0?(s[Ow]=n,n+=s[Pw],s[Pw]=n):(s[Ow]=r,r+=s[Pw],s[Pw]=r)}if(i)for(let i=0;i<o;i++){const l=e.values[t?o-1-i:i];a=l[Pw];const c=a>=0?n:r;s=a>=0?1:-1,l[Mw]=0===c?0:Math.min(1,l[Ow]/c)*s,l[Iw]=0===c?0:Math.min(1,l[Pw]/c)*s}}for(const n in e.nodes)mR(e.nodes[n],t,i)}function vR(e,t,i,n,r){if("values"in t)return r&&t.values.forEach((e=>e[Pw]=function(e){if(L(e))return e;const t=+e;return L(t)?t:0}(e[n]))),i.values.push(...t.values),void i.series.push({s:e,values:t.values});for(const s in t.nodes)!i.nodes[s]&&(i.nodes[s]={values:[],series:[],nodes:{}}),vR(e,t.nodes[s],i.nodes[s],n,r)}_n.registerRegion("region",iC),_n.registerLayout("base",hC),Ok(),s_(),nm.registerGraphic(Vr.group,uu),_n.registerMark(gP.type,gP),Zb.useRegisters([()=>{nm.registerTransform("filter",{transform:MM,markPhase:"beforeJoin"},!0)},()=>{nm.registerTransform("map",{transform:IM,markPhase:"beforeJoin"},!0)}]),Zb.useRegisters([mM,vM,ZP,QP,gM,fM,yM,bM,_M]),Wi(rR.name,rR),u.getInstance(d.Error);const yR=(e,t)=>{const i=t.beforeCall();return e.forEach(((e,n)=>t.call(e,n,i))),i.keyMap&&(i.keyMap.clear(),i.keyMap=null),e};class bR{get hover(){return this._hover}get select(){return this._select}constructor(e,t){this._fields=null,this._marks=new vw,this._markReverse=new vw,this.onHover=e=>{this.filterEventMark(e)?(this._isHovered=!0,this.hoverItem(e)):this._isHovered&&(this._isHovered=!1,this.unhoverItem())},this.onUnHover=e=>{this.filterEventMark(e)||this.interaction.filterEventMark(e,fw.STATE_HOVER)||this.interaction.getEventElement(fw.STATE_HOVER)[0]&&this.unhoverItem()},this.onSelect=e=>{this.handleSingleEventSelect(e)},this.onUnSelect=e=>{this.interaction.filterEventMark(e,fw.STATE_SELECTED)||this.clearSelectedItems()},this._spec=e,this._option=t,this.event=new jr(t.eventDispatcher,t.mode),this.interaction=t.interaction,this.initConfig(t.mode)}setStateKeys(e){this._fields=e.slice()}registerMark(e){this._marks.addMark(e),this._hover.enable&&this.interaction.registerMark(fw.STATE_HOVER,e),this._select.enable&&this.interaction.registerMark(fw.STATE_SELECTED,e)}init(){this.initEvent()}release(){this.releaseEvent(),this._marks.clear()}initEvent(){const e=this.event,{enable:t,trigger:i,triggerOff:n}=this._hover,{enable:r,trigger:s,triggerOff:a}=this._select;t&&(z(i).forEach((t=>{e.on(t,{level:Dr.chart},this.onHover)})),n&&"none"!==n&&z(n).forEach((t=>{e.on(t,{level:Dr.vchart,source:Rr.chart},this.onUnHover)}))),r&&(z(s).forEach((t=>{e.on(t,{level:Dr.mark},this.onSelect)})),a&&"none"!==a&&z(a).forEach((t=>{e.on(t,{level:Dr.mark},this.onUnSelect)})),a||z(null!=a?a:s).forEach((t=>{e.on(t,{level:Dr.vchart},this.onUnSelect)})))}releaseEvent(){this.event.release()}initConfig(e){const t=function(e){return e===n["desktop-browser"]||e===n["desktop-miniApp"]?{hover:{enable:!0,trigger:"pointermove",triggerOff:"pointerleave"},select:{enable:!0,trigger:"pointertap"}}:ue(e)||pe(e)?{hover:{enable:!0,trigger:["pointerdown","pointermove"],triggerOff:"pointerleave"},select:{enable:!0,trigger:"tap"}}:null}(e);this._hover=Object.assign({},null==t?void 0:t.hover),this._select=Object.assign({},null==t?void 0:t.select);const i=this._spec.hover;m(i)?this._hover.enable=i:D(i)&&(this._hover.enable=!0,this._hover=_e(this._hover,i));const r=this._spec.select;m(r)?this._select.enable=r:D(r)&&(this._select.enable=!0,this._select=_e(this._select,r))}hoverItem(e){const{datum:t}=e,i=this.interaction.getEventElement(fw.STATE_HOVER)[0];e.item!==i&&(this.interaction.exchangeEventElement(fw.STATE_HOVER,e.item),this.interaction.reverseEventElement(fw.STATE_HOVER),this.event.emit("hovered",{model:this._option.model,value:[t]}))}unhoverItem(){const e=this.interaction.getEventElementData(fw.STATE_HOVER);this.interaction.clearEventElement(fw.STATE_HOVER,!0),this.event.emit("unhovered",{model:this._option.model,value:e})}handleSingleEventHover(e){this.filterEventMark(e)?this.hoverItem(e):this.interaction.getEventElement(fw.STATE_HOVER)[0]&&!this.interaction.filterEventMark(e,fw.STATE_HOVER)&&this.unhoverItem()}selectItems(e){this.event.emit("selected",{model:this._option.model,value:e})}clearSelectedItems(){const e=this.interaction.getEventElementData(fw.STATE_SELECTED);this.interaction.clearEventElement(fw.STATE_SELECTED,!0),this.event.emit("unselected",{model:this._option.model,value:e})}unselectItems(e){const{triggerOff:t}=this._select;"none"!==t&&(this.interaction.removeEventElement(fw.STATE_SELECTED,e.item),this.event.emit("unselected",{model:this._option.model,value:e.item}))}handleSingleEventSelect(e){if(this.filterEventMark(e))if(e.item.getStates().includes(fw.STATE_SELECTED))this.unselectItems(e);else{"multiple"===this._select.mode?this.interaction.addEventElement(fw.STATE_SELECTED,e.item):this.interaction.exchangeEventElement(fw.STATE_SELECTED,e.item),this.interaction.reverseEventElement(fw.STATE_SELECTED);const t=this.interaction.getEventElementData(fw.STATE_SELECTED);this.selectItems(t)}else this.interaction.filterEventMark(e,fw.STATE_SELECTED)||this.clearSelectedItems()}filterEventMark(e){return!(!e.mark||!this._marks.includes(e.mark))}isDatumEqual(e,t){return(this._fields?this._fields:Object.keys(e)).every((i=>e[i]===t[i]))}}class _R{constructor(){this.activeTriggerSet={mark:new Set,dimension:new Set},this.ignoreTriggerSet={mark:new Set,dimension:new Set}}}const xR=e=>{var t,i;if(!1===(null==e?void 0:e.visible))return[];const n={mark:!1!==(null===(t=null==e?void 0:e.mark)||void 0===t?void 0:t.visible),dimension:!1!==(null===(i=null==e?void 0:e.dimension)||void 0===i?void 0:i.visible)};return x(null==e?void 0:e.activeType)&&Object.keys(n).forEach((t=>{var i;n[t]=null===(i=null==e?void 0:e.activeType)||void 0===i?void 0:i.includes(t)})),Object.keys(n).filter((e=>n[e]))};class SR extends _R{constructor(e){super(),this._getSeriesCacheInfo=()=>{var e,t,i;const{series:n}=this,r=n.getSeriesField();return{seriesFields:x(r)?z(r):null!==(e=n.getSeriesKeys())&&void 0!==e?e:[],dimensionFields:null!==(t=n.getDimensionField())&&void 0!==t?t:[],measureFields:null!==(i=n.getMeasureField())&&void 0!==i?i:[],type:n.type}},this._getDimensionData=e=>{const{dimensionFields:t}=this._seriesCacheInfo;return t[0]&&(null==e?void 0:e[t[0]])},this._getMeasureData=e=>{const{measureFields:t}=this._seriesCacheInfo;return t[0]&&(null==e?void 0:e[t[0]])},this._getSeriesStyle=(e,t,i)=>{var n;for(const r of z(t)){const t=null===(n=this.series.getSeriesStyle(e))||void 0===n?void 0:n(r);if(x(t))return t}return i},this.contentKeyCallback=(e,t)=>{const{dimensionFields:i,seriesFields:n}=this._seriesCacheInfo,r=i[i.length-1];return x(n[0])&&(null==e?void 0:e[n[0]])?null==e?void 0:e[n[0]]:(i.length>1&&(0===n.length||this.series.getSeriesKeys().length),null==e?void 0:e[r])},this.contentValueCallback=(e,t)=>this._getMeasureData(e),this.contentShapeTypeCallback=(e,t)=>{var i;return null!==(i=this._getSeriesStyle(e,"shape",null))&&void 0!==i?i:this._getSeriesStyle(e,"symbolType",this.series.getDefaultShapeType())},this.contentShapeColorCallback=(e,t)=>this._getSeriesStyle(e,["fill","stroke"]),this.titleValueCallback=(e,t)=>this._getDimensionData(e),this.series=e,this.updateTooltipSpec()}updateTooltipSpec(){var e,t,i,n;const r=null!==(t=null===(e=this.series.getSpec())||void 0===e?void 0:e.tooltip)&&void 0!==t?t:{},s=null!==(n=null===(i=this.series.getChart().getSpec())||void 0===i?void 0:i.tooltip)&&void 0!==n?n:{},a=Object.assign(Object.assign({},s),r);["mark","dimension"].forEach((e=>{const t=a[e];x(t)&&(a[e]=Object.assign(Object.assign({},t),{title:x(t.title)?Q(t.title)?t.title:Object.assign(Object.assign({},t.title),{seriesId:this.series.id}):void 0,content:x(t.content)?Q(t.content)?t.content:z(t.content).map((e=>Q(e)?e:Object.assign(Object.assign({},e),{seriesId:this.series.id}))):void 0}))})),this.spec=a,this.activeType=xR(a),this._seriesCacheInfo=this._getSeriesCacheInfo()}getDefaultTooltipPattern(e,t){if("mark"===e)return{visible:!0,activeType:e,title:{key:void 0,value:this.titleValueCallback,hasShape:!1},content:[{seriesId:this.series.id,key:this.contentKeyCallback,value:this.contentValueCallback,hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1}]};if("dimension"===e&&t){const i={key:void 0,value:this._getDimensionData,hasShape:!1},n=[];return t.forEach((e=>{let{data:t}=e;return t.forEach((e=>{let{series:t}=e;n.push({seriesId:t.id,key:this.contentKeyCallback,value:this.contentValueCallback,hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1})}))})),{visible:!0,activeType:e,title:i,content:n}}return null}}const wR={min:e=>e.length?U(e.map((e=>1*e))):0,max:e=>e.length?V(e.map((e=>1*e))):0,"array-min":e=>e.length?U(e.map((e=>1*e))):0,"array-max":e=>e.length?V(e.map((e=>1*e))):0,values:e=>{const t={},i=[];for(const n of e)t[n]||(i.push(n),t[n]=1);return i}},CR=(e,t)=>{var i,n;let r=t.fields;if(Q(r)&&(r=r()),!(null==r?void 0:r.length)||!(null==e?void 0:e.length))return{};r=hR([],r);const s="parser"===t.target?"parserData":"latestData",a=e[0][s]?e[0][s]:e||[],o=null===(n=(i=e[0]).getFields)||void 0===n?void 0:n.call(i);return kR(a,r,o)},kR=(e,t,i)=>{const n={};let r=[],s=[];return t.forEach((t=>{const a=t.key;n[a]={};const o=null==i?void 0:i[a],l=t.operations,c=l.some((e=>"min"===e||"max"===e||"allValid"===e));let h=!0;r.length=0,e.forEach((e=>{e&&r.push(e[a])}));const d=r.length;if(c){s.length=0,r.forEach(((e,t)=>{q(e)&&s.push(e)}));const e=r;r=s,s=e,h=r.length===d}else r=l.some((e=>"array-min"===e||"array-max"===e))?r.reduce(((e,t)=>(t&&t.forEach((t=>{q(t)&&e.push(t)})),e)),[]):r.filter((e=>void 0!==e));l.forEach((e=>{if(t.customize)n[a][e]=t.customize;else{if(o&&o.lockStatisticsByDomain&&!P(o.domain)){if("values"===e)return void(n[a][e]=o.domain.slice())}else if("allValid"===e)return;n[a][e]=wR[e](r),"array-max"===e&&(n[a].max=n[a][e]),"array-min"===e&&(n[a].min=n[a][e])}})),c&&(n[a].allValid=h)})),n},AR=(e,t)=>{const{config:i}=t;if(!i)return e;const{invalidType:n,checkField:r}=i();return"zero"!==n||e.forEach((e=>{q(e[r])||(e[r]=0)})),e};class ER extends _k{_compileProduct(){var e;const t=null===(e=this._data)||void 0===e?void 0:e.latestData;P(t)||x(this.getProduct())||this._initProduct([])}generateProductId(){var e;return null===(e=this._data)||void 0===e?void 0:e.name}}const TR="".concat(Ge,"_HIERARCHY_DEPTH"),OR="".concat(Ge,"_HIERARCHY_ROOT"),PR="".concat(Ge,"_HIERARCHY_ROOT_INDEX");function MR(){return{keyMap:new Map,needDefaultSeriesField:!this._seriesField,defaultSeriesField:this._seriesField?null:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey)}}function IR(e,t,i){e&&(i.needDefaultSeriesField&&(e[Aw]=i.defaultSeriesField),e[Cw]=t,e[kw]=i.getKey(e,t,i))}function RR(){return{keyMap:new Map,needDefaultSeriesField:!0,defaultSeriesField:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey),categoryField:this.getCategoryField()}}function DR(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;void 0===s&&(s=t),IR(e,t,i),e[TR]=n,e[OR]=r||e[i.categoryField],e[PR]=s,e.children&&e.children.length&&e.children.forEach(((t,n)=>DR(t,n,i,e[TR]+1,e[OR],s)))}const LR=["appear","enter","update","exit","disappear","normal"];function jR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const n={};for(let r=0;r<LR.length;r++){const s=LR[r],a=t?t[s]:void 0;if(!1===a)continue;if("normal"===s){a&&(n.normal=a);continue}if("update"!==s&&!a&&!e[s])continue;let o,l;o=v(e[s])?e[s]:[Object.assign(Object.assign({},xM[s]),e[s])],"exit"===s&&o.forEach((e=>{e.controlOptions={stopWhenStateChange:!0}})),a?(l=v(a)?a.map(((e,t)=>{var n;let r=e;return HR(r)&&delete r.type,r.oneByOne&&(r=BR(r,null!==(n=null==i?void 0:i.dataIndex)&&void 0!==n?n:NR,null==i?void 0:i.dataCount)),r})):o.map(((e,t)=>{var n;let r=_e({},o[t],a);return HR(r)&&delete r.type,r.oneByOne&&(r=BR(r,null!==(n=null==i?void 0:i.dataIndex)&&void 0!==n?n:NR,null==i?void 0:i.dataCount)),r})),n[s]=l):n[s]=o}return n.state=n.update,n}function FR(e,t,i){var n,r,s,a,o;const l={};return t.animationAppear&&(l.appear=null!==(n=t.animationAppear[e])&&void 0!==n?n:t.animationAppear),t.animationDisappear&&(l.disappear=null!==(r=t.animationDisappear[e])&&void 0!==r?r:t.animationDisappear),t.animationEnter&&(l.enter=null!==(s=t.animationEnter[e])&&void 0!==s?s:t.animationEnter),t.animationExit&&(l.exit=null!==(a=t.animationExit[e])&&void 0!==a?a:t.animationExit),t.animationUpdate&&(l.update=null!==(o=t.animationUpdate[e])&&void 0!==o?o:t.animationUpdate),t.animationNormal&&t.animationNormal[e]&&(l.normal=t.animationNormal[e]),function(e,t){return e?(VR(e=S(e),(e=>{var i;return Q(e)&&(null===(i=e.prototype)||void 0===i?void 0:i.constructor)!==e?function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e(...n,t)}:e})),e):e}(l,i)}function BR(e,t,i){const{oneByOne:n,duration:r,delay:s,delayAfter:a}=e;return e.delay=(e,i,a)=>{const o=t(e),l=Q(r)?r(e,i,a):L(r)?r:0,c=Q(s)?s(e,i,a):L(s)?s:0;let h=Q(n)?n(e,i,a):n;return!1===h?c:(h=!0===h?0:h,c+o*(l+h))},e.delayAfter=(e,s,o)=>{const l=t(e),c=Q(r)?r(e,s,o):L(r)?r:0,h=Q(a)?a(e,s,o):L(a)?a:0;let d=Q(n)?n(e,s,o):n;return!1===d?h:(d=!0===d?0:d,h+((i?i():s.mark.elements.length)-l)*(c+d))},delete e.oneByOne,e}function NR(e){return null==e?void 0:e[Cw]}function zR(e,t){var i,n,r,s,a;if(!1===e.animation)return!1;if(!1===(null===(i=e.morph)||void 0===i?void 0:i.enable))return!1;const o=!1!==(null!==(r=null===(n=e.animationAppear)||void 0===n?void 0:n[t])&&void 0!==r?r:e.animationAppear),l=!1!==(null!==(a=null===(s=e.animationUpdate)||void 0===s?void 0:s[t])&&void 0!==a?a:e.animationUpdate);return!(!o||!l)}function HR(e){return!function(e){return x(e.timeSlices)}(e)&&x(e.channel)}function VR(e,t){if(v(e))e.forEach(((i,n)=>{e[n]=t(e[n],n),VR(e[n],t)}));else if(D(e))for(const i in e)e[i]=t(e[i],i),VR(e[i],t)}class UR extends Zw{constructor(){super(...arguments),this.markLabelSpec={}}getLabelSpec(e){return this.markLabelSpec[e]}setLabelSpec(e,t){this.markLabelSpec[e]=z(t)}addLabelSpec(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.markLabelSpec[e]||(this.markLabelSpec[e]=[]),i?this.markLabelSpec[e].unshift(t):this.markLabelSpec[e].push(t)}getTheme(e,t){var i;const n=zt(e),r=null===(i=this._option)||void 0===i?void 0:i.getTheme(),{markByName:s,mark:a}=r,o=this._option.type;return _e({},ji(Br(r,"series.".concat(o)),o,a,s),ji(Br(r,"series.".concat(o,"_").concat(n)),"".concat(o,"_").concat(n),a,s))}transformSpec(e,t,i){const n=super.transformSpec(e,t,i);return this._transformLabelSpec(n.spec),Object.assign(Object.assign({},n),{markLabelSpec:this.markLabelSpec})}_transformLabelSpec(e){}_addMarkLabelSpec(e,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"initLabelMarkStyle",n=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;const s=null==e?void 0:e[arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label"];(null==s?void 0:s.visible)&&this.addLabelSpec(t,Object.assign(Object.assign({animation:null!=n?n:e.animation},s),{getStyleHandler:e=>{var t;return null===(t=e[i])||void 0===t?void 0:t.bind(e)}}),r)}_getDefaultSpecFromChart(e){var t;const i=null!==(t=super._getDefaultSpecFromChart(e))&&void 0!==t?t:{},{outerRadius:n,innerRadius:r}=e;return x(n)&&(i.outerRadius=n),x(r)&&(i.innerRadius=r),Object.keys(i).length>0?i:void 0}}class WR extends $w{getTrigger(){return this._trigger}getRegion(){return this._region}getLayoutStartPoint(){return this._region.getLayoutStartPoint()}getRootMark(){return this._rootMark}getRawData(){return this._rawData}getViewDataFilter(){return this._viewDataFilter}getViewData(){var e;return null===(e=this._data)||void 0===e?void 0:e.getDataView()}getViewDataProductId(){var e;return null===(e=this._data)||void 0===e?void 0:e.getProductId()}getViewDataStatistics(){return this._viewDataStatistics}getViewStackData(){return this._viewStackData}getSeriesField(){return this._seriesField}setSeriesField(e){x(e)&&(this._seriesField=e,this.getMarks().filter((e=>e.getDataView()===this.getViewData())).forEach((e=>{e.setFacet(this._seriesField)})))}getGroups(){return this._groups}getStack(){return this._stack}getStackValue(){var e;return null!==(e=this._spec.stackValue)&&void 0!==e?e:"".concat(Ge,"_series_").concat(this.type)}getPercent(){return this._percent}getStackOffsetSilhouette(){return this._stackOffsetSilhouette}get tooltipHelper(){return this._tooltipHelper||this.initTooltip(),this._tooltipHelper}getInvalidType(){return this._invalidType}setInvalidType(e){var t;this._invalidType=e,null===(t=this.getViewData())||void 0===t||t.reRunAllTransform()}getMarkAttributeContext(){return this._markAttributeContext}constructor(e,t){var i;super(e,t),this.specKey="series",this.type="series",this.layoutType="absolute",this.modelType="series",this.name=void 0,this.transformerConstructor=UR,this.coordinate="none",this._region=null,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:null,height:null},this.getLayoutRect=()=>{var e,t;return{width:null!==(e=this._layoutRect.width)&&void 0!==e?e:this._region.getLayoutRect().width,height:null!==(t=this._layoutRect.height)&&void 0!==t?t:this._region.getLayoutRect().height}},this._rootMark=null,this._seriesMark=null,this._viewDataMap=new Map,this._viewDataFilter=null,this._data=null,this._percent=!1,this._stackOffsetSilhouette=!1,this.layoutZIndex=0,this._invalidType="break",this._getInvalidDefined=e=>q(e[this.getStackValueField()]),this._region=t.region,this._dataSet=t.dataSet,(null===(i=this._spec)||void 0===i?void 0:i.name)&&(this.name=this._spec.name)}created(){super.created(),this._buildMarkAttributeContext(),this.initData(),this.initGroups(),this.initStatisticalData(),this.event.emit(Ir.afterInitData,{model:this}),this.initTrigger(),this.initRootMark(),this.initMark();const e=function(e){return!1!==e.getSpec().animation&&x(e.getRegion().animate)}(this);this._initExtensionMark({hasAnimation:e}),this.initMarkStyle(),this.initMarkState(),e&&this.initAnimation(),this.afterInitMark(),this.initEvent(),this.event.emit(Ir.afterInitEvent,{model:this})}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(e,t)=>{var i;return null===(i=this._option.globalScale.getScale(e))||void 0===i?void 0:i.scale(t)},seriesColor:e=>{var t;return P(e)&&(e=this.getSeriesKeys()[0]),null===(t=this._option.globalScale.getScale("color"))||void 0===t?void 0:t.scale(e)},getRegion:()=>this._region}}setAttrFromSpec(){super.setAttrFromSpec(),this.setSeriesField(this._spec.seriesField),m(this._spec.stack)&&(this._stack=this._spec.stack),m(this._spec.percent)&&(this._percent=this._spec.percent,this._stack=this._spec.percent||this._stack),m(this._spec.stackOffsetSilhouette)&&(this._stackOffsetSilhouette=this._spec.stackOffsetSilhouette,this._stack=this._spec.stackOffsetSilhouette||this._stack),x(this._spec.stackValue)&&(this._stack=!0),P(this._stack)&&this._supportStack&&this._seriesField&&(this._stack=!0),x(this._spec.invalidType)&&(this._invalidType=this._spec.invalidType)}initData(){var e,t,i,n,r,s;const a=null!==(e=this._spec.data)&&void 0!==e?e:this._option.getSeriesData(this._spec.dataId,this._spec.dataIndex);if(a&&(this._rawData=xo(a,this._dataSet,this._option.sourceDataList,{onError:null===(t=this._option)||void 0===t?void 0:t.onError})),null===(n=null===(i=this._rawData)||void 0===i?void 0:i.target)||void 0===n||n.addListener("change",this.rawDataUpdate.bind(this)),this._addDataIndexAndKey(),this._rawData){this._stack&&(this._viewDataFilter=_o(this._rawData,this._dataSet,{name:"".concat(this.type,"_").concat(this.id,"_viewDataFilter")}));const e=_o(this._stack?this._viewDataFilter:this._rawData,this._dataSet,{name:"".concat(this.type,"_").concat(this.id,"_viewData")});this._data=new ER(this._option,e),this._stack&&this._viewDataFilter.target.removeListener("change",e.reRunAllTransform)}"zero"===this._invalidType&&(null===(r=this._rawData)||void 0===r?void 0:r.dataSet)&&(uo(this._rawData.dataSet,"invalidTravel",AR),null===(s=this._rawData)||void 0===s||s.transform({type:"invalidTravel",options:{config:()=>({invalidType:this._invalidType,checkField:this.getStackValueField()})}},!1))}initGroups(){const e=this.getGroupFields();e&&e.length&&(this._groups={fields:e})}initStatisticalData(){this._data&&this._statisticViewData()}getRawDataStatisticsByField(e,t){var i,n;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[e])if(this._viewDataStatistics&&(!this._viewDataFilter||this._viewDataFilter.transformsArr.length<=1)&&this.getViewData().transformsArr.length<=1&&(null===(i=this._viewDataStatistics.latestData)||void 0===i?void 0:i[e]))this._rawStatisticsCache[e]=this._viewDataStatistics.latestData[e];else if(this._rawData){const i=null===(n=this._rawData.getFields())||void 0===n?void 0:n[e];i&&i.lockStatisticsByDomain&&i.domain?(this._rawStatisticsCache[e]={},t?(this._rawStatisticsCache[e].min=U(i.domain),this._rawStatisticsCache[e].max=V(i.domain)):this._rawStatisticsCache[e].values=i.domain):this._rawStatisticsCache[e]=kR(this._rawData.latestData,[{key:e,operations:t?["min","max"]:["values"]}])[e]}return t&&(P(this._rawStatisticsCache[e].min)||P(this._rawStatisticsCache[e].max))&&(this._rawStatisticsCache[e].min=U(this._rawStatisticsCache[e].values),this._rawStatisticsCache[e].max=V(this._rawStatisticsCache[e].values)),this._rawStatisticsCache[e]}_statisticViewData(){uo(this._dataSet,"dimensionStatistics",CR);const e="".concat(this.type,"_").concat(this.id,"_viewDataStatic");this._viewDataStatistics=new R(this._dataSet,{name:e}),this._viewDataStatistics.parse([this._data.getDataView()],{type:"dataview"}),this._viewDataStatistics.transform({type:"dimensionStatistics",options:{fields:()=>{const e=this.getStatisticFields();return this._seriesField&&hR(e,[{key:this._seriesField,operations:["values"]}]),e},target:"latest"}},!1),this._data.getDataView().target.removeListener("change",this._viewDataStatistics.reRunAllTransform),this._stack&&this.createdStackData()}createStatisticalData(e,t,i){uo(this._dataSet,"dimensionStatistics",CR);const n=new R(this._dataSet,{name:e});return n.parse([t],{type:"dataview"}),n.transform({type:"dimensionStatistics",options:{operations:["max","min","values"],fields:()=>{var e;const n=hR(this.getStatisticFields(),null!==(e=null==i?void 0:i(t.name))&&void 0!==e?e:[]);return this._seriesField&&hR(n,[{key:this._seriesField,operations:["values"]}]),n},target:"latest"}},!1),n}createdStackData(){const e="".concat(this.type,"_").concat(this.id,"_viewStackData");this._viewStackData=new R(this._dataSet,{name:e}),this._viewStackData.parse([this._viewDataFilter],{type:"dataview"}),this._viewStackData.transform({type:"stackSplit",options:{fields:this.getStackGroupFields()}},!1)}_noAnimationDataKey(e,t){return t}generateDefaultDataKey(e){var t;return P(e)?(e,t,i)=>{if(!1===this._spec.animation){const i=this._noAnimationDataKey(e,t);if(void 0!==i)return i}const{keyMap:n}=i,r=this._getSeriesDataKey(e);return void 0===n.get(r)?(n.set(r,0),r):(n.set(r,n.get(r)+1),"".concat(r,"_").concat(n.get(r)))}:_(e)?t=>t[e]:v(e)&&e.every((e=>_(e)))?t=>e.map((e=>t[e])).join("-"):Q(e)?(t,i)=>e(t,i):(null===(t=this._option)||void 0===t||t.onError("invalid dataKey: ".concat(e)),(e,t)=>{})}_addDataIndexAndKey(){var e;(null===(e=this._rawData)||void 0===e?void 0:e.dataSet)&&(uo(this._rawData.dataSet,"addVChartProperty",yR),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:MR.bind(this),call:IR}},!1))}updateRawData(e){this._rawData&&this._rawData.updateRawData(e)}rawDataUpdate(e){var t;null===(t=this._rawDataStatistics)||void 0===t||t.reRunAllTransform(),this._rawStatisticsCache=null,this.event.emit(Ir.rawDataUpdate,{model:this})}viewDataFilterOver(e){this.event.emit(Ir.viewDataFilterOver,{model:this})}viewDataUpdate(e){var t;this.event.emit(Ir.viewDataUpdate,{model:this}),null===(t=this._data)||void 0===t||t.updateData(),this._viewDataStatistics&&this._viewDataStatistics.reRunAllTransform()}viewDataStatisticsUpdate(e){this.event.emit(Ir.viewDataStatisticsUpdate,{model:this})}getDatumPositionValue(e,t){return!e||P(t)?null:e[t]}getDatumPositionValues(e,t){return!e||P(t)?[]:_(t)?[e[t]]:t.map((t=>e[t]))}setValueFieldToStack(){}setValueFieldToPercent(){}setValueFieldToStackOffsetSilhouette(){}initRootMark(){var e,t;this._rootMark=this._createMark({type:"group",name:"seriesGroup_".concat(this.type,"_").concat(this.id)},{parent:null===(t=(e=this._region).getGroupMark)||void 0===t?void 0:t.call(e),dataView:!1}),this._rootMark.setZIndex(this.layoutZIndex)}_initExtensionMark(e){var t;this._spec.extensionMark&&(null===(t=this._spec.extensionMark)||void 0===t||t.forEach(((t,i)=>{this._createExtensionMark(t,null,"".concat(Ge,"_series_").concat(this.id,"_extensionMark"),i,e)})))}_createExtensionMark(e,t,i,n,r){var s;const a=this._createMark({type:e.type,name:"".concat(i,"_").concat(n)},{skipBeforeLayouted:!0,markSpec:e,parent:t,dataView:!1,customShape:null==e?void 0:e.customShape});if(a){if(r.hasAnimation){const t=jR({},FR(e.type,e,this._markAttributeContext));a.setAnimationConfig(t)}if("group"===e.type)i="".concat(i,"_").concat(n),null===(s=e.children)||void 0===s||s.forEach(((e,t)=>{this._createExtensionMark(e,a,i,t,r)}));else if(!(t||P(e.dataId)&&P(e.dataIndex))){const t=this._option.getSeriesData(e.dataId,e.dataIndex);t===this._rawData?a.setDataView(this.getViewData(),this.getViewDataProductId()):a.setDataView(t)}}}_updateExtensionMarkSpec(e){var t;null===(t=this._spec.extensionMark)||void 0===t||t.forEach(((t,i)=>{var n;const r=this._marks.getMarkWithInfo({name:"".concat(this.type,"_").concat(this.id,"_extensionMark_").concat(i)});r&&(e&&ty(null===(n=e.extensionMark)||void 0===n?void 0:n[i],t)||(this.initMarkStyleWithSpec(r,t),r.updateStaticEncode(),r.updateLayoutState()))}))}getStackData(){var e;return null===(e=this._viewStackData)||void 0===e?void 0:e.latestData}initTrigger(){const e={hover:this._spec.hover,select:this._spec.select},t=Object.assign(Object.assign({},this._option),{model:this,interaction:this._region.interaction});this._trigger=new bR(e,t)}initAnimation(){}initMarkState(){this.initSeriesStyleState()}initSeriesStyleState(){var e;const t=this._spec.seriesStyle;if(!t||!t.length)return;const i=null!==(e=this._seriesField)&&void 0!==e?e:Aw;this.getMarksWithoutRoot().forEach((e=>{const n={},r={},s={};t.forEach((t=>{var i;const a=null===(i=t[e.name])||void 0===i?void 0:i.style;a&&(n[t.name]=!0,s[t.name]=s[t.name]||{},Object.keys(a).forEach((e=>{r[e]=!0,s[t.name][e]=a[e]})))})),e.state.addStateInfo({stateValue:Ew,level:-1,filter:e=>Array.isArray(e)?0!==e.length&&!0===n[e[0][i]]:!0===n[e[i]]});const a={};Object.keys(r).forEach((t=>{a[t]=n=>{var r,a;let o;if(Array.isArray(n)){if(0===n.length)return;o=null===(r=s[n[0][i]])||void 0===r?void 0:r[t]}return o=null===(a=s[n[i]])||void 0===a?void 0:a[t],o||e.getAttribute(t,n)}})),this.setMarkStyle(e,a,Ew)}))}afterInitMark(){var e,t,i;this.event.emit(Ir.afterInitMark,{model:this}),this.setSeriesField(this._spec.seriesField);let n=null!==(e=this._spec.animationThreshold)&&void 0!==e?e:Number.MAX_SAFE_INTEGER;this.getMarks().forEach((e=>{var t,i;(null===(i=null===(t=e.stateStyle)||void 0===t?void 0:t.normal)||void 0===i?void 0:i.lineWidth)&&e.setAttribute("stroke",this.getColorAttribute(),"normal",Tw.Base_Series);const r=e.getProgressiveConfig();r&&(r.large&&r.largeThreshold&&(n=Math.min(n,r.largeThreshold)),r.progressiveThreshold&&(n=Math.min(n,r.progressiveThreshold)))})),(null===(i=null===(t=this._rawData)||void 0===t?void 0:t.latestData)||void 0===i?void 0:i.length)>=n&&(this._spec.animation=!1)}getMarksWithoutRoot(){return this.getMarks().filter((e=>!e.name.includes("seriesGroup")))}getMarksInType(e){return this._marks.getMarksInType(e)}getMarkInName(e){return this._marks.get(e)}getMarkInId(e){return this.getMarks().find((t=>t.id===e))}initEvent(){var e,t,i;this._trigger.init(),null===(t=null===(e=this._data)||void 0===e?void 0:e.getDataView())||void 0===t||t.target.addListener("change",this.viewDataUpdate.bind(this)),null===(i=this._viewDataStatistics)||void 0===i||i.target.addListener("change",this.viewDataStatisticsUpdate.bind(this))}_releaseEvent(){super._releaseEvent(),this._trigger.release()}initTooltip(){this._tooltipHelper=new SR(this)}_compareSpec(e,t,i){var n,r;const s=super._compareSpec(e,t),a=Object.keys(t||{}).sort();return ty(a,Object.keys(e||{}).sort())?((i=null!=i?i:{data:!0}).invalidType=!0,e.invalidType!==t.invalidType&&(s.reCompile=!0),i.extensionMark=!0,(z(e.extensionMark).length!==z(t.extensionMark).length||(null===(n=t.extensionMark)||void 0===n?void 0:n.some(((t,i)=>t.type!==e.extensionMark[i].type||t.id!==e.extensionMark[i].id))))&&(s.reMake=!0),s.reMake?s:((null===(r=t.extensionMark)||void 0===r?void 0:r.some(((t,i)=>t.visible!==e.extensionMark[i].visible)))&&(s.reCompile=!0),this._marks.getMarks().some((n=>{var r,s;return i[n.name]=!0,(null===(r=t[n.name])||void 0===r?void 0:r.visible)!==(null===(s=e[n.name])||void 0===s?void 0:s.visible)}))&&(s.reCompile=!0),a.some((n=>!i[n]&&!ty(e[n],t[n])))?(s.reMake=!0,s):s)):(s.reMake=!0,s)}_updateSpecData(){!this._rawData||!this._spec.data||this._spec.data instanceof R||So(this._rawData,this._spec.data,!0)}reInit(e){super.reInit(e);const t=this.getMarksWithoutRoot();t.forEach((e=>{this._spec[e.name]&&this.initMarkStyleWithSpec(e,this._spec[e.name])})),this.initMarkStyle(),t.forEach((e=>{e.updateStaticEncode(),e.updateLayoutState(!0)})),this._updateExtensionMarkSpec(e),this._updateSpecData(),this._tooltipHelper&&this._tooltipHelper.updateTooltipSpec()}onEvaluateEnd(e){this._data.updateData()}onRender(e){}release(){var e,t,i;super.release(),this._viewDataMap.clear();const n=null===(t=null===(e=this._rawData)||void 0===e?void 0:e.transformsArr)||void 0===t?void 0:t.findIndex((e=>"addVChartProperty"===e.type));n>=0&&this._rawData.transformsArr.splice(n,1),null===(i=this._data)||void 0===i||i.release(),this._dataSet=this._data=this._rawData=this._rawDataStatistics=this._spec=this._region=this._viewDataStatistics=this._viewStackData=null}setLayoutStartPosition(e){L(e.x)&&(this._layoutStartPoint.x=e.x),L(e.y)&&(this._layoutStartPoint.y=e.y)}setLayoutRect(e,t){let{width:i,height:n}=e;L(i)&&(this._layoutRect.width=i),L(n)&&(this._layoutRect.height=n)}getSeriesKeys(){var e,t;return this._seriesField?null!==(t=null===(e=this.getRawDataStatisticsByField(this._seriesField))||void 0===e?void 0:e.values)&&void 0!==t?t:[]:this.name?[this.name]:this.userId?["".concat(this.userId)]:["".concat(this.type,"_").concat(this.id)]}getSeriesStyle(e){return t=>{var i,n;return null!==(n=null===(i=this._seriesMark)||void 0===i?void 0:i.getAttribute(t,e))&&void 0!==n?n:void 0}}_getSeriesInfo(e,t){const i=this.getDefaultShapeType();return t.map((t=>({key:t,style:this.getSeriesStyle({[e]:t}),shapeType:i})))}getSeriesInfoInField(e){var t,i;return this._getSeriesInfo(e,null!==(i=null===(t=this.getRawDataStatisticsByField(e))||void 0===t?void 0:t.values)&&void 0!==i?i:[])}getSeriesInfoList(){var e;return this._getSeriesInfo(null!==(e=this._seriesField)&&void 0!==e?e:Aw,this.getSeriesKeys())}_getDefaultColorScale(){var e,t;const i=this.getDefaultColorDomain(),n=this._getDataScheme();return null===(t=(e=(new uk).domain(i)).range)||void 0===t?void 0:t.call(e,n)}_getDataScheme(){return Ut(this.getColorScheme(),this.type)}getDefaultColorDomain(){var e,t;return this._seriesField?null===(t=null===(e=this.getViewDataStatistics())||void 0===e?void 0:e.latestData[this._seriesField])||void 0===t?void 0:t.values:[]}getColorAttribute(){var e,t;return{scale:null!==(e=this._option.globalScale.getScale("color"))&&void 0!==e?e:this._getDefaultColorScale(),field:null!==(t=this._seriesField)&&void 0!==t?t:Aw}}getDimensionField(){return[]}getMeasureField(){return[]}onMarkPositionUpdate(){this.onMarkTreePositionUpdate(this.getMarksWithoutRoot())}onMarkTreePositionUpdate(e){}_createMark(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i,n,r,s;const{key:a,groupKey:o,skipBeforeLayouted:l,themeSpec:c={},markSpec:h,dataView:d,dataProductId:u,parent:p,isSeriesMark:g,depend:f,progressive:v,support3d:y=this._spec.support3d||!!this._spec.zField,morph:b=!1,customShape:_}=t,S=super._createMark(e,{key:null!=a?a:this._getDataIdKey(),support3d:y,seriesId:this.id,attributeContext:this._markAttributeContext});if(x(S)){this._marks.addMark(S,{name:e.name}),g&&(this._seriesMark=S),P(p)?null===(i=this._rootMark)||void 0===i||i.addMark(S):!1!==p&&p.addMark(S),P(d)?(S.setDataView(this.getViewData(),this.getViewDataProductId()),S.setSkipBeforeLayouted(!0)):!1!==d&&S.setDataView(d,u),m(l)&&S.setSkipBeforeLayouted(l),x(f)&&S.setDepend(...z(f));const a=this.getSpec()||{};S.setMorph(b),S.setMorphKey((null===(n=a.morph)||void 0===n?void 0:n.morphKey)||"".concat(this._specIndex)),S.setMorphElementKey(null!==(s=null===(r=a.morph)||void 0===r?void 0:r.morphElementKey)&&void 0!==s?s:t.defaultMorphElementKey),P(v)||S.setProgressiveConfig(v),P(o)||S.setGroupKey(o),_&&S.setCustomizedShapeCallback(_),this.initMarkStyleWithSpec(S,_e({},c,h||a[S.name]))}return S}_getDataIdKey(){var e;return null!==(e=super._getDataIdKey())&&void 0!==e?e:kw}_getSeriesDataKey(e){let t="";if(!e)return t;const i=this.getDimensionField();t=i.map((t=>e[t])).join("_");const n=this.getSeriesField();return n&&!i.includes(n)&&(t+="_".concat(e[n])),t}addViewDataFilter(e){var t,i;null===(i=null!==(t=this._viewDataFilter)&&void 0!==t?t:this.getViewData())||void 0===i||i.transform(e,!1)}reFilterViewData(){var e,t;null===(t=null!==(e=this._viewDataFilter)&&void 0!==e?e:this.getViewData())||void 0===t||t.reRunAllTransform()}reTransformViewData(){var e,t;null===(t=null===(e=this._data)||void 0===e?void 0:e.getDataView())||void 0===t||t.reRunAllTransform()}fillData(){var e;null===(e=this.getRawData())||void 0===e||e.reRunAllTransform()}compile(){this.compileData()}getDefaultShapeType(){return"circle"}getFieldAlias(e){var t;return e!==Pw&&e!==Iw&&e!==Ow&&e!==Mw||(e=this.getStackValueField()),null!==(t=uR(this.getRawData(),e))&&void 0!==t?t:e}getMarkInfoList(){var e;const t=super.getMarkInfoList();return t.length?t:Object.values(null!==(e=Ri[this.type])&&void 0!==e?e:{})}_getInvalidConnectType(){return"zero"===this._invalidType?"zero":"link"===this._invalidType?"connect":"none"}}function GR(e,t,i){const n=e.getScale(0),r="isInverse"in e&&e.isInverse();Cn(n.type)?i.sort(((e,i)=>(e[t]-i[t])*(r?-1:1))):i.sort(((e,i)=>(n._index.get(e[t])-n._index.get(i[t]))*(r?-1:1)))}function KR(e){return{dataIndex:t=>{var i,n;const r="horizontal"===e.direction?e.fieldY[0]:e.fieldX[0],s=null==t?void 0:t[r],a="horizontal"===e.direction?e.scaleY:e.scaleX;return(null!==(n=null===(i=null==a?void 0:a.domain)||void 0===i?void 0:i.call(a))&&void 0!==n?n:[]).indexOf(s)||0},dataCount:()=>{var t,i,n;const r="horizontal"===e.direction?e.scaleY:e.scaleX;return null!==(n=(null!==(i=null===(t=null==r?void 0:r.domain)||void 0===t?void 0:t.call(r))&&void 0!==i?i:[]).length)&&void 0!==n?n:0}}}WR.mark=qt,WR.transformerConstructor=UR;class YR extends WR{constructor(){super(...arguments),this.coordinate="cartesian",this._bandPosition=.5,this._scaleConfig={bandPosition:this._bandPosition},this._direction="vertical",this._sortDataByAxis=!1,this._getInvalidDefined=e=>{var t,i;return!((null===(t=this._xAxisHelper)||void 0===t?void 0:t.isContinuous)&&!q(e[this._specXField[0]]))&&!((null===(i=this._yAxisHelper)||void 0===i?void 0:i.isContinuous)&&!q(e[this._specYField[0]]))}}_buildScaleConfig(){this._scaleConfig={bandPosition:this._bandPosition}}get fieldX(){return this._fieldX}setFieldX(e){this._fieldX=z(e)}get fieldY(){return this._fieldY}setFieldY(e){this._fieldY=z(e)}get fieldZ(){return this._fieldZ}setFieldZ(e){this._fieldZ=e&&z(e)}get fieldX2(){return this._fieldX2}setFieldX2(e){this._fieldX2=e}get fieldY2(){return this._fieldY2}setFieldY2(e){this._fieldY2=e}get direction(){return this._direction}get scaleX(){return this._scaleX}setScaleX(e){this._scaleX=e}get scaleY(){return this._scaleY}setScaleY(e){this._scaleY=e}get scaleZ(){return this._scaleZ}setScaleZ(e){this._scaleZ=e}getXAxisHelper(){return this._xAxisHelper}setXAxisHelper(e){this._xAxisHelper=e,this.onXAxisHelperUpdate()}getYAxisHelper(){return this._yAxisHelper}setYAxisHelper(e){this._yAxisHelper=e,this.onYAxisHelperUpdate()}getZAxisHelper(){return this._zAxisHelper}setZAxisHelper(e){this._zAxisHelper=e,this.onYAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}getStatisticFields(){var e,t,i;const n=[];return(null===(e=this.getXAxisHelper())||void 0===e?void 0:e.getScale)&&(this._fieldX2?[...this._fieldX,this._fieldX2]:this._fieldX).forEach((e=>{const t={key:e,operations:[]};Cn(this.getXAxisHelper().getScale(0).type)?t.operations=["max","min"]:t.operations=["values"],n.push(t)})),(null===(t=this.getYAxisHelper())||void 0===t?void 0:t.getScale)&&(this._fieldY2?[...this._fieldY,this._fieldY2]:this._fieldY).forEach((e=>{const t={key:e,operations:[]};Cn(this.getYAxisHelper().getScale(0).type)?t.operations=["max","min"]:t.operations=["values"],n.push(t)})),this._fieldZ&&(null===(i=this.getZAxisHelper())||void 0===i?void 0:i.getScale)&&this._fieldZ.forEach((e=>{const t={key:e,operations:[]};Cn(this.getZAxisHelper().getScale(0).type)?t.operations=["max","min"]:t.operations=["values"],n.push(t)})),this.getStack()&&n.push({key:this.getStackValueField(),operations:["allValid"]}),n}getGroupFields(){return"vertical"===this.direction?this._fieldX:this._fieldY}getStackGroupFields(){return this.getGroupFields()}getStackValue(){var e;return null!==(e=this._spec.stackValue)&&void 0!==e?e:"".concat(Ge,"_series_").concat(this.type,"_").concat(("horizontal"===this.direction?this.getXAxisHelper():this.getYAxisHelper()).getAxisId())}getStackValueField(){return"vertical"===this.direction?z(this._spec.yField)[0]:z(this._spec.xField)[0]}setValueFieldToStack(){"vertical"===this.direction?(this.setFieldY(Pw),this.setFieldY2(Ow)):(this.setFieldX(Pw),this.setFieldX2(Ow))}setValueFieldToPercent(){"vertical"===this.direction?(this.setFieldY(Iw),this.setFieldY2(Mw)):(this.setFieldX(Iw),this.setFieldX2(Mw))}setValueFieldToStackOffsetSilhouette(){"vertical"===this.direction?(this.setFieldY(Dw),this.setFieldY2(Rw)):(this.setFieldX(Dw),this.setFieldX2(Rw))}onXAxisHelperUpdate(){this.onMarkPositionUpdate()}onYAxisHelperUpdate(){this.onMarkPositionUpdate()}onZAxisHelperUpdate(){this.onMarkPositionUpdate()}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this.setFieldX(this._spec.xField),this.setFieldY(this._spec.yField),this.setFieldZ(this._spec.zField),this._specXField=z(this._spec.xField),this._specYField=z(this._spec.yField),x(this._spec.direction)&&(this._direction=this._spec.direction),this.setFieldX2(null===(e=this._spec)||void 0===e?void 0:e.x2Field),this.setFieldY2(null===(t=this._spec)||void 0===t?void 0:t.y2Field),this._stack&&this.setValueFieldToStack(),this._percent&&this.setValueFieldToPercent(),this._stackOffsetSilhouette&&this.setValueFieldToStackOffsetSilhouette(),x(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)}dataToPosition(e){return e?{x:this.dataToPositionX(e),y:this.dataToPositionY(e)}:null}_buildMarkAttributeContext(){var e=this;super._buildMarkAttributeContext(),this._markAttributeContext.valueToX=this.valueToPositionX.bind(this),this._markAttributeContext.valueToY=this.valueToPositionY.bind(this),this._markAttributeContext.xBandwidth=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var i,n,r;return null!==(r=null===(n=(i=e.getXAxisHelper()).getBandwidth)||void 0===n?void 0:n.call(i,t))&&void 0!==r?r:0},this._markAttributeContext.yBandwidth=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var i,n,r;return null!==(r=null===(n=(i=e.getYAxisHelper()).getBandwidth)||void 0===n?void 0:n.call(i,t))&&void 0!==r?r:0},this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this)}valueToPosition(e,t){return{x:this.valueToPositionX(e),y:this.valueToPositionY(t)}}_axisPosition(e,t,i){return this._scaleConfig.datum=i,e.isContinuous?e.valueToPosition(t,this._scaleConfig):e.dataToPosition(z(t),this._scaleConfig)}valueToPositionX(e,t){return this._axisPosition(this._xAxisHelper,e,t)}valueToPositionY(e,t){return this._axisPosition(this._yAxisHelper,e,t)}dataToPositionX(e){if(this._positionXEncoder)return this._positionXEncoder(e);if(!this._xAxisHelper)return this._positionXEncoder=e=>Number.NaN,Number.NaN;const t=this._xAxisHelper.getFields?this._xAxisHelper.getFields():this._fieldX;return t&&0!==t.length?(this._xAxisHelper.isContinuous?this._positionXEncoder=e=>(this._scaleConfig.datum=e,this._xAxisHelper.valueToPosition(this.getDatumPositionValue(e,t[0]),this._scaleConfig)):this._positionXEncoder=e=>(this._scaleConfig.datum=e,this._xAxisHelper.dataToPosition(z(this.getDatumPositionValues(e,t)),this._scaleConfig)),this._positionXEncoder(e)):(this._positionXEncoder=e=>null,null)}dataToPositionY(e){if(this._positionYEncoder)return this._positionYEncoder(e);if(!this._yAxisHelper)return this._positionYEncoder=e=>Number.NaN,Number.NaN;const t=this._yAxisHelper.getFields?this._yAxisHelper.getFields():this._fieldY;return t&&0!==t.length?(this._yAxisHelper.isContinuous?this._positionYEncoder=e=>(this._scaleConfig.datum=e,this._yAxisHelper.valueToPosition(this.getDatumPositionValue(e,t[0]),this._scaleConfig)):this._positionYEncoder=e=>(this._scaleConfig.datum=e,this._yAxisHelper.dataToPosition(z(this.getDatumPositionValues(e,t)),this._scaleConfig)),this._positionYEncoder(e)):(this._positionYEncoder=e=>null,null)}dataToPositionZ(e){if(!this._zAxisHelper)return Number.NaN;const{dataToPosition:t}=this._zAxisHelper;return t(this.getDatumPositionValues(e,this._fieldZ),{bandPosition:this._bandPosition})}dataToPositionX1(e){return this._xAxisHelper?this._fieldX2&&this._fieldX2 in e?this.valueToPositionX(this.getDatumPositionValues(e,this._fieldX2)):this.valueToPositionX(0):Number.NaN}dataToPositionY1(e){return this._yAxisHelper?this._fieldY2&&this._fieldY2 in e?this.valueToPositionY(this.getDatumPositionValues(e,this._fieldY2)):this.valueToPositionY(0):Number.NaN}positionToData(e){return e?{x:this.positionToDataX(e.x),y:this.positionToDataY(e.y)}:null}positionToDataX(e){return this._scaleX?this._scaleX.invert(e):null}positionToDataY(e){return this._scaleY?this._scaleY.invert(e):null}getRegionRectLeft(){if(!this._xAxisHelper)return Number.NaN;const{getScale:e}=this._xAxisHelper;return e(0).range()[0]}getRegionRectRight(){if(!this._xAxisHelper)return Number.NaN;const{getScale:e}=this._xAxisHelper;return e(0).range()[1]}afterInitMark(){super.afterInitMark(),this.setFieldX(this._fieldX),this.setFieldY(this._fieldY),this._trigger.setStateKeys([...this._fieldX,...this._fieldY]),this._buildScaleConfig()}getDimensionField(){return"vertical"===this._direction?this._specXField:this._specYField}getMeasureField(){return"vertical"===this._direction?this._specYField:this._specXField}viewDataUpdate(e){super.viewDataUpdate(e),this.sortDataByAxis&&this._sortDataInAxisDomain()}_sortDataInAxisDomain(){var e,t,i;(null===(t=null===(e=this.getViewData())||void 0===e?void 0:e.latestData)||void 0===t?void 0:t.length)&&(GR("horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper,"horizontal"===this._direction?this._fieldY[0]:this._fieldX[0],this.getViewData().latestData),null===(i=this._data)||void 0===i||i.updateData(!0))}reInit(e){this._positionXEncoder&&(this._positionXEncoder=null),this._positionYEncoder&&(this._positionYEncoder=null),super.reInit(e)}}const XR="monotone",qR="linear";class ZR{addSamplingCompile(){if(this._spec.sampling){const{width:e,height:t}=this._region.getLayoutRect(),i=[],n=this._fieldY,r=this._fieldX;i.push({type:"sampling",size:"vertical"===this._direction?e:t,factor:this._spec.samplingFactor,yfield:"vertical"===this._direction?n[0]:r[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(i)}}addOverlapCompile(){var e;if(this._spec.markOverlap){const t=[];t.push({type:"markoverlap",direction:"horizontal"===this._direction&&"cartesian"===this.coordinate?2:1,delta:this._spec.pointDis,deltaMul:this._spec.pointDisMul,groupBy:this._seriesField}),null===(e=this._symbolMark)||void 0===e||e.getProduct().transform(t)}}reCompileSampling(){this._spec.sampling&&this.compile()}initLineMark(e,t){var i;return this._lineMark=this._createMark(ii.line,{defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:null==t||t,progressive:e,customShape:null===(i=this._spec.line)||void 0===i?void 0:i.customShape}),this._lineMark}initLineMarkStyle(e,t){var i,n;const r=this._lineMark;if(r){if(this.setMarkStyle(r,{stroke:this.getColorAttribute()},"normal",Tw.Series),"zero"!==this._invalidType&&this.setMarkStyle(r,{defined:this._getInvalidDefined,connectedType:this._getInvalidConnectType()},"normal",Tw.Series),this.event.on(Ir.viewDataStatisticsUpdate,{filter:e=>e.model===this},(()=>{this.encodeDefined(r,"defined")})),"polar"===this.coordinate)this.setMarkStyle(r,{lineJoin:"bevel",curveType:qR,closePath:!0},"normal",Tw.Series);else{const s=null!=t?t:null===(n=null===(i=this.getSpec().line)||void 0===i?void 0:i.style)||void 0===n?void 0:n.curveType,a=s===XR?"vertical"===e?"monotoneX":"monotoneY":s;this.setMarkStyle(r,{curveType:a},"normal",Tw.Built_In)}this.setMarkStyle(r,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",Tw.Series),this._trigger.registerMark(r)}return r}_getEventElement(e){let t=[];return e.dimensionInfo.some((e=>(e.data.some((e=>e.series===this&&(t=e.datum,!0))),!t.length))),t}_dimensionTrigger(e){const t=this._getEventElement(e);switch(e.action){case"enter":this._symbolActiveMark.getDataView().parse(t),this._symbolActiveMark.getData().updateData(!1);break;case"leave":this._symbolActiveMark.getDataView().parse([]),this._symbolActiveMark.getData().updateData(!1)}}initSymbolMark(e,t){var i,n,r;if(!1!==(null===(i=this._spec.point)||void 0===i?void 0:i.visible)&&(this._symbolMark=this._createMark(ii.point,{morph:zR(this._spec,ii.point.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,progressive:e,isSeriesMark:!!t,customShape:null===(n=this._spec.point)||void 0===n?void 0:n.customShape})),!0===this._spec.activePoint){const e=new R(this._option.dataSet,{name:"".concat(Ge,"_series_").concat(this.id,"_active_point")});e.parse([]),this._symbolActiveMark=this._createMark({name:"active_point",type:"symbol"},{morph:!1,groupKey:this._seriesField,isSeriesMark:!1,dataView:e,parent:this._region.getInteractionMark(),customShape:null===(r=this._spec.point)||void 0===r?void 0:r.customShape}),this._symbolActiveMark.setVisible(!1)}return this._symbolMark}initSymbolMarkStyle(){const e=this._symbolMark;if(!e)return this._initSymbolActiveMarkAlone(),e;if(this._initSymbolMark(e),this._trigger.registerMark(e),this._symbolActiveMark&&this._symbolMark.stateStyle.dimension_hover){this._symbolActiveMark.setVisible(!0),this.event.on(xn.dimensionHover,this._dimensionTrigger.bind(this));for(const t in this._symbolMark.stateStyle){this._symbolActiveMark.stateStyle[t]={};for(const i in this._symbolMark.stateStyle[t])this._symbolActiveMark.stateStyle[t][i]={style:null,level:Tw.Series,referer:e}}this._symbolActiveMark.state.changeStateInfo({stateValue:fw.STATE_DIMENSION_HOVER,filter:()=>!0})}return e}_initSymbolMark(e){e&&(this.setMarkStyle(e,{fill:this.getColorAttribute()},"normal",Tw.Series),"zero"!==this._invalidType&&this.setMarkStyle(e,{visible:this._getInvalidDefined},"normal",Tw.Series),this.event.on(Ir.viewDataStatisticsUpdate,{filter:e=>e.model===this},(()=>{this.encodeDefined(e,"visible")})),this.setMarkStyle(e,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",Tw.Series))}_initSymbolActiveMarkAlone(){var e,t;const i=this._symbolActiveMark;i&&(this._initSymbolMark(i),i&&(null===(t=null===(e=this._spec[ii.point.name])||void 0===e?void 0:e.state)||void 0===t?void 0:t.dimension_hover)&&(i.setVisible(!0),this.event.on(xn.dimensionHover,this._dimensionTrigger.bind(this)),this.initMarkStyleWithSpec(i,_e({},this._spec[ii.point.name],{visible:!0})),this._symbolActiveMark.state.changeStateInfo({stateValue:fw.STATE_DIMENSION_HOVER,filter:()=>!0})))}initLabelMarkStyle(e){var t;e&&("symbol"!==(null===(t=e.getTarget())||void 0===t?void 0:t.type)&&e.setRule("line-data"),this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null}),"zero"!==this._invalidType&&this.setMarkStyle(e,{visible:this._getInvalidDefined},"normal",Tw.Series),this.event.on(Ir.viewDataStatisticsUpdate,{filter:e=>e.model===this},(()=>{this.encodeDefined(e,"visible")})))}initLineLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this.getSeriesField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}encodeDefined(e,t){var i,n,r,s,a,o;if(!e)return;const l=null===(n=null===(i=this.getViewDataStatistics())||void 0===i?void 0:i.latestData)||void 0===n?void 0:n[this.getStackValueField()];if("zero"===this._invalidType||l&&(null==l?void 0:l.allValid)){if(!0===(null===(s=null===(r=e.stateStyle.normal)||void 0===r?void 0:r[t])||void 0===s?void 0:s.style))return;this.setMarkStyle(e,{[t]:!0},"normal",Tw.Series)}else{if(!0!==(null===(o=null===(a=e.stateStyle.normal)||void 0===a?void 0:a[t])||void 0===o?void 0:o.style))return;this.setMarkStyle(e,{[t]:this._getInvalidDefined},"normal",Tw.Series)}e.getProduct()&&e.compileEncode()}}function QR(e,t,i){const n=function(e){if(!e)return[];if(Object.keys)return Object.keys(e);const t=[];for(const i in e)e.hasOwnProperty(i)&&t.push(i);return t}(t);for(let r=0;r<n.length;r++){const s=n[r];(i?null!=t[s]:null==e[s])&&(e[s]=t[s])}return e}function $R(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames){const n=Object.getOwnPropertyNames(t);for(let r=0;r<n.length;r++){const s=n[r];"constructor"!==s&&(i?null!=t[s]:null==e[s])&&(e[s]=t[s])}}else QR(e,t,i)}class JR extends kk{setStyle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.stateStyle;if(P(e))return;void 0===n[t]&&(n[t]={});const r=this._getIgnoreAttributes(),s=["strokeWidth","lineWidth","lineDash","strokeDash","lineJoin","stroke","strokeOpacity","opacity","fill","fillOpacity","texture","texturePadding","textureSize","textureColor"],a=this.isUserLevel(i);let o=!1;Object.keys(e).forEach((l=>{const c=e[l];if(P(c)||r.includes(l))return;a&&s.includes(l)&&(kn(null==c?void 0:c.type)||(null==c?void 0:c.scale)||Q(c))&&(o=!0);let h=this._styleConvert(c);a&&"angle"===l&&(h=this.convertAngleToRadian(h)),this.setAttribute(l,h,t,i,n)})),o&&this.setEnableSegments(o)}}class eD extends JR{constructor(){super(...arguments),this.type=eD.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:1})}_getIgnoreAttributes(){var e,t;return(null===(e=this.model)||void 0===e?void 0:e.type)===Bt.radar&&"polar"===(null===(t=this.model)||void 0===t?void 0:t.coordinate)?[]:["fill","fillOpacity"]}}eD.type="line";const tD=()=>{_n.registerMark(eD.type,eD),Ok(),HE(),nm.registerGraphic(Vr.line,kE),OM()};class iD extends kk{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{size:1,symbolType:"circle",fill:void 0,lineWidth:0})}}class nD extends iD{constructor(){super(...arguments),this.type=nD.type}}nD.type="symbol";const rD=()=>{_n.registerMark(nD.type,nD),dP()};class sD extends UR{_transformLabelSpec(e){var t,i,n;!1!==(null===(t=e.point)||void 0===t?void 0:t.visible)&&!1!==(null===(n=null===(i=e.point)||void 0===i?void 0:i.style)||void 0===n?void 0:n.visible)?this._addMarkLabelSpec(e,"point"):this._addMarkLabelSpec(e,"line"),this._addMarkLabelSpec(e,"line","lineLabel","initLineLabelMarkStyle",void 0,!0)}}class aD extends YR{constructor(){super(...arguments),this.type=Bt.line,this.transformerConstructor=sD,this._sortDataByAxis=!1}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}initMark(){var e;const t={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},i=null!==(e=this._spec.seriesMark)&&void 0!==e?e:"line";this.initLineMark(t,"line"===i),this.initSymbolMark(t,"point"===i)}initTooltip(){super.initTooltip(),this._lineMark&&this._tooltipHelper.activeTriggerSet.dimension.add(this._lineMark),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)}initMarkStyle(){this.initLineMarkStyle(this._direction),this.initSymbolMarkStyle()}initAnimation(){var e,t,i,n;const r={direction:this.direction},s=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset;if(this._lineMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("line"))||void 0===i?void 0:i(r,s),FR("line",this._spec,this._markAttributeContext))),this._symbolMark){const e=KR(this);this._symbolMark.setAnimationConfig(jR(null===(n=_n.getAnimationInKey("scaleInOut"))||void 0===n?void 0:n(),FR("point",this._spec,this._markAttributeContext),e))}}onLayoutEnd(e){super.onLayoutEnd(e),this.reCompileSampling()}getSeriesStyle(e){var t;const i="point"!==(null===(t=this._spec)||void 0===t?void 0:t.seriesMark);return t=>{var n,r;return i&&"fill"===t&&(t="stroke"),null!==(r=null===(n=this._seriesMark)||void 0===n?void 0:n.getAttribute(t,e))&&void 0!==r?r:void 0}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._lineMark,this._symbolMark]}}aD.type=Bt.line,aD.mark=ni,aD.transformerConstructor=sD,$R(aD,ZR);class oD{constructor(e){this._option=e,this.type=e.type,this.seriesType=e.seriesType}initChartSpec(e){return this.transformSpec(e),this.transformModelSpec(e)}transformSpec(e){e.region&&0!==e.region.length||(e.region=[{}]),Bh(e,"tooltip")||(e.tooltip={}),x(e.stackInverse)&&e.region.forEach((t=>!x(t.stackInverse)&&(t.stackInverse=e.stackInverse)))}transformModelSpec(e){return this.createSpecInfo(e,((t,i,n)=>{const{spec:r,specPath:s,specInfoPath:a,type:o}=i,l=new t.transformerConstructor({type:o,getTheme:this._option.getTheme}).transformSpec(r,e,n);Qw(e,s,l.spec),Qw(n,null!=a?a:s,Object.assign(Object.assign({},i),l))}))}createSpecInfo(e,t){var i;t||(t=(t,i,n)=>{const{spec:r,specPath:s,specInfoPath:a,type:o}=i,l=new t.transformerConstructor({type:o,getTheme:this._option.getTheme});Qw(n,null!=a?a:s,Object.assign(Object.assign({},i),{theme:l.getTheme(r,e)}))});const n={};let r;return this.forEachRegionInSpec(e,t,n),this.forEachSeriesInSpec(e,t,n),null===(i=n.series)||void 0===i||i.forEach(((e,t)=>{let{spec:{regionId:i,regionIndex:s}}=e;var a,o,l;x(i)?r=null===(a=n.region)||void 0===a?void 0:a.find((e=>{let{spec:t}=e;return t.id===i})):x(s)&&(r=null===(o=n.region)||void 0===o?void 0:o[s]),(r||(r=null===(l=n.region)||void 0===l?void 0:l[0]))&&(r.seriesIndexes||(r.seriesIndexes=[]),r.seriesIndexes.push(t))})),this.forEachComponentInSpec(e,t,n),n}_isValidSeries(e){return!0}_getDefaultSeriesSpec(e){var t,i,n,r;return{dataKey:e.dataKey,hover:e.hover,select:e.select,label:e.label,seriesStyle:e.seriesStyle,animation:null!==(t=e.animation)&&void 0!==t?t:this._option.animation,animationThreshold:null!==(i=e.animationThreshold)&&void 0!==i?i:null===(r=(n=this._option).getTheme)||void 0===r?void 0:r.call(n).animationThreshold,animationAppear:e.animationAppear,animationDisappear:e.animationDisappear,animationEnter:e.animationEnter,animationUpdate:e.animationUpdate,animationExit:e.animationExit,animationNormal:e.animationNormal,extensionMark:e.extensionMark,large:e.large,largeThreshold:e.largeThreshold,progressiveStep:e.progressiveStep,progressiveThreshold:e.progressiveThreshold,background:e.seriesBackground,invalidType:e.invalidType,seriesField:e.seriesField,morph:e.morph}}forEachRegionInSpec(e,t,i){var n;return(null!==(n=e.region)&&void 0!==n?n:[]).map(((e,n)=>t(_n.getRegionInType("region"),{spec:e,specIndex:n,specPath:["region",n],type:"region"},i)))}forEachSeriesInSpec(e,t,i){var n;return(null!==(n=e.series)&&void 0!==n?n:[]).map(((e,n)=>t(_n.getSeriesInType(e.type),{spec:e,specIndex:n,specPath:["series",n],type:e.type},i)))}forEachComponentInSpec(e,t,i){var n,s,a,o;const l=[],c=_n.getComponents();let h,d,u,p,g;const f=[];for(let v=0;v<c.length;v++){const{cmp:t,alwaysCheck:i}=c[v];t.type.startsWith(r.cartesianAxis)?h=t:t.type.startsWith(r.polarAxis)?d=t:t.type===r.geoCoordinate?u=t:(i||e[null!==(n=t.specKey)&&void 0!==n?n:t.type])&&(t.type===r.label?p=t:t.type===r.totalLabel&&(g=t),f.push(t))}let m=!1;if(h){const n=h.getSpecInfo(e);(null==n?void 0:n.length)>0&&(m=!0,n.forEach((e=>{const n=_n.getComponentInKey(e.type);l.push(t(n,e,i))})))}if(d&&!m){const n=d.getSpecInfo(e);(null==n?void 0:n.length)>0&&(m=!0,n.forEach((e=>{const n=_n.getComponentInKey(e.type);l.push(t(n,e,i))})))}return u&&!m&&(null===(s=u.getSpecInfo(e))||void 0===s||s.forEach((e=>{l.push(t(u,e,i))}))),p&&i&&(null===(a=p.getSpecInfo(e,i))||void 0===a||a.forEach((e=>{l.push(t(p,e,i))}))),g&&i&&(null===(o=g.getSpecInfo(e,i))||void 0===o||o.forEach((e=>{l.push(t(g,e,i))}))),f.forEach((n=>{var r;null===(r=n.getSpecInfo(e))||void 0===r||r.forEach((e=>{l.push(t(n,e,i))}))})),l}}class lD extends oD{needAxes(){return!0}_isValidSeries(e){return!this.seriesType||e===this.seriesType}_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{xField:e.xField,yField:e.yField,zField:e.zField,seriesField:e.seriesField,seriesStyle:e.seriesStyle,direction:e.direction,stack:e.stack,percent:e.percent,stackOffsetSilhouette:e.stackOffsetSilhouette,totalLabel:e.totalLabel,sortDataByAxis:e.sortDataByAxis}),i=this.seriesType;return i&&(t.type=i,t[i]=e[i]),t}transformSpec(e){if(super.transformSpec(e),this.needAxes()){e.axes||(e.axes=[]);const t={x:!1,y:!1,z:!1};e.axes.forEach((i=>{const{orient:n}=i;"top"!==n&&"bottom"!==n||(t.x=!0),"left"!==n&&"right"!==n||(t.y=!0),"z"===n&&(t.z=!0),Br(i,"trimPadding")&&_e(i,gw(this.type,e))})),t.x||e.axes.push({orient:"bottom"}),t.y||e.axes.push({orient:"left"}),e.zField&&!t.z&&e.axes.push({orient:"z"})}const t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))})):e.series=[t]}}class cD extends lD{_getDefaultSeriesSpec(e){var t;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{point:e.point,line:e.line,seriesMark:null!==(t=e.seriesMark)&&void 0!==t?t:"line",activePoint:e.activePoint,sampling:e.sampling,samplingFactor:e.samplingFactor,pointDis:e.pointDis,pointDisMul:e.pointDisMul,markOverlap:e.markOverlap,lineLabel:e.lineLabel})}transformSpec(e){super.transformSpec(e),dw(e)}}class hD{get dataList(){return this._dataArr}constructor(e,t){this._dataArr=[],this._onError=t,this._dataSet=e}parseData(e){this._dataArr=[];const t=z(e);for(let i=0;i<t.length;i++)this._dataArr.push(xo(t[i],this._dataSet,this._dataArr,{onError:this._onError}))}updateData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=z(e);return(!t||n.length===this._dataArr.length)&&(this._dataValueForEach(n,((e,t)=>{t.markRunning()})),this._dataValueForEach(n,((e,t)=>{So(t,e,i)})),!0)}_dataValueForEach(e,t){e.forEach(((e,i)=>{if(e instanceof R)return;const n=this.getSeriesData(e.id,i);n&&t(e,n,i)}))}getSeriesData(e,t){var i,n;if(!this._dataArr.length)return null;if("string"==typeof e){const t=this._dataArr.filter((t=>t.name===e));return t[0]?t[0]:(null===(i=this._onError)||void 0===i||i.call(this,"no data matches dataId ".concat(e,"!")),null)}return"number"==typeof t?this._dataArr[t]?this._dataArr[t]:(null===(n=this._onError)||void 0===n||n.call(this,"no data matches dataIndex ".concat(t,"!")),null):this._dataArr[0]}}class dD{constructor(e,t){this._scaleSpecMap=new Map,this._scaleMap=new Map,this._modelScaleSpecMap=new Map,this._markAttributeScaleMap=new Map,this._spec=null,this._chart=null,this.getStatisticalFields=e=>{const t=[];return this._scaleSpecMap.forEach(((i,n)=>{Z(i.domain)&&i.domain.forEach((n=>{n.dataId===e&&n.fields.forEach((e=>{hR(t,[{key:e,operations:Cn(i.type)?["max","min"]:["values"]}])}))}))})),this._markAttributeScaleMap.forEach(((i,n)=>{const r=this.getScale(n);i.forEach((i=>{this._getSeriesBySeriesId(i.seriesId).getRawData().name===e&&i.field&&hR(t,[{key:i.field,operations:Cn(r.type)?["max","min"]:["values"]}])}))})),t},this._spec=e,this._chart=t,this._setAttrFromSpec()}_createFromSpec(e){if(!e.id)return null;let t=this._scaleMap.get(e.id);return t||(t="ordinal"===e.type&&"color"===e.id?gk("colorOrdinal"):gk(e.type)),t?(v(e.range)&&t.range(e.range),v(e.domain)&&(Z(e.domain)||t.domain(e.domain)),e.specified&&t.specified&&t.specified(e.specified),t):null}_setAttrFromSpec(){var e;if(!(null===(e=this._spec)||void 0===e?void 0:e.length))return;const t=new Map,i=new Map;this._spec.forEach((e=>{const n=this._createFromSpec(e);n&&(t.set(e.id,n),i.set(e.id,e))})),this._modelScaleSpecMap.forEach((e=>{const n=this._createFromSpec(e);n&&(t.set(e.id,n),i.set(e.id,e))})),this._scaleSpecMap=i,this._scaleMap=t}updateSpec(e){const t={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(ty(e,this._spec))return t;t.change=!0;for(let i=0;i<e.length;i++){const n=e[i],r=this._scaleMap.get(n.id);if(!r)return t.reMake=!0,t;const s=this._spec.find((e=>e.id===n.id));if(!s.id)return t.reMake=!0,t;if(s.type!==n.type)return t.reMake=!0,t;n.range&&!ty(n.range,r.range())&&(r.range(n.range),t.reRender=!0),Z(n.domain)?t.reRender=!0:ty(n.domain,r.domain())||(r.domain(n.domain),t.reRender=!0),this._scaleSpecMap.set(n.id,n)}return this._spec=e,t}registerModelScale(e){const t=this._createFromSpec(e);t&&(this._modelScaleSpecMap.set(e.id,e),this._scaleSpecMap.set(e.id,e),this._scaleMap.set(e.id,t))}removeModelScale(e){this._modelScaleSpecMap.forEach((t=>{e(t)&&(this._modelScaleSpecMap.delete(t.id),this._scaleSpecMap.delete(t.id),this._scaleMap.delete(t.id))}))}getScale(e){return this._scaleMap.get(e)}getScaleSpec(e){return this._scaleSpecMap.get(e)}_getSeriesByRawDataId(e){const t=this._chart.getAllSeries();for(let i=0;i<t.length;i++){const n=t[i];if(n.getRawData().name===e)return n}return null}_getSeriesBySeriesId(e){const t=this._chart.getAllSeries();for(let i=0;i<t.length;i++){const n=t[i];if(n.id===e)return n}return null}updateScaleDomain(e){this._scaleSpecMap.forEach(((t,i)=>{const n=this._scaleMap.get(i);if(!n)return;if(!Z(t.domain))return t.domain&&0!==t.domain.length||n.domain(e),void this._updateMarkScale(i,n,n.domain().slice());let r;r=Cn(t.type)?[null,null]:new Set,t.domain.forEach((e=>{const i=this._getSeriesByRawDataId(e.dataId);if(!i)return;const n=Cn(t.type);e.fields.forEach((e=>{const t=i.getRawDataStatisticsByField(e,n);t&&(n?(P(r[0])?r[0]=t.min:r[0]=Math.min(t.min,r[0]),P(r[1])?r[1]=t.max:r[1]=Math.max(t.max,r[1])):t.values.forEach((e=>{r.add(e)})))}))}));const s=r;Cn(t.type)||(r=Array.from(r)),n.domain(r),this._updateMarkScale(i,n,s)}))}_updateMarkScale(e,t,i){const n=this._markAttributeScaleMap.get(e);n&&0!==n.length&&n.forEach((e=>{if(!e.field||!e.markScale||e.markScale===t)return;if(P(e.changeDomain)||"none"===e.changeDomain||P(e.seriesId))return void(Cn(t.type)?e.markScale.domain(i):t.domain(Array.from(i)));const n=this._getSeriesBySeriesId(e.seriesId),r=Cn(t.type),s=n.getRawDataStatisticsByField(e.field,r);if(!ay(s))return"expand"===e.changeDomain?(r?(i[0]=Math.min(i[0],s.min),i[1]=Math.max(i[1],s.max)):(s.values.forEach((e=>{i.add(e)})),i=Array.from(i)),void e.markScale.domain(i)):void("replace"!==e.changeDomain||(r?e.markScale.domain([s.min,s.max]):e.markScale.domain(s.values)));Cn(t.type)?e.markScale.domain(i):t.domain(Array.from(i))}))}registerMarkAttributeScale(e,t){const i=this._scaleMap.get(e.scale);let n=this._markAttributeScaleMap.get(e.scale);n||(n=[],this._markAttributeScaleMap.set(e.scale,n));let r=i;return(P(e.field)||!P(e.changeDomain)&&"none"!==e.changeDomain&&!P(t))&&(r=i.clone()),n.push(Object.assign(Object.assign({},e),{seriesId:t,markScale:r})),r}}function uD(e,t){if(!e||!k(e))return e;const i={};return Object.keys(e).forEach((n=>{const r=e[n];let s=!1;t.forEach((e=>{(_(e)&&e===n||e instanceof RegExp&&n.match(e))&&(s=!0)})),s||(i[n]=r)})),i}class pD{constructor(e){this.stackRegion=e=>{let{model:t}=e;const i=t.getSeries();if(!i.some((e=>e.getStack())))return;const n=i.some((e=>{var t,i;return null===(i=null===(t=e.getSpec())||void 0===t?void 0:t.totalLabel)||void 0===i?void 0:i.visible})),r=n||i.some((e=>e.getPercent())),s=i.some((e=>e.getStackOffsetSilhouette())),a=pR(t,!0);for(const o in a)for(const e in a[o].nodes)mR(a[o].nodes[e],t.getStackInverse(),r);if(s)for(const o in a)for(const e in a[o].nodes)fR(a[o].nodes[e]);n&&t.getSeries().forEach((e=>{const t=e.getStackData(),i=e.getStackValue(),n=e.getStackValueField();t&&n&&gR(a[i],n)}))},this._chart=e}init(){this._chart.getAllRegions().forEach((e=>{e.event.on(Ir.regionSeriesDataFilterOver,{filter:t=>{let{model:i}=t;return(null==i?void 0:i.id)===e.id}},this.stackRegion)}))}stackAll(){this._chart.getAllRegions().forEach((e=>{this.stackRegion({model:e})}))}}var gD=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class fD extends Ww{getSpec(){return this._spec}setSpec(e){this._spec=e}getOption(){return this._option}getLayoutRect(){return this._layoutRect}getViewRect(){return this._viewRect}getLayoutTag(){return this._layoutTag}setLayoutTag(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n;return this._layoutTag=e,(null===(n=this.getCompiler())||void 0===n?void 0:n.getVGrammarView())&&(this.getCompiler().getVGrammarView().updateLayoutTag(),e&&i&&this.getCompiler().renderAsync(t)),this._layoutTag}getEvent(){return this._event}get chartData(){return this._chartData}constructor(e,t){var i,n,r,s;super(t),this.type="chart",this.id=X(),this._regions=[],this._series=[],this._components=[],this._layoutRect={x:0,y:0,width:Ke,height:Ye},this._viewRect={width:Ke,height:Ye},this._viewBox={x1:0,y1:0,x2:Ke,y2:Ye},this._layoutTag=!0,this._idMap=new Map,this.state={layoutUpdateRank:1},this.padding={top:0,left:0,right:0,bottom:0},this.getAllSeries=()=>{var e;return null!==(e=this._series)&&void 0!==e?e:[]},this.getRegionsInIndex=e=>e&&0!==e.length?this._regions.filter(((t,i)=>e.includes(i))):[this._regions[0]],this.getAllRegions=()=>this._regions,this.getRegionsInIds=e=>e?this._regions.filter((t=>e.includes(t.id))):[],this.getRegionsInQuerier=e=>e?this._regions.filter(((t,i)=>z(e).some((e=>x(e.regionId)&&e.regionId===t.userId||e.regionIndex===i)))):this._regions,this.getRegionsInUserId=e=>{if(e)return this._regions.find((t=>t.userId===e))},this.getRegionsInUserIdOrIndex=(e,t)=>this.getAllRegions().filter((i=>(null==e?void 0:e.length)?i.userId&&e.includes(i.userId):!(null==t?void 0:t.length)||t.includes(i.getSpecIndex()))),this.getComponents=()=>this._components,this.getSeriesInIndex=e=>e&&0!==e.length?this._series.filter(((t,i)=>e.includes(i))):[this._series[0]],this.getSeriesInIds=e=>e?this._series.filter((t=>e.includes(t.id))):[],this.getSeriesInUserId=e=>{if(e)return this._series.find((t=>t.userId===e))},this.getSeriesInUserIdOrIndex=(e,t)=>this.getAllSeries().filter((i=>(null==e?void 0:e.length)?i.userId&&e.includes(i.userId):!(null==t?void 0:t.length)||t.includes(i.getSpecIndex()))),this.getComponentByIndex=(e,t)=>{const i=this._components.filter((t=>(t.specKey||t.type)===e));if(i&&0!==i.length)return i[t]},this.getComponentsByKey=e=>this._components.filter((t=>(t.specKey||t.type)===e)),this.getComponentByUserId=e=>{const t=this._components.find((t=>t.userId===e));if(t)return t},this._paddingSpec=ie(null!==(i=e.padding)&&void 0!==i?i:t.getTheme().padding),this._event=new jr(t.eventDispatcher,t.mode),this._dataSet=t.dataSet,this._chartData=new hD(this._dataSet,null===(n=this._option)||void 0===n?void 0:n.onError),this._modelOption=Object.assign(Object.assign({},t),{mode:this._option.mode,map:this._idMap,getChartLayoutRect:()=>this._layoutRect,getChartViewRect:()=>this._viewRect,getChart:()=>this,globalScale:this._globalScale,onError:null===(r=this._option)||void 0===r?void 0:r.onError,disableTriggerEvent:!0===(null===(s=this._option)||void 0===s?void 0:s.disableTriggerEvent),getSeriesData:this._chartData.getSeriesData.bind(this._chartData)}),this._spec=e}created(){this._transformer=new this.transformerConstructor({type:this.type,seriesType:this.seriesType,getTheme:this._option.getTheme,animation:this._option.animation}),this._chartData.parseData(this._spec.data),this._createGlobalScale(),this._spec.background&&"object"==typeof this._spec.background&&this._createBackground(),this._createLayout(),this._transformer.forEachRegionInSpec(this._spec,this._createRegion.bind(this)),this._transformer.forEachSeriesInSpec(this._spec,this._createSeries.bind(this)),this._transformer.forEachComponentInSpec(this._spec,this._createComponent.bind(this),this._option.getSpecInfo())}init(){this._regions.forEach((e=>e.init({}))),this._series.forEach((e=>e.init({}))),this._components.forEach((e=>e.init({dataSet:this._dataSet}))),this._initEvent(),this._canStack&&(this._stack=new pD(this),this._stack.init()),this.reDataFlow()}reDataFlow(){this._series.forEach((e=>{var t;return null===(t=e.getRawData())||void 0===t?void 0:t.markRunning()})),this._series.forEach((e=>e.fillData())),this.updateGlobalScaleDomain()}onResize(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n={width:e,height:t};this._canvasRect=n,this._updateLayoutRect(this._option.viewBox),this.setLayoutTag(!0,null,i)}updateViewBox(e,t){this._option.viewBox=e,this._updateLayoutRect(e),this.setLayoutTag(!0,null,t)}_createBackground(){const e=function(e){if(!e)return null;if("string"==typeof e)return{fill:e,fillOpacity:1};if("object"!=typeof e)return null;const t=uD(e,["x","y","width","height","x1","y1","image"]);return t.background=e.image,t}(this._spec.background);e&&(this._backgroundMark=_n.createMark("group","chart-background",{model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._globalScale}),this._backgroundMark.created(),this._backgroundMark.setStyle(Object.assign(Object.assign({},e),{x:()=>this._viewBox.x1,y:()=>this._viewBox.y1,width:()=>this._viewBox.x2-this._viewBox.x1,height:()=>this._viewBox.y2-this._viewBox.y1})))}_createRegion(e,t){if(!e)return;const{spec:i}=t,n=gD(t,["spec"]),r=new e(i,Object.assign(Object.assign({},this._modelOption),n));r&&(r.created(),this._regions.push(r))}_createSeries(e,t){if(!e)return;const{spec:i}=t,n=gD(t,["spec"]);let r;if(x(i.regionId)?r=this.getRegionsInUserId(i.regionId):x(i.regionIndex)&&(r=this.getRegionsInIndex([i.regionIndex])[0]),!r&&!(r=this._regions[0]))return;const s=new e(i,Object.assign(Object.assign(Object.assign({},this._modelOption),n),{type:i.type,region:r,globalScale:this._globalScale,sourceDataList:this._chartData.dataList}));s&&(s.created(),this._series.push(s),r.addSeries(s))}getSeriesById(e){return this._series.find((t=>t.id===e))}_createComponent(e,t){const i=e.createComponent(t,Object.assign(Object.assign({},this._modelOption),{type:e.type,getAllRegions:this.getAllRegions,getRegionsInIndex:this.getRegionsInIndex,getRegionsInIds:this.getRegionsInIds,getRegionsInUserIdOrIndex:this.getRegionsInUserIdOrIndex,getAllSeries:this.getAllSeries,getSeriesInIndex:this.getSeriesInIndex,getSeriesInIds:this.getSeriesInIds,getSeriesInUserIdOrIndex:this.getSeriesInUserIdOrIndex,getAllComponents:this.getComponents,getComponentByIndex:this.getComponentByIndex,getComponentByUserId:this.getComponentByUserId,getComponentsByKey:this.getComponentsByKey}));i&&(i.created(),this._components.push(i))}getAllComponents(){return this._components}getAllModels(){return[].concat(this.getAllSeries(),this.getAllComponents(),this.getAllRegions())}getModelInFilter(e){if(_(e))return this.getAllModels().find((t=>t.userId===e));if(Q(e))return this.getAllModels().find((t=>e(t)));let t=0;return this.getAllModels().find((i=>{var n;if((null!==(n=i.specKey)&&void 0!==n?n:i.type)===e.type){if(t===e.index)return!0;t++}return!1}))}_createLayout(){this._updateLayoutRect(this._option.viewBox),this._initLayoutFunc()}setLayout(e){this._option.layout=e,this._initLayoutFunc()}_initLayoutFunc(){var e,t,i;if(this._layoutFunc=this._option.layout,!this._layoutFunc){let n=!1;(this._spec.zField||this._spec.series&&this._spec.series.some((e=>e.zField)))&&(n=!0);const r=_n.getLayoutInKey(null!==(t=null===(e=this._spec.layout)||void 0===e?void 0:e.type)&&void 0!==t?t:n?"layout3d":"base");if(r){const e=new r(this._spec.layout,{onError:null===(i=this._option)||void 0===i?void 0:i.onError});this._layoutFunc=e.layoutItems.bind(e)}}}layout(e){var t,i,n,r;if(null===(i=null===(t=this._option.performanceHook)||void 0===t?void 0:t.beforeLayoutWithSceneGraph)||void 0===i||i.call(t),this.getLayoutTag()){this._event.emit(Ir.layoutStart,{chart:this}),this.onLayoutStart(e);const t=this.getLayoutElements();this._layoutFunc(this,t,this._layoutRect,this._viewBox),this._event.emit(Ir.afterLayout,{elements:t}),this.setLayoutTag(!1),this.onLayoutEnd(e),this._event.emit(Ir.layoutEnd,{chart:this})}null===(r=null===(n=this._option.performanceHook)||void 0===n?void 0:n.afterLayoutWithSceneGraph)||void 0===r||r.call(n)}onLayoutStart(e){this.getAllModels().forEach((t=>t.onLayoutStart(this._layoutRect,this._viewRect,e)))}onLayoutEnd(e){this.getAllModels().forEach((t=>t.onLayoutEnd(e)))}onEvaluateEnd(e){[...this._components,...this._regions,...this._series].forEach((t=>t.onEvaluateEnd(e)))}getLayoutElements(){return this.getAllModels().map((e=>e.layout)).filter((e=>!!e))}getModelById(e){const t=this._idMap.get(e);if(t&&t instanceof $w)return t}getModelByUserId(e){const t=this._series.find((t=>t.userId===e));if(t)return t;const i=this._regions.find((t=>t.userId===e));if(i)return i;const n=this._components.find((t=>t.userId===e));return n||void 0}getAllMarks(){return Array.from(this._idMap.values()).filter((e=>e&&e instanceof kk))}getMarkById(e){const t=this._idMap.get(e);if(t&&t instanceof kk)return t}updateData(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;const r=this._dataSet.getDataView(e);r&&(r.markRunning(),r.parseNewData(t,n)),i&&this.updateGlobalScaleDomain(),this.getAllModels().forEach((e=>e.onDataUpdate()))}updateFullData(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];z(e).forEach((e=>{const t=this._dataSet.getDataView(e.id);t&&t.markRunning()})),z(e).forEach((e=>{const t=this._dataSet.getDataView(e.id);t&&So(t,e,!0)})),t&&this.updateGlobalScaleDomain(),this.getAllModels().forEach((e=>e.onDataUpdate()))}onRender(e){}setCanvasRect(e,t){this._canvasRect={width:e,height:t}}getCanvasRect(){return this._canvasRect||(this._canvasRect=uw(this._spec,this._option,{width:Ke,height:Ye})),this._canvasRect}getSeriesData(e,t){return this._chartData.getSeriesData(e,t)}_transformSpecScale(){var e,t;const i=null!==(e=this._spec.scales)&&void 0!==e?e:[];let n=i.find((e=>"color"===e.id));const r=this.getColorScheme();if(!n&&(n={type:"ordinal",id:"color",domain:null,range:null},i.push(n),this._spec.color)){const e=this._spec.color;if(v(e))n.range=e;else{const t=e;Object.prototype.hasOwnProperty.call(t,"type")&&(n.type=t.type),Object.prototype.hasOwnProperty.call(t,"domain")&&(n.domain=t.domain),Object.prototype.hasOwnProperty.call(t,"range")&&(n.range=t.range),Object.prototype.hasOwnProperty.call(t,"specified")&&(n.specified=t.specified)}}return(null===(t=n.range)||void 0===t?void 0:t.length)||(n.range=Ut(r),n.rangeTheme=!0),i}_createGlobalScale(){this._globalScale=new dD(this._transformSpecScale(),this),this._modelOption.globalScale=this._globalScale}updateGlobalScaleDomain(){const e=new Set;this._series.forEach((t=>{const i=t.getSeriesKeys();i&&i.forEach((t=>e.add(t)))}));const t=Array.from(e);this._globalScale.updateScaleDomain(t)}updateGlobalScale(e){pw(e,this._globalScale.updateSpec(this._transformSpecScale()))}updateGlobalScaleTheme(){const e=this._globalScale.getScaleSpec("color"),t=this.getColorScheme();e.rangeTheme&&(e.range=Ut(t),this._globalScale.getScale("color").range(e.range))}updateSpec(e){const t={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(this.setLayoutTag(!0,null,!1),e.type!==this.type)return t.reMake=!0,t;const i=Object.keys(this._spec).sort(),n=Object.keys(e).sort();if(JSON.stringify(i)!==JSON.stringify(n))return t.reMake=!0,t;const r=this._spec;return this._spec=e,this.updateChartConfig(t,r),t.reMake||(this.updateGlobalScale(t),t.reMake||(this.updateRegionSpec(t),t.reMake||(this.updateComponentSpec(t),t.reMake||(this.updateSeriesSpec(t),t.reMake||(this.updateDataSpec(t),t.reMake||this.updateGlobalScaleDomain()))))),t}updateChartConfig(e,t){var i,n;this._paddingSpec=ie(null!==(i=this._spec.padding)&&void 0!==i?i:null===(n=this._option)||void 0===n?void 0:n.getTheme().padding),this._updateLayoutRect(this._viewBox),ty(this._spec.background,t.background)||(e.reMake=!0)}updateDataSpec(e){this._spec.data&&this._chartData.updateData(this._spec.data,!1,!0)}updateRegionSpec(e){var t;(null===(t=this._spec)||void 0===t?void 0:t.region)&&(this._spec.region.length===this._regions.length?this._regions.forEach((t=>{pw(e,t.updateSpec(this._spec.region[t.getSpecIndex()]))})):e.reMake=!0)}updateComponentSpec(e){const t={};this._components.forEach((i=>{var n,r;const s=i.specKey||i.type,a=null!==(n=this._spec[s])&&void 0!==n?n:{};v(a)?(t[s]=t[s]||{specCount:a.length,componentCount:0},t[s].componentCount++,pw(e,i.updateSpec(null!==(r=a[i.getSpecIndex()])&&void 0!==r?r:{},a))):pw(e,i.updateSpec(a))}));for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const n=t[i];n.componentCount!==n.specCount&&(e.reMake=!0)}}updateSeriesSpec(e){this._spec.series.length===this._series.length?this._series.forEach((t=>{const i=this._spec.series[t.getSpecIndex()];pw(e,t.updateSpec(i))})):e.reMake=!0}getCanvas(){var e,t;return null!==(t=null===(e=this.getCompiler())||void 0===e?void 0:e.getCanvas())&&void 0!==t?t:null}_updateLayoutRect(e){let t=this.getCanvasRect();if(e){this._viewBox=e;const{x1:i=0,y1:n=0,x2:r,y2:s}=e;t={width:r-i,height:s-n}}else this._viewBox={x1:0,y1:0,x2:t.width,y2:t.height};this._viewRect=t,this.padding=te(this._paddingSpec,t,t),this._layoutRect.width=t.width-this.padding.left-this.padding.right,this._layoutRect.height=t.height-this.padding.top-this.padding.bottom,this._layoutRect.x=this.padding.left,this._layoutRect.y=this.padding.top,this._event.emit(Ir.layoutRectUpdate,{})}setCurrentTheme(){this.updateChartConfig({change:!0,reMake:!1},this._spec),this.setLayoutTag(!0,null,!1),this.updateGlobalScaleTheme(),this._regions.forEach((e=>e.reInit(e.getSpecInfo().spec))),this._series.forEach((e=>e.reInit(e.getSpecInfo().spec))),this._components.forEach((e=>e.reInit(e.getSpecInfo().spec)))}clear(){this.getAllModels().forEach((e=>{var t;return null===(t=e.clear)||void 0===t?void 0:t.call(e)}))}compile(){this.compileBackground(),this.compileLayout(),this.compileRegions(),this.compileSeries(),this.compileComponents()}afterCompile(){this.getAllRegions().forEach((e=>{var t;null===(t=e.afterCompile)||void 0===t||t.call(e)})),this.getAllSeries().forEach((e=>{var t;null===(t=e.afterCompile)||void 0===t||t.call(e)})),this.getAllComponents().forEach((e=>{var t;null===(t=e.afterCompile)||void 0===t||t.call(e)}))}compileLayout(){const{width:e,height:t}=this.getCanvasRect();this.getCompiler().setSize(e,t)}compileBackground(){var e;this._backgroundMark&&(this._backgroundMark.compile(),null===(e=this._backgroundMark.getProduct())||void 0===e||e.configure({context:{model:this}}).layout((()=>{})))}compileRegions(){var e,t,i,n;null===(t=null===(e=this._option.performanceHook)||void 0===e?void 0:e.beforeRegionCompile)||void 0===t||t.call(e),this.getAllRegions().forEach((e=>{e.compile()})),null===(n=null===(i=this._option.performanceHook)||void 0===i?void 0:i.afterRegionCompile)||void 0===n||n.call(i)}compileSeries(){var e,t,i,n;null===(t=null===(e=this._option.performanceHook)||void 0===e?void 0:e.beforeSeriesCompile)||void 0===t||t.call(e),this.getAllSeries().forEach((e=>{e.compile()})),null===(n=null===(i=this._option.performanceHook)||void 0===i?void 0:i.afterSeriesCompile)||void 0===n||n.call(i)}compileComponents(){var e,t,i,n;null===(t=null===(e=this._option.performanceHook)||void 0===e?void 0:e.beforeComponentCompile)||void 0===t||t.call(e),this.getAllComponents().forEach((e=>{e.compile()})),null===(n=null===(i=this._option.performanceHook)||void 0===i?void 0:i.afterComponentCompile)||void 0===n||n.call(i)}release(){[...this._components,...this._regions,...this._series].forEach((e=>{e.beforeRelease()})),super.release(),this.clear(),[...this._components,...this._regions,...this._series].forEach((e=>{e.release()})),this._components=this._regions=this._series=[],this._spec={},this._dataSet=this._globalScale=this._layoutFunc=null,this._layoutTag=!1,this._idMap.clear()}onLayout(e){const t=e.rootMark;this.layout({group:t,srView:e})}updateState(e,t){const i=this.getAllSeries();for(const n in e){if(ay(e[n]))continue;const r=e[n];let s={stateValue:n};s=Q(r.filter)?Object.assign({filter:r.filter},s):Object.assign(Object.assign({},r.filter),s),r.level&&(s.level=r.level),i.forEach((e=>{e.getMarks().forEach((i=>{i.stateStyle[n]&&(t&&!t(e,i,n)||(i.state.changeStateInfo(s),i.updateMarkState(n)))}))}))}}setSelected(e,t,i){this._setStateInDatum(fw.STATE_SELECTED,!0,e,t,i)}setHovered(e,t,i){this._setStateInDatum(fw.STATE_HOVER,!0,e,t,i)}_initEvent(){[Ir.dataZoomChange,Ir.scrollBarChange].forEach((e=>{this._event.on(e,(e=>{let{value:t}=e;if(!t.filterData)return;this._disableMarkAnimation(["exit","update"]);const i=()=>{this._enableMarkAnimation(["exit","update"]),this._event.off($r.AFTER_MARK_RENDER_END,i)};this._event.on($r.AFTER_MARK_RENDER_END,i)}))}))}_enableMarkAnimation(e){this.getAllMarks().forEach((t=>{const i=t.getProduct();i&&i.animate&&i.animate.enableAnimationState(e)}))}_disableMarkAnimation(e){this.getAllMarks().forEach((t=>{const i=t.getProduct();i&&i.animate&&i.animate.disableAnimationState(e)}))}_setStateInDatum(e,t,i,n,r){const s=(i=i?z(i):null)?Object.keys(i[0]):null;this.getRegionsInQuerier(r).forEach((r=>{i?(r.getSeries().forEach((t=>{t.getMarks().forEach((a=>{if(a.getProduct()&&(!n||Q(n)&&n(t,a))){const t=a.getProduct().isCollectionMark(),n=a.getProduct().elements;let o=n;if(t)o=n.filter((e=>{const t=e.getDatum();i.every(((e,i)=>s.every((n=>e[n]==t[i][n]))))}));else if(i.length>1){const e=i.slice();o=n.filter((t=>{if(0===e.length)return!1;const i=t.getDatum(),n=e.findIndex((e=>s.every((t=>e[t]==i[t]))));return n>=0&&(e.splice(n,1),!0)}))}else{const e=n.find((e=>s.every((t=>i[0][t]==e.getDatum()[t]))));e&&(o=[e])}o.forEach((t=>{r.interaction.addEventElement(e,t)}))}}))})),t&&r.interaction.reverseEventElement(e)):r.interaction.clearEventElement(e,!0)}))}setDimensionIndex(e,t){var i,n,s,a;let o=null;Array.from(this._event.getComposedEventMap().values()).forEach((i=>{const{eventType:n,event:r}=i;if(n===xn.dimensionHover||n===xn.dimensionClick){const i=r.dispatch(e,t);(null==i?void 0:i.length)&&(o=i)}}));const l=P(e)||!o||o.every((e=>An(e.axis.getScale().type)&&P(e.index)));if(!1!==t.tooltip){const e=this._components.find((e=>e.type===r.tooltip));if(null==e?void 0:e.getVisible())if(l)null===(n=(i=e).hideTooltip)||void 0===n||n.call(i);else{const i={};o.forEach((e=>{const{axis:t,value:n,data:r}=e,s="left"===t.getOrient()||"right"===t.getOrient();r.forEach((e=>{s?i[e.series.fieldY[0]]=n:i[e.series.fieldX[0]]=n}))})),e.showTooltip(i,t.showTooltipOption)}}if(!1!==t.crosshair){const e=this._components.find((e=>e.type===r.cartesianCrosshair));e&&e.clearAxisValue&&e.setAxisValue&&(l?(null===(s=e.clearAxisValue)||void 0===s||s.call(e),null===(a=e.hide)||void 0===a||a.call(e)):o.forEach((t=>{const{axis:i,value:n}=t;e.clearAxisValue(),e.setAxisValue(n,i),e.layoutByValue()})))}}getColorScheme(){var e,t;return null===(t=(e=this._option).getTheme)||void 0===t?void 0:t.call(e).colorScheme}}class mD extends fD{constructor(){super(...arguments),this.transformerConstructor=cD,this.type="line",this.seriesType=Bt.line,this._canStack=!0}}mD.type="line",mD.seriesType=Bt.line,mD.view="singleDefault",mD.transformerConstructor=cD;class vD extends JR{constructor(){super(...arguments),this.type=vD.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}_getIgnoreAttributes(){return[]}}vD.type="area";const yD=()=>{_n.registerMark(vD.type,vD),Ok(),tE(),nm.registerGraphic(Vr.area,NA),OM()};class bD extends SR{constructor(){super(...arguments),this._getSeriesStyle=(e,t,i)=>{var n,r,s,a;for(const o of z(t)){let t=null===(n=this.series.getSeriesStyle(e))||void 0===n?void 0:n(o);if(!1!==t||"fill"!==o&&"stroke"!==o||(t="fill"===o?null===(s=null===(r=this.series.getSeriesStyle(e))||void 0===r?void 0:r("stroke"))||void 0===s?void 0:s[0]:null===(a=this.series.getSeriesStyle(e))||void 0===a?void 0:a("fill")),x(t))return t}return i}}}const _D={type:"clipIn"},xD={type:"fadeIn"};function SD(e,t){if(!1===t)return{};switch(t){case"grow":return(e=>({type:"horizontal"===e.direction?"growPointsXIn":"growPointsYIn",options:{orient:"horizontal"===e.direction?"positive":"negative"}}))(e);case"fadeIn":return xD;default:return _D}}class wD extends sD{_transformLabelSpec(e){var t,i,n;super._transformLabelSpec(e),this._addMarkLabelSpec(e,"area","areaLabel","initLineLabelMarkStyle",void 0,!0),!1!==(null===(t=e.point)||void 0===t?void 0:t.visible)&&!1!==(null===(n=null===(i=e.point)||void 0===i?void 0:i.style)||void 0===n?void 0:n.visible)||this._addMarkLabelSpec(e,"area")}_transformSpecAfterMergingTheme(e,t,i){var n,r,s,a,o;super._transformSpecAfterMergingTheme(e,t,i);const{area:l={},line:c={},seriesMark:h="area"}=e,d=!1!==l.visible&&!1!==(null===(n=l.style)||void 0===n?void 0:n.visible),u=!1!==c.visible&&!1!==(null===(r=c.style)||void 0===r?void 0:r.visible);l.interactive=!(!l.interactive&&null!==(s=c.interactive)&&void 0!==s&&!s),l.support3d=!(!l.support3d&&!c.support3d),l.zIndex=x(l.zIndex)||x(c.zIndex)?Math.max(null!==(a=l.zIndex)&&void 0!==a?a:0,null!==(o=c.zIndex)&&void 0!==o?o:0):void 0,l.style&&delete l.style.stroke,l.state&&Object.keys(l.state).forEach((e=>{"style"in l.state[e]?delete l.state[e].style.stroke:delete l.state[e].stroke}));let p=l,g=c;("line"===h||u&&!d)&&(p=c,g=l),l.style=_e({},g.style,p.style),l.state=_e({},g.state,p.state),d||(l.style.fill=!1),u||(l.style.stroke=!1),l.visible=!(!d&&!u),e.area=l,e.line=c}}class CD extends YR{constructor(){super(...arguments),this.type=Bt.area,this.transformerConstructor=wD,this._supportStack=!0,this._sortDataByAxis=!1}initMark(){var e,t,i,n,r;const s={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},a=!1!==(null===(e=this._spec.area)||void 0===e?void 0:e.visible)&&!1!==(null===(i=null===(t=this._spec.area)||void 0===t?void 0:t.style)||void 0===i?void 0:i.visible),o=null!==(n=this._spec.seriesMark)&&void 0!==n?n:"area";this._areaMark=this._createMark(CD.mark.area,{groupKey:this._seriesField,defaultMorphElementKey:this.getDimensionField()[0],progressive:s,isSeriesMark:a&&"point"!==o,customShape:null===(r=this._spec.area)||void 0===r?void 0:r.customShape}),this.initSymbolMark(s,"point"===o)}initMarkStyle(){var e,t,i,n,r;const s=null!==(i=null===(t=null===(e=this.getSpec().area)||void 0===e?void 0:e.style)||void 0===t?void 0:t.curveType)&&void 0!==i?i:null===(r=null===(n=this.getSpec().line)||void 0===n?void 0:n.style)||void 0===r?void 0:r.curveType,a=s===XR?"vertical"===this._direction?"monotoneX":"monotoneY":s,o=this._areaMark;o&&("vertical"===this._direction?this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),y1:e=>{var t,i;return fk(this.dataToPositionY1(e),null===(i=null===(t=this._yAxisHelper)||void 0===t?void 0:t.getScale)||void 0===i?void 0:i.call(t,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",Tw.Series):this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:e=>{var t,i;return fk(this.dataToPositionX1(e),null===(i=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===i?void 0:i.call(t,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,orient:this._direction},"normal",Tw.Series),this.setMarkStyle(o,{fill:this.getColorAttribute(),stroke:this.getColorAttribute()},"normal",Tw.Series),"zero"!==this._invalidType&&this.setMarkStyle(o,{defined:this._getInvalidDefined,connectedType:this._getInvalidConnectType()},"normal",Tw.Series),this.setMarkStyle(o,{curveType:a},"normal",Tw.Built_In),this._trigger.registerMark(o),Object.keys(o.stateStyle).forEach((e=>{o.stateStyle[e].stroke&&o.setPostProcess("stroke",(e=>[e,!1,!1,!1]),e)}))),this.initLineMarkStyle(this._direction,s),this.initSymbolMarkStyle()}initAnimation(){var e,t,i,n;const r={direction:this.direction},s=null===(e=this._spec.animationAppear)||void 0===e?void 0:e.preset;if(this._lineMark&&this._lineMark.setAnimationConfig(jR(null===(t=_n.getAnimationInKey("line"))||void 0===t?void 0:t(r,s),FR("line",this._spec,this._markAttributeContext))),this._areaMark&&this._areaMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("area"))||void 0===i?void 0:i(r,s),FR("area",this._spec,this._markAttributeContext))),this._symbolMark){const e=KR(this);this._symbolMark.setAnimationConfig(jR(null===(n=_n.getAnimationInKey("scaleInOut"))||void 0===n?void 0:n(),FR("point",this._spec,this._markAttributeContext),e))}}initTooltip(){this._tooltipHelper=new bD(this),this._areaMark&&this._tooltipHelper.activeTriggerSet.dimension.add(this._areaMark),this._lineMark&&this._tooltipHelper.activeTriggerSet.dimension.add(this._lineMark),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)}viewDataStatisticsUpdate(e){super.viewDataStatisticsUpdate(e),this.encodeDefined(this._areaMark,"defined")}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}onLayoutEnd(e){super.onLayoutEnd(e),this.reCompileSampling()}getSeriesStyle(e){return t=>{var i,n,r,s,a;const o=null!==(i=this._spec.seriesMark)&&void 0!==i?i:"area";let l=null!==(r=null===(n=this._seriesMark)||void 0===n?void 0:n.getAttribute(t,e))&&void 0!==r?r:void 0;return"fill"!==t||l&&"line"!==o||(t="stroke",l=null!==(a=null===(s=this._seriesMark)||void 0===s?void 0:s.getAttribute(t,e))&&void 0!==a?a:void 0),"stroke"===t&&v(l)?l[0]:l}}}CD.type=Bt.area,CD.mark=si,CD.transformerConstructor=wD,$R(CD,ZR);const kD=()=>{WM(),GM(),tD(),yD(),rD(),_n.registerAnimation("area",((e,t)=>({appear:SD(e,t),enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"clipOut"}}))),AM(),CM(),_n.registerSeries(CD.type,CD)};class AD extends lD{_getDefaultSeriesSpec(e){var t;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{point:e.point,line:e.line,area:e.area,seriesMark:null!==(t=e.seriesMark)&&void 0!==t?t:"area",activePoint:e.activePoint,sampling:e.sampling,samplingFactor:e.samplingFactor,pointDis:e.pointDis,pointDisMul:e.pointDisMul,markOverlap:e.markOverlap,areaLabel:e.areaLabel})}transformSpec(e){super.transformSpec(e),dw(e)}}class ED extends fD{constructor(){super(...arguments),this.transformerConstructor=AD,this.type="area",this.seriesType=Bt.area,this._canStack=!0}}ED.type="area",ED.seriesType=Bt.area,ED.view="singleDefault",ED.transformerConstructor=AD;function TD(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(i,n,r)=>{const s="vertical"===e.direction?e.yField:e.xField,a=null==i?void 0:i[s];return"vertical"===e.direction?{overall:t?e.growFrom():t,orient:a>0?"negative":"positive"}:{overall:!!t&&e.growFrom(),orient:a>0?"positive":"negative"}}}const OD=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"horizontal"===e.direction?"growWidthIn":"growHeightIn",options:TD(e,t)}},PD=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"horizontal"===e.direction?"growWidthOut":"growHeightOut",options:TD(e,t)}},MD={type:"fadeIn"},ID={type:"growCenterIn"};function RD(e,t){if(!1===t)return{};switch(t){case"fadeIn":return MD;case"scaleIn":return ID;default:return OD(e)}}class DD extends kk{constructor(){super(...arguments),this.type=DD.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}DD.type="rect";const LD=()=>{_n.registerMark(DD.type,DD),cP(),EM()};function jD(e,t,i){if(e.values.length>0){let n,r=e.series;t&&(r=r.slice().reverse()),r.forEach(((e,r)=>{let{s:s,values:a}=e;var o,l;const c=s.getSpec().barMinHeight,h=null===(l=(o=s[i.axisHelper]).getScale)||void 0===l?void 0:l.call(o,0),d=s[i.axisHelper].isInverse();for(let u=0;u<a.length;u++){const e=a[t?a.length-1-u:u],o=fk(s[i.startMethod](e),h);let l=fk(s[i.endMethod](e),h);0===u&&0===r&&(n=o);let p=Math.abs(o-l);p<c&&(p=c);let g=1;l<o?g=-1:l===o&&(g=i.isVertical?d?1:-1:d?-1:1),l=n+g*p,e[i.start]=n,e[i.end]=l,n=l}}))}for(const n in e.nodes)jD(e.nodes[n],t,i)}class FD extends UR{_transformLabelSpec(e){this._addMarkLabelSpec(e,"bar")}}class BD extends YR{constructor(){super(...arguments),this.type=Bt.bar,this._barMarkName="bar",this._barMarkType="rect",this.transformerConstructor=FD,this._supportStack=!0,this._bandPosition=0}initMark(){var e;const t={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold};this._initBarBackgroundMark(t),this._barMark=this._createMark(Object.assign(Object.assign({},BD.mark.bar),{name:this._barMarkName,type:this._barMarkType}),{morph:zR(this._spec,this._barMarkName),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:!0,progressive:t,customShape:null===(e=this._spec.bar)||void 0===e?void 0:e.customShape})}_initBarBackgroundMark(e){var t,i;(null===(t=this._spec.barBackground)||void 0===t?void 0:t.visible)&&(this._barBackgroundMark=this._createMark(BD.mark.barBackground,{dataView:this._barBackgroundViewData.getDataView(),dataProductId:this._barBackgroundViewData.getProductId(),progressive:e,customShape:null===(i=this._spec.barBackground)||void 0===i?void 0:i.customShape}))}initMarkStyle(){this._barMark&&(this.setMarkStyle(this._barMark,{fill:this.getColorAttribute()},"normal",Tw.Series),this._trigger.registerMark(this._barMark))}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}initTooltip(){super.initTooltip(),this._barMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._barMark)}_statisticViewData(){var e,t;if(super._statisticViewData(),!(null===(e=this._spec.barBackground)||void 0===e?void 0:e.visible))return;uo(this._option.dataSet,"addVChartProperty",yR),uo(this._option.dataSet,"dimensionItems",((e,t)=>{let[i]=e;var n;let r=[{}];const s=this.getDimensionField();for(let a=0;a<s.length;a++){const e=s[a],t=null===(n=i.latestData[e])||void 0===n?void 0:n.values;if(!(null==t?void 0:t.length))continue;const o=[];for(let i=0;i<t.length;i++)for(let n=0;n<r.length;n++)o.push(Object.assign(Object.assign({},r[n]),{[e]:t[i]}));r=o}return r}));const i=new R(this._option.dataSet).parse([this._viewDataStatistics],{type:"dataview"}).transform({type:"dimensionItems"},!1).transform({type:"addVChartProperty",options:{beforeCall:MR.bind(this),call:IR}},!1);null===(t=this._viewDataStatistics)||void 0===t||t.target.addListener("change",i.reRunAllTransform),this._barBackgroundViewData=new ER(this._option,i)}init(e){var t,i;super.init(e),"vertical"===this.direction?"band"===(null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle():"band"===(null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle()}_shouldDoPreCalculate(){const e=this.getRegion();return this._stack&&e.getSeries().filter((e=>e.type===this.type&&e.getSpec().barMinHeight)).length}_calculateStackRectPosition(e){const t=this.getRegion();if(t._bar_series_position_calculated)return;let i,n,r,s,a;t._bar_series_position_calculated=!0,e?(i=Jt,n=$t,r="_dataToPosY1",s="_dataToPosY",a="_yAxisHelper"):(i=Qt,n=Zt,r="_dataToPosX1",s="_dataToPosX",a="_xAxisHelper");const o=pR(t,!1,(e=>e.type===this.type));for(const l in o)for(const c in o[l].nodes)jD(o[l].nodes[c],t.getStackInverse(),{isVertical:e,start:i,end:n,startMethod:r,endMethod:s,axisHelper:a})}_calculateRectPosition(e,t){var i,n;let r,s,a;t?(r="_dataToPosY1",s="_dataToPosY",a="_yAxisHelper"):(r="_dataToPosX1",s="_dataToPosX",a="_xAxisHelper");const o=null===(n=(i=this[a]).getScale)||void 0===n?void 0:n.call(i,0),l=this[a].isInverse(),c=this._spec.barMinHeight,h=fk(this[r](e),o),d=fk(this[s](e),o);let u=Math.abs(h-d);u<c&&(u=c);let p=1;return d<h?p=-1:d===h&&(p=t?l?1:-1:l?-1:1),h+p*u}_dataToPosX(e){return this.dataToPositionX(e)}_dataToPosX1(e){return this.dataToPositionX1(e)}_dataToPosY(e){return this.dataToPositionY(e)}_dataToPosY1(e){return this.dataToPositionY1(e)}initBandRectMarkStyle(){var e,t,i,n;const r=null===(t=null===(e=this._xAxisHelper)||void 0===e?void 0:e.getScale)||void 0===t?void 0:t.call(e,0),s=null===(n=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===n?void 0:n.call(i,0);"horizontal"===this.direction?this.setMarkStyle(this._barMark,{x:e=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),e[Zt]):this._spec.barMinHeight?this._calculateRectPosition(e,!1):fk(this._dataToPosX(e),r),x1:e=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),e[Qt]):fk(this._dataToPosX1(e),r),y:e=>this._getPosition(this.direction,e),height:()=>this._getBarWidth(this._yAxisHelper)},"normal",Tw.Series):this.setMarkStyle(this._barMark,{x:e=>this._getPosition(this.direction,e),y:(e,t,i,n)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),e[$t]):this._spec.barMinHeight?this._calculateRectPosition(e,!0):fk(this._dataToPosY(e),s),y1:e=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),e[Jt]):fk(this._dataToPosY1(e),s),width:()=>this._getBarWidth(this._xAxisHelper)},"normal",Tw.Series),this._initBarBackgroundMarkStyle()}_initBarBackgroundMarkStyle(){var e,t,i,n;if(!this._barBackgroundMark)return;const r=null===(t=null===(e=this._xAxisHelper)||void 0===e?void 0:e.getScale)||void 0===t?void 0:t.call(e,0),s=null===(n=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===n?void 0:n.call(i,0);"horizontal"===this.direction?this.setMarkStyle(this._barBackgroundMark,{x:()=>{const e=r.range();return Math.min(e[0],e[e.length-1])},x1:()=>{const e=r.range();return Math.max(e[0],e[e.length-1])},y:e=>this._getPosition(this.direction,e),height:()=>this._getBarWidth(this._yAxisHelper)},"normal",Tw.Series):this.setMarkStyle(this._barBackgroundMark,{x:e=>this._getPosition(this.direction,e),y:()=>{const e=s.range();return Math.min(e[0],e[e.length-1])},y1:()=>{const e=s.range();return Math.max(e[0],e[e.length-1])},width:()=>this._getBarWidth(this._xAxisHelper)},"normal",Tw.Series)}initLinearRectMarkStyle(){var e,t,i,n;const r=null===(t=null===(e=this._xAxisHelper)||void 0===e?void 0:e.getScale)||void 0===t?void 0:t.call(e,0),s=null===(n=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===n?void 0:n.call(i,0);"vertical"===this.direction?this.setMarkStyle(this._barMark,{x:e=>fk(this.dataToPositionX(e),r),x1:e=>fk(this.dataToPositionX1(e),r),y:(e,t,i,n)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),e[$t]):this._spec.barMinHeight?this._calculateRectPosition(e,!0):fk(this.dataToPositionY(e),s),y1:e=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),e[Jt]):fk(this.dataToPositionY1(e),s)},"normal",Tw.Series):this.setMarkStyle(this._barMark,{x:e=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),e[Zt]):this._spec.barMinHeight?this._calculateRectPosition(e,!1):fk(this.dataToPositionX(e),r),x1:e=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),e[Qt]):fk(this.dataToPositionX1(e),r),y:e=>fk(this.dataToPositionY(e),s),y1:e=>fk(this.dataToPositionY1(e),s)},"normal",Tw.Series)}initAnimation(){var e,t;const i={yField:this._fieldY[0],xField:this._fieldX[0],direction:this.direction,growFrom:()=>{var e,t;return"horizontal"===this.direction?null===(e=this._xAxisHelper)||void 0===e?void 0:e.getScale(0).scale(0):null===(t=this._yAxisHelper)||void 0===t?void 0:t.getScale(0).scale(0)}},n=null===(e=this._spec.animationAppear)||void 0===e?void 0:e.preset,r=KR(this);this._barMark.setAnimationConfig(jR(null===(t=_n.getAnimationInKey("bar"))||void 0===t?void 0:t(i,n),FR(this._barMarkName,this._spec,this._markAttributeContext),r))}_getBarWidth(e){var t,i;const n=void 0!==this._spec.barWidth,r=null!==(i=null===(t=e.getBandwidth)||void 0===t?void 0:t.call(e,this._groups?this._groups.fields.length-1:0))&&void 0!==i?i:6;if(n)return re(this._spec.barWidth,r);const s=void 0!==this._spec.barMinWidth,a=void 0!==this._spec.barMaxWidth;let o=r;return s&&(o=Math.max(o,re(this._spec.barMinWidth,r))),a&&(o=Math.min(o,re(this._spec.barMaxWidth,r))),o}_getPosition(e,t){var i,n,r,s,a,o,l,c,h;let d,u,p;"horizontal"===e?(d=this.getYAxisHelper(),u="height",p=this.dataToPositionY.bind(this)):(d=this.getXAxisHelper(),u="width",p=this.dataToPositionX.bind(this));const g=d.getScale(0),f=this._barMark.getAttribute(u,t),m=null!==(n=null===(i=d.getBandwidth)||void 0===i?void 0:i.call(d,this._groups?this._groups.fields.length-1:0))&&void 0!==n?n:6;if((null===(s=null===(r=this._groups)||void 0===r?void 0:r.fields)||void 0===s?void 0:s.length)>1&&x(this._spec.barGapInGroup)){const e=this._groups.fields,i=z(this._spec.barGapInGroup);let n=0,r=0;for(let s=e.length-1;s>=1;s--){const d=e[s],u=null!==(c=null===(l=null===(o=null===(a=this.getViewDataStatistics())||void 0===a?void 0:a.latestData)||void 0===o?void 0:o[d])||void 0===l?void 0:l.values)&&void 0!==c?c:[],p=u.length,g=re(null!==(h=i[s-1])&&void 0!==h?h:H(i),m),v=u.indexOf(t[d]);s===e.length-1?(n+=p*f+(p-1)*g,r+=v*(f+g)):(r+=v*(n+g),n+=n+(p-1)*g)}return g.scale(t[e[0]])+d.getBandwidth(0)/2-n/2+r}const v=Cn(g.type||"band");return p(t)+.5*(m-f)+(v?-m/2:0)}onLayoutEnd(e){super.onLayoutEnd(e),this.getRegion()._bar_series_position_calculated=!1,this._spec.sampling&&this.compile()}compile(){if(super.compile(),this._spec.sampling){const{width:e,height:t}=this._region.getLayoutRect(),i=[],n=this._fieldY,r=this._fieldX;i.push({type:"sampling",size:"vertical"===this._direction?e:t,factor:this._spec.samplingFactor,yfield:"vertical"===this._direction?n[0]:r[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(i)}}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._barMark]}compileData(){var e;super.compileData(),null===(e=this._barBackgroundViewData)||void 0===e||e.compile()}fillData(){var e,t;super.fillData(),null===(t=null===(e=this._barBackgroundViewData)||void 0===e?void 0:e.getDataView())||void 0===t||t.reRunAllTransform()}viewDataUpdate(e){var t,i,n;super.viewDataUpdate(e),null===(i=null===(t=this._barBackgroundViewData)||void 0===t?void 0:t.getDataView())||void 0===i||i.reRunAllTransform(),null===(n=this._barBackgroundViewData)||void 0===n||n.updateData()}release(){var e;super.release(),null===(e=this._barBackgroundViewData)||void 0===e||e.release(),this._barBackgroundViewData=null}}BD.type=Bt.bar,BD.mark=ei,BD.transformerConstructor=FD;const ND=()=>{WM(),LD(),_n.registerAnimation("bar",((e,t)=>({appear:RD(e,t),enter:OD(e,!1),exit:PD(e,!1),disappear:PD(e)}))),_n.registerSeries(BD.type,BD)};class zD extends lD{_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{barWidth:e.barWidth,barMaxWidth:e.barMaxWidth,barMinWidth:e.barMinWidth,barGapInGroup:e.barGapInGroup,barMinHeight:e.barMinHeight,sampling:e.sampling,samplingFactor:e.samplingFactor,barBackground:e.barBackground})}transformSpec(e){super.transformSpec(e),dw(e)}}class HD extends fD{constructor(){super(...arguments),this.transformerConstructor=zD,this.type="bar",this.seriesType=Bt.bar,this._canStack=!0}}HD.type="bar",HD.seriesType=Bt.bar,HD.view="singleDefault",HD.transformerConstructor=zD;class VD extends kk{constructor(){super(...arguments),this.type=VD.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,length:3})}}VD.type="rect3d";const UD=()=>{_n.registerMark(VD.type,VD),Ok(),ET(),nm.registerGraphic(Vr.rect3d,fT),EM()};class WD extends BD{constructor(){super(...arguments),this.type=Bt.bar3d,this._barMarkName="bar3d",this._barMarkType="rect3d"}}WD.type=Bt.bar3d,WD.mark=ti;const GD=()=>{_n.registerAnimation("bar3d",((e,t)=>({appear:RD(e,t),enter:OD(e,!1),exit:PD(e,!1),disappear:PD(e)}))),UD(),_n.registerSeries(WD.type,WD)};class KD extends zD{_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{barWidth:e.barWidth,barMaxWidth:e.barMaxWidth,barMinWidth:e.barMinWidth,barGapInGroup:e.barGapInGroup})}}class YD extends HD{constructor(){super(...arguments),this.transformerConstructor=KD,this.type="bar3d",this.seriesType=Bt.bar3d}}YD.type="bar3d",YD.seriesType=Bt.bar3d,YD.view="singleDefault",YD.transformerConstructor=KD;const XD=e=>"string"==typeof e&&!isNaN(Number(e))&&!isNaN(parseFloat(e)),qD=[10,20],ZD=Sn.Linear,QD="circle",$D=Sn.Ordinal,JD=["circle","square","triangle","diamond","star"],eL=(e,t)=>"fadeIn"===t?{type:"fadeIn"}:{type:"scaleIn"};class tL extends UR{_transformLabelSpec(e){this._addMarkLabelSpec(e,"point")}}class iL extends YR{constructor(){super(...arguments),this.type=Bt.scatter,this.transformerConstructor=tL,this._invalidType="zero"}setAttrFromSpec(){super.setAttrFromSpec(),this._size=this._spec.size,this._sizeField=this._spec.sizeField,this._shape=this._spec.shape,this._shapeField=this._spec.shapeField}_getSeriesAttribute(e,t,i,n){let{defaultScaleType:r,defaultRange:s}=i;var a,o,l,c;if(Q(t))return t;if(v(t)){if(P(e))return null===(a=this._option)||void 0===a||a.onError("".concat(n,"Field is required.")),t;if("ordinal"!==r&&t.length>2)return null===(o=this._option)||void 0===o||o.onError("".concat(n," length is invalid, specify up to 2 ").concat(n,"s.")),t;const i="".concat(Ge,"_series_scatter_").concat(this.id,"_scale_").concat(n);return this._option.globalScale.registerModelScale({id:i,type:r,domain:[{dataId:this._rawData.name,fields:[e]}],range:t}),{scale:i,field:e}}if(D(t)){if(P(e))return null===(l=this._option)||void 0===l||l.onError("".concat(n,"Field is required.")),t;const i="".concat(Ge,"_series_scatter_").concat(this.id,"_scale_").concat(n),a=Object.assign({id:i,type:r,domain:[{dataId:this._rawData.name,fields:[e]}],range:s},t);return this._option.globalScale.registerModelScale(a),{scale:a.id,field:e}}return null===(c=this._option)||void 0===c||c.onError("".concat(n," attribute is invalid.")),t}getSizeAttribute(e,t){return P(t)?10:l(t)?t:_(t)&&XD(t)?parseFloat(t):this._getSeriesAttribute(e,t,{defaultScaleType:ZD,defaultRange:qD},"size")}getShapeAttribute(e,t){return P(t)?QD:_(t)?t:this._getSeriesAttribute(e,t,{defaultScaleType:$D,defaultRange:JD},"shape")}initMark(){var e;const t={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold};this._symbolMark=this._createMark(iL.mark.point,{morph:zR(this._spec,iL.mark.point.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,progressive:t,isSeriesMark:!0,customShape:null===(e=this._spec.point)||void 0===e?void 0:e.customShape})}initMarkStyle(){this.initSymbolMarkStyle()}initAnimation(){var e,t,i;const n=KR(this),r=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset;this._symbolMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("scatter"))||void 0===i?void 0:i({},r),FR("point",this._spec,this._markAttributeContext),n))}initSymbolMarkStyle(){const e=this._symbolMark;e&&("zero"!==this._invalidType&&this.setMarkStyle(e,{visible:this._getInvalidDefined}),this.setMarkStyle(e,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,fill:this.getColorAttribute(),size:l(this._size)||Q(this._size)?this._size:10,symbolType:_(this._shape)||Q(this._shape)?this._shape:QD},fw.STATE_NORMAL,Tw.Series),(x(this._sizeField)||x(this._size))&&this.setMarkStyle(e,{size:this.getSizeAttribute(this._sizeField,this._size)},fw.STATE_NORMAL,Tw.User_Mark),(x(this._shapeField)||x(this._shape))&&this.setMarkStyle(e,{symbolType:this.getShapeAttribute(this._shapeField,this._shape)},fw.STATE_NORMAL,Tw.User_Mark),this._trigger.registerMark(e))}initTooltip(){super.initTooltip(),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)}viewDataStatisticsUpdate(e){super.viewDataStatisticsUpdate(e);const t=[this.getDimensionField()[0],this.getStackValueField()].every((e=>{var t,i,n;return e&&(null===(n=null===(i=null===(t=this.getViewDataStatistics())||void 0===t?void 0:t.latestData)||void 0===i?void 0:i[e])||void 0===n?void 0:n.allValid)}));"zero"===this._invalidType||t?this.setMarkStyle(this._symbolMark,{visible:!0},"normal",Tw.Series):this.setMarkStyle(this._symbolMark,{visible:this._getInvalidDefined},"normal",Tw.Series)}initLabelMarkStyle(e){e&&(this._labelMark=e,this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null},fw.STATE_NORMAL,Tw.Series),"zero"!==this._invalidType&&this.setMarkStyle(e,{visible:this._getInvalidDefined},fw.STATE_NORMAL,Tw.Series))}handleZoom(e){var t,i;this.getMarksWithoutRoot().forEach((e=>{const t=e.getProduct();t&&t.elements&&t.elements.length&&t.elements.forEach(((e,t)=>{const i=e.getGraphicItem(),n=e.getDatum(),r=this.dataToPosition(n);r&&i&&i.translateTo(r.x,r.y)}))}));const n=null===(i=null===(t=this._labelMark)||void 0===t?void 0:t.getComponent())||void 0===i?void 0:i.getProduct();n&&n.evaluateSync(null,null)}handlePan(e){var t,i;this.getMarksWithoutRoot().forEach((e=>{const t=e.getProduct();t&&t.elements&&t.elements.length&&t.elements.forEach(((e,t)=>{const i=e.getGraphicItem(),n=e.getDatum(),r=this.dataToPosition(n);r&&i&&i.translateTo(r.x,r.y)}))}));const n=null===(i=null===(t=this._labelMark)||void 0===t?void 0:t.getComponent())||void 0===i?void 0:i.getProduct();n&&n.evaluateSync(null,null)}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._symbolMark]}}iL.type=Bt.scatter,iL.mark=ri,iL.transformerConstructor=tL;const nL=()=>{rD(),_n.registerAnimation("scatter",((e,t)=>Object.assign({appear:eL(0,t)},SM))),_n.registerSeries(iL.type,iL)};class rL extends lD{_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{point:e.point,size:e.size,sizeField:e.sizeField,shape:e.shape,shapeField:e.shapeField})}}class sL extends fD{constructor(){super(...arguments),this.transformerConstructor=rL,this.type="scatter",this.seriesType=Bt.scatter,this._canStack=!0}}sL.type="scatter",sL.seriesType=Bt.scatter,sL.view="singleDefault",sL.transformerConstructor=rL;function aL(){var e,t=[];return{point:function(t,i,n){e.push([t,i,n])},lineStart:function(){t.push(e=[])},lineEnd:Ds,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],e=null,i}}}function oL(e,t){return xs(e[0]-t[0])<gs&&xs(e[1]-t[1])<gs}function lL(e,t,i,n){this.x=e,this.z=t,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function cL(e,t,i,n,r){var s,a,o=[],l=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,i,n=e[0],a=e[t];if(oL(n,a)){if(!n[2]&&!a[2]){for(r.lineStart(),s=0;s<t;++s)r.point((n=e[s])[0],n[1]);return void r.lineEnd()}a[0]+=2*gs}o.push(i=new lL(n,e,null,!0)),l.push(i.o=new lL(n,null,i,!1)),o.push(i=new lL(a,e,null,!1)),l.push(i.o=new lL(a,null,i,!0))}})),o.length){for(l.sort(t),hL(o),hL(l),s=0,a=l.length;s<a;++s)l[s].e=i=!i;for(var c,h,d=o[0];;){for(var u=d,p=!0;u.v;)if((u=u.n)===d)return;c=u.z,r.lineStart();do{if(u.v=u.o.v=!0,u.e){if(p)for(s=0,a=c.length;s<a;++s)r.point((h=c[s])[0],h[1]);else n(u.x,u.n.x,1,r);u=u.n}else{if(p)for(c=u.p.z,s=c.length-1;s>=0;--s)r.point((h=c[s])[0],h[1]);else n(u.x,u.p.x,-1,r);u=u.p}c=(u=u.o).z,p=!p}while(!u.v);r.lineEnd()}}}function hL(e){if(t=e.length){for(var t,i,n=0,r=e[0];++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function dL(e){return[ws(e[1],e[0]),Rs(e[2])]}function uL(e){var t=e[0],i=e[1],n=Cs(i);return[n*Cs(t),n*Ts(t),Ts(i)]}function pL(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gL(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function fL(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function mL(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function vL(e){var t=Ps(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var yL=hs();function bL(e){return xs(e[0])<=fs?e[0]:Os(e[0])*((xs(e[0])+fs)%ys-fs)}function _L(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var xL=function(e){var t;return 1===e.length&&(t=e,e=function(e,i){return _L(t(e),i)}),{left:function(t,i,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var s=n+r>>>1;e(t[s],i)<0?n=s+1:r=s}return n},right:function(t,i,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var s=n+r>>>1;e(t[s],i)>0?r=s:n=s+1}return n}}}(_L);xL.right,xL.left;var SL=Array.prototype;SL.slice,SL.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function wL(e){for(var t,i,n,r=e.length,s=-1,a=0;++s<r;)a+=e[s].length;for(i=new Array(a);--r>=0;)for(t=(n=e[r]).length;--t>=0;)i[--a]=n[t];return i}function CL(e,t,i,n){return function(r){var s,a,o,l=t(r),c=aL(),h=t(c),d=!1,u={point:p,lineStart:f,lineEnd:m,polygonStart:function(){u.point=v,u.lineStart=y,u.lineEnd=b,a=[],s=[]},polygonEnd:function(){u.point=p,u.lineStart=f,u.lineEnd=m,a=wL(a);var e=function(e,t){var i=bL(t),n=t[1],r=Ts(n),s=[Ts(i),-Cs(i),0],a=0,o=0;yL.reset(),1===r?n=ms+gs:-1===r&&(n=-ms-gs);for(var l=0,c=e.length;l<c;++l)if(d=(h=e[l]).length)for(var h,d,u=h[d-1],p=bL(u),g=u[1]/2+vs,f=Ts(g),m=Cs(g),v=0;v<d;++v,p=b,f=x,m=S,u=y){var y=h[v],b=bL(y),_=y[1]/2+vs,x=Ts(_),S=Cs(_),w=b-p,C=w>=0?1:-1,k=C*w,A=k>fs,E=f*x;if(yL.add(ws(E*C*Ts(k),m*S+E*Cs(k))),a+=A?w+C*ys:w,A^p>=i^b>=i){var T=gL(uL(u),uL(y));vL(T);var O=gL(s,T);vL(O);var P=(A^w>=0?-1:1)*Rs(O[2]);(n>P||n===P&&(T[0]||T[1]))&&(o+=A^w>=0?1:-1)}}return(a<-gs||a<gs&&yL<-gs)^1&o}(s,n);a.length?(d||(r.polygonStart(),d=!0),cL(a,AL,e,i,r)):e&&(d||(r.polygonStart(),d=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),a=s=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(t,i){e(t,i)&&r.point(t,i)}function g(e,t){l.point(e,t)}function f(){u.point=g,l.lineStart()}function m(){u.point=p,l.lineEnd()}function v(e,t){o.push([e,t]),h.point(e,t)}function y(){h.lineStart(),o=[]}function b(){v(o[0][0],o[0][1]),h.lineEnd();var e,t,i,n,l=h.clean(),u=c.result(),p=u.length;if(o.pop(),s.push(o),o=null,p)if(1&l){if((t=(i=u[0]).length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),e=0;e<t;++e)r.point((n=i[e])[0],n[1]);r.lineEnd()}}else p>1&&2&l&&u.push(u.pop().concat(u.shift())),a.push(u.filter(kL))}return u}}function kL(e){return e.length>1}function AL(e,t){return((e=e.x)[0]<0?e[1]-ms-gs:ms-e[1])-((t=t.x)[0]<0?t[1]-ms-gs:ms-t[1])}const EL=CL((function(){return!0}),(function(e){var t,i=NaN,n=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,a){var o=s>0?fs:-fs,l=xs(s-i);xs(l-fs)<gs?(e.point(i,n=(n+a)/2>0?ms:-ms),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(s,n),t=0):r!==o&&l>=fs&&(xs(i-r)<gs&&(i-=r*gs),xs(s-o)<gs&&(s-=o*gs),n=function(e,t,i,n){var r,s,a=Ts(e-i);return xs(a)>gs?Ss((Ts(t)*(s=Cs(n))*Ts(i)-Ts(n)*(r=Cs(t))*Ts(e))/(r*s*a)):(t+n)/2}(i,n,s,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),t=0),e.point(i=s,n=a),r=o},lineEnd:function(){e.lineEnd(),i=n=NaN},clean:function(){return 2-t}}}),(function(e,t,i,n){var r;if(null==e)r=i*ms,n.point(-fs,r),n.point(0,r),n.point(fs,r),n.point(fs,0),n.point(fs,-r),n.point(0,-r),n.point(-fs,-r),n.point(-fs,0),n.point(-fs,r);else if(xs(e[0]-t[0])>gs){var s=e[0]<t[0]?fs:-fs;r=i*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(t[0],t[1])}),[-fs,-ms]);function TL(e,t,i,n,r,s){if(i){var a=Cs(t),o=Ts(t),l=n*i;null==r?(r=t+n*ys,s=t-l/2):(r=OL(a,r),s=OL(a,s),(n>0?r<s:r>s)&&(r+=n*ys));for(var c,h=r;n>0?h>s:h<s;h-=l)c=dL([a,-o*Cs(h),-o*Ts(h)]),e.point(c[0],c[1])}}function OL(e,t){(t=uL(t))[0]-=e,vL(t);var i=Is(-t[1]);return((-t[2]<0?-i:i)+ys-gs)%ys}var PL=1e9,ML=-PL;function IL(e,t,i,n){function r(r,s){return e<=r&&r<=i&&t<=s&&s<=n}function s(r,s,o,c){var h=0,d=0;if(null==r||(h=a(r,o))!==(d=a(s,o))||l(r,s)<0^o>0)do{c.point(0===h||3===h?e:i,h>1?n:t)}while((h=(h+o+4)%4)!==d);else c.point(s[0],s[1])}function a(n,r){return xs(n[0]-e)<gs?r>0?0:3:xs(n[0]-i)<gs?r>0?2:1:xs(n[1]-t)<gs?r>0?1:0:r>0?3:2}function o(e,t){return l(e.x,t.x)}function l(e,t){var i=a(e,1),n=a(t,1);return i!==n?i-n:0===i?t[1]-e[1]:1===i?e[0]-t[0]:2===i?e[1]-t[1]:t[0]-e[0]}return function(a){var l,c,h,d,u,p,g,f,m,v,y,b=a,_=aL(),x={point:S,lineStart:function(){x.point=w,c&&c.push(h=[]);v=!0,m=!1,g=f=NaN},lineEnd:function(){l&&(w(d,u),p&&m&&_.rejoin(),l.push(_.result()));x.point=S,m&&b.lineEnd()},polygonStart:function(){b=_,l=[],c=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,i=0,r=c.length;i<r;++i)for(var s,a,o=c[i],l=1,h=o.length,d=o[0],u=d[0],p=d[1];l<h;++l)s=u,a=p,u=(d=o[l])[0],p=d[1],a<=n?p>n&&(u-s)*(n-a)>(p-a)*(e-s)&&++t:p<=n&&(u-s)*(n-a)<(p-a)*(e-s)&&--t;return t}(),i=y&&t,r=(l=wL(l)).length;(i||r)&&(a.polygonStart(),i&&(a.lineStart(),s(null,null,1,a),a.lineEnd()),r&&cL(l,o,t,s,a),a.polygonEnd());b=a,l=c=h=null}};function S(e,t){r(e,t)&&b.point(e,t)}function w(s,a){var o=r(s,a);if(c&&h.push([s,a]),v)d=s,u=a,p=o,v=!1,o&&(b.lineStart(),b.point(s,a));else if(o&&m)b.point(s,a);else{var l=[g=Math.max(ML,Math.min(PL,g)),f=Math.max(ML,Math.min(PL,f))],_=[s=Math.max(ML,Math.min(PL,s)),a=Math.max(ML,Math.min(PL,a))];!function(e,t,i,n,r,s){var a,o=e[0],l=e[1],c=0,h=1,d=t[0]-o,u=t[1]-l;if(a=i-o,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>c&&(c=a)}if(a=r-o,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<h&&(h=a)}if(a=n-l,u||!(a>0)){if(a/=u,u<0){if(a<c)return;a<h&&(h=a)}else if(u>0){if(a>h)return;a>c&&(c=a)}if(a=s-l,u||!(a<0)){if(a/=u,u<0){if(a>h)return;a>c&&(c=a)}else if(u>0){if(a<c)return;a<h&&(h=a)}return c>0&&(e[0]=o+c*d,e[1]=l+c*u),h<1&&(t[0]=o+h*d,t[1]=l+h*u),!0}}}}}(l,_,e,t,i,n)?o&&(b.lineStart(),b.point(s,a),y=!1):(m||(b.lineStart(),b.point(l[0],l[1])),b.point(_[0],_[1]),o||b.lineEnd(),y=!1)}g=s,f=a,m=o}return x}}function RL(e,t){function i(i,n){return i=e(i,n),t(i[0],i[1])}return e.invert&&t.invert&&(i.invert=function(i,n){return(i=t.invert(i,n))&&e.invert(i[0],i[1])}),i}function DL(e,t){return[xs(e)>fs?e+Math.round(-e/ys)*ys:e,t]}function LL(e,t,i){return(e%=ys)?t||i?RL(FL(e),BL(t,i)):FL(e):t||i?BL(t,i):DL}function jL(e){return function(t,i){return[(t+=e)>fs?t-ys:t<-fs?t+ys:t,i]}}function FL(e){var t=jL(e);return t.invert=jL(-e),t}function BL(e,t){var i=Cs(e),n=Ts(e),r=Cs(t),s=Ts(t);function a(e,t){var a=Cs(t),o=Cs(e)*a,l=Ts(e)*a,c=Ts(t),h=c*i+o*n;return[ws(l*r-h*s,o*i-c*n),Rs(h*r+l*s)]}return a.invert=function(e,t){var a=Cs(t),o=Cs(e)*a,l=Ts(e)*a,c=Ts(t),h=c*r-l*s;return[ws(l*r+c*s,o*i+h*n),Rs(h*i-o*n)]},a}function NL(e){return function(t){var i=new zL;for(var n in e)i[n]=e[n];return i.stream=t,i}}function zL(){}function HL(e,t,i){var n=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=n&&e.clipExtent(null),cs(i,e.stream($s)),t($s.result()),null!=n&&e.clipExtent(n),e}function VL(e,t,i){return HL(e,(function(i){var n=t[1][0]-t[0][0],r=t[1][1]-t[0][1],s=Math.min(n/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),a=+t[0][0]+(n-s*(i[1][0]+i[0][0]))/2,o=+t[0][1]+(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,o])}),i)}function UL(e,t,i){return VL(e,[[0,0],t],i)}function WL(e,t,i){return HL(e,(function(i){var n=+t,r=n/(i[1][0]-i[0][0]),s=(n-r*(i[1][0]+i[0][0]))/2,a=-r*i[0][1];e.scale(150*r).translate([s,a])}),i)}function GL(e,t,i){return HL(e,(function(i){var n=+t,r=n/(i[1][1]-i[0][1]),s=-r*i[0][0],a=(n-r*(i[1][1]+i[0][1]))/2;e.scale(150*r).translate([s,a])}),i)}DL.invert=DL,zL.prototype={constructor:zL,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var KL=16,YL=Cs(30*_s);function XL(e,t){return+t?function(e,t){function i(n,r,s,a,o,l,c,h,d,u,p,g,f,m){var v=c-n,y=h-r,b=v*v+y*y;if(b>4*t&&f--){var _=a+u,x=o+p,S=l+g,w=Ps(_*_+x*x+S*S),C=Rs(S/=w),k=xs(xs(S)-1)<gs||xs(s-d)<gs?(s+d)/2:ws(x,_),A=e(k,C),E=A[0],T=A[1],O=E-n,P=T-r,M=y*O-v*P;(M*M/b>t||xs((v*O+y*P)/b-.5)>.3||a*u+o*p+l*g<YL)&&(i(n,r,s,a,o,l,E,T,k,_/=w,x/=w,S,f,m),m.point(E,T),i(E,T,k,_,x,S,c,h,d,u,p,g,f,m))}}return function(t){var n,r,s,a,o,l,c,h,d,u,p,g,f={point:m,lineStart:v,lineEnd:b,polygonStart:function(){t.polygonStart(),f.lineStart=_},polygonEnd:function(){t.polygonEnd(),f.lineStart=v}};function m(i,n){i=e(i,n),t.point(i[0],i[1])}function v(){h=NaN,f.point=y,t.lineStart()}function y(n,r){var s=uL([n,r]),a=e(n,r);i(h,d,c,u,p,g,h=a[0],d=a[1],c=n,u=s[0],p=s[1],g=s[2],KL,t),t.point(h,d)}function b(){f.point=m,t.lineEnd()}function _(){v(),f.point=x,f.lineEnd=S}function x(e,t){y(n=e,t),r=h,s=d,a=u,o=p,l=g,f.point=y}function S(){i(h,d,c,u,p,g,r,s,n,a,o,l,KL,t),f.lineEnd=b,b()}return f}}(e,t):function(e){return NL({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}(e)}var qL=NL({point:function(e,t){this.stream.point(e*_s,t*_s)}});function ZL(e,t,i,n,r){function s(s,a){return[t+e*(s*=n),i-e*(a*=r)]}return s.invert=function(s,a){return[(s-t)/e*n,(i-a)/e*r]},s}function QL(e,t,i,n,r,s){var a=Cs(s),o=Ts(s),l=a*e,c=o*e,h=a/e,d=o/e,u=(o*i-a*t)/e,p=(o*t+a*i)/e;function g(e,s){return[l*(e*=n)-c*(s*=r)+t,i-c*e-l*s]}return g.invert=function(e,t){return[n*(h*e-d*t+u),r*(p-d*e-h*t)]},g}function $L(e){return JL((function(){return e}))()}function JL(e){var t,i,n,r,s,a,o,l,c,h,d=150,u=480,p=250,g=0,f=0,m=0,v=0,y=0,b=0,_=1,x=1,S=null,w=EL,C=null,k=ns,A=.5;function E(e){return l(e[0]*_s,e[1]*_s)}function T(e){return(e=l.invert(e[0],e[1]))&&[e[0]*bs,e[1]*bs]}function O(){var e=QL(d,0,0,_,x,b).apply(null,t(g,f)),n=(b?QL:ZL)(d,u-e[0],p-e[1],_,x,b);return i=LL(m,v,y),o=RL(t,n),l=RL(i,o),a=XL(o,A),P()}function P(){return c=h=null,E}return E.stream=function(e){return c&&h===e?c:c=qL(function(e){return NL({point:function(t,i){var n=e(t,i);return this.stream.point(n[0],n[1])}})}(i)(w(a(k(h=e)))))},E.preclip=function(e){return arguments.length?(w=e,S=void 0,P()):w},E.postclip=function(e){return arguments.length?(k=e,C=n=r=s=null,P()):k},E.clipAngle=function(e){return arguments.length?(w=+e?function(e){var t=Cs(e),i=6*_s,n=t>0,r=xs(t)>gs;function s(e,i){return Cs(e)*Cs(i)>t}function a(e,i,n){var r=[1,0,0],s=gL(uL(e),uL(i)),a=pL(s,s),o=s[0],l=a-o*o;if(!l)return!n&&e;var c=t*a/l,h=-t*o/l,d=gL(r,s),u=mL(r,c);fL(u,mL(s,h));var p=d,g=pL(u,p),f=pL(p,p),m=g*g-f*(pL(u,u)-1);if(!(m<0)){var v=Ps(m),y=mL(p,(-g-v)/f);if(fL(y,u),y=dL(y),!n)return y;var b,_=e[0],x=i[0],S=e[1],w=i[1];x<_&&(b=_,_=x,x=b);var C=x-_,k=xs(C-fs)<gs;if(!k&&w<S&&(b=S,S=w,w=b),k||C<gs?k?S+w>0^y[1]<(xs(y[0]-_)<gs?S:w):S<=y[1]&&y[1]<=w:C>fs^(_<=y[0]&&y[0]<=x)){var A=mL(p,(-g+v)/f);return fL(A,u),[y,dL(A)]}}}function o(t,i){var r=n?e:fs-e,s=0;return t<-r?s|=1:t>r&&(s|=2),i<-r?s|=4:i>r&&(s|=8),s}return CL(s,(function(e){var t,i,l,c,h;return{lineStart:function(){c=l=!1,h=1},point:function(d,u){var p,g=[d,u],f=s(d,u),m=n?f?0:o(d,u):f?o(d+(d<0?fs:-fs),u):0;if(!t&&(c=l=f)&&e.lineStart(),f!==l&&(!(p=a(t,g))||oL(t,p)||oL(g,p))&&(g[2]=1),f!==l)h=0,f?(e.lineStart(),p=a(g,t),e.point(p[0],p[1])):(p=a(t,g),e.point(p[0],p[1],2),e.lineEnd()),t=p;else if(r&&t&&n^f){var v;m&i||!(v=a(g,t,!0))||(h=0,n?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1],3)))}!f||t&&oL(t,g)||e.point(g[0],g[1]),t=g,l=f,i=m},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return h|(c&&l)<<1}}}),(function(t,n,r,s){TL(s,e,i,r,t,n)}),n?[0,-e]:[-fs,e-fs])}(S=e*_s):(S=null,EL),P()):S*bs},E.clipExtent=function(e){return arguments.length?(k=null==e?(C=n=r=s=null,ns):IL(C=+e[0][0],n=+e[0][1],r=+e[1][0],s=+e[1][1]),P()):null==C?null:[[C,n],[r,s]]},E.scale=function(e){return arguments.length?(d=+e,O()):d},E.translate=function(e){return arguments.length?(u=+e[0],p=+e[1],O()):[u,p]},E.center=function(e){return arguments.length?(g=e[0]%360*_s,f=e[1]%360*_s,O()):[g*bs,f*bs]},E.rotate=function(e){return arguments.length?(m=e[0]%360*_s,v=e[1]%360*_s,y=e.length>2?e[2]%360*_s:0,O()):[m*bs,v*bs,y*bs]},E.angle=function(e){return arguments.length?(b=e%360*_s,O()):b*bs},E.reflectX=function(e){return arguments.length?(_=e?-1:1,O()):_<0},E.reflectY=function(e){return arguments.length?(x=e?-1:1,O()):x<0},E.precision=function(e){return arguments.length?(a=XL(o,A=e*e),P()):Ps(A)},E.fitExtent=function(e,t){return VL(E,e,t)},E.fitSize=function(e,t){return UL(E,e,t)},E.fitWidth=function(e,t){return WL(E,e,t)},E.fitHeight=function(e,t){return GL(E,e,t)},function(){return t=e.apply(this,arguments),E.invert=t.invert&&T,O()}}function ej(e){var t=0,i=fs/3,n=JL(e),r=n(t,i);return r.parallels=function(e){return arguments.length?n(t=e[0]*_s,i=e[1]*_s):[t*bs,i*bs]},r}function tj(e,t){var i=Ts(e),n=(i+Ts(t))/2;if(xs(n)<gs)return function(e){var t=Cs(e);function i(e,i){return[e*t,Ts(i)/t]}return i.invert=function(e,i){return[e/t,Rs(i*t)]},i}(e);var r=1+i*(2*n-i),s=Ps(r)/n;function a(e,t){var i=Ps(r-2*n*Ts(t))/n;return[i*Ts(e*=n),s-i*Cs(e)]}return a.invert=function(e,t){var i=s-t,a=ws(e,xs(i))*Os(i);return i*n<0&&(a-=fs*Os(e)*Os(i)),[a/n,Rs((r-(e*e+i*i)*n*n)/(2*n))]},a}function ij(){return ej(tj).scale(155.424).center([0,33.6442])}function nj(){return ij().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function rj(e){return function(t,i){var n=Cs(t),r=Cs(i),s=e(n*r);return[s*r*Ts(t),s*Ts(i)]}}function sj(e){return function(t,i){var n=Ps(t*t+i*i),r=e(n),s=Ts(r),a=Cs(r);return[ws(t*s,n*a),Rs(n&&i*s/n)]}}var aj=rj((function(e){return Ps(2/(1+e))}));aj.invert=sj((function(e){return 2*Rs(e/2)}));var oj=rj((function(e){return(e=Is(e))&&e/Ts(e)}));function lj(e,t){return[e,As(Ms((ms+t)/2))]}function cj(e){var t,i,n,r=$L(e),s=r.center,a=r.scale,o=r.translate,l=r.clipExtent,c=null;function h(){var s=fs*a(),o=r(function(e){function t(t){return(t=e(t[0]*_s,t[1]*_s))[0]*=bs,t[1]*=bs,t}return e=LL(e[0]*_s,e[1]*_s,e.length>2?e[2]*_s:0),t.invert=function(t){return(t=e.invert(t[0]*_s,t[1]*_s))[0]*=bs,t[1]*=bs,t},t}(r.rotate()).invert([0,0]));return l(null==c?[[o[0]-s,o[1]-s],[o[0]+s,o[1]+s]]:e===lj?[[Math.max(o[0]-s,c),t],[Math.min(o[0]+s,i),n]]:[[c,Math.max(o[1]-s,t)],[i,Math.min(o[1]+s,n)]])}return r.scale=function(e){return arguments.length?(a(e),h()):a()},r.translate=function(e){return arguments.length?(o(e),h()):o()},r.center=function(e){return arguments.length?(s(e),h()):s()},r.clipExtent=function(e){return arguments.length?(null==e?c=t=i=n=null:(c=+e[0][0],t=+e[0][1],i=+e[1][0],n=+e[1][1]),h()):null==c?null:[[c,t],[i,n]]},h()}function hj(e){return Ms((ms+e)/2)}function dj(e,t){var i=Cs(e),n=e===t?Ts(e):As(i/Cs(t))/As(hj(t)/hj(e)),r=i*Es(hj(e),n)/n;if(!n)return lj;function s(e,t){r>0?t<-ms+gs&&(t=-ms+gs):t>ms-gs&&(t=ms-gs);var i=r/Es(hj(t),n);return[i*Ts(n*e),r-i*Cs(n*e)]}return s.invert=function(e,t){var i=r-t,s=Os(n)*Ps(e*e+i*i),a=ws(e,xs(i))*Os(i);return i*n<0&&(a-=fs*Os(e)*Os(i)),[a/n,2*Ss(Es(r/s,1/n))-ms]},s}function uj(e,t){return[e,t]}function pj(e,t){var i=Cs(e),n=e===t?Ts(e):(i-Cs(t))/(t-e),r=i/n+e;if(xs(n)<gs)return uj;function s(e,t){var i=r-t,s=n*e;return[i*Ts(s),r-i*Cs(s)]}return s.invert=function(e,t){var i=r-t,s=ws(e,xs(i))*Os(i);return i*n<0&&(s-=fs*Os(e)*Os(i)),[s/n,r-Os(n)*Ps(e*e+i*i)]},s}oj.invert=sj((function(e){return e})),lj.invert=function(e,t){return[e,2*Ss(ks(t))-ms]},uj.invert=uj;var gj=1.340264,fj=-.081106,mj=893e-6,vj=.003796,yj=Ps(3)/2;function bj(e,t){var i=Rs(yj*Ts(t)),n=i*i,r=n*n*n;return[e*Cs(i)/(yj*(gj+3*fj*n+r*(7*mj+9*vj*n))),i*(gj+fj*n+r*(mj+vj*n))]}function _j(e,t){var i=Cs(t),n=Cs(e)*i;return[i*Ts(e)/n,Ts(t)/n]}function xj(e,t){var i=t*t,n=i*i;return[e*(.8707-.131979*i+n*(n*(.003971*i-.001529*n)-.013791)),t*(1.007226+i*(.015085+n*(.028874*i-.044475-.005916*n)))]}function Sj(e,t){return[Cs(t)*Ts(e),Ts(t)]}function wj(e,t){var i=Cs(t),n=1+Cs(e)*i;return[i*Ts(e)/n,Ts(t)/n]}function Cj(e,t){return[As(Ms((ms+t)/2)),-e]}bj.invert=function(e,t){for(var i,n=t,r=n*n,s=r*r*r,a=0;a<12&&(s=(r=(n-=i=(n*(gj+fj*r+s*(mj+vj*r))-t)/(gj+3*fj*r+s*(7*mj+9*vj*r)))*n)*r*r,!(xs(i)<1e-12));++a);return[yj*e*(gj+3*fj*r+s*(7*mj+9*vj*r))/Cs(n),Rs(Ts(n)/yj)]},_j.invert=sj(Ss),xj.invert=function(e,t){var i,n=t,r=25;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(.028874*s-.044475-.005916*a)))-t)/(1.007226+s*(.045255+a*(.259866*s-.311325-.005916*11*a)))}while(xs(i)>gs&&--r>0);return[e/(.8707+(s=n*n)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),n]},Sj.invert=sj(Rs),wj.invert=sj((function(e){return 2*Ss(e)})),Cj.invert=function(e,t){return[-t,2*Ss(ks(e))-ms]};ja();const kj={},Aj=["clipAngle","clipExtent","scale","translate","center","rotate","precision","reflectX","reflectY","parallels","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Ej(e,t){e&&_(e)||Am("Projection type must be a name string.");const i=e.toLowerCase();return arguments.length>1&&(kj[i]=function(e,t){return function i(){const n=t();return n.type=e,n.path=ja().projection(n),n.copy=n.copy||function(){const e=i();return Aj.forEach((t=>{n[t]&&e[t](n[t]())})),e.path.pointRadius(n.path.pointRadius()),e},n}}(i,t)),kj[i]||null}const Tj={albers:nj,albersusa:function(){var e,t,i,n,r,s,a=nj(),o=ij().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=ij().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){s=[e,t]}};function h(e){var t=e[0],a=e[1];return s=null,i.point(t,a),s||(n.point(t,a),s)||(r.point(t,a),s)}function d(){return e=t=null,h}return h.invert=function(e){var t=a.scale(),i=a.translate(),n=(e[0]-i[0])/t,r=(e[1]-i[1])/t;return(r>=.12&&r<.234&&n>=-.425&&n<-.214?o:r>=.166&&r<.234&&n>=-.214&&n<-.115?l:a).invert(e)},h.stream=function(i){return e&&t===i?e:e=function(e){var t=e.length;return{point:function(i,n){for(var r=-1;++r<t;)e[r].point(i,n)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}([a.stream(t=i),o.stream(i),l.stream(i)])},h.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),l.precision(e),d()):a.precision()},h.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),l.scale(e),h.translate(a.translate())):a.scale()},h.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),s=+e[0],h=+e[1];return i=a.translate(e).clipExtent([[s-.455*t,h-.238*t],[s+.455*t,h+.238*t]]).stream(c),n=o.translate([s-.307*t,h+.201*t]).clipExtent([[s-.425*t+gs,h+.12*t+gs],[s-.214*t-gs,h+.234*t-gs]]).stream(c),r=l.translate([s-.205*t,h+.212*t]).clipExtent([[s-.214*t+gs,h+.166*t+gs],[s-.115*t-gs,h+.234*t-gs]]).stream(c),d()},h.fitExtent=function(e,t){return VL(h,e,t)},h.fitSize=function(e,t){return UL(h,e,t)},h.fitWidth=function(e,t){return WL(h,e,t)},h.fitHeight=function(e,t){return GL(h,e,t)},h.scale(1070)},azimuthalequalarea:function(){return $L(aj).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return $L(oj).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return ej(dj).scale(109.5).parallels([30,30])},conicequalarea:ij,conicequidistant:function(){return ej(pj).scale(131.154).center([0,13.9389])},equalEarth:function(){return $L(bj).scale(177.158)},equirectangular:function(){return $L(uj).scale(152.63)},gnomonic:function(){return $L(_j).scale(144.049).clipAngle(60)},identity:function(){var e,t,i,n,r,s,a,o=1,l=0,c=0,h=1,d=1,u=0,p=null,g=1,f=1,m=NL({point:function(e,t){var i=b([e,t]);this.stream.point(i[0],i[1])}}),v=ns;function y(){return g=o*h,f=o*d,s=a=null,b}function b(i){var n=i[0]*g,r=i[1]*f;if(u){var s=r*e-n*t;n=n*e+r*t,r=s}return[n+l,r+c]}return b.invert=function(i){var n=i[0]-l,r=i[1]-c;if(u){var s=r*e+n*t;n=n*e-r*t,r=s}return[n/g,r/f]},b.stream=function(e){return s&&a===e?s:s=m(v(a=e))},b.postclip=function(e){return arguments.length?(v=e,p=i=n=r=null,y()):v},b.clipExtent=function(e){return arguments.length?(v=null==e?(p=i=n=r=null,ns):IL(p=+e[0][0],i=+e[0][1],n=+e[1][0],r=+e[1][1]),y()):null==p?null:[[p,i],[n,r]]},b.scale=function(e){return arguments.length?(o=+e,y()):o},b.translate=function(e){return arguments.length?(l=+e[0],c=+e[1],y()):[l,c]},b.angle=function(i){return arguments.length?(t=Ts(u=i%360*_s),e=Cs(u),y()):u*bs},b.reflectX=function(e){return arguments.length?(h=e?-1:1,y()):h<0},b.reflectY=function(e){return arguments.length?(d=e?-1:1,y()):d<0},b.fitExtent=function(e,t){return VL(b,e,t)},b.fitSize=function(e,t){return UL(b,e,t)},b.fitWidth=function(e,t){return WL(b,e,t)},b.fitHeight=function(e,t){return GL(b,e,t)},b},mercator:function(){return cj(lj).scale(961/ys)},naturalEarth1:function(){return $L(xj).scale(175.295)},orthographic:function(){return $L(Sj).scale(249.5).clipAngle(90+gs)},stereographic:function(){return $L(wj).scale(250).clipAngle(142)},transversemercator:function(){var e=cj(Cj),t=e.center,i=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?i([e[0],e[1],e.length>2?e[2]+90:90]):[(e=i())[0],e[1],e[2]-90]},i([0,0,90]).scale(159.155)}};Object.keys(Tj).forEach((e=>{Ej(e,Tj[e])}));const Oj="Feature",Pj="FeatureCollection";function Mj(e){const t=z(e);return 1===t.length?t[0]:{type:Pj,features:t.reduce(((e,t)=>e.concat(function(e){return e.type===Pj?e.features:z(e).filter((e=>!P(e))).map((e=>e.type===Oj?e:{type:Oj,geometry:e}))}(t))),[])}}const Ij=Aj.concat(["pointRadius","fit","extent","size"]);function Rj(e,t){let i=[];return e?(Object.keys(e).forEach((n=>{Ij.includes(n)&&(i=i.concat(Wf(e[n],t)))})),i):i}class Dj extends tm{constructor(e){super(e),this.grammarType="projection"}parse(e){return super.parse(e),this.pointRadius(e.pointRadius),this.size(e.size),this.extent(e.extent),this.fit(e.fit),this.configure(e),this.commit(),this}pointRadius(e){return P(this.spec.pointRadius)||this.detach(Wf(this.spec.pointRadius,this.view)),this.spec.pointRadius=e,this.attach(Wf(e,this.view)),this.commit(),this}size(e){return P(this.spec.size)||this.detach(Wf(this.spec.size,this.view)),this.spec.size=e,this.attach(Wf(e,this.view)),this.commit(),this}extent(e){return P(this.spec.extent)||this.detach(Wf(this.spec.extent,this.view)),this.spec.extent=e,this.attach(Wf(e,this.view)),this.commit(),this}fit(e){return P(this.spec.fit)||this.detach(Wf(this.spec.fit,this.view)),this.spec.fit=e,this.attach(Wf(e,this.view)),this.commit(),this}configure(e){return this.detach(Rj(this.spec,this.view)),P(e)?this.spec={type:this.spec.type,fit:this.spec.fit,extent:this.spec.extent,size:this.spec.size,pointRadius:this.spec.pointRadius}:(Object.assign(this.spec,e),this.attach(Rj(this.spec,this.view))),this.commit(),this}evaluate(e,t){if(this.projection&&this.projection.type===this.spec.type||(this.projection=function(e){const t=Ej((e||"mercator").toLowerCase());return t||Am("Unrecognized projection type: "+e),t()}(this.spec.type),this.projection.type=this.spec.type),Aj.forEach((e=>{P(this.spec[e])||function(e,t,i){Q(e[t])&&e[t](i)}(this.projection,e,Kf(this.spec[e],t,Ej))})),P(this.spec.pointRadius)||this.projection.path.pointRadius(Kf(this.spec.pointRadius,t,Ej)),!(P(this.spec.fit)||P(this.spec.extent)&&P(this.spec.size))){const e=Mj(Kf(this.spec.fit,t,Ej));this.spec.extent?this.projection.fitExtent(Kf(this.spec.extent,t,Ej),e):this.spec.size&&this.projection.fitSize(Kf(this.spec.size,t,Ej),e)}return this.projection}output(){return this.projection}}const Lj=(e,t)=>{if(!t.from||!t.from())return e;const i=t.fields,n=t.key,r=t.values,s=t.default,a=t.as||[i],o=t.from().reduce((function(e,t){return t[i]&&e.set(t[i],t),e}),new Map);let l;if(Q(t.set))l=function(e){const i=o.get(e[n]);t.set(e,i)};else if(r){const e=r.length;l=function(t){const i=o.get(t[n]);if(P(i))for(let n=0;n<e;++n)t[a[n]]=s;else for(let n=0;n<e;++n)t[a[n]]=i[r[n]]}}else l=function(e){const t=o.get(e[n]);e[a[0]]=x(t)?t:s};return 0===e.length?[]:e.map((e=>(l(e),e)))};class jj extends WR{constructor(){super(...arguments),this.type=Bt.geo,this.coordinate="geo",this._nameProperty="name"}getMapViewData(){var e;return null===(e=this._mapViewData)||void 0===e?void 0:e.getDataView()}get nameField(){return this._nameField}set nameField(e){this._nameField=e}get valueField(){return this._valueField}set valueField(e){this._valueField=e}getNameProperty(){return this._nameProperty}getCentroidProperty(){return this._centroidProperty}getCoordinateHelper(){return this._coordinateHelper}setCoordinateHelper(e){this._coordinateHelper=e}getStatisticFields(){const e=[];return e.push({key:this._nameField,operations:["values"]}),e.push({key:this._valueField,operations:["max","min"]}),e}getGroupFields(){return null}dataToPosition(e){var t;let i=null;if(!e)return i;const{dataToPosition:n,latitudeField:r,longitudeField:s}=this._coordinateHelper;if(i=this.nameToPosition(e),null===i){const a=s?null==e?void 0:e[s]:Number.NaN,o=r?null==e?void 0:e[r]:Number.NaN;i=null!==(t=null==n?void 0:n([a,o]))&&void 0!==t?t:null}return i}nameToPosition(e){var t,i;const n=this.getDatumName(e);if(P(n))return null;const r=null===(i=null===(t=this.getMapViewData())||void 0===t?void 0:t.latestData)||void 0===i?void 0:i.filter((e=>this.getDatumName(e)===n))[0];if(P(r))return null;const{dataToPosition:s}=this._coordinateHelper,a=this.getDatumCenter(r),o=null==s?void 0:s(a);return P(o)||isNaN(o.x)||isNaN(o.y)?null:o}dataToLatitude(e){if(!this._coordinateHelper)return Number.NaN;const{dataToLatitude:t}=this._coordinateHelper;return t(e)}dataToLongitude(e){if(!this._coordinateHelper)return Number.NaN;const{dataToLatitude:t}=this._coordinateHelper;return t(e)}valueToPosition(e,t){return{x:this.dataToLongitude(e),y:this.dataToLatitude(t)}}positionToData(e){}latitudeToData(e){}longitudeToData(e){}dataToPositionX(e){var t;return null===(t=this._option)||void 0===t||t.onError("Method not implemented."),0}dataToPositionY(e){var t;return null===(t=this._option)||void 0===t||t.onError("Method not implemented."),0}dataToPositionZ(e){var t;return null===(t=this._option)||void 0===t||t.onError("Method not implemented."),0}release(){super.release(),this._mapViewData.release(),this._mapViewData=this._mapViewDataStatistics=null}getStackGroupFields(){return[this._nameField]}getStackValueField(){return this._spec.valueField}compileData(){var e;null===(e=this._mapViewData)||void 0===e||e.compile()}initStatisticalData(){if(super.initStatisticalData(),this._mapViewData){const e="".concat(Ge,"_series_").concat(this.id,"_mapViewDataStatic");this._mapViewDataStatistics=this.createStatisticalData(e,this._mapViewData.getDataView()),this._mapViewData.getDataView().target.removeListener("change",this._mapViewDataStatistics.reRunAllTransform)}}getSeriesKeys(){var e,t,i,n,r;return this._seriesField?null!==(r=null!==(t=null===(e=this.getRawDataStatisticsByField(this._seriesField))||void 0===e?void 0:e.values)&&void 0!==t?t:null===(n=null===(i=this._mapViewDataStatistics)||void 0===i?void 0:i.latestData[this._seriesField])||void 0===n?void 0:n.values)&&void 0!==r?r:[]:this.name?[this.name]:this.userId?["".concat(this.userId)]:["".concat(this.type,"_").concat(this.id)]}fillData(){var e,t;super.fillData(),null===(e=this._mapViewData.getDataView())||void 0===e||e.reRunAllTransform(),null===(t=this._mapViewDataStatistics)||void 0===t||t.reRunAllTransform()}getActiveMarks(){return[]}}const Fj="".concat(Ge,"_MAP_LOOK_UP_KEY"),Bj=(e,t)=>(e.features&&e.features.forEach(((e,i)=>{var n,r;e[Cw]=i,t.nameMap?e[Fj]=t.nameMap[null===(n=e.properties)||void 0===n?void 0:n[t.nameProperty]]:e[Fj]=null===(r=e.properties)||void 0===r?void 0:r[t.nameProperty]})),e.features);class Nj extends SR{constructor(){super(...arguments),this.titleValueCallback=e=>{var t;const i=this.series;return null!==(t=this._getDimensionData(e))&&void 0!==t?t:i.getDatumName(e)}}}class zj extends kk{constructor(){super(...arguments),this.type=zj.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0,path:""})}}zj.type="path";const Hj=()=>{_n.registerMark(zj.type,zj),lP()};class Vj{constructor(e){this.projection=Ej(e.type)()}fit(e,t,i){const n={type:"FeatureCollection",features:i};this.projection.fitExtent([e,t],n)}center(e){var t,i;null===(i=null===(t=this.projection)||void 0===t?void 0:t.center)||void 0===i||i.call(t,e)}project(e){var t;return null===(t=this.projection)||void 0===t?void 0:t.call(this,e)}shape(e){var t,i;return null===(i=null===(t=this.projection)||void 0===t?void 0:t.path)||void 0===i?void 0:i.call(t,e)}invert(e){var t,i;return null===(i=null===(t=this.projection)||void 0===t?void 0:t.invert)||void 0===i?void 0:i.call(t,e)}scale(e){var t;if(null===(t=this.projection)||void 0===t?void 0:t.scale){if(void 0===e)return this.projection.scale();this.projection.scale(e)}}translate(e){var t;if(null===(t=this.projection)||void 0===t?void 0:t.scale){if(void 0===e)return this.projection.translate();this.projection.translate(e)}}evaluate(e,t,i){const n=this.projection.copy();return null==n?void 0:n.fitExtent([e,t],{type:"FeatureCollection",features:i})}}class Uj extends sR{constructor(e){super(),this.component=e}}function Wj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.assign({},e);if(Q(e.style)?t.style=(t,i,n,r)=>Yj(e.style(t,i,n,r)):ay(e.style)||(t.style=Yj(e.style)),!ay(e.state)){const i={};Object.keys(e.state).forEach((t=>{Q(e.state[t])?i[t]=(i,n,r,s)=>Yj(e.state[t](i,n,r,s)):ay(e.state[t])||(i[t]=Yj(e.state[t]))})),t.state=i}return t}function Gj(e){if(ay(e))return null;const t={};return Object.keys(e).forEach((i=>{Q(e[i])?t[i]=(t,n,r,s)=>Yj(e[i](t,n,r,s)):ay(e[i])||(t[i]=Yj(e[i]))})),t}function Kj(e){if(ay(e))return null;const t={};return Object.keys(e).forEach((i=>{Q(e[i])?t[i]=(t,n,r,s)=>Yj(e[i](t.rawValue,n,t,r,s)):ay(e[i])||(t[i]=Yj(e[i]))})),t}function Yj(e){return(null==e?void 0:e.angle)&&(e.angle=el(e.angle)),e}function Xj(e,t){return Br(t,"component.".concat(e))}const qj={left:{textAlign:"center",textBaseline:"bottom"},right:{textAlign:"center",textBaseline:"bottom"},radius:{},angle:{}};function Zj(e){let t=0;return Br(e,"tick.visible")&&(t+=Br(e,"tick.tickSize")),Br(e,"label.visible")&&(t+=Br(e,"label.space")),t}function Qj(e,t){var i,n,r,s,a,o;return{min:null!==(r=null!==(i=e.min)&&void 0!==i?i:null===(n=e.range)||void 0===n?void 0:n.min)&&void 0!==r?r:null==t?void 0:t.min,max:null!==(o=null!==(s=e.max)&&void 0!==s?s:null===(a=e.range)||void 0===a?void 0:a.max)&&void 0!==o?o:null==t?void 0:t.max}}function $j(e){const t=null==e?void 0:e.orient;return"top"===t||"bottom"===t||"left"===t||"right"===t||"z"===t}function Jj(e){const t=null==e?void 0:e.orient;return"angle"===t||"radius"===t}const eF=(e,t,i)=>{var n;const r=null!==(n="band"===t?Xj("axisBand",i):["linear","log","symlog"].includes(t)?Xj("axisLinear",i):{})&&void 0!==n?n:{},s=vr(e)?Xj("axisX",i):yr(e)?Xj("axisY",i):Xj("axisZ",i);return _e({},Xj("axis",i),r,s)},tF=(e,t,i)=>{var n;const r=null!==(n="band"===t?Xj("axisBand",i):"linear"===t?Xj("axisLinear",i):{})&&void 0!==n?n:{},s=Xj("angle"===e?"axisAngle":"axisRadius",i);return _e({},Xj("axis",i),r,s)},iF=e=>"band"===e||"ordinal"===e||"point"===e;function nF(e,t){const{x1:i,y1:n,x2:r,y2:s}=t,{x1:a,y1:o,x2:l,y2:c}=e.AABBBounds,{dx:h=0,dy:d=0}=e.attribute;let u=0,p=0;a<i&&(u=i-a),o<n&&(p=n-o),l>r&&(u=r-l),c>s&&(p=s-c),u&&e.setAttribute("dx",u+h),p&&e.setAttribute("dy",p+d)}function rF(e,t,i,n){let r=0,s=e.length-1;for(;r<=s;){const a=Math.floor((r+s)/2),o=e[a];if(o[i]<=t&&o[n||i]>=t)return o;o[i]>t?s=a-1:r=a+1}return null}const sF=(e,t)=>{const{getNewDomain:i,isContinuous:n,field:r}=t,s=r(),a=i();if(P(a)||P(s))return e;if(0===a.length)return[];let o=null;return o=n()?e=>e[s]>=a[0]&&e[s]<=a[1]:e=>a.indexOf(e[s]+"")>=0||a.indexOf(e[s])>=0,e.filter(o)},aF=(e,t)=>{const{stateFields:i,valueFields:n,dataCollection:r}=t.input,{stateField:s,valueField:a}=t.output,o={},l=[];return r.forEach(((e,t)=>{var r;if(P(i[t]))return;const s=null===(r=e.getFields())||void 0===r?void 0:r[i[t]];s&&s.lockStatisticsByDomain&&s.domain.forEach((e=>{o[e]=0})),e.latestData.forEach((e=>{z(i[t]).forEach((i=>{P(e[i])||(P(o[e[i]])&&(o[e[i]]=0),P(n[t])||(o[e[i]]+=isNaN(parseFloat(e[n[t]]))?1:parseFloat(e[n[t]])))}))}))})),Object.keys(o).forEach(((e,t)=>{const i={[s]:e};a&&(i[a]=o[e]),l.push(i)})),l};function oF(e){var t,i;const n=Object.assign({},e);return ay(e.style)||(n.textStyle=Yj(e.style)),ay(e.textStyle)||_e(n.textStyle,Yj(e.textStyle)),(null===(t=e.shape)||void 0===t?void 0:t.style)&&Yj(n.shape.style),(null===(i=e.background)||void 0===i?void 0:i.style)&&Yj(n.background.style),n}function lF(e,t,i,n){switch(e){case r.cartesianBandAxis:return eF(_r(i,["z"]),"band",t);case r.cartesianLinearAxis:return eF(_r(i,["z"]),"linear",t);case r.cartesianLogAxis:return eF(_r(i,["z"]),"log",t);case r.cartesianSymlogAxis:return eF(_r(i,["z"]),"symlog",t);case r.cartesianAxis:case r.cartesianTimeAxis:return eF(_r(i),void 0,t);case r.polarBandAxis:return tF(i.orient,"band",t);case r.polarLinearAxis:return tF(i.orient,"linear",t);case r.polarAxis:return tF(i.orient,void 0,t);case r.cartesianCrosshair:return((e,t)=>{var i,n;const s=z(null!==(i=t.axes)&&void 0!==i?i:[]),{bandField:a,linearField:o,xField:l,yField:c}=null!==(n=Xj(r.crosshair,e))&&void 0!==n?n:{},h=s.find((e=>vr(e.orient)));let d;d=x(h)?_e({},iF(h.type)?a:o,l):l;const u=s.find((e=>yr(e.orient)));let p;return p=x(u)?_e({},An(u.type)?a:o,c):c,{xField:d,yField:p}})(t,n);case r.polarCrosshair:return((e,t)=>{var i,n;const s=z(null!==(i=t.axes)&&void 0!==i?i:[]),{bandField:a,linearField:o,categoryField:l,valueField:c}=null!==(n=Xj(r.crosshair,e))&&void 0!==n?n:{},h=s.find((e=>"angle"===e.orient));let d;d=x(h)?_e({},iF(h.type)?a:o,l):l;const u=s.find((e=>"radius"===e.orient));let p;return p=x(u)?_e({},An(u.type)?a:o,c):c,{categoryField:d,valueField:p}})(t,n);case r.colorLegend:case r.sizeLegend:return Xj("".concat(e,".").concat("bottom"===(s=i).orient||"top"===s.orient?"horizontal":"vertical"),t);case r.dataZoom:case r.scrollBar:return((e,t,i)=>{const n=Xj(t,i),r=_e({},n,n[xr(e)]);return delete r.horizontal,delete r.vertical,r})(_r(i),e,t);default:return Xj(e,t)}var s}class cF extends Zw{getTheme(e,t){return lF(this.type,this._option.getTheme(),e,t)}_mergeThemeToSpec(e,t){const{spec:i,theme:n}=super._mergeThemeToSpec(e,t);return this._adjustPadding(i),{spec:i,theme:n}}_adjustPadding(e){const{padding:t,noOuterPadding:i=!0,orient:n}=e;i&&t&&n&&(e.padding=Object.assign(Object.assign({},ie(t)),{[n]:0}))}}var hF=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class dF extends eC{static createComponent(e,t){const{spec:i}=e,n=hF(e,["spec"]);return new this(i,Object.assign(Object.assign({},t),n))}getRegions(){return this._regions}created(){this.initLayout(),super.created(),this.pluginService=new Uj(this)}constructor(e,t){var i;super(e,t),i=this,this.name="component",this.modelType="component",this.transformerConstructor=cF,this._delegateEvent=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;var a,o;i.event.emit(n,{model:i,node:e,event:t,item:r,datum:s,source:Rr.chart,chart:null===(o=null===(a=i._option)||void 0===a?void 0:a.globalInstance)||void 0===o?void 0:o.getChart()},"model")},this._option.animation&&(this.animate=new qw({getCompiler:t.getCompiler}))}initLayout(){var e;super.initLayout(),this._regions=null!==(e=this._regions)&&void 0!==e?e:this._option.getRegionsInIndex(),this._layout&&(this._layout.layoutBindRegionID=this._regions.map((e=>null==e?void 0:e.id)))}changeRegions(e){throw new Error("Method not implemented.")}_getNeedClearVRenderComponents(){throw new Error("Method not implemented.")}onRender(e){throw new Error("Method not implemented.")}getVRenderComponents(){return this._getNeedClearVRenderComponents()}callPlugin(e){this.pluginService&&this.pluginService.getAll().forEach((t=>e(t)))}eventPos(e){return{x:e.event.viewX-this.getLayoutStartPoint().x,y:e.event.viewY-this.getLayoutStartPoint().y}}getContainer(){var e;return this._container||(this._container=null===(e=this._option)||void 0===e?void 0:e.globalInstance.getStage().find((e=>"root"===e.name),!0)),this._container}_compareSpec(e,t){const i=super._compareSpec(e,t);return i.reMake||(i.reMake=["seriesId","seriesIndex","regionId","regionIndex"].some((i=>ty(null==t?void 0:t[i],e[i])))),(null==t?void 0:t.visible)!==e.visible&&(i.reCompile=!0),i}release(){super.release(),this.clear()}clear(){var e;const t=this._getNeedClearVRenderComponents();t&&t.length&&t.forEach((e=>{var t;e&&(null===(t=this.getContainer())||void 0===t||t.removeChild(e),e=null)})),this._container=null,null===(e=this.pluginService)||void 0===e||e.disposeAll(),this.pluginService=null}compile(){this.compileMarks()}compileMarks(e){this.getMarks().forEach((t=>{var i;t.compile({group:e}),null===(i=t.getProduct())||void 0===i||i.configure({context:{model:this}})}))}getBoundsInRect(e,t){return{x1:0,x2:0,y1:0,y2:0}}}dF.transformerConstructor=cF;class uF{parserScrollEvent(e){return e?!(e.ctrlKey||0===e.deltaY&&0===e.deltaX)&&(e.scrollX=e.deltaX,e.scrollY=e.deltaY,e):e}parserZoomEvent(e){if(!e)return e;const t=Math.pow(1.0005,-e.deltaY*Math.pow(16,e.deltaMode));return e.zoomDelta=t,e.zoomX=e.canvasX,e.zoomY=e.canvasY,e}clearZoom(){}clearScroll(){}clearDrag(){}parserDragEvent(){return!0}}class pF{constructor(){this._lastScale=0}clearZoom(){this._lastScale=0,this.pointerId=null}parserDragEvent(e){return this.pointerId?this.pointerId===e.pointerId:(this.pointerId=e.pointerId,!0)}parserZoomEvent(e){const t=e.scale;if(0===this._lastScale)return this._lastScale=t,e;e.zoomDelta=t/this._lastScale;const i=e.center;return e.zoomX=i.x,e.zoomY=i.y,this._lastScale=t,e}parserScrollEvent(e){return e}clearScroll(){}clearDrag(){}}function gF(e){return e===n["desktop-browser"]||e===n["desktop-miniApp"]?{start:"pointerdown",move:"pointermove",end:"pointerup",zoom:"wheel",zoomEnd:"pointerup",scroll:"wheel",trigger:uF}:ue(e)||pe(e)?{start:"pointerdown",move:"pointermove",end:"pointerup",zoom:"pinch",zoomEnd:"pinchend",scroll:"pan",scrollEnd:"panend",trigger:pF}:null}const fF={debounce:F,throttle:Nr};class mF{constructor(){this._isGestureListener=!1}initZoomable(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n["desktop-browser"];this._eventObj=e,this._renderMode=t,this._gestureController=this._option.getChart().getVGrammarView().renderer._gestureController,this._isGestureListener=ue(this._renderMode)||pe(this._renderMode),gF(this._renderMode)&&(this._clickEnable=!0,this._zoomableTrigger=new(this._getZoomTriggerEvent("trigger")))}_getZoomTriggerEvent(e){return gF(this._renderMode)[e]}_zoomEventDispatch(e,t,i){if(!this._isGestureListener&&!e.event)return;const n=this._isGestureListener?e:e.event.clone();this._zoomableTrigger.parserZoomEvent(n);const{zoomDelta:r,zoomX:s,zoomY:a}=n;P(r)||sg({x:s,y:a},this._getRegionOrSeriesLayout(t),!1)&&(this._clickEnable=!1,i&&i({zoomDelta:r,zoomX:s,zoomY:a},n),this._eventObj.emit("zoom",{scale:n.zoomDelta,scaleCenter:{x:n.zoomX,y:n.zoomY},model:this}))}_getRegionOrSeriesLayout(e){"region"!==e.type&&(e=e.getRegion());const{x:t,y:i,width:n,height:r}=e.layout.getLayout();return{x1:t,y1:i,x2:t+n,y2:i+r}}_bindZoomEventAsRegion(e,t,i,n){var r,s;const a=null!==(r=null==n?void 0:n.delayType)&&void 0!==r?r:"throttle",o=null!==(s=null==n?void 0:n.delayTime)&&void 0!==s?s:0,l=this._isGestureListener?this._gestureController:e,c=this._isGestureListener?[this._getZoomTriggerEvent("zoom")]:[this._getZoomTriggerEvent("zoom"),{level:Dr.chart,consume:!0}],h=this._isGestureListener?[this._getZoomTriggerEvent("zoomEnd")]:[this._getZoomTriggerEvent("zoomEnd"),{level:Dr.chart,consume:!1}];l.on(...h,fF[a]((e=>{this._zoomableTrigger.clearZoom()}),o)),l.on(...c,fF[a]((e=>{this._zoomEventDispatch(e,t,i)}),o))}initZoomEventOfSeries(e,t,i){this._option.disableTriggerEvent||gF(this._renderMode)&&this._bindZoomEventAsRegion(e.event,e,t,i)}initZoomEventOfRegions(e,t,i,n){this._option.disableTriggerEvent||gF(this._renderMode)&&e.forEach((e=>{t?e.getSeries().forEach((e=>{t(e)&&this._bindZoomEventAsRegion(e.event,e,i,n)})):this._bindZoomEventAsRegion(this._eventObj,e,i,n)}))}_scrollEventDispatch(e,t,i){let n=!1;if(!this._isGestureListener&&(!e.event||this._option.disableTriggerEvent))return n;const r=this._isGestureListener?e:e.event;this._zoomableTrigger.parserScrollEvent(r);const{scrollX:s,scrollY:a,canvasX:o,canvasY:l}=r;return P(s)&&P(a)?n:sg({x:o,y:l},this._getRegionOrSeriesLayout(t),!1)?(this._clickEnable=!1,i&&(n=i({scrollX:s,scrollY:a},r)),this._eventObj.emit("scroll",{scrollX:s,scrollY:a,model:this}),n):n}_bindScrollEventAsRegion(e,t,i,n){var r,s;const a=null!==(r=null==n?void 0:n.delayType)&&void 0!==r?r:"throttle",o=null!==(s=null==n?void 0:n.delayTime)&&void 0!==s?s:0,l=this._isGestureListener?this._gestureController:e,c=this._isGestureListener?[this._getZoomTriggerEvent("scroll")]:[this._getZoomTriggerEvent("scroll"),{level:Dr.chart,consume:!0}],h=this._isGestureListener?[this._getZoomTriggerEvent("scrollEnd")]:[this._getZoomTriggerEvent("scrollEnd"),{level:Dr.chart,consume:!1}];l.on(...h,fF[a]((e=>{this._zoomableTrigger.clearScroll()}),o)),l.on(...c,fF[a]((e=>this._scrollEventDispatch(e,t,i)),o))}initScrollEventOfSeries(e,t,i){gF(this._renderMode)&&this._bindScrollEventAsRegion(e.event,e,t,i)}initScrollEventOfRegions(e,t,i,n){this._option.disableTriggerEvent||gF(this._renderMode)&&e.forEach((e=>{t?e.getSeries().forEach((e=>{t(e)&&this._bindScrollEventAsRegion(e.event,e,i,n)})):this._bindScrollEventAsRegion(this._eventObj,e,i,n)}))}_bindDragEventAsRegion(e,t,i,n){e.on(this._getZoomTriggerEvent("start"),{level:Dr.chart},(e=>{if(!e.event)return;const{event:r}=e;sg({x:r.canvasX,y:r.canvasY},this._getRegionOrSeriesLayout(t),!1)&&this._handleDrag(e,i,n)})),e.on("click",{level:Dr.chart},(()=>!this._clickEnable))}initDragEventOfSeries(e,t,i){this._option.disableTriggerEvent||gF(this._renderMode)&&e.event.on(this._getZoomTriggerEvent("start"),{level:Dr.model,filter:t=>{let{model:i}=t;return(null==i?void 0:i.id)===e.id}},(e=>{this._handleDrag(e,t,i)}))}initDragEventOfRegions(e,t,i,n){this._option.disableTriggerEvent||gF(this._renderMode)&&e.forEach((e=>{t?e.getSeries().forEach((e=>{t(e)&&(e.event.on(this._getZoomTriggerEvent("start"),{level:Dr.model,filter:t=>{let{model:i}=t;return(null==i?void 0:i.id)===e.id}},(e=>{this._handleDrag(e,i)})),e.event.on("click",{level:Dr.model,filter:t=>{let{model:i}=t;return(null==i?void 0:i.id)===e.id}},(()=>!this._clickEnable)))})):this._bindDragEventAsRegion(this._eventObj,e,i,n)}))}_handleDrag(e,t,i){var n,r,s;if(this._option.disableTriggerEvent)return;if(this._clickEnable=!0,!this._zoomableTrigger.parserDragEvent(e.event))return;const a=null!==(n=null==i?void 0:i.delayType)&&void 0!==n?n:"throttle",o=null!==(r=null==i?void 0:i.delayTime)&&void 0!==r?r:0,l=null===(s=null==i?void 0:i.realTime)||void 0===s||s,c=this._getZoomTriggerEvent("move"),h=this._getZoomTriggerEvent("end"),d=e.event;let u=d.canvasX,p=d.canvasY,g=d.canvasX,f=d.canvasY;const m=fF[a]((e=>{this._clickEnable=!1;const i=e.event,n=[i.canvasX-g,i.canvasY-f];g=i.canvasX,f=i.canvasY,!l&&t&&t(n,e.event),this._eventObj.emit("panend",{delta:n,model:this}),this._zoomableTrigger.pointerId=null,this._eventObj.off(c,{level:Dr.chart,source:Rr.chart},v),this._eventObj.off(h,{level:Dr.chart,source:Rr.window},m)}),o),v=fF[a]((e=>{if(!this._zoomableTrigger.parserDragEvent(e.event))return;this._clickEnable=!1;const i=e.event,n=[i.canvasX-u,i.canvasY-p];u=i.canvasX,p=i.canvasY,l&&t&&t(n,e.event),this._eventObj.emit("panmove",{delta:n,model:this})}),o);this._eventObj.on(c,{level:Dr.chart,source:Rr.chart},v),this._eventObj.on(h,{level:Dr.chart,source:Rr.chart},m)}}function vF(e,t){return"".concat(Ge,"_").concat(t,"_").concat(e)}class yF extends dF{constructor(){var e;super(...arguments),e=this,this.type=r.geoCoordinate,this.name=r.geoCoordinate,this.layoutType="none",this.layoutZIndex=zw.Mark,this._projectionSpec={name:vF(this.type,this.id),type:"mercator"},this._actualScale=1,this._initialScale=1,this.effect={scaleUpdate:()=>{this.coordinateHelper()}},this._handleChartZoom=(e,t)=>{var i,n,r,s,a,o;let l=e.zoomDelta;const c=this._actualScale;return this._actualScale*=l,this._actualScale<(null===(i=this._spec.zoomLimit)||void 0===i?void 0:i.min)?(this._actualScale=null===(n=this._spec.zoomLimit)||void 0===n?void 0:n.min,l=(null===(r=this._spec.zoomLimit)||void 0===r?void 0:r.min)/c):this._actualScale>(null===(s=this._spec.zoomLimit)||void 0===s?void 0:s.max)&&(this._actualScale=null===(a=this._spec.zoomLimit)||void 0===a?void 0:a.max,l=(null===(o=this._spec.zoomLimit)||void 0===o?void 0:o.max)/c),t&&(t.zoomDelta=l),this.zoom(l,[e.zoomX,e.zoomY]),l},this.pan=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0];var i,n,r;const s=null!==(n=null===(i=e._projection)||void 0===i?void 0:i.translate())&&void 0!==n?n:[0,0];let a=s[0],o=s[1];a+=t[0],o+=t[1],null===(r=e._projection)||void 0===r||r.translate([a,o])}}get longitudeField(){return this._longitudeField}get latitudeField(){return this._latitudeField}get projectionSpec(){return this._projectionSpec}setProjection(e){this._projectionSpec=Object.assign(Object.assign({},e),{name:this._projectionSpec.name})}getZoom(){return this._actualScale}static getSpecInfo(e){if(P(e))return null;const t=[];return e.region.forEach(((e,i)=>{if("geo"===e.coordinate){const n=Object.assign(Object.assign({},e),{padding:0});t.push({spec:n,regionIndex:i,type:r.geoCoordinate,specInfoPath:["region",i,"geoCoordinate"]})}})),t}setAttrFromSpec(){var e,t,i;super.setAttrFromSpec(),this._spec.roam&&this.initZoomable(this.event,this._option.mode),this._projectionSpec=_e(this._projectionSpec,this._spec.projection),this._projectionSpec.zoom>(null===(e=this._spec.zoomLimit)||void 0===e?void 0:e.max)&&(this._projectionSpec.zoom=this._spec.zoomLimit.max),this._projectionSpec.zoom<(null===(t=this._spec.zoomLimit)||void 0===t?void 0:t.min)&&(this._projectionSpec.zoom=this._spec.zoomLimit.min),this._actualScale=null!==(i=this._projectionSpec.zoom)&&void 0!==i?i:1,this._initialScale=this._actualScale,this._longitudeField=this._spec.longitudeField,this._latitudeField=this._spec.latitudeField}created(){super.created(),this._regions=this._option.getRegionsInIndex([this._option.regionIndex]),this.initProjection(),this.coordinateHelper(),this.initEvent(),this._initCenterCache()}dispatchZoom(e,t){const i=t||{x:this.getLayoutStartPoint().x+this.getLayoutRect().width/2,y:this.getLayoutStartPoint().y+this.getLayoutRect().height/2},n=this._handleChartZoom({zoomDelta:e,zoomX:i.x,zoomY:i.y});1!==n&&this.event.emit("zoom",{scale:n,scaleCenter:i,model:this})}initEvent(){this.event.on(Ir.scaleUpdate,{filter:e=>{let{model:t}=e;return(null==t?void 0:t.id)===this.id}},this.effect.scaleUpdate.bind(this)),this._spec.roam&&(this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom),this.initDragEventOfRegions(this._regions,(()=>!0),this.pan),this._regions.forEach((e=>{e.getSeries().forEach((e=>{e.event.on("zoom",(t=>(e.handleZoom(t),!0))),e.event.on("panmove",(t=>(e.handlePan(t),!0)))}))})))}initProjection(){var e;this._projection=new Vj(this._projectionSpec),null!==this._projection.projection||null===(e=this._option)||void 0===e||e.onError("unsupported projection type!")}coordinateHelper(){const e={longitudeField:this._longitudeField,latitudeField:this._latitudeField,dataToPosition:this.dataToPosition.bind(this),dataToLongitude:this.dataToLongitude.bind(this),dataToLatitude:this.dataToLatitude.bind(this),shape:this.shape.bind(this),getCoordinateId:()=>this.id};this._regions.forEach((t=>{t.getSeries().forEach((t=>{t.type===Bt.map?t.setCoordinateHelper(e):(t.setXAxisHelper(Object.assign(Object.assign({},e),{isContinuous:!0,dataToPosition:(e,i)=>{var n;let r=e[0];if(P(r)&&(null==i?void 0:i.datum)){const e=i.datum[t.getDimensionField()[0]];r=null===(n=this._centerCache.get(e))||void 0===n?void 0:n.x}return this.dataToLongitude(r)},valueToPosition:(e,i)=>{var n;if(P(e)&&(null==i?void 0:i.datum)){const r=i.datum[t.getDimensionField()[0]];e=null===(n=this._centerCache.get(r))||void 0===n?void 0:n.x}return this.dataToLongitude(e)},getFields:()=>[this._longitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})),t.setYAxisHelper(Object.assign(Object.assign({},e),{isContinuous:!0,dataToPosition:(e,i)=>{var n;let r=e[0];if(P(r)&&(null==i?void 0:i.datum)){const e=i.datum[t.getDimensionField()[0]];r=null===(n=this._centerCache.get(e))||void 0===n?void 0:n.y}return this.dataToLatitude(r)},valueToPosition:(e,i)=>{var n;if(P(e)&&(null==i?void 0:i.datum)){const r=i.datum[t.getDimensionField()[0]];e=null===(n=this._centerCache.get(r))||void 0===n?void 0:n.y}return this.dataToLatitude(e)},getFields:()=>[this._latitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})))}))}))}onLayoutEnd(e){this.setLayoutRect(this._regions[0].getLayoutRect()),this.setLayoutStartPosition(this._regions[0].getLayoutStartPoint());const{width:t,height:i}=this.getLayoutRect(),{translate:n,scale:r,center:s}=this.evaluateProjection([0,0],[t,i]);n&&this._projection.translate(n),r&&this._projection.scale(r),s&&this._projection.center(s),gr(this._regions,(e=>{var t;if(e.type===Bt.map){e.areaPath.clear();const i=null===(t=e.getRootMark().getProduct())||void 0===t?void 0:t.getGroupGraphicItem();i&&i.attribute.postMatrix&&i.setAttributes({postMatrix:new sl})}})),this._actualScale=this._initialScale,super.onLayoutEnd(e)}onRender(e){}changeRegions(e){}_getNeedClearVRenderComponents(){return[]}collectFeatures(){const e=[];return this._regions.forEach((t=>{t.getSeries().forEach((t=>{var i,n;t.type===Bt.map&&e.push(...null!==(n=null===(i=t.getMapViewData())||void 0===i?void 0:i.latestData)&&void 0!==n?n:[])}))})),e}dataToPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var t;const i=null===(t=this._projection)||void 0===t?void 0:t.project([e[0],e[1]]);return{x:null==i?void 0:i[0],y:null==i?void 0:i[1]}}dataToLatitude(e){var t;const i=null===(t=this._projection)||void 0===t?void 0:t.project([0,e]);return null==i?void 0:i[1]}dataToLongitude(e){var t;const i=null===(t=this._projection)||void 0===t?void 0:t.project([e,0]);return null==i?void 0:i[0]}zoom(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,n,r,s,a,o;let l=null!==(n=null===(i=this._projection)||void 0===i?void 0:i.scale())&&void 0!==n?n:0;const c=null!==(s=null===(r=this._projection)||void 0===r?void 0:r.translate())&&void 0!==s?s:[0,0];let h=c[0],d=c[1];l*=e,h-=(t[0]-h)*(e-1),d-=(t[1]-d)*(e-1),null===(a=this._projection)||void 0===a||a.scale(l),null===(o=this._projection)||void 0===o||o.translate([h,d])}shape(e){return this._projection.shape(e)}invert(e){return this._projection.invert(e)}evaluateProjection(e,t){var i;const n=this._projection.evaluate(e,t,this.collectFeatures());let r=n.translate();const s=n.scale()*this._initialScale,a=null!==(i=this._projectionSpec.center)&&void 0!==i?i:n.invert([t[0]/2,t[1]/2]);return a&&(r=[t[0]/2,t[1]/2]),{translate:r,scale:s,center:a}}_initCenterCache(){var e=this;this._centerCache||(this._centerCache=new Map),this._regions.forEach((t=>{t.getSeries().forEach((t=>{var i,n;"map"===t.type&&(null!==(n=null===(i=t.getMapViewData())||void 0===i?void 0:i.latestData)&&void 0!==n?n:[]).forEach((function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=i[t.getDimensionField()[0]]||i[Fj],r=t.getDatumCenter(i);n&&x(r)&&e._centerCache.set(n,{x:r[0],y:r[1]})}))}))}))}release(){super.release(),this._centerCache&&this._centerCache.clear(),this._centerCache=null}}yF.type=r.geoCoordinate,$R(yF,mF);const bF=()=>{_n.registerComponent(yF.type,yF)};class _F extends UR{_transformLabelSpec(e){this._addMarkLabelSpec(e,"area",void 0,void 0,!1)}}class xF extends jj{constructor(){super(...arguments),this.type=Bt.map,this.transformerConstructor=_F,this._areaCache=new Map}getNameMap(){return this._nameMap}get areaPath(){return this._areaCache}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this.map=this._spec.map,this._nameMap=this._spec.nameMap,this._nameField=this._spec.nameField,this._valueField=this._spec.valueField,this._spec.nameProperty&&(this._nameProperty=this._spec.nameProperty),this._spec.centroidProperty&&(this._centroidProperty=this._spec.centroidProperty),this.map||null===(e=this._option)||void 0===e||e.onError("map type '".concat(this.map,"' is not specified !")),go.get(this.map)||null===(t=this._option)||void 0===t||t.onError("'".concat(this.map,"' data is not registered !"))}initData(){var e,t;super.initData(),uo(this._dataSet,"copyDataView",bo),uo(this._dataSet,"map",Bj),uo(this._dataSet,"lookup",Lj);const i=go.get(this.map);i||null===(e=this._option)||void 0===e||e.onError("no valid map data found!");const n=new R(this._dataSet,{name:"map_".concat(this.id,"_data")});n.parse([i],{type:"dataview"}).transform({type:"copyDataView",options:{deep:!0},level:wo.copyDataView}).transform({type:"map",options:{nameMap:this._nameMap,nameProperty:this._nameProperty}}).transform({type:"lookup",options:{from:()=>{var e;return null===(e=this._data)||void 0===e?void 0:e.getLatestData()},key:Fj,fields:this._nameField,set:(e,t)=>{t&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))}}}),null===(t=this._data)||void 0===t||t.getDataView().target.addListener("change",n.reRunAllTransform),this._mapViewData=new ER(this._option,n)}initMark(){this._pathMark=this._createMark(xF.mark.area,{morph:zR(this._spec,xF.mark.area.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this.getDimensionField()[0],isSeriesMark:!0,skipBeforeLayouted:!0,dataView:this._mapViewData.getDataView(),dataProductId:this._mapViewData.getProductId()})}initMarkStyle(){const e=this._pathMark;e&&(this.setMarkStyle(e,{fill:e=>{var t,i,n,r;return x(e[null!==(t=this._seriesField)&&void 0!==t?t:Aw])?(null!==(i=this._option.globalScale.getScale("color"))&&void 0!==i?i:this._getDefaultColorScale()).scale(e[null!==(n=this._seriesField)&&void 0!==n?n:Aw]):null===(r=this._spec)||void 0===r?void 0:r.defaultFillColor},path:this.getPath.bind(this)},"normal",Tw.Series),e.setPostProcess("fill",(e=>x(e)?e:this._spec.defaultFillColor)),this.setMarkStyle(e,{smoothScale:!0},"normal",Tw.Built_In),this._trigger.registerMark(e))}initLabelMarkStyle(e){e&&(this._labelMark=e,this.setMarkStyle(e,{text:e=>this.getDatumName(e),x:e=>{var t;return null===(t=this.dataToPosition(e))||void 0===t?void 0:t.x},y:e=>{var t;return null===(t=this.dataToPosition(e))||void 0===t?void 0:t.y}}))}initAnimation(){var e;this._pathMark.setAnimationConfig(jR(null===(e=_n.getAnimationInKey("fadeInOut"))||void 0===e?void 0:e(),FR("area",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new Nj(this),this._pathMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pathMark)}getPath(e){var t;const i=this._areaCache.get(e[Cw]);if(i)return i.shape;const n=null===(t=this._coordinateHelper)||void 0===t?void 0:t.shape(e);return this._areaCache.set(e[Cw],{shape:n}),n}onEvaluateEnd(){this._mapViewData.updateData()}getDimensionField(){return[this.nameField]}getMeasureField(){return[this.valueField]}release(){super.release(),this._areaCache.clear(),this._nameMap={},this._trigger=this._mapViewData=null}handleZoom(e){var t,i,n;const{scale:r,scaleCenter:s}=e;if(1===r)return;const a=null===(t=this.getRootMark().getProduct())||void 0===t?void 0:t.getGroupGraphicItem();a&&(a.attribute.postMatrix||a.setAttributes({postMatrix:new sl}),a.scale(r,r,s));const o=null===(n=null===(i=this._labelMark)||void 0===i?void 0:i.getComponent())||void 0===n?void 0:n.getProduct();o&&o.evaluateSync(null,null)}handlePan(e){var t,i,n;const{delta:r}=e;if(0===r[0]&&0===r[1])return;const s=null===(t=this.getRootMark().getProduct())||void 0===t?void 0:t.getGroupGraphicItem();s&&(s.attribute.postMatrix||s.setAttributes({postMatrix:new sl}),s.translate(r[0],r[1]));const a=null===(n=null===(i=this._labelMark)||void 0===i?void 0:i.getComponent())||void 0===n?void 0:n.getProduct();a&&a.evaluateSync(null,null)}getDatumCenter(e){var t,i,n,r;return this._centroidProperty&&(null===(t=e.properties)||void 0===t?void 0:t[this._centroidProperty])?null===(i=e.properties)||void 0===i?void 0:i[this._centroidProperty]:L(e.centroidX*e.centroidY)?[e.centroidX,e.centroidY]:(null===(n=e.properties)||void 0===n?void 0:n.center)?e.properties.center:(null===(r=e.properties)||void 0===r?void 0:r.centroid)?e.properties.centroid:[Number.NaN,Number.NaN]}getDatumName(e){var t,i,n,r;return e[this.nameField]?e[this.nameField]:(null===(t=e.properties)||void 0===t?void 0:t[this._nameProperty])?(null===(i=this._spec)||void 0===i?void 0:i.nameMap)?null!==(n=this._spec.nameMap[e.properties[this._nameProperty]])&&void 0!==n?n:"":null!==(r=e.properties[this._nameProperty])&&void 0!==r?r:"":""}dataToPositionX(e){var t;return null===(t=this._option)||void 0===t||t.onError("Method not implemented."),0}dataToPositionY(e){var t;return null===(t=this._option)||void 0===t||t.onError("Method not implemented."),0}viewDataUpdate(e){var t,i,n;super.viewDataUpdate(e),null===(i=null===(t=this._mapViewData)||void 0===t?void 0:t.getDataView())||void 0===i||i.reRunAllTransform(),null===(n=this._mapViewData)||void 0===n||n.updateData()}_getDataIdKey(){return Cw}getActiveMarks(){return[this._pathMark]}}xF.type=Bt.map,xF.mark=hi,xF.transformerConstructor=_F;const SF=()=>{nm.registerGrammar("projection",Dj,"projections"),bF(),Hj(),_n.registerSeries(xF.type,xF),_n.registerImplement("registerMap",mo),_n.registerImplement("unregisterMap",vo),kM()};class wF extends oD{_isValidSeries(e){return e===Bt.map}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{type:e.type,nameField:e.nameField,valueField:e.valueField,seriesField:e.seriesField,map:e.map,nameProperty:e.nameProperty,centroidProperty:e.centroidProperty,nameMap:e.nameMap,area:e.area,defaultFillColor:e.defaultFillColor})}transformSpec(e){super.transformSpec(e),e.region.forEach((e=>{e.coordinate="geo"}));const t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))})):e.series=[t]}}class CF extends fD{constructor(){super(...arguments),this.transformerConstructor=wF,this.type="map",this.seriesType=Bt.map}}CF.type="map",CF.seriesType=Bt.map,CF.view="singleDefault",CF.transformerConstructor=wF;"".concat(Ge,"_LABEL_LIMIT"),"".concat(Ge,"_LABEL_ALIGN"),"".concat(Ge,"_LABEL_TEXT");const kF="".concat(Ge,"_LABEL_VISIBLE");"".concat(Ge,"_LABEL_X"),"".concat(Ge,"_LABEL_Y");function AF(e){return function(t){let i;return i=v(e)?e.reduce(((e,t)=>null==e?void 0:e[t]),t):null==t?void 0:t[e],i}}class EF extends WR{constructor(){super(...arguments),this.coordinate="polar",this._outerRadius=at,this._innerRadius=0,this._angleField=[],this._radiusField=[],this._sortDataByAxis=!1,this._getInvalidDefined=e=>!(this.angleAxisHelper.isContinuous&&!q(e[this._angleField[0]]))&&!(this.radiusAxisHelper.isContinuous&&!q(e[this._radiusField[0]]))}get outerRadius(){return this._outerRadius}get innerRadius(){return this._innerRadius}getAngleField(){return this._angleField}setAngleField(e){return this._angleField=x(e)?z(e):[],this._angleField}getRadiusField(){return this._radiusField}setRadiusField(e){return this._radiusField=x(e)?z(e):[],this._radiusField}get innerRadiusField(){return this._innerRadiusField}setInnerRadiusField(e){return this._innerRadiusField=z(e),this._innerRadiusField}get radiusScale(){return this._radiusScale}setRadiusScale(e){return this._radiusScale=e,e}get angleScale(){return this._angleScale}setAngleScale(e){return this._angleScale=e,e}get angleAxisHelper(){return this._angleAxisHelper}set angleAxisHelper(e){this._angleAxisHelper=e,this.onAngleAxisHelperUpdate()}get radiusAxisHelper(){return this._radiusAxisHelper}set radiusAxisHelper(e){this._radiusAxisHelper=e,this.onRadiusAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getCenter=()=>this.angleAxisHelper.center(),this._markAttributeContext.getLayoutRadius=()=>this._computeLayoutRadius()}valueToPosition(e,t){if(P(e)||P(t)||!this.angleAxisHelper||!this.radiusAxisHelper)return{x:Number.NaN,y:Number.NaN};const i=this.angleAxisHelper.dataToPosition(z(e)),n=this.radiusAxisHelper.dataToPosition(z(t));return this.angleAxisHelper.coordToPoint({angle:i,radius:n})}dataToPosition(e){return e&&this.angleAxisHelper&&this.radiusAxisHelper?this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this.getDatumPositionValues(e,this._radiusField)):{x:Number.NaN,y:Number.NaN}}dataToPositionX(e){return this.dataToPosition(e).x}dataToPositionY(e){return this.dataToPosition(e).y}dataToPositionZ(e){return 0}positionToData(e){}radiusToData(e){}angleToData(e){}getStatisticFields(){var e,t;const i=[];return(null===(e=this.radiusAxisHelper)||void 0===e?void 0:e.getScale)&&this._radiusField.forEach((e=>{const t={key:e,operations:[]};Cn(this.radiusAxisHelper.getScale(0).type)?t.operations=["max","min"]:t.operations=["values"],i.push(t)})),(null===(t=this.angleAxisHelper)||void 0===t?void 0:t.getScale)&&this._angleField.forEach((e=>{const t={key:e,operations:[]};Cn(this.angleAxisHelper.getScale(0).type)?t.operations=["max","min"]:t.operations=["values"],i.push(t)})),i}setAttrFromSpec(){super.setAttrFromSpec(),x(this._spec.outerRadius)&&(this._outerRadius=this._spec.outerRadius),x(this._spec.radius)&&(this._outerRadius=this._spec.radius),x(this._spec.innerRadius)&&(this._innerRadius=this._spec.innerRadius),x(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)}onRadiusAxisHelperUpdate(){this.onMarkPositionUpdate()}onAngleAxisHelperUpdate(){this.onMarkPositionUpdate()}afterInitMark(){super.afterInitMark(),this._trigger.setStateKeys([...this._angleField,...this._radiusField])}_computeLayoutRadius(){const{width:e,height:t}=this._region.getLayoutRect();return Math.min(e/2,t/2)}fillData(){super.fillData(),this.sortDataByAxis&&this._sortDataInAxisDomain()}_sortDataInAxisDomain(){var e,t;(null===(t=null===(e=this.getViewData())||void 0===e?void 0:e.latestData)||void 0===t?void 0:t.length)&&GR(this.angleAxisHelper,this._angleField[0],this.getViewData().latestData)}}const TF=(e,t)=>{const i=e.map((e=>Object.assign({},e)));if(!i||0===i.length)return i;const{angleField:n,startAngle:r,endAngle:s,minAngle:a,asStartAngle:o,asEndAngle:l,asMiddleAngle:c,asRadian:h,asRatio:d,asQuadrant:u,asK:p}=t,g=(e,t,i)=>{e[o]=t,e[l]=t+i,e[c]=t+i/2,e[h]=i,e[u]=function(e){return(e=rr(e))>0&&e<=Math.PI/2?2:e>Math.PI/2&&e<=Math.PI?3:e>Math.PI&&e<=3*Math.PI/2?4:1}(t+i/2)};let f=0,m=-1/0;for(let S=0;S<i.length;S++){const e=q(v=i[S][n])?Number.parseFloat(v):0;f+=e,m=Math.max(e,m),i[S][Xe]=e}var v;const y=s-r;let b=r,_=y,x=0;if(i.forEach((e=>{const t=e[Xe],i=f?t/f:0;let n=i*y;n<a?(n=a,_-=a):x+=t;const r=b,s=b+n;e[d]=i,e[p]=m?t/m:0,g(e,r,n),b=s})),_<y)if(_<=.001){const e=y/i.length;i.forEach(((t,i)=>{g(t,r+i*e,e)}))}else{const e=_/x;b=r,i.forEach((t=>{const i=t[h]===a?a:t[Xe]*e;g(t,b,i),b+=i}))}return 0!==f&&(i[i.length-1][l]=s),i};function OF(e,t,i){return(n,r,s)=>t?"radius"===e.growField?{overall:0}:{overall:e.growFrom(n,r,i)}:{overall:!1}}const PF=e=>({type:"radius"===e.growField?"growRadiusIn":"growAngleIn",options:OF(e,!0,ko.appear)}),MF={type:"fadeIn"},IF=e=>({type:"radius"===e.growField?"growRadiusIn":"growAngleIn",easing:"linear",options:OF(e,!0,ko.enter)}),RF=e=>({type:"radius"===e.growField?"growRadiusOut":"growAngleOut",easing:"linear",options:OF(e,!0,ko.exit)}),DF=e=>({type:"radius"===e.growField?"growRadiusOut":"growAngleOut",options:OF(e,!0,ko.exit)});function LF(e,t){if(!1===t)return{};switch(t){case"fadeIn":return MF;case"growRadius":return PF(Object.assign(Object.assign({},e),{growField:"radius"}));default:return PF(Object.assign(Object.assign({},e),{growField:"angle"}))}}class jF extends kk{constructor(e,t){var i;super(e,t),i=this,this.type=FF.type,this._unCompileChannel={centerOffset:!0,radiusOffset:!0},this.computeOuterRadius=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",r=arguments.length>3?arguments[3]:void 0;var s;return(arguments.length>4?arguments[4]:void 0)+(null!==(s=i.getAttribute("radiusOffset",t,n,r))&&void 0!==s?s:0)},this.computeCenter=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",r=arguments.length>3?arguments[3]:void 0;return(arguments.length>4?arguments[4]:void 0)+ar({angle:t[Je],radius:i.getAttribute("centerOffset",t,n,r)})[e]},this._computeExChannel.x=this.computeCenter,this._computeExChannel.y=this.computeCenter,this._computeExChannel.outerRadius=this.computeOuterRadius,this._extensionChannel.centerOffset=["x","y"],this._extensionChannel.radiusOffset=["outerRadius"]}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{startAngle:0,endAngle:0,outerRadius:0,innerRadius:0,cornerRadius:0,lineWidth:0})}}class FF extends jF{constructor(){super(...arguments),this.type=FF.type}}FF.type="arc";const BF=()=>{oP(),TM(),_n.registerMark(FF.type,FF)};class NF extends UR{_transformLabelSpec(e){this._addMarkLabelSpec(e,"pie")}_mergeThemeToSpec(e,t){const i=this._theme;let n=e;if(this._shouldMergeThemeToSpec()){const i=this._getDefaultSpecFromChart(t);n=_e({},this._theme,i,e),"inside"===n.label.position?n.label=_e({},this._theme.innerLabel,n.label):n.label=_e({},this._theme.outerLabel,n.label)}return{spec:n,theme:i}}}class zF extends EF{constructor(){super(...arguments),this.transformerConstructor=NF,this._pieMarkName="pie",this._pieMarkType="arc",this._startAngle=it,this._endAngle=nt,this._pieMark=null,this._labelMark=null,this._labelLineMark=null,this.dataToCentralPosition=e=>{const t=e[Je];if(P(t))return null;const i=this.computeDatumRadius(e),n=this.computeDatumInnerRadius(e),r=this.computeCenter(e),s=ar({angle:t,radius:(i+n)/2});return{x:r.x+s.x,y:r.y+s.y}}}get center(){var e,t,i,n;return{x:null!==(t=null===(e=this._spec)||void 0===e?void 0:e.centerX)&&void 0!==t?t:this._region.getLayoutRect().width/2,y:null!==(n=null===(i=this._spec)||void 0===i?void 0:i.centerY)&&void 0!==n?n:this._region.getLayoutRect().height/2}}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>{var e,t;return null!==(t=null===(e=this._center)||void 0===e?void 0:e.x)&&void 0!==t?t:this._region.getLayoutRect().width/2},y:()=>{var e,t;return null!==(t=null===(e=this._center)||void 0===e?void 0:e.y)&&void 0!==t?t:this._region.getLayoutRect().height/2}}),this._markAttributeContext.startAngleScale=e=>this.startAngleScale(e),this._markAttributeContext.endAngleScale=e=>this.endAngleScale(e)}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this._centerOffset=null!==(e=this._spec.centerOffset)&&void 0!==e?e:0,this._cornerRadius=null!==(t=this._spec.cornerRadius)&&void 0!==t?t:0;const i=function(e,t){let i=0,n=2*Math.PI;const r=x(e),s=x(t);for(r||s?s?r?(i=e,n=t):(i=t-2*Math.PI,n=t):(i=e,n=e+2*Math.PI):(i=0,n=2*Math.PI);n<=i;)n+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI,n-=2*Math.PI;for(;n<0;)i+=2*Math.PI,n+=2*Math.PI;return{startAngle:i,endAngle:n}}(x(this._spec.startAngle)?el(this._spec.startAngle):this._startAngle,x(this._spec.endAngle)?el(this._spec.endAngle):this._endAngle);this._startAngle=i.startAngle,this._endAngle=i.endAngle,this._padAngle=x(this._spec.padAngle)?el(this._spec.padAngle):0,this.setAngleField(this._spec.valueField||this._spec.angleField),this._spec.categoryField&&this.setSeriesField(this._spec.categoryField),this._radiusField=[],this._specAngleField=this._angleField.slice(),this._specRadiusField=[]}initData(){super.initData();const e=this.getViewData();if(!e)return;uo(this._dataSet,"pie",TF),e.transform({type:"pie",options:{angleField:this._angleField[0],startAngle:this._startAngle,endAngle:this._endAngle,minAngle:x(this._spec.minAngle)?el(this._spec.minAngle):0,asStartAngle:Ze,asEndAngle:Qe,asRatio:qe,asMiddleAngle:Je,asRadian:tt,asQuadrant:et,asK:$e}},!1);const t=new R(this._dataSet,{name:"".concat(Ge,"_series_").concat(this.id,"_viewDataLabel")});t.parse([this.getViewData()],{type:"dataview"}),this._viewDataLabel=new ER(this._option,t)}initMark(){var e;this._pieMark=this._createMark(Object.assign(Object.assign({},zF.mark.pie),{name:this._pieMarkName,type:this._pieMarkType}),{morph:zR(this._spec,this._pieMarkName),defaultMorphElementKey:this._seriesField,key:kw,groupKey:this._seriesField,skipBeforeLayouted:!0,isSeriesMark:!0,customShape:null===(e=this._spec.pie)||void 0===e?void 0:e.customShape})}startAngleScale(e){return AF(Ze)(e)}endAngleScale(e){return AF(Qe)(e)}initMarkStyle(){const e=this._pieMark;e&&(this.setMarkStyle(e,{x:()=>{var e,t;return null!==(t=null===(e=this._center)||void 0===e?void 0:e.x)&&void 0!==t?t:this._region.getLayoutRect().width/2},y:()=>{var e,t;return null!==(t=null===(e=this._center)||void 0===e?void 0:e.y)&&void 0!==t?t:this._region.getLayoutRect().height/2},fill:this.getColorAttribute(),outerRadius:mk(this._outerRadius)?this._outerRadius:()=>this.computeLayoutRadius()*this._outerRadius,innerRadius:mk(this._innerRadius)?this._innerRadius:()=>this.computeLayoutRadius()*this._innerRadius,cornerRadius:()=>this.computeLayoutRadius()*this._cornerRadius,startAngle:e=>this.startAngleScale(e),endAngle:e=>this.endAngleScale(e),padAngle:this._padAngle,centerOffset:this._centerOffset},"normal",Tw.Series),this._trigger.registerMark(e))}initTooltip(){super.initTooltip(),this._pieMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pieMark)}initMarkStyleWithSpec(e,t,i){if(super.initMarkStyleWithSpec(e,t,i),e.name===this._pieMarkName){const t=this.getSpec()[e.name];if(t)for(const i in t.state||{})this.setMarkStyle(e,this.generateRadiusStyle(t.state[i]),i,Tw.User_Mark)}}initLabelMarkStyle(e){var t,i,n,r,s,a;e&&this.setMarkStyle(e,{visible:AF(kF).bind(this),text:e=>e[this.getDimensionField()[0]],fill:(null===(i=null===(t=this._spec.label)||void 0===t?void 0:t.style)||void 0===i?void 0:i.fill)||this.getColorAttribute(),angle:null===(r=null===(n=this._spec.label)||void 0===n?void 0:n.style)||void 0===r?void 0:r.angle,limit:null===(a=null===(s=this._spec.label)||void 0===s?void 0:s.style)||void 0===a?void 0:a.limit,z:this.dataToPositionZ.bind(this)})}afterInitMark(){super.afterInitMark(),this._trigger.setStateKeys([this._seriesField,...this._radiusField])}initEvent(){var e;super.initEvent(),null===(e=this._viewDataLabel.getDataView())||void 0===e||e.target.addListener("change",this.viewDataLabelUpdate.bind(this))}initGroups(){}onLayoutEnd(e){this._viewDataLabel.getDataView().reRunAllTransform(),this.onMarkPositionUpdate(),super.onLayoutEnd(e)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return this._specAngleField}viewDataLabelUpdate(){this.event.emit(Ir.viewDataLabelUpdate,{model:this}),this._viewDataLabel.updateData()}generateRadiusStyle(e){if(!e)return;const t={};return e.outerRadius&&(t.outerRadius=()=>this.computeLayoutRadius()*e.outerRadius),e.innerRadius&&(t.innerRadius=()=>this.computeLayoutRadius()*e.innerRadius),e.cornerRadius&&(t.cornerRadius=()=>this.computeLayoutRadius()*e.cornerRadius),t}computeLayoutRadius(){const{width:e,height:t}=this._region.getLayoutRect();return Math.min(e/2,t/2)}computeCenter(e){return{x:this._pieMark.getAttribute("x",e,"normal"),y:this._pieMark.getAttribute("y",e,"normal")}}getRadius(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";var t,i,n,r,s,a,o;const l="normal"===e?null===(n=null===(i=this.getSpec()[(null===(t=this._pieMark)||void 0===t?void 0:t.name)||"pie"])||void 0===i?void 0:i.style)||void 0===n?void 0:n.outerRadius:null===(o=null===(a=null===(s=this.getSpec()[(null===(r=this._pieMark)||void 0===r?void 0:r.name)||"pie"])||void 0===s?void 0:s.state)||void 0===a?void 0:a[e])||void 0===o?void 0:o.outerRadius;return null!=l?l:this._outerRadius}getInnerRadius(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";var t,i,n,r,s,a,o;const l="normal"===e?null===(n=null===(i=this.getSpec()[(null===(t=this._pieMark)||void 0===t?void 0:t.name)||"pie"])||void 0===i?void 0:i.style)||void 0===n?void 0:n.innerRadius:null===(o=null===(a=null===(s=this.getSpec()[(null===(r=this._pieMark)||void 0===r?void 0:r.name)||"pie"])||void 0===s?void 0:s.state)||void 0===a?void 0:a[e])||void 0===o?void 0:o.innerRadius;return null!=l?l:this._innerRadius}computeRadius(e,t){return this.computeLayoutRadius()*e*(P(t)?1:t)+this._centerOffset}computeDatumRadius(e,t){return this.computeLayoutRadius()*this.getRadius(t)+this._centerOffset}_compareSpec(e,t,i){(i=null!=i?i:{data:!0}).centerX=!0,i.centerX=!0,i.centerY=!0,i.centerOffset=!0,i.radius=!0,i.innerRadius=!0,i.cornerRadius=!0,i.startAngle=!0,i.endAngle=!0,i.padAngle=!0;const{centerX:n,centerY:r,centerOffset:s,radius:a,innerRadius:o,cornerRadius:l,startAngle:c,endAngle:h,padAngle:d}=t,u=super._compareSpec(e,t,i);return(e=null!=e?e:{}).centerY===r&&e.centerX===n&&e.centerOffset===s&&e.radius===a&&e.innerRadius===o&&e.cornerRadius===l&&e.startAngle===c&&e.endAngle===h&&e.padAngle===d||(u.reRender=!0,u.change=!0),u}computeDatumInnerRadius(e,t){return this.computeLayoutRadius()*this.getInnerRadius(t)+this._centerOffset}dataToPosition(e){const t=e[Je];if(P(t))return null;const i=this.computeDatumRadius(e),n=this.computeCenter(e),r=ar({angle:t,radius:i});return{x:n.x+r.x,y:n.y+r.y}}initAnimation(){var e,t;const i={growFrom:(e,t,i)=>{var n;if(i===ko.appear)return this._startAngle;if(i===ko.disappear)return this._endAngle;const r=[ko.disappear,ko.exit],s=t.mark.elements,a=null==e?void 0:e[Cw];if(void 0===s.find((e=>{var t;return(null===(t=e.data[0])||void 0===t?void 0:t[Cw])<a})))return this._startAngle;if(void 0===s.find((e=>{var t;return(null===(t=e.data[0])||void 0===t?void 0:t[Cw])>a})))return this._endAngle;const o=[...s].reverse().find((e=>{var t;return(null===(t=e.data[0])||void 0===t?void 0:t[Cw])<a}));return r.includes(i)?null===(n=null==o?void 0:o.getNextGraphicAttributes())||void 0===n?void 0:n.endAngle:null==o?void 0:o.getGraphicAttribute("endAngle",!0)}},n=null===(e=this._spec.animationAppear)||void 0===e?void 0:e.preset;if(this._pieMark){const e=jR(null===(t=_n.getAnimationInKey("pie"))||void 0===t?void 0:t(i,n),FR("pie",this._spec,this._markAttributeContext));e.normal&&e.normal.type&&(e.normal=function(e,t){var i,n,r,s;const a=null!==(n=null===(i=t.options)||void 0===i?void 0:i.distance)&&void 0!==n?n:10,o=L(t.duration)?t.duration/2:1e3,l=null!==(r=t.options.easing)&&void 0!==r?r:"cubicOut";return{oneByOne:t.oneByOne,loop:null!==(s=t.loop)&&void 0!==s&&s,timeSlices:[{duration:o,effects:{easing:l,channel:{x:{from:t=>e.getAttribute("x",t),to:t=>e.getAttribute("x",t)+ar({angle:t[Je],radius:a}).x},y:{from:t=>e.getAttribute("y",t),to:t=>e.getAttribute("y",t)+ar({angle:t[Je],radius:a}).y}}}},{duration:o,effects:{easing:l,channel:{x:{to:t=>e.getAttribute("x",t),from:t=>e.getAttribute("x",t)+ar({angle:t[Je],radius:a}).x},y:{to:t=>e.getAttribute("y",t),from:t=>e.getAttribute("y",t)+ar({angle:t[Je],radius:a}).y}}}}]}}(this._pieMark,e.normal)),this._pieMark.setAnimationConfig(e)}}getDefaultShapeType(){return"circle"}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(e,t){return t}getActiveMarks(){return[this._pieMark]}}zF.transformerConstructor=NF,zF.mark=oi;class HF extends zF{constructor(){super(...arguments),this.type=Bt.pie}}HF.type=Bt.pie;const VF=()=>{BF(),_n.registerAnimation("pie",((e,t)=>({appear:LF(e,t),enter:IF(e),exit:RF(e),disappear:DF(e)}))),_n.registerSeries(HF.type,HF)};class UF extends oD{_isValidSeries(e){return!this.seriesType||e===this.seriesType}getIndicatorSpec(e){var t,i,n;const r=z(e.indicator),s=null!==(t=e.innerRadius)&&void 0!==t?t:null===(n=null===(i=e.series)||void 0===i?void 0:i[0])||void 0===n?void 0:n.innerRadius;return x(s)&&r.forEach((e=>{P(e.limitRatio)&&(e.limitRatio=s)})),r}_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{radius:e.radius,outerRadius:e.outerRadius,innerRadius:e.innerRadius,startAngle:e.startAngle,endAngle:e.endAngle,sortDataByAxis:e.sortDataByAxis}),i=this.seriesType;return i&&(t.type=i,t[i]=e[i]),t}transformSpec(e){super.transformSpec(e),v(e.dataZoom)&&e.dataZoom.length>0&&e.dataZoom.forEach((e=>{"axis"===e.filterMode&&(e.filterMode="filter")}));const t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))})):e.series=[t],x(e.indicator)&&(e.indicator=this.getIndicatorSpec(e))}}class WF extends UF{needAxes(){return!1}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField||e.seriesField,valueField:e.valueField||e.angleField,center:e.center,centerOffset:e.centerOffset,cornerRadius:e.cornerRadius,padAngle:e.padAngle,minAngle:e.minAngle})}}class GF extends fD{constructor(){super(...arguments),this.transformerConstructor=WF}}GF.transformerConstructor=WF;class KF extends GF{constructor(){super(...arguments),this.transformerConstructor=WF,this.type="pie",this.seriesType=Bt.pie}}KF.type="pie",KF.seriesType=Bt.pie,KF.view="singleDefault",KF.transformerConstructor=WF;class YF extends jF{constructor(){super(...arguments),this.type=YF.type,this._support3d=!0}}YF.type="arc3d";const XF=()=>{TM(),Ok(),bA(),nm.registerGraphic(Vr.arc3d,oA),_n.registerMark(YF.type,YF)};class qF extends NF{_transformLabelSpec(e){this._addMarkLabelSpec(e,"pie3d")}}class ZF extends zF{constructor(){super(...arguments),this.type=Bt.pie3d,this._pieMarkName="pie3d",this._pieMarkType="arc3d",this.transformerConstructor=qF}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this._angle3d=null!==(t=null===(e=this._spec)||void 0===e?void 0:e.angle3d)&&void 0!==t?t:-Math.PI/3}initMarkStyle(){super.initMarkStyle();const e=this._pieMark;e&&this.setMarkStyle(e,{beta:()=>this._angle3d},"normal",Tw.Series)}initLabelMarkStyle(e){if(!e)return;super.initLabelMarkStyle(e);const t={};e.setSupport3d(!0),t.beta=this._angle3d,t.anchor3d=e=>{var t,i,n,r;return[null!==(i=null===(t=this._center)||void 0===t?void 0:t.x)&&void 0!==i?i:this._region.getLayoutRect().width/2,null!==(r=null===(n=this._center)||void 0===n?void 0:n.y)&&void 0!==r?r:this._region.getLayoutRect().height/2]},t.angle=e=>{var t;const i=e[Je];return"inside"===(null===(t=this._spec.label)||void 0===t?void 0:t.position)?tl(i):0},this.setMarkStyle(e,Object.assign(Object.assign({},t),{z:100}),void 0,Tw.Mark)}}ZF.type=Bt.pie3d,ZF.mark=li,ZF.transformerConstructor=qF;const QF=()=>{_n.registerAnimation("pie3d",((e,t)=>({appear:LF(e,t),enter:IF(e),exit:RF(e),disappear:DF(e)}))),XF(),_n.registerSeries(ZF.type,ZF)};class $F extends WF{transformSpec(e){super.transformSpec(e),e.series.forEach((t=>{"pie3d"===t.type&&(t.angle3d=e.angle3d)}))}}class JF extends GF{constructor(){super(...arguments),this.transformerConstructor=$F,this.type="pie3d",this.seriesType=Bt.pie3d}}JF.type="pie3d",JF.seriesType=Bt.pie3d,JF.view="singleDefault",JF.transformerConstructor=$F;const eB=e=>{const t="angle"===e.growField?0:e.innerRadius;return"angle"===e.growField?{type:"angle"===e.growField?"growAngleIn":"growRadiusIn"}:{channel:{innerRadius:{from:t,to:(e,t)=>t.getGraphicAttribute("innerRadius")},outerRadius:{from:t,to:(e,t)=>t.getGraphicAttribute("outerRadius")}}}},tB={type:"fadeIn"},iB=e=>({type:"angle"===e.growField?"growAngleIn":"growRadiusIn"}),nB=e=>({type:"angle"===e.growField?"growAngleOut":"growRadiusOut"}),rB=e=>({type:"angle"===e.growField?"growAngleOut":"growRadiusOut"});function sB(e,t){if(!1===t)return{};switch(t){case"fadeIn":return tB;case"growAngle":return eB(Object.assign(Object.assign({},e),{growField:"angle"}));default:return eB(Object.assign(Object.assign({},e),{growField:"radius"}))}}class aB extends EF{getStackGroupFields(){return this._angleField}getStackValueField(){return z(this._spec.valueField)[0]||z(this._spec.radiusField)[0]}getGroupFields(){return this._angleField}setAttrFromSpec(){super.setAttrFromSpec(),this.setAngleField(this._spec.categoryField||this._spec.angleField),this.setRadiusField(this._spec.valueField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice(),this.setInnerRadiusField(this._spec.valueField||this._spec.radiusField),this._stack&&this.setValueFieldToStack(),this._percent&&this.setValueFieldToPercent()}setValueFieldToStack(){this.setRadiusField(Pw),this.setInnerRadiusField(Ow)}setValueFieldToPercent(){this.setRadiusField(Iw),this.setInnerRadiusField(Mw)}getDimensionField(){return this._specAngleField}getMeasureField(){return this._specRadiusField}getDefaultShapeType(){return"square"}}class oB extends UR{_transformLabelSpec(e){this._addMarkLabelSpec(e,"rose")}}class lB extends aB{constructor(){super(...arguments),this.type=Bt.rose,this.transformerConstructor=oB,this._supportStack=!0,this._roseMark=null,this._labelMark=null}initMark(){this.initRoseMark()}initMarkStyle(){this.initRoseMarkStyle()}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y}),this._markAttributeContext.startAngleScale=e=>this.startAngleScale(e),this._markAttributeContext.endAngleScale=e=>this.endAngleScale(e)}initRoseMark(){var e;this._roseMark=this._createMark(lB.mark.rose,{morph:zR(this._spec,lB.mark.rose.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:!0,customShape:null===(e=this._spec.rose)||void 0===e?void 0:e.customShape})}getRoseAngle(){var e,t,i;return null!==(i=null===(t=(e=this.angleAxisHelper).getBandwidth)||void 0===t?void 0:t.call(e,this._groups?this._groups.fields.length-1:0))&&void 0!==i?i:.5}startAngleScale(e){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()))-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}endAngleScale(e){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()))+this.getRoseAngle()-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}initRoseMarkStyle(){const e=this._roseMark;e&&(this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:e=>this.startAngleScale(e),endAngle:e=>this.endAngleScale(e),fill:this.getColorAttribute(),outerRadius:e=>fk(this.radiusAxisHelper.dataToPosition([e[this._radiusField[0]]]),this.radiusAxisHelper.getScale(0)),innerRadius:e=>{var t;if(!this._stack)return 0;const i=fk(this.radiusAxisHelper.dataToPosition([e[this._innerRadiusField[0]]]),this.radiusAxisHelper.getScale(0));return i<=Number.MIN_VALUE?this._computeLayoutRadius()*(null!==(t=this._spec.innerRadius)&&void 0!==t?t:0):i}}),this._trigger.registerMark(e))}initTooltip(){super.initTooltip(),this._roseMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._roseMark)}initLabelMarkStyle(e){var t,i,n,r,s,a,o,l;e&&this.setMarkStyle(e,{visible:null===(i=null===(t=this._spec)||void 0===t?void 0:t.label)||void 0===i?void 0:i.visible,text:e=>e[this.getDimensionField()[0]],fill:(null===(r=null===(n=this._spec.label)||void 0===n?void 0:n.style)||void 0===r?void 0:r.fill)||this.getColorAttribute(),angle:null===(a=null===(s=this._spec.label)||void 0===s?void 0:s.style)||void 0===a?void 0:a.angle,limit:null===(l=null===(o=this._spec.label)||void 0===o?void 0:o.style)||void 0===l?void 0:l.limit,z:0})}initAnimation(){var e,t,i;const n=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset;if(this._roseMark){const e={innerRadius:()=>{var e;return this._computeLayoutRadius()*(null!==(e=this._spec.innerRadius)&&void 0!==e?e:0)}};this._roseMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("rose"))||void 0===i?void 0:i(e,n),FR("rose",this._spec,this._markAttributeContext)))}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._roseMark]}}lB.type=Bt.rose,lB.mark=ci,lB.transformerConstructor=oB;const cB=()=>{_n.registerSeries(lB.type,lB),BF(),_n.registerAnimation("rose",((e,t)=>({appear:sB(e,t),enter:iB(e),exit:nB(e),disappear:rB(e)})))};class hB extends UF{needAxes(){return!0}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField||e.angleField,valueField:e.valueField||e.radiusField})}transformSpec(e){var t;if(super.transformSpec(e),this.needAxes()){e.axes||(e.axes=[]);const i={radius:!1,angle:!1};(null!==(t=e.axes)&&void 0!==t?t:[]).forEach((e=>{const{orient:t}=e;"radius"===t&&(i.radius=!0),"angle"===t&&(i.angle=!0)})),i.angle||e.axes.push({orient:"angle"}),i.radius||e.axes.push({orient:"radius"})}}}class dB extends hB{_getDefaultSeriesSpec(e){var t,i,n;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{radius:null!==(t=e.radius)&&void 0!==t?t:at,outerRadius:null!==(i=e.outerRadius)&&void 0!==i?i:at,innerRadius:null!==(n=e.innerRadius)&&void 0!==n?n:0,seriesField:e.seriesField,stack:e.stack,percent:e.percent})}transformSpec(e){var t;super.transformSpec(e),(null!==(t=e.axes)&&void 0!==t?t:[]).forEach((e=>{["domainLine","grid","label","tick"].forEach((t=>{e[t]||(e[t]={visible:!1})})),"angle"===e.orient&&P(e.bandPosition)&&(e.bandPosition=.5)})),e.crosshair=z(e.crosshair||{}).map((e=>_e({categoryField:{visible:!0,line:{visible:!0,type:"rect"}}},e)))}}class uB extends fD{constructor(){super(...arguments),this.transformerConstructor=dB,this.type="rose",this.seriesType=Bt.rose,this._canStack=!0}}uB.type="rose",uB.seriesType=Bt.rose,uB.view="singleDefault",uB.transformerConstructor=dB;class pB extends qh{constructor(e,t,i,n,r){super(e,t,i,n,r);const s=this.params.pointToCoord,a=this.params.coordToPoint;Q(s)&&Q(a)||(this.valid=!1),this._pointToCoord=s,this._coordToPoint=a}getEndProps(){return!1===this.valid?{}:this._coordToPoint({angle:this._toAngle,radius:this._toRadius})}onBind(){const{angle:e,radius:t}=this._pointToCoord(this.from);L(e*t)||(this.valid=!1),this._fromAngle=e,this._fromRadius=t;const{angle:i,radius:n}=this._pointToCoord(this.to);L(i*n)||(this.valid=!1),this._toAngle=i,this._toRadius=n}onUpdate(e,t,i){if(!1!==this.valid)if(e){const{x:e,y:t}=this.getEndProps();i.x=e,i.y=t}else{const{x:e,y:n}=this._coordToPoint({angle:this._fromAngle+(this._toAngle-this._fromAngle)*t,radius:this._fromRadius+(this._toRadius-this._fromRadius)*t});i.x=e,i.y=n}}}class gB extends Cy{constructor(e,t,i,n,r){super(e,t,i,n,r);const s=this.params.pointToCoord,a=this.params.coordToPoint;this._pointToCoord=s,this._coordToPoint=a}onUpdate(e,t,i){this.points=this.points.map(((e,i)=>{const n=this.polarPointInterpolation(this.interpolatePoints[i][0],this.interpolatePoints[i][1],t);return n.context=e.context,n})),i.points=this.points}polarPointInterpolation(e,t,i){const n=this._pointToCoord(e),r=this._pointToCoord({x:e.x1,y:e.y1}),s=this._pointToCoord(t),a=this._pointToCoord({x:t.x1,y:t.y1}),o=n.angle+(s.angle-n.angle)*i,l=n.radius+(s.radius-n.radius)*i,c=r.angle+(a.angle-r.angle)*i,h=r.radius+(a.radius-r.radius)*i,{x:d,y:u}=this._coordToPoint({angle:o,radius:l}),{x:p,y:g}=this._coordToPoint({angle:c,radius:h}),f=new ir(d,u,p,g);return f.defined=t.defined,f}}const fB=e=>({type:"in"===e?"fadeIn":"fadeOut"});function mB(e,t,i){return"fadeIn"===t?fB(i):((e,t)=>({type:"in"===t?"growPointsIn":"growPointsOut",options:()=>({center:e.center()})}))(e,i)}function vB(e,t,i){return"fadeIn"===t?fB(i):((e,t)=>{const i=()=>{var t;return null===(t=e.center())||void 0===t?void 0:t.x},n=(e,t)=>t.getGraphicAttribute("x"),r=()=>{var t;return null===(t=e.center())||void 0===t?void 0:t.y},s=(e,t)=>t.getGraphicAttribute("y");return"in"===t?{channel:{x:{from:i,to:n},y:{from:r,to:s}}}:{channel:{x:{from:n,to:i},y:{from:s,to:r}}}})(e,i)}const yB=(e,t)=>({custom:Ay,customParameters:(i,n)=>{var r;return{group:n.getGraphicItem(),startAngle:null!==(r=e.startAngle)&&void 0!==r?r:Math.PI/2,orient:"clockwise",center:e.center(),radius:e.radius(),animationType:t}}});class bB extends aB{constructor(){super(...arguments),this.type=Bt.radar,this.transformerConstructor=sD,this._sortDataByAxis=!1}initGroups(){}compile(){super.compile(),this.addOverlapCompile()}initMark(){var e,t,i,n;const r={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},s=!1!==(null===(e=this._spec.area)||void 0===e?void 0:e.visible)&&!1!==(null===(i=null===(t=this._spec.area)||void 0===t?void 0:t.style)||void 0===i?void 0:i.visible),a=null!==(n=this._spec.seriesMark)&&void 0!==n?n:"area";this.initAreaMark(r,s&&"area"===a),this.initLineMark(r,"line"===a||"area"===a&&!s),this.initSymbolMark(r,"point"===a)}initMarkStyle(){this.initAreaMarkStyle(),this.initLineMarkStyle(),this.initSymbolMarkStyle()}initAreaMark(e,t){var i;this._areaMark=this._createMark(bB.mark.area,{progressive:e,isSeriesMark:t,customShape:null===(i=this._spec.area)||void 0===i?void 0:i.customShape})}initAreaMarkStyle(){const e=this._areaMark;e&&(this.setMarkStyle(e,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),x1:e=>e&&this.angleAxisHelper&&this.radiusAxisHelper?this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this._stack?this.getDatumPositionValues(e,this._innerRadiusField):this.radiusScale.domain()[0]).x:Number.NaN,y1:e=>e&&this.angleAxisHelper&&this.radiusAxisHelper?this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this._stack?this.getDatumPositionValues(e,this._innerRadiusField):this.radiusScale.domain()[0]).y:Number.NaN,fill:this.getColorAttribute(),curveType:qR,closePath:!0},"normal",Tw.Series),"zero"!==this._invalidType&&this.setMarkStyle(e,{defined:this._getInvalidDefined,connectedType:this._getInvalidConnectType()},"normal",Tw.Series),this.event.on(Ir.viewDataStatisticsUpdate,{filter:e=>e.model===this},(()=>{this.encodeDefined(e,"defined")})),this._trigger.registerMark(e))}initTooltip(){super.initTooltip(),this._lineMark&&this._tooltipHelper.activeTriggerSet.dimension.add(this._lineMark),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark),this._areaMark&&this._tooltipHelper.activeTriggerSet.dimension.add(this._areaMark)}initAnimation(){var e,t,i,n;const r={center:()=>{var e;return null===(e=this.angleAxisHelper)||void 0===e?void 0:e.center()},radius:()=>{const e=this.getLayoutRect();return Math.min(e.width,e.height)},startAngle:x(this._spec.startAngle)?el(this._spec.startAngle):it,pointToCoord:e=>{var t;return null===(t=this.angleAxisHelper)||void 0===t?void 0:t.pointToCoord(e)},coordToPoint:e=>this.angleAxisHelper.coordToPoint(e)},s=null!==(i=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset)&&void 0!==i?i:"clipIn";"clipIn"===s&&this._rootMark&&this._rootMark.setAnimationConfig(jR(null===(n=_n.getAnimationInKey("radarGroup"))||void 0===n?void 0:n(r,s),FR("group",this._spec,this._markAttributeContext))),[[this._areaMark,"radar"],[this._lineMark,"radar"],[this._symbolMark,"radarSymbol"]].forEach((e=>{let[t,i]=e;if(x(t)){const e=_n.getAnimationInKey(i);t.setAnimationConfig(jR(null==e?void 0:e(r,s),FR(t.name,this._spec,this._markAttributeContext)))}}))}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}getSeriesStyle(e){return t=>{var i,n,r,s;let a=null!==(n=null===(i=this._seriesMark)||void 0===i?void 0:i.getAttribute(t,e))&&void 0!==n?n:void 0;return"fill"!==t||a||(t="stroke",a=null!==(s=null===(r=this._seriesMark)||void 0===r?void 0:r.getAttribute(t,e))&&void 0!==s?s:void 0),"stroke"===t&&v(a)?a[0]:a}}}bB.type=Bt.radar,bB.mark=ai,bB.transformerConstructor=sD,$R(bB,ZR);const _B=()=>{GM(),yD(),tD(),rD(),_n.registerAnimation("radar",((e,t)=>({appear:"clipIn"===t?void 0:mB(e,t,"in"),enter:mB(e,t,"in"),exit:mB(e,t,"out"),disappear:"clipIn"===t?void 0:mB(e,t,"out"),update:[{options:{excludeChannels:["points","defined"]}},{channel:["points"],custom:gB,customParameters:e,duration:xM.update.duration,easing:xM.update.easing}]}))),_n.registerAnimation("radarSymbol",((e,t)=>({appear:"clipIn"===t?void 0:vB(e,t,"in"),enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:"clipIn"===t?void 0:vB(e,t,"out"),update:[{options:{excludeChannels:["x","y"]}},{channel:["x","y"],custom:pB,customParameters:e,duration:xM.update.duration,easing:xM.update.easing}]}))),_n.registerAnimation("radarGroup",((e,t)=>({appear:yB(e,"in"),disappear:yB(e,"out")}))),_n.registerSeries(bB.type,bB)};class xB extends hB{_getDefaultSeriesSpec(e){var t;return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{seriesField:e.seriesField,line:e.line,point:e.point,stack:e.stack,percent:e.percent,area:_e({visible:!1},e.area),seriesMark:null!==(t=e.seriesMark)&&void 0!==t?t:"area",activePoint:e.activePoint,pointDis:e.pointDis,pointDisMul:e.pointDisMul,markOverlap:e.markOverlap})}transformSpec(e){var t;super.transformSpec(e),(null!==(t=e.axes)&&void 0!==t?t:[]).forEach((e=>{"radius"===e.orient&&(["domainLine","label","tick"].forEach((t=>{e[t]||(e[t]={visible:!1})})),e.grid||(e.grid={visible:!0,smooth:!0}))})),e.crosshair=z(e.crosshair||{}).map((e=>_e({categoryField:{visible:!0,line:{visible:!0,type:"line"}}},e)))}}class SB extends fD{constructor(){super(...arguments),this.transformerConstructor=xB,this.type="radar",this.seriesType=Bt.radar,this._canStack=!0}}SB.type="radar",SB.seriesType=Bt.radar,SB.view="singleDefault",SB.transformerConstructor=xB;class wB extends oD{_getDefaultSeriesSpec(e){const t=super._getDefaultSeriesSpec(e);return delete t.data,t}transformSpec(e){if(super.transformSpec(e),e.series&&e.series.length){const t=this._getDefaultSeriesSpec(e);e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))}))}e.axes&&e.axes.length&&e.axes.forEach((t=>{Br(t,"trimPadding")&&_e(t,gw(this.type,e))}))}}class CB extends fD{constructor(){super(...arguments),this.transformerConstructor=wB,this.type="common",this._canStack=!0}}CB.type="common",CB.view="singleDefault",CB.transformerConstructor=wB;class kB{static getInstance(){return kB.instance||(kB.instance=new kB),kB.instance}constructor(){this.locale_shortWeekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.locale_periods=["AM","PM"],this.locale_weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.locale_shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.numberRe=/^\s*\d+/,this.pads={"-":"",_:" ",0:"0"},this.requoteRe=/[\\^$*+?|[\]().{}]/g,this.locale_months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.formatShortWeekday=e=>this.locale_shortWeekdays[e.getDay()],this.formatWeekday=e=>this.locale_weekdays[e.getDay()],this.formatShortMonth=e=>this.locale_shortMonths[e.getMonth()],this.formatMonth=e=>this.locale_months[e.getMonth()],this.formatDayOfMonth=(e,t)=>this.pad(e.getDate(),t,2),this.formatHour24=(e,t)=>this.pad(e.getHours(),t,2),this.formatHour12=(e,t)=>this.pad(e.getHours()%12||12,t,2),this.formatMilliseconds=(e,t)=>this.pad(e.getMilliseconds(),t,3),this.formatMonthNumber=(e,t)=>this.pad(e.getMonth()+1,t,2),this.formatMinutes=(e,t)=>this.pad(e.getMinutes(),t,2),this.formatPeriod=e=>this.locale_periods[+(e.getHours()>=12)],this.formatSeconds=(e,t)=>this.pad(e.getSeconds(),t,2),this.formatFullYear=(e,t)=>this.pad(e.getFullYear()%1e4,t,4),this.formatUTCShortWeekday=e=>this.locale_shortWeekdays[e.getUTCDay()],this.formatUTCWeekday=e=>this.locale_weekdays[e.getUTCDay()],this.formatUTCShortMonth=e=>this.locale_shortMonths[e.getUTCMonth()],this.formatUTCMonth=e=>this.locale_months[e.getUTCMonth()],this.formatUTCDayOfMonth=(e,t)=>this.pad(e.getUTCDate(),t,2),this.formatUTCHour24=(e,t)=>this.pad(e.getUTCHours(),t,2),this.formatUTCHour12=(e,t)=>this.pad(e.getUTCHours()%12||12,t,2),this.formatUTCMilliseconds=(e,t)=>this.pad(e.getUTCMilliseconds(),t,3),this.formatUTCMonthNumber=(e,t)=>this.pad(e.getUTCMonth()+1,t,2),this.formatUTCMinutes=(e,t)=>this.pad(e.getUTCMinutes(),t,2),this.formatUTCPeriod=e=>this.locale_periods[+(e.getUTCHours()>=12)],this.formatUTCSeconds=(e,t)=>this.pad(e.getUTCSeconds(),t,2),this.formatUTCFullYear=(e,t)=>this.pad(e.getUTCFullYear()%1e4,t,4),this.formats={a:this.formatShortWeekday,A:this.formatWeekday,b:this.formatShortMonth,B:this.formatMonth,d:this.formatDayOfMonth,e:this.formatDayOfMonth,H:this.formatHour24,I:this.formatHour12,L:this.formatMilliseconds,m:this.formatMonthNumber,M:this.formatMinutes,p:this.formatPeriod,S:this.formatSeconds,Y:this.formatFullYear},this.utcFormats={a:this.formatUTCShortWeekday,A:this.formatUTCWeekday,b:this.formatUTCShortMonth,B:this.formatUTCMonth,d:this.formatUTCDayOfMonth,e:this.formatUTCDayOfMonth,H:this.formatUTCHour24,I:this.formatUTCHour12,L:this.formatUTCMilliseconds,m:this.formatUTCMonthNumber,M:this.formatUTCMinutes,p:this.formatUTCPeriod,S:this.formatUTCSeconds,Y:this.formatUTCFullYear},this.parseShortWeekday=(e,t,i)=>{const n=this.shortWeekdayRe.exec(t.slice(i));return n?(e.w=this.shortWeekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},this.parseWeekday=(e,t,i)=>{const n=this.weekdayRe.exec(t.slice(i));return n?(e.w=this.weekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},this.parseShortMonth=(e,t,i)=>{const n=this.shortMonthRe.exec(t.slice(i));return n?(e.m=this.shortMonthLookup.get(n[0].toLowerCase()),i+n[0].length):-1},this.parseMonth=(e,t,i)=>{const n=this.monthRe.exec(t.slice(i));return n?(e.m=this.monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1},this.parseDayOfMonth=(e,t,i)=>{const n=this.numberRe.exec(t.slice(i,i+2));return n?(e.d=+n[0],i+n[0].length):-1},this.parseHour24=(e,t,i)=>{const n=this.numberRe.exec(t.slice(i,i+2));return n?(e.H=+n[0],i+n[0].length):-1},this.parseMilliseconds=(e,t,i)=>{const n=this.numberRe.exec(t.slice(i,i+3));return n?(e.L=+n[0],i+n[0].length):-1},this.parseMonthNumber=(e,t,i)=>{const n=this.numberRe.exec(t.slice(i,i+2));return n?(e.m=n-1,i+n[0].length):-1},this.parseMinutes=(e,t,i)=>{const n=this.numberRe.exec(t.slice(i,i+2));return n?(e.M=+n[0],i+n[0].length):-1},this.parsePeriod=(e,t,i)=>{const n=this.periodRe.exec(t.slice(i));return n?(e.p=this.periodLookup.get(n[0].toLowerCase()),i+n[0].length):-1},this.parseSeconds=(e,t,i)=>{const n=this.numberRe.exec(t.slice(i,i+2));return n?(e.S=+n[0],i+n[0].length):-1},this.parseFullYear=(e,t,i)=>{const n=this.numberRe.exec(t.slice(i,i+4));return n?(e.y=+n[0],i+n[0].length):-1},this.parses={a:this.parseShortWeekday,A:this.parseWeekday,b:this.parseShortMonth,B:this.parseMonth,d:this.parseDayOfMonth,e:this.parseDayOfMonth,H:this.parseHour24,I:this.parseHour24,L:this.parseMilliseconds,m:this.parseMonthNumber,M:this.parseMinutes,p:this.parsePeriod,S:this.parseSeconds,Y:this.parseFullYear},this.timeFormat=(e,t)=>this.newFormat(e,this.formats)(new Date(this.getFullTimeStamp(t))),this.timeUTCFormat=(e,t)=>this.newFormat(e,this.utcFormats)(new Date(this.getFullTimeStamp(t))),this.timeParse=(e,t)=>this.newParse(e,!1)(t+""),this.requoteF=this.requote.bind(this),this.periodRe=this.formatRe(this.locale_periods),this.periodLookup=this.formatLookup(this.locale_periods),this.weekdayRe=this.formatRe(this.locale_weekdays),this.weekdayLookup=this.formatLookup(this.locale_weekdays),this.shortWeekdayRe=this.formatRe(this.locale_shortWeekdays),this.shortWeekdayLookup=this.formatLookup(this.locale_shortWeekdays),this.monthRe=this.formatRe(this.locale_months),this.monthLookup=this.formatLookup(this.locale_months),this.shortMonthRe=this.formatRe(this.locale_shortMonths),this.shortMonthLookup=this.formatLookup(this.locale_shortMonths)}requote(e){return e.replace(this.requoteRe,"\\$&")}localDate(e){if(0<=e.y&&e.y<100){const t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}utcDate(e){if(0<=e.y&&e.y<100){const t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}newDate(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}formatRe(e){return new RegExp("^(?:"+e.map(this.requoteF).join("|")+")","i")}formatLookup(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}pad(e,t,i){const n=e<0?"-":"",r=(n?-e:e)+"",s=r.length;return n+(s<i?new Array(i-s+1).join(t)+r:r)}parseSpecifier(e,t,i,n){let r=0;const s=t.length,a=i.length;let o,l;for(;r<s;){if(n>=a)return-1;if(o=t.charCodeAt(r++),37===o){if(o=t.charAt(r++),l=this.parses[o in this.pads?t.charAt(r++):o],!l||(n=l(e,i,n))<0)return-1}else if(o!==i.charCodeAt(n++))return-1}return n}newParse(e,t){const i=this;return function(n){const r=i.newDate(1900,void 0,1);return i.parseSpecifier(r,e,n+="",0)!==n.length?null:"Q"in r?new Date(r.Q):"s"in r?new Date(1e3*r.s+("L"in r?r.L:0)):(t&&!("Z"in r)&&(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,i.utcDate(r)):i.localDate(r))}}newFormat(e,t){const i=this;return function(n){const r=[];let s=-1,a=0;const o=e.length;let l,c,h;for(n instanceof Date||(n=new Date(+n));++s<o;)37===e.charCodeAt(s)&&(r.push(e.slice(a,s)),(c=i.pads[l=e.charAt(++s)])?l=e.charAt(++s):c="e"===l?" ":"0",h=t[l],l=h(n,c),r.push(l),a=s+1);return r.push(e.slice(a,s)),r.join("")}}getFullTimeStamp(e){const t=parseInt(e+"",10);return 10===String(t).length?1e3*t:t}}class AB extends SR{getDefaultTooltipPattern(e){return"mark"===e?{visible:!0,activeType:e,title:{key:"link info",value:"link info"},content:[{hasShape:!0,shapeType:"square",shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,key:"time",value:e=>kB.getInstance().timeFormat("%Y%m%d %H:%M",e.from.split("_")[1])},{hasShape:!0,shapeType:"square",shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,key:"type",value:e=>e.action_type},{hasShape:!0,shapeType:"square",shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,key:"from",value:e=>e.from},{hasShape:!0,shapeType:"square",shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,key:"to",value:e=>e.to}]}:null}}class EB extends kk{constructor(){super(...arguments),this.type=EB.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x1:0,y1:0})}}EB.type="rule";const TB=()=>{_n.registerMark(EB.type,EB),hP()},OB=(e,t)=>{const{infoKey:i,fields:n,linkData:r,dotData:s}=t,{fromField:a,toField:o,xField:l,yField:c}=n(),h=r(),d=s(),u={};return d.forEach((e=>{const t={};for(const r in e)r!==i&&(t[r]=e[r]);const n=e[i];null==n||n.forEach((e=>{u[e.node_name]=Object.assign({},t,e)}))})),h.forEach((e=>{var t,i,n,r;e[a+"_xField"]=null===(t=null==u?void 0:u[e[a]])||void 0===t?void 0:t[l],e[a+"_yField"]=null===(i=null==u?void 0:u[e[a]])||void 0===i?void 0:i[c],e[o+"_xField"]=null===(n=null==u?void 0:u[e[o]])||void 0===n?void 0:n[l],e[o+"_yField"]=null===(r=null==u?void 0:u[e[o]])||void 0===r?void 0:r[c]})),h};class PB extends YR{constructor(){super(...arguments),this.type=Bt.link}getFromField(){return this._fromField}setFromField(e){x(e)&&(this._fromField=e)}getToField(){return this._toField}setToField(e){x(e)&&(this._toField=e)}getDotTypeField(){return this._dotTypeField}setDotTypeField(e){x(e)&&(this._dotTypeField=e)}getDotSeriesSpec(){return this._dotSeriesSpec}setDotSeriesSpec(e){x(e)&&(this._dotSeriesSpec=e)}_getDotData(){const e=this._option.getChart().getSeriesInIndex([this._spec.dotSeriesIndex])[0];return e?e.getRawData().latestData:[]}initData(){var e;super.initData(),uo(this._option.dataSet,"linkDotInfo",OB),null===(e=this.getViewData())||void 0===e||e.transform({type:"linkDotInfo",options:{infoKey:"dots",fields:()=>({fromField:this._fromField,toField:this._toField,xField:this._dotSeriesSpec.xField,yField:this._dotSeriesSpec.yField}),linkData:()=>this._rawData.latestData,dotData:()=>this._getDotData()},level:wo.linkDotInfo},!1)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFromField(this._spec.fromField),this.setToField(this._spec.toField),this.setDotTypeField(this._spec.dotTypeField),this.setDotSeriesSpec(this._spec.dotSeriesSpec)}initMark(){this._clipMark=this._createMark(PB.mark.group),this._containerMark=this._createMark(PB.mark.group,{parent:this._clipMark}),this._linkMark=this._createMark(PB.mark.link,{skipBeforeLayouted:!1,parent:this._containerMark}),this._arrowMark=this._createMark(PB.mark.arrow,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark})}initMarkStyle(){var e,t,i,n;const r=this._clipMark;r&&(this.setMarkStyle(r,{x:-this._spec.leftAppendPadding,y:0,width:1e4,height:this._spec.clipHeight,clip:!0},"normal",Tw.Series),r.setInteractive(!1));const s=this._containerMark;s&&(this.setMarkStyle(s,{x:this._spec.leftAppendPadding,width:this.getLayoutRect().width},"normal",Tw.Series),s.setInteractive(!1));const a=this._linkMark;a&&(this.setMarkStyle(a,{stroke:this.getColorAttribute(),strokeOpacity:this.dataToOpacity.bind(this),x:this.dataToPositionXFrom.bind(this),y:this.dataToPositionYFrom.bind(this),x1:this.dataToPositionXTo.bind(this),y1:this.dataToPositionYTo.bind(this)},"normal",Tw.Series),this._trigger.registerMark(a));const o=this._arrowMark;if(o){const r=null!==(n=null===(i=null===(t=null===(e=this._theme)||void 0===e?void 0:e.arrow)||void 0===t?void 0:t.style)||void 0===i?void 0:i.size)&&void 0!==n?n:10;this.setMarkStyle(o,{x:this.dataToPositionXTo.bind(this),y:e=>this.dataToPositionArrowYTo(e,r),fill:this.getColorAttribute(),fillOpacity:this.dataToOpacity.bind(this),size:r,symbolType:e=>this.isPositionYFromHigher(e)?"triangleDown":"triangleUp"},"normal",Tw.Series),this._trigger.registerMark(o)}}afterInitMark(){super.afterInitMark(),this._trigger.setStateKeys([this._seriesField,this._fromField])}dataToPositionXFrom(e){if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:t}=this._xAxisHelper;return t(this.getDatumPositionValues(e,this._fromField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYFrom(e){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:t}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._fromField+"_yField"))}dataToPositionXTo(e){if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:t}=this._xAxisHelper;return t(this.getDatumPositionValues(e,this._toField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYTo(e){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:t}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._toField+"_yField"),{bandPosition:this._bandPosition})}dataToPositionArrowYTo(e,t){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:i}=this._yAxisHelper,n=this.isPositionYFromHigher(e)?-t/2:t/2;return i(this.getDatumPositionValues(e,this._toField+"_yField"),{bandPosition:this._bandPosition})+n}dataToOpacity(e){return this.isPositionXOuterRange(e,this._fromField+"_xField")||this.isPositionXOuterRange(e,this._toField+"_xField")||e[this._fromField]===e[this._toField]?0:1}isPositionYFromHigher(e){return this.dataToPositionYFrom(e)<this.dataToPositionYTo(e)}isPositionXOuterRange(e,t){if(!this._xAxisHelper)return!1;const{dataToPosition:i,getScale:n}=this._xAxisHelper;return i(this.getDatumPositionValues(e,t),{bandPosition:this._bandPosition})<n(0).range()[0]||i(this.getDatumPositionValues(e,t),{bandPosition:this._bandPosition})>n(0).range()[1]}getDefaultColorDomain(){var e,t;return this._dotTypeField?null===(e=this.getViewDataStatistics())||void 0===e?void 0:e.latestData[this._dotTypeField].values:this._seriesField?null===(t=this.getViewDataStatistics())||void 0===t?void 0:t.latestData[this._seriesField].values:[]}getColorAttribute(){var e,t,i;return{scale:null!==(e=this._option.globalScale.getScale("color"))&&void 0!==e?e:this._getDefaultColorScale(),field:null!==(i=null!==(t=this._dotTypeField)&&void 0!==t?t:this._seriesField)&&void 0!==i?i:Aw}}initTooltip(){this._tooltipHelper=new AB(this),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark),this._arrowMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._arrowMark)}onMarkTreePositionUpdate(e){e.forEach((e=>{"group"===e.type?this.onMarkTreePositionUpdate(e.getMarks()):e.updateLayoutState()}))}getDotInfoData(){var e,t;return null===(t=null!==(e=this._linkMark)&&void 0!==e?e:this._arrowMark)||void 0===t?void 0:t.getData()}getActiveMarks(){return[this._linkMark,this._arrowMark]}}PB.type=Bt.link,PB.mark=pi;class MB extends SR{updateTooltipSpec(){var e;super.updateTooltipSpec(),x(null===(e=this.spec)||void 0===e?void 0:e.mark)&&(this.spec.mark.updateContent=(e,t,i)=>{const n=[],r=e.filter((e=>"children"===e.key));return r.length>0&&r[0].value.forEach((e=>{let i=!0;for(const r in e)n.push({shapeType:"circle",hasShape:i,shapeColor:this.contentShapeColorCallback(t[0].datum[0]),shapeStroke:this.contentShapeColorCallback(t[0].datum[0]),key:r,value:e[r]+""}),i=!1})),e.concat(n)})}getDefaultTooltipPattern(e){return"mark"===e?{visible:!0,activeType:e,title:{key:"event info",value:"event info"},content:[{hasShape:!0,shapeType:"square",shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,key:e=>e.type,value:e=>e.id},{hasShape:!0,shapeType:"square",shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,key:"event_time",value:e=>kB.getInstance().timeFormat("%Y%m%d",e.event_time)},{hasShape:!0,shapeType:"square",shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,key:"action_type",value:e=>e.action_type},{shapeType:"square",hasShape:!0,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,key:"children",value:e=>e.children}],updateContent:(e,t,i)=>{const n=[];return e[3].value.forEach((e=>{let i=!0;for(const r in e)n.push({shapeType:"circle",hasShape:i,shapeColor:this.contentShapeColorCallback(t[0].datum[0]),shapeStroke:this.contentShapeColorCallback(t[0].datum[0]),key:r,value:e[r]+""}),i=!1})),e.concat(n)}}:null}}const IB=(e,t)=>{var i;const n=(null===(i=e[0])||void 0===i?void 0:i.latestData)?e[0].latestData:e||[],r=[];return n.forEach((e=>{const i={};for(const r in e)r!==t&&(i[r]=e[r]);const n=e[t];null==n||n.forEach((e=>{r.push(Object.assign({},i,e))}))})),r},RB={fill:"#bbb",fillOpacity:.2};class DB extends kk{constructor(){super(...arguments),this.type=DB.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{angle:0,textAlign:"center",lineWidth:0,textConfig:[]})}_initProduct(e){const t=this.getVGrammarView(),i=this.getProductId();"rich"===this.getStyle("textType")?this._product=t.mark(Vr.richtext,null!=e?e:t.rootMark).id(i):this._product=t.mark(Vr.text,null!=e?e:t.rootMark).id(i),this._compiledProductId=i}}DB.type="text";const LB=()=>{_n.registerMark(DB.type,DB),uP(),Ok(),fO(),nm.registerGraphic(Vr.richtext,eO)};class jB extends YR{constructor(){super(...arguments),this.type=Bt.dot}getSeriesGroupField(){return this._seriesField}setSeriesGroupField(e){x(e)&&(this._seriesGroupField=e)}getTitleField(){return this._titleField}setTitleField(e){x(e)&&(this._titleField=e)}getSubTitleField(){return this._subTitleField}setSubTitleField(e){x(e)&&(this._subTitleField=e)}getDotTypeField(){return this._dotTypeField}setDotTypeField(e){x(e)&&(this._dotTypeField=e)}getHighLightSeriesGroup(){return this._highLightSeriesGroup}setHighLightSeriesGroup(e){x(e)&&(this._highLightSeriesGroup=e)}setGridBackground(e){x(e)&&(this._gridBackground=e)}initData(){var e;super.initData(),this._xDimensionStatisticsDomain=this.getRawData().latestData.map((e=>e[this._fieldY[0]])),uo(this._option.dataSet,"objFlat",IB),uo(this._option.dataSet,"copyDataView",bo),po(this._option.dataSet,"dataview",y),null===(e=this.getViewData())||void 0===e||e.transform({type:"objFlat",options:"dots",level:wo.dotObjFlat},!1)}setSeriesField(e){x(e)&&(this._seriesField=e,this.getMarksInType(["line","area"]).forEach((e=>{e.setFacet(this._seriesField)})))}getStatisticFields(){return[{key:this._fieldY[0],operations:["values"],customize:this._xDimensionStatisticsDomain}]}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setSeriesGroupField(this._spec.seriesGroupField),this.setTitleField(this._spec.titleField),this.setSubTitleField(this._spec.subTitleField),this.setDotTypeField(this._spec.dotTypeField),this.setHighLightSeriesGroup(this._spec.highLightSeriesGroup),this.setGridBackground(_e(RB,(null===(e=this._spec.grid)||void 0===e?void 0:e.background)||{}))}initMark(){this._clipMark=this._createMark(jB.mark.group),this._containerMark=this._createMark(jB.mark.group,{parent:this._clipMark,dataView:this.getRawData()}),this._gridBackgroundMark=this._createMark(jB.mark.gridBackground,{parent:this._containerMark,dataView:this.getRawData()}),this._gridMark=this._createMark(jB.mark.grid,{parent:this._containerMark,dataView:this.getRawData()}),this._dotMark=this._createMark(jB.mark.dot,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark}),this._titleMark=this._createMark(jB.mark.title,{parent:this._containerMark,dataView:this.getRawData()}),this._subTitleMark=this._createMark(jB.mark.subTitle,{parent:this._containerMark,dataView:this.getRawData()}),this._symbolMark=this._createMark(jB.mark.symbol,{parent:this._containerMark,dataView:this.getRawData()})}initMarkStyle(){const e=this._clipMark;e&&(this.setMarkStyle(e,{x:-this._spec.leftAppendPadding,y:0,width:1e4,height:this._spec.clipHeight,clip:!0},"normal",Tw.Series),e.setInteractive(!1));const t=this._containerMark;t&&(this.setMarkStyle(t,{x:this._spec.leftAppendPadding},"normal",Tw.Series),t.setInteractive(!1));const i=this._gridBackgroundMark;i&&(this.setMarkStyle(i,{x:this.getRegionRectLeft.bind(this),x1:this.getRegionRectRight.bind(this),y:this.dataToGridBackgroundPositionY.bind(this),y1:this.dataToGridBackgroundPositionY1.bind(this),fill:this._gridBackground.fill,fillOpacity:this.dataToGridBackgroundOpacity.bind(this)},"normal",Tw.Series),this._trigger.registerMark(i));const n=this._gridMark;n&&(this.setMarkStyle(n,{stroke:this.getColorAttribute(),x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),x1:this.getRegionRectRight.bind(this),y1:this.dataToPositionY.bind(this)},"normal",Tw.Series),this._trigger.registerMark(n));const r=this._dotMark;r&&(this.setMarkStyle(r,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),fill:this.getDotColorAttribute(),fillOpacity:this.dataToOpacity.bind(this)},"normal",Tw.Series),this._trigger.registerMark(r));const s=this._titleMark;s&&(this.setMarkStyle(s,{fill:this.getColorAttribute(),text:e=>e[this.getTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",Tw.Series),this._trigger.registerMark(s));const a=this._subTitleMark;a&&(this.setMarkStyle(a,{fill:this.getColorAttribute(),text:e=>e[this.getSubTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",Tw.Series),this._trigger.registerMark(a));const o=this._symbolMark;o&&(this.setMarkStyle(o,{x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),fill:this.getColorAttribute()},"normal",Tw.Series),this._trigger.registerMark(o))}dataToGridBackgroundPositionY(e){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:t,getBandwidth:i}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._fieldY),{bandPosition:this._bandPosition})-i(0)/2}dataToGridBackgroundPositionY1(e){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:t,getBandwidth:i}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._fieldY),{bandPosition:this._bandPosition})+i(0)/2}dataToOpacity(e){var t,i,n,r;if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:s,getScale:a}=this._xAxisHelper;return s(this.getDatumPositionValues(e,this._fieldX),{bandPosition:this._bandPosition})<a(0).range()[0]||s(this.getDatumPositionValues(e,this._fieldX),{bandPosition:this._bandPosition})>a(0).range()[1]?0:null!==(r=null===(n=null===(i=null===(t=this._theme)||void 0===t?void 0:t.dot)||void 0===i?void 0:i.style)||void 0===n?void 0:n.fillOpacity)&&void 0!==r?r:1}dataToGridBackgroundOpacity(e){return e[this._seriesGroupField]===this._highLightSeriesGroup?this._gridBackground.fillOpacity:0}onLayoutEnd(e){var t,i;super.onLayoutEnd(e);const n=null!==(i=null===(t=this._spec)||void 0===t?void 0:t.leftAppendPadding)&&void 0!==i?i:0;this.setMarkStyle(this._clipMark,{width:this.getLayoutRect().width+n},"normal",Tw.Series)}getDefaultColorDomain(){var e,t;return this._seriesGroupField?null===(e=this.getViewDataStatistics())||void 0===e?void 0:e.latestData[this._seriesGroupField].values:this._seriesField?null===(t=this.getViewDataStatistics())||void 0===t?void 0:t.latestData[this._seriesField].values:[]}getColorAttribute(){var e,t,i;return{scale:null!==(e=this._option.globalScale.getScale("color"))&&void 0!==e?e:this._getDefaultColorScale(),field:null!==(i=null!==(t=this._seriesGroupField)&&void 0!==t?t:this._seriesField)&&void 0!==i?i:Aw}}getDotColorScale(){var e,t,i;const n=this._dotTypeField?null===(e=this.getViewDataStatistics())||void 0===e?void 0:e.latestData[this._dotTypeField].values:this._seriesGroupField?null===(t=this.getViewDataStatistics())||void 0===t?void 0:t.latestData[this._seriesGroupField].values:this._seriesField?null===(i=this.getViewDataStatistics())||void 0===i?void 0:i.latestData[this._seriesField].values:[],r=this._getDataScheme();return(new uk).domain(n).range(r)}getDotColorAttribute(){var e,t,i,n;return{scale:null!==(e=this._option.globalScale.getScale("color"))&&void 0!==e?e:this.getDotColorScale(),field:null!==(n=null!==(i=null!==(t=this._dotTypeField)&&void 0!==t?t:this._seriesGroupField)&&void 0!==i?i:this._seriesField)&&void 0!==n?n:Aw}}initTooltip(){this._tooltipHelper=new MB(this),this._dotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._dotMark)}onEvaluateEnd(e){super.onEvaluateEnd(e)}onMarkTreePositionUpdate(e){e.forEach((e=>{"group"===e.type?this.onMarkTreePositionUpdate(e.getMarks()):e.updateLayoutState()}))}getDotData(){var e;return null===(e=this._dotMark)||void 0===e?void 0:e.getData()}_getDataIdKey(){}getStackValueField(){return null}getActiveMarks(){return[this._dotMark]}}jB.type=Bt.dot,jB.mark=gi;class FB extends oD{_getSeriesDataLength(e,t){var i,n;if(t.data){const e=z(t.data)[0];return e instanceof R?null===(i=e.latestData)||void 0===i?void 0:i.length:null===(n=e.values)||void 0===n?void 0:n.length}const r=z(e.data).find(((e,i)=>t.dataId?e instanceof R?e.name===t.dataId:e.id===t.dataId:t.dataIndex===i));return r?r instanceof R?r.latestData.length:r.values.length:0}addAttrToComponentSpec(e,t,i){return Array.isArray(e)?e[0][t]=i:e[t]=i,e}transformSpec(e){var t,i,n,r,s,a,o,l,c,h,d;super.transformSpec(e);let u=0;const p=[],g=[],f=[],m=[],v=[],y=e.series.filter((e=>e.type!==Bt.link)).length,b=(500-20*(y-1))/y,_=(null===(t=null==e?void 0:e.appendPadding)||void 0===t?void 0:t.left)||0,x=(null===(i=null==e?void 0:e.appendPadding)||void 0===i?void 0:i.right)||0;if(null==e?void 0:e.legends){p.push({modelId:"legendRow".concat(u),col:1,row:u}),this.addAttrToComponentSpec(e.legends,"id","legendRow".concat(u));const t=z(e.legends);let i=null!==(n=t[0].height)&&void 0!==n?n:40;if(t[0].padding){const e=ie(t[0].padding);i+=Number(null!==(r=null==e?void 0:e.bottom)&&void 0!==r?r:0),i+=Number(null!==(s=null==e?void 0:e.top)&&void 0!==s?s:0),t[0].offsetY=Number(null!==(o=null===(a=t[0])||void 0===a?void 0:a.offsetY)&&void 0!==o?o:0)+Number(null!==(l=null==e?void 0:e.top)&&void 0!==l?l:0)}v.push({index:u,size:i}),u++}(null==e?void 0:e.dataZoom)&&(p.push({modelId:"dataZoomRow".concat(u),col:1,row:u}),this.addAttrToComponentSpec(e.dataZoom,"id","dataZoomRow".concat(u)),u++,v.push({index:u,size:10}),u++),g.push({id:"regionAxesRow".concat(u)}),p.push({modelId:"axesRow".concat(u),col:1,row:u}),e.axes[0].id="axesRow".concat(u),e.axes[0].regionIndex=Array.from(Array(e.series.length),((e,t)=>t+1)),u++,null===(c=null==e?void 0:e.series)||void 0===c||c.forEach((t=>{var i,n;if([Bt.bar,Bt.line,Bt.area,Bt.dot].includes(t.type)){if(p.push({modelId:"".concat(t.type,"Row").concat(u),col:1,row:u}),p.push({modelId:"axesLeftRow".concat(u),col:0,row:u}),g.push({id:"".concat(t.type,"Row").concat(u),clip:!1}),v.push({index:u,size:(null==t?void 0:t.height)||b}),f.push({orient:"left",id:"axesLeftRow".concat(u),type:t.type===Bt.dot?"band":"linear",visible:t.type!==Bt.dot,title:{visible:!0,autoRotate:!1,style:{text:null==t?void 0:t.barTitle,dx:-20,textBaseline:"middle",textAlign:"end"}},grid:{visible:"boolean"!=typeof(null===(i=null==t?void 0:t.grid)||void 0===i?void 0:i.visible)||(null===(n=null==t?void 0:t.grid)||void 0===n?void 0:n.visible),style:(e,i)=>{var n,r,s,a,o;let l=0;if(0===i){const e=null===(n=null==t?void 0:t.grid)||void 0===n?void 0:n.style;l=null!==(s=null!==(r=null==e?void 0:e.lineWidth)&&void 0!==r?r:null==e?void 0:e.strokeWidth)&&void 0!==s?s:1}return{lineWidth:l,stroke:(null===(o=null===(a=null==t?void 0:t.grid)||void 0===a?void 0:a.style)||void 0===o?void 0:o.stroke)||"#dfdfdf",lineDash:[0,0]}}},domainLine:{visible:!1},tick:{visible:!1},label:{visible:!1},regionIndex:g.length-1}),t.type===Bt.dot){p.push({modelId:"scrollBarRightRow".concat(u),col:2,row:u});const i=this._getSeriesDataLength(e,t);let n=0;i&&(n=((null==t?void 0:t.height)||b)/(30*i)),m.push(Object.assign({orient:"right",visible:t.type===Bt.dot&&n<1,id:"scrollBarRightRow".concat(u),start:0,end:Math.min(n,1),filterMode:"axis",regionIndex:g.length-1,axisId:"axesLeftRow".concat(u)},z(null==e?void 0:e.scrollBar)[0]))}t.regionIndex=g.length-1,u++,v.push({index:u,size:(null==t?void 0:t.padding)||20}),u++,t.leftAppendPadding=_,t.type===Bt.dot&&(t.title.style.dx=-_,t.subTitle.style.dx=-_)}})),null===(h=null==e?void 0:e.series)||void 0===h||h.forEach((t=>{if(t.type===Bt.link){const i=t.dotSeriesIndex+1;p.push({modelId:"".concat(t.type,"Row").concat(i),col:1,row:i-1}),t.regionIndex=e.series[t.dotSeriesIndex].regionIndex,t.leftAppendPadding=_,t.height=e.series[t.dotSeriesIndex].height,t.clipHeight=e.series[t.dotSeriesIndex].clipHeight}})),(null==e?void 0:e.legends)&&this.addAttrToComponentSpec(e.legends,"regionIndex",[g.length-1]);const S={type:"grid",col:4,row:u,colWidth:[{index:0,size:_},{index:2,size:12},{index:3,size:x}],rowHeight:v,elements:p};e.layout=S,e.region=g,null===(d=e.axes)||void 0===d||d.push(...f),e.scrollBar=m}}var BB=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class NB extends fD{constructor(){super(...arguments),this.transformerConstructor=FB,this.type="sequence"}_createSeries(e,t){if(!e)return;const{spec:i}=t,n=BB(t,["spec"]);let r;if(i.type===Bt.link&&(i.dotSeriesSpec=this._spec.series[i.dotSeriesIndex]),i.regionId&&(r=this.getRegionsInUserId(i.regionId)),r||(r=this.getRegionsInIndex(i.regionIndex?[i.regionIndex]:void 0)[0]),!r)return;const s=new e(i,Object.assign(Object.assign(Object.assign({},this._modelOption),n),{region:r,specKey:"series",globalScale:this._globalScale}));s&&(s.created(),this._series.push(s),r.addSeries(s))}}NB.type="sequence",NB.view="singleDefault",NB.transformerConstructor=FB;class zB extends lD{transformSpec(e){super.transformSpec(e),e.axes.forEach((e=>e.type="linear"))}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{x2Field:null==e?void 0:e.x2Field,y2Field:null==e?void 0:e.y2Field,barMinHeight:null==e?void 0:e.barMinHeight})}}class HB extends fD{constructor(){super(...arguments),this.transformerConstructor=zB,this._canStack=!0}}HB.transformerConstructor=zB;class VB extends zB{transformSpec(e){super.transformSpec(e),dw(e)}}class UB extends HB{constructor(){super(...arguments),this.transformerConstructor=VB,this.type="histogram",this.seriesType=Bt.bar}}UB.type="histogram",UB.seriesType=Bt.bar,UB.view="singleDefault",UB.transformerConstructor=VB;class WB extends HB{constructor(){super(...arguments),this.transformerConstructor=VB,this.type="histogram3d",this.seriesType=Bt.bar3d}}WB.type="histogram3d",WB.seriesType=Bt.bar3d,WB.view="singleDefault",WB.transformerConstructor=VB;const GB=(e,t)=>KB(0,e.length,(i=>t(e[i]))),KB=(e,t,i)=>{let n=e,r=t;for(;n<r;){const e=Math.floor((n+r)/2);i(e)>=0?r=e:n=e+1}return n};class YB extends EF{constructor(){super(...arguments),this._supportStack=!0,this._arcGroupMark=null,this._getAngleValueStart=e=>{const t=this._getAngleAxis(),{tickMask:i}=this._spec;if((null==i?void 0:i.forceAlign)&&this._isTickMaskVisible(t)){const n=e[this._stack?Ow:Bw],r=this._getAngleAxisSubTickData(t),s=r[1].value-r[0].value,a=el(i.offsetAngle);let o;if(x(n)){const e=GB(r,(e=>e.value-n)),t=n>r[e].value-s/2?Math.min(e,r.length-1):e>0?e-1:void 0;void 0!==t&&(o=this.angleAxisHelper.dataToPosition([r[t].value-s/2]))}return P(o)&&(o=this.angleAxisHelper.dataToPosition([r[0].value-s/2])),o+a}return this._getAngleValueStartWithoutMask(e)},this._getAngleValueEnd=e=>{const t=this._getAngleAxis(),{tickMask:i}=this._spec;if((null==i?void 0:i.forceAlign)&&this._isTickMaskVisible(t)){const n=e[this._stack?Pw:this._angleField[0]],r=this._getAngleAxisSubTickData(t),s=r[1].value-r[0].value,a=el(i.offsetAngle),o=GB(r,(e=>e.value-n)),l=n>r[o].value-s/2?Math.min(o,r.length-1):o>0?o-1:void 0;let c;return c=void 0!==l?this.angleAxisHelper.dataToPosition([r[l].value+s/2]):this.angleAxisHelper.dataToPosition([r[0].value-s/2]),c+a}return this._getAngleValueEndWithoutMask(e)}}setAttrFromSpec(){var e,t,i;super.setAttrFromSpec();const n=null===(e=this._option.globalInstance.getChart())||void 0===e?void 0:e.getSpec(),r=null!==(t=this._spec.startAngle)&&void 0!==t?t:null==n?void 0:n.startAngle;this._startAngle=x(r)?el(r):it;const s=null!==(i=this._spec.endAngle)&&void 0!==i?i:null==n?void 0:n.endAngle;this._endAngle=x(s)?el(s):nt,this.setAngleField(this._spec.valueField||this._spec.angleField),this.setRadiusField(this._spec.categoryField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice()}getStackGroupFields(){return this._radiusField}getStackValueField(){var e;return null===(e=this._angleField)||void 0===e?void 0:e[0]}getGroupFields(){return this._angleField}_convertMarkStyle(e){const t=super._convertMarkStyle(e);if(t.fill){const i=e.fill;"conical"!==(null==i?void 0:i.gradient)||x(null==i?void 0:i.startAngle)||x(null==i?void 0:i.endAngle)||(t.fill=Object.assign(Object.assign({},i),{startAngle:this._startAngle,endAngle:this._endAngle}))}return t}_getAngleValueStartWithoutMask(e){if(this._stack){const t=fk(this.angleAxisHelper.dataToPosition([e[Ow]]),this.angleAxisHelper.getScale(0));if(L(t))return t}return this._startAngle}_getAngleValueEndWithoutMask(e){if(this._stack){const t=fk(this.angleAxisHelper.dataToPosition([e[Pw]]),this.angleAxisHelper.getScale(0));if(L(t))return t}return this.angleAxisHelper.dataToPosition([e[this._angleField[0]]])}getDimensionField(){return this._specRadiusField}getMeasureField(){return this._specAngleField}initMark(){this._initArcGroupMark()}initMarkStyle(){this._initArcGroupMarkStyle()}_initArcGroupMark(){return this._arcGroupMark=this._createMark(YB.mark.group,{skipBeforeLayouted:!1}),this._arcGroupMark}_initArcGroupMarkStyle(){const e=this._arcGroupMark;e.setZIndex(this.layoutZIndex),e.created(),this.setMarkStyle(e,{clip:!0,x:0,y:0,path:()=>{const e=this._getAngleAxis();if(this._isTickMaskVisible(e)){const{tickMask:t}=this._spec,{angle:i,offsetAngle:n,style:r={}}=t,s=this._getAngleAxisSubTickData(e),{x:a,y:o}=this.angleAxisHelper.center(),l=this._computeLayoutRadius(),c=r;return s.map((e=>{let{value:t}=e;const r=this.angleAxisHelper.dataToPosition([t])+el(n),s=el(i)/2;return Ik(Object.assign(Object.assign({},c),{x:a,y:o,startAngle:r-s,endAngle:r+s,innerRadius:l*this._innerRadius,outerRadius:l*this._outerRadius,fill:!0}))}))}const{width:t,height:i}=this.getLayoutRect();return[jS({width:t,height:i,fill:!0})]}},"normal",Tw.Series),this._arcGroupMark.setInteractive(!1)}_getAngleAxis(){if(!this.angleAxisHelper)return;const e=this.angleAxisHelper.getAxisId();return this._option.getChart().getAllComponents().find((t=>t.id===e))}_getAngleAxisTickData(e){var t;return null===(t=null==e?void 0:e.getTickData())||void 0===t?void 0:t.getLatestData()}_isTickMaskVisible(e){const t=this._getAngleAxisTickData(e),{tickMask:i}=this._spec;return i&&!1!==i.visible&&(null==t?void 0:t.length)>1}_getAngleAxisSubTickData(e){var t;const i=this._getAngleAxisTickData(e),n=[],{subTick:r={},tick:s={}}=null!==(t=null==e?void 0:e.getSpec())&&void 0!==t?t:{},{tickCount:a=4}=r,{alignWithLabel:o}=s;if((null==i?void 0:i.length)>=2){const e=i[1].value-i[0].value;for(let t=0;t<i.length-1;t++){const r=i[t],s=i[t+1];n.push(r);for(let t=0;t<a;t++){const i=(t+1)/(a+1),l=(1-i)*r.value+i*(s?s.value:o?1:r.value+e);n.push({value:l})}}return n.push(i[i.length-1]),n}return i}}YB.mark=di;class XB extends jF{constructor(){super(...arguments),this._cacheStateStyle={}}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{innerPadding:0,outerPadding:0})}_filterStyle(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.stateStyle;var r,s,a,o,l,c,h,d,u,p,g,f,m,v,y,b,_,S;x(e.innerRadius)&&this.setAttribute("innerRadius",this._styleConvert(e.innerRadius),t,i,this._cacheStateStyle),x(e.outerRadius)&&this.setAttribute("outerRadius",this._styleConvert(e.outerRadius),t,i,this._cacheStateStyle);const w=null!==(r=e.innerPadding)&&void 0!==r?r:null===(a=null===(s=n[t])||void 0===s?void 0:s.innerPadding)||void 0===a?void 0:a.style,C=null!==(o=e.outerPadding)&&void 0!==o?o:null===(c=null===(l=n[t])||void 0===l?void 0:l.outerPadding)||void 0===c?void 0:c.style,k=null!==(p=null!==(h=e.innerRadius)&&void 0!==h?h:null===(u=null===(d=this._cacheStateStyle[t])||void 0===d?void 0:d.innerRadius)||void 0===u?void 0:u.style)&&void 0!==p?p:null===(f=null===(g=n[t])||void 0===g?void 0:g.innerRadius)||void 0===f?void 0:f.style,A=null!==(b=null!==(m=e.outerRadius)&&void 0!==m?m:null===(y=null===(v=this._cacheStateStyle[t])||void 0===v?void 0:v.outerRadius)||void 0===y?void 0:y.style)&&void 0!==b?b:null===(S=null===(_=n[t])||void 0===_?void 0:_.outerRadius)||void 0===S?void 0:S.style;if(0===k&&0===A)return e;const E=x(e.innerPadding)&&x(k)||x(e.outerPadding)&&x(A),T=x(e.innerRadius)&&w||x(e.outerRadius)&&C;if(E||T){const t=Object.assign({},e);return w&&x(k)&&(Q(k)?t.innerRadius=(e,t,i,n)=>k(e,t,i,n)+(Q(w)?w(e,t,i,n):w):Q(w)?t.innerRadius=(e,t,i,n)=>{const r=w(e,t,i,n);return k+r}:t.innerRadius=k+w),C&&x(A)&&(Q(A)?t.outerRadius=(e,t,i,n)=>A(e,t,i,n)-(Q(C)?C(e,t,i,n):C):Q(C)?t.outerRadius=(e,t,i,n)=>{const r=C(e,t,i,n);return A-r}:t.outerRadius=A-C),t}return e}}XB.type="arc",XB.constructorType="progressArc";const qB=()=>{oP(),TM(),_n.registerMark(XB.constructorType,XB)},ZB={type:"fadeIn"};function QB(e,t){return"fadeIn"===t?ZB:(e=>({type:"growAngleIn",options:{overall:e.startAngle}}))(e)}const $B=()=>{_n.registerAnimation("circularProgress",((e,t)=>({appear:QB(e,t),enter:{type:"growAngleIn"},disappear:{type:"growAngleOut"}})))};class JB extends YB{constructor(){super(...arguments),this.type=Bt.circularProgress,this._progressMark=null,this._trackMark=null,this._getRadiusValueStart=e=>{if(this.getGroupFields().length>1){const t=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()));if(L(t))return t}return this.radiusAxisHelper.dataToPosition([e[this._radiusField[0]]])},this._getRadiusValueEnd=e=>{var t,i;if(this.getGroupFields().length>1){const n=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()))+(null===(i=(t=this.radiusAxisHelper).getBandwidth)||void 0===i?void 0:i.call(t,this._groups?this._groups.fields.length-1:0));if(L(n))return n}return this.radiusAxisHelper.dataToPosition([e[this._radiusField[0]]])+this.radiusAxisHelper.getScale(0).step()}}getStackGroupFields(){return this.getGroupFields()}getGroupFields(){return this._radiusField}initMark(){super.initMark(),this._initTrackMark(),this._initProgressMark()}initMarkStyle(){super.initMarkStyle(),this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){var e;return this._progressMark=this._createMark(JB.mark.progress,{parent:this._arcGroupMark,isSeriesMark:!0,customShape:null===(e=this._spec.progress)||void 0===e?void 0:e.customShape}),this._progressMark}_initProgressMarkStyle(){var e;const t=this._progressMark;t&&(this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart,endAngle:this._getAngleValueEnd,innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cap:null!==(e=this._spec.roundCap)&&void 0!==e&&e,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0},"normal",Tw.Series),this._trigger.registerMark(t))}initTooltip(){super.initTooltip(),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark)}_initTrackMark(){var e;return this._trackMark=this._createMark(JB.mark.track,{parent:this._arcGroupMark,customShape:null===(e=this._spec.track)||void 0===e?void 0:e.customShape}),this._trackMark}_initTrackMarkStyle(){const e=this._trackMark;e&&(this.setMarkStyle(e,{visible:e=>{const t=this.angleAxisHelper.getScale(0).range(),i=Math.min(t[0],t[t.length-1]),n=this._getAngleValueStartWithoutMask(e);return Math.abs(n-i)<=1e-14},x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:()=>{const e=this._stack?Ow:this._angleField[0],t=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueStart({[e]:t[0]})},endAngle:()=>{const e=this._stack?Pw:this._angleField[0],t=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueEnd({[e]:t[t.length-1]})},innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:100},"normal",Tw.Series),this._trigger.registerMark(e))}initAnimation(){var e,t,i,n;const r=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset;this._progressMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("circularProgress"))||void 0===i?void 0:i({startAngle:this._startAngle},r),FR("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(jR(null===(n=_n.getAnimationInKey("fadeInOut"))||void 0===n?void 0:n(),FR("track",this._spec,this._markAttributeContext)))}getActiveMarks(){return[this._progressMark]}}JB.type=Bt.circularProgress,JB.mark=ui;class eN extends UF{needAxes(){return!1}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{seriesField:e.seriesField,categoryField:e.categoryField||e.radiusField,valueField:e.valueField||e.angleField,startAngle:e.startAngle,endAngle:e.endAngle,radius:e.radius,innerRadius:e.innerRadius,centerX:e.centerX,centerY:e.centerY})}_transformProgressAxisSpec(e,t,i,n,r){var s,a;e.axes||(e.axes=[]);let o=(null!==(s=e.axes)&&void 0!==s?s:[]).find((e=>"radius"===e.orient)),l=(null!==(a=e.axes)&&void 0!==a?a:[]).find((e=>"angle"===e.orient));l||(l=t,e.axes.push(l)),o||(o=i,e.axes.push(o)),P(l.type)&&(l.type="linear"),P(o.type)&&(o.type="band");const c=Qj(l,{min:0,max:1});P(l.min)&&(l.min=c.min),P(l.max)&&(l.max=c.max),n&&Object.assign(l,_e({},n,l)),r&&Object.assign(o,_e({},r,o))}}class tN extends eN{_getDefaultSeriesSpec(e){var t,i;const n=super._getDefaultSeriesSpec(e);return Object.assign(Object.assign({},n),{cornerRadius:null!==(t=e.cornerRadius)&&void 0!==t?t:0,roundCap:null!==(i=e.roundCap)&&void 0!==i&&i,progress:e.progress,track:e.track,tickMask:e.tickMask})}transformSpec(e){super.transformSpec(e),this._transformProgressAxisSpec(e,{orient:"angle",visible:!1},{orient:"radius",visible:!1})}}class iN extends fD{constructor(){super(...arguments),this.transformerConstructor=tN,this.type="circularProgress",this.seriesType=Bt.circularProgress,this._canStack=!0}}iN.type="circularProgress",iN.seriesType=Bt.circularProgress,iN.view="singleDefault",iN.transformerConstructor=tN;const nN={type:"fadeIn"};function rN(e,t){return"fadeIn"===t?nN:(e=>({channel:{angle:{from:e.startAngle+Math.PI/2}}}))(e)}class sN extends YB{constructor(){super(...arguments),this.type=Bt.gaugePointer,this._pinMark=null,this._pointerMark=null,this._pinBackgroundMark=null,this._stack=!1}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setRadiusField(this._spec.radiusField),this._pointerType="rect"===(null===(e=this._spec.pointer)||void 0===e?void 0:e.type)?"rect":"path"}initMark(){this._pinBackgroundMark=this._createMark(sN.mark.pinBackground),this._pointerMark=this._createMark(Object.assign(Object.assign({},sN.mark.pointer),{type:this._pointerType}),{isSeriesMark:!0}),this._pinMark=this._createMark(sN.mark.pin)}initMarkStyle(){this.initPinBackgroundMarkStyle(),this.initPointerMarkStyle(),this.initPinMarkStyle()}initGroups(){}initPointerMarkStyle(){const e=this._pointerMark,t=this._spec.pointer;e&&(this.setMarkStyle(e,{x:e=>{var i,n;const{x:r}=this._getPointerAnchor(e,t);return r-this._getPointerWidth()*(null!==(n=null===(i=null==t?void 0:t.center)||void 0===i?void 0:i[0])&&void 0!==n?n:0)},y:e=>{var i,n;const{y:r}=this._getPointerAnchor(e,t);return r-this._getPointerHeight(e)*(null!==(n=null===(i=null==t?void 0:t.center)||void 0===i?void 0:i[1])&&void 0!==n?n:0)},anchor:e=>{const{x:i,y:n}=this._getPointerAnchor(e,t);return[i,n]},fill:this.getColorAttribute(),zIndex:200}),"path"===this._pointerType?this.setMarkStyle(e,{scaleX:this._getPointerWidth.bind(this),scaleY:this._getPointerHeight.bind(this),angle:e=>this._getPointerAngle(e)+Math.PI/2}):this.setMarkStyle(e,{width:this._getPointerWidth.bind(this),height:this._getPointerHeight.bind(this),angle:e=>this._getPointerAngle(e)-Math.PI/2}),this._trigger.registerMark(e))}initTooltip(){super.initTooltip(),this._pointerMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pointerMark)}_getPointerAnchor(e,t){var i;return null===(i=t.isOnCenter)||void 0===i||i?this.angleAxisHelper.center():this.radiusAxisHelper.coordToPoint({radius:this._innerRadius*this._computeLayoutRadius(),angle:this.angleAxisHelper.dataToPosition([e[this._angleField[0]]])})}_getPointerWidth(){return this._spec.pointer.width*this._computeLayoutRadius()}_getPointerHeight(e){var t,i;const n=this._spec.pointer,r=this._radiusField[0];return x(this.radiusAxisHelper)&&x(r)?this.radiusAxisHelper.dataToPosition([e[r]])-(null!==(t=null==n?void 0:n.innerPadding)&&void 0!==t?t:0)-(null!==(i=null==n?void 0:n.outerPadding)&&void 0!==i?i:10):n.height*this._computeLayoutRadius()}_getPointerAngle(e){return this.angleAxisHelper.dataToPosition([e[this._angleField[0]]])}_getRotatedPointerCenterOffset(e){var t,i,n,r;const s=this._spec.pointer,a=this._getPointerWidth()*(null!==(i=null===(t=null==s?void 0:s.center)||void 0===t?void 0:t[0])&&void 0!==i?i:0),o=-this._getPointerHeight(e)*(null!==(r=null===(n=null==s?void 0:s.center)||void 0===n?void 0:n[1])&&void 0!==r?r:0),l=this._getPointerAngle(e)-Math.PI/2,c=Math.cos(l),h=Math.sin(l);return{x:a*c+o*h,y:-(o*c-a*h)}}initPinBackgroundMarkStyle(){const e=this._pinBackgroundMark,t=this._spec.pinBackground;e&&this.setMarkStyle(e,{x:e=>this._getPointerAnchor(e,t).x,y:e=>this._getPointerAnchor(e,t).y,scaleX:()=>t.width*this._computeLayoutRadius(),scaleY:()=>t.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:100})}initPinMarkStyle(){const e=this._pinMark,t=this._spec.pin;e&&this.setMarkStyle(e,{x:e=>this._getPointerAnchor(e,t).x,y:e=>this._getPointerAnchor(e,t).y,scaleX:()=>t.width*this._computeLayoutRadius(),scaleY:()=>t.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:300})}initAnimation(){var e,t,i;const n=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset;this._pointerMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("gaugePointer"))||void 0===i?void 0:i({startAngle:this._startAngle},n),FR("pointer",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}sN.type=Bt.gaugePointer,sN.mark=Ci;const aN=()=>{Hj(),LD(),_n.registerAnimation("gaugePointer",((e,t)=>{const i=rN(e,t);return{appear:i,enter:i,disappear:{type:"fadeOut"}}})),_n.registerSeries(sN.type,sN)};class oN extends UR{_transformLabelSpec(e){this._addMarkLabelSpec(e,"segment")}}class lN extends YB{constructor(){super(...arguments),this.type=Bt.gauge,this.transformerConstructor=oN,this._segmentMark=null,this._trackMark=null,this._stack=!1,this._padAngle=0}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._padAngle=el(null!==(e=this._spec.padAngle)&&void 0!==e?e:0)}initData(){var e;super.initData(),uo(this._option.dataSet,"spiltSegment",((e,t)=>{const i=e.slice();return i.sort(((e,t)=>e[this._angleField[0]]-t[this._angleField[0]])),i.forEach(((e,t)=>{e[Nw]=e[this._angleField[0]],e[Bw]=t>0?i[t-1][Nw]:void 0})),i})),null===(e=this.getViewData())||void 0===e||e.transform({type:"spiltSegment"},!1)}initMark(){super.initMark(),this._trackMark=this._createMark(lN.mark.track,{parent:this._arcGroupMark,dataView:!1}),this._segmentMark=this._createMark(lN.mark.segment,{parent:this._arcGroupMark,isSeriesMark:!0})}initMarkStyle(){super.initMarkStyle(),this.initTrackMarkStyle(),this.initSegmentMarkStyle()}initSegmentMarkStyle(){var e;const t=this._segmentMark;t&&(this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart.bind(this),endAngle:this._getAngleValueEnd.bind(this),innerRadius:()=>{var e;return this._computeLayoutRadius()*(null!==(e=this._spec.innerRadius)&&void 0!==e?e:0)},outerRadius:()=>{var e,t;return this._computeLayoutRadius()*(null!==(t=null!==(e=this._spec.radius)&&void 0!==e?e:this._spec.outerRadius)&&void 0!==t?t:1)},cap:null!==(e=this._spec.roundCap)&&void 0!==e&&e,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0}),this._trigger.registerMark(t))}initTooltip(){super.initTooltip(),this._segmentMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._segmentMark)}initTrackMarkStyle(){var e;const t=this._trackMark;t&&(this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:()=>{var e;return this._computeLayoutRadius()*(null!==(e=this._spec.innerRadius)&&void 0!==e?e:0)},outerRadius:()=>{var e,t;return this._computeLayoutRadius()*(null!==(t=null!==(e=this._spec.radius)&&void 0!==e?e:this._spec.outerRadius)&&void 0!==t?t:1)},cap:null!==(e=this._spec.roundCap)&&void 0!==e&&e,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,zIndex:100}),this._trigger.registerMark(t))}_getAngleValueStartWithoutMask(e){const t=this._getAngleValueStartWithoutPadAngle(e),i=this._getAngleValueEndWithoutPadAngle(e);return Math.min(t+this._padAngle/2,(t+i)/2)}_getAngleValueEndWithoutMask(e){const t=this._getAngleValueStartWithoutPadAngle(e),i=this._getAngleValueEndWithoutPadAngle(e);return Math.max(i-this._padAngle/2,(t+i)/2)}_getAngleValueStartWithoutPadAngle(e){return x(e[Bw])?this.angleAxisHelper.dataToPosition([e[Bw]]):this._startAngle}_getAngleValueEndWithoutPadAngle(e){return this.angleAxisHelper.dataToPosition([e[Nw]])}initAnimation(){var e,t,i;const n=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset;this._segmentMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("circularProgress"))||void 0===i?void 0:i({startAngle:this._startAngle},n),FR("segment",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}lN.type=Bt.gauge,lN.mark=wi,lN.transformerConstructor=oN;class cN extends eN{_getDefaultSeriesSpec(e){const t=super._getDefaultSeriesSpec(e);return Object.assign(Object.assign({},t),{radiusField:e.radiusField,pin:e.pin,pinBackground:e.pinBackground,pointer:e.pointer})}_getDefaultCircularProgressSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{type:Bt.circularProgress})}transformSpec(e){var t,i,n,r,s;super.transformSpec(e);let a=null===(t=e.series)||void 0===t?void 0:t.find((e=>e.type===Bt.gauge||e.type===Bt.circularProgress));P(a)&&(a=null!==(i=e.gauge)&&void 0!==i?i:this._getDefaultCircularProgressSeriesSpec(e),"circularProgress"===a.type&&(P(a.radiusField)&&P(a.categoryField)&&(a.radiusField=null!==(r=null!==(n=e.radiusField)&&void 0!==n?n:e.categoryField)&&void 0!==r?r:e.seriesField),P(a.valueField)&&P(a.angleField)&&(a.valueField=null!==(s=e.valueField)&&void 0!==s?s:e.angleField)),1===e.series.length?e.series.push(a):e.series.forEach((e=>{e.type===a.type&&Object.keys(a).forEach((t=>{t in e||(e[t]=a[t])}))}))),a.type===Bt.circularProgress?this._transformProgressAxisSpec(e,{orient:"angle",visible:!0,domainLine:{visible:!1},grid:{visible:!1}},{orient:"radius",visible:!1},{zIndex:zw.Region+50}):this._transformGaugeAxisSpec(e)}_transformGaugeAxisSpec(e){var t;e.axes||(e.axes=[]);const i={radius:null,angle:null};(null!==(t=e.axes)&&void 0!==t?t:[]).forEach((e=>{const{orient:t}=e;"radius"===t&&(i.radius=e),"angle"===t&&(i.angle=e)})),i.angle||(i.angle={orient:"angle",visible:!0},e.axes.push(i.angle)),i.radius||(i.radius={orient:"radius",visible:!1},e.axes.push(i.radius)),P(i.angle.type)&&(i.angle.type="linear"),P(i.radius.type)&&(i.radius.type="linear"),P(i.angle.zIndex)&&(i.angle.zIndex=zw.Region+50)}}class hN extends fD{constructor(){super(...arguments),this.transformerConstructor=cN,this.type="gauge",this.seriesType=Bt.gaugePointer}}hN.type="gauge",hN.seriesType=Bt.gaugePointer,hN.view="singleDefault",hN.transformerConstructor=cN;class dN extends oD{transformSpec(e){super.transformSpec(e);const t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))})):e.series=[t]}}class uN extends fD{constructor(){super(...arguments),this.transformerConstructor=dN,this.type="wordCloud",this.seriesType=Bt.wordCloud}}uN.transformerConstructor=dN;const pN=[0],gN=[20,40],fN=[200,500],mN={shrink:!1,enlarge:!1,fontSizeLimitMin:0},vN=["triangleForward","triangle","diamond","square","star","cardioid","circle","pentagon"],yN=(e,t)=>{const i=Q(t)?t:e=>e;let n,r;if(e&&e.length){const t=e.length;for(let s=0;s<t;s+=1){let t=i(e[s]);P(t)||!l(t=+t)||Number.isNaN(t)||(P(n)?(n=t,r=t):(n=Math.min(n,t),r=Math.max(r,t)))}return[n,r]}return[n,r]},bN="".concat(Ge,"_WORD_CLOUD_ANGLE"),_N="".concat(Ge,"_WORD_CLOUD_FILLING_ANGLE"),xN="".concat(Ge,"_WORD_CLOUD_WEIGHT"),SN=("".concat(Ge,"_WORDCLOUD_COLOR"),"".concat(Ge,"_WORDCLOUD_DATA_TOTAL"),"".concat(Ge,"_WORD_CLOUD_TEXT"));"".concat(Ge,"_WORDCLOUD_SHAPE_DATA_TOTAL");class wN extends WR{constructor(){super(...arguments),this._fontSizeRange=[20,20],this._isWordCloudShape=!1}setValueField(e){x(e)&&(this._valueField=e)}setFontSizeRange(e){x(e)?this._fontSizeRange=e:this._fontSizeRange=gN}setAttrFromSpec(){var e,t,i,n,r,s,a,o,l,c;super.setAttrFromSpec(),this._padding=this._option.getChart().padding,this._nameField=this._spec.nameField,this._fontFamilyField=this._spec.fontFamilyField,this._fontWeightField=this._spec.fontWeightField,this._fontStyleField=this._spec.fontStyleField,this._colorHexField=this._spec.colorHexField,this._colorMode=null!==(e=this._spec.colorMode)&&void 0!==e?e:"ordinal",this._colorList=this._spec.colorList,this.setValueField(this._spec.valueField),this._fontWeightRange=null!==(t=this._spec.fontWeightRange)&&void 0!==t?t:fN,this._rotateAngles=null!==(i=this._spec.rotateAngles)&&void 0!==i?i:pN,this.setFontSizeRange(this._spec.fontSizeRange),this._maskShape=null!==(n=this._spec.maskShape)&&void 0!==n?n:"circle",this._keepAspect=this._spec.keepAspect,this._random=null===(r=this._spec.random)||void 0===r||r,this._fontPadding=null!==(a=null===(s=this._spec.word)||void 0===s?void 0:s.padding)&&void 0!==a?a:1,this._textField=(null===(o=this._spec.word)||void 0===o?void 0:o.formatMethod)?SN:this._nameField,this._wordCloudConfig=Object.assign({drawOutOfBound:"hidden",layoutMode:"default",zoomToFit:mN},this._spec.wordCloudConfig),this._wordCloudShapeConfig=Object.assign({fillingSeriesField:this.getSeriesField(),fillingRotateAngles:pN,layoutMode:"default"},this._spec.wordCloudShapeConfig),this._fillingFontPadding=null!==(c=null===(l=this._spec.fillingWord)||void 0===l?void 0:l.padding)&&void 0!==c?c:1,this._isWordCloudShape=!vN.includes(this._maskShape),this._defaultFontFamily=this._option.getTheme().fontFamily}initMark(){this._wordMark=this._createMark(wN.mark.word,{defaultMorphElementKey:this._seriesField,groupKey:this._seriesField,isSeriesMark:!0}),this._isWordCloudShape&&(this._fillingWordMark=this._createMark(wN.mark.fillingWord))}initMarkStyle(){var e,t,i,n,r;const s=this._wordMark,a=this._fillingWordMark,o=null!==(e=this._spec.word)&&void 0!==e?e:{};s&&(this.setMarkStyle(s,{fill:this._colorHexField?e=>e[this._colorHexField]:this.getWordColorAttribute(this._seriesField,!1),text:e=>e[this._textField],x:e=>e.x,y:e=>e.y,fontFamily:e=>e.fontFamily,fontSize:e=>e.fontSize,fontStyle:e=>e.fontStyle,fontWeight:e=>e.fontWeight,angle:e=>e.angle,visible:e=>!e.isFillingWord&&e.visible},"normal",Tw.Series),this.setMarkStyle(s,{fontFamily:null!==(i=null===(t=o.style)||void 0===t?void 0:t.fontFamily)&&void 0!==i?i:this._defaultFontFamily},"normal",Tw.User_Mark)),a&&(this.setMarkStyle(a,{fill:this._wordCloudShapeConfig.fillingColorHexField?e=>e[this._wordCloudShapeConfig.fillingColorHexField]:this.getWordColorAttribute(this._wordCloudShapeConfig.fillingSeriesField,!0),text:e=>e[this._textField],x:e=>e.x,y:e=>e.y,fontFamily:e=>e.fontFamily,fontSize:e=>e.fontSize,fontStyle:e=>e.fontStyle,fontWeight:e=>e.fontWeight,angle:e=>e.angle,visible:e=>e.isFillingWord&&e.visible},"normal",Tw.Series),this.setMarkStyle(a,{fontFamily:null!==(r=null===(n=o.style)||void 0===n?void 0:n.fontFamily)&&void 0!==r?r:this._defaultFontFamily},"normal",Tw.User_Mark)),this._trigger.registerMark(s),this._trigger.registerMark(a)}initTooltip(){super.initTooltip(),this._wordMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._wordMark),this._fillingWordMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._fillingWordMark)}initAnimation(){[this._wordMark,this._fillingWordMark].forEach((e=>{var t,i;if(e){const n=null===(i=null===(t=this._spec)||void 0===t?void 0:t.animationAppear)||void 0===i?void 0:i.preset,r={animationConfig:()=>{var t,i;return null===(i=null===(t=e.getAnimationConfig())||void 0===t?void 0:t.appear)||void 0===i?void 0:i[0]}};e.setAnimationConfig(jR(_n.getAnimationInKey("wordCloud")(r,n),FR("word",this._spec,this._markAttributeContext)))}}))}getWordOrdinalColorScale(e,t){var i,n,r,s,a;const o=t?this._wordCloudShapeConfig.fillingColorList:this._colorList,l=e?null===(i=this.getViewData())||void 0===i?void 0:i.latestData.map((t=>t[e])):[],c=null!==(r=null!=o?o:null===(n=this._option.globalScale.getScale("color"))||void 0===n?void 0:n.range())&&void 0!==r?r:this._getDataScheme();return null===(a=(s=(new uk).domain(l)).range)||void 0===a?void 0:a.call(s,c)}getWordColorAttribute(e,t){var i,n;if("ordinal"===this._colorMode)return{scale:this.getWordOrdinalColorScale(e,t),field:null!==(i=this._seriesField)&&void 0!==i?i:Aw};let r=null!==(n=t?this._colorList:this._wordCloudShapeConfig.fillingColorList)&&void 0!==n?n:this._option.globalScale.getScale("color").range();return 1===r.length&&(r=[r[0],r[0]]),e=>r[0]}compile(){var e,t;super.compile();const{width:i,height:n}=this._region.getLayoutRect();if(!L(i)||!L(n)||!(n>0&&i>0))return;const r=[],s=this._valueField,a=new ak,o=this._fontWeightRange,l=this._rotateAngles,c=this._wordCloudShapeConfig.fillingRotateAngles;if(s){const[t,i]=yN(null===(e=this.getViewData())||void 0===e?void 0:e.latestData.map((e=>+e[s])));a.domain([t,i],!0).range(o),r.push({type:"map",as:xN,callback:e=>t===i?a.scale(i):a.scale(e[s])})}r.push({type:"map",as:bN,callback:()=>l[Math.floor(Math.random()*l.length)]}),r.push({type:"map",as:_N,callback:()=>c[Math.floor(Math.random()*c.length)]});const h=null!==(t=this._spec.word)&&void 0!==t?t:{};h.formatMethod&&r.push({type:"map",as:SN,callback:h.formatMethod}),this._isWordCloudShape?r.push(Object.assign({type:"wordcloudShape"},this._wordCloudShapeTransformOption())):(r.push(Object.assign({type:"wordcloud"},this._wordCloudTransformOption())),this._wordMark.getProduct().transform(r)),this._data.getProduct().transform(r)}_wordCloudTransformOption(){var e,t,i,n,r;const{width:s,height:a}=this._region.getLayoutRect(),o=null!==(t=null===(e=this._spec.word)||void 0===e?void 0:e.style)&&void 0!==t?t:{};return{layoutType:de(this._option.mode)?this._wordCloudConfig.layoutMode:"fast",size:[s,a],shape:this._maskShape,dataIndexKey:kw,text:{field:this._textField},fontSize:this._valueField?{field:this._valueField}:this._fontSizeRange[0],fontSizeRange:"auto"===this._fontSizeRange?null:this._fontSizeRange,padding:this._fontPadding,rotate:{field:bN},fontFamily:null!==(n=null!==(i=this._fontFamilyField)&&void 0!==i?i:o.fontFamily)&&void 0!==n?n:this._defaultFontFamily,fontWeight:this._fontWeightField?{field:this._fontWeightField}:this._valueField?{field:xN}:null,fontStyle:null!==(r=this._fontStyleField)&&void 0!==r?r:o.fontStyle,randomVisible:this._random,clip:"clip"===this._wordCloudConfig.drawOutOfBound,shrink:this._wordCloudConfig.zoomToFit.shrink,enlarge:this._wordCloudConfig.zoomToFit.enlarge,minFontSize:this._wordCloudConfig.zoomToFit.fontSizeLimitMin,progressiveTime:this._wordCloudConfig.progressiveTime,progressiveStep:this._wordCloudConfig.progressiveStep}}_wordCloudShapeTransformOption(){var e,t,i,n,r,s,a,o,l,c;const{width:h,height:d}=this._region.getLayoutRect(),u=null!==(t=null===(e=this._spec.word)||void 0===e?void 0:e.style)&&void 0!==t?t:{},p=null!==(i=this._wordCloudShapeConfig)&&void 0!==i?i:{},g=this._wordCloudShapeConfig.fillingRotateAngles;return{dataIndexKey:kw,size:[h,d],shape:this._maskShape,text:{field:this._textField},fontSize:this._valueField?{field:this._valueField}:this._fontSizeRange[0],fontSizeRange:"auto"===this._fontSizeRange?null:this._fontSizeRange,padding:this._fontPadding,rotateList:this._rotateAngles,fontFamily:null!==(r=null!==(n=this._fontFamilyField)&&void 0!==n?n:u.fontFamily)&&void 0!==r?r:this._defaultFontFamily,fontWeight:this._fontWeightField?{field:this._fontWeightField}:this._valueField?{field:xN}:null,fontStyle:null!==(s=this._fontStyleField)&&void 0!==s?s:u.fontStyle,fillingFontFamily:null!==(o=null!==(a=p.fillingFontFamilyField)&&void 0!==a?a:u.fontFamily)&&void 0!==o?o:this._defaultFontFamily,fillingPadding:this._fillingFontPadding,fillingFontStyle:null!==(l=p.fillingFontStyleField)&&void 0!==l?l:u.fontStyle,fillingFontWeight:null!==(c=p.fillingFontWeightField)&&void 0!==c?c:u.fontWeight,fillingRotateList:g,fillingTimes:p.fillingTimes,fillingXStep:p.fillingXStep,fillingYStep:p.fillingYStep,fillingXRatioStep:p.fillingXRatioStep,fillingYRatioStep:p.fillingYRatioStep,fillingInitialOpacity:p.fillingInitialOpacity,fillingDeltaOpacity:p.fillingDeltaOpacity,fillingInitialFontSize:p.fillingInitialFontSize,fillingDeltaFontSize:p.fillingDeltaFontSize,ratio:p.ratio,fillingRatio:p.fillingRatio,removeWhiteBorder:p.removeWhiteBorder,textLayoutTimes:p.textLayoutTimes,fontSizeShrinkFactor:p.fontSizeShrinkFactor,stepFactor:p.stepFactor,layoutMode:p.layoutMode,importantWordCount:p.importantWordCount,globalShinkLimit:p.globalShinkLimit,fontSizeEnlargeFactor:p.fontSizeEnlargeFactor,fillingDeltaFontSizeFactor:p.fillingDeltaFontSizeFactor}}getStatisticFields(){const e=[];return e.push({key:this._nameField,operations:["values"]}),e.push({key:this._valueField,operations:["max","min"]}),e}dataToPosition(e){return null}dataToPositionX(e){return null}dataToPositionY(e){return null}dataToPositionZ(e){return null}valueToPosition(e,t){return null}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}onLayoutEnd(e){super.onLayoutEnd(e),this.compile()}getActiveMarks(){return[this._wordMark,this._fillingWordMark]}}wN.mark=fi;const CN=e=>({custom:Ty,customParameters:(t,i)=>e,easing:"linear",loop:1/0,duration:6e3});function kN(e,t){return!1===t?{}:"fadeIn"===t?{type:"fadeIn"}:(e=>({channel:{fontSize:{from:0}},duration:200,delay:(t,i,n)=>{const r=e.animationConfig(),s=(null==r?void 0:r.duration)||200,a=(null==r?void 0:r.totalTime)||xM.appear.duration,o=n.VGRAMMAR_ANIMATION_PARAMETERS.elementCount;return n.VGRAMMAR_ANIMATION_PARAMETERS.elementIndex*function(e,t,i){return e*i<t?e+(t-i*e)/(i-1):(t-e)/(i-1)}(s,a,o)}}))(e)}const AN=()=>{_n.registerAnimation("wordCloud",((e,t)=>({appear:kN(e,t),enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}})))},EN=()=>{_n.registerAnimation("wordCloud3d",(e=>({appear:CN(e)})))},TN={triangleForward:function(){return function(e){const t=e%(2*Math.PI/3);return 1/(Math.cos(t)+Math.sqrt(3)*Math.sin(t))}},triangleUpright:ON,triangle:ON,diamond:function(){return function(e){const t=e%(2*Math.PI/4);return 1/(Math.cos(t)+Math.sin(t))}},square:function(){return function(e){return Math.min(1/Math.abs(Math.cos(e)),1/Math.abs(Math.sin(e)))}},star:function(){return function(e){const t=(e+.955)%(2*Math.PI/10);return(e+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-t)+3.07768*Math.sin(2*Math.PI/10-t)):1/(Math.cos(t)+3.07768*Math.sin(t))}},cardioid:function(){return function(e){return 1-Math.sin(e)}},circle:function(){return function(){return 1}},pentagon:function(){return function(e){const t=(e+.955)%(2*Math.PI/5);return 1/(Math.cos(t)+.726543*Math.sin(t))}}};function ON(){return function(e){const t=(e+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(t)+Math.sqrt(3)*Math.sin(t))}}function PN(e,t){const i=t[0],n=t[1];let r=1;const s=[t[0]>>1,t[1]>>1];switch(e){case"cardioid":s[1]=~~(n/2.7*.6),r=Math.floor(Math.min(i/2.3,n/2.6));break;case"triangleForward":r=n/Math.sqrt(.75)>i?Math.floor(i/2):Math.floor(n/(2*Math.sqrt(.75)));break;case"triangle":case"triangleUpright":s[1]=~~(n/1.5),r=Math.floor(Math.min(n/1.5,i/2));break;case"rect":r=Math.floor(Math.max(n/2,i/2));break;default:r=Math.floor(Math.min(i/2,n/2))}return{maxRadius:r,center:s}}const MN=(e,t)=>"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(t-e)+e).toFixed()+"%)";function IN(e){return Q(e)?e:function(){return e}}class RN{constructor(e){var t,i,n;switch(this.options=O({},RN.defaultOptions,e),Q(this.options.shape)?this.shape=this.options.shape:this.shape=(n=this.options.shape,TN[n]?TN[n]():TN.circle()),this.getText=null!==(t=IN(this.options.text))&&void 0!==t?t:e=>e,this.getTextFontWeight=IN(this.options.fontWeight),this.getTextFontSize=IN(this.options.fontSize),this.getTextFontStyle=IN(this.options.fontStyle),this.getTextFontFamily=IN(this.options.fontFamily),this.outputCallback=null!==(i=this.options.outputCallback)&&void 0!==i?i:e=>e,this.options.color){case"random-dark":this.getTextColor=()=>MN(10,50);break;case"random-light":this.getTextColor=()=>MN(50,90);break;default:this.getTextColor=IN(this.options.color)}if(P(this.options.rotate))if(this.options.useRandomRotate){const e=Math.abs(this.options.maxRotation-this.options.minRotation),t=Math.abs(Math.floor(this.options.rotationSteps)),i=Math.min(this.options.maxRotation,this.options.minRotation);this.getTextRotate=()=>0===this.options.rotateRatio||Math.random()>this.options.rotateRatio?0:0===e?i:t>0?i+Math.floor(Math.random()*t)*e/(t-1):i+Math.random()*e}else this.getTextRotate=()=>0;else this.getTextRotate=Q(this.options.rotate)?e=>{var t;return el(null!==(t=this.options.rotate(e))&&void 0!==t?t:0)}:()=>{var e;return el(null!==(e=this.options.rotate)&&void 0!==e?e:0)}}exceedTime(){var e;return this.options.progressiveStep>0?this.progressiveIndex>=((null!==(e=this.currentStepIndex)&&void 0!==e?e:0)+1)*this.options.progressiveStep:this.options.progressiveTime>0&&(new Date).getTime()-this.escapeTime>this.options.progressiveTime}progressiveRun(){var e;if(this.options.progressiveStep>0?this.currentStepIndex=(null!==(e=this.currentStepIndex)&&void 0!==e?e:0)+1:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.data&&this.progressiveIndex&&this.progressiveIndex<this.data.length){this.progressiveResult=[];const e=this.data.length;let t=this.progressiveIndex;for(;t<e&&(this.layoutWord(t),t++,this.progressiveIndex=t,!this.exceedTime()););return this.progressiveResult}return this.result}initProgressive(){this.progressiveIndex=-1,this.options.progressiveStep>0?this.currentStepIndex=0:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.progressiveResult=[]}output(){return this.result?this.outputCallback(this.result):null}progressiveOutput(){return this.progressiveResult?this.outputCallback(this.progressiveResult):null}unfinished(){return this.data&&this.data.length&&!P(this.progressiveIndex)&&this.progressiveIndex<this.data.length}release(){this.data=null,this.result=null,this.progressiveIndex=null,this.progressiveResult=null}}RN.defaultOptions={fontFamily:'"Trebuchet MS", "Heiti TC", "\u5fae\u8edf\u6b63\u9ed1\u9ad4", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",fontStyle:"normal",minFontSize:12,drawOutOfBound:!1,shrink:!1,minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,rotateRatio:.1,random:!1,shape:"circle",progressiveTime:0,progressiveStep:0,backgroundColor:"#fff"};const DN={archimedean:function(e){const t=e[0]/e[1];return e=>[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]},rectangular:function(e){const t=4*e[0]/e[1];let i=0,n=0;return e=>{const r=e<0?-1:1;switch(Math.sqrt(1+4*r*e)-r&3){case 0:i+=t;break;case 1:n+=4;break;case 2:i-=t;break;default:n-=4}return[i,n]}}};class LN extends RN{constructor(e){var t;super(O({},LN.defaultOptions,e)),this.cw=64,this.ch=2048,this._size=[256,256],this._isBoardExpandCompleted=!1,this._placeStatus=0,this._tTemp=null,this._dtTemp=null,this._dy=0,this.cacheMap=new Map,this.options.minFontSize<=LN.defaultOptions.minFontSize&&(this.options.minFontSize=LN.defaultOptions.minFontSize),this.spiral=_(this.options.spiral)?null!==(t=DN[this.options.spiral])&&void 0!==t?t:DN.archimedean:this.options.spiral,this.random=this.options.random?Math.random:()=>1,this.getTextPadding=IN(this.options.padding)}zoomRatio(){return this._originSize[0]/this._size[0]}dy(){return this._dy}layoutWord(e){const t=this.data[e];if(""===(""+t.text).trim())return!0;const{maxRadius:i,center:n}=PN(this.options.shape,this._size);if(t.x=n[0],t.y=n[1],function(e,t,i,n,r,s){if(t.sprite)return;const a=e.context,o=e.ratio;a.setTransform(o,0,0,o,0,0),a.clearRect(0,0,(r<<5)/o,s/o);let l=0,c=0,h=0;const d=i.length;let u,p,g,f,m;for(--n;++n<d;){if(t=i[n],a.save(),a.font=t.fontStyle+" "+t.fontWeight+" "+~~((t.fontSize+1)/o)+"px "+t.fontFamily,u=a.measureText(t.text+"m").width*o,g=t.fontSize<<1,t.angle){const e=Math.sin(t.angle),i=Math.cos(t.angle),n=u*i,r=u*e,s=g*i,a=g*e;u=Math.max(Math.abs(n+a),Math.abs(n-a))+31>>5<<5,g=~~Math.max(Math.abs(r+s),Math.abs(r-s))}else u=u+31>>5<<5;if(g>h&&(h=g),l+u>=r<<5&&(l=0,c+=h,h=0),c+g>=s)break;a.translate((l+(u>>1))/o,(c+(g>>1))/o),t.angle&&a.rotate(t.angle),a.fillText(t.text,0,0),t.padding&&(a.lineWidth=2*t.padding,a.strokeText(t.text,0,0)),a.restore(),t.width=u,t.height=g,t.xoff=l,t.yoff=c,t.x1=u>>1,t.y1=g>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=u}const v=a.getImageData(0,0,(r<<5)/o,s/o).data,y=[];for(;--n>=0;){if(!(t=i[n]).hasText)continue;for(u=t.width,p=u>>5,g=t.y1-t.y0,f=0;f<g*p;f++)y[f]=0;if(l=t.xoff,null==l)return;c=t.yoff;let e=0,s=-1;for(m=0;m<g;m++){for(f=0;f<u;f++){const t=p*m+(f>>5),i=v[(c+m)*(r<<5)+(l+f)<<2]?1<<31-f%32:0;y[t]|=i,e|=i}e?s=m:(t.y0++,g--,m--,c++)}t.y1=t.y0+s,t.sprite=y.slice(0,(t.y1-t.y0)*p)}}(this.contextAndRatio,t,this.data,e,this.cw,this.ch),this._placeStatus=0,t.hasText&&this.place(this._board,t,this._bounds,i))return this.result.push(t),this._bounds?function(e,t){const i=e[0],n=e[1];t.x+t.x0<i.x&&(i.x=t.x+t.x0),t.y+t.y0<i.y&&(i.y=t.y+t.y0),t.x+t.x1>n.x&&(n.x=t.x+t.x1),t.y+t.y1>n.y&&(n.y=t.y+t.y1)}(this._bounds,t):this._bounds=[{x:t.x+t.x0,y:t.y+t.y0},{x:t.x+t.x1,y:t.y+t.y1}],t.x-=this._size[0]>>1,t.y-=this._size[1]>>1,this._tTemp=null,this._dtTemp=null,!0;if(this.updateBoardExpandStatus(t.fontSize),t.hasText&&this.shouldShrinkContinue()){if(1===this._placeStatus){const e=t.fontSize*this._originSize[0]/this.options.minFontSize,i=Math.max(t.width,t.height);if(i<=e)this.expandBoard(this._board,this._bounds,i/this._size[0]);else{if(!this.options.clip)return!0;this.expandBoard(this._board,this._bounds,e/this._size[0])}}else this._placeStatus,this.expandBoard(this._board,this._bounds);return this.updateBoardExpandStatus(t.fontSize),!1}return this._tTemp=null,this._dtTemp=null,!0}layout(e,t){this.initProgressive(),this.result=[],this._size=[t.width,t.height],this.clearCache(),this._originSize=[...this._size];const i=this.getContext(Bf.createCanvas({width:1,height:1}));this.contextAndRatio=i,this._board=new Array((this._size[0]>>5)*this._size[1]).fill(0),this._bounds=null;const n=e.length;let r=0;this.result=[];const s=e.map((e=>({text:this.getText(e),fontFamily:this.getTextFontFamily(e),fontStyle:this.getTextFontStyle(e),fontWeight:this.getTextFontWeight(e),angle:this.getTextRotate(e),fontSize:~~this.getTextFontSize(e),padding:this.getTextPadding(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e,x:0,y:0,width:0,height:0}))).sort((function(e,t){return t.fontSize-e.fontSize}));this.data=s;let a=0;for(;r<n&&(this.layoutWord(r)||a>=2?(r++,a=0):a++,this.progressiveIndex=r,!this.exceedTime()););if(!this.options.clip&&this.options.enlarge&&this._bounds&&this.shrinkBoard(this._bounds),this._bounds&&["cardioid","triangle","triangle-upright"].includes(this.options.shape)){const e=(this._bounds[0].y+this._bounds[1].y)/2;this._dy=-(e-this._size[1]/2)}return this.result}formatTagItem(e){const t=this._size,i=this.zoomRatio(),n=this.dy(),r=t[0]>>1,s=t[1]>>1,a=e.length,o=[];let l,c;for(let h=0;h<a;++h)l=e[h],c={},c.datum=l.datum,c.x=(l.x+r)*i,c.y=(l.y+s+n)*i,c.fontFamily=l.fontFamily,c.fontSize=l.fontSize*i,c.fontStyle=l.fontStyle,c.fontWeight=l.fontWeight,c.angle=l.angle,o.push(c);return o}output(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.result)):this.formatTagItem(this.result)}progressiveOutput(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.progressiveResult)):this.formatTagItem(this.progressiveResult)}updateBoardExpandStatus(e){this._isBoardExpandCompleted=e*(this._originSize[0]/this._size[0])<this.options.minFontSize}shouldShrinkContinue(){return!this.options.clip&&this.options.shrink&&!this._isBoardExpandCompleted}shrinkBoard(e){const t=e[0],i=e[1];if(i.x>=this._size[0]||i.y>=this._size[1])return;const n=Math.min(t.x,this._size[0]-i.x),r=Math.min(t.y,this._size[1]-i.y),s=2*Math.min(n/this._size[0],r/this._size[1]);this._size=this._size.map((e=>e*(1-s)))}expandBoard(e,t,i){const n=this._size[0]*(i||1.1)-this._size[0]>>5;let r=2*n>2?n:2;r%2!=0&&r++;let s=Math.ceil(this._size[1]*(r<<5)/this._size[0]);s%2!=0&&s++;const a=this._size[0],o=this._size[1],l=new Array(r).fill(0),c=new Array(s/2*(r+(a>>5))).fill(0);this.insertZerosToArray(e,o*(a>>5),c.length+r/2);for(let h=o-1;h>0;h--)this.insertZerosToArray(e,h*(a>>5),l.length);this.insertZerosToArray(e,0,c.length+r/2),this._size=[a+(r<<5),o+s],t&&(t[0].x+=(r<<5)/2,t[0].y+=s/2,t[1].x+=(r<<5)/2,t[1].y+=s/2)}insertZerosToArray(e,t,i){const n=Math.floor(i/6e4),r=i%6e4;for(let s=0;s<n;s++)e.splice(t+6e4*s,0,...new Array(6e4).fill(0));e.splice(t+6e4*n,0,...new Array(r).fill(0))}getContext(e){e.width=1,e.height=1;const t=e.getContext("2d").getImageData(0,0,1,1),i=Math.sqrt(t.data.length>>2);e.width=(this.cw<<5)/i,e.height=this.ch/i;const n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:i,canvas:e}}place(e,t,i,n){let r=!1;if(this.shouldShrinkContinue()&&(t.width>this._size[0]||t.height>this._size[1]))return this._placeStatus=1,!1;const s=this.random()<.5?1:-1;if(!this.shouldShrinkContinue()&&this.isSizeLargerThanMax(t,s))return null;const a=t.x,o=t.y,l=Math.sqrt(this._size[0]*this._size[0]+this._size[1]*this._size[1]),c=this.spiral(this._size);let h,d,u,p,g=-s;for(this._tTemp=null,this._dtTemp=null;h=c(g+=s);){d=h[0],u=h[1];const c=Math.sqrt(d**2+u**2);let f=Math.atan(u/d);d<0?f+=Math.PI:u<0&&(f=2*Math.PI+f);const m=this.shape(f);if(Math.min(Math.abs(d),Math.abs(u))>=l)break;if(c>=n)r&&null===this._tTemp&&(this._tTemp=g,this._dtTemp=s);else{if(t.x=a+~~(c*m*Math.cos(-f)),t.y=o+~~(c*m*Math.sin(-f)),p=t,this.options.clip)if(this.shouldShrinkContinue()){if(NN(p,this._size)){r&&null===this._tTemp&&(this._tTemp=g,this._dtTemp=s);continue}}else{if(BN(p,this._size)){r&&null===this._tTemp&&(this._tTemp=g,this._dtTemp=s);continue}NN(p,this._size)&&(p=zN(p,this._size))}else if(NN(p,this._size)){r&&null===this._tTemp&&(this._tTemp=g,this._dtTemp=s);continue}if(r=!0,(!i||FN(p,i))&&(!i||!jN(p,e,this._size))){const i=p.sprite,n=p.width>>5,r=this._size[0]>>5,s=p.x-(n<<4),a=127&s,o=32-a,l=p.y1-p.y0;let c,h=(p.y+p.y0)*r+(s>>5);for(let t=0;t<l;t++){c=0;for(let r=0;r<=n;r++)e[h+r]|=c<<o|(r<n?(c=i[t*n+r])>>>a:0);h+=r}return t.sprite=null,p.sprite=null,!0}}}return null!==this._tTemp&&(this._placeStatus=3),!this.shouldShrinkContinue()&&this.setCache(p,s),!1}clearCache(){this.cacheMap.clear()}setCache(e,t){const i="".concat(e.angle,"-").concat(t),n=e.x1-e.x0,r=e.y1-e.y0;if(!this.cacheMap.has(i))return void this.cacheMap.set(i,{width:n,height:r});const{width:s,height:a}=this.cacheMap.get(i);(n<s&&r<a||n<=s&&r<a)&&this.cacheMap.set(i,{width:n,height:r})}isSizeLargerThanMax(e,t){const i="".concat(e.angle,"-").concat(t);if(!this.cacheMap.has(i))return!1;const{width:n,height:r}=this.cacheMap.get(i),s=e.x1-e.x0,a=e.y1-e.y0;return s>=n&&a>=r}}function jN(e,t,i){const n=i[0]>>5,r=e.sprite,s=e.width>>5,a=e.x-(s<<4),o=127&a,l=32-o,c=e.y1-e.y0;let h,d=(e.y+e.y0)*n+(a>>5);for(let u=0;u<c;u++){h=0;for(let e=0;e<=s;e++)if((h<<l|(e<s?(h=r[u*s+e])>>>o:0))&t[d+e])return!0;d+=n}return!1}function FN(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}LN.defaultOptions={enlarge:!1,minFontSize:2};const BN=(e,t)=>e.x+e.x0>t[0]||e.y+e.y0>t[0]||e.x+e.x1<0||e.y+e.y1<0,NN=(e,t)=>e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>t[0]||e.y+e.y1>t[1];function zN(e,t){const i=e.sprite,n=e.y1-e.y0,r=e.width>>5;let s=0;const a=[],o=Math.max(-(e.y0+e.y),0),l=Math.min(n+(t[1]-(e.y1+e.y)),n),c=Math.max(-(e.x0+e.x),0)>>5,h=Math.min(r+(t[0]-(e.x1+e.x)>>5)+1,r);for(let f=0;f<n;f++){for(let e=0;e<r;e++)f<o||l<=f||e<c||h<=e||a.push(i[s+e]);s+=r}const d=c<<5,u=r-h<<5,p=o,g=n-l;return Object.assign(Object.assign({},e),{width:e.width-d-u,height:e.height-p-g,x0:e.x0+d,x1:e.x1-u,y0:e.y0+p,y1:e.y1-g,x:e.x+d/2-u/2,sprite:a})}class HN extends RN{constructor(e){super(O({},HN.defaultOptions,e)),this.fillGridAt=(e,t)=>{e>=this.ngx||t>=this.ngy||e<0||t<0||(this.grid[e][t]=!1)},this.updateGrid=(e,t,i,n,r)=>{const s=r.occupied;let a=s.length;for(;a--;){const i=e+s[a][0],n=t+s[a][1];i>=this.ngx||n>=this.ngy||i<0||n<0||this.fillGridAt(i,n)}},this.gridSize=Math.max(Math.floor(this.options.gridSize),4)}getPointsAtRadius(e){if(this.pointsAtRadius[e])return this.pointsAtRadius[e];const t=8*e;let i=t;const n=[];for(0===e&&n.push([this.center[0],this.center[1],0]);i--;){const r=this.shape(i/t*2*Math.PI);n.push([this.center[0]+e*r*Math.cos(-i/t*2*Math.PI),this.center[1]+e*r*Math.sin(-i/t*2*Math.PI)*this.options.ellipticity,i/t*2*Math.PI])}return this.pointsAtRadius[e]=n,n}getTextInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var i;const n=this.options.clip?1:t,r=Math.max(Math.floor(this.getTextFontSize(e)*n),this.options.minFontSize);let s=this.getText(e)+"";if(this.options.clip&&(s=s.slice(0,Math.ceil(s.length*t))),!s)return null;const a=this.getTextFontWeight(e),o=this.getTextFontStyle(e),l=this.getTextRotate&&null!==(i=this.getTextRotate(e))&&void 0!==i?i:0,c=this.getTextFontFamily(e),h=document.createElement("canvas"),d=h.getContext("2d",{willReadFrequently:!0});d.font=o+" "+a+" "+r.toString(10)+"px "+c;const u=d.measureText(s).width,p=Math.max(r,d.measureText("m").width,d.measureText("\uff37").width);let g=u+2*p,f=3*p;const m=Math.ceil(g/this.gridSize),v=Math.ceil(f/this.gridSize);g=m*this.gridSize,f=v*this.gridSize;const y=-u/2,b=.4*-p,_=Math.ceil((g*Math.abs(Math.sin(l))+f*Math.abs(Math.cos(l)))/this.gridSize),x=Math.ceil((g*Math.abs(Math.cos(l))+f*Math.abs(Math.sin(l)))/this.gridSize),S=x*this.gridSize,w=_*this.gridSize;h.setAttribute("width",""+S),h.setAttribute("height",""+w),d.scale(1,1),d.translate(S/2,w/2),d.rotate(-l),d.font=o+" "+a+" "+r.toString(10)+"px "+c,d.fillStyle="#000",d.textBaseline="middle",d.fillText(s,y,b);const C=d.getImageData(0,0,S,w).data;if(this.exceedTime())return null;const k=[];let A,E=x;const T=[_/2,x/2,_/2,x/2],O=(e,t,i)=>{let n=this.gridSize;for(;n--;){let r=this.gridSize;for(;r--;)if(C[4*((t*this.gridSize+n)*S+(e*this.gridSize+r))+3])return i.push([e,t]),e<T[3]&&(T[3]=e),e>T[1]&&(T[1]=e),t<T[0]&&(T[0]=t),void(t>T[2]&&(T[2]=t))}};for(;E--;)for(A=_;A--;)O(E,A,k);return{datum:e,occupied:k,bounds:T,gw:x,gh:_,fillTextOffsetX:y,fillTextOffsetY:b,fillTextWidth:u,fillTextHeight:p,fontSize:r,fontStyle:o,fontWeight:a,fontFamily:c,angle:l,text:s}}canFitText(e,t,i,n,r){let s=r.length;for(;s--;){const i=e+r[s][0],n=t+r[s][1];if(i>=this.ngx||n>=this.ngy||i<0||n<0){if(!this.options.drawOutOfBound)return!1}else if(!this.grid[i][n])return!1}return!0}layoutWord(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=this.data[e],n=this.getTextInfo(i,t);if(!n)return!1;if(this.exceedTime())return!1;if(!this.options.drawOutOfBound&&(!this.options.shrink||n.fontSize<=this.options.minFontSize)&&!this.options.clip){const e=n.bounds;if(e[1]-e[3]+1>this.ngx||e[2]-e[0]+1>this.ngy)return!1}let r=this.maxRadius+1;const s=e=>{const t=Math.floor(e[0]-n.gw/2),i=Math.floor(e[1]-n.gh/2),s=n.gw,a=n.gh;return!!this.canFitText(t,i,s,a,n.occupied)&&(n.distance=this.maxRadius-r,n.theta=e[2],this.outputText(t,i,n),this.updateGrid(t,i,s,a,n),!0)};for(;r--;){let e=this.getPointsAtRadius(this.maxRadius-r);if(this.options.random&&(e=[].concat(e),G(e)),e.some(s))return!0}return(this.options.clip||!!(this.options.shrink&&n.fontSize>this.options.minFontSize))&&this.layoutWord(e,.75*t)}outputText(e,t,i){const n=this.getTextColor(i),r={text:i.text,datum:i.datum,color:n,fontStyle:i.fontStyle,fontWeight:i.fontWeight,fontFamily:i.fontFamily,angle:i.angle,width:i.fillTextWidth,height:i.fillTextHeight,x:(e+i.gw/2)*this.gridSize,y:(t+i.gh/2)*this.gridSize+i.fillTextOffsetY+.5*i.fontSize,fontSize:i.fontSize};this.result.push(r),this.progressiveResult&&this.progressiveResult.push(r)}initGrid(e){let t;if(this.grid=[],e){let i=document.createElement("canvas").getContext("2d");i.fillStyle=this.options.backgroundColor,i.fillRect(0,0,1,1);let n=i.getImageData(0,0,1,1).data,r=e.getContext("2d").getImageData(0,0,this.ngx*this.gridSize,this.ngy*this.gridSize).data;const s=(e,i)=>{let s=this.gridSize;for(;s--;){let a=this.gridSize;for(;a--;)for(t=4;t--;)if(r[4*((i*this.gridSize+s)*this.ngx*this.gridSize+(e*this.gridSize+a))+t]!==n[t])return void(this.grid[e][i]=!1)}};let a=this.ngx;for(;a--;){this.grid[a]=[];let e=this.ngy;for(;e--;)s(a,e),!1!==this.grid[a][e]&&(this.grid[a][e]=!0)}r=i=n=void 0}else{let e=this.ngx;for(;e--;){this.grid[e]=[];let t=this.ngy;for(;t--;)this.grid[e][t]=!0}}}layout(e,t){this.initProgressive(),this.data=e,this.pointsAtRadius=[],this.ngx=Math.floor(t.width/this.gridSize),this.ngy=Math.floor(t.height/this.gridSize);const{center:i,maxRadius:n}=PN(this.options.shape,[t.width,t.height]);this.center=t.origin?[t.origin[0]/this.gridSize,t.origin[1]/this.gridSize]:[i[0]/this.gridSize,i[1]/this.gridSize],this.maxRadius=Math.floor(n/this.gridSize),this.initGrid(t.canvas),this.result=[];let r=0;for(;r<e.length&&(this.layoutWord(r),r++,this.progressiveIndex=r,!this.exceedTime()););return this.result}}HN.defaultOptions={gridSize:8,ellipticity:1};class VN extends RN{constructor(e){super(O({},VN.defaultOptions,e)),this.random=this.options.random?Math.random:()=>0,this.aspectRatio=1}fit(e){for(let t=0,i=this.result.length;t<i;t++)if(UN(e,this.result[t]))return!1;return!0}getTextInfo(e){const t={datum:e,fontSize:this.getTextFontSize(e),fontWeight:this.getTextFontWeight(e),fontStyle:this.getTextFontStyle(e),fontFamily:this.getTextFontFamily(e),angle:this.getTextRotate(e),text:this.getText(e)+"",x:this.center[0],y:this.center[1]},i=XM(t);return t.width=i.width(),t.height=i.height(),t.top=this.center[1]-t.height+.21*t.height,t.left=this.center[0]-t.width/2,t}layoutWord(e){const t=this.getTextInfo(this.data[e]);let i=2*Math.PI,n=0,r=t.left,s=t.top;const a=t.width,o=t.height;let l=1,c=this.fit(t);for(;!c&&n<this.maxRadius;)n+=.5,l=this.shape(n/this.maxRadius*2*Math.PI),i+=.5*(this.options.random?this.random()>.5?1:-1:e%2==0?1:-1),r=this.center[0]-a/2+n*l*Math.cos(i)*this.aspectRatio,s=this.center[1]-o/2+n*l*Math.sin(i),t.left=r,t.top=s,t.x=r+a/2,t.y=s+o/2,c=this.fit(t);return!!c&&!!(this.options.clip||t.left>=0&&t.left+t.width<=this.width&&t.top>=0&&t.top+t.height<=this.height)&&(this.result.push(t),!0)}layout(e,t){if(!(null==e?void 0:e.length))return[];this.initProgressive(),this.result=[],this.maxRadius=Math.sqrt(t.width*t.width+t.height*t.height)/2,this.center=[t.width/2,t.height/2],this.width=t.width,this.height=t.height,this.data=e.sort(((e,t)=>this.getTextFontSize(t)-this.getTextFontSize(e)));let i=0;for(;i<e.length&&(this.layoutWord(i),i++,this.progressiveIndex=i,!this.exceedTime()););return this.result}}function UN(e,t){return!(e.left+e.width<t.left||e.top+e.height<t.top||e.left>t.left+t.width||e.top>t.top+t.height)}VN.defaultOptions={enlarge:!1};const WN={x:"x",y:"y",z:"z",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",angle:"angle"},GN=(e,t)=>{var i,n,r,s,a,o;if(e.size&&(e.size[0]<=0||e.size[1]<=0))return u.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];const c=t,h=(null!==(i=e.size)&&void 0!==i?i:[500,500]).slice();h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]);const d=e.fontFamily?KN(e.fontFamily):"sans-serif",p=e.fontStyle?KN(e.fontStyle):"normal",g=e.fontWeight?KN(e.fontWeight):"normal",f=e.rotate?KN(e.rotate):0,m=KN(e.text),v=null!==(n=e.spiral)&&void 0!==n?n:"archimedean",y=e.padding?KN(e.padding):1,b=null!==(r=e.shape)&&void 0!==r?r:"square",_=null!==(s=e.shrink)&&void 0!==s&&s,x=null!==(a=e.enlarge)&&void 0!==a&&a,S=null!==(o=e.clip)&&void 0!==o&&o,w=e.minFontSize,C=e.randomVisible,k=e.as||WN,A=e.depth_3d,E=e.postProjection;let T=e.fontSize?KN(e.fontSize):14;const O=e.fontSizeRange;if(O&&!l(T)){const e=T,t=XN(qN(e,c),O);T=i=>t(e(i))}let P=LN;"fast"===e.layoutType?P=VN:"grid"===e.layoutType&&(P=HN);const M=new P({text:m,padding:y,spiral:v,shape:b,rotate:f,fontFamily:d,fontStyle:p,fontWeight:g,fontSize:T,shrink:_,clip:S,enlarge:x,minFontSize:w,random:C,progressiveStep:e.progressiveStep,progressiveTime:e.progressiveTime,outputCallback:e=>{const t=[];let i,n;for(let r=0,s=e.length;r<s;r++)n=e[r],i=n.datum,i[k.x]=n.x,i[k.y]=n.y,i[k.fontFamily]=n.fontFamily,i[k.fontSize]=n.fontSize,i[k.fontStyle]=n.fontStyle,i[k.fontWeight]=n.fontWeight,i[k.angle]=n.angle,"StereographicProjection"===E&&ZN(h,n,i,k,A),t.push(i);return t}});return M.layout(c,{width:h[0],height:h[1]}),e.progressiveStep>0||e.progressiveTime>0?{progressive:M}:M.output()},KN=e=>_(e)||l(e)||Q(e)?e:t=>t[e.field],YN=e=>e<0?-Math.sqrt(-e):Math.sqrt(e),XN=(e,t)=>{if(e[0]===e[1])return e=>t[0];const i=YN(e[0]),n=YN(e[1]),r=Math.min(i,n),s=Math.max(i,n);return e=>(YN(e)-r)/(s-r)*(t[1]-t[0])+t[0]},qN=(e,t)=>{let i=1/0,n=-1/0;const r=t.length;let s;for(let a=0;a<r;++a)s=Dn(e(t[a])),s<i&&(i=s),s>n&&(n=s);return 1===t.length&&i===n&&(i-=1e4),[i,n]};function ZN(e,t,i,n,r){const s=Math.max(e[0],e[1])/2,a=function(e,t,i,n,r){const{x:s,y:a}=r,o=s/e*Math.PI*2;let l=Math.PI-a/t*Math.PI;return l+=(l<Math.PI/2?1:-1)*Math.pow(Math.min(l-Math.PI/2,1),2)/5,{x:i*Math.sin(l)*Math.cos(o)+n.x,y:i*Math.cos(l)+n.y,z:i*Math.sin(l)*Math.sin(o)+n.z}}(e[0],e[1],s,{x:s,y:s,z:null!=r?r:s},t);i[n.x]=a.x,i[n.y]=a.y,i[n.z]=a.z}const QN=()=>{nm.registerTransform("wordcloud",{transform:GN,markPhase:"beforeJoin"},!0)};var $N;!function(e){e.BEFORE_WORDCLOUD_SHAPE_LAYOUT="beforeWordcloudShapeLayout",e.AFTER_WORDCLOUD_SHAPE_LAYOUT="afterWordcloudShapeLayout"}($N||($N={}));const JN=e=>/^[\u4e00-\u9fa5]+$/.test(e),ez=(e,t)=>{if(P(e))return 0;let i=0;for(const n of e)JN(n)?i+=1:i+=.53;return i};var tz=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};function iz(e){return tz(this,void 0,void 0,(function*(){const t=yield(i=e.shapeUrl,i&&(Nh(i)||zh(i)||i.startsWith("<svg"))?new Promise(((e,t)=>{var n;const r=rE({image:i}),s=null===(n=r.resources)||void 0===n?void 0:n.get(i);s&&"success"===s.state&&s.data?e(s.data):(r.successCallback=()=>{var n;if(r){const s=null===(n=r.resources)||void 0===n?void 0:n.get(i);s&&"success"===s.state&&s.data?e(s.data):t(new Error("image load failed"+i))}else t(new Error("image load failed"+i))},r.failCallback=()=>{u.getInstance().error("image \u52a0\u8f7d\u5931\u8d25\uff01",i)})})):null);var i;return e.removeWhiteBorder&&t?function(e,t,i){t.width=e.width,t.height=e.height,i.clearRect(0,0,t.width,t.height),i.drawImage(e,0,0);const n=t.width,r=i.getImageData(0,0,t.width,t.height);let s=0,a=r.height,o=0,l=r.width;for(;s<a&&sz(r,n,s);)++s;for(;a-1>s&&sz(r,n,a-1);)--a;for(;o<l&&az(r,n,o,s,a);)++o;for(;l-1>o&&az(r,n,l-1,s,a);)--l;const c=i.getImageData(o,s,l-o,a-s);return t.width=c.width,t.height=c.height,i.clearRect(0,0,t.width,t.height),i.putImageData(c,0,0),t}(t,e.tempCanvas,e.tempCtx):t}))}function nz(e,t){const{size:i,tempCanvas:n,tempCtx:r}=t,s=function(e,t){const i=e.width,n=e.height;let r=t[0]/i;n*r>t[1]&&(r=t[1]/n);const s=Math.floor(r*i),a=Math.floor(r*n);return{x:(t[0]-s)/2,y:(t[1]-a)/2,width:s,height:a,scale:r}}(e,i);n.width=i[0],n.height=i[1],r.clearRect(0,0,n.width,n.height),r.drawImage(e,s.x,s.y,s.width,s.height);const a=r.getImageData(0,0,i[0],i[1]),o=new Array(i[0]*i[1]).fill(0);let l=1;const c=[[0,1],[1,0],[-1,0],[0,-1]];let h=[];for(let E=0;E<i[1];E++)for(let e=0;e<i[0];e++)if(0===o[E*i[0]+e]&&!rz(a,E,e)){o[E*i[0]+e]=l,h.push([E,e]);for(let e=0;e<h.length;e++)for(let t=0;t<4;t++){let n=h[e][0]+c[t][0],r=h[e][1]+c[t][1];n=n<0?0:n>=i[1]?i[1]-1:n,r=r<0?0:r>=i[0]?i[0]-1:r,0!==o[n*i[0]+r]||rz(a,n,r)||(o[n*i[0]+r]=l,h.push([n,r]))}l++,h=[]}const d={},u={},p={},g={},f={},m={},v={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0,width:0,height:0};for(let E=0;E<i[1];E++)for(let e=0;e<i[0];e++){const t=o[E*i[0]+e];0!==t&&(A(E,e)&&(d[t]=d[t]||[],d[t].push([e,E]),g[t]||(g[t]=[1/0,-1/0,1/0,-1/0]),E<g[t][0]&&(g[t][0]=E),E>g[t][1]&&(g[t][1]=E),e<g[t][2]&&(g[t][2]=e),e>g[t][3]&&(g[t][3]=e),e<v.x1&&(v.x1=e),e>v.x2&&(v.x2=e),E<v.y1&&(v.y1=E),E>v.y2&&(v.y2=E)),u[t]=u[t]||0,u[t]++)}const y=[];for(const E in d){const e=d[E],t=~~(e.reduce(((e,t)=>e+t[0]),0)/e.length),i=~~(e.reduce(((e,t)=>e+t[1]),0)/e.length);p[E]=[t,i],y.push(...e);const[n,r,s,a]=g[E];f[E]=~~Math.max(Math.sqrt((t-s)**2+(i-n)**2),Math.sqrt((t-a)**2+(i-r)**2),Math.sqrt((t-s)**2+(i-r)**2),Math.sqrt((t-a)**2+(i-n)**2)),m[E]=(a-s)/(r-n)}const b=Object.keys(p).map((e=>({label:e-1,boundary:d[e],area:u[e],center:p[e],maxPoint:g[e],maxR:f[e],ratio:m[e]})));v.width=v.x2-v.x1+1,v.height=v.y2-v.y1+1;const _=~~(y.reduce(((e,t)=>e+t[0]),0)/y.length),x=~~(y.reduce(((e,t)=>e+t[1]),0)/y.length),S=~~Math.max(Math.sqrt((_-v.x1)**2+(x-v.y1)**2),Math.sqrt((_-v.x2)**2+(x-v.y2)**2),Math.sqrt((_-v.x1)**2+(x-v.y2)**2),Math.sqrt((_-v.x2)**2+(x-v.y1)**2)),w=v.width/v.height,C=Object.keys(u).reduce(((e,t)=>e+u[t]),0),k={regions:b,labels:o,labelNumber:l-1};return Object.assign(t,{segmentation:k,shapeConfig:s,shapeBounds:v,shapeMaxR:S,shapeRatio:w,shapeCenter:[_,x],shapeArea:C});function A(e,t){const n=[[0,1],[1,0],[-1,0],[0,-1]];if(0===e||0===t||e===i[1]-1||t===i[0]-1)return!0;for(let r=0;r<4;r++){let s=e+n[r][0],a=t+n[r][1];if(s=s<0?0:s>=i[1]?i[1]-1:s,a=a<0?0:a>=i[0]?i[0]-1:a,0===o[s*i[0]+a])return!0}return!1}}function rz(e,t,i){const n=e.width;return 0===e.data[t*n*4+4*i+3]||255===e.data[t*n*4+4*i+0]&&255===e.data[t*n*4+4*i+1]&&255===e.data[t*n*4+4*i+2]}function sz(e,t,i){for(let n=0;n<t;++n)if(!rz(e,i,n))return!1;return!0}function az(e,t,i,n,r){for(let s=n;s<r;++s)if(!rz(e,s,i))return!1;return!0}class oz extends ak{constructor(){super(fC,mC),this.type=Sn.Sqrt}clone(){return(new oz).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}}function lz(e,t,i){const{stepFactor:n,importantWordCount:r,globalShinkLimit:s}=t,{size:a,segmentation:{regions:o},tempCtx:l,tempCanvas:c,boardSize:h,shapeCenter:d,shapeMaxR:u,shapeRatio:p}=i,g=pz(i);let f=g.slice(0);const m=t.fontSizeShrinkFactor;let v=null,y=1,b=1;const _=r;let x=0;e.length>_&&(x=e.sort(((e,t)=>t.weight-e.weight))[_].weight);for(let S=0;S<o.length;S++){const t=o[S],{words:i,center:r,maxR:d,ratio:u}=t;let p=!1;for(let o=0;o<i.length;o++){uz(c,l,e,o);const t=i[o];if(t.x=r[0],t.y=r[1],!t.skip&&t.hasText&&t.sprite&&cz(f,t,d,u,a,h,n))t.hasPlaced=!0;else{if(!t.skip&&t.weight>x&&b>s){const i=t.datum[Symbol.for("vGrammar_id")];i!==v&&(v=i,y=b),b*=m,e.forEach((e=>{e.hasText=!1,e.sprite=null,e.fontSize=e.fontSize*m})),f=g.slice(0),p=!0;break}if(!t.skip&&t.datum[Symbol.for("vGrammar_id")]===v){e.forEach((e=>{e.hasText=!1,e.sprite=null,e.fontSize=e.fontSize/b})),t.skip=!0,b=y,v=null,f=g.slice(0),p=!0;break}}}p&&(S=-1)}for(let S=0;S<t.textLayoutTimes;S++){const i=e.filter((e=>(e.hasPlaced||(e.hasText=!1,e.sprite=null,e.fontSize=Math.max(~~(e.fontSize*t.fontSizeShrinkFactor),t.minFontSize)),!e.hasPlaced)));if(0===i.length)break;for(let e=0;e<i.length;e++){const t=i[e];uz(c,l,i,e),t.x=d[0],t.y=d[1],t.hasText&&cz(f,t,u,p,a,h,n)&&(t.hasPlaced=!0)}}t.board=f}function cz(e,t,i,n,r,s,a){const o=t.x,l=t.y,c=function(e){return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}(n),h=1*a;let d,u,p,g=-h;for(;d=c(g+=h);){const{wordSize:n,bounds:{dTop:a,dBottom:c,dLeft:h,dRight:g}}=t;if(u=d[0],p=d[1],Math.min(Math.abs(u),Math.abs(p))>=i)break;if(t.x=~~(o+u),t.y=~~(l+p),!(t.x-h<0||t.x+g>r[0]||t.y-a<0||t.y+c>r[1]||dz(t,e,s)))return hz(t,e,s),!0}return!1}function hz(e,t,i){const{wordSize:n}=e,r=e.sprite,s=n[0]>>5,a=i[0]>>5,o=e.x-(s<<4),l=o%32,c=32-l,h=n[1];let d,u=(e.y-(n[1]>>1))*a+(o>>5);if(0===l)for(let p=0;p<h;p++){for(let e=0;e<s;e++)t[u+e]|=r[p*s+e];u+=a}else for(let p=0;p<h;p++){d=0;for(let e=0;e<=s;e++)t[u+e]|=d<<c|(e<s?(d=r[p*s+e])>>>l:0);u+=a}}function dz(e,t,i){const{sprite:n,wordSize:r}=e,s=i[0]>>5,a=r[0]>>5,o=e.x-(a<<4),l=o%32,c=32-l,h=r[1];let d,u=(e.y-(r[1]>>1))*s+(o>>5);if(0===l)for(let p=0;p<h;p++){for(let e=0;e<a;e++)if(t[u+e]&n[p*a+e])return!0;u+=s}else for(let p=0;p<h;p++){d=0;for(let e=0;e<=a;e++)if((d<<c|(e<a?(d=n[p*a+e])>>>l:0))&t[u+e])return!0;u+=s}return!1}function uz(e,t,i,n){if(i[n].sprite||0===i[n].fontSize)return;const r=2048,s=Math.PI/180,a=i.length;e.width=r,e.height=2048,t.clearRect(0,0,r,2048),t.textAlign="center";let o,l,c=0,h=0,d=0,u=0;const p=n;for(--n;++n<a;){const e=i[n],a=Math.max(e.fontSize,2);if(t.save(),t.font=e.fontStyle+" "+e.fontWeight+" "+a+"px "+e.fontFamily,o=t.measureText(e.text+"m").width+2*e.padding,l=2*a+2*e.padding,0!==e.rotate){const t=Math.sin(e.rotate*s),i=Math.cos(e.rotate*s),n=o*i,r=o*t,a=l*i,c=l*t;o=Math.max(Math.abs(n+c),Math.abs(n-c)),l=~~Math.max(Math.abs(r+a),Math.abs(r-a))}if(o=o+31>>5<<5,l=Math.ceil(l),l>d&&(d=l),c+o>=r&&(c=0,h+=d,d=l),h+l>=2048){if(0===h){e.hasText=!1;continue}break}h+l>=u&&(u=h+l),t.translate(c+(o>>1),h+(l>>1)),0!==e.rotate&&t.rotate(e.rotate*s),t.fillText(e.text,0,0),e.padding&&(t.lineWidth=2*e.padding,t.strokeText(e.text,0,0)),t.restore(),e.LT=[c,h],e.wordSize=[o,l],e.hasText=!0,c+=o}if(0===u)return;const g=t.getImageData(0,0,r,u).data;let f,m;for(;--n>=p;){const e=i[n];if(!e.hasText){e.bounds={dTop:1/0,dBottom:-1/0,dLeft:1/0,dRight:-1/0};break}const{LT:t=[0,0],wordSize:s}=e;[c,h]=t;const a=s[0]>>5,o=new Array(a*s[1]).fill(0);let[l,d,u,p]=[1/0,-1/0,1/0,-1/0];for(m=0;m<s[1];m++){let e;for(f=0;f<s[0];f++)if(g[4*((h+m)*r+(c+f))+3]>0){const t=1<<31-f%32;o[a*m+(f>>5)]|=t,f<u&&(u=f),f>p&&(p=f),e|=t}e&&(m<l&&(l=m),m>d&&(d=m))}e.bounds={dTop:(s[1]>>1)-l,dBottom:d-(s[1]>>1),dLeft:(s[0]>>1)-u,dRight:p-(s[0]>>1)},e.sprite=o,delete e.LT}}function pz(e){const{segmentation:{labels:t},boardSize:i,size:n}=e,r=i[0]>>5,s=new Array(r*n[1]).fill(0);for(let a=0;a<n[1];a++)for(let e=0;e<n[0];e++)if(0===t[a*n[0]+e]){const t=1<<31-e%32;s[r*a+(e>>5)]|=t}if(i[0]>n[0]){const e=(1<<i[0]-n[0])-1;for(let t=0;t<n[1];t++)s[r*t+r-1]|=e}return s}function gz(e,t,i){(function(e,t){const{segmentation:{regions:i}}=t;let n=-1/0,r=0,s=0;i.forEach(((e,t)=>{const i=e.area;i>n&&(n=i,s=t),r+=i}));let a=0;i.forEach((t=>{const i=t.area,s=Math.ceil(i/r*e.length),o=i/n;t.words=[],t.regionNum=s,t.regionWeight=o,a+=s})),a<e.length&&(i[s].wordsNum+=e.length-a);let o=s;const l=i.map((e=>e.regionNum));e.forEach((e=>{let t=0,n=0;e.regionIndex=-1;do{if(l[o]>0&&e.weight<=i[o].regionWeight){e.regionIndex=o,i[o].words.push(e),l[o]--,o=(o+1)%i.length;break}o=(o+1)%i.length,t++,n++,n>i.length+1&&(i.forEach((e=>{e.regionWeight+=.15})),n=0)}while(-1===e.regionIndex&&t<3*i.length);-1===e.regionIndex&&(e.regionIndex=s,i[s].words.push(e),l[s]--)})),i.forEach((e=>{e.words.sort(((e,t)=>t.weight-e.weight))}))})(e,i),"ensureMapping"===t.layoutMode?lz(e,t,i):"ensureMappingEnlarge"===t.layoutMode?function(e,t,i){const{size:n,stepFactor:r,importantWordCount:s}=t,{segmentation:{regions:a},tempCtx:o,tempCanvas:l,boardSize:c,shapeCenter:h,shapeMaxR:d,shapeRatio:u}=i,p=pz(i);let g=p.slice(0);const f=t.fontSizeEnlargeFactor,m=Math.min(s,e.length);let v=0;e.length>m&&(v=e.sort(((e,t)=>t.weight-e.weight))[m-1].weight);let y=0,b=1,_=!1;for(let x=0;x<a.length;x++){const s=a[x],{words:h,center:d,maxR:u,ratio:S}=s;let w=!1;for(let a=0;a<h.length;a++){uz(l,o,e,a);const s=h[a];if(s.x=d[0],s.y=d[1],s.hasText&&s.sprite&&cz(g,s,u,S,n,c,r)){if(s.hasPlaced=!0,s.weight>=v&&y++,y>=m&&!_){b*=f,e.forEach((e=>{e.hasText=!1,e.sprite=null,e.fontSize=e.fontSize*f})),g=p.slice(0),w=!0,y=0;break}}else{if(s.weight>=v&&b>1){e.forEach((e=>{e.hasText=!1,e.sprite=null,e.fontSize=e.fontSize/f})),b/=f,_=!0,g=p.slice(0),w=!0;break}if(s.weight>=v)return lz(e,t,i)}}w&&(x=-1)}for(let x=0;x<t.textLayoutTimes;x++){const i=e.filter((e=>(e.hasPlaced||(e.hasText=!1,e.sprite=null,e.fontSize=Math.max(~~(e.fontSize*t.fontSizeShrinkFactor),t.minFontSize)),!e.hasPlaced)));if(0===i.length)break;for(let e=0;e<i.length;e++){const t=i[e];uz(l,o,i,e),t.x=h[0],t.y=h[1],t.hasText&&cz(g,t,d,u,n,c,r)&&(t.hasPlaced=!0)}}t.board=g}(e,t,i):function(e,t,i){const{size:n,stepFactor:r}=t,{segmentation:{regions:s},tempCtx:a,tempCanvas:o,boardSize:l,shapeCenter:c,shapeMaxR:h,shapeRatio:d}=i,u=pz(i);for(const p of s){const{words:t,center:i,maxR:s,ratio:c}=p;for(let h=0;h<t.length;h++){uz(o,a,e,h);const d=t[h];d.x=i[0],d.y=i[1],d.hasText&&d.sprite&&cz(u,d,s,c,n,l,r)&&(d.hasPlaced=!0)}}for(let p=0;p<t.textLayoutTimes;p++){const i=e.filter((e=>(e.hasPlaced||(e.hasText=!1,e.sprite=null,e.fontSize=Math.max(~~(e.fontSize*t.fontSizeShrinkFactor),t.minFontSize)),!e.hasPlaced)));if(0===i.length)break;for(let e=0;e<i.length;e++){const t=i[e];uz(o,a,i,e),t.x=c[0],t.y=c[1],t.hasText&&cz(u,t,h,d,n,l,r)&&(t.hasPlaced=!0)}}t.board=u}(e,t,i);const n=function(e,t,i){const{size:n,fillingTimes:r,fillingXStep:s,fillingYStep:a,getFillingFontStyle:o,getFillingFontWeight:l,getFillingFontFamily:c,fillingInitialFontSize:h,fillingDeltaFontSize:d,fillingInitialOpacity:u,fillingDeltaOpacity:p,fillingRotateList:g,getFillingPadding:f,random:m,board:v,minFillFoontSize:y}=t,{boardSize:b,shapeBounds:_,tempCtx:x,tempCanvas:S,randomGenerator:w}=i;let C=h,k=u;const A=[];for(let O=0;O<r;O++)E(C,k),C=Math.max(C>d?C-d:d,y),k=k>p?k-p:p;return A;function E(t,i){const r=e.map((e=>{const{text:n,color:r,fillingColor:s,hasPlaced:a,datum:h}=e;return{x:0,y:0,weight:0,text:n,fontFamily:c(h),fontStyle:o(h),fontWeight:l(h),fontSize:t,rotate:g[~~(w()*g.length)],padding:f(h),opacity:i,visible:!0,color:r,fillingColor:s,hasPlaced:a,datum:h}}));T(r);let h=0;const{x1:d,y1:u,x2:p,y2:y}=_,[C,k]=[d+~~(w()*s*2),u+~~(w()*a*2)];for(let e=k;e<=y;e+=a)for(let t=C;t<=p;t+=s){uz(S,x,r,h);const i=r[h];i.x=t,i.y=e;const{wordSize:s,bounds:a,hasPlaced:o}=i;if(!o||!a){++h===r.length&&(h=0,m&&T(r));continue}const{dTop:l,dBottom:c,dLeft:d,dRight:u}=a;i.x-d<0||i.x+u>n[0]||i.y-l<0||i.y+c>n[1]||i.hasText&&i.sprite&&!dz(i,v,b)&&(hz(i,v,b),A.push(Object.assign({},i)),++h===r.length&&(h=0,m&&T(r)))}}function T(e){return e.sort((()=>w()-.5))}}(e,t,i),r=[],s=[];for(let a=0;a<e.length;a++)e[a].hasPlaced?s.push(e[a]):r.push(e[a]);return r.forEach((e=>e.visible=!1)),{fillingWords:n,successedWords:s,failedWords:r}}var fz=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const mz={x:"x",y:"y",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",angle:"angle",opacity:"opacity",visible:"visible",isFillingWord:"isFillingWord",color:"color"},vz=(e,t,i,n)=>fz(void 0,void 0,void 0,(function*(){var i,r,s;if(!e.size||P(e.size[0])||P(e.size[1])||e.size[0]<=0||e.size[1]<=0)return u.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];e.size=[Math.ceil(e.size[0]),Math.ceil(e.size[1])],e.shape||Am("WordcloudShape shape must be specified."),e.text||Am("WordcloudShape text must be specified."),(null==n?void 0:n.emit)&&n.emit($N.BEFORE_WORDCLOUD_SHAPE_LAYOUT);const a=t,o=e.as||mz;if(!a||0===a.length)return[];const l={shapeUrl:e.shape,size:e.size,ratio:e.ratio||.8,tempCanvas:void 0,tempCtx:void 0,removeWhiteBorder:e.removeWhiteBorder||!1,boardSize:[0,0],random:!1,randomGenerator:void 0},c=Bf.createCanvas({width:e.size[0],height:e.size[1]}),h=c.getContext("2d");h.textAlign="center",h.textBaseline="middle",l.tempCanvas=c,l.tempCtx=h;const d=e.size[0]+31>>5<<5;l.boardSize=[d,e.size[1]],l.random?l.randomGenerator=Math.random:l.randomGenerator=(()=>{let e=-1;const t=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9];return()=>(e=(e+1)%t.length,t[e])})();const p=yield iz(l);if(!p)return[];const g=nz(p,l),f=e.colorMode||"ordinal",m={getText:Sz(e.text),getFontSize:Sz(e.fontSize),fontSizeRange:e.fontSizeRange,colorMode:f,getColor:e.colorField?Sz(e.colorField):Sz(e.text),getFillingColor:Sz(e.fillingColorField),colorList:e.colorList||("ordinal"===f?["#2E62F1"]:["#537EF5","#2E62F1","#2358D8","#184FBF","#0C45A6","#013B8E"]),getColorHex:Sz(e.colorHexField),getFontFamily:Sz(e.fontFamily||"sans-serif"),rotateList:e.rotateList||[0],getPadding:Sz(e.padding||1),getFontStyle:Sz(e.fontStyle||"normal"),getFontWeight:Sz(e.fontWeight||"normal"),getFontOpacity:e.fontOpacity?Sz(e.fontOpacity):()=>1};bz(a,m,g);const v={size:e.size,ratio:e.ratio||.8,shapeUrl:e.shape,random:void 0===e.random||e.random,textLayoutTimes:e.textLayoutTimes||3,removeWhiteBorder:e.removeWhiteBorder||!1,layoutMode:e.layoutMode||"default",fontSizeShrinkFactor:e.fontSizeShrinkFactor||.8,stepFactor:e.stepFactor||1,importantWordCount:e.importantWordCount||10,globalShinkLimit:e.globalShinkLimit||.2,fontSizeEnlargeFactor:e.fontSizeEnlargeFactor||1.5,fillingRatio:e.fillingRatio||.7,fillingTimes:e.fillingTimes||4,fillingXStep:e.fillingXRatioStep?Math.max(Math.floor(e.size[0]*e.fillingXRatioStep),1):e.fillingXStep||4,fillingYStep:e.fillingYRatioStep?Math.max(Math.floor(e.size[1]*e.fillingYRatioStep),1):e.fillingYStep||4,fillingInitialFontSize:e.fillingInitialFontSize,fillingDeltaFontSize:e.fillingDeltaFontSize,fillingInitialOpacity:e.fillingInitialOpacity||.8,fillingDeltaOpacity:e.fillingDeltaOpacity||.05,getFillingFontFamily:Sz(e.fillingFontFamily||"sans-serif"),getFillingFontStyle:Sz(e.fillingFontStyle||"normal"),getFillingFontWeight:Sz(e.fillingFontWeight||"normal"),getFillingPadding:Sz(e.fillingPadding||.4),fillingRotateList:e.fillingRotateList||[0,90],fillingDeltaFontSizeFactor:e.fillingDeltaFontSizeFactor||.2,fillingColorList:e.fillingColorList||["#537EF5"],sameColorList:!1,minInitFontSize:e.minInitFontSize||10,minFontSize:e.minFontSize||4,minFillFoontSize:e.minFillFoontSize||2},y=((e,t)=>{if(1===t.length&&"#537EF5"===t[0])return!0;if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0})(m.colorList,v.fillingColorList);v.sameColorList=y,yz(a,m,v,e),function(e,t,i,n){const{getText:r}=t;let{fillingInitialFontSize:s,fillingDeltaFontSize:a}=i;const{fillingRatio:o}=i,l=Math.ceil(Math.sqrt(n.shapeArea)/4);if(!s||!a){const t=o/100,c=e.reduce(((e,t)=>{const i=ez(r(t));return i>l?e:e+i}),0)/e.length;let h;if(0===c)h=8;else{const e=.2*n.shapeArea;h=Math.sqrt(t*(e/c))}s=~~h,a=h*i.fillingDeltaFontSizeFactor,Object.assign(i,{fillingInitialFontSize:s,fillingDeltaFontSize:a})}}(a,m,v,g);const{getText:b,getFontFamily:_,getFontStyle:x,getFontWeight:S,getPadding:w,getColor:C,getFillingColor:k,getColorHex:A,fontSizeScale:E,colorScale:T,fillingColorScale:O,getFontOpacity:M,rotateList:I}=m,R=a.map((t=>{var i,n;return{x:0,y:0,weight:0,text:b(t),fontFamily:_(t),fontWeight:S(t),fontStyle:x(t),rotate:I[~~(l.randomGenerator()*I.length)],fontSize:Math.max(v.minInitFontSize,~~E(t)),opacity:M(t),padding:w(t),color:A&&A(t)||T&&T(C(t))||"black",fillingColor:!k||(null===(i=e.colorField)||void 0===i?void 0:i.field)===(null===(n=e.fillingColorField)||void 0===n?void 0:n.field)&&y?void 0:A&&A(t)||O&&O(k(t))||"black",datum:t,visible:!0,hasPlaced:!1}})),D=V(R.map((e=>e.fontSize)));R.forEach((e=>e.weight=e.fontSize/D)),R.sort(((e,t)=>t.weight-e.weight));const{fillingWords:L,successedWords:j,failedWords:F}=gz(R,v,g);let B,N;const z=[];for(let e=0;e<R.length;++e)B=R[e],N=B.datum,N[o.x]=B.x,N[o.y]=B.y,N[o.fontFamily]=B.fontFamily,N[o.fontSize]=B.fontSize,N[o.fontStyle]=B.fontStyle,N[o.fontWeight]=B.fontWeight,N[o.angle]=el(B.rotate),N[o.opacity]=B.opacity,N[o.visible]=B.visible,N[o.isFillingWord]=!1,N[o.color]=B.color,z.push(N);const H=null!==(r=null===(i=e.text)||void 0===i?void 0:i.field)&&void 0!==r?r:"textKey",U=null!==(s=e.dataIndexKey)&&void 0!==s?s:"defaultDataIndexKey",W=[];return L.forEach(((t,i)=>{var n,r;const s={};s[o.x]=t.x,s[o.y]=t.y,s[o.fontFamily]=t.fontFamily,s[o.fontSize]=t.fontSize,s[o.fontStyle]=t.fontStyle,s[o.fontWeight]=t.fontWeight,s[o.angle]=el(t.rotate),s[o.opacity]=t.opacity,s[o.visible]=t.visible,s[o.isFillingWord]=!0,s[o.color]=k?(null===(n=e.colorField)||void 0===n?void 0:n.field)===(null===(r=e.fillingColorField)||void 0===r?void 0:r.field)&&y?t.color:t.fillingColor:v.fillingColorList[~~(l.randomGenerator()*v.fillingColorList.length)],s[H]=t.text,s[U]="".concat(t.text,"_").concat(i,"_fillingWords"),W.push(s)})),(null==n?void 0:n.emit)&&n.emit($N.AFTER_WORDCLOUD_SHAPE_LAYOUT,{successedWords:j,failedWords:F}),z.concat(W)})),yz=(e,t,i,n)=>{var r,s,a,o;const{colorMode:l,getColor:c,getFillingColor:h}=t,{sameColorList:d}=i;let u,p,g=t.colorList,f=i.fillingColorList;if("ordinal"===l){const t=e.map((e=>c(e)));if(u=e=>(new lk).domain(t).range(g).scale(e),h&&((null===(r=n.colorField)||void 0===r?void 0:r.field)!==(null===(s=n.fillingColorField)||void 0===s?void 0:s.field)||!d)){const t=e.map((e=>h(e)));p=e=>(new lk).domain(t).range(f).scale(e)}}else{1===g.length&&(g=[g[0],g[0]]);const t=(new ak).domain(xz(c,e)).range(g);if(u=e=>t.scale(e),h&&((null===(a=n.colorField)||void 0===a?void 0:a.field)!==(null===(o=n.fillingColorField)||void 0===o?void 0:o.field)||!d)){1===f.length&&(f=[f[0],f[0]]);const t=(new ak).domain(xz(h,e)).range(f);p=e=>t.scale(e)}}Object.assign(t,{colorScale:u,fillingColorScale:p})},bz=(e,t,i)=>{let{fontSizeRange:n}=t;const{getFontSize:r,getText:s}=t;let a;if(r){if(r&&n){const t=(new oz).domain(xz(r,e)).range(n);a=e=>t.scale(r(e))}else if(r&&Q(r)&&!n){const t=.5,[o,l]=xz(r,e),c=e.map((e=>({text:s(e),value:r(e),weight:l===o?1:(r(e)-o)/(l-o)}))),h=_z(c,i,!0);n=[~~(t*h),~~h];const d=(new oz).domain(xz(r,e)).range(n);a=e=>d.scale(r(e))}}else{const t=e.map((e=>({text:s(e)}))),n=_z(t,i,!1);a="function"==typeof(o=n)?o:function(){return o}}var o;Object.assign(t,{getFontSize:r,fontSizeRange:n,fontSizeScale:a})},_z=(e,t,i)=>{const n=t.shapeArea,r=t.ratio,s=t.segmentation.regions,a=Math.ceil(Math.sqrt(n)/12),o=e.reduce(((e,t)=>{const n=ez(t.text);return n<a?e+n*(i?(.5+.5*t.weight)**2:1):e}),0);if(0===o)return 12;let l=20;if(1===s.length)l=Math.sqrt(r*(n/(1.7*o)));else{const e=[];for(let t=0;t<s.length;t++){const i=s[t].area,a=s[t].ratio,l=i/n;if(l<.1)continue;const c=l*(o*(a<1?2.7-a:1.7)),h=Math.sqrt(r*(i/c));e.push(h)}l=e.length?Math.min(...e):Math.sqrt(r*(n/(1.7*o)))}return l};const xz=(e,t)=>{let i=1/0,n=-1/0;const r=t.length;let s;for(let a=0;a<r;++a)s=Dn(e(t[a])),s<i&&(i=s),s>n&&(n=s);return 1===t.length&&i===n&&(i-=1e4),[i,n]},Sz=e=>e?"string"==typeof e||"number"==typeof e?()=>e:Q(e)?e:t=>t[e.field]:null,wz=()=>{nm.registerTransform("wordcloudShape",{transform:vz,markPhase:"beforeJoin"},!0)};class Cz extends wN{constructor(){super(...arguments),this.type=Bt.wordCloud}}Cz.type=Bt.wordCloud;const kz=()=>{QN(),LB(),AN(),_n.registerSeries(Cz.type,Cz)};class Az extends dN{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{nameField:e.nameField,valueField:e.valueField,seriesField:e.seriesField,fontFamilyField:e.fontFamilyField,fontWeightField:e.fontWeightField,fontStyleField:e.fontStyleField,colorHexField:e.colorHexField,colorMode:e.colorMode,colorList:e.colorList,rotateAngles:e.rotateAngles,fontWeightRange:e.fontWeightRange,fontSizeRange:e.fontSizeRange,maskShape:e.maskShape,keepAspect:e.keepAspect,random:e.random,wordCloudConfig:e.wordCloudConfig,wordCloudShapeConfig:e.wordCloudShapeConfig,word:e.word,fillingWord:e.fillingWord}),i=this.seriesType;return i&&(t.type=i,t[i]=e[i]),t}}class Ez extends uN{constructor(){super(...arguments),this.transformerConstructor=Az,this.type="wordCloud",this.seriesType=Bt.wordCloud}}Ez.type="wordCloud",Ez.seriesType=Bt.wordCloud,Ez.view="singleDefault",Ez.transformerConstructor=Az;class Tz extends wN{constructor(){super(...arguments),this.type=Bt.wordCloud3d}_wordCloudTransformOption(){var e;return Object.assign(Object.assign({},super._wordCloudTransformOption()),{postProjection:null!==(e=this._spec.postProjection)&&void 0!==e?e:"StereographicProjection",depth_3d:this._spec.depth_3d})}_wordCloudShapeTransformOption(){var e;return Object.assign(Object.assign({},super._wordCloudShapeTransformOption()),{postProjection:null!==(e=this._spec.postProjection)&&void 0!==e?e:"StereographicProjection",depth_3d:this._spec.depth_3d})}initMark(){this._wordMark=this._createMark(wN.mark.word,{groupKey:this._seriesField,support3d:!0,isSeriesMark:!0}),this._isWordCloudShape&&(this._fillingWordMark=this._createMark(wN.mark.fillingWord,{groupKey:this._seriesField,support3d:!0,isSeriesMark:!0}))}initMarkStyle(){super.initMarkStyle();const e=this._wordMark,t=this._fillingWordMark;e&&this.setMarkStyle(e,{z:e=>{var t;return null!==(t=e.z)&&void 0!==t?t:0}},"normal",Tw.Series),t&&this.setMarkStyle(t,{z:e=>{var t;return null!==(t=e.z)&&void 0!==t?t:0}},"normal",Tw.Series)}initAnimation(){var e,t,i;const n=null!==(e=this._padding)&&void 0!==e?e:{};this._wordMark&&this._wordMark.setAnimationConfig(jR(null===(t=_n.getAnimationInKey("wordCloud3d"))||void 0===t?void 0:t((()=>{var e;const t=this.getCompiler().getVGrammarView(),i=t.width()-n.left||0-n.right||0,r=t.height()-n.top||0-n.bottom||0,s=Math.max(i,r)/2;return{center:{x:s,y:s,z:null!==(e=this._spec.depth_3d)&&void 0!==e?e:s},r:s}})),FR("word",this._spec,this._markAttributeContext))),this._fillingWordMark&&this._fillingWordMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("wordCloud3d"))||void 0===i?void 0:i((()=>{var e;const t=this.getCompiler().getVGrammarView(),i=t.width()-n.left||0-n.right||0,r=t.height()-n.top||0-n.bottom||0,s=Math.max(i,r)/2;return{center:{x:s,y:s,z:null!==(e=this._spec.depth_3d)&&void 0!==e?e:s},r:s}})),FR("fillingWord",this._spec,this._markAttributeContext)))}}Tz.type=Bt.wordCloud3d;const Oz=()=>{QN(),LB(),EN(),_n.registerSeries(Tz.type,Tz)};class Pz extends dN{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{nameField:e.nameField,valueField:e.valueField,seriesField:e.seriesField,fontFamilyField:e.fontFamilyField,fontWeightField:e.fontWeightField,fontStyleField:e.fontStyleField,colorHexField:e.colorHexField,colorMode:e.colorMode,colorList:e.colorList,rotateAngles:e.rotateAngles,fontWeightRange:e.fontWeightRange,fontSizeRange:e.fontSizeRange,depth_3d:e.depth_3d,maskShape:e.maskShape,keepAspect:e.keepAspect,random:e.random,wordCloudConfig:e.wordCloudConfig,wordCloudShapeConfig:e.wordCloudShapeConfig,word:e.word,fillingWord:e.fillingWord}),i=this.seriesType;return i&&(t.type=i,t[i]=e[i]),t}}class Mz extends uN{constructor(){super(...arguments),this.transformerConstructor=Pz,this.type="wordCloud3d",this.seriesType=Bt.wordCloud3d}}Mz.type="wordCloud3d",Mz.seriesType=Bt.wordCloud3d,Mz.view="singleDefault",Mz.transformerConstructor=Pz;const Iz=(e,t)=>{var i,n;const r=e.map((e=>Object.assign({},e)));if(!r||0===r.length)return r;const{valueField:s,asTransformRatio:a,asReachRatio:o,asHeightRatio:l,asValueRatio:c,asNextValueRatio:h,asLastValueRatio:d,asLastValue:u,asCurrentValue:p,asNextValue:g,heightVisual:f=!1,isCone:m=!0,range:v}=t,y=r.reduce(((e,t)=>Math.max(e,Number.parseFloat(t[s])||-1/0)),-1/0),b=r.reduce(((e,t)=>Math.min(e,Number.parseFloat(t[s])||1/0)),1/0),_=[null!==(i=null==v?void 0:v.min)&&void 0!==i?i:b,null!==(n=null==v?void 0:v.max)&&void 0!==n?n:y];return r.forEach(((e,t)=>{var i,n;const v=Number.parseFloat(e[s]),y=Number.parseFloat(null===(i=r[t-1])||void 0===i?void 0:i[s]),b=Number.parseFloat(null===(n=r[t+1])||void 0===n?void 0:n[s]),x=L(b*v)&&0!==v?b/v:0,S=L(v*y)&&0!==y?v/y:0;u&&(e[u]=y),g&&(e[g]=b),a&&(e[a]=x),o&&(e[o]=0===t?1:S),l&&(e[l]=!0===f?x:1/r.length),c&&(e[c]=v/_[1]),h&&(e[h]=t===r.length-1?m?0:e[c]:b/_[1]),d&&(e[d]=0===t?1:y/_[1]),p&&(e[p]=v)})),r},Rz=(e,t)=>{var i,n;const r=null===(n=null===(i=e[0])||void 0===i?void 0:i.latestData)||void 0===n?void 0:n.map((e=>Object.assign({},e)));return r&&0!==r.length?(r.shift(),r.forEach((e=>{e[t.asIsTransformLevel]=!0})),r):r},Dz="".concat(Ge,"_FUNNEL_TRANSFORM_RATIO"),Lz="".concat(Ge,"_FUNNEL_REACH_RATIO"),jz="".concat(Ge,"_FUNNEL_HEIGHT_RATIO"),Fz="".concat(Ge,"_FUNNEL_VALUE_RATIO"),Bz="".concat(Ge,"_FUNNEL_LAST_VALUE_RATIO"),Nz="".concat(Ge,"_FUNNEL_NEXT_VALUE_RATIO"),zz="".concat(Ge,"_FUNNEL_LAST_VALUE"),Hz="".concat(Ge,"_FUNNEL_CURRENT_VALUE"),Vz="".concat(Ge,"_FUNNEL_NEXT_VALUE"),Uz="".concat(Ge,"_FUNNEL_TRANSFORM_LEVEL"),Wz=20;class Gz extends SR{constructor(){super(...arguments),this.titleValueCallback=(e,t)=>{var i,n,r;const s=this.series;return"transform"===(null===(i=null==t?void 0:t.mark)||void 0===i?void 0:i.name)?"\u8f6c\u5316\u7387":null!==(n=this._getDimensionData(e))&&void 0!==n?n:null===(r=e.properties)||void 0===r?void 0:r["".concat(s.getCategoryField())]},this.contentValueCallback=(e,t)=>{var i;return"transform"===(null===(i=null==t?void 0:t.mark)||void 0===i?void 0:i.name)?"".concat((100*(null==e?void 0:e[Lz])).toFixed(1),"%"):this._getMeasureData(e)},this.contentKeyCallback=(e,t)=>{var i;if("transform"===(null===(i=null==t?void 0:t.mark)||void 0===i?void 0:i.name))return"\u8f6c\u5316\u7387";const{dimensionFields:n,seriesFields:r}=this._seriesCacheInfo,s=n[n.length-1];return x(r[0])?null==e?void 0:e[r[0]]:null==e?void 0:e[s]}}}class Kz extends kk{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{points:[]})}}class Yz extends Kz{constructor(){super(...arguments),this.type=Yz.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}}Yz.type="polygon";const Xz=()=>{_n.registerMark(Yz.type,Yz),Ok(),zO(),nm.registerGraphic(Vr.polygon,SA),PM()};class qz extends UR{_transformLabelSpec(e){this._addMarkLabelSpec(e,"funnel"),e.isTransform&&this._addMarkLabelSpec(e,"transform","transformLabel")}}class Zz extends WR{constructor(){super(...arguments),this.type=Bt.funnel,this._funnelMarkName="funnel",this._funnelMarkType="polygon",this._transformMarkName="transform",this._transformMarkType="polygon",this.transformerConstructor=qz,this._funnelMark=null,this._funnelTransformMark=null,this._labelMark=null,this._transformLabelMark=null,this._funnelOuterLabelMark={}}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this._funnelOrient=null!==(e=this._spec.funnelOrient)&&void 0!==e?e:"top",this._shape=null!==(t=this._spec.shape)&&void 0!==t?t:"trapezoid",this._isHorizontal()?this._funnelAlign=["top","bottom"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center":this._funnelAlign=["left","right"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center",this._spec.categoryField&&this.setSeriesField(this._spec.categoryField)}initData(){if(super.initData(),!this._data)return;uo(this._dataSet,"funnel",Iz),uo(this._dataSet,"funnelTransform",Rz);const e=new R(this._dataSet,{name:"".concat(Ge,"_series_").concat(this.id,"_viewDataTransform")});e.parse([this.getViewData()],{type:"dataview"}),this._viewDataTransform=new ER(this._option,e)}getStatisticFields(){const e=[];return e.push({key:this._categoryField,operations:["values"]}),e.push({key:this._valueField,operations:["max","min"]}),e}_statisticViewData(){var e,t,i,n,r,s,a,o,l;super._statisticViewData(),this._data.getDataView().transform({type:"funnel",options:{valueField:this.getValueField(),isCone:this._spec.isCone,asCurrentValue:Hz,asTransformRatio:Dz,asReachRatio:Lz,asHeightRatio:jz,asValueRatio:Fz,asNextValueRatio:Nz,asLastValueRatio:Bz,asLastValue:zz,asNextValue:Vz,range:{min:null!==(t=null===(e=this._spec.range)||void 0===e?void 0:e.min)&&void 0!==t?t:null===(n=null===(i=this.getViewDataStatistics().latestData)||void 0===i?void 0:i[this.getValueField()])||void 0===n?void 0:n.min,max:null!==(s=null===(r=this._spec.range)||void 0===r?void 0:r.max)&&void 0!==s?s:null===(o=null===(a=this.getViewDataStatistics().latestData)||void 0===a?void 0:a[this.getValueField()])||void 0===o?void 0:o.max}}}),null===(l=this._viewDataTransform.getDataView())||void 0===l||l.transform({type:"funnelTransform",options:{asIsTransformLevel:Uz}})}initMark(){var e,t,i,n,r,s,a,o,l,c;if(this._funnelMark=this._createMark(Object.assign(Object.assign({},Zz.mark.funnel),{name:this._funnelMarkName,type:this._funnelMarkType}),{themeSpec:null===(e=this._theme)||void 0===e?void 0:e.funnel,morph:zR(this._spec,this._funnelMarkName),defaultMorphElementKey:this._seriesField,groupKey:this._seriesField,isSeriesMark:!0,customShape:null===(t=this._spec.funnel)||void 0===t?void 0:t.customShape}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(Object.assign(Object.assign({},Zz.mark.transform),{name:this._transformMarkName,type:this._transformMarkType}),{themeSpec:null===(i=this._theme)||void 0===i?void 0:i.transform,skipBeforeLayouted:!1,dataView:this._viewDataTransform.getDataView(),dataProductId:this._viewDataTransform.getProductId(),customShape:null===(n=this._spec.transform)||void 0===n?void 0:n.customShape})),null===(s=null===(r=this._spec)||void 0===r?void 0:r.outerLabel)||void 0===s?void 0:s.visible){const{line:e}=null!==(a=this._spec.outerLabel)&&void 0!==a?a:{},{line:t}=null!==(l=null===(o=this._theme)||void 0===o?void 0:o.outerLabel)&&void 0!==l?l:{};this._funnelOuterLabelMark.label=this._createMark(Zz.mark.outerLabel,{themeSpec:null===(c=this._theme)||void 0===c?void 0:c.outerLabel,markSpec:this._spec.outerLabel,skipBeforeLayouted:!0}),this._funnelOuterLabelMark.line=this._createMark(Zz.mark.outerLabelLine,{themeSpec:t,markSpec:e,depend:[this._funnelOuterLabelMark.label]})}}initTooltip(){this._tooltipHelper=new Gz(this),this._funnelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelMark),this._funnelTransformMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelTransformMark)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return[this._valueField]}getGroupFields(){return null}initMarkStyle(){const e=this._funnelMark;e&&(this.setMarkStyle(e,{points:e=>this.getPoints(e),visible:e=>x(e[this._valueField]),fill:this.getColorAttribute()},"normal",Tw.Series),this._trigger.registerMark(e));const t=this._funnelTransformMark;t&&(this.setMarkStyle(t,{points:e=>this.getPoints(e)},"normal",Tw.Series),this._trigger.registerMark(t));const i=this._funnelOuterLabelMark.label;i&&this.setMarkStyle(i,{text:e=>{const t="".concat(e[this.getCategoryField()]);return Q(this._spec.outerLabel.formatMethod)?this._spec.outerLabel.formatMethod(t,e):t},x:e=>this._computeOuterLabelPosition(e).x,y:e=>this._computeOuterLabelPosition(e).y,textAlign:e=>this._computeOuterLabelPosition(e).align,textBaseline:e=>this._computeOuterLabelPosition(e).textBaseline,limit:e=>this._computeOuterLabelLimit(e)},"normal",Tw.Series);const n=this._funnelOuterLabelMark.line;n&&i&&this.setMarkStyle(n,{x:e=>this._computeOuterLabelLinePosition(e).x1,y:e=>this._computeOuterLabelLinePosition(e).y1,x1:e=>this._computeOuterLabelLinePosition(e).x2,y1:e=>this._computeOuterLabelLinePosition(e).y2},"normal",Tw.Series)}initLabelMarkStyle(e){var t,i;if(!e)return;const n=e.getTarget(),r=e.getComponent();n===this._funnelMark?(this._labelMark=e,this.setMarkStyle(e,{text:e=>"".concat(e[this.getCategoryField()]," ").concat(e[this.getValueField()]),x:e=>this._computeLabelPosition(e).x,y:e=>this._computeLabelPosition(e).y,maxLineWidth:e=>this._computeLabelLimit(e,this._spec.label),stroke:this.getColorAttribute()},"normal",Tw.Series),(null===(t=this._funnelOuterLabelMark)||void 0===t?void 0:t.label)&&this._funnelOuterLabelMark.label.setDepend(r),(null===(i=this._funnelOuterLabelMark)||void 0===i?void 0:i.line)&&this._funnelOuterLabelMark.line.setDepend(...this._funnelOuterLabelMark.line.getDepend())):this._funnelTransformMark&&n===this._funnelTransformMark&&(this._transformLabelMark=e,this.setMarkStyle(e,{text:e=>"".concat((100*AF(Lz).bind(this)(e)).toFixed(1),"%"),x:e=>this._computeLabelPosition(e).x,y:e=>this._computeLabelPosition(e).y,maxLineWidth:e=>this._computeLabelLimit(e,this._spec.transformLabel)},"normal",Tw.Series))}initAnimation(){var e,t,i,n,r,s,a;const o=null!==(i=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset)&&void 0!==i?i:"clipIn";"clipIn"===o&&this._rootMark&&this._rootMark.setAnimationConfig(jR(null===(n=_n.getAnimationInKey("cartesianGroupClip"))||void 0===n?void 0:n({direction:()=>this._isHorizontal()?"x":"y",width:()=>{const e=this.getRootMark().getProduct();if(e){const{x1:t,x2:i}=e.getBounds();return Math.max(t,i)}return this.getLayoutRect().width},height:()=>{const e=this.getRootMark().getProduct();if(e){const{y1:t,y2:i}=e.getBounds();return Math.max(t,i)}return this.getLayoutRect().height},orient:()=>this._isReverse()?"negative":"positive"},o),FR("group",this._spec,this._markAttributeContext))),[null===(r=this._funnelOuterLabelMark)||void 0===r?void 0:r.label].forEach((e=>{e&&e.setAnimationConfig(jR(_n.getAnimationInKey("fadeInOut")(),FR(e.name,this._spec,this._markAttributeContext)))})),[this._funnelMark,this._funnelTransformMark].forEach((e=>{e&&e.setAnimationConfig(jR(_n.getAnimationInKey("funnel")({},o),FR(e.name,this._spec,this._markAttributeContext)))})),(null===(s=this._funnelOuterLabelMark)||void 0===s?void 0:s.line)&&this._funnelOuterLabelMark.line.setAnimationConfig(jR(null===(a=_n.getAnimationInKey("fadeInOut"))||void 0===a?void 0:a(),FR("outerLabelLine",this._spec,this._markAttributeContext)))}initGroups(){}getStackGroupFields(){return[]}getStackValueField(){return null}initEvent(){var e;super.initEvent(),null===(e=this._viewDataTransform.getDataView())||void 0===e||e.target.addListener("change",(e=>{this._viewDataTransform.updateData()}))}getPoints(e){const t=this.isTransformLevel(e),i=this._getMainAxisLength(t)/2;let n,r;t?(n="rect"===this._shape?this._getSecondaryAxisLength(e[Bz])/2:this._getSecondaryAxisLength(e[Fz])/2,r=this._getSecondaryAxisLength(e[Fz])/2):(n=this._getSecondaryAxisLength(e[Fz])/2,r="rect"===this._shape?n:this._getSecondaryAxisLength(e[Nz])/2);const{x:s,y:a}=this._getPositionByData(e),o=this._getPolygonPoints([s,a],n,r,n,r,i);return"center"!==this._funnelAlign&&this._adjustPoints(o),o}isTransformLevel(e){return!!(null==e?void 0:e[Uz])}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this)}valueToPosition(e){var t,i,n;const r=null===(n=null===(i=null===(t=this.getViewData())||void 0===t?void 0:t.latestData)||void 0===i?void 0:i.find)||void 0===n?void 0:n.call(i,(t=>t[this._categoryField]===e));return x(r)?this._getPolygonCenter(this.getPoints(r)):null}dataToPosition(e){return this.valueToPosition(e[this._categoryField])}dataToPositionX(e){return this.dataToPosition(e).x}dataToPositionY(e){return this.dataToPosition(e).y}dataToPositionZ(e){return 0}_getMainAxisLength(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const i=this.getViewData().latestData.length,n=this._isHorizontal()?this.getLayoutRect().width:this.getLayoutRect().height,r=!!this._spec.isTransform,s=r?0:null!==(t=this._spec.gap)&&void 0!==t?t:0,a=r?Math.max(0,i-1):0,o=(n-s*Math.max(0,i-1))/(i+.5*a);return e?r?.5*o:0:o}_getSecondaryAxisLength(e){const t=Number.isNaN(e)||!Number.isFinite(e)?0:e,i=this._computeMaxSize(),n=this._computeMinSize();return n+(i-n)*t}_getPositionByData(e){var t;const i=null===(t=this.getViewData().latestData)||void 0===t?void 0:t.findIndex((t=>t[this._categoryField]===e[this._categoryField]&&t[kw]===e[kw]));if(!x(i)||i<0)return{};const n=this.isTransformLevel(e),r=this._isHorizontal(),s=r?this.getLayoutRect().height:this.getLayoutRect().width,a=r?this.getLayoutRect().width:this.getLayoutRect().height,o=s/2;let l=0;const c=this._getMainAxisLength(),h=this._getMainAxisLength(!0);return l+=i*(c+h),l+=n?-h/2:c/2,!this._spec.isTransform&&this._spec.gap&&(l+=this._spec.gap*i),this._isReverse()&&(l=a-l),this._isHorizontal()?{x:l,y:o}:{x:o,y:l}}_getPolygonPoints(e,t,i,n,r,s){const a=e[0],o=e[1];switch(this._funnelOrient){case"left":return[{x:a-s,y:o+t},{x:a-s,y:o-n},{x:a+s,y:o-r},{x:a+s,y:o+i}];case"right":return[{x:a+s,y:o-n},{x:a+s,y:o+n},{x:a-s,y:o+i},{x:a-s,y:o-i}];case"bottom":return[{x:a+t,y:o+s},{x:a-n,y:o+s},{x:a-r,y:o-s},{x:a+i,y:o-s}];default:return[{x:a-t,y:o-s},{x:a+n,y:o-s},{x:a+r,y:o+s},{x:a-i,y:o+s}]}}_getPolygonCenter(e){if(this._isHorizontal()){const t=(e[0].x+e[3].x)/2,i=(e[0].y+e[3].y)/2;return{x:(t+(e[1].x+e[2].x)/2)/2,y:(i+(e[1].y+e[2].y)/2)/2}}const t=(e[0].x+e[3].x)/2,i=(e[0].y+e[3].y)/2;return{x:(t+(e[1].x+e[2].x)/2)/2,y:(i+(e[1].y+e[2].y)/2)/2}}_adjustPoints(e){let t,i,n;return this._isHorizontal()?(n="y","left"===this._funnelOrient?(t="bottom"===this._funnelAlign?-e[1].y:e[1].y,i="bottom"===this._funnelAlign?-e[2].y:e[2].y):(t="bottom"===this._funnelAlign?-e[0].y:e[0].y,i="bottom"===this._funnelAlign?-e[3].y:e[3].y)):(n="x","top"===this._funnelOrient?(t="left"===this._funnelAlign?e[0].x:-e[0].x,i="left"===this._funnelAlign?e[3].x:-e[3].x):(t="left"===this._funnelAlign?e[1].x:-e[1].x,i="left"===this._funnelAlign?e[2].x:-e[2].x)),e[0][n]-=t,e[1][n]-=t,e[2][n]-=i,e[3][n]-=i,e}_computeLabelPosition(e){const t=this.getPoints(e);return this._getPolygonCenter(t)}_computeLabelLimit(e,t){const i=null==t?void 0:t.limit;if(l(i))return i;const n=this.getPoints(e);return"shapeSize"===i?this._isHorizontal()?Math.abs(n[3].x-n[0].x):(Math.abs(n[0].x-n[1].x)+Math.abs(n[2].x-n[3].x))/2:this._isHorizontal()?Math.abs(n[3].x-n[0].x):void 0}_computeOuterLabelPosition(e){var t,i;let n,r,s=null===(t=this._spec.outerLabel)||void 0===t?void 0:t.position,a="center",o="middle";if(s=this._isHorizontal()?["top","bottom"].includes(s)?s:"bottom"===this._funnelAlign?"top":"bottom":["left","right"].includes(s)?s:"left"===this._funnelAlign?"right":"left",!1!==(null===(i=this._spec.outerLabel)||void 0===i?void 0:i.alignLabel))({x:n,y:r}=this._getPositionByData(e)),"left"===s?(n=0,a="left"):"right"===s?(n=this.getLayoutRect().width,a="right"):"top"===s?(r=0,o="top"):"bottom"===s&&(r=this.getLayoutRect().height,o="bottom");else{const{x2:t,y2:i}=this._computeOuterLabelLinePosition(e);n=t,r=i,"left"===s?(n-=5,a="right"):"right"===s?(n+=5,a="left"):"top"===s?(r-=5,o="bottom"):"bottom"===s&&(r+=5,o="top")}return{x:n,y:r,align:a,textBaseline:o}}_computeOuterLabelLimit(e){var t,i,n,r,s;if(this._isHorizontal())return this._getMainAxisLength(this.isTransformLevel(e));const a=this.getPoints(e),o=(Math.abs(a[0].x-a[1].x)+Math.abs(a[2].x-a[3].x))/2,l=this.getCategoryField(),c=null===(n=null===(i=null===(t=this._labelMark)||void 0===t?void 0:t.getComponent())||void 0===i?void 0:i.getProduct().getGroupGraphicItem().find((t=>{let{attribute:i,type:n}=t;var r;return"text"===n&&(null===(r=i.data)||void 0===r?void 0:r[l])===e[l]}),!0))||void 0===n?void 0:n.AABBBounds,h=c?c.x2-c.x1:0;return this.getLayoutRect().width/2-Math.max(o/2,h/2)-Wz-2*(null!==(s=null===(r=this._spec.outerLabel)||void 0===r?void 0:r.spaceWidth)&&void 0!==s?s:5)}_computeOuterLabelLinePosition(e){var t,i,n,r,s,a,o,l,c,h,d;const u=this.getCategoryField(),p=null===(s=null===(r=null===(n=null===(i=null===(t=this._funnelOuterLabelMark)||void 0===t?void 0:t.label)||void 0===i?void 0:i.getProduct())||void 0===n?void 0:n.elements)||void 0===r?void 0:r.find((t=>{var i;return(null===(i=t.data[0])||void 0===i?void 0:i[u])===e[u]})))||void 0===s?void 0:s.getBounds(),g=null===(l=null===(o=null===(a=this._labelMark)||void 0===a?void 0:a.getComponent())||void 0===o?void 0:o.getProduct().getGroupGraphicItem().find((t=>{let{attribute:i,type:n}=t;var r;return"text"===n&&(null===(r=i.data)||void 0===r?void 0:r[u])===e[u]}),!0))||void 0===l?void 0:l.AABBBounds,f=null!==(c=this._spec.outerLabel)&&void 0!==c?c:{};let m,v,y,b;if(this._isHorizontal()){const t=null!==(h=f.spaceWidth)&&void 0!==h?h:5,i=this.getPoints(e),n=(Math.abs(i[0].y-i[1].y)+Math.abs(i[2].y-i[3].y))/2;return"top"===this._spec.outerLabel.position||"bottom"===this._funnelAlign?(y=this._getPolygonCenter(i).y-n/2-t,b=!1!==f.alignLabel?(null==p?void 0:p.y2)+t:y-t,m=this._getPolygonCenter(i).x,y-b<Wz&&(b=y-Wz),v=m):(y=this._getPolygonCenter(i).y+n/2+t,b=!1!==f.alignLabel?(null==p?void 0:p.y1)-t:y+t,m=this._getPolygonCenter(i).x,b-y<Wz&&(b=y+Wz),v=m),{x1:m,x2:v,y1:y,y2:b}}const _=this.getPoints(e),x=(Math.abs(_[0].x-_[1].x)+Math.abs(_[2].x-_[3].x))/2,S=(null==g?void 0:g.x2)-(null==g?void 0:g.x1)||0,w=null!==(d=f.spaceWidth)&&void 0!==d?d:5;return"right"===this._spec.outerLabel.position||"left"===this._funnelAlign?(m=this._getPolygonCenter(_).x+Math.max(S/2,x/2)+w,v=!1!==f.alignLabel?(null==p?void 0:p.x1)-w:m+w,y=this._getPolygonCenter(_).y,v-m<Wz&&(v=m+Wz),b=y):(m=this._getPolygonCenter(_).x-Math.max(S/2,x/2)-w,v=!1!==f.alignLabel?(null==p?void 0:p.x2)+w:m-w,y=this._getPolygonCenter(_).y,m-v<Wz&&(v=m-Wz),b=y),{x1:m,x2:v,y1:y,y2:b}}_computeMaxSize(){var e;const t=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width;return ee(null!==(e=this._spec.maxSize)&&void 0!==e?e:"80%",t)}_computeMinSize(){var e;const t=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width;return ee(null!==(e=this._spec.minSize)&&void 0!==e?e:0,t)}_isHorizontal(){return"left"===this._funnelOrient||"right"===this._funnelOrient}_isReverse(){return"bottom"===this._funnelOrient||"right"===this._funnelOrient}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._funnelMark]}}Zz.type=Bt.funnel,Zz.mark=mi,Zz.transformerConstructor=qz;const Qz=()=>{Xz(),LB(),TB(),_n.registerSeries(Zz.type,Zz),_n.registerAnimation("funnel",((e,t)=>Object.assign({appear:"clipIn"===t?void 0:{type:"fadeIn"}},wM))),_n.registerAnimation("cartesianGroupClip",(e=>({appear:{custom:Ey,customParameters:(t,i)=>({animationType:"in",group:i.getGraphicItem(),direction:e.direction(),width:e.width(),height:e.height(),orient:e.orient()})},disappear:{custom:Ey,customParameters:(t,i)=>({animationType:"out",group:i.getGraphicItem(),direction:e.direction(),width:e.width(),height:e.height(),orient:e.orient()})}}))),kM()};class $z extends oD{needAxes(){return!1}_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,seriesField:e.seriesField,funnelAlign:e.funnelAlign,funnelOrient:e.funnelOrient,shape:e.shape,funnel:e.funnel,transform:e.transform,outerLabel:e.outerLabel,transformLabel:e.transformLabel,isTransform:e.isTransform,maxSize:e.maxSize,minSize:e.minSize,gap:e.gap,isCone:e.isCone,range:e.range}),i=this.seriesType;return i&&(t.type=i,t[i]=e[i]),t}transformSpec(e){super.transformSpec(e);const t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))})):e.series=[t]}}class Jz extends fD{constructor(){super(...arguments),this.transformerConstructor=$z,this.type="funnel",this.seriesType=Bt.funnel}}Jz.type="funnel",Jz.seriesType=Bt.funnel,Jz.view="singleDefault",Jz.transformerConstructor=$z;class eH extends Kz{constructor(){super(...arguments),this.type=eH.type}}eH.type="pyramid3d";const tH=()=>{_n.registerMark(eH.type,eH),Ok(),jA(),nm.registerGraphic(Vr.pyramid3d,CA),PM()};class iH extends qz{_transformLabelSpec(e){this._addMarkLabelSpec(e,"funnel3d"),e.isTransform&&this._addMarkLabelSpec(e,"transform3d","transformLabel")}}class nH extends Zz{constructor(){super(...arguments),this.type=Bt.funnel3d,this._funnelMarkName="funnel3d",this._funnelMarkType="pyramid3d",this._transformMarkName="transform3d",this._transformMarkType="pyramid3d",this.transformerConstructor=iH}initMark(){var e,t,i,n,r,s,a,o;if(this._funnelMark=this._createMark(Object.assign(Object.assign({},nH.mark.funnel3d),{name:this._funnelMarkName,type:this._funnelMarkType}),{themeSpec:null===(e=this._theme)||void 0===e?void 0:e.funnel3d,key:this._seriesField,isSeriesMark:!0,support3d:!0}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(Object.assign(Object.assign({},nH.mark.transform3d),{name:this._transformMarkName,type:this._transformMarkType}),{themeSpec:null===(t=this._theme)||void 0===t?void 0:t.transform3d,key:this._seriesField,skipBeforeLayouted:!1,dataView:this._viewDataTransform.getDataView(),dataProductId:this._viewDataTransform.getProductId()})),null===(n=null===(i=this._spec)||void 0===i?void 0:i.outerLabel)||void 0===n?void 0:n.visible){const{line:e}=null!==(r=this._spec.outerLabel)&&void 0!==r?r:{},{line:t}=null!==(a=null===(s=this._theme)||void 0===s?void 0:s.outerLabel)&&void 0!==a?a:{};this._funnelOuterLabelMark.label=this._createMark(nH.mark.outerLabel,{themeSpec:null===(o=this._theme)||void 0===o?void 0:o.outerLabel,key:this._seriesField,markSpec:this._spec.outerLabel}),this._funnelOuterLabelMark.line=this._createMark(nH.mark.outerLabelLine,{themeSpec:t,key:this._seriesField,markSpec:e,depend:[this._funnelOuterLabelMark.label]})}}initMarkStyle(){super.initMarkStyle();const e=this._funnelMark;e&&this.setMarkStyle(e,{z:e=>{if(this._isHorizontal())return 0;const t=this.getPoints(e),i=Math.max(Math.abs(t[0].x-t[1].x),Math.abs(t[2].x-t[3].x));return(this._computeMaxSize()-i)/2}},"normal",Tw.Series)}initLabelMarkStyle(e){var t,i;super.initLabelMarkStyle(e),this.setMarkStyle(e,{z:e=>{if(this._isHorizontal())return 0;const t=this.getPoints(e),i=Math.max(Math.abs(t[0].x-t[1].x),Math.abs(t[2].x-t[3].x));return(this._computeMaxSize()-i)/2}},"normal",Tw.Series),this._labelMark=e,(null===(t=this._funnelOuterLabelMark)||void 0===t?void 0:t.label)&&this._funnelOuterLabelMark.label.setDepend(e.getComponent()),(null===(i=this._funnelOuterLabelMark)||void 0===i?void 0:i.line)&&this._funnelOuterLabelMark.line.setDepend(...this._funnelOuterLabelMark.line.getDepend())}}nH.type=Bt.funnel3d,nH.mark=vi,nH.transformerConstructor=iH;class rH extends fD{constructor(){super(...arguments),this.transformerConstructor=$z,this.type="funnel3d",this.seriesType=Bt.funnel3d}}rH.type="funnel3d",rH.seriesType=Bt.funnel3d,rH.view="singleDefault",rH.transformerConstructor=$z;function sH(e){return()=>"vertical"===e.direction?{orient:"negative"}:{orient:"positive"}}const aH=e=>({type:"horizontal"===e.direction?"growWidthOut":"growHeightOut",options:sH(e)}),oH={type:"fadeIn"};function lH(e,t){return!1===t?{}:"fadeIn"===t?oH:(e=>({type:"horizontal"===e.direction?"growWidthIn":"growHeightIn",options:sH(e)}))(e)}class cH extends SR{getDefaultTooltipPattern(e,t){const i=super.getDefaultTooltipPattern(e,t);return"mark"===e?i:"dimension"===e?(i.visible=!1,i):null}}class hH extends YR{constructor(){super(...arguments),this.type=Bt.linearProgress,this._progressMark=null,this._trackMark=null,this._progressGroupMark=null}initMark(){this._initProgressGroupMark(),this._initTrackMark(),this._initProgressMark()}initMarkStyle(){this._initProgressGroupMarkStyle(),this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){var e;return this._progressMark=this._createMark(hH.mark.progress,{isSeriesMark:!0,parent:this._progressGroupMark,customShape:null===(e=this._spec.progress)||void 0===e?void 0:e.customShape}),this._progressMark}_initProgressMarkStyle(){var e,t,i,n,r,s,a,o;const l=this._progressMark;if(l){if("vertical"===this._spec.direction){const r=null!==(t=null===(e=this._spec.progress)||void 0===e?void 0:e.leftPadding)&&void 0!==t?t:0,s=null!==(n=null===(i=this._spec.progress)||void 0===i?void 0:i.rightPadding)&&void 0!==n?n:0;this.setMarkStyle(l,{x:e=>{var t,i;return fk(this.dataToPositionX(e),null===(i=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===i?void 0:i.call(t,0))-this._spec.bandWidth/2+r},y:e=>{var t,i;return fk(this.dataToPositionY(e),null===(i=null===(t=this._yAxisHelper)||void 0===t?void 0:t.getScale)||void 0===i?void 0:i.call(t,0))},height:()=>{var e;return null===(e=this._yAxisHelper)||void 0===e?void 0:e.dataToPosition([0],{bandPosition:this._bandPosition})},width:this._spec.bandWidth-r-s,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",Tw.Series)}else{const e=null!==(s=null===(r=this._spec.progress)||void 0===r?void 0:r.topPadding)&&void 0!==s?s:0,t=null!==(o=null===(a=this._spec.progress)||void 0===a?void 0:a.bottomPadding)&&void 0!==o?o:0;this.setMarkStyle(l,{x:e=>{var t,i;return fk(this.dataToPositionX(e),null===(i=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===i?void 0:i.call(t,0))-this._xAxisHelper.dataToPosition([1],{bandPosition:this._bandPosition})},y:t=>{var i,n;return fk(this.dataToPositionY(t),null===(n=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===n?void 0:n.call(i,0))-this._spec.bandWidth/2+e},height:this._spec.bandWidth-e-t,width:()=>{var e;return null===(e=this._xAxisHelper)||void 0===e?void 0:e.dataToPosition([1],{bandPosition:this._bandPosition})},cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",Tw.Series)}this._trigger.registerMark(l)}}_initTrackMark(){var e;return this._trackMark=this._createMark(hH.mark.track,{parent:this._progressGroupMark,customShape:null===(e=this._spec.track)||void 0===e?void 0:e.customShape}),this._trackMark}_initTrackMarkStyle(){const e=this._trackMark;e&&("vertical"===this._spec.direction?this.setMarkStyle(e,{x:e=>{var t,i;return fk(this.dataToPositionX(e),null===(i=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===i?void 0:i.call(t,0))-this._spec.bandWidth/2},y:0,width:this._spec.bandWidth,height:()=>this._scaleY.range()[0],cornerRadius:this._spec.cornerRadius},"normal",Tw.Series):this.setMarkStyle(e,{x:0,y:e=>{var t,i;return fk(this.dataToPositionY(e),null===(i=null===(t=this._yAxisHelper)||void 0===t?void 0:t.getScale)||void 0===i?void 0:i.call(t,0))-this._spec.bandWidth/2},height:this._spec.bandWidth,width:()=>this._scaleX.range()[1],cornerRadius:this._spec.cornerRadius},"normal",Tw.Series),this._trigger.registerMark(e))}_initProgressGroupMark(){return this._progressGroupMark=this._createMark(hH.mark.group,{skipBeforeLayouted:!1}),this._progressGroupMark}_initProgressGroupMarkStyle(){const e=this._progressGroupMark;e.setZIndex(this.layoutZIndex),e.created(),this.setMarkStyle(e,{clip:!0,x:0,y:0,path:()=>{var e;const t=[];return null===(e=this._rawData)||void 0===e||e.rawData.forEach(((e,i)=>{var n,r,s,a;if("vertical"===this._spec.direction){const i=fk(this.dataToPositionX(e),null===(r=null===(n=this._xAxisHelper)||void 0===n?void 0:n.getScale)||void 0===r?void 0:r.call(n,0))-this._spec.bandWidth/2,s=this._scaleY.range()[0];t.push(jS({x:i,y:0,height:s,width:this._spec.bandWidth,cornerRadius:this._spec.cornerRadius,fill:!0}))}else{const i=fk(this.dataToPositionY(e),null===(a=null===(s=this._yAxisHelper)||void 0===s?void 0:s.getScale)||void 0===a?void 0:a.call(s,0))-this._spec.bandWidth/2,n=this._scaleX.range()[1];t.push(jS({x:0,y:i,height:this._spec.bandWidth,width:n,cornerRadius:this._spec.cornerRadius,fill:!0}))}})),t}},"normal",Tw.Series),this._progressGroupMark.setInteractive(!1)}initAnimation(){var e,t,i,n;const r={direction:this.direction},s=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset;this._progressMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("linearProgress"))||void 0===i?void 0:i(r,s),FR("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(jR(null===(n=_n.getAnimationInKey("fadeInOut"))||void 0===n?void 0:n(),FR("track",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new cH(this),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark),this._trackMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._trackMark)}getActiveMarks(){return[this._progressMark]}}hH.type=Bt.linearProgress,hH.mark=yi;const dH=()=>{LD(),_n.registerAnimation("linearProgress",((e,t)=>({appear:lH(e,t),enter:{type:"grow"},disappear:aH(e)}))),kM(),_n.registerSeries(hH.type,hH)};class uH extends lD{needAxes(){return!1}_getDefaultSeriesSpec(e){var t,i;const n=super._getDefaultSeriesSpec(e);return Object.assign(Object.assign({},n),{direction:null!==(t=e.direction)&&void 0!==t?t:"horizontal",cornerRadius:null!==(i=e.cornerRadius)&&void 0!==i?i:0,bandWidth:e.bandWidth,progress:e.progress,track:e.track})}transformSpec(e){var t,i;if(super.transformSpec(e),e.axes||(e.axes=[]),"vertical"===e.direction){let i=null,n=null;(null!==(t=e.axes)&&void 0!==t?t:[]).forEach((e=>{const{orient:t}=e;"left"===t&&(i=e),"bottom"===t&&(n=e)})),i||(i={orient:"left",visible:!1},e.axes.push(i)),n||(n={orient:"bottom",visible:!1},e.axes.push(n)),P(n.type)&&(n.type="band"),P(i.type)&&(i.type="linear");const r=Qj(i,{min:0,max:1});P(i.min)&&(i.min=r.min),P(i.max)&&(i.max=r.max)}else{let t=null,n=null;(null!==(i=e.axes)&&void 0!==i?i:[]).forEach((e=>{const{orient:i}=e;"left"===i&&(t=e),"bottom"===i&&(n=e)})),t||(t={type:"band",orient:"left",visible:!1},e.axes.push(t)),n||(n={orient:"bottom",visible:!1},e.axes.push(n)),P(n.type)&&(n.type="linear"),P(t.type)&&(t.type="band");const r=Qj(n,{min:0,max:1});P(n.min)&&(n.min=r.min),P(n.max)&&(n.max=r.max)}}}class pH extends fD{constructor(){super(...arguments),this.transformerConstructor=uH,this.type="linearProgress",this.seriesType=Bt.linearProgress,this._canStack=!0}}pH.type="linearProgress",pH.seriesType=Bt.linearProgress,pH.view="singleDefault",pH.transformerConstructor=uH;function gH(e,t,i,n,r,s,a,o,l){e.setMarkStyle(t,{textAlign:e=>{if("vertical"===l())return"center";const t=r(e),n=s(e);if("middle"===i)return"center";if(t>=n){if("start"===i)return"left";if("end"===i)return"right";if("outside"===i)return"left"}else{if("start"===i)return"right";if("end"===i)return"left";if("outside"===i)return"right"}return"center"},textBaseline:e=>{if("horizontal"===l())return"middle";const t=a(e),n=o(e);if("middle"===i)return"middle";if(n>=t){if("start"===i)return"bottom";if("end"===i)return"top";if("outside"===i)return"bottom"}else{if("start"===i)return"top";if("end"===i)return"bottom";if("outside"===i)return"top"}return"middle"}}),e.setMarkStyle(t,{x:e=>{const t=l(),a=r(e),o=s(e);if("vertical"===t)return(a+o)/2;if("middle"===i)return(a+o)/2;if(a>=o){if("start"===i)return o+n;if("end"===i)return a-n;if("outside"===i)return a+n}else{if("start"===i)return o-n;if("end"===i)return a+n;if("outside"===i)return a-n}return(a+o)/2},y:e=>{const t=l(),r=a(e),s=o(e);if("horizontal"===t)return(r+s)/2;if("middle"===i)return(r+s)/2;if(r>=s){if("start"===i)return s+n;if("end"===i)return r-n;if("outside"===i)return r+n}else{if("start"===i)return s-n;if("end"===i)return r+n;if("outside"===i)return r-n}return(r+s)/2}},"normal",Tw.Series)}class fH extends SR{getDefaultTooltipPattern(e){return{visible:!0,activeType:e,title:{key:void 0,value:this.titleValueCallback,hasShape:!1},content:[{key:this.contentKeyCallback,value:e=>"horizontal"===this.series.getSpec().direction?e[this.series.getSpec().xField[0]]+"-"+e[this.series.getSpec().xField[1]]:e[this.series.getSpec().yField[0]]+"-"+e[this.series.getSpec().yField[1]],hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1}]}}}const mH=e=>({type:"growCenterIn",options:{direction:"horizontal"===e.direction?"x":"y"}}),vH={type:"fadeIn"},yH=e=>({type:"growCenterOut",options:{direction:"horizontal"===e.direction?"x":"y"}});function bH(e,t){return"fadeIn"===t?vH:mH(e)}class _H extends FD{_transformLabelSpec(e){var t;"bothEnd"!==(null===(t=e.label)||void 0===t?void 0:t.position)&&this._addMarkLabelSpec(e,"bar")}}class xH extends BD{constructor(){super(...arguments),this.type=Bt.rangeColumn,this._barMarkType="rect",this._barName=Bt.bar,this.transformerConstructor=_H,this._stack=!1}initMark(){var e,t,i,n,r,s,a,o,l;this._initBarBackgroundMark();const c=null===(e=this._spec.label)||void 0===e?void 0:e.position;this._barMark=this._createMark(xH.mark.bar,{morph:zR(this._spec,xH.mark.bar.name),defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:!0,customShape:null===(t=this._spec.bar)||void 0===t?void 0:t.customShape}),!1!==(null===(i=this._spec.label)||void 0===i?void 0:i.visible)&&"bothEnd"===c&&(!1!==(null===(r=null===(n=this._spec.label)||void 0===n?void 0:n.minLabel)||void 0===r?void 0:r.visible)&&(this._minLabelMark=this._createMark(xH.mark.minLabel,{markSpec:null===(s=this._spec.label)||void 0===s?void 0:s.minLabel})),!1!==(null===(o=null===(a=this._spec.label)||void 0===a?void 0:a.maxLabel)||void 0===o?void 0:o.visible)&&(this._maxLabelMark=this._createMark(xH.mark.maxLabel,{markSpec:null===(l=this._spec.label)||void 0===l?void 0:l.maxLabel})))}initMarkStyle(){var e,t,i,n,r,s,a,o,l,c;super.initMarkStyle();const h=this._minLabelMark,d=null===(e=this._spec.label)||void 0===e?void 0:e.minLabel;if(h){this.setMarkStyle(h,{fill:null!==(i=null===(t=null==d?void 0:d.style)||void 0===t?void 0:t.fill)&&void 0!==i?i:this.getColorAttribute(),text:e=>{const t="horizontal"===this._spec.direction?e[this._spec.xField[0]]:e[this._spec.yField[0]];return(null==d?void 0:d.formatMethod)?d.formatMethod(t,e):t}});gH(this,h,null!==(n=null==d?void 0:d.position)&&void 0!==n?n:"end",null!==(r=null==d?void 0:d.offset)&&void 0!==r?r:"vertical"===this._direction?-20:-25,(e=>this._barMark.getAttribute("x",e)),(e=>"vertical"===this._direction?this._barMark.getAttribute("x",e)+this._barMark.getAttribute("width",e):this._barMark.getAttribute("x1",e)),(e=>this._barMark.getAttribute("y",e)),(e=>"vertical"===this._direction?this._barMark.getAttribute("y1",e):this._barMark.getAttribute("y",e)+this._barMark.getAttribute("height",e)),(()=>this._direction))}const u=this._maxLabelMark,p=null===(s=this._spec.label)||void 0===s?void 0:s.maxLabel;if(u){this.setMarkStyle(u,{fill:null!==(o=null===(a=null==p?void 0:p.style)||void 0===a?void 0:a.fill)&&void 0!==o?o:this.getColorAttribute(),text:e=>{const t="horizontal"===this._spec.direction?e[this._spec.xField[1]]:e[this._spec.yField[1]];return(null==p?void 0:p.formatMethod)?p.formatMethod(t,e):t}});gH(this,u,null!==(l=null==p?void 0:p.position)&&void 0!==l?l:"start",null!==(c=null==p?void 0:p.offset)&&void 0!==c?c:"vertical"===this._direction?-20:-25,(e=>this._barMark.getAttribute("x",e)),(e=>"vertical"===this._direction?this._barMark.getAttribute("x",e)+this._barMark.getAttribute("width",e):this._barMark.getAttribute("x1",e)),(e=>this._barMark.getAttribute("y",e)),(e=>"vertical"===this._direction?this._barMark.getAttribute("y1",e):this._barMark.getAttribute("y",e)+this._barMark.getAttribute("height",e)),(()=>this._direction))}}initLabelMarkStyle(e){e&&(this.setMarkStyle(e,{text:e=>{let t,i;return"horizontal"===this._spec.direction?(t=e[this._spec.xField[0]],i=e[this._spec.xField[1]]):(t=e[this._spec.yField[0]],i=e[this._spec.yField[1]]),t+"-"+i},z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._labelMark=e)}_dataToPosX(e){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.xField[0]),{bandPosition:this._bandPosition})}_dataToPosX1(e){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.xField[1]),{bandPosition:this._bandPosition})}_dataToPosY(e){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.yField[0]),{bandPosition:this._bandPosition})}_dataToPosY1(e){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.yField[1]),{bandPosition:this._bandPosition})}initAnimation(){var e,t,i,n,r;const s=KR(this),a=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset;this._barMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("rangeColumn"))||void 0===i?void 0:i({direction:this.direction},a),FR("bar",this._spec,this._markAttributeContext),s)),this._minLabelMark&&this._minLabelMark.setAnimationConfig(jR(null===(n=_n.getAnimationInKey("fadeInOut"))||void 0===n?void 0:n(),FR("label",this._spec,this._markAttributeContext),s)),this._maxLabelMark&&this._maxLabelMark.setAnimationConfig(jR(null===(r=_n.getAnimationInKey("fadeInOut"))||void 0===r?void 0:r(),FR("label",this._spec,this._markAttributeContext),s))}initTooltip(){this._tooltipHelper=new fH(this),this._barMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._barMark),this._minLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._minLabelMark),this._maxLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._maxLabelMark),this._labelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._labelMark)}}xH.type=Bt.rangeColumn,xH.mark=Ai,xH.transformerConstructor=_H;const SH=()=>{LD(),LB(),_n.registerAnimation("rangeColumn",((e,t)=>({appear:bH(e,t),enter:mH(e),exit:yH(e),disappear:yH(e)}))),kM(),_n.registerSeries(xH.type,xH)};class wH extends lD{_getDefaultSeriesSpec(e){var t,i;const n=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{barGapInGroup:e.barGapInGroup,barBackground:e.barBackground,barMinHeight:e.barMinHeight});return n.bar=e.bar,"horizontal"===e.direction?n.xField=null!==(t=e.xField)&&void 0!==t?t:[e.minField,e.maxField]:n.yField=null!==(i=e.yField)&&void 0!==i?i:[e.minField,e.maxField],n}transformSpec(e){super.transformSpec(e),dw(e)}}class CH extends fD{constructor(){super(...arguments),this.transformerConstructor=wH,this.type="rangeColumn",this.seriesType=Bt.rangeColumn}}CH.type="rangeColumn",CH.seriesType=Bt.rangeColumn,CH.view="singleDefault",CH.transformerConstructor=wH;class kH extends xH{constructor(){super(...arguments),this.type=Bt.rangeColumn3d,this._barMarkType="rect3d",this._barName=Bt.bar3d}}kH.type=Bt.rangeColumn3d,kH.mark=Ei;class AH extends lD{_getDefaultSeriesSpec(e){var t,i;const n=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{barGapInGroup:e.barGapInGroup});return n.bar3d=e.bar3d,"horizontal"===e.direction?n.xField=null!==(t=e.xField)&&void 0!==t?t:[e.minField,e.maxField]:n.yField=null!==(i=e.yField)&&void 0!==i?i:[e.minField,e.maxField],n}}class EH extends fD{constructor(){super(...arguments),this.transformerConstructor=AH,this.type="rangeColumn3d",this.seriesType=Bt.rangeColumn3d}}EH.type="rangeColumn3d",EH.seriesType=Bt.rangeColumn3d,EH.view="singleDefault",EH.transformerConstructor=AH;const TH=(e,t)=>{const i=(e-t[0])/(t[1]-t[0]||1);return Math.max(0,Math.min(1,i))},OH=e=>{const t=e.mark.elements.filter((e=>e.diffState===Hr.update)),i=U(t.map((e=>{var t;return null===(t=null==e?void 0:e.data)||void 0===t?void 0:t[0].depth})));return t.filter((e=>{var t;return(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t[0].depth)===i}))},PH=(e,t,i)=>ay(e)?[t,i]:[U(e.map((e=>1*e.getGraphicAttribute("startAngle",!1)))),V(e.map((e=>1*e.getGraphicAttribute("endAngle",!1))))],MH=e=>({channel:{startAngle:{from:(t,i)=>{const{startAngle:n,endAngle:r}=e.animationInfo(),s=OH(i),a=PH(s,n,r);return TH(t.startAngle,a)*(r-n)+n},to:e=>e.startAngle},endAngle:{from:(t,i)=>{const{startAngle:n,endAngle:r}=e.animationInfo(),s=OH(i),a=PH(s,n,r);return TH(t.endAngle,a)*(r-n)+n},to:e=>e.endAngle},outerRadius:{from:e=>e.innerRadius,to:e=>e.outerRadius},innerRadius:{from:e=>e.innerRadius,to:e=>e.innerRadius}}}),IH=e=>[U(e.map((e=>1*e.getGraphicAttribute("startAngle",!1)))),V(e.map((e=>1*e.getGraphicAttribute("endAngle",!1))))],RH=e=>({channel:{startAngle:{from:(e,t)=>t.getGraphicAttribute("startAngle",!1),to:(t,i)=>{const{startAngle:n,endAngle:r}=e.animationInfo(),s=OH(i),a=IH(s);return TH(i.getGraphicAttribute("startAngle",!1),a)*(r-n)+n}},endAngle:{from:(e,t)=>t.getGraphicAttribute("endAngle",!1),to:(t,i)=>{const{startAngle:n,endAngle:r}=e.animationInfo(),s=OH(i),a=IH(s);return TH(i.getGraphicAttribute("endAngle",!1),a)*(r-n)+n}},outerRadius:{from:(e,t)=>t.getGraphicAttribute("outerRadius",!1),to:()=>e.animationInfo().innerRadius},innerRadius:{from:(e,t)=>t.getGraphicAttribute("innerRadius",!1),to:()=>e.animationInfo().innerRadius}}}),DH=(e,t)=>{switch(t){case"fadeIn":return{type:"fadeIn"};case"growAngle":return{type:"growAngleIn"};default:return{type:"growRadiusIn"}}},LH=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;const n=(null==i?void 0:i.maxDepth)>=0;return e.forEach((e=>{(!n||e.depth<=i.maxDepth)&&(t.push((null==i?void 0:i.callback)?i.callback(e):e),e.children&&(n&&e.depth===i.maxDepth?(e.children=null,e.isLeaf=!0):LH(e.children,t,i)))})),t},jH=function(e){if(!e)return[];const t=[];return LH(e,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),t};function FH(e,t,i,n,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{x0:"x0",x1:"x1",y0:"y0",y1:"y1"};const a=e.children;let o,l=-1;const c=a.length,h=e.value&&(n-t)/e.value;for(;++l<c;)o=a[l],o[s.y0]=i,o[s.y1]=r,o[s.x0]=t,o[s.x1]=t+=o.value*h}const BH=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,a=0,o=null!=n?n:-1,l=i;return e.forEach(((e,n)=>{var c,h;const d={flattenIndex:++o,key:s?s(e):"".concat(null!==(c=null==r?void 0:r.key)&&void 0!==c?c:"","-").concat(n),maxDepth:-1,depth:i,index:n,value:e.value,isLeaf:!0,datum:r?r.datum.concat(e):[e],parentKey:null==r?void 0:r.key};if(null===(h=e.children)||void 0===h?void 0:h.length){d.children=[],d.isLeaf=!1;const t=BH(e.children,d.children,i+1,o,d,s);d.value=P(e.value)?t.sum:Math.max(t.sum,d.value),o=t.flattenIndex,l=Math.max(t.maxDepth,l)}else d.isLeaf=!0,d.value=P(e.value)?0:e.value;a+=Math.abs(d.value),t.push(d)})),{sum:a,maxDepth:l,flattenIndex:o}},NH=(e,t,i,n)=>{let r=n;return e.forEach(((e,n)=>{var s;r=t(e,n,i,r),(null===(s=e.children)||void 0===s?void 0:s.length)&&(r=NH(e.children,t,e,r))})),n},zH=(e,t,i,n)=>{let r=n;return e.forEach(((e,n)=>{var s;(null===(s=e.children)||void 0===s?void 0:s.length)&&(r=zH(e.children,t,e,r)),r=t(e,n,i,r)})),r},HH={x0:"startAngle",x1:"endAngle",y0:"innerRadius",y1:"outerRadius"};class VH{constructor(e){this._layoutNode=e=>{if(e.maxDepth=this._maxDepth,e.children){const t=this._parsedInnerRadius[e.depth+1],i=this._parsedOutterRadius[e.depth+1];FH(e,e.startAngle,Math.min(t,i),e.endAngle,Math.max(t,i),HH);const n=v(this.options.label)?this.options.label[e.depth+1]:this.options.label;e.children.forEach((e=>{if(e.x=this._parsedCenter[0],e.y=this._parsedCenter[1],n)return this._layoutLabel(e,m(n)?{align:"center",rotate:"radial"}:n)}))}},this.options=e?Object.assign({},VH.defaultOpionts,e):Object.assign({},VH.defaultOpionts);const t=this.options.nodeKey,i=Q(t)?t:t?Tm(t):null;this._getNodeKey=i,this._maxDepth=-1}_parseRadius(e,t){const i=e.x0+Zy(this.options.center[0],e.width),n=e.y0+Zy(this.options.center[1],e.height),r=Math.min(e.width/2,e.height/2),s=this.options.innerRadius,a=this.options.outerRadius,o=v(s),l=o?s.map((e=>Zy(e,r))):Zy(s,r),c=v(a),h=this.options.gapRadius,d=c?a.map((e=>Zy(e,r))):Zy(a,r),u=dC(0,t+1);if(o)this._parsedInnerRadius=u.map(((e,t)=>{const i=l[t];return P(i)?r:i})),this._parsedOutterRadius=u.map(((e,i)=>{var n;return c?d[i]:i<t?this._parsedInnerRadius[i+1]-(v(h)?null!==(n=h[i])&&void 0!==n?n:0:h):d}));else if(c)this._parsedOutterRadius=u.map(((e,t)=>P(d[t])?r:d[t])),this._parsedInnerRadius=u.map(((e,t)=>{var i;return 0===t?l:this._parsedOutterRadius[t-1]-(v(h)?null!==(i=h[t])&&void 0!==i?i:0:h)}));else{const e=Zy(s,r),i=(d-e)/(t+1);this._parsedInnerRadius=u.map(((t,n)=>e+n*i)),this._parsedOutterRadius=u.map(((e,t)=>{var n;return this._parsedInnerRadius[t]+i-(v(h)?null!==(n=h[t])&&void 0!==n?n:0:h)}))}this._parsedCenter=[i,n],this._maxRadius=r}layout(e,t){const i="width"in t?{x0:0,x1:t.width,y0:0,y1:t.height,width:t.width,height:t.height}:{x0:Math.min(t.x0,t.x1),x1:Math.max(t.x0,t.x1),y0:Math.min(t.y0,t.y1),y1:Math.max(t.y0,t.y1),width:Math.abs(t.x1-t.x0),height:Math.abs(t.y1-t.y0)};if(!e||!e.length)return[];const n=[],r=BH(e,n,0,-1,null,this._getNodeKey);return this._parseRadius(i,r.maxDepth),this._maxDepth=r.maxDepth,this._layout(n,{flattenIndex:-1,maxDepth:-1,key:"-1",depth:-1,index:-1,value:r.sum,datum:null,children:n,startAngle:this.options.startAngle,endAngle:this.options.endAngle}),n}_layout(e,t){this._layoutNode(t),e.forEach((e=>{var t;(null===(t=null==e?void 0:e.children)||void 0===t?void 0:t.length)?this._layout(e.children,e):this._layoutNode(e)}))}_layoutLabel(e,t){var i;const n=(e.startAngle+e.endAngle)/2,r=("start"===t.align?e.innerRadius:"end"===t.align?e.outerRadius:(e.innerRadius+e.outerRadius)/2)+(null!==(i=t.offset)&&void 0!==i?i:0),s=nl({x:this._parsedCenter[0],y:this._parsedCenter[1]},r,n);if(e.label={x:s.x,y:s.y,textBaseline:"middle"},"tangential"===t.rotate)e.label.angle=n-Math.PI/2,e.label.textAlign="center",e.label.maxLineWidth=Math.abs(e.endAngle-e.startAngle)*r;else{const i=n%(2*Math.PI),r=i<0?i+2*Math.PI:i;r>Math.PI/2&&r<1.5*Math.PI?(e.label.angle=r+Math.PI,e.label.textAlign="start"===t.align?"end":"end"===t.align?"start":"center"):(e.label.angle=r,e.label.textAlign=t.align),e.label.maxLineWidth=e.isLeaf?void 0:Math.abs(e.outerRadius-e.innerRadius)}}}VH.defaultOpionts={startAngle:Math.PI/2,endAngle:-3*Math.PI/2,center:["50%","50%"],gapRadius:0,innerRadius:0,outerRadius:"70%"};const UH=(e,t)=>{if(!e)return e;const i=t(),{width:n,height:r}=i;return new VH(i).layout(e,{width:n,height:r})};class WH extends SR{constructor(){super(...arguments),this.contentKeyCallback=e=>null==e?void 0:e[this.series.getDimensionField()[0]]}}const GH=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"key",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";for(let r=0;r<e.length;r++){const s=e[r];if(s[i]===t)return s;if(s[n]){const e=GH(s[n],t,i,n);if(e)return e}}return null},KH=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"key",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";for(let r=0;r<e.length;r++){const s=e[r];if(s[n])for(let e=0;e<s[n].length;e++){const r=s[n][e];if(r[i]===t)return s;const a=KH([r],t,i,n);if(a)return a}}return null};var YH;!function(e){e.DrillDown="drillDown",e.DrillUp="drillUp"}(YH||(YH={}));const XH=(e,t)=>{const i=t.info(),n=t.keyField(),r=null==i?void 0:i.key;if(P(r))return e;if(i.type===YH.DrillDown){return z(GH(e,r,n,"children"))}if(i.type===YH.DrillUp){const t=KH(e,r,n,"children");if(t)return z(t)}return e};class qH{_getDrillTriggerEvent(e){var t;const{mode:i}=this._drillParams;return null===(t=gF(i))||void 0===t?void 0:t[e]}_hideTooltip(){const e=this.getChart().getAllComponents().find((e=>e.type===r.tooltip));e&&e.hideTooltip()}initDrillable(e){this._drillParams=e}initDrillableData(e){const{getRawData:t}=this._drillParams;uo(e,"drillFilter",XH),t().transform({type:"drillFilter",options:{info:()=>this._drillInfo,keyField:()=>this._drillParams.drillField()}})}bindDrillEvent(){const{event:e,getRawData:t,drillField:i}=this._drillParams,n=i();this._getDrillTriggerEvent("start")&&e.on(this._getDrillTriggerEvent("start"),(e=>{var i,r,s;if(P(e.datum)||P(null===(i=e.datum)||void 0===i?void 0:i[n]))return void this.drillUp();this._hideTooltip();const a=e.datum[n],o=null!==(s=null===(r=this._drillInfo)||void 0===r?void 0:r.path)&&void 0!==s?s:[],l=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"key",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";const r=[],s=(e,a)=>{for(const o of e){if(o[i]===t)return r.push(...a,o[i].toString()),!0;if(o[n]){const e=s(o[n],[...a,o[i]]);if(!0===e)return e}}return!1};return s(e,[]),r}(t().rawData,a,n,"children");o[o.length-1]===l[l.length-1]?this.drillUp():this.drillDown(l)}))}drillDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{getRawData:t,event:i}=this._drillParams;if(!v(e)||ay(e))return e;const n=e[e.length-1];return this._drillInfo={key:n,path:e,type:YH.DrillDown},t().reRunAllTransform(),i.emit(Ir.drill,{value:{path:e,type:YH.DrillDown},model:this}),e}drillUp(){var e,t;const{getRawData:i,event:n}=this._drillParams,r=null!==(t=null===(e=this._drillInfo)||void 0===e?void 0:e.path)&&void 0!==t?t:[];if(!v(r)||ay(r))return r;const s=r.pop();return this._drillInfo={key:s,path:r,type:YH.DrillUp},i().reRunAllTransform(),n.emit(Ir.drill,{value:{path:r,type:YH.DrillUp},model:this}),r}}class ZH extends EF{constructor(){super(...arguments),this.type=Bt.sunburst}setCategoryField(e){return this._categoryField=e,this._categoryField}getCategoryField(){return this._categoryField}setValueField(e){return this._valueField=e,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!==(e=this._spec.seriesField)&&void 0!==e?e:OR),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e;return null!==(e=this._spec.drillField)&&void 0!==e?e:kw},getRawData:()=>this.getRawData()}),this._startAngle=el(this._spec.startAngle),this._endAngle=el(this._spec.endAngle),this._centerX=this._spec.centerX,this._centerY=this._spec.centerY,this._offsetX=this._spec.offsetX,this._offsetY=this._spec.offsetY,this.__innerRadius=this._spec.innerRadius,this.__outerRadius=this._spec.outerRadius,this._gap=this._spec.gap,this._labelLayout=this._spec.labelLayout,this._sunburst=this._spec.sunburst,this._label=this._spec.label,this._labelAutoVisible=this._spec.labelAutoVisible}initData(){super.initData();const e=this.getRawData();e&&(this._spec.drill&&this.initDrillableData(this._dataSet),uo(this._dataSet,"sunburstLayout",UH),uo(this._dataSet,"flatten",jH),e.transform({type:"sunburstLayout",options:()=>{const{innerRadius:e,outerRadius:t,gap:i,label:n}=this._computeLevel();return{nodeKey:this._categoryField,width:this.getLayoutRect().width,height:this.getLayoutRect().height,center:[x(this._centerX)?this._centerX:this.getLayoutRect().width/2,x(this._centerY)?this._centerY:this.getLayoutRect().height/2],startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:e,outerRadius:t,gapRadius:i,label:n}}}),e.transform({type:"flatten",options:{callback:e=>{if(e.datum){const t=e.datum[e.depth];return Object.assign(Object.assign({},e),t)}return e}}}))}getStatisticFields(){return super.getStatisticFields().concat([{key:this._categoryField,operations:["values"]},{key:this._valueField,operations:["max","min"]},{key:TR,operations:["max","min","values"]},{key:OR,operations:["values"]}])}_addDataIndexAndKey(){const e=this.getRawData();P(null==e?void 0:e.dataSet)||(uo(e.dataSet,"addVChartProperty",yR),e.transform({type:"addVChartProperty",options:{beforeCall:RR.bind(this),call:DR}}))}initMark(){this._initArcMark(),this._initLabelMark()}initMarkStyle(){this._initArcMarkStyle(),this._initLabelMarkStyle()}_initArcMark(){var e;if(!1===this._sunburst.visible)return;const t=this._createMark(ZH.mark.sunburst,{isSeriesMark:!0,customShape:null===(e=this._spec.sunburst)||void 0===e?void 0:e.customShape});this._sunburstMark=t,this._trigger.registerMark(this._sunburstMark)}_initArcMarkStyle(){P(this._sunburstMark)||this.setMarkStyle(this._sunburstMark,{x:e=>e.x+(x(this._offsetX)?this._offsetX:0),y:e=>e.y+(x(this._offsetY)?this._offsetY:0),outerRadius:e=>e.outerRadius,innerRadius:e=>e.innerRadius,startAngle:e=>e.startAngle,endAngle:e=>e.endAngle,fill:this.getColorAttribute()},fw.STATE_NORMAL,Tw.Series)}_initLabelMark(){if(!0!==this._label.visible)return;const e=this._createMark(ZH.mark.label,{isSeriesMark:!1});this._labelMark=e,this._trigger.registerMark(e)}_initLabelMarkStyle(){P(this._labelMark)||this.setMarkStyle(this._labelMark,{visible:e=>{var t;const i=this._labelAutoVisible;return D(i)&&!0===i.enable?(e.endAngle-e.startAngle)*(e.outerRadius-e.innerRadius)>(null!==(t=null==i?void 0:i.circumference)&&void 0!==t?t:10):this._spec.label.visible},x:e=>{var t;return(null===(t=e.label)||void 0===t?void 0:t.x)+(x(this._offsetX)?this._offsetX:0)},y:e=>{var t;return(null===(t=e.label)||void 0===t?void 0:t.y)+(x(this._offsetY)?this._offsetY:0)},textBaseline:e=>{var t;return null===(t=e.label)||void 0===t?void 0:t.textBaseline},textAlign:e=>{var t;return null===(t=e.label)||void 0===t?void 0:t.textAlign},angle:e=>{var t,i;return null!==(i=null===(t=e.label)||void 0===t?void 0:t.angle)&&void 0!==i?i:0},fontSize:10,text:e=>e.name},fw.STATE_NORMAL,Tw.Series)}initTooltip(){this._tooltipHelper=new WH(this),this._sunburstMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._sunburstMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var e,t;const i={animationInfo:()=>({innerRadius:this._computeRadius(z(this.__innerRadius))[0],outerRadius:this._computeRadius(z(this.__outerRadius))[0],startAngle:z(this._startAngle)[0],endAngle:z(this._endAngle)[0]})},n=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset;this.getMarksInType("arc").forEach((e=>{var t;e.setAnimationConfig(jR(null===(t=_n.getAnimationInKey("sunburst"))||void 0===t?void 0:t(i,n),FR(e.name,this._spec,this._markAttributeContext)))})),this.getMarksInType("text").forEach((e=>{var t;e.setAnimationConfig(jR(null===(t=_n.getAnimationInKey("fadeInOut"))||void 0===t?void 0:t(),FR(e.name,this._spec,this._markAttributeContext)))}))}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(e){super.onLayoutEnd(e),this._rawData.reRunAllTransform()}_computeRadius(e){if(v(e))return e.map((e=>{const{width:t,height:i}=this.getRegion().getLayoutRect();return Math.min(t/2,i/2)*e}));const{width:t,height:i}=this.getRegion().getLayoutRect();return Math.min(t/2,i/2)*e}_computeLevel(){return{innerRadius:this._computeRadius(this.__innerRadius),outerRadius:this._computeRadius(this.__outerRadius),gap:this._gap,label:this._labelLayout}}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(e,t){}getActiveMarks(){return[this._sunburstMark]}}ZH.type=Bt.sunburst,ZH.mark=ki,$R(ZH,qH);const QH=()=>{_n.registerSeries(ZH.type,ZH),BF(),LB(),kM(),_n.registerAnimation("sunburst",((e,t)=>({appear:DH(0,t),enter:MH(e),exit:RH(e),disappear:RH(e)})))};class $H extends oD{_getDefaultSeriesSpec(e){const t=x(e.startAngle)?e.startAngle:rt,i=x(e.endAngle)?e.endAngle:t+tl(2*Math.PI),n=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,seriesField:e.seriesField,centerX:e.centerX,centerY:e.centerY,offsetX:e.offsetX,offsetY:e.offsetY,startAngle:t,endAngle:i,innerRadius:e.innerRadius,outerRadius:e.outerRadius,gap:e.gap,labelLayout:e.labelLayout,label:e.label,labelAutoVisible:e.labelAutoVisible,drill:e.drill,drillField:e.drillField}),r=Bt.sunburst;return n.type=r,n[r]=e[r],n}transformSpec(e){super.transformSpec(e);const t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))})):e.series=[t]}}class JH extends fD{constructor(){super(...arguments),this.transformerConstructor=$H,this.type="sunburst",this.seriesType=Bt.sunburst}}JH.type="sunburst",JH.seriesType=Bt.sunburst,JH.view="singleDefault",JH.transformerConstructor=$H;const eV=4294967296;function tV(e,t){let i=0;const n=G(Array.from(e),t),r=n.length;let s,a,o=[];for(;i<r;)s=n[i],a&&rV(a,s)?++i:(o=iV(o,s),a=aV(o),i=0);return a}function iV(e,t){let i,n;if(sV(t,e))return[t];for(i=0;i<e.length;++i)if(nV(t,e[i])&&sV(oV(e[i],t),e))return[e[i],t];for(i=0;i<e.length-1;++i)for(n=i+1;n<e.length;++n)if(nV(oV(e[i],e[n]),t)&&nV(oV(e[i],t),e[n])&&nV(oV(e[n],t),e[i])&&sV(lV(e[i],e[n],t),e))return[e[i],e[n],t];u.getInstance().error("error when packEncloseRandom")}function nV(e,t){const i=e.radius-t.radius,n=t.x-e.x,r=t.y-e.y;return i<0||i*i<n*n+r*r}function rV(e,t){const i=e.radius-t.radius+1e-9*Math.max(e.radius,t.radius,1),n=t.x-e.x,r=t.y-e.y;return i>0&&i*i>n*n+r*r}function sV(e,t){for(let i=0;i<t.length;++i)if(!rV(e,t[i]))return!1;return!0}function aV(e){switch(e.length){case 1:return function(e){return{x:e.x,y:e.y,radius:e.radius}}(e[0]);case 2:return oV(e[0],e[1]);case 3:return lV(e[0],e[1],e[2])}}function oV(e,t){const i=e.x,n=e.y,r=e.radius,s=t.x,a=t.y,o=t.radius,l=s-i,c=a-n,h=o-r,d=Math.sqrt(l*l+c*c);return{x:(i+s+l/d*h)/2,y:(n+a+c/d*h)/2,radius:(d+r+o)/2}}function lV(e,t,i){const n=e.x,r=e.y,s=e.radius,a=t.x,o=t.y,l=t.radius,c=i.x,h=i.y,d=i.radius,u=n-a,p=n-c,g=r-o,f=r-h,m=l-s,v=d-s,y=n*n+r*r-s*s,b=y-a*a-o*o+l*l,_=y-c*c-h*h+d*d,x=p*g-u*f,S=(g*_-f*b)/(2*x)-n,w=(f*m-g*v)/x,C=(p*b-u*_)/(2*x)-r,k=(u*v-p*m)/x,A=w*w+k*k-1,E=2*(s+S*w+C*k),T=S*S+C*C-s*s,O=-(Math.abs(A)>1e-6?(E+Math.sqrt(E*E-4*A*T))/(2*A):T/E);return{x:n+S+w*O,y:r+C+k*O,radius:O}}function cV(e,t,i){const n=e.x-t.x;let r,s;const a=e.y-t.y;let o,l;const c=n*n+a*a;c?(s=t.radius+i.radius,s*=s,l=e.radius+i.radius,l*=l,s>l?(r=(c+l-s)/(2*c),o=Math.sqrt(Math.max(0,l/c-r*r)),i.x=e.x-r*n-o*a,i.y=e.y-r*a+o*n):(r=(c+s-l)/(2*c),o=Math.sqrt(Math.max(0,s/c-r*r)),i.x=t.x+r*n-o*a,i.y=t.y+r*a+o*n)):(i.x=t.x+i.radius,i.y=t.y)}function hV(e,t){const i=e.radius+t.radius-1e-6,n=t.x-e.x,r=t.y-e.y;return i>0&&i*i>n*n+r*r}function dV(e){const t=e._,i=e.next._,n=t.radius+i.radius,r=(t.x*i.radius+i.x*t.radius)/n,s=(t.y*i.radius+i.y*t.radius)/n;return r*r+s*s}function uV(e){return{_:e,next:null,prev:null}}function pV(e,t){const i=(e=z(e)).length;if(!i)return 0;let n=e[0];if(n.x=0,n.y=0,1===i)return n.radius;const r=e[1];if(n.x=-r.radius,r.x=n.radius,r.y=0,2===i)return n.radius+r.radius;let s=e[2];cV(r,n,s);let a,o,l,c,h,d,u,p=uV(n),g=uV(r),f=uV(s);p.next=g,f.prev=g,g.next=f,p.prev=f,f.next=p,g.prev=p;for(let v=3;v<i;++v){u=!1,s=e[v],cV(p._,g._,s),f=uV(s),a=g.next,o=p.prev,l=g._.radius,c=p._.radius;do{if(l<=c){if(hV(a._,f._)){g=a,p.next=g,g.prev=p,--v,u=!0;break}l+=a._.radius,a=a.next}else{if(hV(o._,f._)){p=o,p.next=g,g.prev=p,--v,u=!0;break}c+=o._.radius,o=o.prev}}while(a!==o.next);if(!u){for(f.prev=p,f.next=g,p.next=g.prev=g=f,h=dV(p),f=f.next;f!==g;)d=dV(f),d<h&&(p=f,h=d),f=f.next;g=p.next}}const m=[g._];for(f=g.next;f!==g;)m.push(f._),f=f.next;s=tV(m,t);for(let v=0;v<i;++v)n=e[v],n.x-=s.x,n.y-=s.y;return s.radius}function gV(e){return function(t){t.children||(t.radius=Math.max(0,+e(t)||0))}}function fV(e,t,i){return function(n){const r=null==n?void 0:n.children;if(r){let s;const a=r.length,o=e(n)*t||0;if(o)for(s=0;s<a;++s)r[s].radius+=o;const l=pV(r,i);if(o)for(s=0;s<a;++s)r[s].radius-=o;n.radius=l+o}}}function mV(e,t){return function(i,n,r){i.radius*=e,i.maxDepth=t,r&&(i.x=r.x+e*i.x,i.y=r.y+e*i.y)}}class vV{constructor(e){this.options=e;const t=null==e?void 0:e.nodeKey,i=Q(t)?t:t?Tm(t):null;this._getNodeKey=i,this._getPadding=l(null==e?void 0:e.padding)?t=>e.padding:v(null==e?void 0:e.padding)?t=>{var i;return null!==(i=e.padding[t.depth+1])&&void 0!==i?i:0}:()=>0,this._maxDepth=-1}layout(e,t){var i;const n="width"in t?{x0:0,x1:t.width,y0:0,y1:t.height,width:t.width,height:t.height}:{x0:Math.min(t.x0,t.x1),x1:Math.max(t.x0,t.x1),y0:Math.min(t.y0,t.y1),y1:Math.max(t.y0,t.y1),width:Math.abs(t.x1-t.x0),height:Math.abs(t.y1-t.y0)};if(!e||!e.length)return[];const r=[],s=BH(e,r,0,-1,null,this._getNodeKey);this._maxDepth=s.maxDepth;const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return()=>(e=(1664525*e+1013904223)%eV)/eV}(),o={flattenIndex:-1,maxDepth:-1,key:"root",depth:-1,index:-1,value:s.sum,datum:null,children:r,x:n.x0+n.width/2,y:n.y0+n.height/2},{nodeSort:l,setRadius:c,padding:h,includeRoot:d}=null!==(i=this.options)&&void 0!==i?i:{};if(!1!==l){const e=Q(l)?this.options.nodeKey:vV.defaultOpionts.nodeSort;NH([o],(t=>{t.children&&t.children.length&&t.children.sort(e)}))}if(c)NH([o],gV(c)),zH([o],fV(this._getPadding,.5,a)),NH([o],mV(1,this._maxDepth));else{const e=Math.min(n.width,n.height);NH([o],gV(vV.defaultOpionts.setRadius)),zH([o],fV(Pm,1,a)),h&&zH([o],fV(this._getPadding,o.radius/e,a)),NH([o],mV(e/(2*o.radius),this._maxDepth))}return d?[o]:r}}vV.defaultOpionts={setRadius:e=>Math.sqrt(e.value),padding:0,nodeSort:(e,t)=>t.value-e.value};const yV=(e,t)=>{if(!e)return e;const i=t(),{width:n,height:r}=i;return 0===n||0===r?e:new vV(i).layout(e,{width:n,height:r})};class bV extends SR{constructor(){super(...arguments),this.contentKeyCallback=e=>null==e?void 0:e[this.series.getDimensionField()[0]]}}const _V=e=>"fadeIn"===e?{type:"fadeIn"}:{type:"growRadiusIn"};class xV extends YR{constructor(){super(...arguments),this.type=Bt.circlePacking}setCategoryField(e){return this._categoryField=e,this._categoryField}getCategoryField(){return this._categoryField}setValueField(e){return this._valueField=e,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!==(e=this._spec.seriesField)&&void 0!==e?e:OR),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e;return null!==(e=this._spec.drillField)&&void 0!==e?e:kw},getRawData:()=>this.getRawData()}),this._circlePacking=this._spec.circlePacking,this._label=this._spec.label,this._layoutPadding=this._spec.layoutPadding}initData(){super.initData();const e=this.getRawData();P(e)||(this._spec.drill&&this.initDrillableData(this._dataSet),uo(this._dataSet,"circlePackingLayout",yV),uo(this._dataSet,"flatten",jH),e.transform({type:"circlePackingLayout",options:()=>({nodeKey:this._categoryField,padding:this._layoutPadding,includeRoot:!1,width:this.getLayoutRect().width||1,height:this.getLayoutRect().height||1})}),e.transform({type:"flatten",options:{callback:e=>{if(e.datum){const t=e.datum[e.depth];return Object.assign(Object.assign({},e),t)}return e}}}))}_addDataIndexAndKey(){const e=this.getRawData();P(null==e?void 0:e.dataSet)||(uo(e.dataSet,"addVChartProperty",yR),e.transform({type:"addVChartProperty",options:{beforeCall:RR.bind(this),call:DR}}))}initMark(){this._initCirclePackingMark(),this._initLabelMark()}initMarkStyle(){this._initCirclePackingMarkStyle(),this._initLabelMarkStyle()}_initCirclePackingMark(){var e,t;if(!1===(null===(e=this._circlePacking)||void 0===e?void 0:e.visible))return;const i=this._createMark(xV.mark.circlePacking,{isSeriesMark:!0,customShape:null===(t=this._spec.circlePacking)||void 0===t?void 0:t.customShape});this._circlePackingMark=i,this._trigger.registerMark(i)}_initCirclePackingMarkStyle(){P(this._circlePackingMark)||this.setMarkStyle(this._circlePackingMark,{x:e=>e.x,y:e=>e.y,outerRadius:e=>e.radius,innerRadius:0,startAngle:0,endAngle:2*Math.PI,fill:this.getColorAttribute(),zIndex:e=>e.depth},fw.STATE_NORMAL,Tw.Series)}_initLabelMark(){var e;if(!1===(null===(e=this._label)||void 0===e?void 0:e.visible))return;const t=this._createMark(xV.mark.label,{isSeriesMark:!1});this._labelMark=t,this._trigger.registerMark(t)}_initLabelMarkStyle(){P(this._labelMark)||this.setMarkStyle(this._labelMark,{x:e=>e.x,y:e=>e.y,text:e=>e.key,cursor:"pointer"},fw.STATE_NORMAL,Tw.Series)}getStatisticFields(){return super.getStatisticFields().concat([{key:this._categoryField,operations:["values"]},{key:this._valueField,operations:["max","min"]},{key:TR,operations:["max","min","values"]},{key:OR,operations:["values"]}])}initTooltip(){this._tooltipHelper=new bV(this),this._tooltipHelper.updateTooltipSpec(),this._circlePackingMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._circlePackingMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var e;const t=null===(e=this._spec.animationAppear)||void 0===e?void 0:e.preset;this.getMarksInType("arc").forEach((e=>{var i;e.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("circlePacking"))||void 0===i?void 0:i(void 0,t),FR(e.name,this._spec,this._markAttributeContext)))})),this.getMarksInType("text").forEach((e=>{var t;e.setAnimationConfig(jR(null===(t=_n.getAnimationInKey("scaleInOut"))||void 0===t?void 0:t(),FR(e.name,this._spec,this._markAttributeContext)))}))}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(e){super.onLayoutEnd(e),this._rawData.reRunAllTransform()}_noAnimationDataKey(e,t){}getActiveMarks(){return[this._circlePackingMark]}}xV.type=Bt.circlePacking,xV.mark=Ti,$R(xV,qH);const SV=()=>{_n.registerSeries(xV.type,xV),BF(),LB(),CM(),_n.registerAnimation("circlePacking",((e,t)=>({appear:_V(t),enter:{type:"growRadiusIn"},exit:{type:"growRadiusOut"},disappear:{type:"growRadiusOut"}})))};class wV extends oD{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,seriesField:e.seriesField,layoutPadding:e.layoutPadding,label:e.label,circlePacking:e.circlePacking,drill:e.drill,drillField:e.drillField}),i=Bt.circlePacking;return t.type=i,t[i]=e[i],t}transformSpec(e){super.transformSpec(e);const t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))})):e.series=[t]}}class CV extends fD{constructor(){super(...arguments),this.transformerConstructor=wV,this.type="circlePacking",this.seriesType=Bt.circlePacking}}CV.type="circlePacking",CV.seriesType=Bt.circlePacking,CV.view="singleDefault",CV.transformerConstructor=wV;function kV(e,t,i,n,r){const s=e.children;let a,o=-1;const l=s.length,c=e.value&&(r-i)/e.value;for(;++o<l;)a=s[o],a.x0=t,a.x1=n,a.y0=i,i+=a.value*c,a.y1=i}const AV=e=>(t,i,n,r,s)=>{!function(e,t,i,n,r,s){const a=[],o=t.children;let l,c,h=0,d=0;const u=o.length;let p,g,f,m,v,y,b,_,x,S=t.value;for(;h<u;){p=r-i,g=s-n;do{f=o[d++].value}while(!f&&d<u);for(m=f,v=f,_=Math.max(g/p,p/g)/(S*e),x=f*f*_,b=Math.max(v/x,x/m);d<u;++d){if(c=o[d].value,f+=c,c<m&&(m=c),c>v&&(v=c),x=f*f*_,y=Math.max(v/x,x/m),y>b){f-=c;break}b=y}l=Object.assign({},t,{value:f,children:o.slice(h,d)}),a.push(l),p<g?FH(l,i,n,r,S?n+=g*f/S:s):kV(l,i,n,S?i+=p*f/S:r,s),S-=f,h=d}}(e,t,i,n,r,s)},EV={binary:function(e,t,i,n,r){const s=e.children,a=s.length;let o=0;const l=new Array(a+1);l[0]=0;for(let h=0;h<a;++h)o+=s[h].value,l[h+1]=o;const c=(e,t,i,n,r,a,o)=>{if(e>=t-1){const t=s[e];return t.x0=n,t.y0=r,t.x1=a,void(t.y1=o)}const h=l[e],d=i/2+h;let u=e+1,p=t-1;for(;u<p;){const e=u+p>>>1;l[e]<d?u=e+1:p=e}d-l[u-1]<l[u]-d&&e+1<u&&--u;const g=l[u]-h,f=i-g;if(a-n>o-r){const s=i?(n*f+a*g)/i:a;c(e,u,g,n,r,s,o),c(u,t,f,s,r,a,o)}else{const s=i?(r*f+o*g)/i:o;c(e,u,g,n,r,a,s),c(u,t,f,n,s,a,o)}};c(0,a,e.value,t,i,n,r)},dice:FH,slice:kV,sliceDice:function(e,t,i,n,r){(e.depth%2==1?kV:FH)(e,t,i,n,r)}};class TV{constructor(e){var t;this._filterByArea=(e,t)=>{var i;const n=this._getMinAreaByDepth(e.depth);if(n>0&&e.value*t<n)return!1;if(null===(i=e.children)||void 0===i?void 0:i.length){const i=e.children.filter((e=>this._filterByArea(e,t)));i.length?i.length!==e.children.length&&(e.children=i):(e.isLeaf=!0,e.children=null)}return!0},this._getMinAreaByDepth=e=>{var t;return e<0?0:null!==(t=v(this.options.minVisibleArea)?this.options.minVisibleArea[e]:this.options.minVisibleArea)&&void 0!==t?t:0},this._getGapWidthByDepth=e=>{var t;return e<0?0:null!==(t=v(this.options.gapWidth)?this.options.gapWidth[e]:this.options.gapWidth)&&void 0!==t?t:0},this._getPaddingByDepth=e=>{var t;return e<0?0:null!==(t=v(this.options.padding)?this.options.padding[e]:this.options.padding)&&void 0!==t?t:0},this._getLabelPaddingByDepth=e=>{var t;return e<0?0:null!==(t=v(this.options.labelPadding)?this.options.labelPadding[e]:this.options.labelPadding)&&void 0!==t?t:0},this._layoutNode=e=>{const t=this._getGapWidthByDepth(e.depth);let i=e.x0,n=e.y0,r=e.x1,s=e.y1;if(e.maxDepth=this._maxDepth,t>0&&(i+=t/2,r-=t/2,n+=t/2,s-=t/2,i>r&&(i=(i+r)/2,r=i),n>s&&(n=(n+s)/2,s=n),e.x0=i,e.x1=r,e.y0=n,e.y1=s),e.children){const t=this._getLabelPaddingByDepth(e.depth),a=this._getPaddingByDepth(e.depth);a>0&&a<Math.min(r-i,s-n)/2&&(n+=a,s-=a,i+=a,r-=a),t>0&&("top"===this.options.labelPosition&&n+t<s?(e.labelRect={x0:i,y0:n,x1:r,y1:n+t},n+=t):"bottom"===this.options.labelPosition&&s-t>n?(e.labelRect={x0:i,y0:s-t,x1:r,y1:s},s-=t):"left"===this.options.labelPosition&&i+t<r?(e.labelRect={x0:i,y0:n,x1:i+t,y1:s},i+=t):"right"===this.options.labelPosition&&r-t>i&&(e.labelRect={x0:r-t,y0:n,x1:r,y1:s},r-=t));const o=this._getGapWidthByDepth(e.depth+1);o>0&&(i-=o/2,r+=o/2,n-=o/2,s+=o/2),this._splitNode(e,i,n,r,s)}},this.options=Object.assign({},TV.defaultOpionts,e);const i=this.options.nodeKey,n=Q(i)?i:i?Tm(i):null;this._getNodeKey=n,this._splitNode="squarify"===this.options.splitType?AV(this.options.aspectRatio):null!==(t=EV[this.options.splitType])&&void 0!==t?t:EV.binary,this._maxDepth=-1}layout(e,t){var i;if(!e||!e.length)return[];const n="width"in t?{x0:0,x1:t.width,y0:0,y1:t.height,width:t.width,height:t.height}:{x0:Math.min(t.x0,t.x1),x1:Math.max(t.x0,t.x1),y0:Math.min(t.y0,t.y1),y1:Math.max(t.y0,t.y1),width:Math.abs(t.x1-t.x0),height:Math.abs(t.y1-t.y0)},r=[],s=BH(e,r,0,-1,null,this._getNodeKey);if(this._maxDepth=s.maxDepth,s.sum<=0)return[];const a={flattenIndex:-1,maxDepth:-1,key:"-1",depth:-1,index:-1,value:s.sum,datum:null,x0:n.x0,x1:n.x1,y0:n.y0,y1:n.y1,children:r},o=n.width*n.height/s.sum;return this._filterByArea(a,o),this._layout(a),null!==(i=a.children)&&void 0!==i?i:[]}_filterChildren(e){const t=this.options.maxDepth;if(l(t)&&t>=0&&e.depth>=t)return!1;const i=this.options.minChildrenVisibleArea;if(l(i)&&Math.abs((e.x1-e.x0)*(e.y1-e.y0))<i)return!1;const n=this.options.minChildrenVisibleSize;return!l(n)||!(Math.abs(e.x1-e.x0)<n||Math.abs(e.y1-e.y0)<n)}_layout(e){var t;this._filterChildren(e)||(e.children=null,e.isLeaf=!0),this._layoutNode(e),(null===(t=e.children)||void 0===t?void 0:t.length)&&e.children.forEach((e=>{var t;(null===(t=null==e?void 0:e.children)||void 0===t?void 0:t.length)?this._layout(e):this._layoutNode(e)}))}}TV.defaultOpionts={aspectRatio:(1+Math.sqrt(5))/2,gapWidth:0,labelPadding:0,labelPosition:"top",splitType:"binary",minVisibleArea:10};const OV=(e,t)=>{if(!e||!(null==t?void 0:t.range))return e;const i=t.range();return i.x1-i.x0==0||i.y1-i.y0==0?e:new TV(t).layout(e,i)},PV=(e,t)=>{let i={},n=t.fields;if(Q(n)&&(n=n()),!(null==n?void 0:n.length)||!(null==e?void 0:e.length))return i;if(!e[0].latestData)return i;const r=e[0].latestData,s=jH(r);return i=CR([{latestData:s}],t),i};class MV extends SR{constructor(){super(...arguments),this.contentKeyCallback=e=>null==e?void 0:e[this.series.getDimensionField()[0]]}get defaultShapeType(){return"square"}}const IV=e=>"fadeIn"===e?{type:"fadeIn"}:{type:"growCenterIn"};class RV extends UR{_transformLabelSpec(e){this._addMarkLabelSpec(e,"nonLeaf","nonLeafLabel","initNonLeafLabelMarkStyle"),this._addMarkLabelSpec(e,"leaf")}}class DV extends YR{constructor(){super(...arguments),this.type=Bt.treemap,this.transformerConstructor=RV,this._viewBox=new cl,this._enableAnimationHook=this.enableMarkAnimation.bind(this)}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!==(e=this._spec.seriesField)&&void 0!==e?e:OR),this._spec.roam&&(this.initZoomable(this.event,this._option.mode),this._matrix=new sl),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e,t;return null!==(t=null!==(e=this._spec.drillField)&&void 0!==e?e:this._categoryField)&&void 0!==t?t:kw},getRawData:()=>this.getRawData()}),L(this._spec.maxDepth)&&(this._maxDepth=this._spec.maxDepth-1)}initData(){var e,t,i,n;super.initData(),this.getViewData()&&(this._spec.drill&&this.initDrillableData(this._dataSet),uo(this._dataSet,"treemap",OV),uo(this._dataSet,"flatten",jH),this.addViewDataFilter({type:"treemap",options:{range:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),maxDepth:this._maxDepth,gapWidth:this._spec.gapWidth,padding:this._spec.nodePadding,splitType:this._spec.splitType,aspectRatio:this._spec.aspectRatio,labelPadding:(null===(e=this._spec.nonLeafLabel)||void 0===e?void 0:e.visible)?null===(t=this._spec.nonLeafLabel)||void 0===t?void 0:t.padding:0,labelPosition:null===(i=this._spec.nonLeafLabel)||void 0===i?void 0:i.position,minVisibleArea:null!==(n=this._spec.minVisibleArea)&&void 0!==n?n:10,minChildrenVisibleArea:this._spec.minChildrenVisibleArea,minChildrenVisibleSize:this._spec.minChildrenVisibleSize},level:wo.treemapFilter}),this.addViewDataFilter({type:"flatten",options:{callback:e=>{if(e.datum){const t=e.datum[e.depth];return Object.assign(Object.assign({},e),t)}return e}},level:wo.treemapFlatten}))}_addDataIndexAndKey(){var e;(null===(e=this._rawData)||void 0===e?void 0:e.dataSet)&&(uo(this._rawData.dataSet,"addVChartProperty",yR),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:RR.bind(this),call:DR}}))}getRawDataStatisticsByField(e,t){var i;if(!this._rawDataStatistics){const e="".concat(this.type,"_").concat(this.id,"_rawDataStatic");this._rawDataStatistics=this._createHierarchyDataStatistics(e,[this._rawData]),this._rawData.target.removeListener("change",this._rawDataStatistics.reRunAllTransform),this._rawDataStatistics.reRunAllTransform()}return null===(i=this._rawDataStatistics.latestData)||void 0===i?void 0:i[e]}_createHierarchyDataStatistics(e,t){uo(this._dataSet,"hierarchyDimensionStatistics",PV),uo(this._dataSet,"flatten",jH);const i=new R(this._dataSet,{name:e});return i.parse(t,{type:"dataview"}),i.transform({type:"hierarchyDimensionStatistics",options:{fields:()=>{const e=this.getStatisticFields();return this._seriesField&&this._seriesField!==this._categoryField&&e.push({key:this._seriesField,operations:["values"]}),e}}},!1),i}getStatisticFields(){return super.getStatisticFields().concat([{key:this._categoryField,operations:["values"]},{key:this._valueField,operations:["max","min"]},{key:TR,operations:["max","min","values"]},{key:OR,operations:["values"]}])}initMark(){var e,t;const i=this._createMark(DV.mark.nonLeaf,{isSeriesMark:!0,customShape:null===(e=this._spec.nonLeaf)||void 0===e?void 0:e.customShape});i&&(i.setTransform([{type:"filter",callback:e=>!this._shouldFilterElement(e,"nonLeaf")}]),this._trigger.registerMark(i),this._nonLeafMark=i);const n=this._createMark(DV.mark.leaf,{isSeriesMark:!0,customShape:null===(t=this._spec.leaf)||void 0===t?void 0:t.customShape});n&&(n.setTransform([{type:"filter",callback:e=>!this._shouldFilterElement(e,"leaf")}]),this._leafMark=n,this._trigger.registerMark(n))}initMarkStyle(){this._initLeafMarkStyle(),this._initNonLeafMarkStyle()}_initLeafMarkStyle(){this._leafMark&&this.setMarkStyle(this._leafMark,{x:e=>e.x0,y:e=>e.y0,x1:e=>e.x1,y1:e=>e.y1,fill:this.getColorAttribute()},fw.STATE_NORMAL,Tw.Series)}_initNonLeafMarkStyle(){this._nonLeafMark&&this.setMarkStyle(this._nonLeafMark,{x:e=>e.x0,y:e=>e.y0,x1:e=>e.x1,y1:e=>e.y1,fill:this.getColorAttribute()},fw.STATE_NORMAL,Tw.Series)}initLabelMarkStyle(e){e&&(this._labelMark=e,e.setRule("treemap"),this.setMarkStyle(e,{x:e=>(e.x0+e.x1)/2,y:e=>(e.y0+e.y1)/2,text:e=>{var t;return null===(t=e.datum[e.depth])||void 0===t?void 0:t[this.getDimensionField()[0]]},maxLineWidth:e=>e.x1===e.x0?Number.MIN_VALUE:e.x1-e.x0},fw.STATE_NORMAL,Tw.Series))}initNonLeafLabelMarkStyle(e){e&&(this._nonLeafLabelMark=e,e.setRule("treemap"),this.setMarkStyle(e,{x:e=>e.labelRect?(e.labelRect.x0+e.labelRect.x1)/2:(e.x0+e.x1)/2,y:e=>e.labelRect?(e.labelRect.y0+e.labelRect.y1)/2:(e.y0+e.y1)/2,text:e=>{var t;return null===(t=e.datum[e.depth])||void 0===t?void 0:t[this.getDimensionField()[0]]},maxLineWidth:e=>e.x1===e.x0?Number.MIN_VALUE:e.x1-e.x0},fw.STATE_NORMAL,Tw.Series))}initAnimation(){this.getMarksInType("rect").forEach((e=>{var t;e.setAnimationConfig(jR(null===(t=_n.getAnimationInKey("treemap"))||void 0===t?void 0:t(),FR(e.name,this._spec,this._markAttributeContext)))})),this.getMarksInType("text").forEach((e=>{var t;e.setAnimationConfig(jR(null===(t=_n.getAnimationInKey("fadeInOut"))||void 0===t?void 0:t(),FR(e.name,this._spec,this._markAttributeContext)))}))}initEvent(){super.initEvent(),this._spec.roam&&(this.initDragEventOfSeries(this),this.event.on("panmove",(e=>{this.handlePan(e)})),this.initZoomEventOfSeries(this),this.event.on("zoom",(e=>{this.handleZoom(e)}))),this._spec.drill&&this.bindDrillEvent()}_getDataIdKey(){return"key"}initTooltip(){this._tooltipHelper=new MV(this),this._leafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._leafMark),this._nonLeafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nonLeafMark)}_shouldFilterElement(e,t){const i=e.isLeaf;return"leaf"===t?!i:i}handlePan(e){const{delta:t}=e;if(0===t[0]&&0===t[1])return;this._matrix.reset(),this._matrix.translate(t[0],t[1]);const{a:i,b:n,c:r,d:s,e:a,f:o}=this._matrix;this._matrix.multiply(i,n,r,s,a,o),this._viewBox.transformWithMatrix(this._matrix),this.reFilterViewData()}handleZoom(e){const{scale:t,scaleCenter:i}=e;if(1===t)return;this._matrix.reset();const{x:n,y:r}=i;this._matrix.translate(n,r),this._matrix.scale(t,t),this._matrix.translate(-n,-r);const{a:s,b:a,c:o,d:l,e:c,f:h}=this._matrix;this._matrix.multiply(s,a,o,l,c,h),this.disableMarkAnimation(),this.event.on($r.AFTER_DO_RENDER,this._enableAnimationHook),this._viewBox.transformWithMatrix(this._matrix),this.reFilterViewData()}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(e){super.onLayoutEnd(e),this._viewBox.set(0,0,this.getLayoutRect().width,this.getLayoutRect().height),this._rawData.reRunAllTransform()}enableMarkAnimation(){this.getMarks().forEach((e=>{var t;null===(t=e.getProduct().animate)||void 0===t||t.enable()})),[this._labelMark,this._nonLeafLabelMark].forEach((e=>{e&&e.getComponent()&&e.getComponent().getProduct().getGroupGraphicItem().enableAnimation()})),this.event.off($r.AFTER_DO_RENDER,this._enableAnimationHook)}disableMarkAnimation(){this.getMarks().forEach((e=>{var t;null===(t=e.getProduct().animate)||void 0===t||t.disable()})),[this._labelMark,this._nonLeafLabelMark].forEach((e=>{e&&e.getComponent()&&e.getComponent().getProduct().getGroupGraphicItem().disableAnimation()}))}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._nonLeafMark,this._leafMark]}}DV.type=Bt.treemap,DV.mark=xi,DV.transformerConstructor=RV,$R(DV,qH),$R(DV,mF);const LV=()=>{LD(),LB(),_n.registerAnimation("treemap",((e,t)=>({appear:IV(t),enter:{type:"growCenterIn"},exit:{type:"growCenterOut"},disappear:{type:"growCenterOut"}}))),kM(),_n.registerSeries(DV.type,DV)};class jV extends oD{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,seriesField:e.seriesField,aspectRatio:e.aspectRatio,splitType:e.splitType,maxDepth:e.maxDepth,gapWidth:e.gapWidth,nodePadding:e.nodePadding,minVisibleArea:e.minVisibleArea,minChildrenVisibleArea:e.minChildrenVisibleArea,minChildrenVisibleSize:e.minChildrenVisibleSize,roam:e.roam,drill:e.drill,drillField:e.drillField,leaf:e.leaf,nonLeaf:e.nonLeaf,nonLeafLabel:e.nonLeafLabel}),i=this.seriesType;return i&&(t.type=i,t[i]=e[i]),t}transformSpec(e){super.transformSpec(e);const t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))})):e.series=[t]}}class FV extends fD{constructor(){super(...arguments),this.transformerConstructor=jV,this.type="treemap",this.seriesType=Bt.treemap}}FV.type="treemap",FV.seriesType=Bt.treemap,FV.view="singleDefault",FV.transformerConstructor=jV;const BV="".concat(Ge,"_waterfall_default_seriesField"),NV=(e,t)=>{if(!e||0===e.length)return e;const{indexField:i,valueField:n,startAs:r,endAs:s,total:a,seriesField:o,seriesFieldName:l,groupData:c}=t,h=[],{dimensionValues:d,dimensionData:u}=c().latestData,p=Array.from(d[i]);let g={start:0,end:0,lastIndex:null};return p.forEach(((e,t)=>{const i={start:g.end,end:g.end,lastIndex:g.lastIndex,lastEnd:g.end,index:e,isTotal:!1};u[e].forEach((e=>{let c=!1;if(a&&"end"!==a.type){if(("field"===a.type||"custom"===a.type)&&e[a.tagField])if(c=!0,"custom"===a.type){const{start:t,end:n}=a.product(e,g);e[r]=t,e[s]=n,i.end=n,i.start=t}else{let t=0,o=i.end;if(a.collectCountField&&!P(e[a.collectCountField])){const i=h.length-+e[a.collectCountField],n=h.length-1;i<0?console.warn("total.collectCountField error"):t=h[i].start,n<0?console.warn("total.collectCountField error"):o=h[n].end}else a.startField&&!P(e[a.startField])&&(t=+e[a.startField]),a.valueField&&!P(e[a.valueField])&&(o=tr(t,+e[a.valueField]));e[r]=t,e[s]=o,e[n]=o-t,i.start=t,i.end=o}}else t===p.length-1&&(i.start=0,e[r]=i.start,e[s]=i.end,c=!0);c||(e[r]=+i.end,e[s]=tr(e[r],+e[n]),i.end=e[s]),i.isTotal=c,(P(o)||o===BV)&&(e[BV]=c?l.total:+e[n]>=0?l.increase:l.decrease)})),g=Object.assign(Object.assign({},i),{lastIndex:e}),h.push(i)})),h},zV=(e,t)=>{if(!e)return e;const{indexField:i,valueField:n,total:r,seriesField:s}=t,a={[i]:(null==r?void 0:r.text)||"total",[n]:e.reduce(((e,t)=>tr(e,+t[n])),0)};return s&&(a[s]="total"),e.push(a),e},HV={type:"fadeIn"},VV={type:"growCenterIn"};function UV(e,t){switch(t){case"fadeIn":return HV;case"scaleIn":return VV;default:return OD(e,!1)}}const WV=(e,t)=>{if(!t.fields)return e;const i={};return{dimensionValues:i,dimensionData:GV(e.map((e=>e.latestData)).flat(),t.fields,i)}};function GV(e,t,i){if(0===t.length)return e;const n=t[0],r=t.slice(1);i[n]=new Set;const s=function(e,t,i){const n={};return e.forEach((e=>{const r=e[t];n[r]||(n[r]=[],i.add(r)),n[r].push(e)})),n}(e,n,i[n]);return r.length?(a=s,o=(e,t)=>GV(e,r,i),Object.keys(a).reduce(((e,t)=>(e[t]=o(a[t],t),e)),{})):s;var a,o}class KV{get fields(){return this._fields}get groupData(){return this._groupData}constructor(e){this._fields=[],this._fields=e}initData(e,t){const i=e.name,n=new R(t instanceof f?t:e.dataSet);n.name=i,n.parse([e],{type:"dataview"}),uo(t,"dimensionTree",WV),n.transform({type:"dimensionTree",options:{fields:this._fields}},!1),n.target.addListener("change",this.groupDataUpdate.bind(this)),this._groupData=n}groupDataUpdate(){}getGroupValueInField(e){var t,i,n;const r=null===(n=null===(i=null===(t=this.groupData)||void 0===t?void 0:t.latestData)||void 0===i?void 0:i.dimensionValues)||void 0===n?void 0:n[e];return r?Array.from(r):[]}}class YV extends FD{_transformLabelSpec(e){this._addMarkLabelSpec(e,"bar"),this._addMarkLabelSpec(e,"bar","stackLabel")}}class XV extends BD{constructor(){super(...arguments),this.type=Bt.waterfall,this.transformerConstructor=YV,this._stack=!1,this._leaderLineMark=null,this._stackLabelMark=null,this._labelMark=null}getTotalData(){var e;return null===(e=this._totalData)||void 0===e?void 0:e.getLatestData()}initGroups(){const e=this.getGroupFields();e&&e.length&&(this._groups=new KV(e),this._data&&this._groups.initData(this._data.getDataView(),this._dataSet))}setAttrFromSpec(){super.setAttrFromSpec(),this.setValueFieldToStack(),this._fieldX=[this._fieldX[0]],this._fieldY=[this._fieldY[0]],P(this._seriesField)&&(this._seriesField=BV)}getSeriesKeys(){return this._seriesField===BV?[this._theme.seriesFieldName.increase,this._theme.seriesFieldName.decrease,this._theme.seriesFieldName.total]:super.getSeriesKeys()}initData(){var e;super.initData(),uo(this._dataSet,"waterfallFillTotal",zV),uo(this._dataSet,"waterfall",NV),(P(this._spec.total)||"end"===this._spec.total.type)&&(null===(e=this._rawData)||void 0===e||e.transform({type:"waterfallFillTotal",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,total:this._spec.total}},!1));const t=_o(this.getViewData(),this._dataSet,{name:"".concat(Ge,"_series_").concat(this.id,"_totalData")});this.getViewData().target.removeListener("change",t.reRunAllTransform),this._totalData=new ER(this._option,t),t.transform({type:"waterfall",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,startAs:Ow,endAs:Pw,total:this._spec.total,groupData:()=>this.getGroups().groupData}},!1)}initAnimation(){var e,t,i,n;const r={yField:"horizontal"===this.direction?this._fieldY[0]:this.getStackValueField(),xField:"horizontal"===this.direction?this.getStackValueField():this._fieldX[0],direction:this.direction,growFrom:()=>{var e,t;return"horizontal"===this.direction?null===(e=this._xAxisHelper)||void 0===e?void 0:e.getScale(0).scale(0):null===(t=this._yAxisHelper)||void 0===t?void 0:t.getScale(0).scale(0)}},s=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset,a=KR(this);this._barMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("waterfall"))||void 0===i?void 0:i(r,s),FR("bar",this._spec,this._markAttributeContext),a)),this._leaderLineMark&&this._leaderLineMark.setAnimationConfig(jR(null===(n=_n.getAnimationInKey("fadeInOut"))||void 0===n?void 0:n(),FR("leaderLine",this._spec,this._markAttributeContext)))}viewDataUpdate(e){this._totalData.getDataView().reRunAllTransform(),this._totalData.updateData(),super.viewDataUpdate(e)}addViewDataFilter(e){}reFilterViewData(){}onEvaluateEnd(e){super.onEvaluateEnd(e),this._totalData.updateData()}initMark(){var e;super.initMark();const t=this._createMark(XV.mark.leaderLine,{key:"index",customShape:null===(e=this._spec.leaderLine)||void 0===e?void 0:e.customShape});t&&(this._leaderLineMark=t,t.setDataView(this._totalData.getDataView(),this._totalData.getProductId()))}initLabelMarkStyle(e){var t;if(e){if(!this._labelMark&&(null===(t=this._spec.label)||void 0===t?void 0:t.visible))return super.initLabelMarkStyle(e),void(this._labelMark=e);this._stackLabelMark=e,e.skipEncode=!0,e.setRule("stackLabel"),e.setDataView(this._totalData.getDataView(),this._totalData.getProductId()),this.setMarkStyle(e,{text:e=>{var t;return"absolute"===(null===(t=this._spec.stackLabel)||void 0===t?void 0:t.valueType)?e.end:function(e,t){return Jn(e-t,10**Math.max(er(e),er(t)))}(e.end,e.start)}})}}totalPositionX(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;const{dataToPosition:n,getBandwidth:r}=this._xAxisHelper;return"vertical"===this._direction?n([e[t]],{bandPosition:this._bandPosition})+.5*r(0)-this._barMark.getAttribute("width",e)*(.5-i):fk(n([e[t]],{bandPosition:this._bandPosition}))}totalPositionY(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;const{dataToPosition:n,getBandwidth:r}=this._yAxisHelper;return"vertical"===this._direction?fk(n([e[t]],{bandPosition:this._bandPosition})):n([e[t]],{bandPosition:this._bandPosition})+.5*r(0)-this._barMark.getAttribute("height",e)*(.5-i)}initMarkStyle(){super.initMarkStyle(),this._leaderLineMark&&("vertical"===this._direction?this.setMarkStyle(this._leaderLineMark,{visible:e=>!P(e.lastIndex),x:e=>e.lastIndex?this.totalPositionX(e,"lastIndex",1):0,x1:e=>this.totalPositionX(e,"index",0),y:e=>this.totalPositionY(e,"lastEnd",0),y1:e=>this.totalPositionY(e,e.isTotal?"end":"start",0)},"normal",Tw.Series):this.setMarkStyle(this._leaderLineMark,{visible:e=>!P(e.lastIndex),x:e=>this.totalPositionX(e,"lastEnd",0),x1:e=>this.totalPositionX(e,e.isTotal?"end":"start",0),y:e=>e.lastIndex?this.totalPositionY(e,"lastIndex",1):0,y1:e=>this.totalPositionY(e,"index",0)},"normal",Tw.Series))}}XV.type=Bt.waterfall,XV.mark=bi,XV.transformerConstructor=YV;const qV=()=>{TB(),LD(),_n.registerAnimation("waterfall",((e,t)=>({appear:UV(e,t),enter:OD(e,!1),exit:PD(e,!1),disappear:PD(e,!1)}))),kM(),_n.registerSeries(XV.type,XV)};class ZV extends zD{transformSpec(e){super.transformSpec(e),e.legends&&z(e.legends).forEach((e=>{e.select=!1,e.hover=!1,e.filter=!1})),dw(e)}_getDefaultSeriesSpec(e){return Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{bar:e.bar,stackLabel:e.stackLabel,leaderLine:e.leaderLine,total:e.total})}}class QV extends HD{constructor(){super(...arguments),this.transformerConstructor=ZV,this.type="waterfall",this.seriesType=Bt.waterfall}}QV.type="waterfall",QV.seriesType=Bt.waterfall,QV.view="singleDefault",QV.transformerConstructor=ZV;const $V="".concat(Ge,"_BOX_PLOT_OUTLIER_VALUE");var JV;!function(e){e.OUTLIER="outlier",e.MAX="max",e.MIN="min",e.MEDIAN="median",e.Q1="q1",e.Q3="q3",e.SERIES_FIELD="seriesField"}(JV||(JV={}));const eU=(e,t)=>{const i=[],{outliersField:n,dimensionField:r}=t;return(e[0].latestData||[]).forEach((e=>{let t=e[n];v(t)||(t=[t]),i.push(...t.map((t=>{const i={[$V]:t};return r.forEach((t=>{i[t]=e[t]})),i})))})),i};class tU extends SR{constructor(){super(...arguments),this.getContentKey=e=>t=>{if(this.isOutlierMark(t))return e===JV.OUTLIER?this.series.getOutliersField():e===JV.SERIES_FIELD?this.series.getSeriesField():null;switch(e){case JV.MIN:return this.series.getMinField();case JV.MAX:return this.series.getMaxField();case JV.MEDIAN:return this.series.getMedianField();case JV.Q1:return this.series.getQ1Field();case JV.Q3:return this.series.getQ3Field();case JV.SERIES_FIELD:return this.series.getSeriesField()}return null},this.getContentValue=e=>t=>{if(this.isOutlierMark(t))return e===JV.OUTLIER?t[$V]:e===JV.SERIES_FIELD?t[this.series.getSeriesField()]:null;switch(e){case JV.MIN:return t[this.series.getMinField()];case JV.MAX:return t[this.series.getMaxField()];case JV.MEDIAN:return t[this.series.getMedianField()];case JV.Q1:return t[this.series.getQ1Field()];case JV.Q3:return t[this.series.getQ3Field()];case JV.SERIES_FIELD:return t[this.series.getSeriesField()]}return null},this.contentShapeColorCallback=e=>"line"===this.series.getShaftShape()?this.series.getMarkInName("boxPlot").getAttribute("stroke",e):this.series.getMarkInName("boxPlot").getAttribute("fill",e),this.getOutlierFillColor=e=>{var t;const i=this.series.getOutliersStyle();return null!==(t=null==i?void 0:i.fill)&&void 0!==t?t:this.series.getMarkInName("outlier").getAttribute("fill",e)},this.isOutlierMark=e=>x(e[$V])}getDefaultTooltipPattern(e){return{visible:!0,activeType:e,title:{key:void 0,value:this.titleValueCallback,hasShape:!1},content:[{key:this.getContentKey(JV.OUTLIER),value:this.getContentValue(JV.OUTLIER),hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.getOutlierFillColor,shapeStroke:this.getOutlierFillColor,shapeHollow:!1},{key:this.getContentKey(JV.MAX),value:this.getContentValue(JV.MAX),hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1},{key:this.getContentKey(JV.Q3),value:this.getContentValue(JV.Q3),hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1},{key:this.getContentKey(JV.MEDIAN),value:this.getContentValue(JV.MEDIAN),hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1},{key:this.getContentKey(JV.Q1),value:this.getContentValue(JV.Q1),hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1},{key:this.getContentKey(JV.MIN),value:this.getContentValue(JV.MIN),hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1},{key:this.getContentKey(JV.SERIES_FIELD),value:this.getContentValue(JV.SERIES_FIELD),hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1}]}}}function iU(e){return"horizontal"===e}function nU(e){return"vertical"===e}const rU=e=>(t,i,n)=>{var r,s,a;const o=null!==(a=null!==(r=t.getGraphicAttribute("direction",!1))&&void 0!==r?r:null===(s=t.mark.getGlyphConfig())||void 0===s?void 0:s.direction)&&void 0!==a?a:"vertical",l=e(t,o,i);if(!L(l))return{};const c=t.getGraphicAttribute("x",!1),h=t.getGraphicAttribute("y",!1),d=t.getGraphicAttribute("min",!1),u=t.getGraphicAttribute("max",!1),p=t.getGraphicAttribute("q1",!1),g=t.getGraphicAttribute("q3",!1),f=t.getGraphicAttribute("median",!1),m={from:{x:c,y:h},to:{x:c,y:h}};return L(d)&&(m.from.min=l,m.to.min=d),L(u)&&(m.from.max=l,m.to.max=u),L(p)&&(m.from.q1=l,m.to.q1=p),L(g)&&(m.from.q3=l,m.to.q3=g),L(f)&&(m.from.median=l,m.to.median=f),m},sU=e=>(t,i,n)=>{var r,s,a;const o=null!==(a=null!==(r=t.getGraphicAttribute("direction",!1))&&void 0!==r?r:null===(s=t.mark.getGlyphConfig())||void 0===s?void 0:s.direction)&&void 0!==a?a:"vertical",l=e(t,o,i);if(!L(l))return{};const c=t.getGraphicAttribute("x",!0),h=t.getGraphicAttribute("y",!0),d=t.getGraphicAttribute("min",!0),u=t.getGraphicAttribute("max",!0),p=t.getGraphicAttribute("q1",!0),g=t.getGraphicAttribute("q3",!0),f=t.getGraphicAttribute("median",!0),m={from:{x:c,y:h},to:{x:c,y:h}};return L(d)&&(m.to.min=l,m.from.min=d),L(u)&&(m.to.max=l,m.from.max=u),L(p)&&(m.to.q1=l,m.from.q1=p),L(g)&&(m.to.q3=l,m.from.q3=g),L(f)&&(m.to.median=l,m.from.median=f),m},aU=(e,t,i)=>{var n,r,s,a,o,l,c,h,d,u,p,g;if(i&&L(i.center))return i.center;let f,m,v,y,b;if(iU(t)){f=null===(r=null===(n=e.getGraphicAttribute("points",!1,"median"))||void 0===n?void 0:n[0])||void 0===r?void 0:r.x,m=null===(a=null===(s=e.getGraphicAttribute("points",!1,"max"))||void 0===s?void 0:s[0])||void 0===a?void 0:a.x,v=null===(l=null===(o=e.getGraphicAttribute("points",!1,"min"))||void 0===o?void 0:o[0])||void 0===l?void 0:l.x;const t=e.getGraphicAttribute("width",!1,"box"),i=e.getGraphicAttribute("x",!1,"box");y=i,b=i+t}else{f=null===(h=null===(c=e.getGraphicAttribute("points",!1,"median"))||void 0===c?void 0:c[0])||void 0===h?void 0:h.y,m=null===(u=null===(d=e.getGraphicAttribute("points",!1,"max"))||void 0===d?void 0:d[0])||void 0===u?void 0:u.y,v=null===(g=null===(p=e.getGraphicAttribute("points",!1,"min"))||void 0===p?void 0:p[0])||void 0===g?void 0:g.y;const t=e.getGraphicAttribute("height",!1,"box"),i=e.getGraphicAttribute("y",!1,"box");y=i,b=i+t}return L(f)?f:L(y)&&L(b)?(y+b)/2:L(m)&&L(v)?(m+v)/2:L(v)?v:L(m)?m:NaN},oU=(e,t,i,n)=>{var r,s,a,o,l,c,h,d;const u={shaft:{},box:{},max:{},min:{},median:{}},p=null!==(r=e.x)&&void 0!==r?r:i.getGraphicAttribute("x",!1),g=null!==(s=e.y)&&void 0!==s?s:i.getGraphicAttribute("y",!1),f=null!==(a=e.width)&&void 0!==a?a:i.getGraphicAttribute("width",!1),m=null!==(o=e.height)&&void 0!==o?o:i.getGraphicAttribute("height",!1),v=null!==(l=e.boxWidth)&&void 0!==l?l:i.getGraphicAttribute("boxWidth",!1),y=null!==(c=e.boxHeight)&&void 0!==c?c:i.getGraphicAttribute("boxHeight",!1),b=null!==(h=e.ruleWidth)&&void 0!==h?h:i.getGraphicAttribute("ruleWidth",!1),_=null!==(d=e.ruleHeight)&&void 0!==d?d:i.getGraphicAttribute("ruleHeight",!1);return n&&iU(n.direction)?(L(y)?(Object.assign(u.box,{y:g-y/2,y1:g+y/2}),Object.assign(u.median,{y:g-y/2,y1:g+y/2})):(Object.assign(u.box,{y:g-m/2,y1:g+m/2}),Object.assign(u.median,{y:g-m/2,y1:g+m/2})),L(_)?(Object.assign(u.max,{y:g-_/2,y1:g+_/2}),Object.assign(u.min,{y:g-_/2,y1:g+_/2})):(Object.assign(u.max,{y:g-m/2,y1:g+m/2}),Object.assign(u.min,{y:g-m/2,y1:g+m/2}))):(L(v)?(Object.assign(u.box,{x:p-v/2,x1:p+v/2}),Object.assign(u.median,{x:p-v/2,x1:p+v/2})):(Object.assign(u.box,{x:p-f/2,x1:p+f/2}),Object.assign(u.median,{x:p-f/2,x1:p+f/2})),L(b)?(Object.assign(u.max,{x:p-b/2,x1:p+b/2}),Object.assign(u.min,{x:p-b/2,x1:p+b/2})):(Object.assign(u.max,{x:p-f/2,x1:p+f/2}),Object.assign(u.min,{x:p-f/2,x1:p+f/2}))),u},lU=rU(aU),cU=sU(aU);const hU=(e,t,i)=>{var n,r,s,a;if(L(null==i?void 0:i.center))return i.center;let o,l,c,h,d;if(iU(t)){o=null===(r=null===(n=e.getGraphicAttribute("points",!1,"median"))||void 0===n?void 0:n[0])||void 0===r?void 0:r.x;const t=e.getGraphicAttribute("width",!1,"minMaxBox"),i=e.getGraphicAttribute("x",!1,"minMaxBox");c=i,l=i+t;const s=e.getGraphicAttribute("width",!1,"q1q3Box"),a=e.getGraphicAttribute("x",!1,"q1q3Box");h=a,d=a+s}else{o=null===(a=null===(s=e.getGraphicAttribute("points",!1,"median"))||void 0===s?void 0:s[0])||void 0===a?void 0:a.y;const t=e.getGraphicAttribute("height",!1,"minMaxBox"),i=e.getGraphicAttribute("y",!1,"minMaxBox");c=i,l=i+t;const n=e.getGraphicAttribute("height",!1,"q1q3Box"),r=e.getGraphicAttribute("y",!1,"q1q3Box");h=r,d=r+n}return L(o)?o:L(h)&&L(d)?(h+d)/2:L(l)&&L(c)?(l+c)/2:L(c)?c:L(l)?l:NaN},dU=(e,t,i,n)=>{var r,s,a,o,l,c,h,d;const u={minMaxBox:{},q1q3Box:{},median:{}},p=null!==(r=e.x)&&void 0!==r?r:i.getGraphicAttribute("x",!1),g=null!==(s=e.y)&&void 0!==s?s:i.getGraphicAttribute("y",!1),f=null!==(a=e.width)&&void 0!==a?a:i.getGraphicAttribute("width",!1),m=null!==(o=e.minMaxWidth)&&void 0!==o?o:i.getGraphicAttribute("minMaxWidth",!1),v=null!==(l=e.q1q3Width)&&void 0!==l?l:i.getGraphicAttribute("q1q3Width",!1),y=null!==(c=e.height)&&void 0!==c?c:i.getGraphicAttribute("height",!1),b=null!==(h=e.minMaxHeight)&&void 0!==h?h:i.getGraphicAttribute("minMaxHeight",!1),_=null!==(d=e.q1q3Height)&&void 0!==d?d:i.getGraphicAttribute("q1q3Height",!1);return n&&iU(n.direction)?(L(b)?Object.assign(u.minMaxBox,{y:g-b/2,y1:g+b/2}):Object.assign(u.minMaxBox,{y:g-y/2,y1:g+y/2}),L(_)?(Object.assign(u.q1q3Box,{y:g-_/2,y1:g+_/2}),Object.assign(u.median,{y:g-_/2,y1:g+_/2})):(Object.assign(u.q1q3Box,{y:g-y/2,y1:g+y/2}),Object.assign(u.median,{y:g-y/2,y1:g+y/2}))):(L(m)?Object.assign(u.minMaxBox,{x:p-m/2,x1:p+m/2}):Object.assign(u.minMaxBox,{x:p-f/2,x1:p+f/2}),L(v)?(Object.assign(u.q1q3Box,{x:p-v/2,x1:p+v/2}),Object.assign(u.median,{x:p-v/2,x1:p+v/2})):(Object.assign(u.q1q3Box,{x:p-f/2,x1:p+f/2}),Object.assign(u.median,{x:p-f/2,x1:p+f/2}))),u},uU=rU(hU),pU=sU(hU);class gU extends kk{constructor(){super(...arguments),this.type=gU.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:2,boxWidth:30,shaftWidth:20,shaftShape:"line"})}_initProduct(e){const t=this.getStyle("shaftShape"),i=this.getVGrammarView(),n=this.getProductId(),r="bar"===t?"barBoxplot":"boxplot",s=this.getStyle("direction");this._product=i.glyph(r,null!=e?e:i.rootMark).id(n).configureGlyph({direction:s}),this._compiledProductId=n}}gU.type="boxPlot";const fU=()=>{_n.registerMark(gU.type,gU),nm.registerGlyph("boxplot",{shaft:"rule",box:"rect",max:"rule",min:"rule",median:"rule"}).registerProgressiveChannels(["x","y","q1","q3","min","max","median","angle","width","height","boxWidth","boxHeight","ruleWidth","ruleHeight"]).registerFunctionEncoder(oU).registerChannelEncoder("x",((e,t,i,n,r,s)=>s&&iU(s.direction)?null:{shaft:{x:t,x1:t}})).registerChannelEncoder("y",((e,t,i,n,r,s)=>s&&iU(s.direction)?{shaft:{y:t,y1:t}}:null)).registerChannelEncoder("q1",((e,t,i,n,r,s)=>s&&iU(s.direction)?{box:{x:t}}:{box:{y:t}})).registerChannelEncoder("q3",((e,t,i,n,r,s)=>s&&iU(s.direction)?{box:{x1:t}}:{box:{y1:t}})).registerChannelEncoder("min",((e,t,i,n,r,s)=>s&&iU(s.direction)?{shaft:{x:t},min:{x:t,x1:t,visible:!0}}:{shaft:{y:t},min:{y:t,y1:t,visible:!0}})).registerChannelEncoder("max",((e,t,i,n,r,s)=>s&&iU(s.direction)?{shaft:{x1:t},max:{x:t,x1:t,visible:!0}}:{shaft:{y1:t},max:{y:t,y1:t,visible:!0}})).registerChannelEncoder("median",((e,t,i,n,r,s)=>s&&iU(s.direction)?{median:{x:t,x1:t,visible:!0}}:{median:{y:t,y1:t,visible:!0}})).registerChannelEncoder("angle",((e,t,i,n,r,s)=>{var a;const o=s&&iU(s.direction)?[(i.min+i.max)/2,i.y]:[i.x,(i.min+i.max)/2],l=null!==(a=i.anchor)&&void 0!==a?a:o;return{shaft:{angle:t,anchor:l},box:{angle:t,anchor:l},max:{angle:t,anchor:l},min:{angle:t,anchor:l},median:{angle:t,anchor:l}}})).registerDefaultEncoder((()=>({max:{visible:!1},min:{visible:!1},median:{visible:!1}}))),nm.registerAnimationType("boxplotScaleIn",lU),nm.registerAnimationType("boxplotScaleOut",cU),pP(),cP(),hP(),nm.registerGlyph("barBoxplot",{minMaxBox:"rect",q1q3Box:"rect",median:"rule"}).registerProgressiveChannels(["x","y","q1","q3","min","max","median","angle","width","height","minMaxWidth","q1q3Width","minMaxHeight","q1q3Height"]).registerFunctionEncoder(dU).registerChannelEncoder("q1",((e,t,i,n,r,s)=>s&&iU(s.direction)?{q1q3Box:{x:t}}:{q1q3Box:{y:t}})).registerChannelEncoder("q3",((e,t,i,n,r,s)=>s&&iU(s.direction)?{q1q3Box:{x1:t}}:{q1q3Box:{y1:t}})).registerChannelEncoder("min",((e,t,i,n,r,s)=>s&&iU(s.direction)?{minMaxBox:{x:t}}:{minMaxBox:{y:t}})).registerChannelEncoder("max",((e,t,i,n,r,s)=>s&&iU(s.direction)?{minMaxBox:{x1:t}}:{minMaxBox:{y1:t}})).registerChannelEncoder("median",((e,t,i,n,r,s)=>s&&iU(s.direction)?{median:{x:t,x1:t,visible:!0}}:{median:{y:t,y1:t,visible:!0}})).registerChannelEncoder("angle",((e,t,i,n,r,s)=>{var a;const o=null!==(a=i.anchor)&&void 0!==a?a:[i.x,(i.min+i.max)/2];return{minMaxBox:{angle:t,anchor:o},q1q3Box:{angle:t,anchor:o},median:{angle:t,anchor:o}}})).registerChannelEncoder("lineWidth",((e,t,i,n,r,s)=>({minMaxBox:{lineWidth:0},q1q3Box:{lineWidth:0}}))).registerChannelEncoder("minMaxFillOpacity",((e,t,i,n,r,s)=>({minMaxBox:{fillOpacity:t}}))).registerChannelEncoder("stroke",((e,t,i,n,r,s)=>({minMaxBox:{stroke:!1},q1q3Box:{stroke:!1}}))).registerDefaultEncoder((()=>({minMaxBox:{lineWidth:0},q1q3Box:{lineWidth:0},median:{visible:!1}}))),nm.registerAnimationType("barBoxplotScaleIn",uU),nm.registerAnimationType("barBoxplotScaleOut",pU),pP(),cP(),hP()};class mU extends YR{constructor(){super(...arguments),this.type=Bt.boxPlot}getMinField(){return this._minField}getMaxField(){return this._maxField}getQ1Field(){return this._q1Field}getMedianField(){return this._medianField}getQ3Field(){return this._q3Field}getOutliersField(){return this._outliersField}getShaftShape(){return this._shaftShape}getBoxFillColor(){return this._boxFillColor}getStrokeColor(){return this._strokeColor}getOutliersStyle(){return this._outliersStyle}setAttrFromSpec(){var e,t,i,n,r;super.setAttrFromSpec();const s=null!==(t=null===(e=this._spec.boxPlot)||void 0===e?void 0:e.style)&&void 0!==t?t:{};this._minField=this._spec.minField,this._maxField=this._spec.maxField,this._q1Field=this._spec.q1Field,this._medianField=this._spec.medianField,this._q3Field=this._spec.q3Field,this._outliersField=this._spec.outliersField,this._lineWidth=null!==(i=s.lineWidth)&&void 0!==i?i:2,this._boxWidth=s.boxWidth,this._shaftShape=null!==(n=s.shaftShape)&&void 0!==n?n:"line",this._shaftWidth=s.shaftWidth,this._boxFillColor=s.boxFill,this._strokeColor=s.stroke,this._shaftFillOpacity="bar"===this._shaftShape?null!==(r=s.shaftFillOpacity)&&void 0!==r?r:.5:void 0,this._outliersStyle=this._spec.outliersStyle}initMark(){const e={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold};this._boxPlotMark=this._createMark(mU.mark.boxPlot,{isSeriesMark:!0,progressive:e}),this._outlierMark=this._createMark(mU.mark.outlier,{progressive:e,key:Cw,dataView:this._outlierDataView.getDataView(),dataProductId:this._outlierDataView.getProductId()})}initMarkStyle(){var e,t,i,n,r;const s=this._boxPlotMark;if(s){const i={direction:this._direction,lineWidth:this._lineWidth,shaftShape:this._shaftShape,fill:null!==(e=this._boxFillColor)&&void 0!==e?e:"line"===this._shaftShape?"#FFF":this.getColorAttribute(),minMaxFillOpacity:this._shaftFillOpacity,stroke:null!==(t=this._strokeColor)&&void 0!==t?t:"line"===this._shaftShape?this.getColorAttribute():"#000"},n="vertical"===this._direction?Object.assign(Object.assign({x:this.dataToPositionX.bind(this)},i),{boxWidth:()=>{var e;return null!==(e=this._boxWidth)&&void 0!==e?e:this._getMarkWidth()},ruleWidth:()=>{var e;return null!==(e=this._shaftWidth)&&void 0!==e?e:this._getMarkWidth()},q1q3Width:()=>{var e;return null!==(e=this._boxWidth)&&void 0!==e?e:this._getMarkWidth()},minMaxWidth:()=>{var e;return null!==(e=this._shaftWidth)&&void 0!==e?e:this._getMarkWidth()}}):Object.assign(Object.assign({y:this.dataToPositionY.bind(this)},i),{boxHeight:()=>{var e;return null!==(e=this._boxWidth)&&void 0!==e?e:this._getMarkWidth()},ruleHeight:()=>{var e;return null!==(e=this._shaftWidth)&&void 0!==e?e:this._getMarkWidth()},q1q3Height:()=>{var e;return null!==(e=this._boxWidth)&&void 0!==e?e:this._getMarkWidth()},minMaxHeight:()=>{var e;return null!==(e=this._shaftWidth)&&void 0!==e?e:this._getMarkWidth()}});this.setMarkStyle(s,n,fw.STATE_NORMAL,Tw.Series),this._trigger.registerMark(s)}const a=this._outlierMark;a&&(this.setMarkStyle(a,{fill:null!==(n=null===(i=this._outliersStyle)||void 0===i?void 0:i.fill)&&void 0!==n?n:this.getColorAttribute(),size:l(null===(r=this._outliersStyle)||void 0===r?void 0:r.size)?this._outliersStyle.size:10,symbolType:"circle"},fw.STATE_NORMAL,Tw.Series),this._trigger.registerMark(a))}initBoxPlotMarkStyle(){var e,t;const i=this._boxPlotMark,n="vertical"===this._direction?this._yAxisHelper:this._xAxisHelper;if(i&&n){const{dataToPosition:t}=n,r=null===(e=null==n?void 0:n.getScale)||void 0===e?void 0:e.call(n,0);this.setMarkStyle(i,{min:e=>fk(t(this.getDatumPositionValues(e,this._minField),{bandPosition:this._bandPosition}),r),q1:e=>fk(t(this.getDatumPositionValues(e,this._q1Field),{bandPosition:this._bandPosition}),r),median:e=>fk(t(this.getDatumPositionValues(e,this._medianField),{bandPosition:this._bandPosition}),r),q3:e=>fk(t(this.getDatumPositionValues(e,this._q3Field),{bandPosition:this._bandPosition}),r),max:e=>fk(t(this.getDatumPositionValues(e,this._maxField),{bandPosition:this._bandPosition}),r)},fw.STATE_NORMAL,Tw.Series)}const r=this._outlierMark;if(r&&n){const{dataToPosition:e}=n,i=null===(t=null==n?void 0:n.getScale)||void 0===t?void 0:t.call(n,0),s="vertical"===this._direction?{x:this.dataToPositionX.bind(this),y:t=>fk(e(this.getDatumPositionValues(t,$V),{bandPosition:this._bandPosition}),i)}:{y:this.dataToPositionY.bind(this),x:t=>fk(e(this.getDatumPositionValues(t,$V),{bandPosition:this._bandPosition}),i)};this.setMarkStyle(r,s,fw.STATE_NORMAL,Tw.Series)}}initData(){if(super.initData(),!this._data)return;uo(this._dataSet,"foldOutlierData",eU),uo(this._dataSet,"addVChartProperty",yR);const e=new R(this._dataSet,{name:"".concat(this.type,"_outlier_").concat(this.id,"_data")});e.parse([this.getViewData()],{type:"dataview"}),e.name="".concat(Ge,"_series_").concat(this.id,"_outlierData"),e.transform({type:"foldOutlierData",options:{dimensionField:"vertical"===this._direction?this._fieldX:this._fieldY,outliersField:this._outliersField}}),e.transform({type:"addVChartProperty",options:{beforeCall:MR.bind(this),call:IR}},!1),this._outlierDataView=new ER(this._option,e)}init(e){super.init(e),this.initBoxPlotMarkStyle()}_getMarkWidth(){if(this._autoBoxWidth)return this._autoBoxWidth;const e="vertical"===this._direction?this._xAxisHelper:this._yAxisHelper,t="vertical"===this._direction?this._fieldX:this._fieldY,i=e.getBandwidth(t.length-1)/t.length;return this._autoBoxWidth=i,this._autoBoxWidth}onLayoutEnd(e){super.onLayoutEnd(e),this._autoBoxWidth=null}_initAnimationSpec(){const e=O({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return["appear","enter","update","exit","disappear"].forEach((t=>{e[t]&&"scaleIn"===e[t].type?e[t].type="line"===this._shaftShape?"boxplotScaleIn":"barBoxplotScaleIn":e[t]&&"scaleOut"===e[t].type&&(e[t].type="line"===this._shaftShape?"boxplotScaleOut":"barBoxplotScaleOut")})),e}initAnimation(){var e,t,i,n,r,s,a;const o=KR(this);if(this._boxPlotMark){const t=this._initAnimationSpec(null===(e=_n.getAnimationInKey("scaleInOut"))||void 0===e?void 0:e()),i=this._initAnimationSpec(FR("boxPlot",this._spec,this._markAttributeContext));this._boxPlotMark.setAnimationConfig(jR(t,i,o))}if(this._outlierMark){const e={appear:null===(t=this._spec.animationAppear)||void 0===t?void 0:t.symbol,disappear:null===(i=this._spec.animationDisappear)||void 0===i?void 0:i.symbol,enter:null===(n=this._spec.animationEnter)||void 0===n?void 0:n.symbol,exit:null===(r=this._spec.animationExit)||void 0===r?void 0:r.symbol,update:null===(s=this._spec.animationUpdate)||void 0===s?void 0:s.symbol};this._outlierMark.setAnimationConfig(jR(null===(a=_n.getAnimationInKey("scaleInOut"))||void 0===a?void 0:a(),e,o))}}initTooltip(){this._tooltipHelper=new tU(this),this._boxPlotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._boxPlotMark),this._outlierMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._outlierMark)}getStatisticFields(){const e=super.getStatisticFields(),t=e.find((e=>e.key===this._outliersField));return t&&(t.operations=["array-min","array-max"]),e}onEvaluateEnd(e){super.onEvaluateEnd(e),this._outlierDataView.updateData()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._boxPlotMark]}}mU.type=Bt.boxPlot,mU.mark=_i;class vU extends lD{_getDefaultSeriesSpec(e){var t;const i=[e.maxField,e.medianField,e.q1Field,e.q3Field,e.minField,e.outliersField],n=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{boxPlot:e.boxPlot,direction:null!==(t=e.direction)&&void 0!==t?t:"vertical",minField:e.minField,maxField:e.maxField,q1Field:e.q1Field,medianField:e.medianField,q3Field:e.q3Field,outliersField:e.outliersField,outliersStyle:e.outliersStyle});return n["vertical"===n.direction?"yField":"xField"]=i,n}transformSpec(e){super.transformSpec(e),e.axes||(e.axes=[{orient:"bottom"},{orient:"left"}]),dw(e)}}class yU extends fD{constructor(){super(...arguments),this.transformerConstructor=vU,this.type="boxPlot",this.seriesType=Bt.boxPlot}}yU.type="boxPlot",yU.seriesType=Bt.boxPlot,yU.view="singleDefault",yU.transformerConstructor=vU;const bU=e=>{let t=0;return e.forEach(((e,i)=>{var n;P(e.value)&&((null===(n=e.children)||void 0===n?void 0:n.length)?e.value=bU(e.children):e.value=0),t+=Math.abs(e.value)})),t};function _U(e){return e.depth}function xU(e,t){return t-1-e.endDepth}const SU=(e,t)=>e.y0-t.y0,wU=(e,t)=>{if(P(e.value))return null;const i=(t?e.targetLinks:e.sourceLinks).reduce(((e,t)=>(P(t.value)?e.count+=1:e.sum+=t.value,e)),{sum:0,count:0});return i.count>0?(e.value-i.sum)/i.count:null},CU={left:_U,right:xU,justify:function(e,t){return e.sourceLinks.length?e.depth:t-1},center:function(e,t,i){return e.targetLinks.length?e.depth:e.sourceLinks.length?U(e.sourceLinks.map((e=>i[e.target].depth)))-1:0},start:_U,end:xU};class kU{constructor(e){this._ascendingSourceBreadth=(e,t)=>SU(this._nodeMap[e.source],this._nodeMap[t.source])||e.index-t.index,this._ascendingTargetBreadth=(e,t)=>SU(this._nodeMap[e.target],this._nodeMap[t.target])||e.index-t.index,this.options=Object.assign({},kU.defaultOptions,e);const t=this.options.nodeKey,i=Q(t)?t:t?Tm(t):null;this._getNodeKey=i,this._logger=u.getInstance(),this._alignFunc=Q(this.options.setNodeLayer)?e=>this.options.setNodeLayer(e.datum):CU[this.options.nodeAlign]}layout(e,t){if(!e)return null;const i="width"in t?{x0:0,x1:t.width,y0:0,y1:t.height,width:t.width,height:t.height}:{x0:Math.min(t.x0,t.x1),x1:Math.max(t.x0,t.x1),y0:Math.min(t.y0,t.y1),y1:Math.max(t.y0,t.y1),width:Math.abs(t.x1-t.x0),height:Math.abs(t.y1-t.y0)};nU(this.options.direction)?this._viewBox={x0:i.y0,x1:i.y1,y0:i.x0,y1:i.x1,width:i.height,height:i.width}:this._viewBox=i;const n=this.computeNodeLinks(e),r=n.nodes,s=n.links;if(this._nodeMap=n.nodeMap,this.computeNodeValues(r),this.computeNodeDepths(r),["right","end","justify"].includes(this.options.nodeAlign)&&this.computeNodeEndDepths(r),this._maxDepth<=1)return null;const a=this.computeNodeBreadths(r);return this.computeLinkBreadths(r),nU(this.options.direction)&&(r.forEach((e=>{const t=e.y0,i=e.y1;e.y0=e.x0,e.y1=e.x1,e.x0=t,e.x1=i})),s.forEach((e=>{e.vertical=!0;const t=e.x0,i=e.x1;e.x0=e.y0,e.x1=e.y1,e.y0=t,e.y1=i}))),s.forEach((e=>{const t=this._nodeMap[e.source],i=this._nodeMap[e.target];e.sourceRect={x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y1},e.targetRect={x0:i.x0,x1:i.x1,y1:i.y1,y0:i.y0}})),{nodes:r,links:s,columns:a}}computeHierarchicNodeLinks(e){const t=[],i=[],n={},r={},s=[];bU(e);const a=(e,i,r)=>{e.forEach(((e,o)=>{var l,c;const h=this._getNodeKey?this._getNodeKey(e):r?"".concat(r[r.length-1].key,"-").concat(o):"".concat(i,"-").concat(o);if(n[h])n[h].value=void 0;else{const r={depth:i,datum:e,index:o,key:h,value:null!==(l=e.value)&&void 0!==l?l:0,sourceLinks:[],targetLinks:[]};n[h]=r,t.push(r)}r&&s.push({source:r[r.length-1].key,target:h,value:null!==(c=e.value)&&void 0!==c?c:0,parents:r}),e.children&&e.children.length&&a(e.children,i+1,r?r.concat([n[h]]):[n[h]])}))};return a(e,0,null),s.forEach(((e,t)=>{const s="".concat(e.source,"-").concat(e.target);if(r[s])return r[s].value+=e.value,void r[s].datum.push(e);const a={index:t,key:"".concat(e.source,"-").concat(e.target),source:e.source,target:e.target,datum:[e],value:e.value,parents:e.parents.map((e=>e.key))};i.push(a),n[e.source].sourceLinks.push(a),n[e.target].targetLinks.push(a),r[s]=a})),{nodes:t,links:i,nodeMap:n}}computeSourceTargetNodeLinks(e){const t=[],i=[],n={};e.nodes&&e.nodes.forEach(((e,i)=>{const r={depth:-1,datum:e,index:i,key:this._getNodeKey?this._getNodeKey(e):i,value:e.value,sourceLinks:[],targetLinks:[]};n[r.key]=r,t.push(r)}));const r=[];return e.links.forEach(((s,a)=>{if(P(s.source)||P(s.target))return;if(e.nodes&&(!n[s.source]||!n[s.target]))return;e.nodes||n[s.source]||(n[s.source]={value:void 0,depth:-1,index:t.length,key:s.source,datum:null,sourceLinks:[],targetLinks:[]},t.push(n[s.source])),e.nodes||n[s.target]||(n[s.target]={value:void 0,depth:-1,index:t.length,key:s.target,datum:null,sourceLinks:[],targetLinks:[]},t.push(n[s.target]));const o={index:a,source:s.source,target:s.target,datum:s,value:s.value};this.options.divideNodeValueToLink&&P(s.value)&&r.push(o),i.push(o),n[s.source].sourceLinks.push(o),n[s.target].targetLinks.push(o)})),this.options.divideNodeValueToLink&&r.length&&r.forEach((e=>{const t=[wU(n[e.source]),wU(n[e.target],!0)].filter((e=>!P(e)));t.length&&(e.value=U(t))})),{nodeMap:n,nodes:t,links:i}}computeNodeLinks(e){let t;"links"in e?t=this.computeSourceTargetNodeLinks(e):(this._isHierarchic=!0,t=this.computeHierarchicNodeLinks(e.nodes));let i=t.nodes;const n=t.links;if(this.options.linkSortBy)for(let r=0,s=i.length;r<s;r++)i[r].sourceLinks.sort(this.options.linkSortBy),i[r].targetLinks.sort(this.options.linkSortBy);return this.options.dropIsolatedNode&&(i=i.filter((e=>e.targetLinks.length||e.sourceLinks.length))),{nodes:i,links:n,nodeMap:t.nodeMap}}computeNodeValues(e){for(let t=0,i=e.length;t<i;t++){const i=e[t];i.value=Math.max(P(i.value)?0:i.value,i.sourceLinks.reduce(((e,t)=>{var i;return e+(null!==(i=t.value)&&void 0!==i?i:0)}),0),i.targetLinks.reduce(((e,t)=>{var i;return e+(null!==(i=t.value)&&void 0!==i?i:0)}),0))}}computeNodeDepths(e){const t=e.length;let i,n,r=e,s=0;for(;r.length&&s<t;){i=[],n={};for(let e=0,t=r.length;e<t;e++){const t=r[e];t.depth=s;for(let e=0,r=t.sourceLinks.length;e<r;e++){const r=t.sourceLinks[e];n[r.target]||(i.push(this._nodeMap[r.target]),n[r.target]=!0)}}r=i,s+=1}s>t&&this._logger.warn("Error: there is a circular link"),this._maxDepth=s}computeNodeEndDepths(e){const t=e.length;let i,n,r=e,s=0;for(;r.length&&s<t;){i=[],n={};for(let e=0,t=r.length;e<t;e++){const t=r[e];t.endDepth=s;for(let e=0,r=t.targetLinks.length;e<r;e++){const r=t.targetLinks[e];n[r.source]||(i.push(this._nodeMap[r.source]),n[r.source]=!0)}}r=i,s+=1}s>t&&this._logger.warn("Error: there is a circular link")}computeNodeLayers(e){const t=this.options.nodeWidth,i=this.options.linkWidth,n=this.options.minStepWidth,r=this._viewBox.width;let s=null,a=null,o=!1;if(_(t)){const e=At(parseFloat(t.replace("%",""))/100,0,1);let i=r/(this._maxDepth-1+e);n>0&&(i=Math.max(n,i)),s=i*e,a=i*(1-e),o=!0}else if(l(t)){if(s=t,l(i))a=i;else if(P(i)){let e=(r-t)/(this._maxDepth-1);n>0&&(e=Math.max(n,e)),a=e-t}o=!0}else Q(t)&&l(i)&&(a=i);const c=[];for(let l=0,h=e.length;l<h;l++){const t=e[l];t.layer=this._isHierarchic?t.depth:At(Math.floor(this._alignFunc(t,this._maxDepth,this._nodeMap)),0,this._maxDepth-1);const i=t.layer;i===this._maxDepth-1&&(t.isLastLayer=!0),o&&(t.x0=this._viewBox.x0+i*(s+a),t.x1=t.x0+s),c[i]?c[i].push(t):c[i]=[t]}if(this.options.nodeSortBy)for(let l=0,h=c.length;l<h;l++)c[l].sort(this.options.nodeSortBy);if(!o&&Q(t)){let e=this._viewBox.x0;for(let n=0;n<this._maxDepth;n++){const r=c[n];let o=0,l=0;for(let n=0,c=r.length;n<c;n++){const c=r[n],h=t(c);c.x0=e,c.x1=e+h,o=Math.max(s,h);const d=c.sourceLinks;for(let e=0,t=d.length;e<t;e++){const t=d[e],n=Q(i)?i(t):a;l=Math.max(l,n)}}e+=o}}return c}initializeNodeBreadths(e){const t=this.options.minLinkHeight;let i=this.options.minNodeHeight;(P(i)||i<t)&&(i=t);let n=0,r=null;if(Q(this.options.nodeGap))r=this.options.nodeGap,n=e.reduce(((e,t)=>{const i=t.reduce(((e,t)=>e+t.value),0),n=t.reduce(((e,t)=>e+this.options.nodeGap(t)),0);return Math.min(e,(this._viewBox.height-n)/i)}),1/0);else{const t=e.reduce(((e,t)=>Math.max(e,t.length)),0),s=Math.min(i>0?Math.max(this.options.nodeGap,i):this.options.nodeGap,this._viewBox.height/t);r=()=>s,this._gapY=s,n=e.reduce(((e,t)=>{const i=t.reduce(((e,t)=>e+t.value),0);return Math.min(e,(this._viewBox.height-(t.length-1)*s)/i)}),1/0)}const s="start"===this.options.gapPosition,a=!s&&"end"!==this.options.gapPosition;for(let o=0,l=e.length;o<l;o++){const l=e[o];let c=this._viewBox.y0,h=0;for(let e=0,a=l.length;e<a;e++){const a=l[e];h=r(a),s&&(c+=h),a.y0=c,a.y1=c+(i>0&&0!==a.value?Math.max(a.value*n,i):a.value*n),c=s?a.y1:a.y1+h;for(let e=0,i=a.sourceLinks.length;e<i;e++){const i=a.sourceLinks[e];i.thickness=t>0&&0!==i.value?Math.max(i.value*n,t):i.value*n}}let d=this._viewBox.y1-c+(a?h:0);if(d>0)if("start"===this.options.crossNodeAlign);else if("end"===this.options.crossNodeAlign)for(let e=0,t=l.length;e<t;++e){const t=l[e];t.y0+=d,t.y1+=d}else{d/=l.length+1;for(let e=0,t=l.length;e<t;++e){const t=l[e];t.y0+=d*(e+1),t.y1+=d*(e+1)}}else if(d<0&&l.length>1&&(d/=l.length-1,h+d>0)){h+=d;for(let e=1,t=l.length;e<t;++e){const t=l[e];t.y0+=d*e,t.y1+=d*e}}this.reorderLinks(l)}}computeNodeBreadths(e){const t=this.computeNodeLayers(e);this.initializeNodeBreadths(t);const i=this.options.iterations;if(!this._isHierarchic&&!Q(this.options.setNodeLayer)&&!Q(this.options.nodeGap))for(let n=0;n<i;++n){const e=Math.pow(.99,n),r=Math.max(1-e,(n+1)/i);this.relaxRightToLeft(t,e,r),this.relaxLeftToRight(t,e,r)}return t}relaxLeftToRight(e,t,i){for(let n=1,r=e.length;n<r;++n){const r=e[n];for(let e=0,i=r.length;e<i;e++){const i=r[e];let n=0,s=0;for(let e=0,t=i.targetLinks.length;e<t;e++){const t=i.targetLinks[e],r=t.value*(i.layer-this._nodeMap[t.source].layer);n+=this.targetTop(this._nodeMap[t.source],i)*r,s+=r}if(!(s>0))continue;const a=(n/s-i.y0)*t;i.y0+=a,i.y1+=a,this.reorderNodeLinks(i)}P(this.options.nodeSortBy)&&r.sort(SU),this.resolveCollisions(r,i)}}relaxRightToLeft(e,t,i){for(let n=e.length-2;n>=0;--n){const r=e[n];for(let e=0,i=r.length;e<i;e++){const i=r[e];let n=0,s=0;for(let e=0,t=i.sourceLinks.length;e<t;e++){const t=i.sourceLinks[e],r=t.value*(this._nodeMap[t.target].layer-i.layer);n+=this.sourceTop(i,this._nodeMap[t.target])*r,s+=r}if(!(s>0))continue;const a=(n/s-i.y0)*t;i.y0+=a,i.y1+=a,this.reorderNodeLinks(i)}void 0===this.options.nodeSortBy&&r.sort(SU),this.resolveCollisions(r,i)}}resolveCollisions(e,t){const i=e.length>>1,n=e[i];this.resolveCollisionsBottomToTop(e,n.y0-this._gapY,i-1,t),this.resolveCollisionsTopToBottom(e,n.y1+this._gapY,i+1,t),this.resolveCollisionsBottomToTop(e,this._viewBox.y1,e.length-1,t),this.resolveCollisionsTopToBottom(e,this._viewBox.y0,0,t)}resolveCollisionsTopToBottom(e,t,i,n){for(;i<e.length;++i){const r=e[i],s=(t-r.y0)*n;s>1e-6&&(r.y0+=s,r.y1+=s),t=r.y1+this._gapY}}resolveCollisionsBottomToTop(e,t,i,n){for(;i>=0;--i){const r=e[i],s=(r.y1-t)*n;s>1e-6&&(r.y0-=s,r.y1-=s),t=r.y0-this._gapY}}targetTop(e,t){let i,n,r,s=e.y0-(e.sourceLinks.length-1)*this._gapY/2;for(i=0,n=e.sourceLinks.length;i<n&&(r=e.sourceLinks[i],r.target!==t.key);i++)s+=r.thickness+this._gapY;for(i=0,n=t.targetLinks.length;i<n&&(r=t.targetLinks[i],r.source!==e.key);i++)s-=r.thickness;return s}sourceTop(e,t){let i,n,r,s=t.y0-(t.targetLinks.length-1)*this._gapY/2;for(i=0,n=t.targetLinks.length;i<n&&(r=t.targetLinks[i],r.source!==e.key);i++)s+=r.thickness+this._gapY;for(i=0,n=e.sourceLinks.length;i<n&&(r=e.sourceLinks[i],r.target!==t.key);i++)s-=r.thickness;return s}computeLinkBreadths(e){for(let t=0,i=e.length;t<i;t++){const i=e[t];let n=i.y0,r=n;for(let e=0,t=i.sourceLinks.length;e<t;e++){const t=i.sourceLinks[e];t.y0=n+t.thickness/2,t.x0=i.x1,n+=t.thickness}for(let e=0,t=i.targetLinks.length;e<t;e++){const t=i.targetLinks[e];t.y1=r+t.thickness/2,t.x1=i.x0,r+=t.thickness}}}reorderNodeLinks(e){if(P(this.options.linkSortBy)){const t=e.targetLinks,i=e.sourceLinks;for(let e=0,n=t.length;e<n;e++){const i=t[e];this._nodeMap[i.source].sourceLinks.sort(this._ascendingTargetBreadth)}for(let e=0,n=i.length;e<n;e++){const t=i[e];this._nodeMap[t.target].targetLinks.sort(this._ascendingSourceBreadth)}}}reorderLinks(e){if(P(this.options.linkSortBy))for(let t=0,i=e.length;t<i;t++){const i=e[t];i.sourceLinks.sort(this._ascendingTargetBreadth),i.targetLinks.sort(this._ascendingSourceBreadth)}}}kU.defaultOptions={iterations:6,nodeAlign:"justify",direction:"horizontal",nodeWidth:24,nodeGap:8,crossNodeAlign:"middle",dropIsolatedNode:!0};const AU=(e,t)=>{const i=new kU(e).layout(Array.isArray(t)?t[0]:t,"width"in e?{width:e.width,height:e.height}:{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1});return i?[i]:[]},EU=(e,t,i)=>{t.forEach((t=>{P(t[i])||e.add(t[i]),t.children&&t.children.length>0&&EU(e,t.children,i)}))},TU=e=>{e.forEach((e=>{e.value=_(e.value)?+e.value:e.value,e.children&&e.children.length>0&&TU(e.children)}))},OU=e=>{var t;if(!e||!v(e))return[];if(e.length>1){const t={links:[],nodes:[]};return e.forEach((e=>{"links"!==e.id&&"nodes"!==e.id||(t[e.id]=e.values)})),[t]}return(null===(t=e[0])||void 0===t?void 0:t.latestData)?e[0].latestData:e},PU=(e,t)=>{var i,n;if(!e||!(null==t?void 0:t.view)||!e.length)return[];const r=t.view();if(r.x1-r.x0==0||r.y1-r.y0==0||r.x1-r.x0==-1/0||r.x1-r.x0==1/0||r.y1-r.y0==-1/0||r.y1-r.y0==1/0)return[];const s=e[0];if(("source"!==t.sourceField||"target"!==t.targetField||"value"!==t.valueField)&&s.links){const e=[];s.links.forEach((i=>{const n={};for(const e in i)e===t.sourceField?n.source=i[t.sourceField]:e===t.targetField?n.target=i[t.targetField]:e===t.valueField?n.value=i[t.valueField]:n[e]=i[e];e.push(n)})),s.links=e}if(s.links){const e=[];s.links.forEach((t=>{const i={};for(const e in t)"value"===e?i.value=_(t.value)?+t.value:t.value:i[e]=t[e];e.push(i)})),s.links=e}else(null===(n=null===(i=s.nodes)||void 0===i?void 0:i[0])||void 0===n?void 0:n.children)&&TU(s.nodes);const a=new kU(t),o=[];return o.push(a.layout(s,r)),o},MU=e=>{var t,i;return e&&v(e)&&(null===(t=e[0])||void 0===t?void 0:t.latestData)&&e[0].latestData.length&&e[0].latestData[0]&&null!==(i=e[0].latestData[0].nodes)&&void 0!==i?i:[]},IU=e=>{var t,i;return e&&v(e)&&(null===(t=e[0])||void 0===t?void 0:t.latestData)&&e[0].latestData.length&&e[0].latestData[0]&&null!==(i=e[0].latestData[0].links)&&void 0!==i?i:[]};class RU extends SR{getDefaultTooltipPattern(e,t){if("mark"===e)return{visible:!0,activeType:e,title:{key:void 0,value:e=>{if(e.source){if(l(e.source)){const t=this.series.getSeriesKeys();return t[e.source]+" => "+t[e.target]}return e.source+" => "+e.target}return e.datum[this.series.getSpec().categoryField]},hasShape:!1},content:[{key:this.contentKeyCallback,value:e=>e.value,hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1}]};if("dimension"===e&&t){const i={key:void 0,value:this._getDimensionData,hasShape:!1},n=[];return t.forEach((e=>{let{data:t}=e;return t.forEach((e=>{let{series:t}=e;n.push({seriesId:t.id,key:this.contentKeyCallback,value:this.contentValueCallback,hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1})}))})),{visible:!0,activeType:e,title:i,content:n}}return null}}const DU=(e,t)=>"fadeIn"===t?{type:"fadeIn"}:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"horizontal"===e.direction?"growWidthIn":"growHeightIn",options:{overall:t?e.growFrom():t,orient:"positive"}}}(e),LU=e=>"fadeIn"===e?{type:"fadeIn"}:{type:"linkPathGrowIn"},jU=(e,t)=>{var i;const n=null!==(i=e.curvature)&&void 0!==i?i:.5,r="number"==typeof t?e.thickness*t:e.thickness;let s=e.x0,a=e.x1,o=e.y0,l=e.y1,c=s+n*(a-s),h=a+n*(s-a),d=e=>e;!1!==e.round&&(s=Math.round(s),a=Math.round(a),o=Math.round(o),l=Math.round(l),c=Math.round(c),h=Math.round(h),d=Math.round),"line"===e.pathType||e.pathType,"center"===e.align?(o=d(e.y0-r/2),l=d(e.y1-r/2)):"end"===e.align?(o=d(e.y0+e.thickness/2-r),l=d(e.y1+e.thickness/2-r)):(o=d(e.y0-e.thickness/2),l=d(e.y1-e.thickness/2));const u=d(o+r),p=d(l+r),g=Math.abs(a-s)>1e-6,f=e.endArrow&&g?"L".concat(a,",").concat(d(l-r/2),"L").concat(d(a+r),",").concat(d((l+p)/2),"L").concat(a,",").concat(d(p+r/2)):"",m=e.startArrow&&g?"L".concat(s,",").concat(d(u+r/2),"L").concat(d(s-r),",").concat(d((o+u)/2),"L").concat(s,",").concat(d(o-r/2)):"";return"line"===e.pathType?"M".concat(s,",").concat(o,"L").concat(a,",").concat(l).concat(f,"L").concat(a,",").concat(p,"L").concat(s,",").concat(u).concat(m,"Z"):"polyline"===e.pathType?"M".concat(s,",").concat(o,"L").concat(c,",").concat(o,"L").concat(c,",").concat(l,"L").concat(a,",").concat(l,"\n    ").concat(f,"L").concat(a,",").concat(p,"L").concat(c,",").concat(p,"L").concat(c,",").concat(u,"L").concat(s,",").concat(u).concat(m,"Z"):"M".concat(s,",").concat(o,"C").concat(c,",").concat(o,",").concat(h,",").concat(l,",").concat(a,",").concat(l,"\n  ").concat(f,"L").concat(a,",").concat(p,"C").concat(h,",").concat(p,",").concat(c,",").concat(u,",").concat(s,",").concat(u).concat(m,"Z")},FU=(e,t)=>{var i;const n=null!==(i=e.curvature)&&void 0!==i?i:.5,r="number"==typeof t?e.thickness*t:e.thickness;let s=e.y0,a=e.y1,o=e.x0,l=e.x1,c=s+n*(a-s),h=a+n*(s-a),d=e=>e;!1!==e.round&&(d=Math.round,s=Math.round(s),a=Math.round(a),o=Math.round(o),l=Math.round(l),c=Math.round(c),h=Math.round(h)),"line"===e.pathType||e.pathType,"center"===e.align?(o=d(e.x0-r/2),l=d(e.x1-r/2)):"end"===e.align?(o=d(e.x0+e.thickness/2-r),l=d(e.x1+e.thickness/2-r)):(o=d(e.x0-e.thickness/2),l=d(e.x1-e.thickness/2));const u=d(o+r),p=d(l+r),g=Math.abs(a-s)>1e-6,f=e.endArrow&&g?"L".concat(d(l-r/2),",").concat(a,"L").concat(d((l+p)/2),",").concat(d(a+r),"L").concat(d(p+r/2),",").concat(a):"",m=e.startArrow&&g?"L".concat(d(u+r/2),",").concat(s,"L").concat(d((u+o)/2),",").concat(d(s-r),"L").concat(d(o-r/2),",").concat(s):"";return"line"===e.pathType?"M".concat(o,",").concat(s,"L").concat(l,",").concat(a).concat(f,"L").concat(p,",").concat(a,"L").concat(u,",").concat(s).concat(m,"Z"):"polyline"===e.pathType?"M".concat(o,",").concat(s,"L").concat(o,",").concat(c,"L").concat(l,",").concat(c,"L").concat(l,",").concat(a,"\n    ").concat(f,"L").concat(p,",").concat(a,"L").concat(p,",").concat(c,"L").concat(u,",").concat(c,"L").concat(u,",").concat(s).concat(m,"Z"):"M".concat(o,",").concat(s,"C").concat(o,",").concat(c,",").concat(l,",").concat(h,",").concat(l,",").concat(a,"\n  ").concat(f,"L").concat(p,",").concat(a,"C").concat(p,",").concat(h,",").concat(u,",").concat(c,",").concat(u,",").concat(s).concat(m,"Z")},BU=(e,t,i,n)=>{var r;const s=null!==(r=e.direction)&&void 0!==r?r:null==n?void 0:n.direction,a=["vertical","TB","BT"].includes(s)?FU:jU,o="number"==typeof e.ratio&&e.ratio>=0&&e.ratio<=1,l=Object.keys(e);return["x0","y0","x1","y1"].every((e=>l.includes(e)))?{back:{path:o?a(e,1):""},front:{path:a(e,o?e.ratio:1)}}:{}},NU=(e,t,i)=>{const n={x0:e.getGraphicAttribute("x0",!1),x1:e.getGraphicAttribute("x1",!1),y0:e.getGraphicAttribute("y0",!1),y1:e.getGraphicAttribute("y1",!1),thickness:e.getGraphicAttribute("thickness",!1),round:e.getGraphicAttribute("round",!1),align:e.getGraphicAttribute("align",!1),pathType:e.getGraphicAttribute("pathType",!1),endArrow:e.getGraphicAttribute("endArrow",!1),startArrow:e.getGraphicAttribute("startArrow",!1)};return Object.keys(n).forEach((e=>{P(n[e])&&delete n[e]})),{from:Object.assign({},n,{x1:n.x0,y1:n.y0}),to:n}},zU=(e,t,i)=>{const n={x0:e.getGraphicAttribute("x0",!0),x1:e.getGraphicAttribute("x1",!0),y0:e.getGraphicAttribute("y0",!0),y1:e.getGraphicAttribute("y1",!0),thickness:e.getGraphicAttribute("thickness",!0),round:e.getGraphicAttribute("round",!0),align:e.getGraphicAttribute("align",!0),pathType:e.getGraphicAttribute("pathType",!0),endArrow:e.getGraphicAttribute("endArrow",!0),startArrow:e.getGraphicAttribute("startArrow",!0)};return Object.keys(n).forEach((e=>{P(n[e])&&delete n[e]})),{from:n,to:Object.assign({},n,{x1:n.x0,y1:n.y0})}},HU=(e,t,i)=>{const n={thickness:e.getGraphicAttribute("thickness",!1),round:e.getGraphicAttribute("round",!1),align:e.getGraphicAttribute("align",!1),pathType:e.getGraphicAttribute("pathType",!1),endArrow:e.getGraphicAttribute("endArrow",!1),startArrow:e.getGraphicAttribute("startArrow",!1)};return Object.keys(n).forEach((e=>{P(n[e])&&delete n[e]})),{from:Object.assign(Object.assign({x0:e.getGraphicAttribute("x0",!0),x1:e.getGraphicAttribute("x1",!0),y0:e.getGraphicAttribute("y0",!0),y1:e.getGraphicAttribute("y1",!0)},n),n),to:Object.assign({x0:e.getGraphicAttribute("x0",!1),x1:e.getGraphicAttribute("x1",!1),y0:e.getGraphicAttribute("y0",!1),y1:e.getGraphicAttribute("y1",!1)},n)}};class VU extends kk{constructor(){super(...arguments),this.type=VU.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,x0:0,y0:0,x1:100,y1:100,thickness:1,round:!0})}_initProduct(e){const t=this.getVGrammarView(),i=this.getProductId(),n=this.getStyle("direction");this._product=t.glyph("linkPath",null!=e?e:t.rootMark).id(i).configureGlyph({direction:n}),this._compiledProductId=i}}VU.type="linkPath";const UU=()=>{nm.registerGlyph("linkPath",{back:"path",front:"path"}).registerFunctionEncoder(BU).registerChannelEncoder("backgroundStyle",((e,t)=>({back:t}))).registerDefaultEncoder((()=>({back:{zIndex:0},front:{zIndex:1}}))),nm.registerAnimationType("linkPathGrowIn",NU),nm.registerAnimationType("linkPathGrowOut",zU),nm.registerAnimationType("linkPathUpdate",HU),pP(),lP(),_n.registerMark(VU.type,VU)};class WU extends YR{constructor(){super(...arguments),this.type=Bt.sankey,this._nodeLayoutZIndex=zw.Node,this._labelLayoutZIndex=zw.Label,this._viewBox=new cl,this._handleAdjacencyClick=e=>{const t=e.item;t&&t.mark.id().includes("node")?this._handleNodeAdjacencyClick(t):t&&t.mark.id().includes("link")?this._handleLinkAdjacencyClick(t):this._handleClearEmpty()},this._handleRelatedClick=e=>{const t=e.item;t&&t.mark.id().includes("node")?this._handleNodeRelatedClick(t):t&&t.mark.id().includes("link")?this._handleLinkRelatedClick(t):this._handleClearEmpty()},this._handleClearEmpty=()=>{const e=this._nodeMark.getProduct();if(!e||!e.elements||!e.elements.length)return;const t=e.elements,i=this._linkMark.getProduct();if(!i||!i.elements||!i.elements.length)return;const n=i.elements,r=this._labelMark.getProduct();if(!r||!r.elements||!r.elements.length)return;const s=r.elements;t.forEach((e=>{e.clearStates()})),n.forEach((e=>{e.clearStates()})),s.forEach((e=>{e.clearStates()}))},this._handleNodeAdjacencyClick=e=>{const t=e.getDatum(),i=[t.key];if(this._linkMark){const e=this._linkMark.getProduct();if(!e||!e.elements||!e.elements.length)return;e.elements.forEach(((e,n)=>{e.clearStates();const r=e.getDatum(),s=(null==r?void 0:r.parents)?"parents":"source";if(z(r[s]).includes(t.key)){let n;if(i.includes(r.source)||i.push(r.source),i.includes(r.target)||i.push(r.target),"parents"===s){const e=r.datum;n=(e?e.filter((e=>e.parents.some((e=>e.key===t.key)))).reduce(((e,t)=>e+t.value),0):0)/r.value}e.addState("selected",{ratio:n})}else r.target===t.key?i.includes(r.source)||i.push(r.source):e.useStates(["blur"])}))}if(this._nodeMark){const e=this._nodeMark.getProduct();if(!e||!e.elements||!e.elements.length)return;e.elements.forEach((e=>{e.clearStates(),i.includes(e.getDatum().key)||e.useStates(["blur"])}))}if(this._labelMark){const e=this._labelMark.getProduct();if(!e||!e.elements||!e.elements.length)return;e.elements.forEach((e=>{e.clearStates(),i.includes(e.getDatum().key)||e.useStates(["blur"])}))}},this._handleLinkAdjacencyClick=e=>{const t=e.getDatum(),i=[t.source,t.target];if(this._linkMark){const t=this._linkMark.getProduct();if(!t||!t.elements||!t.elements.length)return;t.elements.forEach((t=>{t.clearStates(),t===e?t.addState("selected",{ratio:1}):t.useStates(["blur"])}))}if(this._nodeMark){const e=this._nodeMark.getProduct();if(!e||!e.elements||!e.elements.length)return;e.elements.forEach((e=>{e.clearStates(),i.includes(e.getDatum().key)||e.useStates(["blur"])}))}if(this._labelMark){const e=this._labelMark.getProduct();if(!e||!e.elements||!e.elements.length)return;e.elements.forEach((e=>{e.clearStates(),i.includes(e.getDatum().key)||e.useStates(["blur"])}))}},this._handleNodeRelatedClick=e=>{var t;const i=e.getDatum(),n=this._nodeMark.getProduct();if(!n||!n.elements||!n.elements.length)return;const r=n.elements,s=this._linkMark.getProduct();if(!s||!s.elements||!s.elements.length)return;const a=s.elements;if("source"===((null===(t=a[0].getDatum())||void 0===t?void 0:t.parents)?"parents":"source")){const e=[i.key],t=[];if(a.forEach(((n,s)=>{var a,o,l,c;n.clearStates();const h=n.getDatum(),d=(null==h?void 0:h.parents)?"parents":"source";if(z(h[d]).includes(i.key)){if(t.includes(null!==(a=h.key)&&void 0!==a?a:h.index)||t.push(null!==(o=h.key)&&void 0!==o?o:h.index),e.includes(h.source)||e.push(h.source),!e.includes(h.target)){e.push(h.target);let i=r.find((e=>e.data[0].key===h.target)).data[0].sourceLinks;for(;(null==i?void 0:i.length)>0;){const n=[];return i.forEach((i=>{var s,a;if(!t.includes(null!==(s=i.key)&&void 0!==s?s:i.index)&&(t.push(null!==(a=i.key)&&void 0!==a?a:i.index),!e.includes(i.target))){e.push(i.target);const t=r.find((e=>e.data[0].key===i.target));n.push(t.data[0].targetLinks)}})),void(i=n)}}}else if(h.target===i.key&&(t.includes(null!==(l=h.key)&&void 0!==l?l:h.index)||t.push(null!==(c=h.key)&&void 0!==c?c:h.index),!e.includes(h.source))){e.push(h.source);let i=r.find((e=>e.data[0].key===h.source)).data[0].targetLinks;for(;(null==i?void 0:i.length)>0;){const n=[];return i.forEach((i=>{var s,a;if(!t.includes(null!==(s=i.key)&&void 0!==s?s:i.index)&&(t.push(null!==(a=i.key)&&void 0!==a?a:i.index),!e.includes(i.source))){e.push(i.source);const t=r.find((e=>e.data[0].key===i.source));n.push(t.data[0].targetLinks)}})),void(i=n)}}})),this._linkMark){const e=this._linkMark.getProduct();if(!e||!e.elements||!e.elements.length)return;e.elements.forEach(((e,i)=>{var n;e.clearStates(),t.includes(null!==(n=e.getDatum().key)&&void 0!==n?n:e.getDatum().index)?e.useStates(["selected"]):e.useStates(["blur"])}))}if(this._nodeMark){const t=this._nodeMark.getProduct();if(!t||!t.elements||!t.elements.length)return;t.elements.forEach((t=>{t.clearStates(),e.includes(t.getDatum().key)||t.useStates(["blur"])}))}if(this._labelMark){const t=this._labelMark.getProduct();if(!t||!t.elements||!t.elements.length)return;t.elements.forEach((t=>{t.clearStates(),e.includes(t.getDatum().key)||t.useStates(["blur"])}))}}else{const e=[i.key],t=i.targetLinks.reduce(((e,t)=>(z(t.datum).forEach((t=>{const n=t.parents,r=n.length;for(let s=0;s<r;s++){const r=n[s].key,a=n[s+1]?n[s+1].key:i.key,o=t.value,l=e.find((e=>e.source===r&&e.target===a));l?l.value+=o:e.push({source:r,target:a,value:o})}})),e)),[]);if(a.forEach(((n,r)=>{n.clearStates();const s=n.getDatum(),a=(null==s?void 0:s.parents)?"parents":"source",o=s.datum,l=o?o.filter((e=>e[a].some((e=>e.key===i.key)))):null,c=t.find((e=>e.source===s.source&&e.target===s.target));if(l&&l.length){e.includes(s.source)||e.push(s.source),e.includes(s.target)||e.push(s.target);const t=l.reduce(((e,t)=>e+t.value),0)/s.value;return n.useStates(["selected"]),void n.addState("selected",{ratio:t})}if(c)return e.includes(s.source)||e.push(s.source),e.includes(s.target)||e.push(s.target),n.useStates(["selected"]),void n.addState("selected",{ratio:c.value/s.value});n.useStates(["blur"])})),this._nodeMark){const t=this._nodeMark.getProduct();if(!t||!t.elements||!t.elements.length)return;t.elements.forEach((t=>{t.clearStates(),e.includes(t.getDatum().key)||t.useStates(["blur"])}))}if(this._labelMark){const t=this._labelMark.getProduct();if(!t||!t.elements||!t.elements.length)return;t.elements.forEach((t=>{t.clearStates(),e.includes(t.getDatum().key)||t.useStates(["blur"])}))}}},this._handleLinkRelatedClick=e=>{var t;const i=this._nodeMark.getProduct();if(!i||!i.elements||!i.elements.length)return;const n=i.elements,r=this._linkMark.getProduct();if(!r||!r.elements||!r.elements.length)return;const s=r.elements;if("source"===((null===(t=e.getDatum())||void 0===t?void 0:t.parents)?"parents":"source")){if(this._linkMark){const e=this._linkMark.getProduct();if(!e||!e.elements||!e.elements.length)return;e.elements.forEach((e=>{e.clearStates()}))}if(this._nodeMark){const e=this._nodeMark.getProduct();if(!e||!e.elements||!e.elements.length)return;e.elements.forEach((e=>{e.clearStates()}))}if(this._labelMark){const e=this._labelMark.getProduct();if(!e||!e.elements||!e.elements.length)return;e.elements.forEach((e=>{e.clearStates()}))}}else{const t=e.getDatum(),i=[t.source,t.target],r=[];if(z(t.datum).forEach((e=>{const t=e.parents,i=t.length;for(let n=0;n<i-1;n++){const i=t[n].key,s=t[n+1].key,a=e.value,o=r.find((e=>e.source===i&&e.target===s));r.push({source:t[n].key,target:t[n+1].key,value:e.value}),o?o.value+=a:r.push({source:i,target:s,value:a})}})),s.forEach((e=>{e.clearStates();const n=e.getDatum(),s=n.datum;if(n.source===t.source&&n.target===t.target)return e.useStates(["selected"]),void e.addState("selected",{ratio:1});const a=s?s.filter((e=>{const i=e.parents.map((e=>e.key));return i.includes(t.source)&&i.includes(t.target)})):null;if(a&&a.length){i.includes(n.source)||i.push(n.source),i.includes(n.target)||i.push(n.target);const r=a.filter((e=>e.parents.some(((i,n)=>{var r;return i.key===t.source&&(null===(r=e.parents[n+1])||void 0===r?void 0:r.key)===t.target})))).reduce(((e,t)=>e+t.value),0),s=r/n.value;return e.useStates(["selected"]),void e.addState("selected",{ratio:s})}const o=r.find((e=>e.source===n.source&&e.target===n.target));if(o)return i.includes(n.source)||i.push(n.source),i.includes(n.target)||i.push(n.target),e.useStates(["selected"]),void e.addState("selected",{ratio:o.value/n.value});e.useStates(["blur"])})),n.forEach((e=>{e.clearStates(),i.includes(e.getDatum().key)||e.useStates(["blur"])})),this._labelMark){const e=this._labelMark.getProduct();if(!e||!e.elements||!e.elements.length)return;e.elements.forEach((e=>{e.clearStates(),i.includes(e.getDatum().key)||e.useStates(["blur"])}))}}}}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}setAttrFromSpec(){var e,t,i;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!==(e=this._spec.seriesField)&&void 0!==e?e:this._spec.categoryField),this._labelLimit=null!==(i=null===(t=this._spec.label)||void 0===t?void 0:t.limit)&&void 0!==i?i:100}initData(){var e,t,i,n;super.initData();const r=this.getViewData(),s=this.getRawData();if(s&&r){uo(this._dataSet,"sankeyLayout",PU),uo(this._dataSet,"sankeyFormat",OU),s.transform({type:"sankeyFormat"},!1),r.transform({type:"sankeyLayout",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),sourceField:this._spec.sourceField,targetField:this._spec.targetField,valueField:this._spec.valueField,direction:this._spec.direction,nodeAlign:null!==(e=this._spec.nodeAlign)&&void 0!==e?e:"justify",nodeGap:null!==(t=this._spec.nodeGap)&&void 0!==t?t:8,nodeWidth:null!==(i=this._spec.nodeWidth)&&void 0!==i?i:10,linkWidth:this._spec.linkWidth,minStepWidth:this._spec.minStepWidth,minNodeHeight:null!==(n=this._spec.minNodeHeight)&&void 0!==n?n:4,minLinkHeight:this._spec.minLinkHeight,iterations:this._spec.iterations,nodeKey:this._spec.nodeKey,linkSortBy:this._spec.linkSortBy,nodeSortBy:this._spec.nodeSortBy,setNodeLayer:this._spec.setNodeLayer},level:wo.sankeyLayout});const{dataSet:a}=this._option;uo(a,"sankeyNodes",MU),uo(a,"flatten",jH);const o=new R(a,{name:"sankey-node-".concat(this.id,"-data")});o.parse([this.getViewData()],{type:"dataview"}),o.transform({type:"sankeyNodes"}),o.transform({type:"flatten",options:{callback:e=>{if(e.datum){const t=e.datum[e.depth];return Object.assign(Object.assign({},e),t)}return e}}},!1),o.transform({type:"addVChartProperty",options:{beforeCall:MR.bind(this),call:IR}},!1),this._nodesSeriesData=new ER(this._option,o),uo(a,"sankeyLinks",IU);const l=new R(a,{name:"sankey-link-".concat(this.id,"-data")});l.parse([this.getViewData()],{type:"dataview"}),l.transform({type:"sankeyLinks"}),l.transform({type:"addVChartProperty",options:{beforeCall:MR.bind(this),call:IR}},!1),this._linksSeriesData=new ER(this._option,l)}}initMark(){var e,t,i;const n=this._createMark(WU.mark.node,{isSeriesMark:!0,key:Cw,dataView:this._nodesSeriesData.getDataView(),dataProductId:this._nodesSeriesData.getProductId(),customShape:null===(e=this._spec.node)||void 0===e?void 0:e.customShape});n&&(n.setZIndex(this._nodeLayoutZIndex),this._nodeMark=n);const r=this._createMark(WU.mark.link,{key:Cw,dataView:this._linksSeriesData.getDataView(),dataProductId:this._linksSeriesData.getProductId(),customShape:null===(t=this._spec.link)||void 0===t?void 0:t.customShape});if(r&&(this._linkMark=r),null===(i=this._spec.label)||void 0===i?void 0:i.visible){const e=this._createMark(WU.mark.label,{key:Cw,dataView:this._nodesSeriesData.getDataView(),dataProductId:this._nodesSeriesData.getProductId()});e&&(this._labelMark=e)}}initMarkStyle(){this._initNodeMarkStyle(),this._initLinkMarkStyle(),this._initLabelMarkStyle()}_initNodeMarkStyle(){const e=this._nodeMark;e&&(this.setMarkStyle(e,{x:e=>e.x0,x1:e=>e.x1,y:e=>e.y0,y1:e=>e.y1,fill:e=>{var t,i,n,r;return null!==(n=null===(i=null===(t=this._spec.node)||void 0===t?void 0:t.style)||void 0===i?void 0:i.fill)&&void 0!==n?n:null===(r=this._colorScale)||void 0===r?void 0:r.scale(this._getNodeNameFromData(e))}},fw.STATE_NORMAL,Tw.Mark),this._trigger.registerMark(e))}_initLinkMarkStyle(){var e;const t=this._linkMark;t&&(this.setMarkStyle(t,{x0:e=>e.x0,x1:e=>e.x1,y0:e=>e.y0,y1:e=>e.y1,thickness:e=>e.thickness,fill:e=>{var t,i,n,r,s,a;const o=null===(i=null===(t=this._spec.link)||void 0===t?void 0:t.style)||void 0===i?void 0:i.fill;if(o)return o;const l=this._spec.nodeKey||(null===(s=null===(r=null===(n=this._rawData.latestData[0])||void 0===n?void 0:n.nodes)||void 0===r?void 0:r[0])||void 0===s?void 0:s.children)?e.source:this.getNodeList()[e.source];return null===(a=this._colorScale)||void 0===a?void 0:a.scale(l)},direction:null!==(e=this._spec.direction)&&void 0!==e?e:"horizontal"},fw.STATE_NORMAL,Tw.Series),this._trigger.registerMark(t))}_initLabelMarkStyle(){this._labelMark&&("vertical"===this._spec.direction?"inside-start"===this._spec.label.position?this.setMarkStyle(this._labelMark,{x:e=>e.x0,y:e=>(e.y0+e.y1)/2,fill:"#ffffff",text:e=>this._createText(e),limit:e=>{var t;return null!==(t=this._spec.label.limit)&&void 0!==t?t:e.x1-e.x0},textAlign:"left",textBaseline:"middle"},fw.STATE_NORMAL,Tw.Series):"inside-middle"===this._spec.label.position?this.setMarkStyle(this._labelMark,{x:e=>(e.x0+e.x1)/2,y:e=>(e.y0+e.y1)/2,fill:"#ffffff",text:e=>this._createText(e),limit:e=>{var t;return null!==(t=this._spec.label.limit)&&void 0!==t?t:e.x1-e.x0},textAlign:"center",textBaseline:"middle"},fw.STATE_NORMAL,Tw.Series):"inside-end"===this._spec.label.position?this.setMarkStyle(this._labelMark,{x:e=>e.x1,y:e=>(e.y0+e.y1)/2,fill:"#ffffff",text:e=>this._createText(e),limit:e=>{var t;return null!==(t=this._spec.label.limit)&&void 0!==t?t:e.x1-e.x0},textAlign:"right",textBaseline:"middle"},fw.STATE_NORMAL,Tw.Series):this.setMarkStyle(this._labelMark,{x:e=>(e.x0+e.x1)/2,y:e=>e.y1>=this._viewBox.y2?e.y0:e.y1,fill:e=>{var t,i,n,r;return null!==(n=null===(i=null===(t=this._spec.node)||void 0===t?void 0:t.style)||void 0===i?void 0:i.fill)&&void 0!==n?n:null===(r=this._colorScale)||void 0===r?void 0:r.scale(this._getNodeNameFromData(e))},text:e=>this._createText(e),limit:this._labelLimit,textAlign:"center",textBaseline:e=>e.y1>=this._viewBox.y2?"bottom":"top"},fw.STATE_NORMAL,Tw.Series):"inside-start"===this._spec.label.position?this.setMarkStyle(this._labelMark,{x:e=>e.x0,y:e=>(e.y0+e.y1)/2,fill:"#ffffff",text:e=>this._createText(e),limit:e=>{var t;return null!==(t=this._spec.label.limit)&&void 0!==t?t:e.x1-e.x0},textAlign:"left",textBaseline:"middle"},fw.STATE_NORMAL,Tw.Series):"inside-middle"===this._spec.label.position?this.setMarkStyle(this._labelMark,{x:e=>(e.x0+e.x1)/2,y:e=>(e.y0+e.y1)/2,fill:"#ffffff",text:e=>this._createText(e),limit:e=>{var t;return null!==(t=this._spec.label.limit)&&void 0!==t?t:e.x1-e.x0},textAlign:"center",textBaseline:"middle"},fw.STATE_NORMAL,Tw.Series):"inside-end"===this._spec.label.position?this.setMarkStyle(this._labelMark,{x:e=>e.x1,y:e=>(e.y0+e.y1)/2,fill:"#ffffff",text:e=>this._createText(e),limit:e=>{var t;return null!==(t=this._spec.label.limit)&&void 0!==t?t:e.x1-e.x0},textAlign:"right",textBaseline:"middle"},fw.STATE_NORMAL,Tw.Series):"left"===this._spec.label.position?this.setMarkStyle(this._labelMark,{x:e=>e.x0,y:e=>(e.y0+e.y1)/2,fill:e=>{var t,i,n,r;return null!==(n=null===(i=null===(t=this._spec.node)||void 0===t?void 0:t.style)||void 0===i?void 0:i.fill)&&void 0!==n?n:null===(r=this._colorScale)||void 0===r?void 0:r.scale(this._getNodeNameFromData(e))},text:e=>this._createText(e),limit:this._labelLimit,textAlign:"right",textBaseline:"middle"},fw.STATE_NORMAL,Tw.Series):"right"===this._spec.label.position?this.setMarkStyle(this._labelMark,{x:e=>e.x1,y:e=>(e.y0+e.y1)/2,fill:e=>{var t,i,n,r;return null!==(n=null===(i=null===(t=this._spec.node)||void 0===t?void 0:t.style)||void 0===i?void 0:i.fill)&&void 0!==n?n:null===(r=this._colorScale)||void 0===r?void 0:r.scale(this._getNodeNameFromData(e))},text:e=>this._createText(e),limit:this._labelLimit,textAlign:"left",textBaseline:"middle"},fw.STATE_NORMAL,Tw.Series):this.setMarkStyle(this._labelMark,{x:e=>e.x1>=this._viewBox.x2?e.x0:e.x1,y:e=>(e.y0+e.y1)/2,fill:e=>{var t,i,n,r;return null!==(n=null===(i=null===(t=this._spec.node)||void 0===t?void 0:t.style)||void 0===i?void 0:i.fill)&&void 0!==n?n:null===(r=this._colorScale)||void 0===r?void 0:r.scale(this._getNodeNameFromData(e))},text:e=>this._createText(e),limit:this._labelLimit,textAlign:e=>e.x1>=this._viewBox.x2?"right":"left",textBaseline:"middle"},fw.STATE_NORMAL,Tw.Series),this._labelMark.setZIndex(this._labelLayoutZIndex),this._trigger.registerMark(this._labelMark))}_createText(e){var t;if(P(e)||P(e.datum))return"";let i=e.datum[this._spec.categoryField]||"";return(null===(t=this._spec.label)||void 0===t?void 0:t.formatMethod)&&(i=this._spec.label.formatMethod(i,e.datum)),i}initAnimation(){var e,t,i,n,r;const s={direction:this.direction,growFrom:()=>{var e,t;return"horizontal"===this.direction?null===(e=this._xAxisHelper)||void 0===e?void 0:e.getScale(0).scale(0):null===(t=this._yAxisHelper)||void 0===t?void 0:t.getScale(0).scale(0)}},a=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset;this._nodeMark&&this._nodeMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("sankeyNode"))||void 0===i?void 0:i(s,a),FR("node",this._spec,this._markAttributeContext))),this._linkMark&&this._linkMark.setAnimationConfig(jR(null===(n=_n.getAnimationInKey("sankeyLinkPath"))||void 0===n?void 0:n(s,a),FR("link",this._spec,this._markAttributeContext))),this._labelMark&&this._labelMark.setAnimationConfig(jR(null===(r=_n.getAnimationInKey("fadeInOut"))||void 0===r?void 0:r(),FR("label",this._spec,this._markAttributeContext)))}initEvent(){var e,t,i;super.initEvent(),null===(e=this._nodesSeriesData.getDataView())||void 0===e||e.target.addListener("change",this.nodesSeriesDataUpdate.bind(this)),null===(t=this._linksSeriesData.getDataView())||void 0===t||t.target.addListener("change",this.linksSeriesDataUpdate.bind(this));const n=null!==(i=this._spec.emphasis)&&void 0!==i?i:{};!0!==this._option.disableTriggerEvent&&(n.enable&&"adjacency"===n.effect&&("hover"===n.trigger?this.event.on("pointerover",{level:Dr.chart},this._handleAdjacencyClick):this.event.on("pointerdown",{level:Dr.chart},this._handleAdjacencyClick)),n.enable&&"related"===n.effect&&("hover"===n.trigger?this.event.on("pointerover",{level:Dr.chart},this._handleRelatedClick):this.event.on("pointerdown",{level:Dr.chart},this._handleRelatedClick)))}nodesSeriesDataUpdate(){this._nodesSeriesData.updateData(),this._setNodeOrdinalColorScale()}linksSeriesDataUpdate(){this._linksSeriesData.updateData()}initTooltip(){this._tooltipHelper=new RU(this),this._nodeMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodeMark),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}_setNodeOrdinalColorScale(){var e,t,i,n,r;const s=null===(t=null===(e=this._option)||void 0===e?void 0:e.globalScale)||void 0===t?void 0:t.getScale("color");if(null==s?void 0:s._specified)return void(this._colorScale=s);let a,o;s&&(a=s.domain(),o=s.range()),o||(o=this._getDataScheme()),a&&!P(a[0])||(a=this.getNodeList(),a.length>10&&(o=null===(i=this._getDataScheme()[1])||void 0===i?void 0:i.scheme));const l=new uk;null===(r=(n=l.domain(a)).range)||void 0===r||r.call(n,o),this._colorScale=l}getNodeList(){var e,t,i;return(null===(e=this._rawData.latestData[0])||void 0===e?void 0:e.nodes)?(null===(t=this._rawData.latestData[0].nodes[0])||void 0===t?void 0:t.children)?Array.from(this.extractNamesFromTree(this._rawData.latestData[0].nodes,this._spec.categoryField)):this._rawData.latestData[0].nodes.map(((e,t)=>e[this._spec.categoryField])):null===(i=this._rawData.latestData[0])||void 0===i?void 0:i.values.map(((e,t)=>e[this._spec.categoryField]))}_getNodeNameFromData(e){return(null==e?void 0:e.datum)?null==e?void 0:e.datum[this._spec.categoryField]:e[this._spec.categoryField]}extractNamesFromTree(e,t){const i=new Set;return e.forEach((e=>{i.add(e[t]),e.children&&this.extractNamesFromTree(e.children,t).forEach((e=>i.add(e)))})),i}getDimensionField(){return[this._spec.categoryField]}getMeasureField(){return[this._valueField]}getRawDataStatisticsByField(e,t){var i;return this._rawStatisticsCache||(this._rawStatisticsCache={}),this._rawStatisticsCache[e]||(this._viewDataStatistics&&this.getViewData().transformsArr.length<=1&&(null===(i=this._viewDataStatistics.latestData)||void 0===i?void 0:i[e])?this._rawStatisticsCache[e]=this._viewDataStatistics.latestData[e]:this._rawData&&(this._rawStatisticsCache[e]={values:this._collectByField(e)})),this._rawStatisticsCache[e]}_collectByField(e){var t,i,n;const r=[],s=null===(i=null===(t=this.getRawData())||void 0===t?void 0:t.latestData)||void 0===i?void 0:i[0];if(!s)return[];if(s.links)(null===(n=s.nodes)||void 0===n?void 0:n.length)&&s.nodes.forEach((e=>{e[this._seriesField]&&r.push(e[this._seriesField])}));else if(s.nodes){const e=new Set;return EU(e,s.nodes,this._seriesField),Array.from(e)}return r}onLayoutEnd(e){super.onLayoutEnd(e),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this.getViewData().reRunAllTransform(),this._nodesSeriesData.updateData(),this._linksSeriesData.updateData()}getDefaultShapeType(){return"square"}_noAnimationDataKey(e,t){}getActiveMarks(){return[this._nodeMark,this._linkMark]}}WU.type=Bt.sankey,WU.mark=Si;const GU=()=>{nm.registerTransform("sankey",{transform:AU,markPhase:"beforeJoin"},!0),LD(),UU(),LB(),_n.registerAnimation("sankeyNode",((e,t)=>Object.assign({appear:DU(e,t)},wM))),_n.registerAnimation("sankeyLinkPath",((e,t)=>({appear:LU(t),enter:{type:"linkPathGrowIn"},exit:{type:"linkPathGrowOut"},disappear:{type:"linkPathGrowOut"}}))),kM(),_n.registerSeries(WU.type,WU)};class KU extends oD{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,sourceField:e.sourceField,targetField:e.targetField,direction:e.direction,nodeAlign:e.nodeAlign,nodeGap:e.nodeGap,nodeWidth:e.nodeWidth,linkWidth:e.linkWidth,minStepWidth:e.minStepWidth,minNodeHeight:e.minNodeHeight,minLinkHeight:e.minLinkHeight,iterations:e.iterations,nodeKey:e.nodeKey,linkSortBy:e.linkSortBy,nodeSortBy:e.nodeSortBy,setNodeLayer:e.setNodeLayer,node:e.node,link:e.link,label:e.label,emphasis:e.emphasis}),i=this.seriesType;return i&&(t.type=i,t[i]=e[i]),t}transformSpec(e){super.transformSpec(e);const t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))})):e.series=[t]}}class YU extends fD{constructor(){super(...arguments),this.transformerConstructor=KU,this.type="sankey",this.seriesType=Bt.sankey}}YU.type="sankey",YU.seriesType=Bt.sankey,YU.view="singleDefault",YU.transformerConstructor=KU;class XU extends SR{getDefaultTooltipPattern(e,t){if("mark"===e)return{visible:!0,activeType:e,title:{key:void 0,value:this.titleValueCallback,hasShape:!1},content:[{key:this.contentKeyCallback,value:this.contentValueCallback,hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1}]};if("dimension"===e&&t){const i={key:void 0,value:this._getDimensionData,hasShape:!1},n=[];return t.forEach((e=>{let{data:t}=e;return t.forEach((e=>{let{series:t}=e;"rangeArea"===t.type&&n.push({seriesId:t.id,key:this.contentKeyCallback,value:e=>"horizontal"===this.series.getSpec().direction?e[this.series.getSpec().xField[0]]+"-"+e[this.series.getSpec().xField[1]]:e[this.series.getSpec().yField[0]]+"-"+e[this.series.getSpec().yField[1]],hasShape:!0,shapeType:this.contentShapeTypeCallback,shapeColor:this.contentShapeColorCallback,shapeStroke:this.contentShapeColorCallback,shapeHollow:!1})}))})),{visible:!0,activeType:e,title:i,content:n}}return null}}class qU extends CD{constructor(){super(...arguments),this.type=Bt.rangeArea}initMark(){var e;this._areaMark=this._createMark(qU.mark.area,{defaultMorphElementKey:this.getDimensionField()[0],groupKey:this._seriesField,isSeriesMark:!0,customShape:null===(e=this._spec.area)||void 0===e?void 0:e.customShape})}initMarkStyle(){var e,t,i,n,r;const s=null!==(i=null===(t=null===(e=this.getSpec().area)||void 0===e?void 0:e.style)||void 0===t?void 0:t.curveType)&&void 0!==i?i:null===(r=null===(n=this.getSpec().line)||void 0===n?void 0:n.style)||void 0===r?void 0:r.curveType,a=s===XR?"vertical"===this._direction?"monotoneX":"monotoneY":s,o=this._areaMark;o&&("vertical"===this._direction?this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),y1:e=>{if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:t}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._spec.yField[1]),{bandPosition:this._bandPosition})},y:this.dataToPositionY.bind(this)},"normal",Tw.Series):this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:e=>{if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:t}=this._xAxisHelper;return t(this.getDatumPositionValues(e,this._spec.xField[1]),{bandPosition:this._bandPosition})},y:this.dataToPositionY.bind(this),orient:this._direction},"normal",Tw.Series),this.setMarkStyle(o,{fill:this.getColorAttribute(),stroke:!1},"normal",Tw.Series),"zero"!==this._invalidType&&this.setMarkStyle(o,{defined:this._getInvalidDefined,connectedType:this._getInvalidConnectType()},"normal",Tw.Series),this.setMarkStyle(o,{curveType:a},"normal",Tw.Built_In),this._trigger.registerMark(o))}initTooltip(){this._tooltipHelper=new XU(this),this._areaMark&&this._tooltipHelper.activeTriggerSet.dimension.add(this._areaMark)}viewDataStatisticsUpdate(e){super.viewDataStatisticsUpdate(e),this.encodeDefined(this._areaMark,"defined")}}qU.type=Bt.rangeArea,qU.mark=Mi;class ZU extends lD{_getDefaultSeriesSpec(e){var t,i;const n=Object.assign({},super._getDefaultSeriesSpec(e));return n.area=e.area,"horizontal"===e.direction?n.xField=null!==(t=e.xField)&&void 0!==t?t:[e.minField,e.maxField]:n.yField=null!==(i=e.yField)&&void 0!==i?i:[e.minField,e.maxField],n.stack=!1,n}transformSpec(e){super.transformSpec(e),dw(e)}}class QU extends fD{constructor(){super(...arguments),this.transformerConstructor=ZU,this.type="rangeArea",this.seriesType=Bt.rangeArea}}QU.type="rangeArea",QU.seriesType=Bt.rangeArea,QU.view="singleDefault",QU.transformerConstructor=ZU;function $U(e){if(e)return e.type===Sn.Band?e.bandwidth():e.type===Sn.Point?e.step():void 0}class JU extends Wy{encodeState(e,t,i){return super.encodeState(e,t,i),this._updateComponentEncoders(e),this}_updateComponentEncoders(e){this._encoders||(this._encoders={});const t=this.spec.encode[e];if(t&&"update"===e){const i=this.parameters(),n=Gf(t)?null:Object.keys(t).reduce(((e,n)=>(ly(t[n])&&(e[n]=Xf(t[n].scale,i)),e)),{});this._encoders[e]={callback:(e,i,r)=>{const s=uy(t,e,i,r);if(P(s.size)){const e=n.x?$U(n.x):void 0,t=n.y?$U(n.y):void 0;P(e)&&P(t)?s.size=10:P(e)?s.size=t:P(t)&&(s.size=e),s.size=[e,t]}return P(s.shape)&&(s.shape="rect"),s}}}else this._encoders[e]=t}_getEncoders(){var e;return null!==(e=this._encoders)&&void 0!==e?e:{}}getAttributeTransforms(){return[{channels:["size","padding"],transform:(e,t,i)=>{if(l(i.padding)&&i.padding>0)e.size=v(i.size)?i.size.map((e=>Math.max(e-i.padding,1))):Math.max(i.size-i.padding,1);else if(v(i.padding)&&2===i.padding.length){const t=v(i.size)?i.size:[i.size,i.size];e.size=[Math.max(t[0]-i.padding[0],1),Math.max(t[1]-i.padding[1],1)]}else e.size=i.size},storedAttrs:"paddingAttrs"}].concat(Qv.symbol)}release(){super.release(),this._encoders=null}}JU.markType=Vr.cell;class eW extends iD{constructor(){super(...arguments),this.type=eW.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{padding:0})}}eW.type="cell";const tW=()=>{_n.registerMark(eW.type,eW),Ok(),RS(),nm.registerGraphic(Vr.cell,Ix),nm.registerMark(Vr.cell,JU)};function iW(e){return!1===e?{}:{type:"fadeIn"}}function nW(e){if(L(e))return[e,e,e,e];if(v(e)){const t=e.length;if(1===t){const t=e[0];return[t,t,t,t]}if(2===t){const[t,i]=e;return[t,i,t,i]}if(3===t){const[t,i,n]=e;return[t,i,n,i]}if(4===t)return e}if(D(e)){const{top:t=0,right:i=0,bottom:n=0,left:r=0}=e;return[t,i,n,r]}return[0,0,0,0]}class rW extends SR{getDefaultTooltipPattern(e,t){const i=super.getDefaultTooltipPattern(e,t);return x(i)&&"dimension"===e&&(i.visible=!1),i}}class sW extends UR{_transformLabelSpec(e){this._addMarkLabelSpec(e,"cell")}}class aW extends YR{constructor(){super(...arguments),this.type=Bt.heatmap,this.transformerConstructor=sW}getFieldValue(){return this._fieldValue}setFieldValue(e){this._fieldValue=z(e)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFieldValue(this._spec.valueField)}initMark(){var e,t;const i={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold};this._cellMark=this._createMark(aW.mark.cell,{morph:zR(this._spec,aW.mark.cell.name),defaultMorphElementKey:this.getDimensionField()[0],isSeriesMark:!0,progressive:i,customShape:null===(e=this._spec.cell)||void 0===e?void 0:e.customShape}),this._backgroundMark=this._createMark(aW.mark.cellBackground,{progressive:i,customShape:null===(t=this._spec.cellBackground)||void 0===t?void 0:t.customShape})}initMarkStyle(){this.initCellMarkStyle(),this.initCellBackgroundMarkStyle()}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this.getMeasureField()[0]]})}initCellMarkStyle(){this.setMarkStyle(this._cellMark,{x:e=>this.dataToPositionX(e),y:e=>this.dataToPositionY(e),size:()=>[this.getCellSize(this._xAxisHelper),this.getCellSize(this._yAxisHelper)],fill:this.getColorAttribute()},"normal",Tw.Series),this._trigger.registerMark(this._cellMark)}initCellBackgroundMarkStyle(){var e,t,i;const n=nW(null!==(i=null===(t=null===(e=this._spec.cellBackground)||void 0===e?void 0:e.style)||void 0===t?void 0:t.padding)&&void 0!==i?i:0);this.setMarkStyle(this._backgroundMark,{x:e=>{const t=this.getCellSize(this._xAxisHelper);return this.dataToPositionX(e)-t/2+n[3]},y:e=>{const t=this.getCellSize(this._yAxisHelper);return this.dataToPositionY(e)-t/2+n[0]},width:()=>this.getCellSize(this._xAxisHelper)-n[1]-n[3],height:()=>this.getCellSize(this._yAxisHelper)-n[0]-n[2]},"normal",Tw.Series)}getColorAttribute(){var e;return{scale:null!==(e=this._option.globalScale.getScale("color"))&&void 0!==e?e:this._getDefaultColorScale(),field:this.getFieldValue[0]}}initAnimation(){var e,t,i;const n=null===(t=null===(e=this._spec)||void 0===e?void 0:e.animationAppear)||void 0===t?void 0:t.preset,r=KR(this);this._cellMark.setAnimationConfig(jR(null===(i=_n.getAnimationInKey("heatmap"))||void 0===i?void 0:i(n),FR("cell",this._spec,this._markAttributeContext),r))}getCellSize(e){var t,i;return null!==(i=null===(t=e.getBandwidth)||void 0===t?void 0:t.call(e,0))&&void 0!==i?i:6}initTooltip(){this._tooltipHelper=new rW(this),this._cellMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._cellMark)}getDefaultShapeType(){return"square"}getDimensionField(){return[].concat(this.fieldX,this.fieldY)}getMeasureField(){return this.getFieldValue()}getActiveMarks(){return[this._cellMark]}}aW.type=Bt.heatmap,aW.mark=Oi,aW.transformerConstructor=sW;const oW=()=>{LB(),tW(),_n.registerAnimation("heatmap",((e,t)=>Object.assign(Object.assign({},wM),{appear:iW(t)}))),_n.registerSeries(aW.type,aW)};class lW extends lD{_getDefaultSeriesSpec(e){const t=super._getDefaultSeriesSpec(e);return Object.assign(Object.assign({},t),{valueField:e.valueField,cell:e.cell})}}class cW extends fD{constructor(){super(...arguments),this.transformerConstructor=lW,this.type="heatmap",this.seriesType=Bt.heatmap}}cW.type="heatmap",cW.seriesType=Bt.heatmap,cW.view="singleDefault",cW.transformerConstructor=lW;const hW="".concat(Ge,"_CORRELATION_X"),dW="".concat(Ge,"_CORRELATION_Y"),uW="".concat(Ge,"_CORRELATION_SIZE"),pW=(e,t)=>{var i,n,r,s,a,o,c,h,d,u,p,g,f,m,y;if(!e||!(null==t?void 0:t.view)||!v(e))return e;const b=t.view();if(b.x1-b.x0==0||b.y1-b.y0==0||b.x1-b.x0==-1/0||b.x1-b.x0==1/0||b.y1-b.y0==-1/0||b.y1-b.y0==1/0)return e;const _=el(null!==(i=t.startAngle)&&void 0!==i?i:-90),x=el(null!==(n=t.endAngle)&&void 0!==n?n:270),S=Math.max((b.x1-b.x0)/2,(b.y1-b.y0)/2),w=Zy(null!==(r=t.innerRadius)&&void 0!==r?r:0,S),C=Zy(t.outerRadius,S),k=[l(null===(s=t.center)||void 0===s?void 0:s[0])?t.center[0]:b.x0+Zy(null!==(o=null===(a=t.center)||void 0===a?void 0:a[0])&&void 0!==o?o:"50%",b.x1-b.x0),l(null===(c=t.center)||void 0===c?void 0:c[1])?t.center[1]:b.y0+Zy(null!==(d=null===(h=t.center)||void 0===h?void 0:h[1])&&void 0!==d?d:"50%",b.y1-b.y0)],A=Tm(t.field),E=e.map(A),[T,O]=yN(E),M=T===O?e=>(w+C)/2:e=>w+(C-w)*(e-T)/(O-T),I=P(t.radiusField)?A:Tm(t.radiusField),R=null!==(p=null===(u=null==t?void 0:t.radiusRange)||void 0===u?void 0:u[1])&&void 0!==p?p:5;let D=e=>R;if(I){const[i,n]=I!==A?yN(e.map(I)):[T,O],r=null!==(f=null===(g=t.radiusRange)||void 0===g?void 0:g[0])&&void 0!==f?f:5,s=null!==(y=null===(m=t.radiusRange)||void 0===m?void 0:m[1])&&void 0!==y?y:5;i!==n&&(D=e=>r+(s-r)*(I(e)-i)/(n-i))}const L=Math.min(_,x),j=Math.max(_,x),F=gW(L,j,e.length),B=[],N=(j-L)/60;return e.forEach(((e,t)=>{const i=M(E[t]),n=D(e);let r,s,a=F[t];for(let o=0;o<60&&(r=k[0]+i*Math.cos(a),s=k[1]+i*Math.sin(a),fW({x:r,y:s,size:n},B)||r-n<b.x0||r+n>b.x1||s-n<b.y0||s+n>b.y1);o++)o<59&&(a+=N,a>j?a=L:a<L&&(a=j));B.push(Object.assign({[hW]:r,[dW]:s,[uW]:n},e))})),B},gW=(e,t,i)=>{let n=0,r=Math.max(Math.ceil(2*(t-e)/Math.PI),2),s=(t-e)/r,a=0,o=1,l=0,c=0;const h=[];let d=e;for(;l<i;)c<r&&(h.push(d+(c%2?Math.floor(c/2)+Math.floor(r/2):c/2)*s*o),c++),l++,c===r&&(c=0,a+=1,o*=-1,0===n?n=s/2:n/=2,d=-1===o?t-n:e+n,a>=2&&(s/=2,r*=2));return h},fW=(e,t)=>!(!t||!t.length)&&t.some((t=>Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(e.size+t.size,2))),mW=(e,t)=>{if(!e||!v(e))return[];const{keyword:i,categoryField:n}=t,r=e[0].latestData[0];return{[n]:i,[Cw]:null==r?void 0:r[Cw],[Aw]:null==r?void 0:r[Aw]}};class vW extends kk{constructor(){super(...arguments),this.type=vW.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,ripple:0})}_initProduct(e){const t=this.getVGrammarView(),i=this.getProductId();this._product=t.glyph("ripplePoint",null!=e?e:t.rootMark).id(i),this._compiledProductId=i}}vW.type="ripple";const yW=()=>{_n.registerMark(vW.type,vW),nm.registerGlyph("ripplePoint",{symbol:"symbol",ripple0:"symbol",ripple1:"symbol",ripple2:"symbol"}).registerFunctionEncoder(((e,t,i,n)=>{var r;const s=Math.max(0,Math.min(e.ripple,1)),a=null!==(r=e.size)&&void 0!==r?r:i.getGraphicAttribute("size"),o=.5*a;return{ripple0:{size:a+o*s,fillOpacity:.75-.25*s},ripple1:{size:a+o*(1+s),fillOpacity:.5-.25*s},ripple2:{size:a+o*(2+s),fillOpacity:.25-.25*s}}})).registerDefaultEncoder((()=>({ripple0:{fillOpacity:.75},ripple1:{fillOpacity:.5},ripple2:{fillOpacity:.25}}))),pP(),dP()},bW=(e,t)=>"fadeIn"===t?{type:"fadeIn"}:{type:"scaleIn"};class _W extends UR{_transformLabelSpec(e){this._addMarkLabelSpec(e,"nodePoint"),this._addMarkLabelSpec(e,"centerPoint","centerLabel")}}class xW extends EF{constructor(){super(...arguments),this.type=Bt.correlation,this.transformerConstructor=_W,this._viewBox=new cl}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}getSeriesField(){return this._seriesField}setSeriesField(e){x(e)&&(this._seriesField=e)}getSizeField(){return this._sizeField}setSizeField(e){x(e)&&(this._sizeField=e)}getSizeRange(){return this._sizeRange}setSizeRange(e){x(e)&&(this._sizeRange=e)}setAttrFromSpec(){super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(this._spec.seriesField),this.setSizeField(this._spec.sizeField),this.setSizeRange(this._spec.sizeRange)}initData(){var e,t,i;if(super.initData(),!this._data)return;uo(this._dataSet,"correlation",pW);const n=new f;po(n,"dataview",y),uo(n,"correlationCenter",mW);const r=new R(n,{name:"".concat(this.type,"_").concat(this.id,"_center")});r.parse([this.getViewData()],{type:"dataview"}),r.transform({type:"correlationCenter",options:{keyword:null!==(i=null===(t=null===(e=this._spec.centerLabel)||void 0===e?void 0:e.style)||void 0===t?void 0:t.text)&&void 0!==i?i:"",categoryField:this._spec.categoryField}}),this._centerSeriesData=new ER(this._option,r)}_statisticViewData(){super._statisticViewData(),this._data.getDataView().transform({type:"correlation",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),field:this._spec.valueField,radiusRange:this._spec.sizeRange,radiusField:this._spec.sizeField,center:[this._spec.centerX,this._spec.centerY],innerRadius:this._spec.innerRadius,outerRadius:this._spec.outerRadius,startAngle:this._spec.startAngle,endAngle:this._spec.endAngle}})}initMark(){var e,t;const i=this._createMark(xW.mark.nodePoint,{groupKey:this._seriesField,isSeriesMark:!0,key:Cw,customShape:null===(e=this._spec.nodePoint)||void 0===e?void 0:e.customShape});i&&(i.setZIndex(zw.Node),this._nodePointMark=i);const n=this._createMark(xW.mark.ripplePoint,{key:Cw,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId()});n&&(this._ripplePointMark=n);const r=this._createMark(xW.mark.centerPoint,{key:Cw,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId(),customShape:null===(t=this._spec.centerPoint)||void 0===t?void 0:t.customShape});r&&(r.setZIndex(zw.Node),this._centerPointMark=r)}initMarkStyle(){this._initNodePointMarkStyle(),this._initRipplePointMarkStyle(),this._initCenterPointMarkStyle()}_initNodePointMarkStyle(){var e,t,i,n;const r=this._nodePointMark;if(!r)return;const s=null!==(t=null===(e=this._spec.nodePoint)||void 0===e?void 0:e.style)&&void 0!==t?t:{};this.setMarkStyle(r,{x:e=>e[hW],y:e=>e[dW],size:e=>e[uW],fill:null!==(i=s.fill)&&void 0!==i?i:this.getColorAttribute(),fillOpacity:null!==(n=s.fillOpacity)&&void 0!==n?n:1,lineWidth:0},fw.STATE_NORMAL,Tw.Series),this._trigger.registerMark(r)}_initRipplePointMarkStyle(){var e,t,i,n,r;const s=this._ripplePointMark;if(!s)return;const a=null!==(t=null===(e=this._spec.ripplePoint)||void 0===e?void 0:e.style)&&void 0!==t?t:{};this.setMarkStyle(s,{x:()=>{var e;return null!==(e=this._spec.centerX)&&void 0!==e?e:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var e;return null!==(e=this._spec.centerY)&&void 0!==e?e:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:null!==(i=a.fill)&&void 0!==i?i:this.getColorAttribute(),opacity:null!==(n=a.fillOpacity)&&void 0!==n?n:.2,ripple:null!==(r=a.ripple)&&void 0!==r?r:0},fw.STATE_NORMAL,Tw.Series)}_initCenterPointMarkStyle(){var e,t,i,n,r,s;const a=this._centerPointMark;a&&(this.setMarkStyle(a,{x:()=>{var e;return null!==(e=this._spec.centerX)&&void 0!==e?e:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var e;return null!==(e=this._spec.centerY)&&void 0!==e?e:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>.2*Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:null!==(i=null===(t=null===(e=this._spec.centerPoint)||void 0===e?void 0:e.style)||void 0===t?void 0:t.fill)&&void 0!==i?i:this.getColorAttribute(),fillOpacity:null!==(s=null===(r=null===(n=this._spec.centerPoint)||void 0===n?void 0:n.style)||void 0===r?void 0:r.fillOpacity)&&void 0!==s?s:1},fw.STATE_NORMAL,Tw.Series),this._trigger.registerMark(a))}initTooltip(){super.initTooltip(),this._nodePointMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodePointMark)}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this._categoryField],z:this.dataToPositionZ.bind(this)},fw.STATE_NORMAL,Tw.Series)}initAnimation(){var e,t;const i=null===(e=this._spec.animationAppear)||void 0===e?void 0:e.preset;this._nodePointMark.setAnimationConfig(jR(null===(t=_n.getAnimationInKey("correlation"))||void 0===t?void 0:t({},i),FR("nodePoint",this._spec,this._markAttributeContext)))}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}getActiveMarks(){return[this._nodePointMark,this._centerPointMark]}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(e){super.onLayoutEnd(e),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this._rawData.reRunAllTransform(),this.getViewData().reRunAllTransform()}}xW.type=Bt.correlation,xW.mark=Pi,xW.transformerConstructor=_W;const SW=()=>{rD(),yW(),_n.registerSeries(xW.type,xW),_n.registerAnimation("correlation",((e,t)=>Object.assign({appear:bW(0,t)},SM)))};class wW extends oD{_getDefaultSeriesSpec(e){const t=Object.assign(Object.assign({},super._getDefaultSeriesSpec(e)),{categoryField:e.categoryField,valueField:e.valueField,seriesField:e.seriesField,sizeField:e.sizeField,sizeRange:e.sizeRange,centerX:e.centerX,centerY:e.centerY,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,ripplePoint:e.ripplePoint,centerPoint:e.centerPoint,centerLabel:e.centerLabel,nodePoint:e.nodePoint,label:e.label}),i=Bt.correlation;return t.type=i,t[i]=e[i],t}transformSpec(e){super.transformSpec(e);const t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach((e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])}))})):e.series=[t]}}class CW extends fD{constructor(){super(...arguments),this.transformerConstructor=wW,this.type="correlation",this.seriesType=Bt.correlation}}CW.type="correlation",CW.seriesType=Bt.correlation,CW.view="singleDefault",CW.transformerConstructor=wW;function kW(e){return 2===e.length&&L(e[0])&&L(e[1])&&e[1]>=e[0]}function AW(e,t){const i=t[1]-t[0],n=t[1]*t[0]<0;let r=t[0]<=0?0-t[0]:0,s=t[1]>0?t[1]-0:0;0===i?t[0]<0?(r=1,s=0):t[0]>0&&(r=0,s=1):(r/=i,s/=i);const a=e.getDomainSpec();return{total:i,negative:r,positive:s,includeZero:n,domain:t,extendable_min:!L(a.min),extendable_max:!L(a.max)}}function EW(e,t){const{positive:i,negative:n,extendable_min:r,extendable_max:s,domain:a}=e,{positive:o,negative:l,extendable_min:c,extendable_max:h,domain:d}=t;if(o>0){if(!c)return!1;let e=n/i;s&&(e=n/Math.max(i,o),a[1]=-a[0]/e),d[0]=-d[1]*e}else if(l>0){if(!h)return!1;let e=i/n;r&&(e=i/Math.max(n,n),a[0]=-a[1]/e),d[1]=-d[0]*e}return!0}function TW(e,t){const{extendable_min:i,extendable_max:n,domain:r}=e,{positive:s,negative:a,domain:o}=t;return(0!==s||0!==a)&&!(s>0&&!n)&&!(a>0&&!i)&&(r[0]=o[0],r[1]=o[1],!0)}function OW(e,t){const{positive:i,negative:n,extendable_max:r,domain:s}=e,{positive:a,negative:o,extendable_min:l,domain:c}=t;if(r&&l){const e=Math.max(n,o)/Math.max(i,a);s[1]=-s[0]/e,c[0]=-c[1]*e}else if(l){const e=n/i;c[0]=-c[1]*e}else{if(!r)return!1;{const e=o/a;s[1]=-s[0]/e}}return!0}function PW(e,t){const{extendable_min:i,domain:n}=e,{extendable_max:r,domain:s}=t;return!(!i||!r)&&(n[0]=-n[1],s[1]=-s[0],!0)}const MW=e=>e.map(((e,t)=>({index:t,value:e}))),IW=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=new hl(e).expand(i/2),r=new hl(t).expand(i/2);return n.intersects(r)};function RW(e,t,i){return i>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2)}function DW(e,t){for(let i,n=1,r=e.length,s=e[0];n<r;s=i,++n)if(i=e[n],RW(s.AABBBounds,i.AABBBounds,t))return!0;return!1}const LW=(e,t,i)=>{var n;const{labelStyle:r,axisOrientType:s,labelFlush:a,labelFormatter:o,startAngle:l=0}=i;let c=null!==(n=r.angle)&&void 0!==n?n:0;"vertical"===r.direction&&(c+=el(90));const h=["bottom","top"].includes(s),d=["left","right"].includes(s);let u=1,p=0;h||(d?(u=0,p=1):l&&(u=Math.cos(l),p=-Math.sin(l)));const g=qM(r),f=t.map(((i,n)=>{var s,l;const f=o?o(i):"".concat(i),{width:m,height:v}=g.quickMeasure(f),y=Math.max(m,12),b=Math.max(v,12),_=e.scale(i),x=u*_,S=p*_;let w,C,k=x,A=S;w=a&&h&&0===n?"left":a&&h&&n===t.length-1?"right":null!==(s=r.textAlign)&&void 0!==s?s:"center","right"===w?k-=y:"center"===w&&(k-=y/2),C=a&&d&&0===n?"top":a&&d&&n===t.length-1?"bottom":null!==(l=r.textBaseline)&&void 0!==l?l:"middle","bottom"===C?A-=b:"middle"===C&&(A-=b/2);const E=(new hl).set(k,A,k+y,A+b);return c&&E.rotate(c,x,S),E}));return f},jW=(e,t)=>{var i,n,r,s,a;if(!e)return e;const o=null===(i=null==t?void 0:t.targetAxis)||void 0===i?void 0:i.call(t);if(!o)return e;const l=null===(n=null==t?void 0:t.currentAxis)||void 0===n?void 0:n.call(t);if(!l)return e;const c=null===(r=l.getTickData())||void 0===r?void 0:r.getDataView();if(!c)return e;if(!c.transformsArr.find((e=>"ticks"===e.type)))return e;const h=l.getScale();if(!h)return e;const d=null===(a=null===(s=o.getTickData())||void 0===s?void 0:s.getDataView())||void 0===a?void 0:a.latestData;if(!(null==d?void 0:d.length))return e;const u=o.getScale();if(!u)return e;const p=u.domain(),g=p[1]-p[0];if(0===g)return e;const f=h.domain(),m=f[1]-f[0];if(0===g)return e;const v=d.map((e=>{const t=(e.value-p[0])/g;return m*t+f[0]}));return MW(v)};class FW{constructor(e){this.id=X(),this.name="".concat(e,"_").concat(this.id)}onAdd(e){this.service=e}}class BW extends FW{constructor(){super(BW.type),this.type="AxisSyncPlugin"}_checkEnableSync(e){if(!Cn(e.getScale().type))return!1;const t=e.getSpec().sync;return!!(null==t?void 0:t.axisId)&&t}_getTargetAxis(e,t){const i=e.getOption().getChart().getComponentByUserId(t.axisId);return(null==i?void 0:i.type.startsWith("cartesianAxis"))?i:null}onInit(e,t){const i=this._checkEnableSync(t);if(!i)return;if(!i.zeroAlign)return;const n=this._getTargetAxis(t,i);n&&t.event.on(Ir.scaleDomainUpdate,{filter:e=>{let{model:i}=e;return i.id===t.id||i.id===n.id}},(()=>{((e,t)=>{const i=e.getScale(),n=t.getScale();if(!i||!n)return;if(!Cn(i.type)||!Cn(n.type))return;const r=i.domain().slice(),s=n.domain().slice();if(!kW(r)||!kW(s))return;const a=AW(e,r),o=AW(t,s),{positive:l,negative:c,extendable_min:h,extendable_max:d,includeZero:u}=a,{positive:p,negative:g,extendable_min:f,extendable_max:m,includeZero:v}=o;if(0===l&&0===c){if(!TW(a,o))return}else if(0===p&&0===g){if(!TW(o,a))return}else if(u||v)if(u&&!v){if(!EW(a,o))return}else if(v&&!u){if(!EW(o,a))return}else{if(c===g)return;if(c>g){if(!OW(a,o))return}else if(!OW(o,a))return}else{if(0===c&&0===p){if(!PW(a,o))return}else if(0===g&&0===l&&!PW(o,a))return;if(0===c&&0===g)if(0===r[0]&&s[0]>0){if(!f)return;s[0]=0}else{if(!(0===s[0]&&r[0]>0))return;if(!h)return;r[0]=0}if(0===l&&0===p)if(0===r[1]&&s[1]>0){if(!m)return;s[1]=0}else{if(!(0===s[1]&&r[1]>0))return;if(!d)return;r[1]=0}}i.domain(r),n.domain(s)})(n,t)}))}onDidCompile(e,t){const i=this._checkEnableSync(t);if(!i)return;const n=this._getTargetAxis(t,i);if(n&&i.tickAlign){uo(t.getOption().dataSet,"tickAlign",jW);const e={targetAxis:()=>n,currentAxis:()=>t};t.addTransformToTickData({type:"tickAlign",options:e,level:Number.MAX_SAFE_INTEGER},!1)}}}BW.pluginType="component",BW.type="AxisSyncPlugin";const NW={AxisSyncPlugin:BW},zW={parity:function(e){return e.filter(((e,t)=>t%2==0))},greedy:function(e,t){let i;return e.filter(((e,n)=>(!n||!RW(i.AABBBounds,e.AABBBounds,t))&&(i=e,!0)))}},HW=(e,t,i,n)=>LW(e,t,i).map((e=>n?[e.x1,e.x2,e.width()]:[e.y1,e.y2,e.height()])),VW=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.max(e[0],t[0])-i/2<=Math.min(e[1],t[1])+i/2},UW=(e,t)=>e[1]<t[0]?t[0]-e[1]:t[1]<e[0]?e[0]-t[1]:0,WW=(e,t,i,n,r,s)=>{let a=0,o=0,l=-1,c=Number.MAX_VALUE;const h=n=>{let r=!0,s=0;do{s+n<e.length&&VW(t[s],t[s+n],i)&&(r=!1),s+=n}while(r&&s<e.length);return r},d=KB(r,e.length,(e=>h(e)?1:-1));let u=d;do{if(u>d&&!s&&!h(u))u++;else{if(!n){o=u;break}{const n=e.length-1;let r,s=0;r=e.length%u>0?e.length-e.length%u+u:e.length;do{if(r-=u,r!==n&&!VW(t[r],t[n],i))break;s++}while(r>0);if(r===n){o=u,a=s;break}{const i=Math.floor(e.length/u)-s+1;if(i<l)break;{l=i;const e=UW(t[r],t[n]),h=r-u>=0?UW(t[r-u],t[r]):e,d=Math.abs(e-h);if(d<c&&(c=d,o=u,a=s),e<=h)break}}}u++}}while(u<=e.length);return{step:o,delCount:a}},GW=(e,t)=>{const{tickCount:i,forceTickCount:n,tickStep:r,getRadius:s,labelOffset:a,labelGap:o=0,labelStyle:l}=t,c=null==s?void 0:s();if(!c)return MW(e.domain());let h;if(x(r))h=e.stepTicks(r);else if(x(n))h=e.forceTicks(n);else if(x(i)){const t=e.range(),n=Math.abs(t[t.length-1]-t[0]),r=Q(i)?i({axisLength:n,labelStyle:l}):i;h=e.ticks(r)}else if(t.sampling){const i=e.domain(),n=e.range(),r=((e,t,i)=>{var n;const{labelStyle:r,getRadius:s,labelOffset:a,labelFormatter:o}=i,l=null==s?void 0:s(),c=null!==(n=r.angle)&&void 0!==n?n:0,h=qM(r);return t.map((t=>{const i=o?o(t):"".concat(t),{width:n,height:r}=h.quickMeasure(i),s=Math.max(n,12),d=Math.max(r,12),u=e.scale(t);let p=0,g=0;const f=sr(u),{x:m,y:v}=nl({x:0,y:0},l+a,u);return p=m+("right"===f.align?-s:"center"===f.align?-s/2:0),g=v+("bottom"===f.baseline?-d:"middle"===f.baseline?-d/2:0),(new hl).set(p,g,p+s,g+d).rotate(c,p+s/2,g+d/2)}))})(e,i,t),s=U(n),l=V(n),d=Math.abs(l-s)*(c+a)/i.length,{step:u,delCount:p}=KW(i,r,o,Math.floor(r.reduce(((e,t)=>Math.min(e,t.width(),t.height())),Number.MAX_VALUE)/d));h=e.stepTicks(u),h=h.slice(0,h.length-p)}else h=e.domain();return MW(h)},KW=(e,t,i,n)=>{let r=n;do{let n=!0;r++;let s=0;do{s+r<e.length&&IW(t[s],t[s+r],i)&&(n=!1),s+=r}while(n&&s<e.length);if(n)break}while(r<=e.length);let s=0;if(e.length>2){let i=e.length-e.length%r;for(i>=e.length&&(i-=r);i>0&&IW(t[0],t[i]);)s++,i-=r}return{step:r,delCount:s}},YW=(e,t)=>{if(Cn(e.type))return((e,t)=>{if(!Cn(e.type))return MW(e.domain());const i=e.range(),n=Math.abs(i[i.length-1]-i[0]);if(n<2)return MW([e.domain()[0]]);const{tickCount:r,forceTickCount:s,tickStep:a,noDecimals:o=!1,labelStyle:l}=t;let c;if(x(a))c=e.stepTicks(a);else if(x(s))c=e.forceTicks(s);else if("d3"===t.tickMode){const t=Q(r)?r({axisLength:n,labelStyle:l}):r;c=e.d3Ticks(null!=t?t:5,{noDecimals:o})}else{const t=Q(r)?r({axisLength:n,labelStyle:l}):r;c=e.ticks(null!=t?t:5,{noDecimals:o})}if(t.sampling&&("cartesian"===t.coordinateType||"polar"===t.coordinateType&&"radius"===t.axisOrientType)){const{labelGap:i=4,labelFlush:n}=t;let r=LW(e,c,t).map(((e,t)=>({AABBBounds:e,value:c[t]})));for(;r.length>=3&&DW(r,i);)r=zW.parity(r);const s=r.map((e=>e.value));s.length<3&&n&&(s.length>1&&s.pop(),H(s)!==H(c)&&s.push(H(c))),c=s}return MW(c)})(e,t);if(An(e.type)){if("cartesian"===t.coordinateType)return((e,t)=>{var i;const n=e.domain();if(!n.length)return[];const{tickCount:r,forceTickCount:s,tickStep:a,labelGap:o=4,axisOrientType:l,labelStyle:c}=t,h=(e=>["bottom","top","z"].includes(e))(l),d=e.range(),u=e.calculateWholeRangeSize();if(u<2)return t.labelLastVisible?MW([n[n.length-1]]):MW([n[0]]);let p;if(x(a))p=e.stepTicks(a);else if(x(s))p=e.forceTicks(s);else if(x(r)){const t=Q(r)?r({axisLength:u,labelStyle:c}):r;p=e.ticks(t)}else if(t.sampling){const r=(null!==(i=t.labelStyle.fontSize)&&void 0!==i?i:12)+2,s=U(d),a=V(d);if(n.length<=u/r){const i=(a-s)/n.length,r=HW(e,n,t,h),l=Math.min(...r.map((e=>e[2]))),c=WW(n,r,o,t.labelLastVisible,Math.floor(l/i),!1);p=e.stepTicks(c.step),t.labelLastVisible&&(c.delCount&&(p=p.slice(0,p.length-c.delCount)),p.push(n[n.length-1]))}else{const i=[n[0],n[Math.floor(n.length/2)],n[n.length-1]],r=HW(e,i,t,h);let l=null;r.forEach((e=>{l?l[2]<e[2]&&(l=e):l=e}));const c=a-s-o>0?Math.ceil(n.length*(o+l[2])/(a-s-o)):n.length-1;p=e.stepTicks(c),!t.labelLastVisible||p.length&&p[p.length-1]===n[n.length-1]||(p.length&&Math.abs(e.scale(p[p.length-1])-e.scale(n[n.length-1]))<l[2]&&(p=p.slice(0,-1)),p.push(n[n.length-1]))}}else p=e.domain();return MW(p)})(e,t);if("polar"===t.coordinateType&&"angle"===t.axisOrientType)return GW(e,t)}return MW(e.domain())},XW=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","visible","clip","pickable","childrenPickable","zIndex","cursor"];class qW extends du{constructor(e,t){super(e),(null==t?void 0:t.mode)&&(this.mode=t.mode,this.setMode(t.mode)),(null==t?void 0:t.skipDefault)&&(this.skipDefault=!0),this.setTheme({common:{strokeBoundsBuffer:0}}),this.attribute=e,this.onSetStage((()=>{this.render(),this.bindEvents()}))}setAttribute(e,t,i){k(this.attribute[e])&&k(t)&&!Q(this.attribute[e])&&!Q(t)?O(this.attribute[e],t):this.attribute[e]=t,XW.includes(e)||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!i&&!this.needUpdateTag(e)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}setAttributes(e,t){const i=Object.keys(e);this._mergeAttributes(e,i),i.every((e=>XW.includes(e)))||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!t&&!this.needUpdateTags(i)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}_mergeAttributes(e,t){P(t)&&(t=Object.keys(e));for(let i=0;i<t.length;i++){const n=t[i];!k(this.attribute[n])||Q(this.attribute[n])||Q(e[n])?this.attribute[n]=e[n]:O(this.attribute[n],e[n])}}bindEvents(){}_getNodeId(e){return"".concat(this.id,"-").concat(this.name,"-").concat(e)}_dispatchEvent(e,t){var i;const n=new Wh(e,t);n.manager=null===(i=this.stage)||void 0===i?void 0:i.eventSystem.manager,this.dispatchEvent(n)}}function ZW(){s_(),HE(),zO(),RS()}ZW();class QW extends qW{getStartAngle(){return this._startAngle}getEndAngle(){return this._endAngle}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},QW.defaultAttributes,e)),this.name="segment"}render(){this.removeAllChild(),this._reset();const{startSymbol:e,endSymbol:t,lineStyle:i,state:n,visible:r=!0,multiSegment:s,mainSegmentIndex:a}=this.attribute;if(!r)return;this._computeLineAngle();const o=this._renderSymbol(e,"start"),l=this._renderSymbol(t,"end");if(this.startSymbol=o,this.endSymbol=l,s){const e=[...this.attribute.points];if(L(a))e[a]=this._clipPoints(e[a]);else{const t=this._clipPoints(K(e));e[0][0]=t[0],e[e.length-1][e[e.length-1].length-1]=t[t.length-1]}e.forEach(((e,t)=>{var r,s;const a=bp.line(Object.assign(Object.assign({points:e},v(i)?null!==(r=i[t])&&void 0!==r?r:i[i.length-1]:i),{fill:!1}));a.name="".concat(this.name,"-line"),a.id=this._getNodeId("line"+t),ay(null==n?void 0:n.line)||(a.states=v(n.line)?null!==(s=n.line[t])&&void 0!==s?s:n.line[n.line.length-1]:n.line),this.add(a)}))}else{const e=bp.polygon(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},z(i)[0]),{fill:!1,closePath:!1}));e.name="".concat(this.name,"-line"),e.id=this._getNodeId("line"),ay(null==n?void 0:n.line)||(e.states=[].concat(n.line)[0]),this.add(e)}}_renderSymbol(e,t){const i=this._getMainSegmentPoints();if(!i.length)return;const{autoRotate:n=!0}=e;let r;if(e&&e.visible){const s=this._startAngle,a=this._endAngle,{state:o}=this.attribute,l=i[0],c=i[i.length-1],{refX:h=0,refY:d=0,refAngle:u=0,style:p,symbolType:g,size:f=12}=e;let m,v;"start"===t?(m={x:l.x+(L(s)?h*Math.cos(s)+d*Math.cos(s-Math.PI/2):0),y:l.y+(L(s)?h*Math.sin(s)+d*Math.sin(s-Math.PI/2):0)},v=s+Math.PI/2):(m={x:c.x+(L(a)?h*Math.cos(a)+d*Math.cos(a-Math.PI/2):0),y:c.y+(L(a)?h*Math.sin(a)+d*Math.sin(a-Math.PI/2):0)},v=a+Math.PI/2),r=bp.symbol(Object.assign(Object.assign(Object.assign({},m),{symbolType:g,size:f,angle:n?v+u:0,strokeBoundsBuffer:0}),p)),r.name="".concat(this.name,"-").concat(t,"-symbol"),r.id=this._getNodeId("".concat(t,"-symbol")),ay(null==o?void 0:o.symbol)||(r.states=o.symbol),this.add(r)}return r}_getMainSegmentPoints(){if(this._mainSegmentPoints)return this._mainSegmentPoints;const{points:e,multiSegment:t,mainSegmentIndex:i}=this.attribute;let n;return n=t?L(i)?e[i]:K(e):e,this._mainSegmentPoints=n,n}_clipPoints(e){const{startSymbol:t={},endSymbol:i={}}=this.attribute;let n=e;if(t.visible){const i=t.clip?t.size||10:0;n=[{x:e[0].x-i/2*(Math.cos(this._startAngle)||0),y:e[0].y-i/2*(Math.sin(this._startAngle)||0)},...n.slice(1)]}if(i.visible){const t=i.clip?i.size||10:0,r={x:e[e.length-1].x-t/2*(Math.cos(this._endAngle)||0),y:e[e.length-1].y-t/2*(Math.sin(this._endAngle)||0)};n=[...n.slice(0,n.length-1),r]}return n}_computeLineAngle(){const e=this._getMainSegmentPoints();if(e.length<=1)return;const t=e[0],i=e[1],n=e[e.length-2],r=e[e.length-1],s=[t.x-i.x,t.y-i.y],a=Math.atan2(s[1],s[0]),o=[r.x-n.x,r.y-n.y],l=Math.atan2(o[1],o[0]);this._startAngle=a,this._endAngle=l}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}function $W(e,t){return[e[0]*t,e[1]*t]}function JW(e,t,i){const n=function(e,t){const[i,n]=e,[r,s]=t,a=Math.sqrt((i*i+n*n)*(r*r+s*s)),o=a&&(i*r+n*s)/a;return Math.acos(Math.min(Math.max(o,-1),1))}(e,t),r=function(e,t){return e[0]*t[1]-t[0]*e[1]}(e,t)>=0;return i?r?2*Math.PI-n:n:r?n:2*Math.PI-n}function eG(e,t){e.forEachChildren((e=>{const i=t(e);e.isContainer&&!i&&eG(e,t)}))}QW.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:"#000"},startSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}}};const tG=e=>!P(e)&&!1!==e.visible;const iG=-.5*Math.PI,nG=1.5*Math.PI,rG="PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol";var sG;!function(e){e.selected="selected",e.selectedReverse="selected_reverse",e.hover="hover",e.hoverReverse="hover_reverse"}(sG||(sG={}));const aG={[sG.selectedReverse]:{},[sG.selected]:{},[sG.hover]:{},[sG.hoverReverse]:{}},oG={container:"",width:30,height:30,style:{}};var lG,cG;!function(e){e.innerView="inner-view",e.axisContainer="axis-container",e.labelContainer="axis-label-container",e.tickContainer="axis-tick-container",e.tick="axis-tick",e.subTick="axis-sub-tick",e.label="axis-label",e.title="axis-title",e.gridContainer="axis-grid-container",e.grid="axis-grid",e.gridRegion="axis-grid-region",e.line="axis-line",e.background="axis-background",e.axisLabelBackground="axis-label-background"}(lG||(lG={})),function(e){e.selected="selected",e.selectedReverse="selected_reverse",e.hover="hover",e.hoverReverse="hover_reverse"}(cG||(cG={}));const hG={[cG.selectedReverse]:{},[cG.selected]:{},[cG.hover]:{},[cG.hoverReverse]:{}},dG={title:{space:4,padding:0,textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:"#333",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#999",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}}},uG=(e,t,i)=>new $c(Object.assign({defaultFontParams:{fontFamily:rG,fontSize:11},getTextBounds:i?void 0:XM,specialCharSet:"-/: .,@%'\"~"+$c.ALPHABET_CHAR_SET+$c.ALPHABET_CHAR_SET.toUpperCase()},null!=t?t:{}),e);function pG(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rG;var n,r;if(!e)return{width:0,height:0};const s=XM({text:e,fontFamily:null!==(n=t.fontFamily)&&void 0!==n?n:i,fontSize:t.fontSize||12,fontWeight:t.fontWeight,textAlign:null!==(r=t.textAlign)&&void 0!==r?r:"center",textBaseline:t.textBaseline,ellipsis:!!t.ellipsis,maxLineWidth:t.maxLineWidth||1/0,lineHeight:t.fontSize||12});return{width:s.width(),height:s.height()}}function gG(){s_(),hw(),RS(),fO(),KT()}var fG=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};gG();class mG extends qW{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},mG.defaultAttributes,e)),this.name="tag"}render(){var e,t,i,n;const{text:r="",textStyle:s={},shape:a={},panel:o={},space:c=4,minWidth:h,maxWidth:d,padding:u=4,visible:p,state:g,type:f,textAlwaysCenter:v}=this.attribute,y=nW(u),b=this.createOrUpdateChild("tag-content",{x:0,y:0,zIndex:1},"group");let _,S=y[1]+y[3],w=y[0]+y[2],C=0,k=0;const{visible:A}=a,E=fG(a,["visible"]);if(m(A)){const e=(null==E?void 0:E.size)||10,t=l(e)?e:Math.max(e[0],e[1]);_=b.createOrUpdateChild("tag-shape",Object.assign(Object.assign({symbolType:"circle",size:e,strokeBoundsBuffer:0},E),{visible:A,x:t/2,y:t/2}),"symbol"),ay(null==g?void 0:g.shape)||(_.states=g.shape),A&&(k=t+c)}let T;if(S+=k,C+=k,"rich"===f){const i=Object.assign(Object.assign({textConfig:r,visible:x(r)&&!1!==p},s),{x:C,y:0,width:null!==(e=s.width)&&void 0!==e?e:0,height:null!==(t=s.height)&&void 0!==t?t:0});T=b.createOrUpdateChild("tag-text",i,"richtext");const{visible:n}=o,a=fG(o,["visible"]);if(p&&m(n)){const e=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},a),{visible:n&&!!r,x:T.AABBBounds.x1,y:T.AABBBounds.y1,width:T.AABBBounds.width(),height:T.AABBBounds.height()}),"rect");ay(null==g?void 0:g.panel)||(e.states=g.panel)}}else if("html"===f){const e=Object.assign(Object.assign({textConfig:[],visible:x(r)&&!1!==p,html:Object.assign(Object.assign({dom:r},oG),s)},s),{x:C,y:0});T=b.createOrUpdateChild("tag-text",e,"richtext");const{visible:t}=o,i=fG(o,["visible"]);if(p&&m(t)){const e=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},i),{visible:t&&!!r,x:T.AABBBounds.x1,y:T.AABBBounds.y1,width:T.AABBBounds.width(),height:T.AABBBounds.height()}),"rect");ay(null==g?void 0:g.panel)||(e.states=g.panel)}}else{const e=Object.assign(Object.assign({text:r,visible:x(r)&&!1!==p,lineHeight:null==s?void 0:s.fontSize},s),{x:C,y:0});P(e.lineHeight)&&(e.lineHeight=s.fontSize),T=b.createOrUpdateChild("tag-text",e,"text"),ay(null==g?void 0:g.text)||(T.states=g.text);const t=pG(e.text,s,null===(i=this.stage)||void 0===i?void 0:i.getTheme().text.fontFamily),c=t.width,u=t.height;S+=c;const f=null!==(n=a.size)&&void 0!==n?n:10,A=l(f)?f:Math.max(f[0],f[1]);w+=Math.max(u,a.visible?A:0);const{textAlign:E,textBaseline:O}=s;(x(h)||x(d))&&(x(h)&&S<h&&(S=h),x(d)&&S>d&&(S=d,T.setAttribute("maxLineWidth",d-y[1]-y[2])));let M=0,I=0;"center"===E?(M-=S/2,_&&_.setAttribute("x",(_.attribute.x||0)-c/2),b.setAttribute("x",-k/2)):"right"===E||"end"===E?(M-=S,_&&_.setAttribute("x",(_.attribute.x||0)-c),b.setAttribute("x",-y[1]-k)):"left"!==E&&"start"!==E||b.setAttribute("x",y[3]),!v||"left"!==E&&"start"!==E||T.setAttributes({x:C+S/2,textAlign:"center"}),"middle"===O?(I-=w/2,_&&_.setAttribute("y",0)):"bottom"===O?(I-=w,_&&_.setAttribute("y",-u/2),b.setAttribute("y",-y[2])):"top"===O&&(b.setAttribute("y",y[0]),_&&_.setAttribute("y",u/2));const{visible:R}=o,D=fG(o,["visible"]);if(p&&m(R)){const e=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},D),{visible:R&&!!r,x:M,y:I,width:S,height:w}),"rect");ay(null==g?void 0:g.panel)||(e.states=g.panel)}}}}mG.defaultAttributes={visible:!0,textStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},space:4,padding:4,shape:{fill:"#000"}};class vG extends qW{constructor(){super(...arguments),this.name="axis",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=e=>{const t=e.target;t!==this._lastHover&&t.name&&!ay(t.states)&&(t.addState(sG.hover,!0),eG(this.axisContainer,(e=>{e!==t&&e.name&&!ay(e.states)&&e.addState(sG.hoverReverse,!0)})),this._lastHover=t)},this._onUnHover=e=>{this._lastHover&&(eG(this.axisContainer,(e=>{e.name&&!ay(e.states)&&(e.removeState(sG.hoverReverse),e.removeState(sG.hover))})),this._lastHover=null)},this._onClick=e=>{const t=e.target;if(this._lastSelect===t&&t.hasState(sG.selected))return this._lastSelect=null,void eG(this.axisContainer,(e=>{e.name&&!ay(e.states)&&(e.removeState(sG.selectedReverse),e.removeState(sG.selected))}));t.name&&!ay(t.states)&&(t.addState(sG.selected,!0),eG(this.axisContainer,(e=>{e!==t&&e.name&&!ay(e.states)&&e.addState(sG.selectedReverse,!0)})),this._lastSelect=t)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(e){const t=S(this.attribute);O(this.attribute,e);const i=bp.group({x:this.attribute.x,y:this.attribute.y});return this.add(i),this._renderInner(i),this.removeChild(i),this.attribute=t,i.AABBBounds}render(){this.removeAllChild(),this._prevInnerView=this._innerView,this._innerView=bp.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent()}_bindEvent(){if(this.attribute.disableTriggerEvent)return;const{hover:e,select:t}=this.attribute;e&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),t&&this._innerView.addEventListener("pointerdown",this._onClick)}_renderInner(e){const{title:t,label:i,tick:n,line:r,items:s}=this.attribute,a=bp.group({x:0,y:0,zIndex:1});if(a.name=lG.axisContainer,a.id=this._getNodeId("container"),a.setMode(this.mode),this.axisContainer=a,e.add(a),r&&r.visible&&this.renderLine(a),s&&s.length&&(this.data=this._transformItems(s[0]),n&&n.visible&&this.renderTicks(a),i&&i.visible)){const e=bp.group({x:0,y:0,pickable:!1});e.name=lG.labelContainer,e.id=this._getNodeId("label-container"),this.axisLabelsContainer=e,a.add(e),s.forEach(((t,i)=>{const n=this.renderLabels(e,t,i),r=n.getChildren();this.beforeLabelsOverlap(r,t,n,i,s.length),this.handleLabelsOverlap(r,t,n,i,s.length),this.afterLabelsOverlap(r,t,n,i,s.length);let a=0,o=0,l="center",c="middle";r.forEach((e=>{var t;const i=e.attribute,n=null!==(t=i.angle)&&void 0!==t?t:0,r=e.AABBBounds;let s=r.width(),h=r.height();n&&(s=Math.abs(s*Math.cos(n)),h=Math.abs(h*Math.sin(n))),a=Math.max(a,s),o=Math.max(o,h),l=i.textAlign,c=i.textBaseline})),this.axisLabelLayerSize[i]={width:a,height:o,textAlign:l,textBaseline:c}}))}t&&t.visible&&this.renderTitle(a)}renderTicks(e){const t=this.getTickLineItems(),i=bp.group({x:0,y:0,pickable:!1});i.name=lG.tickContainer,i.id=this._getNodeId("tick-container"),e.add(i),t.forEach(((e,n)=>{var r;const s=bp.line(Object.assign({},this._getTickLineAttribute("tick",e,n,t)));if(s.name=lG.tick,s.id=this._getNodeId(e.id),ay(null===(r=this.attribute.tick)||void 0===r?void 0:r.state))s.states=aG;else{const e=this.data[n],t=O({},aG,this.attribute.tick.state);Object.keys(t).forEach((i=>{Q(t[i])&&(t[i]=t[i](e.rawValue,n,e,this.data))})),s.states=t}i.add(s)})),this.tickLineItems=t;const{subTick:n}=this.attribute;if(n&&n.visible){const e=this.getSubTickLineItems();e.length&&e.forEach(((e,r)=>{const s=bp.line(Object.assign({},this._getTickLineAttribute("subTick",e,r,t)));if(s.name=lG.subTick,s.id=this._getNodeId("".concat(r)),ay(n.state))s.states=aG;else{const i=O({},aG,n.state);Object.keys(i).forEach((n=>{Q(i[n])&&(i[n]=i[n](e.value,r,e,t))})),s.states=i}i.add(s)})),this.subTickLineItems=e}}renderLabels(e,t,i){const{dataFilter:n}=this.attribute.label;n&&Q(n)&&(t=n(t,i));const r=this._transformItems(t),s=bp.group({x:0,y:0,pickable:!1});return s.name="".concat(lG.labelContainer,"-layer-").concat(i),s.id=this._getNodeId("label-container-layer-".concat(i)),e.add(s),r.forEach(((e,t)=>{var n,a,o;const l=this._getLabelAttribute(e,t,r,i);let c;if("rich"===l.type?(l.textConfig=l.text,l.width=null!==(n=l.width)&&void 0!==n?n:0,l.height=null!==(a=l.height)&&void 0!==a?a:0,c=bp.richtext(l)):"html"===l.type?(l.textConfig=[],l.html=Object.assign(Object.assign({dom:l.text},oG),l),c=bp.richtext(l)):c=bp.text(l),c.name=lG.label,c.id=this._getNodeId("layer".concat(i,"-label-").concat(e.id)),ay(null===(o=this.attribute.label)||void 0===o?void 0:o.state))c.states=aG;else{const n=O({},aG,this.attribute.label.state);Object.keys(n).forEach((s=>{Q(n[s])&&(n[s]=n[s](e,t,r,i))})),c.states=n}s.add(c)})),s}renderTitle(e){const t=this.getTitleAttribute(),i=new mG(Object.assign({},t));i.name=lG.title,i.id=this._getNodeId("title"),e.add(i)}getVerticalCoord(e,t,i){const n=this.getVerticalVector(t,i,e);return{x:e.x+n[0],y:e.y+n[1]}}getTextAlign(e){let t="center";return rb(e[0],0)?rb(e[1],0)?Object.is(e[1],-0)?t="start":Object.is(e[0],-0)&&(t="end"):t="center":e[0]>0?t="start":e[0]<0&&(t="end"),t}getTickLineItems(){const{tick:e}=this.attribute,t=this.data,i=[],{alignWithLabel:n,inside:r=!1,length:s,dataFilter:a}=e;let o=1;return t.length>=2&&(o=t[1].value-t[0].value),(a&&Q(a)?a(t):t).forEach((e=>{let t=e.point,a=e.value;if(!n){const i=e.value-o/2;if(this.isInValidValue(i))return;t=this.getTickCoord(i),a=i}const l=this.getVerticalCoord(t,s,r);if("3d"===this.mode){const n=this.getVerticalVector(s,r,t);let o=0,c=0;Hn(n[0])>Hn(n[1])?o=Fn/2*(l.x>t.x?1:-1):c=Fn/2*(l.y>t.y?-1:1),i.push({start:t,end:l,value:a,id:"tick-".concat(e.id),anchor:[t.x,t.y],alpha:o,beta:c})}else i.push({start:t,end:l,value:a,id:"tick-".concat(e.id)})})),i}getSubTickLineItems(){const{subTick:e}=this.attribute,t=[],{count:i=4,inside:n=!1,length:r=2}=e,s=this.tickLineItems,a=s.length;if(a>=2)for(let o=0;o<a-1;o++){const e=s[o],a=s[o+1];for(let s=0;s<i;s++){const o=(s+1)/(i+1),l=(1-o)*e.value+o*a.value,c=this.getTickCoord(l),h=this.getVerticalCoord(c,r,n);t.push({start:c,end:h,value:l,id:"sub-tick-".concat(l)})}}return t}_getTickLineAttribute(e,t,i,n){let r=Br(this.attribute,"".concat(e,".style"));const s=this.data[i];r=Q(r)?O({},Br(dG,"".concat(e,".style")),"tick"===e?r(s.rawValue,i,s,this.data):r(t.value,i,t,n)):r;const{start:a,end:o,anchor:l,alpha:c,beta:h}=t;return Object.assign({points:[a,o],anchor:l,alpha:c,beta:h},r)}_getLabelAttribute(e,t,i,n){var r,s;const{space:a=4,inside:o=!1,formatMethod:l,type:c="text",text:h}=this.attribute.label;let d=a,u=0;(null===(r=this.attribute.tick)||void 0===r?void 0:r.visible)&&this.attribute.tick.inside===o&&(u=this.attribute.tick.length||4),(null===(s=this.attribute.subTick)||void 0===s?void 0:s.visible)&&this.attribute.subTick.inside===o&&(u=Math.max(u,this.attribute.subTick.length||2)),d+=u;const p=this.getRelativeVector(e.point);n>0&&(0===p[1]?d+=(this.axisLabelLayerSize[n-1].height+Br(this.attribute,"label.space",4))*n:d+=(this.axisLabelLayerSize[n-1].width+Br(this.attribute,"label.space",4))*n);const g=this.getVerticalCoord(e.point,d,o),f=this.getVerticalVector(d||1,o,g),m=l?l("".concat(e.label),e,t,i,n):e.label;let{style:v}=this.attribute.label;v=Q(v)?O({},dG.label.style,v(e,t,i,n)):v;return v=O(this.getLabelAlign(f,o,v.angle),v),Q(v.text)&&(v.text=v.text({label:e.label,value:e.rawValue,index:e.index,layer:n})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(g,f,m,v)),{text:null!=h?h:m,lineHeight:null==v?void 0:v.fontSize,type:c}),v)}getLabelPosition(e,t,i,n){return e}_transformItems(e){const t=[];return e.forEach((e=>{var i;t.push(Object.assign(Object.assign({},e),{point:this.getTickCoord(e.value),id:null!==(i=e.id)&&void 0!==i?i:e.label}))})),t}}function yG(e){e.forEach((e=>{if(e.rotatedBounds||!e.attribute.angle)return;const t=function(e){const t=e.AABBBounds;return{x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,centerX:e.attribute.x,centerY:e.attribute.y,angle:e.attribute.angle}}(e),i=(s=t.centerX,a=t.centerY,o=t.angle,l=e.attribute.x,c=e.attribute.y,{x:(s-l)*Math.cos(o)+(a-c)*Math.sin(o)+l,y:(s-l)*Math.sin(o)+(c-a)*Math.cos(o)+c}),n=i.x-t.centerX,r=i.y-t.centerY;var s,a,o,l,c;t.x1+=n,t.x2+=n,t.y1+=r,t.y2+=r,t.centerX+=n,t.centerY+=r,e.rotatedBounds=t}))}function bG(e,t){return rg(e.AABBBounds,t.AABBBounds,!1)&&(!e.rotatedBounds||!t.rotatedBounds||function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;const r=hg(e,i),s=hg(t,i),a=(e,t)=>[t.x-e.x,t.y-e.y];n&&(n.save(),n.fillStyle="red",n.globalAlpha=.6,r.forEach(((e,t)=>{0===t?n.moveTo(e.x,e.y):n.lineTo(e.x,e.y)})),n.fill(),n.restore(),n.save(),n.fillStyle="green",n.globalAlpha=.6,s.forEach(((e,t)=>{0===t?n.moveTo(e.x,e.y):n.lineTo(e.x,e.y)})),n.fill(),n.restore());const o=cg(e),l=cg(t);n&&n.fillRect(o.x,o.y,2,2),n&&n.fillRect(l.x,l.y,2,2);const c=a(o,l),h=a(r[0],r[1]),d=a(r[1],r[2]),u=a(s[0],s[1]),p=a(s[1],s[2]),g=i?e.angle:lg(e.angle);let f=i?e.angle+Bn:lg(90-e.angle);const m=i?t.angle:lg(t.angle);let v=i?t.angle+Bn:lg(90-t.angle);f>zn&&(f-=zn),v>zn&&(v-=zn);const y=(e,t,i,n)=>{const r=[Math.cos(t),Math.sin(t)];return e+(ag(r,i)+ag(r,n))/2>ag(r,c)};return y((e.x2-e.x1)/2,g,u,p)&&y((e.y2-e.y1)/2,f,u,p)&&y((t.x2-t.x1)/2,m,h,d)&&y((t.y2-t.y1)/2,v,h,d)}(e.rotatedBounds,t.rotatedBounds,!0))}const _G={parity:function(e){return e.filter(((e,t)=>t%2?e.setAttribute("opacity",0):1))},greedy:function(e,t){let i;return e.filter(((e,n)=>n&&xG(i,e,t)?e.setAttribute("opacity",0):(i=e,1)))}};function xG(e,t,i){const n=e.AABBBounds,r=t.AABBBounds;return i>Math.max(r.x1-n.x2,n.x1-r.x2,r.y1-n.y2,n.y1-r.y2)&&(!e.rotatedBounds||!t.rotatedBounds||i>Math.max(t.rotatedBounds.x1-e.rotatedBounds.x2,e.rotatedBounds.x1-t.rotatedBounds.x2,t.rotatedBounds.y1-e.rotatedBounds.y2,e.rotatedBounds.y1-t.rotatedBounds.y2))}function SG(e,t){for(let i,n=1,r=e.length,s=e[0];n<r;s=i,++n)if(xG(s,i=e[n],t))return!0}function wG(e){const t=e.AABBBounds;return t.width()>1&&t.height()>1}function CG(e){for(let t=1;t<e.length;t++)if(bG(e[t-1],e[t]))return!0;return!1}function kG(e,t){"bottom"!==e&&"top"!==e||function(e,t){t.forEach((t=>{t.attribute.angle&&t.setAttributes(Object.assign(Object.assign({},EG(e,t.attribute.angle)),{angle:AG(t.attribute.angle)}))}))}(e,t),"left"!==e&&"right"!==e||function(e,t){t.forEach(((t,i)=>{t.attribute.angle&&t.setAttributes(Object.assign(Object.assign({},TG(e,t.attribute.angle)),{angle:AG(t.attribute.angle)}))}))}(e,t),yG(t)}function AG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e<0)for(;e<0;)e+=2*Math.PI;if(e>0)for(;e>=2*Math.PI;)e-=2*Math.PI;return e}function EG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=["center","left","left","left","center","right","right","right","left"],n=["top","top","middle","bottom","bottom","bottom","middle","top","top"];"top"===e&&(i=["center","right","right","right","center","left","left","left","right"],n=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);const r=(t=AG(t))/(.5*Math.PI);let s;return s=r===Math.floor(r)?2*Math.floor(r):2*Math.floor(r)+1,{textAlign:i[s],textBaseline:n[s]}}function TG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=["right","right","center","left","center","left","center","right","right"],n=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];"right"===e&&(i=["left","right","right","right","left","left","left","left","right"],n=["middle","bottom","middle","top","top","top","middle","bottom","bottom"]);const r=(t=AG(t))/(.5*Math.PI);let s;return s=r===Math.floor(r)?2*Math.floor(r):2*Math.floor(r)+1,{textAlign:i[s],textBaseline:n[s]}}class OG{isInValidValue(e){return e<0||e>1}getTickCoord(e){const{start:t}=this.attribute,i=this.getRelativeVector();return{x:t.x+i[0]*e,y:t.y+i[1]*e}}getRelativeVector(e){const{start:t,end:i}=this.attribute;return[i.x-t.x,i.y-t.y]}getVerticalVector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{verticalFactor:i=1}=this.attribute,n=function(e){const[t,i]=e;let n=t*t+i*i;return n>0&&(n=1/Math.sqrt(n)),[e[0]*n,e[1]*n]}(this.getRelativeVector());return $W([n[1],-1*n[0]],e*(t?1:-1)*i)}}const PG=["radius","startAngle","endAngle",...gd];class MG extends _d{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{radius:1}),this.type="circle",this.numberType=Yd}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{startAngle:e,endAngle:t,radius:i}=this.attribute;return this._validNumber(e)&&this._validNumber(t)&&this._validNumber(i)}doUpdateAABBBounds(e){const t=jh(this).circle;this._AABBBounds.setValue(1/0,1/0,-1/0,-1/0);const i=this.attribute,n=se.graphicService.updateCircleAABBBounds(i,jh(this).circle,this._AABBBounds,e,this),{boundsPadding:r=t.boundsPadding}=i,s=Cd(r);return s&&n.expand(s),this.clearUpdateBoundTag(),n}tryUpdateOBBBounds(){throw new Error("\u6682\u4e0d\u652f\u6301")}getDefaultAttribute(e){return jh(this).circle[e]}needUpdateTags(e){return super.needUpdateTags(e,PG)}needUpdateTag(e){return super.needUpdateTag(e,PG)}toCustomPath(){var e,t,i;const n=this.attribute,r=null!==(e=n.radius)&&void 0!==e?e:this.getDefaultAttribute("radius"),s=null!==(t=n.startAngle)&&void 0!==t?t:this.getDefaultAttribute("startAngle"),a=null!==(i=n.endAngle)&&void 0!==i?i:this.getDefaultAttribute("endAngle"),o=new dc;return o.arc(0,0,r,s,a),o}clone(){return new MG(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return MG.NOWORK_ANIMATE_ATTR}}function IG(e){return new MG(e)}MG.NOWORK_ANIMATE_ATTR=bd;const RG=new class{constructor(){this.time=Ol.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,n,r,s,a,o,l,c,h,d){const{outerBorder:u,innerBorder:p}=e.attribute,g=u&&!1!==u.visible,f=p&&!1!==p.visible;if(!g&&!f)return;const{radius:m=l.radius,startAngle:v=l.startAngle,endAngle:y=l.endAngle,opacity:b=l.opacity,x:_=l.x,y:x=l.y,scaleX:S=l.scaleX,scaleY:w=l.scaleY}=e.attribute,C=!(!u||!u.stroke),k=!(!p||!p.stroke);if(g){const{distance:r=l.outerBorder.distance}=u,s=Sg(t,r,t.dpr);if(t.beginPath(),t.arc(i,n,m+s,v,y),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),d)d(t,u,l.outerBorder);else if(C){const r=l.outerBorder.opacity;l.outerBorder.opacity=b,t.setStrokeStyle(e,u,(_-i)/S,(x-n)/w,l.outerBorder),l.outerBorder.opacity=r,t.stroke()}}if(f){const{distance:r=l.innerBorder.distance}=p,s=Sg(t,r,t.dpr);if(t.beginPath(),t.arc(i,n,m-s,v,y),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),d)d(t,p,l.innerBorder);else if(k){const r=l.innerBorder.opacity;l.innerBorder.opacity=b,t.setStrokeStyle(e,p,(_-i)/S,(x-n)/w,l.innerBorder),l.innerBorder.opacity=r,t.stroke()}}}},DG=_f,LG=tf;var jG=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},FG=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},BG=function(e,t){return function(i,n){t(i,n,e)}};let NG=class extends hf{constructor(e){super(),this.circleRenderContribitions=e,this.numberType=Yd,this.builtinContributions=[RG,LG,DG],this.init(e)}drawShape(e,t,i,n,r,s,a,o){const l=jh(e,null==s?void 0:s.theme).circle,{radius:c=l.radius,startAngle:h=l.startAngle,endAngle:d=l.endAngle,x:u=l.x,y:p=l.y}=e.attribute,g=this.valid(e,l,a,o);if(!g)return;const{fVisible:f,sVisible:m,doFill:v,doStroke:y}=g;t.beginPath(),t.arc(i,n,c,h,d),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),this.beforeRenderStep(e,t,i,n,v,y,f,m,l,r,a,o),v&&(a?a(t,e.attribute,l):f&&(t.setCommonStyle(e,e.attribute,u-i,p-n,l),t.fill())),y&&(o?o(t,e.attribute,l):m&&(t.setStrokeStyle(e,e.attribute,u-i,p-n,l),t.stroke())),this.afterRenderStep(e,t,i,n,v,y,f,m,l,r,a,o)}draw(e,t,i,n){const r=jh(e,null==n?void 0:n.theme).circle;this._draw(e,r,!1,i,n)}};NG=jG([jo(),BG(0,Ho(Uo)),BG(0,Vo(Vg)),FG("design:paramtypes",[Object])],NG);let zG=!1;const HG=new Oo((e=>{zG||(zG=!0,e(NG).toSelf().inSingletonScope(),e(Ou).to(NG).inSingletonScope(),e(Pu).toService(Ou),e(Vg).toService(nf),Go(e,Vg))}));var VG=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},UG=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},WG=function(e,t){return function(i,n){t(i,n,e)}};let GG=class{constructor(e){this.canvasRenderer=e,this.type="circle",this.numberType=Yd}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).circle;let{x:s=r.x,y:a=r.y}=e.attribute;if(n.highPerformanceSave(),e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,((e,i,n)=>!!o||(o=e.isPointInPath(t.x,t.y),o)),((e,i,r)=>{if(o)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=Sg(n,s+a,n.dpr),o=e.isPointInStroke(t.x,t.y),o})),n.highPerformanceRestore(),o}};GG=VG([jo(),WG(0,Ho(Ou)),UG("design:paramtypes",[Object])],GG);let KG=!1;const YG=new Oo(((e,t,i,n)=>{KG||(KG=!0,e(rS).to(GG).inSingletonScope(),e(vS).toService(rS))}));var XG=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},qG=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ZG=function(e,t){return function(i,n){t(i,n,e)}};let QG=class{constructor(e){this.canvasRenderer=e,this.type="circle",this.numberType=Yd}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;const{pickContext:n}=null!=i?i:{};if(!n)return!1;const r=jh(e).circle;let{x:s=r.x,y:a=r.y}=e.attribute;if(n.highPerformanceSave(),e.transMatrix.onlyTranslate()){const t=e.getOffsetXY(r);s+=t.x,a+=t.y,n.setTransformForCurrent()}else s=0,a=0,n.transformFromMatrix(e.transMatrix,!0);let o=!1;return this.canvasRenderer.drawShape(e,n,s,a,{},null,((e,i,n)=>!!o||(o=e.isPointInPath(t.x,t.y),o)),((e,i,r)=>{if(o)return!0;const s=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer;return n.lineWidth=s+a,o=e.isPointInStroke(t.x,t.y),o})),n.highPerformanceRestore(),o}};QG=XG([jo(),ZG(0,Ho(Ou)),qG("design:paramtypes",[Object])],QG);let $G=!1;const JG=new Oo(((e,t,i,n)=>{$G||($G=!0,e(Kx).to(QG).inSingletonScope(),e(Ux).toService(Kx))}));function eK(){eK.__loaded||(eK.__loaded=!0,bp.RegisterGraphicCreator("circle",IG),ph.load(HG),ph.load(Vx?YG:JG))}eK.__loaded=!1;const tK=eK;function iK(){s_(),HE(),fO(),KT()}var nK=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};iK(),hw();class rK extends vG{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},rK.defaultAttributes,e),t)}_renderInner(e){var t;super._renderInner(e);const{panel:i}=this.attribute;if(i&&i.visible){const e=this.axisContainer,n=e.AABBBounds,r=bp.rect(Object.assign({x:n.x1,y:n.y1,width:n.width(),height:n.height()},i.style));r.name=lG.background,r.id=this._getNodeId("background"),r.states=O({},hG,null!==(t=i.state)&&void 0!==t?t:{}),e.insertBefore(r,e.firstChild)}}renderLine(e){const{start:t,end:i,line:n}=this.attribute,r=n,{startSymbol:s,endSymbol:a,style:o,breakRange:l,breakShape:c,breakShapeStyle:h,state:d}=r,u=nK(r,["startSymbol","endSymbol","style","breakRange","breakShape","breakShapeStyle","state"]),p=Object.assign({points:[t,i],startSymbol:s,endSymbol:a,lineStyle:o},u);ay(d)||(p.state={line:O({},hG,d),symbol:O({},hG,d)});const g=new QW(p);g.name=lG.line,g.id=this._getNodeId("line"),e.add(g)}getTitleAttribute(){var e,t,i;const n=this.attribute.title,{position:r="middle",space:s=4,textStyle:a={},autoRotate:o=!0,shape:l,background:c,state:h={}}=n,d=nK(n,["position","space","textStyle","autoRotate","shape","background","state"]);let u=.5;"start"===r?u=0:"end"===r&&(u=1);const{verticalFactor:p=1}=this.attribute,g=-1*p,f=this.getTickCoord(u),m=this.getRelativeVector();let v=0;if((null===(e=this.attribute.label)||void 0===e?void 0:e.visible)&&!1===this.attribute.label.inside){const e=+Br(this.attribute,"label.space",4);v+=e;const t=Object.keys(this.axisLabelLayerSize).length;if(0===m[1]){const i=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(i)?v+=i+(t-1)*e:v=0}else{if(0===m[0]){const i=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.width():0;isFinite(i)?v+=i+(t-1)*e:v=0}else Object.keys(this.axisLabelLayerSize).forEach(((t,i)=>{v+=this.axisLabelLayerSize[t].width+(i>0?e:0)}));const i=this.axisLabelLayerSize[0].textAlign,n="start"===i||"left"===i,r="center"===i,s=m[1]>0;v=1===g?s?n?v:r?v/2:e:n?e:r?v/2:v:s?n?e:r?v/2:v:n?v:r?v/2:e}}let y=0;(null===(t=this.attribute.tick)||void 0===t?void 0:t.visible)&&!1===this.attribute.tick.inside&&(y=this.attribute.tick.length||4),(null===(i=this.attribute.subTick)||void 0===i?void 0:i.visible)&&!1===this.attribute.subTick.inside&&(y=Math.max(y,this.attribute.subTick.length||2));const b=y+v+s,_=this.getVerticalCoord(f,b,!1),x=this.getVerticalVector(b,!1,{x:0,y:0});let S,w,{angle:C}=d;if(S="start"===r?"start":"end"===r?"end":"center",P(C)&&o){C=JW(m,[1,0],!0);const{verticalFactor:e=1}=this.attribute;w=1===-1*e?"bottom":"top"}else S=this.getTextAlign(x),w=this.getTextBaseline(x,!1);const k=Object.assign(Object.assign(Object.assign({},_),d),{textStyle:Object.assign({textAlign:S,textBaseline:w},a),state:{text:O({},hG,h.text),shape:O({},hG,h.shape),panel:O({},hG,h.background)}});return k.angle=C,l&&l.visible&&(k.shape=Object.assign({visible:!0},l.style),l.space&&(k.space=l.space)),c&&c.visible&&(k.panel=Object.assign({visible:!0},c.style)),k}getTextBaseline(e,t){let i="middle";const{verticalFactor:n=1}=this.attribute,r=(t?1:-1)*n;return rb(e[1],0)?i=!rb(e[0],0)||Object.is(e[0],-0)||Object.is(e[1],-0)?"middle":1===r?"bottom":"top":e[1]>0?i="top":e[1]<0&&(i="bottom"),i}getLabelAlign(e,t,i){const n=this.attribute.orient;if(L(i)||0===e[0]&&0===e[1]){if("top"===n||"bottom"===n)return EG(n,i);if("left"===n||"right"===n)return TG(n,i)}return{textAlign:this.getTextAlign(e),textBaseline:this.getTextBaseline(e,t)}}beforeLabelsOverlap(e,t,i,n,r){var s,a,o,l;const{flush:c=!1}=this.attribute.label||{};if(c&&e.length){const{orient:t,start:i,end:n}=this.attribute,r="bottom"===t||"top"===t,c=e[0],h=H(e),d=r?c.attribute.x>h.attribute.x:c.attribute.y<h.attribute.y;if(r){const e=d?h:c,t=d?c:h,r=i.x,o=n.x,l=e.AABBBounds.x1,u=t.AABBBounds.x2;l<r&&(e.attribute.angle?e.setAttributes({dx:(null!==(s=e.attribute.dx)&&void 0!==s?s:0)+r-l}):e.setAttributes({x:r,textAlign:"left"})),u>o&&(t.attribute.angle?t.setAttributes({dx:(null!==(a=t.attribute.dx)&&void 0!==a?a:0)+o-u}):t.setAttributes({x:o,textAlign:"right"}))}else{const e=d?h:c,t=d?c:h,r=e.AABBBounds.y2,s=t.AABBBounds.y1,a=i.y,u=n.y;s<a&&(t.attribute.angle?t.setAttributes({dy:(null!==(o=t.attribute.dy)&&void 0!==o?o:0)+a-s}):t.setAttributes({y:a,textBaseline:"top"})),r>u&&(e.attribute.angle?e.setAttributes({dy:(null!==(l=e.attribute.dy)&&void 0!==l?l:0)+u-r}):e.setAttributes({y:u,textBaseline:"bottom"}))}}}handleLabelsOverlap(e,t,i,n,r){if(ay(e))return;const{verticalLimitSize:s,label:a,orient:o}=this.attribute,l=this._getAxisLabelLimitLength(s,r),{layoutFunc:c,autoRotate:h,autoRotateAngle:d,autoLimit:u,limitEllipsis:p,autoHide:g,autoHideMethod:f,autoHideSeparation:m,lastVisible:v}=a;if(Q(c))c(e,t,n,this);else{if(h&&function(e,t){if(ay(e))return;const{orient:i,labelRotateAngle:n=[0,45,90]}=t;if(0===n.length||e.some((e=>!!e.attribute.angle)))return;let r=0,s=0;for(n&&n.length>0&&(s=n.length);r<s;){const t=n[r++];if(e.forEach((e=>{e.attribute.angle=el(t)})),kG(i,e),!CG(e))break}}(e,{labelRotateAngle:d,orient:o}),u&&L(l)&&l>0){const t="left"!==o&&"right"!==o||!e.some((e=>"vertical"===e.attribute.direction))?1/0:Math.abs(this.attribute.start.y-this.attribute.end.y)/e.length;!function(e,t){const{limitLength:i,verticalLimitLength:n,ellipsis:r="...",orient:s}=t;!ay(e)&&L(i)&&e.forEach((e=>{if(("top"===s||"bottom"===s)&&Math.floor(e.AABBBounds.height())<=i)return;const t=e.attribute.direction;if(("left"===s||"right"===s)&&("vertical"===t&&Math.floor(e.AABBBounds.height())<=n||"vertical"!==t&&Math.floor(e.AABBBounds.width())<=i))return;const a=e.attribute.angle;let o=0===a||P(a)?"top"===s||"bottom"===s?null:"vertical"===t?n:i:Math.abs(i/Math.sin(a));L(e.attribute.maxLineWidth)&&(o=L(o)?Math.min(e.attribute.maxLineWidth,o):e.attribute.maxLineWidth),e.setAttributes({maxLineWidth:o,ellipsis:e.attribute.ellipsis||r})}))}(e,{limitLength:l,verticalLimitLength:t,ellipsis:p,orient:o})}g&&function(e,t){if(ay(e))return;const i=e.filter(wG);if(ay(i))return;let n;n=function(e){return e.forEach((e=>e.setAttribute("opacity",1))),e}(i),yG(n);const{method:r="parity",separation:s=0}=t,a=Q(r)?r:_G[r]||_G.parity;if(n.length>=3&&SG(n,s)){do{n=a(n,s)}while(n.length>=3&&SG(n,s));if(n.length<3||t.lastVisible){const e=H(i);if(!e.attribute.opacity){const t=n.length;if(t>1){e.setAttribute("opacity",1);for(let i=t-1;i>=0&&xG(n[i],e,s);i--)n[i].setAttribute("opacity",0)}}}}i.forEach((e=>{e.setAttribute("visible",!!e.attribute.opacity)}))}(e,{orient:o,method:f,separation:m,lastVisible:v})}}afterLabelsOverlap(e,t,i,n,r){const{verticalLimitSize:s,orient:a}=this.attribute,o="bottom"===a||"top"===a,l=i.AABBBounds;let c=o?l.height():l.width();const{verticalMinSize:h}=this.attribute;if(L(h)&&(!L(s)||h<=s)){const e=this._getAxisLabelLimitLength(h,r);let t,n;c=Math.max(c,e),"left"===a?(t=l.x2-c,n=l.y1):"right"===a?(t=l.x1,n=l.y1):"top"===a?(t=l.x1,n=l.y2-c):"bottom"===a&&(t=l.x1,n=l.y1);const s=bp.rect({x:t,y:n,width:o?l.width():c,height:o?c:l.height(),pickable:!1});s.name=lG.axisLabelBackground,s.id=this._getNodeId("axis-label-background"),i.insertBefore(s,i.firstChild)}if(x(this.attribute.label.containerAlign)){let t;"left"===a?t=l.x2:"right"===a?t=l.x1:"top"===a?t=l.y2:"bottom"===a&&(t=l.y1),function(e,t,i,n,r){if("right"===n||"left"===n){if("left"===r){const r="right"===n?0:-1;e.forEach((e=>{e.setAttributes({x:t+i*r,textAlign:"left"})}))}else if("right"===r){const r="right"===n?1:0;e.forEach((e=>{e.setAttributes({x:t+i*r,textAlign:"right"})}))}else if("center"===r){const r="right"===n?1:-1;e.forEach((e=>{e.setAttributes({x:t+.5*i*r,textAlign:"center"})}))}}else if("bottom"===n||"top"===n)if("top"===r){const r="bottom"===n?0:-1;e.forEach((e=>{e.setAttributes({y:t+i*r,textBaseline:"top"})}))}else if("bottom"===r){const r="bottom"===n?1:0;e.forEach((e=>{e.setAttributes({y:t+i*r,textBaseline:"bottom"})}))}else if("middle"===r){const r="bottom"===n?1:-1;e.forEach((e=>{e.setAttributes({y:t+.5*i*r,textBaseline:"middle"})}))}}(e,t,c,a,this.attribute.label.containerAlign)}}_getAxisLabelLimitLength(e,t){var i,n,r,s;const{label:a,title:o,line:l,tick:c}=this.attribute,h=null!==(i=a.space)&&void 0!==i?i:4;let d=e,u=0,p=0;const g=l&&l.visible?null!==(n=l.style.lineWidth)&&void 0!==n?n:1:0,f=c&&c.visible?null!==(r=c.length)&&void 0!==r?r:4:0;if(o&&o.visible&&"string"==typeof o.text){u=pG(o.text,o.textStyle,null===(s=this.stage)||void 0===s?void 0:s.getTheme().text.fontFamily).height;const e=nW(o.padding);p=o.space+e[0]+e[2]}return d&&(d=(d-h-p-u-g-f)/t),d}}rK.defaultAttributes=dG,$R(rK,OG);class sK{isInValidValue(e){const{startAngle:t=iG,endAngle:i=nG}=this.attribute;return Math.abs(i-t)%(2*Math.PI)==0?e>1:e<0||e>1}getTickCoord(e){const{startAngle:t=iG,endAngle:i=nG,center:n,radius:r,inside:s=!1,innerRadius:a=0}=this.attribute;return nl(n,s&&a>0?a:r,t+(i-t)*e)}getVerticalVector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const{inside:n=!1}=this.attribute,{center:r}=this.attribute,s=[i.x-r.x,i.y-r.y];return $W(s,(t?-1:1)*(n?-1:1)*e/function(e){const[t,i]=e;return Math.sqrt(t*t+i*i)}(s))}getRelativeVector(e){const{center:t}=this.attribute;return[e.y-t.y,-1*(e.x-t.x)]}}const aK=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e<0)for(;e<0;)e+=Nn;else if(e>0)for(;e>Nn;)e-=Nn;return e};function oK(e,t,i){return!ab(e,t,0,1e-6)&&!sb(e,i,0,1e-6)}var lK=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};iK(),tK();class cK extends vG{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},cK.defaultAttributes,e))}renderLine(e){const{startAngle:t=iG,endAngle:i=nG,radius:n,center:r,innerRadius:s=0,line:a={},inside:o=!1}=this.attribute;let l=n,c=s;o&&s>0&&(l=s,c=0);const h=Object.assign(Object.assign(Object.assign({},r),{startAngle:t,endAngle:i,radius:l,innerRadius:c}),a.style),d=bp.circle(h);d.name=lG.line,d.id=this._getNodeId("line"),ay(a.state)||(d.states=O({},hG,a.state)),e.add(d)}getTitleAttribute(){var e,t,i;const{center:n,radius:r,innerRadius:s=0}=this.attribute,a=this.attribute.title,{space:o=4,textStyle:l={},shape:c,background:h,state:d={}}=a,u=lK(a,["space","textStyle","shape","background","state"]);let p=n,g=0;(null===(e=this.attribute.label)||void 0===e?void 0:e.visible)&&!1===this.attribute.label.inside&&(g=Br(this.attribute.label,"style.fontSize",12)+Br(this.attribute.label,"space",4));let f=0;(null===(t=this.attribute.tick)||void 0===t?void 0:t.visible)&&!1===this.attribute.tick.inside&&(f=this.attribute.tick.length||4),(null===(i=this.attribute.subTick)||void 0===i?void 0:i.visible)&&!1===this.attribute.subTick.inside&&(f=Math.max(f,this.attribute.subTick.length||2));const m=r+f+g+o;let v="middle",{position:y}=this.attribute.title;P(y)&&(y=0===s?"end":"middle"),"start"===y?(v="bottom",p={x:n.x,y:n.y-m}):"end"===y&&(v="top",p={x:n.x,y:n.y+m});const b=Object.assign(Object.assign(Object.assign({},p),u),{textStyle:Object.assign({textBaseline:v,textAlign:"center"},l),state:{text:O({},hG,d.text),shape:O({},hG,d.shape),panel:O({},hG,d.background)}}),{angle:_}=u;return b.angle=_,c&&c.visible&&(b.shape=Object.assign({visible:!0},c.style),c.space&&(b.space=c.space)),h&&h.visible&&(b.panel=Object.assign({visible:!0},h.style)),b}getSubTickLineItems(){var e,t;const{subTick:i}=this.attribute,n=[],{count:r=4,inside:s=!1,length:a=2}=i,o=this.tickLineItems,l=o.length;if(l>=2){const i=this.data[1].value-this.data[0].value,c=null===(t=null===(e=this.attribute)||void 0===e?void 0:e.tick)||void 0===t?void 0:t.alignWithLabel;for(let e=0;e<l;e++){const t=o[e],l=o[e+1];for(let e=0;e<r;e++){const o=(e+1)/(r+1),h=(1-o)*t.value+o*(l?l.value:c?1:t.value+i),d=this.getTickCoord(h),u=this.getVerticalCoord(d,a,s);n.push({start:d,end:u,value:h})}}}return n}getTextBaseline(e){let t="middle";return rb(e[1],0)?t="middle":e[1]>0&&e[1]>Math.abs(e[0])?t="top":e[1]<0&&Math.abs(e[1])>Math.abs(e[0])&&(t="bottom"),t}beforeLabelsOverlap(e,t,i,n,r){}handleLabelsOverlap(e,t,i,n,r){}afterLabelsOverlap(e,t,i,n,r){}getLabelAlign(e,t,i){return{textAlign:"center",textBaseline:"middle"}}getLabelPosition(e,t,i,n){return function(e,t,i,n){const r=XM(Object.assign({text:i},n)),s=r.width(),a=r.height(),o=aK(Math.atan2(t[1],t[0]))-Math.PI,l=3*Math.PI/4,c=Math.PI/4,h=Math.PI/2,d=e.x;let u=0;u=oK(o,-l,-c)?((o+l)/h-.5)*s:oK(o,c,l)?(.5-(o-c)/h)*s:Math.cos(o)>=0?.5*s:.5*-s;const p=d-u,g=e.y;let f=0;return f=oK(o,-l,-c)?.5*-a:oK(o,c,l)?.5*a:Math.cos(o)>=0?(.5-(c-o)/h)*a:(.5-aK(o-l)/h)*a,{x:p,y:g-f}}(e,t,i,n)}}cK.defaultAttributes=dG,$R(cK,sK);class hK extends Yb{parseAddition(e){return super.parseAddition(e),this.scale(e.scale),this}scale(e){if(this.spec.scale){const e=_(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this.detach(e),this.spec.scale=void 0}const t=_(e)?this.view.getScaleById(e):e;return this.spec.scale=t,this.attach(t),this._updateComponentEncoders(),this.commit(),this}getScale(){return _(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale}}const dK=(e,t,i,n,r,s)=>{var a;const o=e.getCoordinateAxisPosition();r&&"auto"===r.position&&(r.position=i?"content":o);const l=e.getCoordinateAxisPoints(n);if(l){const n={start:l[0],end:l[1],verticalFactor:("top"===o||"left"===o?-1:1)*(i?-1:1)*((null===(a=e.getSpec().range)||void 0===a?void 0:a.reversed)?-1:1)};if(s&&"polar"===t.type){const e=t.angle();n.center=t.origin(),n.startAngle=e[0],n.endAngle=e[1]}return n}const c=t.radius(),h=t.angle();return{center:t.origin(),radius:c[1],innerRadius:c[0],inside:i,startAngle:h[0],endAngle:h[1]}};class uK extends hK{constructor(e,t,i){super(e,Ur.axis,t),this.spec.componentType=Ur.axis,this.mode=i}parseAddition(e){return super.parseAddition(e),this.axisType(e.axisType),this.tickCount(e.tickCount),this.inside(e.inside),this.baseValue(e.baseValue),this}scale(e){return super.scale(e),this._axisComponentType=null,this}axisType(e){return this.spec.axisType=e,this._axisComponentType=null,this._prepareRejoin(),this.commit(),this}addGraphicItem(e,t){const i=O({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},e),n=nm.createGraphicComponent(this._getAxisComponentType(),i,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(i,t,n)}tickCount(e){const t=_(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return t&&t.tickCount(e),this.setFunctionSpec(e,"tickCount")}inside(e){return this.setFunctionSpec(e,"inside")}baseValue(e){return this.setFunctionSpec(e,"baseValue")}getAxisComponentType(){return this._axisComponentType}_updateComponentEncoders(){const e=_(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale,t=Object.assign({update:{}},this.spec.encode),i=Object.keys(t).reduce(((i,n)=>{const r=t[n];return r&&(i[n]={callback:(t,i,n)=>{var s,a;const o=this.spec.skipTheme?null:this.view.getCurrentTheme();let l=uy(r,t,i,n);const c=Kf(this.spec.inside,n,t,i),h=Kf(this.spec.baseValue,n,t,i),d=null===(s=null==e?void 0:e.getCoordinate)||void 0===s?void 0:s.call(e);d&&(l=Object.assign(dK(e,d,c,h,this.spec.layout),l));const u=null===(a=null==e?void 0:e.getScale)||void 0===a?void 0:a.call(e),p=Kf(this.spec.tickCount,n,t,i);switch(this._getAxisComponentType()){case Gr.lineAxis:return((e,t,i,n)=>{var r,s,a,o;const l=null!==(s=null===(r=null==t?void 0:t.components)||void 0===r?void 0:r.axis)&&void 0!==s?s:{};return e?O({},l,{items:[(null!==(o=null===(a=e.tickData)||void 0===a?void 0:a.call(e,n))&&void 0!==o?o:[]).map((e=>({id:e.index,label:e.tick,value:e.value,rawValue:e.tick})))]},null!=i?i:{}):O({},l,null!=i?i:{})})(u,o,l,p);case Gr.circleAxis:return((e,t,i,n)=>{var r,s,a,o;const l=null!==(s=null===(r=null==t?void 0:t.components)||void 0===r?void 0:r.circleAxis)&&void 0!==s?s:{};return e?O({},l,{items:[(null!==(o=null===(a=e.tickData)||void 0===a?void 0:a.call(e,n))&&void 0!==o?o:[]).map((e=>({id:e.index,label:e.tick,value:e.value,rawValue:e.tick})))]},null!=i?i:{}):O({},l,null!=i?i:{})})(u,o,l,p)}return l}}),i}),{});this._encoders=i}_getAxisComponentType(){var e;if(this._axisComponentType)return this._axisComponentType;let t=this.spec.axisType;if(P(t)){const i=_(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;t=(null===(e=null==i?void 0:i.getCoordinate)||void 0===e?void 0:e.call(i))?i.getCoordinateAxisPoints()?"line":"circle":"line"}return this._axisComponentType="circle"===t?Gr.circleAxis:Gr.lineAxis,this._axisComponentType}}uK.componentType=Ur.axis;function pK(e,t){let i="";return 0===e.length||(e.forEach(((e,t)=>{0===t?i="M".concat(e.x,",").concat(e.y):i+="L".concat(e.x,",").concat(e.y)})),t&&(i+="Z")),i}function gK(e,t,i,n){let r="";if(!e||0===t.length)return r;const s=t[0],a=nr.distancePP(e,s),o=i?0:1;return n?r+="M".concat(e.x,",").concat(e.y-a,"A").concat(a,",").concat(a,",0,0,").concat(o,",").concat(e.x,",").concat(e.y+a,"A").concat(a,",").concat(a,",0,0,").concat(o,",").concat(e.x,",").concat(e.y-a,"Z"):t.forEach(((e,t)=>{0===t?r="M".concat(e.x,",").concat(e.y):r+="A".concat(a,",").concat(a,",0,0,").concat(o,",").concat(e.x,",").concat(e.y)})),r}function fK(e,t,i){const{type:n,closed:r}=i,s=t.slice(0).reverse();let a="",o="";if("line"===n&&i.smoothLink&&i.center){const t=e[0],n=s[0],l=i.center;a=pK(e,!!r),o=pK(s,!!r);const c=nr.distancePP(n,l),h=nr.distancePP(t,l);a+="A".concat(c,",").concat(c,",0,0,1,").concat(n.x,",").concat(n.y,"L").concat(n.x,",").concat(n.y),o+="A".concat(h,",").concat(h,",0,0,0,").concat(t.x,",").concat(t.y)}else if("circle"===n){const{center:t}=i;a=gK(t,e,!1,!!r),o=gK(t,s,!0,!!r)}else"line"!==n&&"polygon"!==n||(a=pK(e,!!r),o=pK(s,!!r));return r?a+=o:(o="L"+o.substring(1),a+=o,a+="Z"),a}class mK extends qW{constructor(){super(...arguments),this.name="axis-grid",this.data=[]}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}render(){this.removeAllChild(),this._prevInnerView=this._innerView,this._innerView=bp.group({x:0,y:0,pickable:!1}),this.add(this._innerView);const{items:e,visible:t}=this.attribute;e&&e.length&&!1!==t&&(this.data=this._transformItems(e),this._renderGrid(this._innerView))}getVerticalCoord(e,t,i){const n=this.getVerticalVector(t,i,e);return{x:e.x+n[0],y:e.y+n[1]}}_transformItems(e){const t=[];return e.forEach((e=>{var i;t.push(Object.assign(Object.assign({},e),{point:this.getTickCoord(e.value),id:null!==(i=e.id)&&void 0!==i?i:e.label}))})),t}_renderGrid(e){const{visible:t}=this.attribute.subGrid||{};t&&this._renderGridByType(!0,e),this._renderGridByType(!1,e)}_renderGridByType(e,t){const i=O({},this.attribute,this.getGridAttribute(e)),{type:n,items:r,style:s,closed:a,alternateColor:o,depth:l=0}=i,c=e?"".concat(lG.grid,"-sub"):"".concat(lG.grid);if(r.forEach(((e,i)=>{const{id:r,points:o}=e;let h="";if("line"===n||"polygon"===n)h=pK(o,!!a);else if("circle"===n){const{center:e}=this.attribute;h=gK(e,o,!1,!!a)}const d=bp.path(Object.assign({path:h,z:l},Q(s)?O({},this.skipDefault?null:mK.defaultAttributes.style,s(e,i)):s));d.name="".concat(c,"-line"),d.id=this._getNodeId("".concat(c,"-path-").concat(r)),t.add(d)})),l&&"line"===n&&r.forEach(((e,i)=>{const{id:n,points:r}=e,o=[];o.push(r[0]);const h=r[1].x-r[0].x,d=r[1].y-r[0].y,u=Math.sqrt(h*h+d*d),p=l/u;o.push({x:r[0].x+h*p,y:r[0].y+d*p});const g=pK(o,!!a),f=Hn(o[0].x-o[1].x),m=Hn(o[0].y-o[1].y),v=bp.path(Object.assign({path:g,z:0,alpha:f>m?(r[1].x-r[0].x>0?-1:1)*Fn/2:0,beta:f<m?-Fn/2:0,anchor3d:f>m?[o[0].x,0]:[0,o[0].y]},Q(s)?O({},this.skipDefault?null:mK.defaultAttributes.style,s(e,i)):s));v.name="".concat(c,"-line"),v.id=this._getNodeId("".concat(c,"-path-").concat(n)),t.add(v)})),r.length>1&&o){const e=v(o)?o:[o,"transparent"],n=t=>e[t%e.length];for(let s=0;s<r.length-1;s++){const[e,a]=[r[s].points,r[s+1].points],o=fK(e,a,i),l=bp.path({path:o,fill:n(s)});l.name="".concat(c,"-region"),l.id=this._getNodeId("".concat(c,"-region-").concat(s)),t.add(l)}}}_getNodeId(e){return"".concat(this.id,"-").concat(e)}}mK.defaultAttributes={style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]},subGrid:{visible:!1,style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]}}},s_(),uT();class vK extends mK{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},mK.defaultAttributes,e),t)}_getGridPoint(e,t){let i;if("line"===e){const{length:e}=this.attribute;i=[t,this.getVerticalCoord(t,e,!0)]}else if("circle"===e||"polygon"===e){const{center:e,sides:n=6,startAngle:r=iG,endAngle:s=nG}=this.attribute;i=function(e,t,i,n,r){const s=[],a=r-n;for(let o=0;o<t;o++){const r=n+o*a/t;s.push(nl(e,i,r))}return s}(e,n,nr.distancePP(e,t),r,s)}return i}getGridAttribute(e){const{type:t,alignWithLabel:i=!0}=this.attribute;let n,r=1;this.data.length>=2&&(r=this.data[1].value-this.data[0].value);let s=[];if(e){n=O({},this.attribute,this.attribute.subGrid);const e=[],{count:a=4}=this.attribute.subGrid||{};if(this.data.length>=2){const n=[];this.data.forEach((e=>{let t=e.value;if(!i){const i=e.value-r/2;if(this.isInValidValue(i))return;t=i}n.push({value:t})}));for(let i=0;i<n.length-1;i++){const r=n[i],s=n[i+1];e.push({id:"sub-".concat(i,"-0"),points:this._getGridPoint(t,this.getTickCoord(r.value)),datum:{}});for(let n=0;n<a;n++){const o=(n+1)/(a+1),l=(1-o)*r.value+o*s.value,c=this.getTickCoord(l);e.push({id:"sub-".concat(i,"-").concat(n+1),points:this._getGridPoint(t,c),datum:{}})}i===n.length-2&&e.push({id:"sub-".concat(i,"-").concat(a+1),points:this._getGridPoint(t,this.getTickCoord(s.value)),datum:{}})}s=e}}else{n=this.attribute;const e=[];this.data.forEach((n=>{let{point:s}=n;if(!i){const e=n.value-r/2;if(this.isInValidValue(e))return;s=this.getTickCoord(e)}e.push({id:n.label,datum:n,points:this._getGridPoint(t,s)})})),s=e}return Object.assign(Object.assign({},n),{items:s})}}$R(vK,OG);var yK=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};s_(),uT();class bK extends mK{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},mK.defaultAttributes,e),t)}getGridAttribute(e){let t,i=[];const n=this.attribute,{radius:r,innerRadius:s=0,startAngle:a=iG,endAngle:o=nG,center:l,subGrid:c}=n,h=yK(n,["radius","innerRadius","startAngle","endAngle","center","subGrid"]),{alignWithLabel:d=!0}=h||{},u=r-s;let p=1;if(this.data.length>=2&&(p=this.data[1].value-this.data[0].value),e){t=O({},h,c);const e=[],{count:n=4}=c||{},r=this.data.length;if(r>=2){const t=[];this.data.forEach((e=>{let i=e.value;if(!d){const t=e.value-p/2;if(this.isInValidValue(t))return;i=t}t.push({value:i})}));for(let i=0;i<r;i++){const r=t[i],s=t[i+1];e.push({id:"sub-".concat(i,"-0"),points:[this.getTickCoord(r.value),this.getVerticalCoord(this.getTickCoord(r.value),u,!0)],datum:{}});for(let t=0;t<n;t++){const a=(t+1)/(n+1),o=(1-a)*r.value+a*(s?s.value:d?1:r.value+p),l=this.getTickCoord(o),c=this.getVerticalCoord(l,u,!0);e.push({id:"sub-".concat(i,"-").concat(t+1),points:[l,c],datum:{}})}}Math.abs(o-a)%(2*Math.PI)==0&&e.push(e[0]),i=e}}else{t=h;const e=[];let n;n=Math.abs(o-a)%(2*Math.PI)==0?[...this.data].concat(this.data[0]):this.data,n.forEach((t=>{let{point:i}=t;if(!d){const e=t.value-p/2;if(this.isInValidValue(e))return;i=this.getTickCoord(e)}const n=this.getVerticalCoord(i,u,!0);e.push({id:t.id,points:[i,n],datum:t})})),i=e}return Object.assign(Object.assign({},t),{items:i,center:l,type:"line"})}}$R(bK,sK);class _K extends hK{constructor(e,t,i){super(e,Ur.grid,t),this.spec.componentType=Ur.grid,this.mode=i}parseAddition(e){return super.parseAddition(e),this.target(e.target),this.gridType(e.gridType),this.gridShape(e.gridShape),this}scale(e){return super.scale(e),this._gridComponentType=null,this}gridType(e){return this.spec.gridType=e,this._gridComponentType=null,this._prepareRejoin(),this.commit(),this}gridShape(e){return this.spec.gridShape=e,this.commit(),this}target(e){if(this.spec.target){const e=_(this.spec.target)?this.view.getMarkById(this.spec.target):this.spec.target;this.detach(e)}this.spec.target=e;const t=_(e)?this.view.getMarkById(e):e;return this.attach(t),this._targetAxis=t,this._gridComponentType=null,this._updateComponentEncoders(),this.commit(),this}tickCount(e){const t=_(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return t&&t.tickCount(e),this.setFunctionSpec(e,"tickCount")}inside(e){return this.setFunctionSpec(e,"inside")}baseValue(e){return this.setFunctionSpec(e,"baseValue")}addGraphicItem(e,t){const i=O({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},e),n=nm.createGraphicComponent(this._getGridComponentType(),i,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(i,t,n)}_updateComponentEncoders(){const e=Object.assign({update:{}},this.spec.encode),t=Object.keys(e).reduce(((t,i)=>{const n=e[i];return n&&(t[i]={callback:(e,t,i)=>{var r,s,a,o;const l=this.spec.skipTheme?null:this.view.getCurrentTheme();let c,h=uy(n,e,t,i);const d=Kf(this.spec.baseValue,i,e,t);if(this._targetAxis){const e=null===(r=this._targetAxis.getSpec())||void 0===r?void 0:r.scale;c=_(e)?this.view.getScaleById(e):e;const t=this._targetAxis.elements[0];if(t)switch(this._getGridComponentType()){case Kr.lineAxisGrid:h=Object.assign({x:t.getGraphicAttribute("x"),y:t.getGraphicAttribute("y"),start:t.getGraphicAttribute("start"),end:t.getGraphicAttribute("end"),verticalFactor:null!==(s=t.getGraphicAttribute("verticalFactor"))&&void 0!==s?s:1},h);break;case Kr.circleAxisGrid:h=Object.assign({x:t.getGraphicAttribute("x"),y:t.getGraphicAttribute("y"),center:t.getGraphicAttribute("center"),radius:t.getGraphicAttribute("radius"),innerRadius:t.getGraphicAttribute("innerRadius"),inside:t.getGraphicAttribute("inside"),startAngle:t.getGraphicAttribute("startAngle"),endAngle:t.getGraphicAttribute("endAngle")},h)}}else{c=_(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;const n=Kf(this.spec.inside,i,e,t),r=null===(a=null==c?void 0:c.getCoordinate)||void 0===a?void 0:a.call(c);r&&(h=Object.assign(dK(c,r,n,d,this.spec.layout,!0),h))}this._getGridComponentType()===Kr.lineAxisGrid&&(h="line"!==this.spec.gridShape&&this.spec.gridShape?Object.assign({center:h.start,closed:!0},h,{type:this.spec.gridShape}):Object.assign({},h,{type:"line"}));const u=null===(o=null==c?void 0:c.getScale)||void 0===o?void 0:o.call(c),p=Kf(this.spec.tickCount,i,e,t);switch(this._getGridComponentType()){case Kr.lineAxisGrid:return((e,t,i,n)=>{var r,s,a,o;const l=null!==(s=null===(r=null==t?void 0:t.components)||void 0===r?void 0:r.grid)&&void 0!==s?s:{};return e?O({},l,{items:(null!==(o=null===(a=e.tickData)||void 0===a?void 0:a.call(e,n))&&void 0!==o?o:[]).map((e=>({id:e.index,label:e.tick,value:e.value,rawValue:e.tick})))},null!=i?i:{}):O({},l,null!=i?i:{})})(u,l,h,p);case Kr.circleAxisGrid:return((e,t,i,n)=>{var r,s,a,o;const l=null!==(s=null===(r=null==t?void 0:t.components)||void 0===r?void 0:r.circleGrid)&&void 0!==s?s:{};return e?O({},l,{items:(null!==(o=null===(a=e.tickData)||void 0===a?void 0:a.call(e,n))&&void 0!==o?o:[]).map((e=>({id:e.index,label:e.tick,value:e.value,rawValue:e.tick})))},null!=i?i:{}):O({},l,null!=i?i:{})})(u,l,h,p)}return h}}),t}),{});this._encoders=t}_getGridComponentType(){var e;if(this._gridComponentType)return this._gridComponentType;if(this.spec.gridType)"circle"===this.spec.gridType?this._gridComponentType=Kr.circleAxisGrid:this._gridComponentType=Kr.lineAxisGrid;else if(this._targetAxis)switch(this._targetAxis.getAxisComponentType()){case Gr.circleAxis:this._gridComponentType=Kr.circleAxisGrid;break;case Gr.lineAxis:default:this._gridComponentType=Kr.lineAxisGrid}else if(this.spec.scale){const t=_(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this._gridComponentType=(null===(e=null==t?void 0:t.getCoordinate)||void 0===e?void 0:e.call(t))?t.getCoordinateAxisPoints()?Kr.lineAxisGrid:Kr.circleAxisGrid:Kr.lineAxisGrid}else this._gridComponentType=Kr.lineAxisGrid;return this._gridComponentType}}_K.componentType=Ur.grid;class xK extends kk{constructor(e,t){super(e,t),this.type="component",this._componentType=t.componentType,this._mode=t.mode}_initProduct(e){const t=this.getVGrammarView(),i=this.getProductId();this._product=t.mark(Vr.component,null!=e?e:t.rootMark,{componentType:this._componentType,mode:this._mode}).id(i),this._compiledProductId=i}}xK.type="component";const SK=()=>{_n.registerMark(xK.type,xK)};class wK extends qh{constructor(e,t,i,n){super(null,null,i,n)}getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:0}})}onEnd(){this.target.setTheme({common:{opacity:1}})}onUpdate(e,t,i){this.target.setTheme({common:{opacity:t}})}}class CK extends qh{constructor(){super(...arguments),this.mode=kl.NORMAL}onBind(){const e=this.target.getInnerView(),t=this.target.getPrevInnerView();t&&(this._oldElementMap=function(e){const t={};return eG(e,(e=>{"group"!==e.type&&e.id&&(t[e.id]=e)})),t}(t),this._newElementAttrMap={},eG(e,(e=>{var t,i,n,r,s,a;if("group"!==e.type&&e.id){const o=this._oldElementMap[e.id];if(o){if(!ty(e.attribute,o.attribute)){const r=S(e.attribute);this._newElementAttrMap[e.id]={state:"update",node:e,attrs:Object.assign(Object.assign({},r),{opacity:null!==(t=r.opacity)&&void 0!==t?t:1,fillOpacity:null!==(i=r.fillOpacity)&&void 0!==i?i:1,strokeOpacity:null!==(n=r.strokeOpacity)&&void 0!==n?n:1})},e.setAttributes(o.attribute)}}else{const t={opacity:null!==(r=e.attribute.opacity)&&void 0!==r?r:1,fillOpacity:null!==(s=e.attribute.fillOpacity)&&void 0!==s?s:1,strokeOpacity:null!==(a=e.attribute.strokeOpacity)&&void 0!==a?a:1};this._newElementAttrMap[e.id]={state:"enter",node:e,attrs:t},e.setAttributes({opacity:0,fillOpacity:0,strokeOpacity:0})}}})))}onStart(){let e=this.duration,t=this.easing;Object.keys(this._newElementAttrMap).forEach((i=>{var n;const{node:r,attrs:s,state:a}=this._newElementAttrMap[i];if("enter"===a){const{enter:i={}}=null!==(n=this.params)&&void 0!==n?n:{};e=L(i.duration)?i.duration:e,t=i.easing?i.easing:t}"path"===r.type?r.animate({interpolate:(e,t,i,n,r)=>"path"===e&&(r.path=function(e,t){let i,n,r,s=ek.lastIndex=tk.lastIndex=0,a=-1;const o=[],l=[];for(e+="",t+="";(i=ek.exec(e))&&(n=tk.exec(t));)(r=n.index)>s&&(r=t.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(i=i[0])===(n=n[0])?o[a]?o[a]+=n:o[++a]=n:(o[++a]=null,l.push({i:a,x:$C(i,n)})),s=tk.lastIndex;return s<t.length&&(r=t.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(let i,n=0;n<t;++n)o[(i=l[n]).i]=i.x(e);return o.join("")})}(i,n)(t),!0)}).to(s,e,t):r.animate().to(s,e,t)}))}onUpdate(e,t,i){}}const kK=e=>e;class AK extends dF{getOrient(){return this._orient}getScale(){return this._scale}getScales(){return this._scales}getTickData(){return this._tickData}get visible(){return this._visible}getInverse(){return this._inverse}constructor(e,t){var i;super(e,t),this.specKey="axes",this._scales=[],this._visible=!0,this._tick=void 0,this._visible=null===(i=e.visible)||void 0===i||i}_getNeedClearVRenderComponents(){return[]}getVRenderComponents(){var e,t;return z(null===(t=null===(e=this._axisMark)||void 0===e?void 0:e.getProduct())||void 0===t?void 0:t.getGroupGraphicItem())}created(){var e,t,i,n,r,s,a,o,l,c,h,d,u,p,g,f,v;if(super.created(),this.setSeriesAndRegionsFromSpec(),this.initEvent(),this.initScales(),this.updateSeriesScale(),this.getVisible()&&this._initData(),this._visible){const y=this._createMark({type:"component",name:"axis-".concat(this.getOrient())},{componentType:"angle"===this.getOrient()?"circleAxis":"axis",mode:this._spec.mode,noSeparateStyle:!0,skipTheme:!0});if(this._axisMark=y,y.setZIndex(this.layoutZIndex),x(this._spec.id)&&y.setUserId(this._spec.id),this._marks.addMark(y),null===(e=this._spec.grid)||void 0===e?void 0:e.visible){const e=this._createMark({type:"component",name:"axis-".concat(this.getOrient(),"-grid")},{componentType:"angle"===this.getOrient()?Kr.circleAxisGrid:Kr.lineAxisGrid,mode:this._spec.mode,noSeparateStyle:!0,skipTheme:!0});e.setZIndex(null!==(s=null!==(n=null===(i=null===(t=this._spec.grid)||void 0===t?void 0:t.style)||void 0===i?void 0:i.zIndex)&&void 0!==n?n:null===(r=this._spec.grid)||void 0===r?void 0:r.zIndex)&&void 0!==s?s:zw.Axis_Grid),this._marks.addMark(e),this._gridMark=e}if(m(this._spec.interactive)&&this._marks.forEach((e=>e.setInteractive(this._spec.interactive))),!1!==this._option.animation&&!1!==Br(this._option.getChart().getSpec(),"animation")&&!0===this._spec.animation){const e=jR(null===(a=_n.getAnimationInKey("axis"))||void 0===a?void 0:a(),{appear:null!==(l=null!==(o=this._spec.animationAppear)&&void 0!==o?o:Br(this._option.getChart().getSpec(),"animationAppear.axis"))&&void 0!==l?l:Br(this._option.getChart().getSpec(),"animationAppear"),disappear:null!==(h=null!==(c=this._spec.animationDisappear)&&void 0!==c?c:Br(this._option.getChart().getSpec(),"animationDisappear.axis"))&&void 0!==h?h:Br(this._option.getChart().getSpec(),"animationDisappear"),enter:null!==(u=null!==(d=this._spec.animationEnter)&&void 0!==d?d:Br(this._option.getChart().getSpec(),"animationEnter.axis"))&&void 0!==u?u:Br(this._option.getChart().getSpec(),"animationEnter"),exit:null!==(g=null!==(p=this._spec.animationExit)&&void 0!==p?p:Br(this._option.getChart().getSpec(),"animationExit.axis"))&&void 0!==g?g:Br(this._option.getChart().getSpec(),"animationExit"),update:null!==(v=null!==(f=this._spec.animationUpdate)&&void 0!==f?f:Br(this._option.getChart().getSpec(),"animationUpdate.axis"))&&void 0!==v?v:Br(this._option.getChart().getSpec(),"animationUpdate")});e.enter&&(e.update[0].customParameters={enter:e.enter[0]}),this._marks.forEach((t=>t.setAnimationConfig(e)))}}}isSeriesDataEnable(){let e=!0;return gr(this._regions,(t=>{var i;v(null===(i=t.getViewDataStatistics())||void 0===i?void 0:i.latestData)&&(e=!1)}),{userId:this._seriesUserId,specIndex:this._seriesIndex}),e}setSeriesAndRegionsFromSpec(){const{seriesId:e,seriesIndex:t,regionId:i,regionIndex:n}=this._spec;x(e)&&(this._seriesUserId=z(e)),x(i)&&(this._regionUserId=z(i)),x(t)&&(this._seriesIndex=z(t)),x(n)&&(this._regionIndex=z(n)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionIndex),this.layout.layoutBindRegionID=this._regions.map((e=>e.id))}getBindSeriesFilter(){return{userId:this._seriesUserId,specIndex:this._seriesIndex}}initEvent(){this.event.on(Ir.scaleUpdate,{filter:e=>{let{model:t}=e;return(null==t?void 0:t.id)===this.id}},this.effect.scaleUpdate.bind(this));const e=function(e,t){const i=[];for(const n of e)for(const e of n.getSeries(t))i.push(e);return i}(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}).map((e=>e.getViewDataStatistics())).filter((e=>!!e));e.length>1?this._option.dataSet.multipleDataViewAddListener(e,"change",(()=>{this.updateScaleDomain()})):1===e.length&&e[0].target.addListener("change",(()=>{this.updateScaleDomain()})),gr(this._regions,(e=>{e.event.on(Ir.rawDataUpdate,{filter:t=>{let{model:i}=t;return(null==i?void 0:i.id)===e.id}},(()=>{this._clearRawDomain()}))}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}updateScaleDomain(){}_clearRawDomain(){}computeData(e){!this._tickData||"force"!==e&&ty(this._scale.range(),[0,1])||(this._tickData.getDataView().reRunAllTransform(),this._tickData.updateData())}initScales(){this._scales=[this._scale];const e=[];if(gr(this._regions,(t=>{const i=t.getGroups();i&&e.push(i)}),{userId:this._seriesUserId,specIndex:this._seriesIndex}),0!==e.length){const t=V(e.map((e=>e.fields.length)));for(let e=1;e<t;e++){const e=this._scale.clone();this._scales.push(e)}}}_compareSpec(e,t){const i=super._compareSpec(e,t);return i.reRender=!0,(null==t?void 0:t.type)!==(null==e?void 0:e.type)?(i.reMake=!0,i):i}getLabelFormatMethod(){return this._spec.label.formatMethod?(e,t,i)=>this._spec.label.formatMethod(t.rawValue,t):null}getLabelItems(e){return v(this._tickData.getLatestData())?[this._tickData.getLatestData().map((t=>({id:t.value,label:t.value,value:0===e?0:this.dataToPosition([t.value])/e,rawValue:t.value}))).filter((e=>e.value>=0&&e.value<=1))]:[]}_delegateAxisContainerEvent(e){e.addEventListener("*",((t,i)=>this._delegateEvent(e,t,i)))}_getAxisAttributes(){var e,t,i,n,r,s,a,o,l,c,h;const d=this._spec;let u,p=d.title.angle;"left"!==d.orient&&"right"!==d.orient||(null===(e=d.title)||void 0===e?void 0:e.autoRotate)&&P(d.title.angle)&&(p="left"===d.orient?-90:90,u=qj[d.orient]);const g=uD(d.label,["style","formatMethod","state"]),f=null!==(t=d.background)&&void 0!==t?t:{},m=null!==(i=d.title.background)&&void 0!==i?i:{};return{orient:this.getOrient(),select:!0!==this._option.disableTriggerEvent&&d.select,hover:!0!==this._option.disableTriggerEvent&&d.hover,line:(v=d.domainLine,(v=Wj(v)).startSymbol=Wj(v.startSymbol),v.endSymbol=Wj(v.endSymbol),v),label:Object.assign({style:Q(d.label.style)?(e,t,i,n)=>{var r;const s=d.label.style(e.rawValue,t,e,i,n);return Yj(_e({},null===(r=this._theme.label)||void 0===r?void 0:r.style,s))}:Yj(d.label.style),formatMethod:d.label.formatMethod?(e,t,i)=>d.label.formatMethod(t.rawValue,t):null,state:Kj(d.label.state)},g),tick:!1===d.tick.visible?{visible:!1}:{visible:d.tick.visible,length:d.tick.tickSize,inside:d.tick.inside,alignWithLabel:d.tick.alignWithLabel,style:Q(d.tick.style)?(e,t,i,n)=>{var r;const s=d.tick.style(e,t,i,n);return Yj(_e({},null===(r=this._theme.tick)||void 0===r?void 0:r.style,s))}:Yj(d.tick.style),state:Gj(d.tick.state),dataFilter:d.tick.dataFilter},subTick:!1===d.subTick.visible?{visible:!1}:{visible:d.subTick.visible,length:d.subTick.tickSize,inside:d.subTick.inside,count:d.subTick.tickCount,style:Q(d.subTick.style)?(e,t,i,n)=>{var r;const s=d.subTick.style(e,t,i,n);return Yj(_e({},null===(r=this._theme.subTick)||void 0===r?void 0:r.style,s))}:Yj(d.subTick.style),state:Gj(d.subTick.state)},title:!1===d.title.visible?{visible:!1}:Object.assign({visible:d.title.visible,position:d.title.position,space:d.title.space,autoRotate:!1,angle:p?el(p):null,textStyle:_e({},u,Yj(d.title.style)),padding:d.title.padding,shape:!1===(null===(n=d.title.shape)||void 0===n?void 0:n.visible)?{visible:!1}:{visible:null===(r=d.title.shape)||void 0===r?void 0:r.visible,space:null===(s=d.title.shape)||void 0===s?void 0:s.space,style:Yj(null===(a=d.title.shape)||void 0===a?void 0:a.style)},background:!1===m.visible?{visible:!1}:{visible:m.visible,style:Yj(m.style)},state:{text:Gj(d.title.state),shape:Gj(null===(o=d.title.shape)||void 0===o?void 0:o.state),background:Gj(null===(l=d.title.background)||void 0===l?void 0:l.state)},pickable:!1!==(null===(c=d.title.style)||void 0===c?void 0:c.pickable),childrenPickable:!1!==(null===(h=d.title.style)||void 0===h?void 0:h.pickable)},d.title),panel:!1===f.visible?{visible:!1}:{visible:f.visible,style:Yj(f.style),state:Gj(f.state)}};var v}_getGridAttributes(){const e=this._spec;return{alternateColor:e.grid.alternateColor,alignWithLabel:e.grid.alignWithLabel,style:Q(e.grid.style)?()=>(t,i)=>{var n,r;const s=e.grid.style(null===(n=t.datum)||void 0===n?void 0:n.rawValue,i,t.datum);return Yj(_e({},null===(r=this._theme.grid)||void 0===r?void 0:r.style,s))}:Yj(e.grid.style),subGrid:!1===e.subGrid.visible?{visible:!1}:{type:"line",visible:e.subGrid.visible,alternateColor:e.subGrid.alternateColor,style:Yj(e.subGrid.style)}}}_initTickDataSet(e){return po(this._option.dataSet,"scale",kK),uo(this._option.dataSet,"ticks",YW),new R(this._option.dataSet,{name:"".concat(this.type,"_").concat(this.id,"_ticks")}).parse(this._scale,{type:"scale"}).transform({type:"ticks",options:e},!1)}_tickTransformOption(e){const t=this._tick||{},i=this._spec.label||{},{tickCount:n,forceTickCount:r,tickStep:s,tickMode:a}=t,{style:o,formatMethod:l,minGap:c}=i;return{sampling:!1!==this._spec.sampling,tickCount:n,forceTickCount:r,tickStep:s,tickMode:a,axisOrientType:this._orient,coordinateType:e,labelStyle:o,labelFormatter:l,labelGap:c}}addTransformToTickData(e,t){var i,n;null===(n=null===(i=this._tickData)||void 0===i?void 0:i.getDataView())||void 0===n||n.transform(e,t)}dataToPosition(e){return this._scale.scale(e)}}AK.specKey="axes";const EK=()=>{nm.registerGraphicComponent(Gr.lineAxis,((e,t)=>new rK(e,t))),nm.registerGraphicComponent(Gr.circleAxis,(e=>new cK(e))),nm.registerComponent(Ur.axis,uK),nm.registerGraphicComponent(Kr.lineAxisGrid,((e,t)=>new vK(e,t))),nm.registerGraphicComponent(Kr.circleAxisGrid,((e,t)=>new bK(e,t))),nm.registerComponent(Ur.grid,_K),SK(),_n.registerAnimation("axis",(()=>({appear:{custom:wK},update:{custom:CK},exit:{custom:Oy}})))};var TK=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const OK=[NW.AxisSyncPlugin];class PK extends AK{getOrient(){return this._orient}set autoIndentOnce(e){this._autoIndentOnce=e}getScales(){return this._scales}constructor(e,t){super(e,t),this.type=r.cartesianAxis,this.name=r.cartesianAxis,this._defaultBandPosition=.5,this._defaultBandInnerPadding=.1,this._defaultBandOuterPadding=.3,this.layoutType="region-relative",this.layoutZIndex=zw.Axis,this.layoutLevel=Hw.Axis,this._orient="left",this._autoIndentOnce=!1,this._hasAutoIndent=!1,this._scales=[],this._tick=void 0,this._layoutCache={width:0,height:0,_lastComputeOutBounds:{x1:0,x2:0,y1:0,y2:0}},this._innerOffset={top:0,bottom:0,left:0,right:0},this.effect={scaleUpdate:e=>{this.computeData(null==e?void 0:e.value),gr(this._regions,(e=>{const t=this.getOrient();vr(t)?e.setXAxisHelper(this.axisHelper()):yr(t)?e.setYAxisHelper(this.axisHelper()):br(t)&&e.setZAxisHelper(this.axisHelper())}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=e=>{let{x:t,y:i}=e;return L(t)&&(t+=Number("left"===this._orient)*this.getLayoutRect().width),L(i)&&(i+=Number("top"===this._orient)*this.getLayoutRect().height),{x:t,y:i}},this._transformLayoutRect=e=>{if(!this._visible)return e;const t=this._latestBounds.clone().translate(-this.getLayoutStartPoint().x,-this.getLayoutStartPoint().y);switch(this._layout.layoutOrient){case"left":0===this._layout.layoutRectLevelMap.width&&(e.width=t.x1<0?-t.x1:0);break;case"right":0===this._layout.layoutRectLevelMap.width&&(e.width=t.x2>0?t.x2:0);break;case"top":0===this._layout.layoutRectLevelMap.height&&(e.height=t.y1<0?-t.y1:0);break;case"bottom":0===this._layout.layoutRectLevelMap.height&&(e.height=t.y2>0?t.y2:0)}return e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),this._layout.setRectInSpec(this._layoutCacheProcessing(e))},this._fixAxisOnZero=()=>{const{onZero:e,visible:t}=this._spec.domainLine;if(this.visible&&e&&!1!==t){const{onZeroAxisId:e,onZeroAxisIndex:t}=this._spec.domainLine,i=this._option.getComponentsByKey("axes"),n=vr(this.getOrient()),r=e=>{var t;return(n?!vr(e.getOrient()):vr(e.getOrient()))&&Cn(e.getScale().type)&&e.getTickData()?null===(t=e.getTickData().getLatestData())||void 0===t?void 0:t.find((e=>0===e.value)):e.getScale().ticks().includes(0)},s=i.filter((e=>r(e)));if(s.length){let a;if(x(e))a=s.find((t=>t.id===e));else if(x(t)){const e=i[t];r(e)&&(a=e)}else a=s[0];if(a){const e=this._axisMark.getProduct(),t=a.valueToPosition(0);n?e.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dy:"bottom"===this._orient?-(a.getScale().range()[0]-t):t})}):e.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dx:"left"===this._orient?t:-(a.getScale().range()[1]-t)})})}}}},this._orient=_r(e,["z"]),br(this._orient)&&(this.layoutType="absolute"),this._dataSet=t.dataSet}static getSpecInfo(e){const t=e[this.specKey];if(!t)return null;const i="horizontal"===e.direction;if(!v(t)){if(!$j(t))return null;const{axisType:e,componentName:n}=Sr(t,i);return t.type=e,[{spec:t,specPath:[this.specKey],type:n}]}let n=!0;if(t.filter((e=>"z"===e.orient))[0]){const e=t.filter((e=>"bottom"===e.orient))[0],i=t.filter((e=>yr(e.orient)))[0];n=3===t.length&&e&&i}let r=t.map(((e,t)=>({spec:e,index:t})));n||(r=r.filter((e=>{let{spec:t}=e;return"z"!==t.orient})));const s=[];return r.forEach((e=>{let{spec:t,index:n}=e;if(!$j(t))return;const{axisType:r,componentName:a}=Sr(t,i);t.type=r,s.push({spec:t,specIndex:n,specPath:[this.specKey,n],type:a})})),s}static createComponent(e,t){const{spec:i}=e,n=TK(e,["spec"]),r=_n.getComponentInKey(n.type);return r?new r(i,Object.assign(Object.assign({},t),n)):(t.onError("Component ".concat(n.type," not found")),null)}initLayout(){super.initLayout(),this._layout.autoIndent=!1!==this._spec.autoIndent,this._layout.layoutOrient=this._orient}setLayout3dBox(e){this.layout3dBox=e}updateScaleRange(){let e=!1;const{width:t,height:i}=this.getLayoutRect(),{left:n,right:r,top:s,bottom:a}=this._innerOffset;let o=[];vr(this.getOrient())?L(t)&&(o=this._inverse?[t-r,n]:[n,t-r]):br(this.getOrient())?L(t)&&(o=this._inverse?[t-r,n]:[n,t-r],this._scale.range(o)):L(i)&&(o=this._inverse?[s,i-a]:[i-a,s]);const[l,c]=this._scale.range();return o[0]===l&&o[1]===c||(e=!0,this._scale.range(o)),e}init(e){var t;super.init(e),null===(t=this.pluginService)||void 0===t||t.load(OK.map((e=>new e))),this.callPlugin((e=>{this.pluginService&&e.onInit&&e.onInit(this.pluginService,this)}))}setAttrFromSpec(){var e;if(super.setAttrFromSpec(),this.visible){vr(this.getOrient())?tv(this._spec.maxHeight)&&(this._spec.maxHeight="30%"):tv(this._spec.maxWidth)&&(this._spec.maxWidth="30%");const e=this._getAxisAttributes();e.label.formatMethod=this.getLabelFormatMethod(),e.verticalFactor="top"===this.getOrient()||"right"===this.getOrient()?-1:1,this._axisStyle=e}this._tick=this._spec.tick;const t=null===(e=this._option.getChart())||void 0===e?void 0:e.getSpec();this._inverse=function(e,t){let i=e.inverse;return t&&!vr(e.orient)&&(i=!x(e.inverse)||!e.inverse),i}(this._spec,"horizontal"===(null==t?void 0:t.direction))}onLayoutStart(e,t,i){if(super.onLayoutStart(e,t,i),!br(this.getOrient())&&this._spec.innerOffset){const e=this._spec;yr(this.getOrient())?["top","bottom"].forEach((i=>{this._innerOffset[i]=ee(e.innerOffset[i],t.height,t)})):["left","right"].forEach((i=>{this._innerOffset[i]=ee(e.innerOffset[i],t.width,t)}))}}getSeriesStatisticsField(e){let t;return t=vr(this.getOrient())?e.fieldX:br(this.getOrient())?e.fieldZ:e.fieldY,Cn(this._scale.type)?t:[t[0]]}_tickTransformOption(e){var t,i;return Object.assign(Object.assign({},super._tickTransformOption(e)),{noDecimals:this._tick.noDecimals,labelLastVisible:null===(t=this._spec.label)||void 0===t?void 0:t.lastVisible,labelFlush:null===(i=this._spec.label)||void 0===i?void 0:i.flush})}_initData(){const e=this._initTickDataSet(this._tickTransformOption("cartesian"));e.target.addListener("change",this._forceLayout.bind(this)),this._tickData=new _k(this._option,e)}axisHelper(){var e=this;return{isContinuous:Cn(this._scale.type),dataToPosition:this.dataToPosition.bind(this),getScale:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e._scales[t]},getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!0===this._inverse}}afterCompile(){var e;const t=null===(e=this._axisMark)||void 0===e?void 0:e.getProduct();t&&t.addEventListener($r.AFTER_ELEMENT_ENCODE,(()=>{if(!1===this._isLayout&&(vr(this.getOrient())?this.callPlugin((e=>{this.pluginService&&e.onDidLayoutHorizontal&&e.onDidLayoutHorizontal(this.pluginService,this)})):this.callPlugin((e=>{this.pluginService&&e.onDidLayoutVertical&&e.onDidLayoutVertical(this.pluginService,this)})),this._delegateAxisContainerEvent(t.getGroupGraphicItem()),this._unitText)){const e=t.graphicItem.AABBBounds,i=vr(this._orient)?{x:e.x2,y:this.getLayoutStartPoint().y}:{x:this.getLayoutStartPoint().x,y:e.y1};this._unitText.setAttributes(i)}})),this.callPlugin((e=>{this.pluginService&&e.onDidCompile&&e.onDidCompile(this.pluginService,this)}))}onLayoutEnd(e){this.updateScaleRange()?this.event.emit(Ir.scaleUpdate,{model:this,value:"range"}):this.updateSeriesScale(),super.onLayoutEnd(e)}onRender(e){}changeRegions(e){}update(e){}resize(e){}collectScale(){const e=[];return gr(this._regions,(t=>{e.push("left"===this.getOrient()||"right"===this.getOrient()?t.scaleY:t.scaleX)}),{userId:this._seriesUserId,specIndex:this._seriesIndex}),e}collectData(e,t){const i=[];return gr(this._regions,(n=>{var r,s,a;let o;if(o=e>0?null===(s=null===(r=n.getGroups())||void 0===r?void 0:r.fields)||void 0===s?void 0:s[e]:vr(this.getOrient())?n.fieldX2?[...n.fieldX,n.fieldX2]:n.fieldX:br(this.getOrient())?n.fieldZ:n.fieldY,o=v(o)?Cn(this._scale.type)?o:[o[0]]:[o],e||(this._dataFieldText=n.getFieldAlias(o[0])),o){const e=n.getViewData();if(t)o.forEach((e=>{i.push(n.getRawDataStatisticsByField(e,!1))}));else if(e&&e.latestData&&e.latestData.length){const e=null===(a=n.getViewDataStatistics)||void 0===a?void 0:a.call(n);o.forEach((t=>{var n;(null===(n=null==e?void 0:e.latestData)||void 0===n?void 0:n[t])&&i.push(e.latestData[t])}))}}}),{userId:this._seriesUserId,specIndex:this._seriesIndex}),i}updateSeriesScale(){const e=this.getOrient();gr(this._regions,(t=>{vr(e)?(t.setScaleX(this._scale),t.setXAxisHelper(this.axisHelper())):yr(e)?(t.setScaleY(this._scale),t.setYAxisHelper(this.axisHelper())):br(e)&&(t.setScaleZ(this._scale),t.setZAxisHelper(this.axisHelper()))}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}getBoundsInRect(e){let t={x1:0,y1:0,x2:0,y2:0};if(!this._visible)return t;this._verticalLimitSize=vr(this.getOrient())?e.height:e.width,this.setLayoutRect(e),!this.updateScaleRange()&&v(this._tickData.getLatestData())||this.computeData("range");const i={skipLayout:!1},n=vr(this.getOrient());this.pluginService&&(n?this.callPlugin((e=>{e.onWillLayoutHorizontal&&e.onWillLayoutHorizontal(this.pluginService,i,this)})):this.callPlugin((e=>{e.onWillLayoutVertical&&e.onWillLayoutVertical(this.pluginService,i,this)})));const r=this._axisMark.getProduct();let s=!1;if(!i.skipLayout){const e=this._getUpdateAttribute(!0),i=r.getGroupGraphicItem(),a=_e(Object.assign({},this.getLayoutStartPoint()),this._axisStyle,e,{line:{visible:!1}}),o=i.getBoundsWithoutRender(a);s=!0,this._latestBounds=o,isFinite(o.width())&&(t=this._appendAxisUnit(o,n))}return s||(this._latestBounds=r.getBounds()),t}updateLayoutAttribute(){if(!this.visible)return;const e=this.getLayoutStartPoint(),t=this._getUpdateAttribute(!1),{grid:i}=t,n=TK(t,["grid"]),r=this._axisMark.getProduct(),s=_e({x:e.x,y:e.y},this._axisStyle,n);r.encode(s),this._gridMark&&this._gridMark.getProduct().encode(_e({x:e.x,y:e.y},this._getGridAttributes(),i)),super.updateLayoutAttribute()}_getTitleLimit(e){var t,i,n,r,s;if(this._spec.title.visible&&P(null===(t=this._spec.title.style)||void 0===t?void 0:t.maxLineWidth)){const t=null!==(s=null!==(n=null===(i=this._axisStyle.title)||void 0===i?void 0:i.angle)&&void 0!==n?n:null===(r=this._spec.title.style)||void 0===r?void 0:r.angle)&&void 0!==s?s:0;if(e){const e=this.getLayoutRect().width,i=Math.abs(Math.cos(t));return i<1e-6?1/0:e/i}const a=this.getLayoutRect().height,o=Math.abs(Math.sin(t));return o<1e-6?1/0:a/o}return null}_getUpdateAttribute(e){var t;let i=0,n=0;if(!e){const e=this.getRegions();let{x:t,y:r}=e[0].getLayoutStartPoint(),s=t+e[0].getLayoutRect().width,a=r+e[0].getLayoutRect().height;for(let i=1;i<e.length;i++){const n=e[i],{x:o,y:l}=n.getLayoutStartPoint(),{width:c,height:h}=n.getLayoutRect();t=Math.min(t,o),s=Math.max(s,c+o),r=Math.min(r,l),a=Math.max(a,h+l)}i=Math.abs(a-r),n=Math.abs(s-t)}const{width:r,height:s}=this.getLayoutRect(),a=vr(this._orient),o=yr(this._orient),l=br(this._orient);let c={x:0,y:0},h=0,d=0;const u=this.layout3dBox?this.layout3dBox.length:0;if(a?(c={x:r,y:0},h=i,d=r):o&&(c={x:0,y:s},h=n,d=s),l){const n=null!==(t=this.directionStr)&&void 0!==t?t:"r2l",s=this.layout3dBox?this.layout3dBox.width:0;let o=[0,0],l=-Math.PI/2,c=0;"l2r"===n&&(c=this.layout3dBox.length,o=[0,0,0],l=Math.PI/2);const h=this.getLabelItems(r),d={start:{x:0,y:0},end:{x:u,y:0},z:c,alpha:l,anchor3d:o,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(a)},items:h};return e||(d.grid={type:"line",start:{x:0,y:0},end:{x:u,y:0},items:h[0],verticalFactor:this._axisStyle.verticalFactor,depth:s,length:i,z:c,alpha:l,anchor3d:o}),d}let p=a?this.layout.minHeight:this.layout.minWidth;(a&&9===this._layout.layoutRectLevelMap.height||o&&9===this._layout.layoutRectLevelMap.width)&&(p=this._verticalLimitSize);const g=this.getLabelItems(d),f={start:{x:0,y:0},end:c,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(a)},items:g,verticalLimitSize:this._verticalLimitSize,verticalMinSize:p};return e||(f.grid={type:"line",start:{x:0,y:0},end:c,items:g[0],verticalFactor:this._axisStyle.verticalFactor,depth:u,length:h}),f}initEvent(){super.initEvent(),this.visible&&(this.event.on(Ir.layoutEnd,this._fixAxisOnZero),this.event.on(Ir.layoutRectUpdate,(()=>{this._clearLayoutCache()})))}_layoutCacheProcessing(e){return["width","height"].forEach((t=>{e[t]<this._layoutCache[t]?e[t]=this._layoutCache[t]:this._layoutCache[t]=e[t]})),this._autoIndentOnce&&this._hasAutoIndent?["x1","x2","y1","y2"].forEach((e=>{this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]})):(this._hasAutoIndent=!0,["x1","x2","y1","y2"].forEach((e=>{this.layout.getLastComputeOutBounds()[e]<this._layoutCache._lastComputeOutBounds[e]?this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]:this._layoutCache._lastComputeOutBounds[e]=this.layout.getLastComputeOutBounds()[e]}))),e}_clearLayoutCache(){this._hasAutoIndent=!1,this._layoutCache.width=0,this._layoutCache.height=0,this._layoutCache._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0}}onDataUpdate(){this._clearLayoutCache()}_appendAxisUnit(e,t){var i;if(this._spec.unit&&this._spec.unit.visible){const{text:n,style:r}=this._spec.unit;let s,a;t?(s={x:e.x2,y:this.getLayoutStartPoint().y},a={textAlign:"left",textBaseline:"middle"}):(s={x:this.getLayoutStartPoint().x,y:e.y1},a={textAlign:"left"===this._orient?"left":"right",textBaseline:"bottom"}),a=Object.assign(Object.assign(Object.assign({},a),r),{x:s.x,y:s.y,text:n}),this._unitText?this._unitText.setAttributes(a):(this._unitText=u_(a),this._unitText.name="axis-unit",null===(i=this.getContainer())||void 0===i||i.add(this._unitText));const o=this._unitText.AABBBounds;t?(e.x2+=o.x2>e.x2?o.x2-e.x2:0,e.y2+=o.y2>e.y2?o.y2-e.y2:0):(e.x1+=o.x1<e.x1?o.x1-e.x1:0,e.y1+=o.y1<e.y1?o.y1-e.y1:0)}return e}_getNeedClearVRenderComponents(){return this._unitText?[this._unitText]:[]}}PK.type=r.cartesianAxis,PK.specKey="axes";const MK=Math.sqrt(50),IK=Math.sqrt(10),RK=Math.sqrt(2);class DK{constructor(){this._extend={}}setExtraAttrFromSpec(){x(this._spec.nice)&&(this._nice=this._spec.nice),x(this._spec.zero)&&(this._zero=this._spec.zero),this._expand=this._spec.expand,this._domain=Qj(this._spec)}transformScaleDomain(){this.setScaleNice()}setLinearScaleNice(){var e;let t=5;const i=this._spec.tick||{};if(L(i.forceTickCount))t=i.forceTickCount;else if(Q(i.tickCount)){const e=this._scale.range();let n=Math.abs(e[e.length-1]-e[0]);1===n&&this._option&&(n=vr(this._orient)?this._option.getChartViewRect().width:this._option.getChartViewRect().height),t=i.tickCount({rangeSize:n,labelStyle:this._spec.label&&this._spec.label.style})}else t=L(i.tickCount)?i.tickCount:5;"accurateFirst"===this._spec.niceType&&(t=Math.max(5,t));const{min:n,max:r}=null!==(e=this._domain)&&void 0!==e?e:{};P(n)&&P(r)?this._nice&&this._scale.nice(t):x(n)&&P(r)?this._nice&&this._scale.niceMax(t):P(n)&&x(r)&&this._nice&&this._scale.niceMin(t)}setLogScaleNice(){var e;const{min:t,max:i}=null!==(e=this._domain)&&void 0!==e?e:{};P(t)&&P(i)?this._nice&&this._scale.nice():x(t)&&P(i)?this._nice&&this._scale.niceMax():P(t)&&x(i)&&this._nice&&this._scale.niceMin()}setScaleNice(){"log"===this._spec.type?this.setLogScaleNice():this.setLinearScaleNice()}dataToPosition(e,t){return this.valueToPosition(e[0])}valueToPosition(e){return"log"!==this._spec.type||P(e)||0!==e&&0!==e[0]?this._scale.scale(e):this._scale.range()[0]}computeLinearDomain(e){const t=[];return e.length?e.forEach((e=>{const{min:i,max:n}=e;t[0]=void 0===t[0]?i:Math.min(t[0],i),t[1]=void 0===t[1]?n:Math.max(t[1],n)})):(t[0]=0,t[1]=0),this.expandDomain(t),this.includeZero(t),this.setDomainMinMax(t),t}expandDomain(e){if(!this._expand)return;let t=e[0],i=e[e.length-1];t===i&&(0===i?i=1:i>0?t=0:i<0&&(i=0)),x(this._expand.min)&&(e[0]=t-(i-t)*this._expand.min),x(this._expand.max)&&(e[e.length-1]=i+(i-t)*this._expand.max)}niceDomain(e){const{min:t,max:i}=Qj(this._spec);if(x(t)||x(i)||"linear"!==this._spec.type)return e;if(Math.abs(U(e)-V(e))<=1e-12){let t=e[0];const i=t>=0?1:-1;if(t=Math.abs(t),t<1)e[0]=0,e[1]=1;else{let i=t/5;const n=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,n);i=(r>=MK?10:r>=IK?5:r>=RK?2:1)*Math.pow(10,n),e[0]=0,e[1]=10*i}i<0&&(e.reverse(),e[0]*=-1,e[1]*=-1)}return e}includeZero(e){this._zero&&(e[0]=Math.min(e[0],0),e[e.length-1]=Math.max(e[e.length-1],0))}setExtendDomain(e,t){if(void 0===t)return void delete this._extend[e];this._extend[e]=t;const i=this._scale.domain();this.extendDomain(i),this.includeZero(i),this.setDomainMinMax(i),this.niceDomain(i),this._scale.domain(i,this._nice),this.setScaleNice(),this.event.emit(Ir.scaleUpdate,{model:this,value:"domain"})}extendDomain(e){let t;const i=e.length-1,n=e[0]-e[i]>0,r=n?i:0,s=n?0:i;for(const a in this._extend)t=this._extend[a],t>e[s]&&(e[s]=t),t<e[r]&&(e[r]=t)}getDomainSpec(){return this._domain}setDomainMinMax(e){if(!this._domain)return;const{min:t,max:i}=this._domain;x(t)&&(e[0]=t),x(i)&&(e[1]=i)}setZero(e){this._zero!==e&&(this._zero=e,this.updateScaleDomain())}updateScaleDomain(){if(!this.isSeriesDataEnable())return;const e=this.collectData(),t=this.computeDomain(e);this.updateScaleDomainByModel(t)}updateScaleDomainByModel(e){e=null!=e?e:this._scale.domain(),this.extendDomain(e),this.includeZero(e),this.setDomainMinMax(e),this.niceDomain(e),this._scale.domain(e,this._nice),this.setScaleNice(),this.event.emit(Ir.scaleDomainUpdate,{model:this}),this.event.emit(Ir.scaleUpdate,{model:this,value:"domain"})}}class LK extends PK{constructor(){super(...arguments),this.type=r.cartesianLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new ak}setAttrFromSpec(){super.setAttrFromSpec(),this.setExtraAttrFromSpec()}initScales(){var e,t;super.initScales();const i=[0,1];x(null===(e=this._domain)||void 0===e?void 0:e.min)&&(i[0]=this._domain.min),x(null===(t=this._domain)||void 0===t?void 0:t.max)&&(i[1]=this._domain.max),this._scale.domain(i)}computeDomain(e){return this.computeLinearDomain(e)}axisHelper(){const e=super.axisHelper();return e.setExtendDomain=this.setExtendDomain.bind(this),e.valueToPosition=this.valueToPosition.bind(this),e}}LK.type=r.cartesianLinearAxis,LK.specKey="axes",$R(LK,DK);class jK{constructor(){this._rawDomainIndex=[]}dataToPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i,n;if(0===e.length||0===this._scales.length)return 0;const{position:r,bandScale:s}=this.getPosition(e);return r+s.bandwidth()*(null!==(n=null!==(i=t.bandPosition)&&void 0!==i?i:this._spec.bandPosition)&&void 0!==n?n:this._defaultBandPosition)}valueToPosition(e){return this._scale.scale(e)}updateGroupScaleRange(){let e=this._scale;this._scales.forEach(((t,i)=>{i>0&&(t.range([0,e.bandwidth()]),e=t)}))}getPosition(e){let t=0,i=this._scale;if(1===this._scales.length||1===e.length)t=this.valueToPosition(e[0]);else{const n=Math.min(e.length,this._scales.length);for(let i=0;i<n;i++)t+=this._scales[i].scale(e[i]);i=this._scales[n-1]}return{position:t,bandScale:i}}calcScales(e,t){var i,n;const{bandPadding:r,paddingInner:s,paddingOuter:a}=this._spec,o=v(r),l=v(s),c=v(a);for(let h=0;h<this._scales.length;h++){const d=o?r[h]:r,u=l?s[h]:s,p=c?a[h]:a;this._scales[h].paddingInner(null!==(i=null!=u?u:d)&&void 0!==i?i:e,!0).paddingOuter(null!==(n=null!=p?p:d)&&void 0!==n?n:t,!0)}}computeBandDomain(e){if(!e.length)return[];if(1===e.length)return e[0].values;const t=new Set;for(let i=0;i<e.length;i++)for(let n=0;n<e[i].values.length;n++)t.add(e[i].values[n]);return Array.from(t)}updateScaleDomain(){var e;if(!this.isSeriesDataEnable())return;!(null===(e=this._rawDomainIndex)||void 0===e?void 0:e.length)&&this._scales.length&&this._updateRawDomain();const t=this._spec.domain;for(let i=0;i<this._scales.length;i++)if(t&&t.length&&0===i)this._scales[i].domain(t);else{const e=this.collectData(i),t=this.computeDomain(e);this._scales[i].domain(t.sort(((e,t)=>this._rawDomainIndex[i][e]-this._rawDomainIndex[i][t])))}this.transformScaleDomain(),this.event.emit(Ir.scaleDomainUpdate,{model:this}),this.event.emit(Ir.scaleUpdate,{model:this,value:"domain"})}_updateRawDomain(){this._rawDomainIndex=[];const e=this._spec.domain;for(let t=0;t<this._scales.length;t++)if(e&&e.length&&0===t)this._scales[t].domain(e);else{const e=this.collectData(t,!0),i=this.computeDomain(e);this._rawDomainIndex[t]={},i.forEach(((e,i)=>this._rawDomainIndex[t][e]=i))}}_clearRawDomain(){this._rawDomainIndex=[]}}class FK extends PK{constructor(){super(...arguments),this.type=r.cartesianBandAxis,this._scale=new hk}computeDomain(e){return this.computeBandDomain(e)}updateScaleRange(){const e=super.updateScaleRange();return this.updateGroupScaleRange(),e}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}axisHelper(){const e=e=>this._scales[e];return{isContinuous:!1,dataToPosition:this.dataToPosition.bind(this),getScale:e,getBandwidth:t=>e(t).bandwidth(),getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse}}transformScaleDomain(){this.updateFixedWholeLength()}updateFixedWholeLength(){var e;if(this._scale&&(this._spec.bandSize&&this._scale.bandwidth(this._spec.bandSize),this._spec.maxBandSize&&this._scale.maxBandwidth(this._spec.maxBandSize),this._spec.minBandSize&&this._scale.minBandwidth(this._spec.minBandSize),this._scale.isBandwidthFixed()&&this._spec.autoRegionSize&&(this._spec.bandSize||this._spec.maxBandSize))){const t=EC(this._scale.domain().length,null!==(e=this._spec.bandSize)&&void 0!==e?e:this._spec.maxBandSize,this._scale.paddingInner(),this._scale.paddingOuter());["bottom","top"].includes(this._orient)?this._regions.forEach((e=>e.setMaxWidth(t))):["left","right"].includes(this._orient)&&this._regions.forEach((e=>e.setMaxHeight(t)))}}}FK.type=r.cartesianBandAxis,FK.specKey="axes",$R(FK,jK);class BK extends LK{constructor(){super(...arguments),this.type=r.cartesianTimeAxis,this._zero=!1,this.effect={scaleUpdate:e=>{this.computeData(null==e?void 0:e.value),gr(this._regions,(e=>{vr(this.getOrient())?e.setXAxisHelper(this.axisHelper()):e.setYAxisHelper(this.axisHelper())}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._tick=_e({},this._spec.tick,null===(e=this._spec.layers)||void 0===e?void 0:e[0])}_initData(){var e;if(super._initData(),null===(e=this._spec.layers)||void 0===e?void 0:e[1]){const e=new R(this._option.dataSet,{name:"".concat(this.type,"_").concat(this.id,"_layer_1_ticks")}).parse(this._scale,{type:"scale"}).transform({type:"ticks",options:Object.assign(Object.assign({},this._tickTransformOption("cartesian")),{tickCount:this._spec.layers[1].tickCount,forceTickCount:this._spec.layers[1].forceTickCount,tickStep:this._spec.layers[1].tickStep})},!1);this._layerTickData=new _k(this._option,e)}}computeData(e){super.computeData(e),this._layerTickData&&(this._layerTickData.getDataView().reRunAllTransform(),this._layerTickData.updateData())}getLabelFormatMethod(){var e,t,i,n,r,s,a,o;const l=kB.getInstance(),c=(null===(t=null===(e=this._spec.layers)||void 0===e?void 0:e[1])||void 0===t?void 0:t.timeFormat)||"%Y%m%d",h="local"===((null===(n=null===(i=this._spec.layers)||void 0===i?void 0:i[1])||void 0===n?void 0:n.timeFormatMode)||"local")?l.timeFormat:l.timeUTCFormat,d=(null===(s=null===(r=this._spec.layers)||void 0===r?void 0:r[0])||void 0===s?void 0:s.timeFormat)||"%Y%m%d",u="local"===((null===(o=null===(a=this._spec.layers)||void 0===a?void 0:a[0])||void 0===o?void 0:o.timeFormatMode)||"local")?l.timeFormat:l.timeUTCFormat;return(e,t,i,n,r)=>{var s;let a;return a=0===r?u(d,e):h(c,e),(null===(s=this._spec.label)||void 0===s?void 0:s.formatMethod)?this._spec.label.formatMethod(a,t):a}}getLabelItems(e){const t=[];return v(this._tickData.getLatestData())&&t.push(this._tickData.getLatestData().map((t=>({id:t.value,label:t.value,value:0===e?0:this.dataToPosition([t.value])/e,rawValue:t.value})))),this._layerTickData&&v(this._layerTickData.getLatestData())&&t.push(this._layerTickData.getLatestData().map((t=>{const i=this.dataToPosition([t.value]);return{id:t.value,label:t.value,value:i/e,rawValue:t.value}}))),t}transformScaleDomain(){}}BK.type=r.cartesianTimeAxis,BK.specKey="axes";function NK(e){return t=>-e(-t)}function zK(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.EPSILON;return t=>Math.max(t,e)}class HK extends sk{constructor(){super(xC(10),_C(10)),this.type=Sn.Log,this._limit=zK(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return(new HK).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(e){var t;if(e)return this;super.rescale();const i=xC(this._base),n=_C(this._base);return(null!==(t=this._niceDomain)&&void 0!==t?t:this._domain)[0]<0?(this._logs=NK(i),this._pows=NK(n),this._limit=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.EPSILON;return t=>Math.min(t,-e)}(),this.transformer=vC,this.untransformer=yC):(this._logs=i,this._pows=n,this._limit=zK(),this.transformer=this._logs,this.untransformer=n),this}scale(e){var t;if(e=Number(e),Number.isNaN(e)||this._domainValidator&&!this._domainValidator(e))return this._unknown;this._output||(this._output=this._piecewise((null!==(t=this._niceDomain)&&void 0!==t?t:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const i=this._output(this.transformer(this._limit(this._clamp(e))));return this._fishEyeTransform?this._fishEyeTransform(i):i}base(e,t){return arguments.length?(this._base=e,this.rescale(t)):this._base}tickFormat(){return gC}d3Ticks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0;const i=this.domain(),n=this._limit(i[0]),r=this._limit(i[i.length-1]);return YC(n,r,e,this._base,this.transformer,this.untransformer,t)}ticks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=this.calculateVisibleDomain(this._range);return XC(this._limit(t[0]),this._limit(t[t.length-1]),e,this._base,this.transformer,this.untransformer)}forceTicks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=this.calculateVisibleDomain(this._range);return qC(t[0],t[t.length-1],e,this.transformer,this.untransformer)}stepTicks(e){const t=this.calculateVisibleDomain(this._range);return qC(this._limit(t[0]),this._limit(t[t.length-1]),e,this.transformer,this.untransformer)}nice(){let e=arguments.length>1?arguments[1]:void 0;var t,i;const n=this._domain;let r=[],s=null;if(e){const t=GC(n,e);if(r=t.niceMinMax,this._domainValidator=t.domainValidator,s=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else s="all";if(s){const e=PC(n.slice(),{floor:e=>this._pows(Math.floor(this._logs(this._limit(e)))),ceil:e=>Math.abs(e)>=1?Math.ceil(e):this._pows(Math.ceil(this._logs(this._limit(e))))});return"min"===s?e[e.length-1]=null!==(t=r[1])&&void 0!==t?t:e[e.length-1]:"max"===s&&(e[0]=null!==(i=r[0])&&void 0!==i?i:e[0]),this._niceDomain=e,this.rescale(),this}return this}niceMin(){const e=this._domain[this._domain.length-1];this.nice();const t=this._domain.slice();return this._domain&&(t[t.length-1]=e,this._niceDomain=t,this.rescale()),this}niceMax(){const e=this._domain[0];this.nice();const t=this._domain.slice();return this._domain&&(t[0]=e,this._niceDomain=t,this.rescale()),this}}class VK extends LK{constructor(){super(...arguments),this.type=r.cartesianLogAxis,this._zero=!1,this._scale=new HK}initScales(){var e;super.initScales(),this._scale.base(null!==(e=this._spec.base)&&void 0!==e?e:10)}transformScaleDomain(){}}VK.type=r.cartesianLogAxis,VK.specKey="axes",$R(VK,DK);class UK extends ak{constructor(){super(SC(1),wC(1)),this.type=Sn.Symlog,this._const=1}clone(){return(new UK).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).constant(this._const)}constant(e,t){return arguments.length?(this._const=e,this.transformer=SC(e),this.untransformer=wC(e),this.rescale(t)):this._const}d3Ticks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0;const i=this.domain(),n=i[0],r=i[i.length-1];return YC(n,r,e,this._const,this.transformer,this.untransformer,t)}ticks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=this.calculateVisibleDomain(this._range);return XC(t[0],t[t.length-1],e,this._const,this.transformer,this.untransformer)}forceTicks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=this.calculateVisibleDomain(this._range);return qC(t[0],t[t.length-1],e,this.transformer,this.untransformer)}stepTicks(e){const t=this.calculateVisibleDomain(this._range);return qC(t[0],t[t.length-1],e,this.transformer,this.untransformer)}nice(){let e=arguments.length>1?arguments[1]:void 0;var t,i;const n=this._domain;let r=[],s=null;if(e){const t=GC(n,e);if(r=t.niceMinMax,this._domainValidator=t.domainValidator,s=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else s="all";if(s){const e=PC(n.slice(),{floor:e=>Math.floor(e),ceil:e=>Math.ceil(e)});return"min"===s?e[e.length-1]=null!==(t=r[1])&&void 0!==t?t:e[e.length-1]:"max"===s&&(e[0]=null!==(i=r[0])&&void 0!==i?i:e[0]),this._niceDomain=e,this.rescale(),this}return this}niceMin(){const e=this._domain[this._domain.length-1];this.nice();const t=this._domain.slice();return this._domain&&(t[t.length-1]=e,this._niceDomain=t,this.rescale()),this}niceMax(){const e=this._domain[0];this.nice();const t=this._domain.slice();return this._domain&&(t[0]=e,this._niceDomain=t,this.rescale()),this}}class WK extends LK{constructor(){super(...arguments),this.type=r.cartesianSymlogAxis,this._zero=!1,this._scale=new UK}initScales(){var e;super.initScales(),this._scale.constant(null!==(e=this._spec.constant)&&void 0!==e?e:10)}transformScaleDomain(){}}WK.type=r.cartesianSymlogAxis,WK.specKey="axes",$R(WK,DK);const GK=e=>{var t;const i=null!==(t=e.type)&&void 0!==t?t:"angle"===e.orient?"band":"linear";return{axisType:i,componentName:"".concat(r.polarAxis,"-").concat(i)}};var KK=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class YK extends AK{constructor(){super(...arguments),this.type=r.polarAxis,this.name=r.polarAxis,this._defaultBandPosition=0,this._defaultBandInnerPadding=0,this._defaultBandOuterPadding=0,this.layoutType="absolute",this.layoutZIndex=zw.Axis,this._tick=void 0,this._center=null,this._startAngle=it,this._endAngle=nt,this._orient="radius",this._groupScales=[],this.effect={scaleUpdate:e=>{this.computeData(null==e?void 0:e.value),gr(this._regions,(e=>{"radius"===this.getOrient()?e.radiusAxisHelper=this.axisHelper():e.angleAxisHelper=this.axisHelper()}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=e=>{var t;const i=null===(t=this.getRegions())||void 0===t?void 0:t[0];return i?i.getLayoutStartPoint():e}}get center(){return this._center}get startAngle(){return this._startAngle}get endAngle(){return this._endAngle}getOrient(){return this._orient}getGroupScales(){return this._groupScales}static getSpecInfo(e){var t,i;const n=e[this.specKey];if(!n)return null;if(!v(n)){if(!Jj(n))return null;const{axisType:r,componentName:s}=GK(n);return n.center=e.center,n.startAngle=null!==(t=e.startAngle)&&void 0!==t?t:rt,n.endAngle=null!==(i=e.endAngle)&&void 0!==i?i:x(e.startAngle)?e.startAngle+360:st,n.type=r,[{spec:n,specPath:[this.specKey],type:s}]}const r=[];let s;const a=[];return n.forEach(((t,i)=>{var n,o,l,c,h;if(!Jj(t))return;const{axisType:d,componentName:u}=GK(t);t.center=e.center,t.startAngle=null!==(n=e.startAngle)&&void 0!==n?n:rt,t.endAngle=null!==(o=e.endAngle)&&void 0!==o?o:x(e.startAngle)?e.startAngle+360:st,t.outerRadius=null!==(h=null!==(c=null!==(l=t.radius)&&void 0!==l?l:e.outerRadius)&&void 0!==c?c:e.radius)&&void 0!==h?h:at,t.type=d;const p={spec:t,specIndex:i,specPath:[this.specKey,i],type:u};r.push(p),"radius"===t.orient?a.push(p):s=i})),a.forEach((e=>{e.angleAxisIndex=s})),r}static createComponent(e,t){const{spec:i}=e,n=KK(e,["spec"]),r=_n.getComponentInKey(n.type);return r?new r(i,Object.assign(Object.assign({},t),n)):(t.onError("Component ".concat(n.type," not found")),null)}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this.visible&&(this._axisStyle=this._getAxisAttributes(),this._gridStyle=this._getGridAttributes()),this._tick=this._spec.tick,this._orient="angle"===this._spec.orient?"angle":"radius",this._center=this._spec.center;const i=this.getChart().getSpec(),n=null!==(e=this._spec.startAngle)&&void 0!==e?e:i.startAngle,r=null!==(t=this._spec.endAngle)&&void 0!==t?t:i.endAngle;this._startAngle=el(null!=n?n:rt),this._endAngle=el(null!=r?r:x(n)?n+360:st),this._inverse=this._spec.inverse}onLayoutEnd(e){this.updateScaleRange()&&(this.updateSeriesScale(),this.event.emit(Ir.scaleUpdate,{model:this,value:"range"})),super.onLayoutEnd(e)}onRender(e){}changeRegions(){}_initData(){const e=this._initTickDataSet(this._tickTransformOption("polar"));e.target.addListener("change",this._forceLayout.bind(this)),this._tickData=new _k(this._option,e)}_tickTransformOption(e){return Object.assign(Object.assign({},super._tickTransformOption(e)),{noDecimal:this._tick.noDecimals,startAngle:this.startAngle,labelOffset:Zj(this._spec),getRadius:()=>this.getOuterRadius()})}afterCompile(){var e;const t=null===(e=this._axisMark)||void 0===e?void 0:e.getProduct();t&&t.addEventListener($r.AFTER_ELEMENT_ENCODE,(()=>{!1===this._isLayout&&this._delegateAxisContainerEvent(t.getGroupGraphicItem())}))}updateScaleRange(){const e=this._scale.range();let t;return t="radius"===this.getOrient()?this._inverse?[this.computeLayoutOuterRadius(),this.computeLayoutInnerRadius()]:[this.computeLayoutInnerRadius(),this.computeLayoutOuterRadius()]:this._inverse?[this._endAngle,this._startAngle]:[this._startAngle,this._endAngle],(!e||!t||e[0]!==t[0]||e[1]!==t[1])&&(this._scale.range(t),!0)}collectData(e,t){const i=[];return gr(this._regions,(n=>{var r,s,a;let o;if(o=e>0?null===(s=null===(r=n.getGroups())||void 0===r?void 0:r.fields)||void 0===s?void 0:s[e]:"radius"===this.getOrient()?n.getRadiusField():n.getAngleField(),o=v(o)?Cn(this._scale.type)?o:[o[0]]:[o],e||(this._dataFieldText=n.getFieldAlias(o[0])),o){const e=n.getViewData();if(t)o.forEach((e=>{i.push(n.getRawDataStatisticsByField(e,!1))}));else if(e&&e.latestData&&e.latestData.length){const e=null===(a=n.getViewDataStatistics)||void 0===a?void 0:a.call(n);o.forEach((t=>{var n;(null===(n=null==e?void 0:e.latestData)||void 0===n?void 0:n[t])&&i.push(e.latestData[t])}))}}}),{userId:this._seriesUserId,specIndex:this._seriesIndex}),i}updateSeriesScale(){gr(this._regions,(e=>{"radius"===this.getOrient()?(e.setRadiusScale(this._scale),e.radiusAxisHelper=this.axisHelper()):(e.setAngleScale(this._scale),e.angleAxisHelper=this.axisHelper())}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}getSeriesStatisticsField(e){const t="radius"===this.getOrient()?e.getRadiusField():e.getAngleField();return Cn(this._scale.type)?t:[t[0]]}initGroupScales(){}axisHelper(){return{isContinuous:Cn(this._scale.type),dataToPosition:this.dataToPosition.bind(this),coordToPoint:this.coordToPoint.bind(this),pointToCoord:this.pointToCoord.bind(this),center:this.getCenter.bind(this),getScale:e=>this._scales[e],getAxisId:()=>this.id}}positionToData(e){const t=this.pointToCoord(e);return"radius"===this.getOrient()?this.invert(t.radius):this.invert(t.angle)}coordToPoint(e){const t=e.angle,{x:i,y:n}=this.getCenter(),r=ar({angle:t,radius:e.radius});return{x:r.x+i,y:r.y+n}}pointToCoord(e){const{x:t,y:i}=this.getCenter();let n=e.x-t,r=e.y-i;const s=this._startAngle,a=this._endAngle,o=Math.sqrt(n*n+r*r);n/=o,r/=o;let l=Math.atan2(r,n);if(l<s)for(;l<=s;)l+=2*Math.PI;if(l>a)for(;l>=a;)l-=2*Math.PI;return{radius:o,angle:l}}getCenter(){var e,t;return{x:(null===(e=this._center)||void 0===e?void 0:e.x)||this.getRefLayoutRect().width/2,y:(null===(t=this._center)||void 0===t?void 0:t.y)||this.getRefLayoutRect().height/2}}getOuterRadius(){return this.computeLayoutOuterRadius()}getInnerRadius(){return this.computeLayoutInnerRadius()}tickValues(){if(this._tickData){const e=this._tickData.getLatestData();if(!e||v(e))return e||[];this.computeData("force")}return this._scale.ticks()}updateLayoutAttribute(){this._visible&&("radius"===this.getOrient()?this._layoutRadiusAxis():this._layoutAngleAxis()),super.updateLayoutAttribute()}_layoutAngleAxis(){const e=this.getCenter(),t=this.computeLayoutOuterRadius(),i=this.computeLayoutInnerRadius(),n=this._endAngle-this._startAngle,r=v(this._tickData.getLatestData())?this._tickData.getLatestData().map((e=>{const t=this.dataToPosition([e.value]);return{id:e.value,label:e.value,value:(t-this._startAngle)/n,rawValue:e.value}})):[],s=Object.assign(Object.assign({},this.getLayoutStartPoint()),{inside:this._spec.inside,center:e,radius:t,innerRadius:i,startAngle:this._startAngle,endAngle:this._endAngle}),a=Object.assign(Object.assign({},s),{title:{text:this._spec.title.text||this._dataFieldText},items:r.length?[r]:[],orient:"angle"});this._spec.grid.visible&&(a.grid=Object.assign({type:"line",smoothLink:!0,items:r},s)),this._update(a)}_layoutRadiusAxis(){var e,t,i;const n=this.getCenter(),r=this.computeLayoutOuterRadius(),s=this.computeLayoutInnerRadius(),a=this.coordToPoint({angle:this._startAngle,radius:r}),o=this.coordToPoint({angle:this._startAngle,radius:s}),l=nr.distancePP(o,a),c=v(this._tickData.getLatestData())?this._tickData.getLatestData().map((e=>{const t=this.dataToPosition([e.value]);return{id:e.value,label:e.value,value:(t-s)/l,rawValue:e.value}})):[],h=Object.assign(Object.assign({},this.getLayoutStartPoint()),{start:o,end:a,verticalFactor:-1}),d=Object.assign(Object.assign({},h),{title:{text:this._spec.title.text||this._dataFieldText},items:c.length?[c]:[],orient:"radius"});(null===(e=this._spec.grid)||void 0===e?void 0:e.visible)&&(d.grid=Object.assign({items:c,type:(null===(t=this._spec.grid)||void 0===t?void 0:t.smooth)?"circle":"polygon",center:n,closed:!0,sides:null===(i=this._getRelatedAngleAxis())||void 0===i?void 0:i.tickValues().length,startAngle:this._startAngle,endAngle:this._endAngle},h)),this._update(d)}_getRelatedAngleAxis(){const e=this._option.angleAxisIndex;if(x(e))return this._option.getComponentByIndex(this.specKey,e)}computeLayoutOuterRadius(){var e;const t=null!==(e=this._spec.outerRadius)&&void 0!==e?e:this._spec.radius,i=null!=t?t:this.getRefSeriesRadius().outerRadius,{width:n,height:r}=this.getRefLayoutRect();return Math.min(n,r)/2*i}computeLayoutInnerRadius(){var e;const t=null!==(e=this._spec.innerRadius)&&void 0!==e?e:this.getRefSeriesRadius().innerRadius,{width:i,height:n}=this.getRefLayoutRect();return Math.min(i,n)/2*t}getRefLayoutRect(){return this.getRegions()[0].getLayoutRect()}getRefSeriesRadius(){let e=at,t=0;const i=this.getChart().getSpec();return gr(this.getRegions(),(n=>{const r=n;if(s=r.type,[Bt.rose,Bt.radar,Bt.circularProgress].includes(s)){const{outerRadius:n=i.outerRadius,innerRadius:s=i.innerRadius}=r;L(n)&&(e=n),L(s)&&(t=s)}var s}),{userId:this._seriesUserId,specIndex:this._seriesIndex}),{outerRadius:e,innerRadius:t}}_update(e){const{grid:t}=e,i=KK(e,["grid"]);this._axisMark.getProduct().encode(_e({},this._axisStyle,i)),this._gridMark&&this._gridMark.getProduct().encode(_e({},this._gridStyle,t))}invert(e){var t;if("angle"===this.getOrient()&&"band"===this._scale.type){const i=this._scale.range(),n=i[i.length-1]-i[0],r=.5===(null!==(t=this.getSpec().bandPosition)&&void 0!==t?t:this._defaultBandPosition)?0:this._scale.bandwidth()/2;if(i[0]<0){const t=(e+r+Math.abs(i[0]))%n-Math.abs(i[0]);return this._scale.invert(t)}return this._scale.invert((e+r)%n)}return this._scale.invert(e)}}YK.type=r.polarAxis,YK.specKey="axes";class XK extends YK{constructor(){super(...arguments),this.type=r.polarBandAxis,this._scale=new hk}computeDomain(e){return this.computeBandDomain(e)}updateScaleRange(){const e=super.updateScaleRange();return this.updateGroupScaleRange(),e}axisHelper(){const e=super.axisHelper();return Object.assign(Object.assign({},e),{getBandwidth:t=>e.getScale(t).bandwidth()})}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}transformScaleDomain(){}}XK.type=r.polarBandAxis,XK.specKey="axes",$R(XK,jK);class qK extends YK{constructor(){super(...arguments),this.type=r.polarLinearAxis,this._zero=!0,this._nice=!0,this._scale=new ak}setAttrFromSpec(){super.setAttrFromSpec(),this.setExtraAttrFromSpec()}initScales(){super.initScales(),this.setScaleNice()}computeDomain(e){return this.computeLinearDomain(e)}}qK.type=r.polarLinearAxis,qK.specKey="axes",$R(qK,DK);var ZK=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const QK=16,$K=8,JK=12;var eY,tY,iY;!function(e){e.selected="selected",e.unSelected="unSelected",e.selectedHover="selectedHover",e.unSelectedHover="unSelectedHover",e.focus="focus"}(eY||(eY={})),function(e){e.legendItemHover="legendItemHover",e.legendItemUnHover="legendItemUnHover",e.legendItemClick="legendItemClick",e.legendItemAttributeUpdate="legendItemAttributeUpdate"}(tY||(tY={})),function(e){e.innerView="innerView",e.title="legendTitle",e.item="legendItem",e.itemShape="legendItemShape",e.itemLabel="legendItemLabel",e.itemValue="legendItemValue",e.focus="legendItemFocus"}(iY||(iY={}));class nY extends qW{constructor(){super(...arguments),this.name="legend",this._title=null}render(){this.removeAllChild();const{interactive:e=!0,title:t,padding:i=0}=this.attribute,n=nW(i),r=bp.group({x:n[3],y:n[0],pickable:e,childrenPickable:e});r.name=iY.innerView,this.add(r),this._innerView=r,(null==t?void 0:t.visible)&&this._renderTitle(t),this._renderContent(),this._adjustLayout(),e&&this._bindEvents();const s=this._innerView.AABBBounds;this.attribute.width=s.width()+n[1]+n[3],this.attribute.height=s.height()+n[0]+n[2]}_renderTitle(e){const{text:t="",textStyle:i,padding:n=0,background:r,minWidth:s,maxWidth:a,shape:o}=e,l={x:0,y:0,text:t,textStyle:i,padding:nW(n),minWidth:s,maxWidth:a};o&&o.visible&&(l.shape=Object.assign({visible:!0},o.style),x(o.space)&&(l.space=o.space)),r&&r.visible&&(l.panel=Object.assign({visible:!0},r.style));const c=new mG(l);c.name=iY.title,this._title=c,this._innerView.add(c)}_adjustLayout(){var e;if(this._title){const t=this._innerView.AABBBounds.width(),i=this._title.AABBBounds.width(),n=null===(e=this.attribute.title)||void 0===e?void 0:e.align;"center"===n?this._title.setAttribute("x",(t-i)/2):"end"===n&&this._title.setAttribute("x",t-i)}}}function rY(){s_(),RS(),KT()}const sY={space:8,style:{fill:"rgb(47, 69, 84)",cursor:"pointer",size:15},state:{disable:{fill:"rgb(170, 170, 170)",cursor:"not-allowed"},hover:{}}};rY();class aY extends qW{getCurrent(){return this._current}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},aY.defaultAttributes,e)),this.name="pager",this._current=1,this._onHover=e=>{const t=e.target;t.hasState("disable")||t.addState("hover")},this._onUnHover=e=>{e.target.removeState("hover")},this._onClick=e=>{const t=e.target;if("preHandler"===t.name){if(1===this._current)return;this._current-=1,1===this._current?t.addState("disable"):t.removeState("disable"),this._dispatchEvent("toPrev",{current:this._current,total:this._total,direction:"pre",event:e})}if("nextHandler"===t.name){if(this._current===this._total)return;this._current+=1,this._current===this._total?t.addState("disable"):t.removeState("disable"),this._dispatchEvent("toNext",{current:this._current,total:this._total,direction:"next",event:e})}this._current>1&&this.preHandler.removeState("disable"),this._current<this._total&&this.nextHandler.removeState("disable"),this.text.setAttribute("text","".concat(this._current,"/").concat(this._total))}}render(){var e,t;this._reset();const{layout:i="horizontal",handler:n=sY,total:r,defaultCurrent:s=1,textStyle:a,padding:o=0}=this.attribute;this._current=s;const c=nW(o),h="horizontal"===i,d=bp.group({x:0,y:0}),u=n.style||{},p=u.size||15,g=null!==(e=n.space)&&void 0!==e?e:8,f=n.state||{};let{preShape:m,nextShape:v}=n;m||(m=h?"triangleLeft":"triangleUp"),v||(v=h?"triangleRight":"triangleDown");const y=bp.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},u),{x:0,y:0,symbolType:m,size:p}));y.states=f,y.name="preHandler",this.preHandler=y,d.add(y);const{width:b,height:_}=pG("".concat(r,"/").concat(r),Object.assign({textAlign:"center",textBaseline:"middle"},a),null===(t=this.stage)||void 0===t?void 0:t.getTheme().text.fontFamily),x=l(p)?p:p[0],S=l(p)?p:p[1],w=bp.text(Object.assign({x:h?x/2+g+b/2:0,y:h?0:S/2+g+_/2,text:"".concat(s,"/").concat(r),textAlign:"center",textBaseline:"middle",lineHeight:null==a?void 0:a.fontSize},a));this.text=w,d.add(w);const C=bp.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},u),{x:h?x+2*g+b:0,y:h?0:S+2*g+_,symbolType:v,size:p}));C.name="nextHandler",C.states=f,this.nextHandler=C,d.add(C),1===this._total?(y.addState("disable"),C.addState("disable")):1===this._current?y.addState("disable"):this._current===r&&C.addState("disable");const k=d.AABBBounds,A=k.width(),E=k.height();d.translateTo(0-k.x1+c[3],0-k.y1+c[0]),this.add(d),this.attribute.width=A+c[1]+c[3],this.attribute.height=E+c[0]+c[2],this._bindEvents()}_bindEvents(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener("pointerenter",this._onHover),this.preHandler.addEventListener("pointerleave",this._onUnHover),this.preHandler.addEventListener("pointerdown",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener("pointerenter",this._onHover),this.nextHandler.addEventListener("pointerleave",this._onUnHover),this.nextHandler.addEventListener("pointerdown",this._onClick)))}_reset(){this.removeAllChild(),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}}function oY(){s_(),KT(),hw(),RS()}function lY(){s_(),gG()}aY.defaultAttributes={handler:sY,textStyle:{fill:"rgb(51, 51, 51)",fontSize:12}};var cY=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const hY={[eY.focus]:{},[eY.selected]:{},[eY.selectedHover]:{},[eY.unSelected]:{},[eY.unSelectedHover]:{}};lY(),rY();class dY extends nY{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},dY.defaultAttributes,e)),this.name="discreteLegend",this._itemsContainer=null,this._itemHeightByUser=void 0,this._itemHeight=0,this._itemMaxWidth=0,this._onHover=e=>{const t=e.target;if(t&&t.name&&t.name.startsWith(iY.item)){const i=t.delegate;if(this._lastActiveItem){if(this._lastActiveItem.id===i.id)return;this._unHover(this._lastActiveItem,e)}this._hover(i,e)}else this._lastActiveItem&&(this._unHover(this._lastActiveItem,e),this._lastActiveItem=null)},this._onUnHover=e=>{this._lastActiveItem&&(this._unHover(this._lastActiveItem,e),this._lastActiveItem=null)},this._onClick=e=>{var t,i,n,r;const s=e.target;if(s&&s.name&&s.name.startsWith(iY.item)){const a=s.delegate;if(s.name===iY.focus){const n=a.hasState(eY.focus);a.toggleState(eY.focus),n?null===(t=this._itemsContainer)||void 0===t||t.getChildren().forEach((t=>{this._removeLegendItemState(t,[eY.unSelected,eY.unSelectedHover,eY.focus],e),this._setLegendItemState(t,eY.selected,e)})):(this._setLegendItemState(a,eY.selected,e),this._removeLegendItemState(a,[eY.unSelected,eY.unSelectedHover],e),null===(i=this._itemsContainer)||void 0===i||i.getChildren().forEach((t=>{a!==t&&(this._removeLegendItemState(t,[eY.selected,eY.selectedHover,eY.focus],e),this._setLegendItemState(t,eY.unSelected,e))})))}else{null===(n=this._itemsContainer)||void 0===n||n.getChildren().forEach((e=>{e.removeState(eY.focus)}));const{selectMode:t="multiple",allowAllCanceled:i=!0}=this.attribute,s=a.hasState(eY.selected),o=this._getSelectedLegends();if("multiple"===t){if(!1===i&&s&&1===o.length)return void this._dispatchLegendEvent(tY.legendItemClick,a,e);s?(this._removeLegendItemState(a,[eY.selected,eY.selectedHover],e),this._setLegendItemState(a,eY.unSelected,e)):(this._setLegendItemState(a,eY.selected,e),this._removeLegendItemState(a,[eY.unSelected,eY.unSelectedHover],e))}else this._setLegendItemState(a,eY.selected,e),this._removeLegendItemState(a,[eY.unSelected,eY.unSelectedHover],e),null===(r=this._itemsContainer)||void 0===r||r.getChildren().forEach((t=>{a!==t&&(this._removeLegendItemState(t,[eY.selected,eY.selectedHover],e),this._setLegendItemState(t,eY.unSelected,e))}))}this._dispatchLegendEvent(tY.legendItemClick,a,e)}}}setSelected(e){var t;(null===(t=this._itemsContainer)||void 0===t?void 0:t.getChildren()).forEach((t=>{const i=t.data;e.includes(i.label)?(this._setLegendItemState(t,eY.selected),this._removeLegendItemState(t,[eY.unSelected,eY.unSelectedHover])):(this._removeLegendItemState(t,[eY.selected,eY.selectedHover]),this._setLegendItemState(t,eY.unSelected))}))}_renderContent(){const{item:e={},items:t,reversed:i,maxCol:n=1,maxRow:r=2}=this.attribute;if(!1===e.visible||ay(t))return;let s=t;i&&(s=null==t?void 0:t.reverse());const a=bp.group({x:0,y:0});this._itemsContainer=a;const{layout:o,maxWidth:l,maxHeight:c,defaultSelected:h=[],autoPage:d}=this.attribute,u="horizontal"===o,{spaceCol:p=QK,spaceRow:g=$K,maxWidth:f,width:m,height:v}=e;x(f)?x(m)?this._itemWidthByUser=Math.min(f,m):this._itemWidthByUser=f:x(m)&&(this._itemWidthByUser=m),x(v)&&(this._itemHeightByUser=v);let y=!1,b=0,_=0,S=0,w=1,C=1;s.forEach(((e,t)=>{e.id||(e.id=e.label),e.index=t;const i=this._renderEachItem(e,!!ay(h)||(null==h?void 0:h.includes(e.label)),t,s),o=i.attribute.width,d=i.attribute.height;this._itemHeight=Math.max(this._itemHeight,d),b=Math.max(o,b),this._itemMaxWidth=Math.max(o,this._itemMaxWidth),u?(w=r,x(l)&&(o>=l?(y=!0,t>0&&(_=0,S+=d+g,C+=1)):l<_+o&&(y=!0,_=0,S+=d+g,C+=1)),t>0&&i.setAttributes({x:_,y:S}),_+=p+o):(w=n,x(c)&&c<S+d&&(y=!0,S=0,_+=b+p,b=0,C+=1),t>0&&i.setAttributes({x:_,y:S}),S+=g+d),a.add(i)}));let k=!1;y&&d&&C>w&&(k=this._renderPager(u)),k||(a.setAttribute("y",this._title?this._title.AABBBounds.height()+Br(this.attribute,"title.space",8):0),this._innerView.add(a))}_bindEvents(){if(this.attribute.disableTriggerEvent)return;if(!this._itemsContainer)return;const{hover:e=!0,select:t=!0}=this.attribute;e&&(this._itemsContainer.addEventListener("pointermove",this._onHover),this._itemsContainer.addEventListener("pointerleave",this._onUnHover)),t&&this._itemsContainer.addEventListener("pointerdown",this._onClick)}_renderEachItem(e,t,i,n){var r,s;const{id:a,label:o,value:l,shape:c}=e,{padding:h=0,focus:d,focusIconStyle:u}=this.attribute.item,{shape:p,label:g,value:f,background:m}=this.attribute.item,y=this._handleStyle(p,e,t,i,n),b=this._handleStyle(g,e,t,i,n),_=this._handleStyle(f,e,t,i,n),S=this._handleStyle(m,e,t,i,n),w=nW(h);let C;!1===m.visible?(C=bp.group({x:0,y:0,cursor:null===(r=S.style)||void 0===r?void 0:r.cursor}),this._appendDataToShape(C,iY.item,e,C)):(C=bp.group(Object.assign({x:0,y:0},S.style)),this._appendDataToShape(C,iY.item,e,C,S.state)),C.id="".concat(null!=a?a:o,"-").concat(i),C.addState(t?eY.selected:eY.unSelected);const k=bp.group({x:0,y:0,pickable:!1});C.add(k);let A,E=0,T=0,O=0;if(p&&!1!==p.visible){const i=Br(y,"style.size",10);T=v(i)?i[0]||0:i,O=Br(p,"space",8);const n=bp.symbol(Object.assign(Object.assign({x:0,y:0,symbolType:"circle",strokeBoundsBuffer:0},c),y.style));Object.keys(y.state||{}).forEach((e=>{const t=y.state[e].fill||y.state[e].stroke;c.fill&&P(y.state[e].fill)&&t&&(y.state[e].fill=t),c.stroke&&P(y.state[e].stroke)&&t&&(y.state[e].stroke=t)})),this._appendDataToShape(n,iY.itemShape,e,C,y.state),n.addState(t?eY.selected:eY.unSelected),k.add(n)}let M=0;if(d){const t=Br(u,"size",10);A=bp.symbol(Object.assign(Object.assign({x:0,y:-t/2-1,strokeBoundsBuffer:0},u),{visible:!0,pickMode:"imprecise",boundsPadding:w})),this._appendDataToShape(A,iY.focus,e,C),M=t}const I=bp.text(Object.assign(Object.assign({x:T/2+O,y:0,textAlign:"start",textBaseline:"middle",lineHeight:null===(s=b.style)||void 0===s?void 0:s.fontSize},b.style),{text:g.formatMethod?g.formatMethod(o,e,i):o}));this._appendDataToShape(I,iY.itemLabel,e,C,b.state),I.addState(t?eY.selected:eY.unSelected),k.add(I);const R=Br(g,"space",8);if(x(l)){const n=Br(f,"space",d?8:0),r=bp.text(Object.assign(Object.assign({x:0,y:0,textAlign:"start",textBaseline:"middle",lineHeight:_.style.fontSize},_.style),{text:f.formatMethod?f.formatMethod(l,e,i):l}));if(this._appendDataToShape(r,iY.itemValue,e,C,_.state),r.addState(t?eY.selected:eY.unSelected),this._itemWidthByUser){const e=this._itemWidthByUser-w[1]-w[3]-T-O-R-M-n,t=r.AABBBounds,i=I.AABBBounds,s=t.width(),a=i.width();a>e?(e-s)/a>.4?I.setAttribute("maxLineWidth",e-s):(r.setAttribute("maxLineWidth",.5*e),I.setAttribute("maxLineWidth",.5*e)):r.setAttribute("maxLineWidth",e-a),f.alignRight?r.setAttributes({textAlign:"right",x:this._itemWidthByUser-T/2-w[1]-w[3]-M-n}):r.setAttribute("x",I.AABBBounds.x2+n)}else r.setAttribute("x",I.AABBBounds.x2+n);E=r.AABBBounds.x2+n,k.add(r)}else this._itemWidthByUser?(I.setAttribute("maxLineWidth",this._itemWidthByUser-w[1]-w[3]-T-O-M),E=I.AABBBounds.x2+R):E=I.AABBBounds.x2+R;A&&(A.setAttribute("x",E),k.add(A));const D=k.AABBBounds,L=D.width(),j=D.height(),F=x(this.attribute.item.width)?this.attribute.item.width:L+w[1]+w[3],B=this._itemHeightByUser||j+w[0]+w[2];return C.attribute.width=F,C.attribute.height=B,A&&A.setAttribute("visible",!1),k.translateTo(-D.x1+w[3],-D.y1+w[0]),C}_renderPager(e){const t=this._title?this._title.AABBBounds.height()+Br(this.attribute,"title.space",8):0,{maxWidth:i,maxHeight:n,maxCol:r=1,maxRow:s=2,item:a={},pager:o={},disableTriggerEvent:l}=this.attribute,{spaceCol:c=QK,spaceRow:h=$K}=a,d=this._itemsContainer,{animation:u=!0,animationDuration:p=450,animationEasing:g="quadIn",space:f=JK,position:m="middle"}=o,v=cY(o,["animation","animationDuration","animationEasing","space","position"]);let y,b=0,_=0,x=0,S=0,w=1;if(e){if(y=new aY(Object.assign(Object.assign({layout:1===s?"horizontal":"vertical",total:99},O({handler:{preShape:"triangleUp",nextShape:"triangleDown"}},v)),{disableTriggerEvent:l})),this._pager=y,this._innerView.add(y),b=(s-1)*h+this._itemHeight*s,_=i-y.AABBBounds.width()-f,_<=0)return this._innerView.removeChild(y),!1;let e;d.getChildren().forEach(((e,t)=>{const{width:i,height:n}=e.attribute;_<x+i&&(x=0,S+=n+h,w+=1),t>0&&e.setAttributes({x:x,y:S}),x+=c+i})),y.setAttribute("total",Math.ceil(w/s)),e="start"===m?t:"end"===m?t+b-y.AABBBounds.height()/2:t+b/2-y.AABBBounds.height()/2,y.setAttributes({x:_,y:e})}else{if(y=new aY(Object.assign({layout:"horizontal",total:99,disableTriggerEvent:l},v)),this._pager=y,this._innerView.add(y),_=this._itemMaxWidth*r+(r-1)*c,b=n-y.AABBBounds.height()-f-t,b<=0)return this._innerView.removeChild(y),!1;let e;d.getChildren().forEach(((e,t)=>{const{height:i}=e.attribute;b<S+i&&(S=0,x+=this._itemMaxWidth+c,w+=1),t>0&&e.setAttributes({x:x,y:S}),S+=h+i})),y.setAttribute("total",Math.ceil(w/r)),e="start"===m?0:"end"===m?_-y.AABBBounds.width():(_-y.AABBBounds.width())/2,y.setAttributes({x:e,y:n-y.AABBBounds.height()})}o.defaultCurrent>1&&(e?d.setAttribute("y",-(o.defaultCurrent-1)*(b+h)):d.setAttribute("x",-(o.defaultCurrent-1)*(_+c)));const C=bp.group({x:0,y:t,width:_,height:b,clip:!0,pickable:!1});C.add(d),this._innerView.add(C);const k=t=>{const{current:i}=t.detail;u?d.animate().to(e?{y:-(i-1)*(b+h)}:{x:-(i-1)*(_+c)},p,g):e?d.setAttribute("y",-(i-1)*(b+h)):d.setAttribute("x",-(i-1)*(_+c))};return this._pager.addEventListener("toPrev",k),this._pager.addEventListener("toNext",k),!0}_hover(e,t){this._lastActiveItem=e,e.hasState(eY.selected)?this._setLegendItemState(e,eY.selectedHover,t):this._setLegendItemState(e,eY.unSelectedHover,t);const i=e.getChildren()[0].find((e=>e.name===iY.focus),!1);i&&i.setAttribute("visible",!0),this._dispatchLegendEvent(tY.legendItemHover,e,t)}_unHover(e,t){let i=!1;(e.hasState(eY.unSelectedHover)||e.hasState(eY.selectedHover))&&(i=!0),e.removeState(eY.unSelectedHover),e.removeState(eY.selectedHover),e.getChildren()[0].getChildren().forEach((e=>{i||!e.hasState(eY.unSelectedHover)&&!e.hasState(eY.selectedHover)||(i=!0),e.removeState(eY.unSelectedHover),e.removeState(eY.selectedHover)}));const n=e.getChildren()[0].find((e=>e.name===iY.focus),!1);n&&n.setAttribute("visible",!1),i&&this._dispatchLegendEvent(tY.legendItemAttributeUpdate,e,t),this._dispatchLegendEvent(tY.legendItemUnHover,e,t)}_setLegendItemState(e,t,i){let n=!1;e.hasState(t)||(n=!0),e.addState(t,!0),e.getChildren()[0].getChildren().forEach((e=>{e.name!==iY.focus&&(n||e.hasState(t)||(n=!0),e.addState(t,!0))})),n&&this._dispatchLegendEvent(tY.legendItemAttributeUpdate,e,i)}_removeLegendItemState(e,t,i){let n=!1;t.forEach((t=>{!n&&e.hasState(t)&&(n=!0),e.removeState(t)})),e.getChildren()[0].getChildren().forEach((e=>{e.name!==iY.focus&&t.forEach((t=>{!n&&e.hasState(t)&&(n=!0),e.removeState(t)}))})),n&&this._dispatchLegendEvent(tY.legendItemAttributeUpdate,e,i)}_getSelectedLegends(){var e;const t=[];return null===(e=this._itemsContainer)||void 0===e||e.getChildren().forEach((e=>{e.hasState(eY.selected)&&t.push(e.data)})),t}_appendDataToShape(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.name=t,e.data=i,e.delegate=n,e.states=O({},hY,r)}_dispatchLegendEvent(e,t,i){const n=this._getSelectedLegends();n.sort(((e,t)=>e.index-t.index));const r=n.map((e=>e.label));this._dispatchEvent(e,{item:t,data:t.data,selected:t.hasState(eY.selected),currentSelectedItems:n,currentSelected:r,event:i})}_handleStyle(e,t,i,n,r){const s={};return e.style&&(Q(e.style)?s.style=e.style(t,i,n,r):s.style=e.style),e.state&&(s.state={},Object.keys(e.state).forEach((a=>{e.state[a]&&(Q(e.state[a])?s.state[a]=e.state[a](t,i,n,r):s.state[a]=e.state[a])}))),s}}dY.defaultAttributes={layout:"horizontal",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:QK,spaceRow:$K,shape:{space:8,style:{size:10,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{opacity:.5}}},label:{space:8,style:{fontSize:12,fill:"#2C3542",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"}},focus:!1,focusIconStyle:{size:10,symbolType:"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"#333",cursor:"pointer"}},autoPage:!0,pager:{space:JK,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!0};const uY=(e,t)=>{const i=[],n={},{series:r,seriesField:s}=t;return r().forEach((e=>{const t=s(e);let r;r=t===e.getSeriesField()?e.getSeriesInfoList():e.getSeriesInfoInField(t),r.forEach((e=>{n[e.key]||(n[e.key]=!0,i.push(e))}))})),i},pY=(e,t)=>{var i,n,r;const{selected:s,field:a,data:o}=t,l=s(),c=o();if(0===l.length&&c.length)return[];if(l.length===c.length)return e;const h={};l.forEach((e=>{h[e]=!0}));const d=null!==(i=a())&&void 0!==i?i:Aw;return v(e)&&(null===(n=e[0])||void 0===n?void 0:n.nodes)?(e[0].nodes=e[0].nodes.filter((e=>!0===h[e.key])),(null===(r=e[0])||void 0===r?void 0:r.links)&&(e[0].links=e[0].links.filter((e=>!0===h[e.source]&&!0===h[e.target])))):x(d)&&(e=e.filter((e=>!0===h[e[d]]))),e};class gY extends dF{constructor(){super(...arguments),this.layoutType="normal",this.layoutZIndex=zw.Legend,this.layoutLevel=Hw.Legend,this.specKey="legends",this._orient="left",this._visible=!0,this._position="middle",this._preSelectedData=[],this._selectedData=[],this.effect={onSelectedDataChange:()=>{gr(this._regions,(e=>{var t;null===(t=e.getViewData())||void 0===t||t.markRunning()}),{userId:this._seriesUserId,specIndex:this._seriesIndex}),gr(this._regions,(e=>{e.reFilterViewData()}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}get orient(){return this._orient}get visible(){return this._visible}get position(){return this._position}getLegendData(){return this._legendData.getLatestData()}getSelectedData(){return this._selectedData}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._orient=$(this._spec.orient)?this._spec.orient:"left",this._position=null!==(e=this._spec.position)&&void 0!==e?e:"middle",this._visible=!1!==this._spec.visible;const{regionId:t,regionIndex:i,seriesId:n,seriesIndex:r}=this._spec;x(n)&&(this._seriesUserId=z(n)),x(t)&&(this._regionUserId=z(t)),x(r)&&(this._seriesIndex=z(r)),x(i)&&(this._regionUserIndex=z(i)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionUserIndex)}created(){super.created(),this.initData()}onRender(e){}_compareSpec(e,t){const i=super._compareSpec(e,t);return i.reRender=!0,(null==e?void 0:e.orient)!==(null==t?void 0:t.orient)?(i.reMake=!0,i):(ty(t,e)||(i.reCompile=!0),i)}changeRegions(e){}_bindLegendDataChange(){this._preSelectedData=this._selectedData.slice(),this._initSelectedData()}initData(){const e=this._initLegendData();e.target.addListener("change",this._bindLegendDataChange.bind(this)),this._legendData=new _k(this._option,e),this._initSelectedData(),gr(this._regions,(e=>{e.event.on(Ir.rawDataUpdate,{filter:t=>{let{model:i}=t;return(null==i?void 0:i.id)===e.id}},(()=>{this._legendData.getDataView().reRunAllTransform()}))}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}setSelectedData(e){var t,i,n;const r=this._selectedData;P(e)||JSON.stringify(r)===JSON.stringify(e)||(this._selectedData=[...e],null===(i=(t=this.effect).onSelectedDataChange)||void 0===i||i.call(t),this.event.emit(Ir.legendSelectedDataChange,{model:this}),null===(n=this._legendComponent)||void 0===n||n.setSelected(this._selectedData))}afterSetLayoutStartPoint(e){if(super.afterSetLayoutStartPoint(e),this._legendComponent){const{x:t,y:i}=e;L(t*i)&&this._legendComponent.setAttributes({x:t,y:i})}}getBoundsInRect(e,t){if(!this._visible)return{x1:0,y1:0,x2:0,y2:0};const i={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0},n=this._getLegendAttributes(e);if(n.disableTriggerEvent=this._option.disableTriggerEvent,this._legendComponent)ty(n,this._cacheAttrs)||this._legendComponent.setAttributes(_e({},n,{defaultSelected:this._selectedData}));else{const e=new(this._getLegendConstructor())(_e({},n,{defaultSelected:this._selectedData}));e.name="legend",this._legendComponent=e,this.getContainer().add(e),this._option.disableTriggerEvent||this._initEvent(),e.on("*",((e,t)=>this._delegateEvent(this._legendComponent,e,t)))}this._cacheAttrs=n;const r=isFinite(this._legendComponent.AABBBounds.width())?this._legendComponent.AABBBounds.width():0,s=isFinite(this._legendComponent.AABBBounds.height())?this._legendComponent.AABBBounds.height():0;if("normal-inline"!==this.layoutType){const e="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",i=this._position,{width:n,height:a}=t;let o=0,l=0;"horizontal"===e?"middle"===i?o=(n-r)/2:"end"===i&&(o=n-r):"middle"===i?l=(a-s)/2:"end"===i&&(l=a-s),this._legendComponent.setAttributes({dx:o,dy:l})}return i.x2=i.x1+r,i.y2=i.y1+s,i}onDataUpdate(){var e,t;if(JSON.stringify(this._preSelectedData)!==JSON.stringify(this._selectedData)){if(this._legendComponent){const e=this._getLegendAttributes(this.getLayoutRect());ty(e,this._cacheAttrs)||this._legendComponent.setAttributes(_e({},e,{defaultSelected:this._selectedData}))}null===(t=(e=this.effect).onSelectedDataChange)||void 0===t||t.call(e),this.event.emit(Ir.legendSelectedDataChange,{model:this})}}_getNeedClearVRenderComponents(){return[this._legendComponent]}clear(){super.clear(),this._cacheAttrs=null,this._preSelectedData=null}}gY.specKey="legends";class fY extends gY{constructor(){super(...arguments),this.type=r.discreteLegend,this.name=r.discreteLegend}static getSpecInfo(e){const t=e[this.specKey];if(!t)return;if(!v(t))return t.type&&"discrete"!==t.type?void 0:[{spec:t,specIndex:0,specPath:[this.specKey],type:r.discreteLegend}];const i=[];return t.forEach(((e,t)=>{e.type&&"discrete"!==e.type||i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.discreteLegend})})),i}init(e){super.init(e),gr(this._regions,(e=>{e.addViewDataFilter({type:"discreteLegendFilter",options:{selected:()=>this._selectedData,field:()=>this._getSeriesLegendField(e),data:()=>this._getLegendDefaultData()},level:wo.legendFilter})}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}_initLegendData(){uo(this._option.dataSet,"discreteLegendFilter",pY),uo(this._option.dataSet,"discreteLegendDataMake",uY);const e=new R(this._option.dataSet,{name:"".concat(this.type,"_").concat(this.id,"_data")});return e.transform({type:"discreteLegendDataMake",options:{series:()=>{const e=[];return gr(this._regions,(t=>{e.push(t)}),{specIndex:this._spec.seriesIndex,userId:this._spec.seriesId}),e},seriesField:e=>this._getSeriesLegendField(e)}}),e}_getSeriesLegendField(e){var t,i;const n=e.getSeriesField();if(!this._spec.scaleName)return n;if(!e.getRawData())return n;const r=this._option.globalScale.getScaleSpec(this._spec.scaleName);if(!r)return n;if(this._spec.field)return this._spec.field;if(!Z(r.domain))return n;const s=r.domain.find((t=>t.dataId===e.getRawData().name));return s&&null!==(i=null===(t=s.fields)||void 0===t?void 0:t[0])&&void 0!==i?i:n}_initSelectedData(){this._spec.defaultSelected?this._selectedData=[...this._spec.defaultSelected]:this._selectedData=this._getLegendDefaultData()}_getLegendDefaultData(){return Q(this._spec.data)?this._getLegendItems().map((e=>e.label)):this._legendData.getLatestData().map((e=>e.key))}_addDefaultTitleText(e){var t,i,n,r;if((null===(t=e.title)||void 0===t?void 0:t.visible)&&P(e.title.text)&&P(null===(i=e.title.style)||void 0===i?void 0:i.text)){const t=null===(r=null===(n=this._regions)||void 0===n?void 0:n[0])||void 0===r?void 0:r.getSeries()[0];if(!t)return;e.title.text=uR(t.getRawData(),t.getSeriesField())}}_getLegendAttributes(e){const t="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",i=Object.assign(Object.assign({layout:t,items:this._getLegendItems(),zIndex:this.layoutZIndex},function(e,t){const{title:i={},item:n={},pager:r={},background:s={},type:a,id:o,visible:l,orient:c,position:h,data:d,filter:u,regionId:p,regionIndex:g,seriesIndex:f,seriesId:m,padding:v}=e,y=ZK(e,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible&&(y.title=oF(i)),ay(n.focusIconStyle)||Yj(n.focusIconStyle),n.shape=Wj(n.shape),n.label=Wj(n.label),n.value=Wj(n.value),n.background=Wj(n.background),J(n.maxWidth)&&(n.maxWidth=Number(n.maxWidth.substring(0,n.maxWidth.length-1))*t.width/100),J(n.width)&&(n.width=Number(n.width.substring(0,n.width.length-1))*t.width/100),J(n.height)&&(n.height=Number(n.height.substring(0,n.height.length-1))*t.width/100),y.item=n,ay(r.textStyle)||Yj(r.textStyle),Wj(r.handler),y.pager=r,s.visible&&!ay(s.style)&&(_e(y,s.style),x(s.padding)&&(y.padding=s.padding)),y}(this._spec,e)),{maxWidth:e.width,maxHeight:e.height});return this._addDefaultTitleText(i),i}_getLegendConstructor(){return dY}_initEvent(){if(this._legendComponent){const e=!1!==this._spec.filter;this._legendComponent.addEventListener(tY.legendItemClick,(t=>{const i=Br(t,"detail.currentSelected");e&&this.setSelectedData(i),this.event.emit(Ir.legendItemClick,{model:this,value:i,event:t})})),this._legendComponent.addEventListener(tY.legendItemHover,(e=>{const t=Br(e,"detail");this.event.emit(Ir.legendItemHover,{model:this,value:t,event:e})})),this._legendComponent.addEventListener(tY.legendItemUnHover,(e=>{const t=Br(e,"detail");this.event.emit(Ir.legendItemUnHover,{model:this,value:t,event:e})}))}}_getLegendItems(){const e=(this._legendData.getLatestData()||[]).map((e=>{var t,i;const n=e.style("fillOpacity"),r=e.style("strokeOpacity"),s=e.style("opacity"),a=e.style("texture");return{label:e.key,shape:{symbolType:null!==(i=null!==(t=e.style("symbolType"))&&void 0!==t?t:e.shapeType)&&void 0!==i?i:"circle",fillOpacity:L(n)?n:1,strokeOpacity:L(r)?r:1,opacity:L(s)?s:1,texturePadding:a?1:null,textureSize:a?4:null,texture:a,fill:e.style("fill"),stroke:e.style("stroke"),textureColor:e.style("textureColor"),innerBorder:e.style("innerBorder"),outerBorder:e.style("outerBorder"),lineDash:e.style("lineDash"),lineDashOffset:e.style("lineDashOffset"),lineWidth:e.style("lineWidth")}}}));return Q(this._spec.data)?this._spec.data(e,this._option.globalScale.getScale("color"),this._option.globalScale):e}}fY.specKey="legends",fY.type=r.discreteLegend;const mY=(e,t)=>{const{series:i,field:n,scale:r}=t,s=n();if(n&&s){let e=Number.MAX_VALUE,t=Number.MIN_VALUE;return i().forEach((i=>{const n=i.getRawDataStatisticsByField(s,!0),r=null==n?void 0:n.min,a=null==n?void 0:n.max;L(r)&&(e=r),L(a)&&(t=a)})),[e,t]}if(r){const e=r();return e?e.domain():[]}return[]},vY=(e,t)=>{const{selected:i,field:n,data:r}=t,s=i(),a=n();if(s===r())return e;if(a&&!ay(s)){const[t,i]=s;return e.filter((e=>e[a]>=t&&e[a]<=i))}return e},yY=(e,t,i)=>{let[n,r]=e;r<n&&(n=e[1],r=e[0]);const s=r-n;return s>=i-t?[t,i]:(n=Math.min(Math.max(n,t),i-s),[n,n+s])};var bY;function _Y(e){return v(e)?e:[e,e]}function xY(e){return e?"ew-resize":"ns-resize"}!function(e){e.innerView="innerView",e.railContainer="sliderRailContainer",e.rail="sliderRail",e.startText="sliderStartText",e.endText="sliderEndText",e.startHandler="sliderStartHandler",e.startHandlerText="startHandlerText",e.endHandler="sliderEndHandler",e.endHandlerText="sliderEndHandlerText",e.track="sliderTrack",e.trackContainer="sliderTrackContainer"}(bY||(bY={})),oY();class SY extends qW{get track(){return this._track}get currentValue(){return this._currentValue}get startHandler(){return this._startHandler}get endHandler(){return this._endHandler}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},SY.defaultAttributes,e)),this.name="slider",this._isHorizontal=!0,this._startHandler=null,this._endHandler=null,this._startHandlerText=null,this._endHandlerText=null,this._currentHandler=null,this._currentValue={},this._onHandlerPointerdown=e=>{e.stopPropagation(),this._currentHandler=e.target,this._prePos=this._isHorizontal?e.clientX:e.clientY,"browser"===Bf.env?(Bf.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),Bf.addEventListener("pointerup",this._onHandlerPointerUp)):(this.stage.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onHandlerPointerUp),this.stage.addEventListener("pointerupoutside",this._onHandlerPointerUp))},this._onHandlerPointerMove=e=>{var t,i;e.stopPropagation();const{railWidth:n,railHeight:r,min:s,max:a}=this.attribute;if(a===s)return;let o,l,c,h=0;this._isHorizontal?(o=e.clientX,h=o-this._prePos,l=null===(i=this._currentHandler)||void 0===i?void 0:i.attribute.x,c=n):(o=e.clientY,h=o-this._prePos,l=null===(t=this._currentHandler)||void 0===t?void 0:t.attribute.y,c=r);const d=At(l+h,0,c),u=d/c*(a-s)+s;"text"===this._currentHandler.type?this._updateHandlerText(this._currentHandler,d,u):this._updateHandler(this._currentHandler,d,u),this._updateTrack(),this._prePos=o,this._dispatchChangeEvent()},this._onHandlerPointerUp=e=>{e.preventDefault(),this._currentHandler=null,"browser"===Bf.env?(Bf.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),Bf.removeEventListener("pointerup",this._onHandlerPointerUp)):(this.stage.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onHandlerPointerUp),this.stage.removeEventListener("pointerupoutside",this._onHandlerPointerUp))},this._onTrackPointerdown=e=>{e.stopPropagation(),this._prePos=this._isHorizontal?e.clientX:e.clientY,"browser"===Bf.env?(Bf.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),Bf.addEventListener("pointerup",this._onTrackPointerUp)):(this.stage.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onTrackPointerUp),this.stage.addEventListener("pointerupoutside",this._onTrackPointerUp))},this._onTrackPointerMove=e=>{e.stopPropagation();const{railWidth:t,railHeight:i,min:n,max:r}=this.attribute;if(r===n)return;const{startHandler:s,endHandler:a}=this._getHandlers();let o,l,c;this._isHorizontal?(o=e.clientX,l=this._track.attribute.width,c=t):(o=e.clientY,l=this._track.attribute.height,c=i);const h=o-this._prePos;if(s){const e=this._isHorizontal?s.attribute.x:s.attribute.y,t=At(e+h,0,c-l),i=t/c*(r-n)+n;this._updateHandler(s,t,i)}if(a){const e=this._isHorizontal?a.attribute.x:a.attribute.y,t=At(e+h,l,c),i=t/c*(r-n)+n,o=null==s?void 0:s.attribute;this._updateHandler(a,t,i),this._track.setAttributes(this._isHorizontal?{x:Math.min(o.x,a.attribute.x),width:Math.abs(o.x-a.attribute.x)}:{y:Math.min(o.y,a.attribute.y),height:Math.abs(o.y-a.attribute.y)})}this._prePos=o,this._dispatchChangeEvent()},this._onTrackPointerUp=e=>{e.preventDefault(),"browser"===Bf.env?(Bf.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),Bf.removeEventListener("pointerup",this._onTrackPointerUp)):(this.stage.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onTrackPointerUp),this.stage.removeEventListener("pointerupoutside",this._onTrackPointerUp))},this._onRailPointerDown=e=>{e.stopPropagation();const{railWidth:t,railHeight:i,min:n,max:r}=this.attribute;if(r===n)return;const s=this._startHandler,a=this._endHandler;let o,l,c,h;this._isHorizontal?(o=e.viewX-this._rail.globalAABBBounds.x1,l=null==s?void 0:s.attribute.x,c=null==a?void 0:a.attribute.x,h=t):(o=e.viewY-this._rail.globalAABBBounds.y1,l=null==s?void 0:s.attribute.y,c=null==a?void 0:a.attribute.y,h=i);const d=o/h*(r-n)+n;if(x(c)){const e=Math.abs(o-l)>Math.abs(o-c)?a:s;this._updateHandler(e,o,d)}else this._updateHandler(s,o,d);this._updateTrack(),this._dispatchChangeEvent()}}setValue(e){const{layout:t,railWidth:i,railHeight:n,min:r,max:s}=this.attribute;if(s===r)return;const[a,o]=z(e),{startHandler:l,endHandler:c}=this._getHandlers(),h="vertical"===t?n:i,d=(a-r)/(s-r)*h;if(l&&this._updateHandler(l,d,a),c){const e=(o-r)/(s-r)*h;this._updateHandler(c,e,o)}this._updateTrack()}render(){var e,t;this.removeAllChild();const{layout:i="horizontal",railWidth:n,railHeight:r,startText:s,endText:a,min:o,max:l,showHandler:c=!0}=this.attribute;let{value:h}=this.attribute;P(h)&&(h=[o,l]),this._currentValue={startValue:_Y(h)[0],endValue:_Y(h)[1]};const d="horizontal"===i;this._isHorizontal=d;const u=bp.group({x:0,y:0});u.name=bY.innerView,this.add(u),this._innerView=u;let p,g=0;if(s&&s.visible){p=bp.text(Object.assign({x:d?0:n/2,y:d?r/2:0,textAlign:d?"start":"center",textBaseline:d?"middle":"top",text:s.text,lineHeight:null===(e=s.style)||void 0===e?void 0:e.fontSize},s.style)),p.name=bY.startText,u.add(p);const t=x(s.space)?s.space:0;g+=(d?p.AABBBounds.width():p.AABBBounds.height())+t}const f=bp.group({x:d?g:0,y:d?0:g});u.add(f);const m=bp.group({x:0,y:0});let v;if(m.name=bY.railContainer,this._railContainer=m,f.add(m),this._renderRail(m),g+=d?n:r,a&&a.visible){const e=x(a.space)?a.space:0;v=bp.text(Object.assign({x:d?g+e:n/2,y:d?r/2:g+e,textAlign:d?"start":"center",textBaseline:d?"middle":"top",text:a.text,lineHeight:null===(t=a.style)||void 0===t?void 0:t.fontSize},a.style)),v.name=bY.endText,u.add(v)}this._renderTrack(m),c&&(this._renderHandlers(f),this._bindEvents())}_renderRail(e){const{railWidth:t,railHeight:i,railStyle:n,slidable:r}=this.attribute;let s="default";!1!==r&&(s="pointer");const a=bp.rect(Object.assign({x:0,y:0,width:t,height:i,cursor:s},n));return a.name=bY.rail,e.add(a),this._rail=a,a}_renderHandlers(e){const{range:t,min:i,max:n,handlerSize:r=14,handlerStyle:s,handlerText:a,railHeight:o,railWidth:l,slidable:c}=this.attribute;let{value:h}=this.attribute;P(h)&&(h=[i,n]);const d=a&&a.visible,u=this._isHorizontal,p=u?l:o,[g,f]=_Y(h),m=n===i?t?0:p:(g-i)/(n-i)*p,v=this._renderHandler(Object.assign({x:u?m:l/2,y:u?o/2:m,size:r,strokeBoundsBuffer:0,cursor:!1===c?"default":xY(u)},s));if(v.name=bY.startHandler,this._startHandler=v,e.add(v),this._currentValue.startPos=m,d){const i=this._renderHandlerText(g,t?"start":"end");i.name=bY.startHandlerText,e.add(i),this._startHandlerText=i}if(t){const t=n===i?p:(f-i)/(n-i)*p,a=this._renderHandler(Object.assign({x:u?t:l/2,y:u?o/2:t,size:r,strokeBoundsBuffer:0,cursor:!1===c?"default":xY(u)},s));if(a.name=bY.endHandler,this._endHandler=a,e.add(a),this._currentValue.endPos=t,d){const t=this._renderHandlerText(f,"end");t.name=bY.endHandlerText,e.add(t),this._endHandlerText=t}}}_renderTrack(e){const{range:t,min:i,max:n,railHeight:r,railWidth:s,trackStyle:a,railStyle:o,slidable:l,value:c}=this.attribute;let h,d;if(P(c))t?(h=i,d=n):h=d=i;else if(t){const e=yY(c,i,n);h=e[0],d=e[1]}else h=i,d=At(c,i,n);const u=this._isHorizontal,p=u?s:r;t||(h=i);const g=bp.group({x:0,y:0,width:s,height:r,cornerRadius:null==o?void 0:o.cornerRadius,clip:!0,pickable:!1});g.name=bY.trackContainer;const f=D(t)&&!0===t.draggableTrack;let m;m=!1===l?"default":!1===t||!1===f?"pointer":xY(u);const v=n===i?p:(d-h)/(n-i)*p,y=n===i?0:(h-i)/(n-i)*p,b=bp.rect(Object.assign({x:u?y:0,y:u?0:y,width:u?v:s,height:u?r:v,cursor:m},a));b.name=bY.track,this._track=b,g.add(b),e.add(g)}_renderHandler(e){return bp.symbol(e)}_renderHandlerText(e,t){var i,n,r;const{align:s,min:a,max:o,handlerSize:l=14,handlerText:c={},railHeight:h,railWidth:d,slidable:u}=this.attribute,p=this._isHorizontal,g=p?d:h,f=o===a?"start"===t?0:g:(e-a)/(o-a)*g,m=null!==(i=c.space)&&void 0!==i?i:4,v={text:c.formatter?c.formatter(e):e.toFixed(null!==(n=c.precision)&&void 0!==n?n:0),lineHeight:null===(r=c.style)||void 0===r?void 0:r.lineHeight,cursor:!1===u?"default":xY(p)};return p?"top"===s?(v.textBaseline="bottom",v.textAlign="center",v.x=f,v.y=(h-l)/2-m):(v.textBaseline="top",v.textAlign="center",v.x=f,v.y=(h+l)/2+m):"left"===s?(v.textBaseline="middle",v.textAlign="end",v.x=(d-l)/2-m,v.y=f):(v.textBaseline="middle",v.textAlign="start",v.x=(d+l)/2+m,v.y=f),bp.text(Object.assign(Object.assign({},v),c.style))}_bindEvents(){if(this.attribute.disableTriggerEvent)return;const{slidable:e,range:t}=this.attribute;e&&(this._startHandler&&this._startHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),D(t)&&t.draggableTrack&&this._track.addEventListener("pointerdown",this._onTrackPointerdown),this._railContainer.addEventListener("pointerdown",this._onRailPointerDown))}_updateTrack(){const e=this._startHandler,t=this._endHandler;if(this._isHorizontal){const i=null==e?void 0:e.attribute.x;if(t){const e=null==t?void 0:t.attribute.x;this._track.setAttributes({x:Math.min(i,e),width:Math.abs(i-e)})}else this._track.setAttributes({width:i})}else{const i=null==e?void 0:e.attribute.y;if(t){const e=null==t?void 0:t.attribute.y;this._track.setAttributes({y:Math.min(i,e),height:Math.abs(i-e)})}else this._track.setAttributes({height:i})}}_updateHandler(e,t,i){var n;const r=this._isHorizontal;e.setAttribute(r?"x":"y",t);const s=e.name===bY.startHandler?this._startHandlerText:this._endHandlerText;if(s){const{handlerText:e={}}=this.attribute;s.setAttributes({text:e.formatter?e.formatter(i):i.toFixed(null!==(n=e.precision)&&void 0!==n?n:0),[r?"x":"y"]:t})}e.name===bY.startHandler?(this._currentValue.startValue=i,this._currentValue.startPos=t):(this._currentValue.endValue=i,this._currentValue.endPos=t)}_updateHandlerText(e,t,i){var n;const r=this._isHorizontal,{handlerText:s={}}=this.attribute;e.setAttributes({[r?"x":"y"]:t,text:s.formatter?s.formatter(i):i.toFixed(null!==(n=s.precision)&&void 0!==n?n:0)});const a=e.name===bY.startHandlerText?this._startHandler:this._endHandler;a&&a.setAttributes({[r?"x":"y"]:t}),e.name===bY.startHandlerText?(this._currentValue.startValue=i,this._currentValue.startPos=t):(this._currentValue.endValue=i,this._currentValue.endPos=t)}_dispatchChangeEvent(){const e=!!this.attribute.range,t=this._currentValue;this._dispatchEvent("change",{value:e?[Math.min(t.endValue,t.startValue),Math.max(t.endValue,t.startValue)]:t.startValue,position:e?[Math.min(t.endPos,t.startPos),Math.max(t.endPos,t.startPos)]:t.startPos})}_getHandlers(){let e,t=this._startHandler,i=this._endHandler;return this._isHorizontal?i&&i.attribute.x<(null==t?void 0:t.attribute.x)&&(e=t,t=i,i=e):i&&i.attribute.y<(null==t?void 0:t.attribute.y)&&(e=t,t=i,i=e),{startHandler:t,endHandler:i}}}SY.defaultAttributes={slidable:!0,layout:"horizontal",align:"bottom",height:8,showHandler:!0,handlerSize:14,handlerStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},railStyle:{fill:"rgba(0,0,0,.04)"},trackStyle:{fill:"#91caff"},showValue:!0,valueStyle:{fill:"#2C3542",fontSize:12},startText:{style:{fill:"#2C3542",fontSize:12}},endText:{style:{fill:"#2C3542",fontSize:12}},handlerText:{visible:!0,space:4,precision:0,style:{fill:"#2C3542",fontSize:12}}},lY(),oY();class wY extends nY{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},wY.defaultAttributes,e)),this.name="colorLegend",this._onSliderChange=e=>{this._updateColor(),this.dispatchEvent(e)}}setSelected(e){this._slider&&(this._slider.setValue(e),this._updateColor())}_renderContent(){const{colors:e,slidable:t,layout:i,align:n,min:r,max:s,value:a,railWidth:o,railHeight:l,showHandler:c=!0,handlerSize:h,handlerStyle:d,railStyle:u,trackStyle:p,startText:g,endText:f,handlerText:m,showTooltip:v,tooltip:y,disableTriggerEvent:b}=this.attribute,_=[],x=(s-r)/(e.length-1);for(let w=0;w<e.length;w++)_.push(r+x*w);this._colorScale=(new ak).domain(_,!0).range(e),this._color=this._getTrackColor();const S=new SY({x:0,y:0,range:{draggableTrack:!0},slidable:t,layout:i,align:n,min:r,max:s,value:a,railWidth:o,railHeight:l,showHandler:c,handlerSize:h,handlerStyle:d,railStyle:u,trackStyle:Object.assign({fill:this._color},p),startText:g,endText:f,handlerText:m,showTooltip:v,tooltip:y,disableTriggerEvent:b});this._innerView.add(S),this._slider=S,S.translateTo(0-S.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+Br(this.attribute,"title.space",12):0)-S.AABBBounds.y1),this._updateColor()}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&this._slider.addEventListener("change",this._onSliderChange)}_getTrackColor(){const{colors:e,layout:t}=this.attribute;if(ay(e))return;const i=e.length;if(1===i)return e[0];const n=[];for(let s=0;s<i;s++){const t=s/(i-1);n.push({offset:t,color:e[s]})}const r="horizontal"===t;return{gradient:"linear",stops:n,x0:0,y0:0,x1:r?1:0,y1:r?0:1}}_updateColor(){const{layout:e="horizontal",colors:t,railWidth:i,railHeight:n}=this.attribute,{startHandler:r,endHandler:s,track:a}=this._slider,{startValue:o,endValue:l,startPos:c,endPos:h}=this._slider.currentValue,d=this._colorScale.scale(o),u=this._colorScale.scale(l);null==r||r.setAttribute("fill",d),null==s||s.setAttribute("fill",u);const p="horizontal"===e?i:n;if(Math.abs(c-h)!==p&&t&&t.length>1){const e=this._color.stops,t=Math.min(c,h),i=Math.max(c,h),n=t/p,r=i/p,s=r-n,d=e.filter((e=>e.offset>n&&e.offset<r)),u=Math.min(o,l),g=Math.max(o,l),f=this._colorScale.scale(u),m=this._colorScale.scale(g),v=[{offset:0,color:f}];d.forEach((e=>{v.push({offset:(e.offset-n)/s,color:e.color})})),v.push({offset:1,color:m}),a.setAttribute("fill",Object.assign(Object.assign({},this._color),{stops:v}))}}}function CY(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",t=0;return"top"===e?"\n    M".concat(t,",-6L").concat(t-3.5,",-2.5\n    v5\n    h7\n    v-5\n    Z\n"):"left"===e?(t=1,"\n    M".concat(t-6,",0L").concat(t-6+2.5,",-3.5\n    h5\n    v7\n    h-5\n    Z\n")):"right"===e?(t=-1,"\n    M".concat(t+6,",0L").concat(t+6-2.5,",-3.5\n    h-5\n    v7\n    h5\n    Z\n  ")):"\n    M".concat(t,",6L").concat(t-3.5,",2.5\n    v-5\n    h7\n    v5\n    Z\n")}wY.defaultAttributes={layout:"horizontal",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{lineWidth:4,stroke:"#fff",outerBorder:{distance:2,lineWidth:1,stroke:"#ccc"}}},lY(),oY(),uT();class kY extends nY{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},kY.defaultAttributes,e)),this.name="sizeLegend",this._onSliderChange=e=>{this.dispatchEvent(e)}}setSelected(e){this._slider&&this._slider.setValue(e)}_renderContent(){const{slidable:e,layout:t,align:i,min:n,max:r,value:s,railWidth:a,railHeight:o,showHandler:l=!0,handlerSize:c,handlerStyle:h,railStyle:d,trackStyle:u,startText:p,endText:g,handlerText:f,showTooltip:m,tooltip:v,sizeBackground:y,disableTriggerEvent:b}=this.attribute,_=bp.group({x:0,y:0});this._innerView.add(_);const x=new SY({x:0,y:0,zIndex:1,range:{draggableTrack:!0},slidable:e,layout:t,align:i,min:n,max:r,value:s,railWidth:a,railHeight:o,showHandler:l,handlerSize:c,handlerStyle:Object.assign({symbolType:CY(i)},h),railStyle:d,trackStyle:u,startText:p,endText:g,handlerText:f,showTooltip:m,tooltip:v,disableTriggerEvent:b});_.add(x);let S,w=0;"horizontal"===t?"top"===i?(S="M0,0L".concat(a,",0L").concat(a,",12Z"),w=o):(S="M0,12L".concat(a,",12L").concat(a,",0Z"),x.setAttribute("y",12)):"left"===i?S="M".concat(a,",0L").concat(a,",0L").concat(a+12,",").concat(o,"L").concat(a,",").concat(o,"Z"):(S="M0,".concat(o,"L12,").concat(o,"L12,0Z"),x.setAttribute("x",12));const C=bp.path(Object.assign(Object.assign({x:0,y:w,path:S},y),{zIndex:0}));_.add(C);const k=this._title?this._title.AABBBounds.height()+Br(this.attribute,"title.space",12):0;_.translate(0-_.AABBBounds.x1,k-_.AABBBounds.y1),this._slider=x}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&this._slider.addEventListener("change",this._onSliderChange)}}kY.defaultAttributes={layout:"horizontal",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{lineWidth:1,stroke:"#ccc",fill:"#fff"},sizeBackground:{fill:"rgba(20,20,20,0.1)"}};var AY=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function EY(e){return"color"===e||"size"===e}const TY={color:wY,size:kY},OY=["#C4E7FF","#98CAFF","#75ACFF","#518FF9","#2775DC","#005CBE","#00429F","#00287E"],PY=[2,10];class MY extends gY{static getSpecInfo(e){const t=e[this.specKey];if(!t)return;if(!v(t))return EY(t.type)?[{spec:t,specIndex:0,specPath:[this.specKey],type:"color"===t.type?r.colorLegend:r.sizeLegend}]:void 0;const i=[];return t.forEach(((e,t)=>{EY(e.type)&&i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:"color"===e.type?r.colorLegend:r.sizeLegend})})),i}constructor(e,t){super(e,t),this.type=r.colorLegend,this.name=r.colorLegend;const i="color"===this._spec.type?r.colorLegend:r.sizeLegend;this.type=i,this.name=i}setAttrFromSpec(){super.setAttrFromSpec(),this._field=this._spec.field,this._legendType=this._spec.type}init(e){super.init(e),gr(this._regions,(e=>{e.addViewDataFilter({type:"continuousLegendFilter",options:{selected:()=>this._selectedData,field:()=>this._field,data:()=>this._legendData.getLatestData()},level:wo.legendFilter})}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}_getScaleInGlobal(){const e=this._option.globalScale;let t=this._spec.scale;return t||(t=this._legendType),e.getScale(t)}_initLegendData(){uo(this._option.dataSet,"continuousLegendFilter",vY),uo(this._option.dataSet,"continuousLegendDataMake",mY);const e=new R(this._option.dataSet,{name:"".concat(this.type,"_").concat(this.id,"_data")});return e.transform({type:"continuousLegendDataMake",options:{series:()=>this._regions.reduce(((e,t)=>(e.push(...t.getSeries()),e)),[]),field:()=>this._field,scale:this._getScaleInGlobal.bind(this)}}),e}_initSelectedData(){this._spec.defaultSelected?this._selectedData=this._spec.defaultSelected.slice():this._selectedData=this._legendData.getLatestData()}_addDefaultTitleText(e){var t,i,n,r;if((null===(t=e.title)||void 0===t?void 0:t.visible)&&P(e.title.text)&&P(null===(i=e.title.style)||void 0===i?void 0:i.text)){const t=this._field;if(t){const i=null===(r=null===(n=this._regions)||void 0===n?void 0:n[0])||void 0===r?void 0:r.getSeries()[0];if(!i)return;return void(e.title.text=uR(i.getRawData(),t))}let i=this._spec.scale;i||(i=this._legendType);const s=this._option.globalScale.getScaleSpec(i);if(!Z(null==s?void 0:s.domain))return;const a=s.domain[0];if(0===a.fields.length)return;e.title.text=uR(this._option.dataSet.getDataView(a.dataId),a.fields[0])}}_getLegendAttributes(e){var t,i;const n="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",r="horizontal"===n?"bottom":this.layoutOrient;let s=[];const a=this._getScaleInGlobal();a&&"linear"===a.type&&(s=a.range()),ay(s)&&(s="color"===this._legendType?OY:PY);let o=null!==(t=this._legendData.getLatestData()[0])&&void 0!==t?t:0,l=null!==(i=this._legendData.getLatestData()[1])&&void 0!==i?i:1;this._legendData.getLatestData()[0]===this._legendData.getLatestData()[1]&&(o=Math.min(0,this._legendData.getLatestData()[0]),l=0===this._legendData.getLatestData()[0]?1:Math.max(0,this._legendData.getLatestData()[0]));const c=Object.assign({layout:n,align:r,zIndex:this.layoutZIndex,min:o,max:l,value:this._spec.defaultSelected,["color"===this._legendType?"colors":"sizeRange"]:s},function(e){const t=_e({},e),{title:i={},handler:n={},rail:r={},track:s={},startText:a,endText:o,handlerText:l,sizeBackground:c,background:h={},type:d,id:u,visible:p,orient:g,position:f,data:m,defaultSelected:v,field:y,filter:b,regionId:_,regionIndex:S,seriesIndex:w,seriesId:C,padding:k}=t,A=AY(t,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible&&(A.title=oF(i)),A.showHandler=!1!==n.visible,ay(n.style)||(A.handlerStyle=Yj(n.style)),x(r.width)&&(A.railWidth=r.width),x(r.height)&&(A.railHeight=r.height),ay(r.style)||(A.railStyle=Yj(r.style)),ay(s.style)||(A.trackStyle=Yj(s.style)),A.startText=Wj(a),A.endText=Wj(o),A.handlerText=Wj(l),ay(c)||(A.sizeBackground=Yj(c)),h.visible&&!ay(h.style)&&(_e(A,h.style),x(h.padding)&&(A.padding=h.padding)),A}(this._spec));return this._addDefaultTitleText(c),c}_getLegendConstructor(){return TY[this._legendType]}_initEvent(){if(this._legendComponent){const e=!1!==this._spec.filter;this._legendComponent.addEventListener("change",F((t=>{const i=Br(t,"detail.value");e&&this.setSelectedData(i),this.event.emit(Ir.legendFilter,{model:this,value:i,event:t})}),30))}}}MY.specKey="legends",MY.type=r.continuousLegend;const IY=(e,t,i)=>P(e)?e:Q(e)?e(t,i):e,RY=(e,t,i)=>{if(P(e))return e;if(v(e)){const n=[];return e.forEach((e=>{if(Q(e)){const r=e(t,i);x(r)&&n.push(r)}else n.push(e)})),n}return Q(e)?e(t,i):e};const DY=(e,t)=>e?(t||(t=e.getBoundingClientRect()),e.offsetWidth>0?t.width/e.offsetWidth:t.height/e.offsetHeight):1,LY=(e,t)=>{var i;let n,r;"rich"!==(null==e?void 0:e.type)&&"html"!==(null==e?void 0:e.type)?(e=(null!=e?e:"").toString(),t.multiLine?(n=e.split("\n"),n=n.map(((e,t)=>t<n.length-1?e+"\n":e))):n=[e],r=n.map((e=>Object.assign(Object.assign({},t),{text:e})))):(r=e.text,n=e);const s=(a={wordBreak:null!==(i=t.wordBreak)&&void 0!==i?i:"break-word",maxWidth:t.maxWidth?t.maxWidth:void 0,width:0,height:0,textConfig:r},YM||(YM=bp.CreateGraphic("richtext",{})),YM.setAttributes(a),YM.AABBBounds);var a;return{width:s.width(),height:s.height(),text:n}},jY="vchart-tooltip-container",FY=20,BY={key:"\u5176\u4ed6",value:"..."},NY={offsetX:10,offsetY:10,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/  /g," &nbsp;")}};class zY{}zY.dom="".concat(Ge,"_TOOLTIP_HANDLER_DOM"),zY.canvas="".concat(Ge,"_TOOLTIP_HANDLER_CANVAS");const HY=(e,t)=>{let i;if(x(e))if(l(e))i=e;else if(Q(e)){const n=e(t);l(n)&&(i=n)}return i},VY={left:["left","middle"],right:["right","middle"],inside:["middle","middle"],top:["middle","top"],lt:["left","top"],tl:["left","top"],rt:["right","top"],tr:["right","top"],bottom:["middle","bottom"],bl:["left","bottom"],lb:["left","bottom"],br:["right","bottom"],rb:["right","bottom"]},UY=(e,t)=>{var i,n;return null!==(n=null===(i=VY[e])||void 0===i?void 0:i[0])&&void 0!==n?n:t},WY=(e,t)=>{var i,n;return null!==(n=null===(i=VY[e])||void 0===i?void 0:i[1])&&void 0!==n?n:t},GY=(e,t,i)=>{const n=IY(t.key,e,i),r=IY(t.value,e,i),s=!1!==IY(t.visible,e,i)&&(x(n)||x(r)),a=IY(t.isKeyAdaptive,e,i),o=IY(t.spaceRow,e,i),l=IY(t.shapeType,e,i),c=IY(t.shapeColor,e,i),h=IY(t.shapeFill,e,i),d=IY(t.shapeStroke,e,i),u=IY(t.shapeLineWidth,e,i),p=IY(t.keyStyle,e,i),g=IY(t.valueStyle,e,i);return{key:n,value:r,visible:s,isKeyAdaptive:a,hasShape:t.hasShape,shapeType:l,shapeFill:h,shapeStroke:d,shapeLineWidth:u,shapeHollow:t.shapeHollow,shapeColor:c,keyStyle:p,valueStyle:g,spaceRow:o,datum:e}},KY=(e,t,i)=>{var n,r;return null!==(r=null===(n=e.tooltipHelper)||void 0===n?void 0:n.getDefaultTooltipPattern(t,i))&&void 0!==r?r:null},YY=(e,t,i)=>{var n;let r={};if("mark"===e&&t)r=null!==(n=KY(t,"mark"))&&void 0!==n?n:{};else if("dimension"===e&&(null==i?void 0:i.length)){const e=[];i[0].data.forEach((t=>{const{series:n}=t,r=[Object.assign(Object.assign({},i[0]),{data:[t]})],s=KY(n,"dimension",r);s&&e.push(s)}));const t=[];e.forEach((e=>{let{content:i}=e;Q(i)?t.push(i):t.push(...z(i))})),r=Object.assign(Object.assign({},e[0]),{content:t})}return r},XY=(e,t,i)=>{var n,r;let s={};if("mark"===e&&t){const e=null!==(r=null===(n=t.tooltipHelper)||void 0===n?void 0:n.spec)&&void 0!==r?r:{};s=e.mark?S(e.mark):{}}else if("dimension"===e&&(null==i?void 0:i.length)){const e=qY(i).filter((e=>{var t;const i=null===(t=e.tooltipHelper)||void 0===t?void 0:t.spec;return x(null==i?void 0:i.dimension)&&xR(i).includes("dimension")})).map((e=>e.tooltipHelper.spec.dimension));if(e.length){let t=[];e.every((e=>{let{content:t}=e;return P(t)}))?t=void 0:e.forEach((e=>{let{content:i}=e;P(i)||(Q(i)?null==t||t.push(i):null==t||t.push(...z(i)))})),s=Object.assign(Object.assign({},e[0]),{content:t})}}return s},qY=uC((e=>e.reduce(((e,t)=>e.concat(t.data.map((e=>e.series)).filter(x))),[]))),ZY=e=>{const t={};return e.forEach((e=>{var i;const n=null!==(i=e.seriesId)&&void 0!==i?i:0;t[n]||(t[n]=e)})),t},QY=(e,t,i,n)=>{var r,s;const a=null!==(s=null==i?void 0:i[null!==(r=null==e?void 0:e.seriesId)&&void 0!==r?r:0])&&void 0!==s?s:null==i?void 0:i[0],o=new Set([].concat(Object.keys(null!=e?e:{}),Object.keys(null!=t?t:{}),Object.keys(null!=a?a:{}),Object.keys(null!=n?n:{})).filter((e=>e.toLowerCase().includes("shape")))),l={};return o.forEach((i=>{var r,s,o;const c=null!==(o=null!==(s=null!==(r=null==e?void 0:e[i])&&void 0!==r?r:null==t?void 0:t[i])&&void 0!==s?s:null==a?void 0:a[i])&&void 0!==o?o:null==n?void 0:n[i];void 0!==c&&(l[i]=c)})),l};var $Y;!function(e){e[e.success=0]="success",e[e.failed=1]="failed"}($Y||($Y={}));const JY=1e-8;function eX(e,t,i,n,r){for(let s=0,a=r[r.length-1];s<r.length;s++){const o=r[s];if(eg([e,t],[i,n],[o.x,o.y],[a.x,a.y]))return!0;a=o}return!1}function tX(e,t,i){let n=0,r=e[0];if(!r)return!1;for(let a=1;a<e.length;a++){const s=e[a];n+=iX(r.x,r.y,s.x,s.y,t,i),r=s}const s=e[0];return nX(r.x,s.x)&&nX(r.y,s.y)||(n+=iX(r.x,r.y,s.x,s.y,t,i)),0!==n}function iX(e,t,i,n,r,s){if(s>t&&s>n||s<t&&s<n)return 0;if(n===t)return 0;const a=(s-t)/(n-t);let o=n<t?1:-1;1!==a&&0!==a||(o=n<t?.5:-.5);const l=a*(i-e)+e;return l===r?1/0:l>r?o:0}function nX(e,t){return Math.abs(e-t)<JY}function rX(e,t){for(let i=0;i<t.length;i++){if(tX(e,t[i].x,t[i].y))return!0;if(i>0&&eX(t[i-1].x,t[i-1].y,t[i].x,t[i].y,e))return!0}return!1}const sX={fontFamily:Ce,spacing:10,wordBreak:"break-word"};function aX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;var n,r;return Object.assign(Object.assign({},null!=i?i:sX),{fill:null!==(n=e.fill)&&void 0!==n?n:e.fontColor,textAlign:e.textAlign,textBaseline:e.textBaseline,fontFamily:null!==(r=e.fontFamily)&&void 0!==r?r:null==t?void 0:t.fontFamily,fontSize:e.fontSize,fontWeight:e.fontWeight,lineHeight:e.lineHeight,spacing:e.spacing,multiLine:e.multiLine,maxWidth:e.maxWidth,wordBreak:e.wordBreak,autoWidth:e.autoWidth})}const oX=e=>{var t;const{backgroundColor:i,border:n,shadow:r}=e,s={lineWidth:null!==(t=null==n?void 0:n.width)&&void 0!==t?t:0,shadow:!!r};(null==n?void 0:n.color)&&(s.stroke=n.color),i&&(s.fill=i),r&&(s.shadowColor=r.color,s.shadowBlur=r.blur,s.shadowOffsetX=r.x,s.shadowOffsetY=r.y,s.shadowSpread=r.spread);const{radius:a}=null!=n?n:{};return x(a)&&(s.cornerRadius=[a,a,a,a]),s};class lX{get id(){return this._id}get env(){return this._env}constructor(e,t){this._visible=!0,this._id="",this._attributes=null,this._isReleased=!1,this.showTooltip=(e,t,i)=>{var n;let r=!!i.changePositionOnly;return i.changePositionOnly&&(null===(n=this._cacheActualTooltip)||void 0===n?void 0:n.activeType)===e||(r=!1,this._clearCacheOfContent()),r&&this._cacheViewSpec&&this._cacheActualTooltip?this.changeTooltipPosition(r,t,i):this.changeTooltip(!0,i,r,e,t)},this._changeTooltip=(e,t,i,n,r)=>{var s,a,o,l,c,h,d,u,p,g,f,m,v;const y=this._component.getSpec();if(this._isReleased||!y)return $Y.failed;if(!e)return this._clearAllCache(),y.handler?null!==(o=null===(a=(s=y.handler).hideTooltip)||void 0===a?void 0:a.call(s,t))&&void 0!==o?o:$Y.success:(this._updateTooltip(!1,t),$Y.success);if(P(n)||P(r))return $Y.failed;let b;if(i&&this._cacheViewSpec?b=this._cacheViewSpec:(b=((e,t,i,n)=>{var r,s,a,o,l,c,h;const d=Object.assign(Object.assign({},t),{activeType:e});if("mark"===e&&i){const e=null!==(s=null===(r=i.tooltipHelper)||void 0===r?void 0:r.spec)&&void 0!==s?s:{};if(x(e.visible)||x(e.activeType)?d.visible=xR(e).includes("mark"):x(t.visible)||x(t.activeType)?d.visible=xR(t).includes("mark"):d.visible=!0,d.handler=null!==(o=null!==(a=e.handler)&&void 0!==a?a:t.handler)&&void 0!==o?o:void 0,null===(l=d.handler)||void 0===l?void 0:l.showTooltip)return d}else if("dimension"===e&&(null==n?void 0:n.length)&&(qY(n).every((e=>{var t;return!xR(null===(t=e.tooltipHelper)||void 0===t?void 0:t.spec).includes("dimension")}))?d.visible=!1:x(t.visible)||x(t.activeType)?d.visible=xR(t).includes("dimension"):d.visible=!0,d.handler=null!==(c=t.handler)&&void 0!==c?c:void 0,null===(h=d.handler)||void 0===h?void 0:h.showTooltip))return d;const u=YY(e,i,n),p=XY(e,i,n),g=_e({},S(t[e]),p),f=u.title,m=QY(void 0,g,void 0,f);if(x(g.title))if(Q(g.title)){const e=g.title;g.title=(t,i)=>{var n;const r=null!==(n=e(t,i))&&void 0!==n?n:{};return Object.assign(Object.assign({},m),r)}}else g.title=Object.assign(Object.assign(Object.assign({},u.title),m),g.title);else g.title=Object.assign(Object.assign({},u.title),m);const v=z(u.content);if(x(g.content)){const e=ZY(v);if(Q(g.content)){const t=g.content;g.content=(i,n)=>{var r;const s=[];return z(null!==(r=t(i,n))&&void 0!==r?r:[]).forEach((t=>{s.push(Object.assign(Object.assign({},QY(t,g,e)),t))})),s}}else{const t=[];z(g.content).forEach((i=>{t.push(Object.assign(Object.assign({},QY(i,g,e)),i))})),g.content=t}}else g.content=v.map((e=>Object.assign(Object.assign({},e),QY(void 0,g,void 0,e))));return d[e]=Object.assign(Object.assign(Object.assign({},u),g),{activeType:e}),d})(n,y,t.model,t.dimensionInfo),this._cacheViewSpec=b),!1===b.visible)return $Y.failed;if(b.handler)return null!==(h=null===(c=(l=b.handler).showTooltip)||void 0===c?void 0:c.call(l,n,r,t))&&void 0!==h?h:$Y.success;const _=b[n];if(!_)return $Y.failed;let w;return i&&this._cacheActualTooltip?w=this._cacheActualTooltip:(w=this._getActualTooltipContent(_,r,t),w.title=null!==(u=null===(d=_.updateTitle)||void 0===d?void 0:d.call(_,w.title,r,t))&&void 0!==u?u:w.title,w.content=null!==(g=null===(p=_.updateContent)||void 0===p?void 0:p.call(_,w.content,r,t))&&void 0!==g?g:w.content),P(null===(f=w.title)||void 0===f?void 0:f.key)&&P(null===(m=w.title)||void 0===m?void 0:m.value)&&!(null===(v=w.content)||void 0===v?void 0:v.length)?$Y.failed:(this._cacheActualTooltip=w,this._changeTooltipPosition(!!i,r,t))},this._changeTooltipPosition=(e,t,i)=>{var n,r,s;if(this._isReleased)return $Y.failed;const a=i.event,o=this._cacheViewSpec,l=this._cacheActualTooltip;if(!o||!l)return $Y.failed;if(o.enterable){if(!this._isPointerEscaped&&this._isPointerMovingToTooltip(i))return this._isTooltipPaused||(this._isTooltipPaused=!0,this._cachePointerTimer=setTimeout((()=>{this._isPointerEscaped=!0}),300)),$Y.success;this._isTooltipPaused=!1,this._isPointerEscaped=!1,clearTimeout(this._cachePointerTimer),this._cachePointerPosition=this._getPointerPositionRelativeToTooltipParent(i)}const c=l.activeType;if(o.handler)return null!==(s=null===(r=(n=o.handler).showTooltip)||void 0===r?void 0:r.call(n,c,t,i))&&void 0!==s?s:$Y.success;const h=o[c];if(!h)return $Y.failed;const d=this._getActualTooltipPosition(l,i,this._getTooltipBoxSize(l,e));l.position=d,h.updatePosition&&(l.position=h.updatePosition(l.position,t,i));let u=!1!==(null==h?void 0:h.visible);return t&&"pointerout"!==a.type&&l.visible&&(l.title||l.content)||(u=!1),this._updateTooltip(u,Object.assign(Object.assign({},i),{changePositionOnly:e}),l),$Y.success},this._getActualTooltipContent=(e,t,i)=>{const n=RY(e.visible,t,i);let r=null;return r=((e,t,i)=>{var n,r,s,a,o;if(!t||"mouseout"===(null===(n=null==i?void 0:i.event)||void 0===n?void 0:n.type))return null;const l=RY(e.title,t,i),c=z(RY(e.content,t,i)),h={title:{value:null===(r=null==l?void 0:l.value)||void 0===r?void 0:r.toString(),hasShape:!1,shapeType:void 0,shapeHollow:void 0},content:[]},{maxLineCount:d=FY}=e,u=!1!==IY(null==l?void 0:l.visible,t,i);if(l&&u){const e=function(e){var t;const i=(null===(t=e[0])||void 0===t?void 0:t.series)?[{data:e,value:""}]:e;for(const{data:n}of i)for(const{datum:e}of n)for(const t of null!=e?e:[])if(t)return t}(t);h.title={value:IY(null==l?void 0:l.value,e,i),valueStyle:IY(null==l?void 0:l.valueStyle,e,i),hasShape:l.hasShape}}else h.title={hasShape:!1,visible:!1};if("mark"===e.activeType)for(const p of null!=c?c:[]){const e=GY(null===(s=t[0])||void 0===s?void 0:s.datum[0],p,i);if(!1!==e.visible){if(h.content.length===d-1){h.content.push(Object.assign(Object.assign({},e),BY));break}if(!(h.content.length<d))break;h.content.push(e)}}else if("dimension"===e.activeType)for(const{data:p}of t){for(const{datum:e,series:t}of p){if(!xR(null===(a=t.tooltipHelper)||void 0===a?void 0:a.spec).includes("dimension"))continue;const n=null!==(o=null==c?void 0:c.filter((e=>P(e.seriesId)||e.seriesId===t.id)))&&void 0!==o?o:[];for(const t of e){for(const e of n){const n=GY(t,e,i);if(!1!==n.visible){if(h.content.length===d-1){h.content.push(Object.assign(Object.assign({},n),BY));break}if(!(h.content.length<d))break;h.content.push(n)}}if(h.content.length>=d)break}if(h.content.length>=d)break}if(h.content.length>=d)break}return h.title&&(h.content.length>0&&h.content[0].shapeType?(P(h.title.shapeType)&&(h.title.shapeType=h.content[0].shapeType),P(h.title.shapeColor)&&(h.title.shapeColor=h.content[0].shapeColor)):h.title.hasShape=!1),h})(e,t,i),Object.assign(Object.assign({},r),{visible:!!x(r)&&!1!==n,activeType:e.activeType,data:t})},this._getActualTooltipPosition=(e,t,i)=>{var n,r,s,a,o;const l=t.event,c={x:1/0,y:1/0},{offsetX:h,offsetY:d}=this._option,u=this._cacheViewSpec;if(!u)return this._cacheTooltipPosition=void 0,c;const{activeType:p,data:g}=e,f=u[p],m=RY(f.position,g,t),v=RY(f.positionMode,g,t),y=this._getParentElement(u),{width:b=0,height:_=0}=null!=i?i:{},S="canvas"===u.renderMode,w=null===(n=null==t?void 0:t.chart)||void 0===n?void 0:n.getCanvasRect(),C=null!==(r=null==w?void 0:w.width)&&void 0!==r?r:Ke,k=null!==(s=null==w?void 0:w.height)&&void 0!==s?s:Ye;let A=!1;const E={width:0,height:0};let T={x:0,y:0},O={x:0,y:0},P=1,M=1;if(de(this._env)&&!u.confine){if(E.width=window.innerWidth,E.height=window.innerHeight,!S){O=null!==(a=null==y?void 0:y.getBoundingClientRect())&&void 0!==a?a:c;const e=null!==(o=this._compiler.getCanvas())&&void 0!==o?o:this._chartContainer,t=null==e?void 0:e.getBoundingClientRect();T={x:t.x-O.x,y:t.y-O.y},P=DY(e,t),M=DY(y,O)}}else E.width=C,E.height=k;const I=M/P;let R,j,F,B,N,z;if(D(m)){const{left:e,right:t,top:i,bottom:n}=m;R=HY(e,l),j=HY(i,l),F=HY(t,l),B=HY(n,l)}else if(x(m)&&"pointer"!==v&&"mark"===e.activeType){A=!0;const e=t.item,i=t.model,n=null==e?void 0:e.getBounds(),r=null==i?void 0:i.getLayoutStartPoint();if(n&&r){let{x1:e,y1:t,x2:i,y2:s}=n;switch(e+=r.x,i+=r.x,t+=r.y,s+=r.y,UY(m)){case"left":R=e-b*I-h;break;case"right":R=i+h;break;case"middle":R=(e+i)/2-b*I/2}switch(WY(m)){case"top":j=t-_*I-d;break;case"bottom":j=s+d;break;case"middle":j=(t+s)/2-_*I/2}}}const{canvasX:H,canvasY:V}=l;if(L(R))N=R;else if(L(F))N=C-b*I-F;else{const e=H;switch(UY(m,"right")){case"middle":N=e-b*I/2;break;case"left":N=e-b*I-h;break;case"right":N=e+h}}if(L(j))z=j;else if(L(B))z=k-_*I-B;else{const e=V;switch(WY(m,"bottom")){case"middle":z=e-_*I/2;break;case"top":z=e-_*I-d;break;case"bottom":z=e+d}}N*=P,z*=P,de(this._env)&&(N+=T.x,z+=T.y),N/=M,z/=M;const{width:U,height:W}=E,G=()=>N*M+O.x<0,K=()=>(N+b)*M+O.x>U,Y=()=>z*M+O.y<0,X=()=>(z+_)*M+O.y>W,q=()=>{G()&&(A?N=-O.x/M:"middle"===UY(m,"right")?N+=h+b/2:N+=2*h+b)},Z=()=>{G()&&(N=-O.x/M)},Q=()=>{K()&&(A?N=(U-O.x)/M-b:"middle"===UY(m,"right")?N-=h+b/2:N-=2*h+b)},$=()=>{K()&&(N=(U-O.x)/M-b)},J=()=>{Y()&&(A?z=-O.y/M:"middle"===WY(m,"bottom")?z+=d+_/2:z+=2*d+_)},ee=()=>{Y()&&(z=0-O.y/M)},te=()=>{X()&&(A?z=(W-O.y)/M-_:"middle"===WY(m,"bottom")?z-=d+_/2:z-=2*d+_)},ie=()=>{X()&&(z=(W-O.y)/M-_)};switch(UY(m,"right")){case"middle":G()?(q(),$()):(Q(),Z());break;case"left":q(),$();break;case"right":Q(),Z()}switch(WY(m,"bottom")){case"middle":Y()?(J(),ie()):(te(),ee());break;case"top":J(),ie();break;case"bottom":te(),ee()}const ne={x:N,y:z};return this._cacheTooltipPosition=ne,this._cacheTooltipSize={width:b,height:_},ne},this._component=t,this._chartOption=t.getOption(),this._env=this._chartOption.mode,this._chartContainer=this._chartOption.globalInstance.getContainer(),this._compiler=t.getCompiler(),this._id=e,this._initFromSpec()}hideTooltip(e){return this.changeTooltip(!1,e)}release(){var e,t,i;this._clearAllCache();const n=null!==(e=this._component.getSpec())&&void 0!==e?e:{};n.handler?null===(i=(t=n.handler).release)||void 0===i||i.call(t):(this._removeTooltip(),this._isReleased=!0)}_clearAllCache(){this._clearCacheOfContent(),this._clearCacheOfPosition()}_clearCacheOfContent(){this._cacheViewSpec=void 0,this._cacheActualTooltip=void 0}_clearCacheOfPosition(){this._isTooltipPaused=!1,this._isPointerEscaped=!1,clearTimeout(this._cachePointerTimer),this._cachePointerTimer=-1,this._cachePointerPosition=void 0,this._cacheTooltipPosition=void 0,this._cacheTooltipSize=void 0}_throttle(e){const t=this._component.getSpec();let i;return i=l(t.throttleInterval)?t.throttleInterval:"html"===t.renderMode&&t.transitionDuration?50:10,Nr(e,i)}_getDefaultOption(){var e,t;const{offset:i}=this._component.getSpec();return Object.assign(Object.assign({},NY),{offsetX:null!==(e=null==i?void 0:i.x)&&void 0!==e?e:NY.offsetX,offsetY:null!==(t=null==i?void 0:i.y)&&void 0!==t?t:NY.offsetY})}_getTooltipBoxSize(e,t){var i,n,r,s,a,o;if(!t||P(this._attributes)){const t=null!==(n=null===(i=this._chartOption)||void 0===i?void 0:i.getTheme())&&void 0!==n?n:{};this._attributes=((e,t,i)=>{var n,r,s,a,o;const{style:l={},enterable:c,transitionDuration:h}=t,{panel:d={},titleLabel:u,shape:p,keyLabel:g,valueLabel:f,spaceRow:m}=l,v=nW(d.padding),y=ie(d.padding),b=aX(u,i),_=aX(g,i),S=aX(f,i),w={fill:!0,size:null!==(n=null==p?void 0:p.size)&&void 0!==n?n:8,spacing:null!==(r=null==p?void 0:p.spacing)&&void 0!==r?r:6},C={panel:oX(d),padding:v,title:{},content:[],titleStyle:{value:b,spaceRow:m},contentStyle:{shape:w,key:_,value:S,spaceRow:m},hasContentShape:!1,keyWidth:0,valueWidth:0,enterable:c,transitionDuration:h},{title:k={},content:A=[]}=e;let E=y.left+y.right,T=y.top+y.bottom,O=0;const P=A.filter((e=>(e.key||e.value)&&!1!==e.visible)),M=!!P.length;let I=0,R=0,D=0,L=0;if(M){const e=[],t=[],i=[],n=[];C.content=P.map(((r,s)=>{let a=0;const{hasShape:o,key:l,shapeType:c="",shapeFill:h,shapeStroke:d,shapeLineWidth:u,shapeSize:p,value:g,isKeyAdaptive:f,spaceRow:v,keyStyle:y,valueStyle:b,shapeColor:C,shapeHollow:k}=r,A={height:0,spaceRow:null!=v?v:m};if(x(l)){const i=_e({},_,aX(y,void 0,{})),{width:n,height:r,text:s}=LY(l,i);A.key=Object.assign(Object.assign({width:n,height:r},i),{text:s}),f?t.push(n):e.push(n),a=Math.max(a,r)}if(x(g)){const e=_e({},S,aX(b,void 0,{})),{width:t,height:n,text:r}=LY(g,e);A.value=Object.assign(Object.assign({width:t,height:n},e),{text:r}),i.push(t),a=Math.max(a,n)}if(o){const e={visible:!0,symbolType:c},t=null!=h?h:C;k?e.stroke=t:e.fill=t,e.stroke=null!=d?d:t,e.lineWidth=u,A.shape=e;const i=null!=p?p:w.size;a=Math.max(i,a),n.push(i)}else A.shape={visible:!1};return A.height=a,T+=a,s<P.length-1&&(T+=A.spaceRow),A})),I=e.length?V(e):0,R=t.length?V(t):0,D=i.length?V(i):0,L=n.length?V(n)+w.spacing:0,O=Math.max(L+I+_.spacing+D+S.spacing,L+R,O),C.hasContentShape=!!n.length,C.keyWidth=I,C.valueWidth=D}let j=0,F=0;const{visible:B=!0,value:N="",valueStyle:z,spaceRow:H}=k;C.title.visible=B,C.title.spaceRow=null!=H?H:m;let U={};const W=()=>U.autoWidth&&!1!==U.multiLine;if(B){U=_e({},b,aX(z,void 0,{})),W()&&(U.multiLine=null===(s=U.multiLine)||void 0===s||s,U.maxWidth=null!==(a=U.maxWidth)&&void 0!==a?a:M?Math.ceil(O):void 0);const{text:e,width:t,height:i}=LY(N,U);C.title.value=Object.assign(Object.assign({width:W()?Math.min(t,null!==(o=U.maxWidth)&&void 0!==o?o:Number.MAX_VALUE):t,height:i},U),{text:e}),j=C.title.value.width,F=C.title.value.height,T+=F+(M?C.title.spaceRow:0)}return C.title.width=j,C.title.height=F,W()?E+=O||j:E+=Math.max(j,O),M&&C.content.forEach((e=>{var t;const i=e.value;i&&(null===(t=i.autoWidth)||void 0===t||t)&&(i.width=E-y.left-y.right-L-I-_.spacing-S.spacing,i.maxWidth||(i.maxWidth=Math.ceil(i.width)),C.valueWidth=Math.max(C.valueWidth,i.width))})),C.panel.width=E,C.panel.height=T,C})(e,this._component.getSpec(),t)}return{width:null===(s=null===(r=this._attributes)||void 0===r?void 0:r.panel)||void 0===s?void 0:s.width,height:null===(o=null===(a=this._attributes)||void 0===a?void 0:a.panel)||void 0===o?void 0:o.height}}_getPointerPositionRelativeToTooltipParent(e){var t,i;let{canvasX:n,canvasY:r}=e.event;const s={x:1/0,y:1/0},a=this._cacheViewSpec,o="canvas"===a.renderMode,l=this._getParentElement(a);let c={x:0,y:0},h={x:0,y:0},d=1,u=1;if(de(this._env)&&!a.confine&&!o){h=null!==(t=null==l?void 0:l.getBoundingClientRect())&&void 0!==t?t:s;const e=null!==(i=this._compiler.getCanvas())&&void 0!==i?i:this._chartContainer,n=null==e?void 0:e.getBoundingClientRect();c={x:n.x-h.x,y:n.y-h.y},d=DY(e,n),u=DY(l,h)}return n*=d,r*=d,de(this._env)&&(n+=c.x,r+=c.y),n/=u,r/=u,{x:n,y:r}}_isPointerMovingToTooltip(e){if(!this._cacheTooltipPosition||!this._cacheTooltipSize||!this._cachePointerPosition)return!1;const{width:t,height:i}=this._cacheTooltipSize,{x:n=0,y:r}=this._cacheTooltipPosition,s=this._getPointerPositionRelativeToTooltipParent(e);if(sg(s,{x1:n,y1:r,x2:n+t,y2:r+i},!1))return!0;const a={x:n,y:r},o={x:a.x+t,y:a.y},l={x:a.x,y:a.y+i},c={x:o.x,y:l.y},h=this._cachePointerPosition;return tX([h,a,o],s.x,s.y)||tX([h,l,c],s.x,s.y)||tX([h,a,c],s.x,s.y)||tX([h,o,l],s.x,s.y)}_getParentElement(e){return e.parentElement}getTooltipContainer(){return this._container}_initFromSpec(){this._option=this._getDefaultOption(),this.changeTooltip=this._throttle(this._changeTooltip),this.changeTooltipPosition=this._throttle(this._changeTooltipPosition)}reInit(){this._initFromSpec()}}const cX=(e,t)=>x(e)?v(e)?e.map((e=>"".concat(e,"px"))).join(" "):"".concat(e,"px"):null!=t?t:"initial";function hX(e){var t,i,n,r,s;const{panel:a={},title:o,content:l,titleStyle:c={},contentStyle:h={},padding:d,keyWidth:u,valueWidth:p,enterable:g,transitionDuration:f}=null!=e?e:{},{fill:m,shadow:v,shadowBlur:y,shadowColor:b,shadowOffsetX:_,shadowOffsetY:x,shadowSpread:S,cornerRadius:w,stroke:C,lineWidth:k=0,width:A=0,height:E=0}=a,{value:T={}}=c,{shape:O={},key:P={},value:M={}}=h,I=function(e,t){if(!e)return;const{size:i}=_e({},t,e),n={};return n.width=cX(i),n}(O),R=dX(P),D=dX(M),{bottom:L,left:j,right:F,top:B}=ie(d);return{panel:{width:cX(A+2*k),minHeight:cX(E+2*k),paddingBottom:cX(L),paddingLeft:cX(j),paddingRight:cX(F),paddingTop:cX(B),borderColor:C,borderWidth:cX(k),borderRadius:cX(w),backgroundColor:m?"".concat(m):"transparent",boxShadow:v?"".concat(_,"px ").concat(x,"px ").concat(y,"px ").concat(S,"px ").concat(b):"initial",pointerEvents:g?"auto":"none",transitionDuration:f?"".concat(f,"ms"):"initial",transitionProperty:f?"transform":"initial",transitionTimingFunction:f?"ease-out":"initial"},title:Object.assign({marginTop:"0px",marginBottom:(null==l?void 0:l.length)?cX(null==o?void 0:o.spaceRow):"0px"},dX(_e({},T,null==o?void 0:o.value))),content:{},shapeColumn:{common:I,items:[],width:cX(O.size),marginRight:cX(null!==(t=O.spacing)&&void 0!==t?t:8),marginBottom:cX(-(null!==(n=null===(i=null==l?void 0:l[(null==l?void 0:l.length)-1])||void 0===i?void 0:i.spaceRow)&&void 0!==n?n:0))},keyColumn:{common:R,items:null==l?void 0:l.map(((e,t)=>{let{key:i,spaceRow:n}=e;return Object.assign(Object.assign(Object.assign({marginTop:"0px",marginBottom:t<l.length-1?cX(n):"0px"},R),dX(i)),(null==i?void 0:i.multiLine)?{width:cX(Math.ceil(i.width))}:void 0)})),width:cX(u),marginRight:cX(null!==(r=P.spacing)&&void 0!==r?r:26)},valueColumn:{common:D,items:null==l?void 0:l.map(((e,t)=>{let{value:i,spaceRow:n}=e;return Object.assign(Object.assign(Object.assign({marginTop:"0px",marginBottom:t<l.length-1?cX(n):"0px"},D),dX(i)),(null==i?void 0:i.multiLine)?{width:cX(Math.ceil(i.width))}:void 0)})),width:cX(p),marginRight:cX(null!==(s=M.spacing)&&void 0!==s?s:0)}}}function dX(e,t){if(!e)return;const{fontFamily:i,fontSize:n,fill:r,textAlign:s,lineHeight:a,fontWeight:o,multiLine:l,wordBreak:c,maxWidth:h}=_e({},t,e),d={};return d.fontFamily=i,d.fontSize=cX(n),d.color=r,d.textAlign=s,d.lineHeight=cX(Dd(a,n)),d.fontWeight=o,d.whiteSpace=l?"initial":"nowrap",d.wordBreak=l?null!=c?c:"break-word":"normal",d.maxWidth=cX(h),d}class uX{static isInstance(e){return!!e&&e.type===uX.type}setOption(e){this._option=e,Object.values(this.children).forEach((t=>t.setOption(e)))}getParentEl(){return uX.isInstance(this.parent)?this.parent.product:this.parent}constructor(e,t,i){this.type=uX.type,this._renderContentCache=null,this.children={},this.parent=e,this._option=t,this.childIndex=null!=i?i:0}init(e,t){}initAll(){this.init(),Object.values(this.children).forEach((e=>e.initAll()))}setStyle(e){this.product&&e&&Object.keys(e).forEach((t=>{this.product.style[t]!==e[t]&&(this.product.style[t]=e[t])}))}setContent(e){}setVisibility(e){if(!this.product)return;const{style:t}=this.product;t.visibility=e?"visible":"hidden",Object.values(this.children).forEach((t=>t.setVisibility(e)))}getVisibility(){var e,t;return!!(null===(t=null===(e=this.product)||void 0===e?void 0:e.style)||void 0===t?void 0:t.visibility)&&"hidden"!==this.product.style.visibility}release(){var e;if(Object.values(this.children).forEach((e=>e.release())),this.children={},this.product){try{null===(e=this.getParentEl())||void 0===e||e.removeChild(this.product)}catch(t){}this.product=null}}createElement(e,t,i,n){const r=null==he?void 0:he.createElement(e),s=this.getParentEl();if(!r||!s)return;t&&r.classList.add(...t),i&&Object.keys(i).forEach((e=>{r.style[e]=i[e]})),n&&(r.id=n);let a=this.childIndex;if(uX.isInstance(this.parent)){let e=Number.MAX_VALUE;for(let t=0;t<s.children.length;t++){const i=Object.values(this.parent.children).find((e=>e.product===s.children[t]));i.childIndex>this.childIndex&&i.childIndex<e&&(e=i.childIndex,a=t)}}return a>=s.children.length?s.appendChild(r):s.insertBefore(r,s.children[a]),r}}uX.type="tooltipModel";const pX={fontSize:"13px",marginBottom:"0px",fontWeight:"normal"},gX={boxSizing:"border-box"},fX={display:"flex",whiteSpace:"nowrap"},mX={display:"flex",flexDirection:"column",justifyContent:"space-around",fontSize:"0"},vX={paddingTop:"0px",paddingBottom:"0px",textAlign:"left",fontWeight:"normal"},yX={paddingTop:"0px",paddingBottom:"0px",textAlign:"left",fontWeight:"normal"},bX={paddingTop:"0px",paddingBottom:"0px",textAlign:"right",fontWeight:"normal"},_X={lineHeight:"normal"};class xX extends uX{init(e,t,i){if(!this.product){const n=this.createElement(null!=i?i:"div",[...null!=e?e:[],"shape"],void 0,t);this.product=n}}setStyle(e,t){super.setStyle(e),this.setSvg(t)}setContent(e){this.setSvg(e)}setSvg(e){const t=function(e,t){var i,n,r,s,a,o,l;if(!(null==e?void 0:e.hasShape)||!e.symbolType)return"";const{symbolType:c,fill:h,stroke:d,hollow:u=!1}=e,p=e.size?t(e.size):"8px",g=e.marginTop?t(e.marginTop):"0px",f=e.lineWidth?t(e.lineWidth)+"px":"0px";let m="currentColor";const v=()=>d?t(d):m,y=(e=>{const t=e.split(" ").map((e=>Number.isNaN(e)?Number.parseFloat(e.substring(0,e.length-2)):Number.parseFloat(e)));return 1===t.length?t[0]:t})(p),b=e=>new Mx({symbolType:e,size:y,fill:!0});let x=b(null!==(i=SX[c])&&void 0!==i?i:c);const S=x.getParsedPath();S.path||(x=b(S.pathStr));const w=x.getParsedPath().path,C=w.toString(),k=w.bounds;let A="".concat(k.x1," ").concat(k.y1," ").concat(k.width()," ").concat(k.height());if("0px"!==f){const[e,t,i,n]=A.split(" ").map((e=>Number(e))),r=Number(f.slice(0,-2));A="".concat(e-r/2," ").concat(t-r/2," ").concat(i+r," ").concat(n+r)}if(!h||_(h)||u)return m=u?"none":h?t(h):"currentColor",'\n    <svg width="'.concat(p,'" height="').concat(p,'" viewBox="').concat(A,'"\n      style="display: inline-block; vertical-align: middle; margin-top: ').concat(g,';">\n      <path\n        d="').concat(C,'"\n        style="fill: ').concat(m,"; stroke: ").concat(v(),"; stroke-width: ").concat(f,'"\n      >\n      </path>\n    </svg>');if(D(h)){m=null!==(n="gradientColor"+e.index)&&void 0!==n?n:"";let i="";const c=(null!==(r=h.stops)&&void 0!==r?r:[]).map((e=>'<stop offset="'.concat(t(e.offset.toString()),'" stop-color="').concat(t(e.color),'"/>'))).join("");return"radial"===h.gradient?i='<radialGradient id="'.concat(m,'" cx="50%" cy="50%" r="50%" fx="0%" fy="0%">\n      ').concat(c,"\n      </radialGradient>"):"linear"===h.gradient&&(i='<linearGradient id="'.concat(m,'" x1="').concat(100*(null!==(s=h.x0)&&void 0!==s?s:0),'%" y1="').concat(100*(null!==(a=h.y0)&&void 0!==a?a:0),'%" x2="').concat(100*(null!==(o=h.x1)&&void 0!==o?o:0),'%" y2="').concat(100*(null!==(l=h.y1)&&void 0!==l?l:0),'%">\n      ').concat(c,"\n      </linearGradient>")),'\n    <svg width="'.concat(p,'" height="').concat(p,'" viewBox="-0.5 -0.5 1 1"\n      style="display: inline-block; vertical-align: middle; margin-top: ').concat(g,';">\n      ').concat(i,'\n      <path\n        d="').concat(C,'"\n        style="fill: url(#').concat(m,"); stroke: ").concat(v(),"; stroke-width: ").concat(f,'"\n      >\n      </path>\n    </svg>')}return""}(e,this._option.valueToHtml);this.product&&t!==this._svgHtmlCache&&(this._svgHtmlCache=t,this.product.innerHTML=t)}release(){super.release(),this._svgHtmlCache=""}}const SX={star:"M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z"};class wX extends uX{init(e,t,i){this.product||(this.product=this.createElement(null!=i?i:"span",e,void 0,t))}setContent(e,t){if(!this.product)return;let i=this._option.valueToHtml(e);t&&(i=i.replaceAll("\n","<br>")),i!==this.product.innerHTML&&(this.product.innerHTML=i)}}const CX={overflowWrap:"normal",wordWrap:"normal"};class kX extends uX{constructor(e,t,i,n){super(e,t,n),this.className=i}init(){var e,t;this.product||(this.product=this.createElement("div",[this.className]));const i=null!==(t=null===(e=this._option.getTooltipActual())||void 0===e?void 0:e.content)&&void 0!==t?t:[];if("shape-box"!==this.className||i.some((e=>e.hasShape&&e.shapeType))){Object.keys(this.children).forEach((e=>{const t=Dn(e);t>=i.length&&(this.children[t].release(),delete this.children[t])}));for(let e=0;e<i.length;e++)if(!this.children[e])if("key-box"===this.className||"value-box"===this.className){const t=new wX(this.product,this._option,e);t.init([this.className.substring(0,this.className.indexOf("-"))],void 0,"div"),this.children[e]=t}else if("shape-box"===this.className){const t=new xX(this.product,this._option,e);t.init(["shape"],void 0,"div"),this.children[e]=t}}else Object.keys(this.children).forEach((e=>{const t=Dn(e);this.children[t].release(),delete this.children[t]}))}setStyle(){var e,t,i,n;const r=this._option.getTooltipStyle();super.setStyle(_e({},mX,r.content,this._getContentColumnStyle()));const s=null!==(t=null===(e=this._option.getTooltipActual())||void 0===e?void 0:e.content)&&void 0!==t?t:[],a=null!==(n=null===(i=this._option.getTooltipAttributes())||void 0===i?void 0:i.content)&&void 0!==n?n:[];s.forEach(((e,t)=>{var i,n,s,o,c;let h={};if("key-box"===this.className){const{key:s,isKeyAdaptive:o}=e;h=_e({},o?yX:vX,Object.assign(Object.assign(Object.assign({height:cX(a[t].height)},CX),r.keyColumn.common),null===(i=r.keyColumn.items)||void 0===i?void 0:i[t])),_(s)&&""!==(null===(n=null==s?void 0:s.trim)||void 0===n?void 0:n.call(s))||l(s)||h.visibility?h.visibility="visible":h.visibility="hidden",this.children[t].setStyle(h)}else"value-box"===this.className?(h=_e({},bX,Object.assign(Object.assign(Object.assign({height:cX(a[t].height)},CX),r.valueColumn.common),null===(s=r.valueColumn.items)||void 0===s?void 0:s[t])),this.children[t].setStyle(h)):"shape-box"===this.className&&(h=_e({},_X,Object.assign(Object.assign({height:cX(a[t].height+a[t].spaceRow)},r.shapeColumn.common),null===(o=r.shapeColumn.items)||void 0===o?void 0:o[t])),null===(c=this.children[t])||void 0===c||c.setStyle(h,this._getShapeSvgOption(e,t)))}))}setContent(){var e,t,i,n;const r=null!==(t=null===(e=this._option.getTooltipActual())||void 0===e?void 0:e.content)&&void 0!==t?t:[],s=null!==(n=null===(i=this._option.getTooltipAttributes())||void 0===i?void 0:i.content)&&void 0!==n?n:[];r.forEach(((e,t)=>{var i,n,r,a,o,c,h;let d;if("key-box"===this.className){const a=e.key;d=_(a)&&""!==(null===(i=null==a?void 0:a.trim)||void 0===i?void 0:i.call(a))||l(a)?a:"",null===(n=this.children[t])||void 0===n||n.setContent(d,null===(r=s[t].key)||void 0===r?void 0:r.multiLine)}else if("value-box"===this.className){const i=e.value;d=_(i)&&""!==(null===(a=null==i?void 0:i.trim)||void 0===a?void 0:a.call(i))||l(i)?i:"",null===(o=this.children[t])||void 0===o||o.setContent(d,null===(c=s[t].value)||void 0===c?void 0:c.multiLine)}else"shape-box"===this.className&&(d=this._getShapeSvgOption(e,t),null===(h=this.children[t])||void 0===h||h.setContent(d))}))}_getContentColumnStyle(){var e,t;const i=this._option.getTooltipStyle();switch(this.className){case"shape-box":const n=null!==(t=null===(e=this._option.getTooltipActual())||void 0===e?void 0:e.content)&&void 0!==t?t:[];return Object.assign(Object.assign({},i.shapeColumn),"shape-box"!==this.className||n.some((e=>e.hasShape&&e.shapeType))?{}:{display:"none"});case"key-box":return i.keyColumn;case"value-box":return i.valueColumn}}_getShapeSvgOption(e,t){var i,n,r,s,a,o;const l=this._option.getTooltipStyle(),c=Object.assign(Object.assign({},l.shapeColumn),null===(i=l.shapeColumn.items)||void 0===i?void 0:i[t]),h=Object.assign(Object.assign({},l.keyColumn),null===(n=l.keyColumn.items)||void 0===n?void 0:n[t]);return{hasShape:e.hasShape,symbolType:e.shapeType,size:c.width,fill:null!==(r=e.shapeFill)&&void 0!==r?r:e.shapeColor,stroke:e.shapeStroke,lineWidth:e.shapeLineWidth,hollow:e.shapeHollow,marginTop:"calc((".concat(null!==(a=null!==(s=h.lineHeight)&&void 0!==s?s:h.fontSize)&&void 0!==a?a:"18px"," - ").concat(null!==(o=c.width)&&void 0!==o?o:"8px",") / 2)"),index:t}}}class AX extends uX{init(){this.product||(this.product=this.createElement("div",["container-box"])),this.shapeBox||this._initShapeBox(),this.keyBox||this._initKeyBox(),this.valueBox||this._initValueBox()}_initShapeBox(){const e=new kX(this.product,this._option,"shape-box",0);e.init(),this.shapeBox=e,this.children[e.childIndex]=e}_initKeyBox(){const e=new kX(this.product,this._option,"key-box",1);e.init(),this.keyBox=e,this.children[e.childIndex]=e}_initValueBox(){const e=new kX(this.product,this._option,"value-box",2);e.init(),this.valueBox=e,this.children[e.childIndex]=e}setStyle(e){super.setStyle(_e({},fX,e)),Object.values(this.children).forEach((e=>{e.setStyle()}))}setContent(){Object.values(this.children).forEach((e=>{e.setContent()}))}release(){super.release(),this.shapeBox=null,this.keyBox=null,this.valueBox=null}}class EX extends uX{init(){const e=this._option.getTooltipActual();this.product||(this.product=this.createElement("h2"));const{title:t}=e;(null==t?void 0:t.hasShape)&&(null==t?void 0:t.shapeType)?this.shape||this._initShape():this.shape&&this._releaseShape(),this.textSpan||this._initTextSpan()}_initShape(){const e=new xX(this.product,this._option,0);e.init(),this.shape=e,this.children[e.childIndex]=e}_releaseShape(){this.shape&&(this.shape.release(),delete this.children[this.shape.childIndex],this.shape=null)}_initTextSpan(){const e=new wX(this.product,this._option,1);e.init(),this.textSpan=e,this.children[e.childIndex]=e}setStyle(e){var t,i,n,r;const s=this._option.getTooltipStyle(),a=this._option.getTooltipActual(),{title:o}=a;super.setStyle(_e({},pX,s.title,e)),null===(t=this.shape)||void 0===t||t.setStyle({paddingRight:null===(i=s.shapeColumn.common)||void 0===i?void 0:i.marginRight},{hasShape:null==o?void 0:o.hasShape,symbolType:null==o?void 0:o.shapeType,size:null===(n=s.shapeColumn.common)||void 0===n?void 0:n.width,fill:null==o?void 0:o.shapeColor,hollow:null==o?void 0:o.shapeHollow}),null===(r=this.textSpan)||void 0===r||r.setStyle({color:"inherit"})}setContent(){var e,t,i,n,r,s;const a=this._option.getTooltipStyle(),o=this._option.getTooltipActual(),l=this._option.getTooltipAttributes(),{title:c}=o;this.init(),null===(e=this.shape)||void 0===e||e.setStyle(void 0,{hasShape:null==c?void 0:c.hasShape,symbolType:null==c?void 0:c.shapeType,size:null===(t=a.shapeColumn.common)||void 0===t?void 0:t.width,fill:null==c?void 0:c.shapeColor,hollow:null==c?void 0:c.shapeHollow}),null===(i=this.textSpan)||void 0===i||i.setStyle({color:"inherit"}),null===(n=this.textSpan)||void 0===n||n.setContent(null==c?void 0:c.value,null===(s=null===(r=l.title)||void 0===r?void 0:r.value)||void 0===s?void 0:s.multiLine)}release(){super.release(),this.shape=null,this.textSpan=null}}class TX extends uX{constructor(e,t,i,n){super(e,t,0),this.title=null,this.content=null,this._classList=i,this._id=n}setVisibility(e){if(super.setVisibility(e),!this.product)return;const{classList:t}=this.product;e?t.add("visible"):t.remove("visible")}init(){var e;const t=this._option.getTooltipActual();this.product||this._initPanel(this._classList,this._id);const{title:i}=t;!1!==(null==i?void 0:i.visible)&&x(null==i?void 0:i.value)?this.title||this._initTitle():this.title&&this._releaseTitle(),(null!==(e=t.content)&&void 0!==e?e:[]).length>0?this.content||this._initContent():this.content&&this._releaseContent()}_initPanel(e,t){const i=this.createElement("div",e,{left:"0",top:"0",pointerEvents:"none",padding:"12px",position:"absolute",zIndex:"99999999999999",fontFamily:"sans-serif",fontSize:"11px",borderRadius:"3px",borderStyle:"solid",lineHeight:"initial",background:"#fff",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.1)",maxWidth:"100wh",maxHeight:"100vh"},t);this.product=i}_initTitle(){const e=new EX(this.product,this._option,0);e.init(),this.title=e,this.children[e.childIndex]=e}_releaseTitle(){this.title&&(this.title.release(),delete this.children[this.title.childIndex],this.title=null)}_initContent(){const e=new AX(this.product,this._option,1);e.init(),this.content=e,this.children[e.childIndex]=e}_releaseContent(){this.content&&(this.content.release(),delete this.children[this.content.childIndex],this.content=null)}setStyle(){const e=this._option.getTooltipStyle();super.setStyle(_e({},gX,e.panel)),Object.values(this.children).forEach((e=>e.setStyle()))}setContent(){Object.values(this.children).forEach((e=>{e.setContent()}))}release(){super.release(),this.title=null,this.content=null}}class OX extends lX{getVisibility(){var e;return!!(null===(e=this.model)||void 0===e?void 0:e.getVisibility())}setVisibility(e){var t;e!==this.getVisibility()&&(null===(t=this.model)||void 0===t||t.setVisibility(e))}constructor(e,t){super(e,t),this.type=zY.dom,this._tooltipContainer=null==he?void 0:he.body,this._initStyle(),this.initEl()}initEl(){const e=this._component.getSpec(),t=e.parentElement;if(he&&t){for(let e=0;e<t.children.length;e++)if(t.children[e].classList.contains(jY)){this._container=t.children[e];break}this._container||(this._container=he.createElement("div"),this._container.style.position="relative",this._container.classList.add(jY),t.appendChild(this._container)),this.model=new TX(this._container,{valueToHtml:this._option.sanitize,getTooltipStyle:()=>this._domStyle,getTooltipActual:()=>this._tooltipActual,getTooltipAttributes:()=>this._attributes},[e.className],this.id)}}_removeTooltip(){var e;null===(e=this.model)||void 0===e||e.release(),this._container=null}_updateTooltip(e,t,i){var n,r;if(e&&this.model){t.changePositionOnly||(this._tooltipActual=i,this._initStyle(),this.model.initAll(),this.model.setStyle(),this.model.setContent()),this.setVisibility(e);let{x:s=0,y:a=0}=null!==(n=i.position)&&void 0!==n?n:{};const o=this.model.product;if(o){if(null===(r=this._cacheViewSpec)||void 0===r?void 0:r.updateElement){this._cacheViewSpec.updateElement(o,i,t);const e=this._getActualTooltipPosition(i,t,{width:o.offsetWidth,height:o.offsetHeight});s=e.x,a=e.y}o.style.transform="translate3d(".concat(s,"px, ").concat(a,"px, 0)")}}else this.setVisibility(e)}_initStyle(){this._domStyle=hX(this._attributes)}_getParentElement(e){var t;return null!==(t=this._container)&&void 0!==t?t:super._getParentElement(e)}isTooltipShown(){return this.getVisibility()}reInit(){super.reInit(),this._initStyle()}}const PX=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const r=[e.shape,...i.map((e=>null==e?void 0:e.shape))],s=[e.key,...i.map((e=>null==e?void 0:e.key))],a=[e.value,...i.map((e=>null==e?void 0:e.value))];return O(e,...i,{shape:r.every(P)?void 0:O({},...r),key:s.every(P)?void 0:O({},...s),value:a.every(P)?void 0:O({},...a)})},MX=e=>{const{width:t,height:i,wordBreak:n="break-word",textAlign:r,textBaseline:s,text:a}=e;return Array.isArray(a)?{width:t,height:i,wordBreak:n,textAlign:r,textBaseline:s,singleLine:!1,textConfig:z(a).map((t=>Object.assign(Object.assign({},e),{text:t})))}:{width:t,height:i,wordBreak:n,textAlign:r,textBaseline:s,singleLine:!1,textConfig:a.text}},IX={panel:{visible:!0,cornerRadius:[3,3,3,3],fill:"white",shadow:!0,shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.1)",shadowOffsetX:0,shadowOffsetY:4,shadowSpread:0,stroke:"white"},titleStyle:{value:{fill:"#4E5969",fontFamily:rG,fontSize:14,lineHeight:18,textAlign:"left",textBaseline:"middle"},spaceRow:6},contentStyle:{shape:{fill:"black",size:8,symbolType:"circle",spacing:6},key:{fill:"#4E5969",fontFamily:rG,fontSize:12,lineHeight:18,textAlign:"left",textBaseline:"middle",spacing:26},value:{fill:"#4E5969",fontFamily:rG,fontSize:12,lineHeight:18,textAlign:"right",textBaseline:"middle",spacing:0},spaceRow:6},padding:10,positionX:"right",positionY:"bottom",offsetX:10,offsetY:10,parentBounds:(new hl).setValue(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),autoCalculatePosition:!0,autoMeasure:!0,pickable:!1,childrenPickable:!1,zIndex:500},RX=["pointerX","pointerY","offsetX","offsetY","positionX","positionY","parentBounds"];s_(),hw(),RS(),KT(),fO();class DX extends qW{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},DX.defaultAttributes,e),t),this.name="tooltip"}render(){var e;const{visible:t,content:i,panel:n,keyWidth:r,valueWidth:s,hasContentShape:a,autoCalculatePosition:o,autoMeasure:l}=this.attribute;if(!t)return void this.hideAll();l&&DX.measureTooltip(this.attribute),o&&DX.calculateTooltipPosition(this.attribute);const c=nW(this.attribute.padding);this._tooltipPanel=this.createOrUpdateChild("tooltip-background",Object.assign({visible:!0},n),"rect"),this._tooltipTitleContainer=this.createOrUpdateChild("tooltip-title",{visible:!0,x:c[3],y:c[0]},"group");const h=DX.getTitleAttr(this.attribute);this._tooltipTitleSymbol=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-shape",O({symbolType:"circle"},h.shape,{visible:tG(h)&&tG(h.shape)}),"symbol"),"object"!=typeof h.value.text||null===h.value.text||"rich"!==h.value.text.type&&"html"!==h.value.text.type?h.value.multiLine?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({visible:tG(h)&&tG(h.value)},MX(h.value)),"richtext"):this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({text:null!==(e=h.value.text)&&void 0!==e?e:"",visible:tG(h)&&tG(h.value)},h.value),"text"):"rich"===h.value.text.type?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({visible:tG(h)&&tG(h.value)},MX(h.value)),"richtext"):"html"===h.value.text.type&&(this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({html:Object.assign(Object.assign({dom:h.value.text.text},oG),h.value),visible:tG(h)&&tG(h.value),width:h.value.width,height:h.value.height,wordBreak:h.value.wordBreak,textAlign:h.value.textAlign,textBaseline:h.value.textBaseline,singleLine:!1,textConfig:[]},h.value),"richtext"));const d=tG(h.shape)?h.shape.size+h.shape.spacing:0,{textAlign:u,textBaseline:p}=h.value,g=n.width-c[3]-c[0]-d;"center"===u?this._tooltipTitle.setAttribute("x",d+g/2):"right"===u||"end"===u?this._tooltipTitle.setAttribute("x",d+g):this._tooltipTitle.setAttribute("x",d),"bottom"===p?this._tooltipTitle.setAttribute("y",h.height):"middle"===p?this._tooltipTitle.setAttribute("y",h.height/2):this._tooltipTitle.setAttribute("y",0);const f=tG(h)?h.height+h.spaceRow:0;if(this._tooltipContent=this.createOrUpdateChild("tooltip-content",{visible:!0},"group"),this._tooltipContent.removeAllChild(),i&&i.length){this._tooltipContent.setAttribute("x",c[3]),this._tooltipContent.setAttribute("y",c[0]+f);let e=0;i.forEach(((t,i)=>{var n,o,l;const c=DX.getContentAttr(this.attribute,i);if(!tG(c))return;const h="tooltip-content-".concat(i),d=this._tooltipContent.createOrUpdateChild(h,{visible:!0,x:0,y:e},"group");let u=0;if(tG(c.shape)&&d.createOrUpdateChild("".concat(h,"-shape"),Object.assign({visible:!0,x:c.shape.size/2,y:c.shape.size/2+((null!==(n=Dd(c.key.lineHeight,c.key.fontSize))&&void 0!==n?n:c.key.fontSize)-c.shape.size)/2},c.shape),"symbol"),a&&(u+=c.shape.size+c.shape.spacing),tG(c.key)){let e;e=c.key.multiLine?d.createOrUpdateChild("".concat(h,"-key"),Object.assign(Object.assign({visible:!0},MX(c.key)),{textBaseline:"top"}),"richtext"):"object"!=typeof c.key.text||null===c.key.text||"rich"!==c.key.text.type&&"html"!==c.key.text.type?d.createOrUpdateChild("".concat(h,"-key"),Object.assign(Object.assign({visible:!0,text:null!==(o=c.key.text)&&void 0!==o?o:""},c.key),{textBaseline:"top"}),"text"):"rich"===c.key.text.type?d.createOrUpdateChild("".concat(h,"-value"),Object.assign(Object.assign({visible:!0},MX(c.key)),{textBaseline:"top"}),"richtext"):d.createOrUpdateChild("".concat(h,"-value"),{html:Object.assign(Object.assign({dom:c.key.text.text},oG),c.key)},"richtext");const{textAlign:t}=c.key;"center"===t?e.setAttribute("x",u+r/2):"right"===t||"end"===t?e.setAttribute("x",u+r):e.setAttribute("x",u),e.setAttribute("y",0),u+=r+c.key.spacing}if(tG(c.value)){let e;e=c.value.multiLine?d.createOrUpdateChild("".concat(h,"-value"),Object.assign(Object.assign({visible:!0},MX(c.value)),{textBaseline:"top"}),"richtext"):"object"!=typeof c.value.text||null===c.value.text||"rich"!==c.value.text.type&&"html"!==c.value.text.type?d.createOrUpdateChild("".concat(h,"-value"),Object.assign(Object.assign({visible:!0,text:null!==(l=c.value.text)&&void 0!==l?l:""},c.value),{textBaseline:"top"}),"text"):"rich"===c.value.text.type?d.createOrUpdateChild("".concat(h,"-value"),Object.assign(Object.assign({visible:!0},MX(c.value)),{textBaseline:"top"}),"richtext"):d.createOrUpdateChild("".concat(h,"-value"),{html:Object.assign({dom:c.value.text.text,container:"",width:30,height:30,style:{}},c.value)},"richtext");let t="right";x(c.value.textAlign)?t=c.value.textAlign:tG(c.key)||(t="left"),e.setAttribute("textAlign",t),"center"===t?e.setAttribute("x",u+s/2):"right"===t||"end"===t?e.setAttribute("x",u+s):e.setAttribute("x",u),u+=s,e.setAttribute("y",0),d.add(e)}e+=c.height+c.spaceRow}))}}setAttributes(e,t){const i=Object.keys(e);this.attribute.autoCalculatePosition&&i.every((e=>RX.includes(e)))?(this._mergeAttributes(e,i),P(this.attribute.panel.width)&&this.attribute.autoMeasure&&DX.measureTooltip(this.attribute),DX.calculateTooltipPosition(this.attribute),super.setAttributes({x:this.attribute.x,y:this.attribute.y},t)):super.setAttributes(e,t)}static calculateTooltipPosition(e){const{width:t=0,height:i=0}=e.panel,{offsetX:n,offsetY:r,pointerX:s,pointerY:a,positionX:o,positionY:l,parentBounds:c}=e;let h=s,d=a;return"left"===o?h-=t+n:"center"===o?h-=t/2:h+=n,"top"===l?d-=i+r:"middle"===l?d-=i/2:d+=r,h+t>c.x2&&(h-=t+n),d+i>c.y2&&(d-=i+r),h<c.x1&&(h=c.x1),d<c.y1&&(d=c.y1),e.x=h,e.y=d,e}static measureTooltip(e){const{content:t,contentStyle:i}=e,n=nW(e.padding),r=DX.getTitleAttr(e);let s=0,a=n[0]+n[2],o=0;const{value:l,shape:c}=r,{visible:h=!1,symbolType:d=""}=null!=c?c:{};if(x(l)&&"object"!=typeof r.value.text){const{width:e,height:t}=uG(l).quickMeasure(l.text);s=e,o=t}if(h&&fx[d]&&(s+=c.size+c.spacing,o=Math.max(c.size,o)),e.title&&(e.title.width=s,e.title.height=o),tG(r)&&(a+=o+r.spaceRow),t&&t.length){const n=[];if(t.forEach(((t,i)=>{const r=DX.getContentAttr(e,i);(t.key||t.value)&&tG(r)&&n.push([t,r])})),n.length){let r=!1;const o=[],l=[],c=[];n.forEach(((e,t)=>{let[s,h]=e;var d;const{key:u,value:p,shape:g,spaceRow:f}=h,m=tG(g),v=null!==(d=null==g?void 0:g.symbolType)&&void 0!==d?d:"",y=uG(u),b=uG(p);let _=0;if(tG(u)){const{width:e,height:t}=y.quickMeasure(u.text);l.push(e),_=Math.max(_,t)}if(tG(p)){const{width:e,height:t}=b.quickMeasure(p.text);c.push(e),_=Math.max(_,t)}m&&fx[v]&&(r=!0,o.push(g.size),_=Math.max(g.size,_)),s.height=_,a+=_,t<n.length-1&&(a+=null!=f?f:i.spaceRow)}));const h=o.length?Math.max(...o):0,d=l.length?Math.max(...l):0,u=c.length?Math.max(...c):0;s=Math.max(d+u+i.key.spacing+i.value.spacing+(r?h+i.shape.spacing:0),s),t.forEach((e=>{e.width=s})),e.hasContentShape=r,e.keyWidth=d,e.valueWidth=u}}return e.panel.width=s+n[1]+n[3],e.panel.height=a,e}static getTitleAttr(e){return PX({},DX.defaultAttributes.titleStyle,DX.defaultAttributes.title,e.titleStyle,e.title)}static getContentAttr(e,t){return PX({},DX.defaultAttributes.contentStyle,e.contentStyle,e.content[t])}}DX.defaultAttributes=IX;class LX extends lX{constructor(e,t){var i;super(e,t),this.type=zY.canvas,this._tooltipCanvasId=null===(i=this._chartOption.modeParams)||void 0===i?void 0:i.tooltipCanvasId}_initTooltipComponent(e){const t=this._getLayer(e);this._tooltipComponent=new DX({autoCalculatePosition:!1,autoMeasure:!1}),t.add(this._tooltipComponent)}_getLayer(e){if(this._layer)return this._layer;this._layer=e.createLayer(this._tooltipCanvasId);const t=this._layer.layerHandler.canvas.nativeCanvas;return t&&t.style&&(t.style.touchAction="none",t.style.pointerEvents="none"),this._layer}_removeTooltip(){this._layer&&this._layer.removeAllChild(),this._attributes=null}_updateTooltip(e,t,i){this._visible=e;const n=this._compiler.getStage();if(!n)return;if(!e)return void(this._tooltipComponent&&this._tooltipComponent.attribute.visible&&(this._tooltipComponent.hideAll(),this._tooltipComponent.setAttributes({visibleAll:!1})));this._tooltipComponent||this._initTooltipComponent(n);const r=null==i?void 0:i.position;t.changePositionOnly?x(r)&&this._tooltipComponent.setAttributes(r):this._tooltipComponent.setAttributes(Object.assign(Object.assign({},this._attributes),r)),this._tooltipComponent.attribute.visible||(this._tooltipComponent.showAll(),this._tooltipComponent.setAttributes({visibleAll:!0}))}isTooltipShown(){var e;return null===(e=this._tooltipComponent)||void 0===e?void 0:e.attribute.visibleAll}release(){var e;super.release(),null===(e=this._layer)||void 0===e||e.release()}}const jX=(e,t)=>x(t)?e.map((e=>t[e])):void 0,FX=(e,t)=>i=>e.every(((e,n)=>i[e]===(null==t?void 0:t[n]))),BX=e=>!P(e)&&(v(e)?e.length>0&&e.every(x):Object.keys(e).length>0);class NX{constructor(e){this._showTooltipByHandler=(e,t)=>{var i,n;return this.component.event.emit(Ir.tooltipShow,Object.assign(Object.assign({},t),{tooltipData:e,activeType:this.activeType,tooltip:this.component})),(null===(i=this.component.tooltipHandler)||void 0===i?void 0:i.showTooltip)&&x(e)?null!==(n=this.component.tooltipHandler.showTooltip(this.activeType,e,t))&&void 0!==n?n:$Y.success:$Y.failed},this.component=e}_preprocessDimensionInfo(e){const t=[];if(null==e||e.forEach((e=>{const i=Object.assign(Object.assign({},e),{data:e.data.filter((e=>{let{series:t}=e;var i,n;return!1!==(null===(n=null===(i=t.getSpec())||void 0===i?void 0:i.tooltip)||void 0===n?void 0:n.visible)}))});i.data.length>0&&t.push(i)})),t.length>0)return t}_getDimensionInfo(e){var t,i;let n;const r=this.component.getChart(),s=r.getCompiler().getStage().getLayer(void 0),a={x:e.event.viewX,y:e.event.viewY};if(s.globalTransMatrix.transformPoint({x:e.event.viewX,y:e.event.viewY},a),n=[...null!==(t=Er(r,a))&&void 0!==t?t:[],...null!==(i=mr(r,a))&&void 0!==i?i:[]],0===n.length)n=void 0;else if(n.length>1){const e=n.filter((e=>{var t;const i=e.axis;if(!An(i.getScale().type))return!1;let n;for(const r of null!==(t=null==i?void 0:i.getRegions())&&void 0!==t?t:[]){for(const e of r.getSeries())if("cartesian"===e.coordinate){n=e;break}if(x(n))break}return x(n)&&n.getDimensionField()[0]===n.fieldY[0]?"left"===i.getOrient()||"right"===i.getOrient():"bottom"===i.getOrient()||"top"===i.getOrient()}));n=e.length?e:n.slice(0,1)}return n}}class zX extends NX{constructor(){super(...arguments),this.activeType="dimension"}showTooltip(e,t,i){const n=Object.assign(Object.assign({},t),{dimensionInfo:this._preprocessDimensionInfo(e),changePositionOnly:i});return this._showTooltipByHandler(e,n)}shouldHandleTooltip(e,t){var i,n;const{tooltipInfo:r}=t;if(P(r))return!1;const s=null===(i=e.model)||void 0===i?void 0:i.tooltipHelper;return!!(null!==(n=null==s?void 0:s.activeType)&&void 0!==n?n:this.component.getSpec().activeType).includes("dimension")}getMouseEventData(e){var t;return{tooltipInfo:this._getDimensionInfo(e),ignore:[...null!==(t=this.component.getOption().getAllSeries())&&void 0!==t?t:[]].some((t=>{var i;const n=null===(i=t.tooltipHelper)||void 0===i?void 0:i.ignoreTriggerSet.dimension;return e.model&&(null==n?void 0:n.has(e.model))||e.mark&&(null==n?void 0:n.has(e.mark))}))}}}const HX=e=>x(e)&&!v(e),VX=e=>x(e)&&v(e);class UX extends NX{constructor(){super(...arguments),this.activeType="mark"}showTooltip(e,t,i){const{datum:n,series:r,dimensionInfo:s}=e,a=[{datum:[n],series:r}],o=Object.assign(Object.assign({},t),{dimensionInfo:this._preprocessDimensionInfo(s),changePositionOnly:i});return this._showTooltipByHandler(a,o)}shouldHandleTooltip(e,t){var i;const{tooltipInfo:n}=t;if(P(n))return!1;const r=null===(i=e.model)||void 0===i?void 0:i.tooltipHelper;return!!(null==r?void 0:r.activeType.includes("mark"))}getMouseEventData(e){var t;let i,n;if("series"===(null===(t=e.model)||void 0===t?void 0:t.modelType)){const t=e.model,r=t.tooltipHelper,s=null==r?void 0:r.activeTriggerSet.mark,a=null==r?void 0:r.ignoreTriggerSet.mark;(null==s?void 0:s.has(e.model))||(null==s?void 0:s.has(e.mark))?i={mark:e.mark,datum:e.datum,series:t,dimensionInfo:this._getDimensionInfo(e)}:((null==a?void 0:a.has(e.model))||(null==a?void 0:a.has(e.mark)))&&(n=!0)}return{tooltipInfo:i,ignore:n}}}class WX extends cF{_shouldMergeThemeToSpec(){return!1}_initTheme(e,t){const{spec:i,theme:n}=super._initTheme(e,t);return i.style=_e({},this._theme,i.style),{spec:i,theme:n}}}class GX extends dF{constructor(){super(...arguments),this.layoutZIndex=1,this.type=r.tooltip,this.name=r.tooltip,this.transformerConstructor=WX,this.specKey="tooltip",this.layoutType="none",this._alwaysShow=!1,this._eventList=[],this._isTooltipShown=!1,this._mountEvent=(e,t,i)=>{this.event.on(e,t,i),this._eventList.push({eventType:e,handler:i})},this._getMouseOutHandler=e=>t=>{var i,n;if(this._alwaysShow)return;if(!this._isTooltipShown&&!(null===(n=null===(i=this.tooltipHandler)||void 0===i?void 0:i.isTooltipShown)||void 0===n?void 0:n.call(i)))return;const r=de(this._option.mode),{clientX:s,clientY:a}=t.event;r&&this._isPointerOnTooltip(t)||r&&e&&this._isPointerInChart({x:s,y:a})||this._handleChartMouseOut(t)},this._handleChartMouseOut=e=>{this._alwaysShow||"none"!==this._spec.triggerOff&&(this._hideTooltipByHandler(Object.assign({},e)),this._cacheInfo=void 0)},this._handleMouseMove=e=>{if(this.tooltipHandler||this._initHandler(),this._processor||this._initProcessor(),this._alwaysShow)return;if(this._isPointerOnTooltip(e))return;const t=this._getMouseEventData(e),{tooltipInfo:{dimension:i},ignore:{mark:n,dimension:r}}=t;let s=!1,a=!1;s=this._showTooltipByMouseEvent("mark",t,e),s||(a=this._showTooltipByMouseEvent("dimension",t,e)),s||a||function(e){return P(e.mark)&&P(e.model)&&P(e.datum)}(e)||(n&&HX(this._cacheInfo)?s=this._showTooltipByMouseEvent("mark",t,e,!0):r&&VX(this._cacheInfo)?a=this._showTooltipByMouseEvent("dimension",t,e,!0):x(i)&&(a=this._showTooltipByMouseEvent("dimension",t,e))),s||a&&!P(i)||this._handleChartMouseOut(e)},this._showTooltipByMouseEvent=(e,t,i,n)=>{const r=this._processor[e];if(!r.shouldHandleTooltip(i,{tooltipInfo:t.tooltipInfo[e],ignore:t.ignore[e]}))return!1;let s;if(n)s=!r.showTooltip(this._cacheInfo,i,!0);else{const n=t.tooltipInfo[e],a=this._isSameAsCacheInfo(n);s=!r.showTooltip(n,i,a),s&&(this._cacheInfo=n)}s&&(this._isTooltipShown=!0);const a=this._option.globalInstance;return s&&cR.globalConfig.uniqueTooltip&&cR.hideTooltip(a.id),s},this._getMouseEventData=e=>{const t={tooltipInfo:{},ignore:{}};return Object.keys(this._processor).forEach((i=>{const{tooltipInfo:n,ignore:r}=this._processor[i].getMouseEventData(e);t.tooltipInfo[i]=n,t.ignore[i]=r})),t},this._hideTooltipByHandler=e=>{var t,i,n;if(!this._isTooltipShown&&!(null===(i=null===(t=this.tooltipHandler)||void 0===t?void 0:t.isTooltipShown)||void 0===i?void 0:i.call(t)))return $Y.success;if(this.event.emit(Ir.tooltipHide,Object.assign(Object.assign({},e),{source:Rr.chart,tooltip:this})),null===(n=this.tooltipHandler)||void 0===n?void 0:n.hideTooltip){const t=this.tooltipHandler.hideTooltip(e);return t||(this._isTooltipShown=!1),t}return $Y.failed}}static getSpecInfo(e){const t=e[this.specKey];if(!t)return null;if(!v(t))return[{spec:t,specPath:[this.specKey],type:r.tooltip}];const i=[];return t.forEach(((e,t)=>{i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.tooltip})})),i}isTooltipShown(){return this._isTooltipShown}changeRegions(e){}_getNeedClearVRenderComponents(){return[]}_registerEvent(){}_releaseEvent(){}onLayout(e){}onLayoutEnd(e){}onRender(e){}created(){super.created(),this._regions=this._option.getAllRegions(),this._initEvent()}release(){var e,t;super.release(),this._eventList.forEach((e=>{let{eventType:t,handler:i}=e;this.event.off(t,i)})),this._eventList=[],null===(t=null===(e=this.tooltipHandler)||void 0===e?void 0:e.release)||void 0===t||t.call(e),this._isTooltipShown=!1}beforeRelease(){this.event.emit(Ir.tooltipHide,{tooltip:this}),this.event.emit(Ir.tooltipRelease,{tooltip:this})}_initHandler(){var e,t,i;const n=null!==(e=this._spec.renderMode)&&void 0!==e?e:"html",r=this._option.globalInstance.getTooltipHandlerByUser();if(r)this.tooltipHandler=r;else{const e="canvas"===n?LX:OX,r="".concat(this._spec.className,"-").concat(null!==(t=this._option.globalInstance.id)&&void 0!==t?t:0,"-").concat(null!==(i=this._option.specIndex)&&void 0!==i?i:0);this.tooltipHandler=new e(r,this)}}_initProcessor(){this._processor={mark:new UX(this),dimension:new zX(this)}}_initEvent(){var e;if(this._option.disableTriggerEvent)return;const t=null!==(e=this._spec.trigger)&&void 0!==e?e:"hover",i=this._option.mode;"hover"===t?(this._mountEvent("pointermove",{level:Dr.chart},this._handleMouseMove),(ue(i)||pe(i))&&(this._mountEvent("pointerdown",{level:Dr.chart},this._handleMouseMove),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))),this._mountEvent("pointerout",{source:"canvas"},this._getMouseOutHandler(!1))):"click"===t&&(this._mountEvent("pointertap",{level:Dr.chart},this._handleMouseMove),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0)))}reInit(e){var t,i;super.reInit(e),this.tooltipHandler?null===(i=(t=this.tooltipHandler).reInit)||void 0===i||i.call(t):this._initHandler()}setAttrFromSpec(){var e;super.setAttrFromSpec();const t=this._spec;this._spec=Object.assign(Object.assign({},t),{visible:!x(t.visible)||t.visible,activeType:xR(t),renderMode:"html",trigger:x(t.trigger)?t.trigger:"hover",className:x(t.className)?t.className:"vchart-tooltip-element",enterable:!!x(t.enterable)&&t.enterable,transitionDuration:x(t.transitionDuration)?t.transitionDuration:150}),this._spec.triggerOff=x(t.triggerOff)?t.triggerOff:this._spec.trigger,x(t.renderMode)?this._spec.renderMode=t.renderMode:pe(this._option.mode)&&(this._spec.renderMode="canvas"),x(t.mark)&&(this._spec.mark=Object.assign(Object.assign({},S(t.mark)),{activeType:"mark"})),x(t.dimension)&&(this._spec.dimension=Object.assign(Object.assign({},S(t.dimension)),{activeType:"dimension"})),x(t.parentElement)?_(t.parentElement)?this._spec.parentElement=null===(e=null===globalThis||void 0===globalThis?void 0:globalThis.document)||void 0===e?void 0:e.getElementById(t.parentElement):this._spec.parentElement=t.parentElement:de(this._option.mode)&&(this._spec.parentElement=null==he?void 0:he.body),x(t.confine)?this._spec.confine=t.confine:this._spec.confine="canvas"===this._spec.renderMode}showTooltip(e,t){var i;if(this.tooltipHandler||this._initHandler(),this._processor||this._initProcessor(),!(null===(i=this.tooltipHandler)||void 0===i?void 0:i.showTooltip))return!1;const n=function(e,t,i,n){var r,s,a,o,l;const c=Object.assign({regionIndex:0},t),h=n.getRegionsInUserIdOrIndex(x(c.regionId)?[c.regionId]:void 0,x(c.regionIndex)?[c.regionIndex]:void 0)[0];if(!h)return"none";const d=h.getSeries(),u=[];d.forEach((t=>{var i,n,r,s,a,o,l,c;const h=t.getDimensionField(),d=t.getMeasureField(),p=t.getSeriesField(),g=x(p)?e[p]:void 0,f=x(p)&&null!==(s=null===(r=null===(n=null===(i=t.getViewDataStatistics)||void 0===i?void 0:i.call(t))||void 0===n?void 0:n.latestData[p])||void 0===r?void 0:r.values)&&void 0!==s?s:[],m=jX(h,e);let v=jX(d,e);const y=BX(v),b=!y&&x(p)&&P(g)&&f.length>0;if("cartesian"===t.coordinate){const e=t,i=h.map(((e,t)=>[e,t])).filter((e=>{let[,t]=e;return P(null==m?void 0:m[t])}));let n=[null!=m?m:[]];i.length>0&&i.forEach((e=>{let[i,r]=e;var s,a,o,l;const c=null!==(l=null===(o=null===(a=null===(s=t.getViewDataStatistics)||void 0===s?void 0:s.call(t))||void 0===a?void 0:a.latestData[i])||void 0===o?void 0:o.values)&&void 0!==l?l:[],h=[];n.forEach((e=>{c.forEach((t=>{var i;const n=null!==(i=null==e?void 0:e.slice())&&void 0!==i?i:[];n[r]=t,h.push(n)}))})),n=h})),n.forEach((i=>{var n,r;if(b){const r=null===(n=e.getViewData())||void 0===n?void 0:n.latestData.filter(FX(h,i));f.forEach((n=>{const s=r.find((e=>e[p]===n));if(v=jX(d,s),!BX(v))return;const a=e.dataToPosition(s);P(a)||isNaN(a.x)||isNaN(a.y)||u.push({pos:a,data:{dimensionFields:h,dimensionData:i,measureFields:d,measureData:v,hasMeasureData:y,groupField:p,groupData:n},series:t})}))}else{const n=null===(r=e.getViewData())||void 0===r?void 0:r.latestData.find(FX(h,i));if(!y&&(v=jX(d,n),!BX(v)))return;const s=e.dataToPosition(n);if(P(s)||isNaN(s.x)||isNaN(s.y))return;u.push({pos:s,data:{dimensionFields:h,dimensionData:i,measureFields:d,measureData:v,hasMeasureData:y,groupField:p,groupData:g},series:t})}}))}else if("polar"===t.coordinate)if(t.type===Bt.pie){const e=t,i=null===(a=e.getViewData())||void 0===a?void 0:a.latestData.find(FX(h,m));if(!y&&(v=jX(d,i),!BX(v)))return;const n=e.dataToCentralPosition(i);if(P(n)||isNaN(n.x)||isNaN(n.y))return;u.push({pos:n,data:{dimensionFields:h,dimensionData:m,measureFields:d,measureData:v,hasMeasureData:y,groupField:p,groupData:g},series:t})}else{const e=t;if(b){const i=(null===(o=e.getViewData())||void 0===o?void 0:o.latestData.filter(FX(h,m))).find((e=>e[p]===g));f.forEach((n=>{if(v=jX(d,i),!BX(v))return;const r=e.dataToPosition(i);P(r)||isNaN(r.x)||isNaN(r.y)||u.push({pos:r,data:{dimensionFields:h,dimensionData:m,measureFields:d,measureData:v,hasMeasureData:y,groupField:p,groupData:n},series:t})}))}else{const i=null===(l=e.getViewData())||void 0===l?void 0:l.latestData.find(FX(h,m));if(!y&&(v=jX(d,i),!BX(v)))return;const n=e.dataToPosition(i);if(P(n)||isNaN(n.x)||isNaN(n.y))return;u.push({pos:n,data:{dimensionFields:h,dimensionData:m,measureFields:d,measureData:v,hasMeasureData:y,groupField:p,groupData:g},series:t})}}else if("geo"===t.coordinate){const e=t,i=null===(c=e.getViewData())||void 0===c?void 0:c.latestData.find(FX(h,m));if(!y&&(v=jX(d,i),!BX(v)))return;const n=e.dataToPosition(i);if(P(n)||isNaN(n.x)||isNaN(n.y))return;u.push({pos:n,data:{dimensionFields:h,dimensionData:m,measureFields:d,measureData:v,hasMeasureData:y,groupField:p,groupData:g},series:t})}}));const p=null!==(r=c.activeType)&&void 0!==r?r:u.length>1?"dimension":"mark",g=h.getLayoutStartPoint(),f=h.getLayoutRect(),m=n.globalInstance.getContainer(),v=Object.assign({x:0,y:0},m?Eo(m):{}),y=e=>{var t;const{dimensionFields:i,dimensionData:n,measureFields:r,measureData:s,groupField:a,groupData:o}=e.data,l=null===(t=e.series.getViewData())||void 0===t?void 0:t.latestData.find((e=>FX(i,n)(e)&&FX(r,s)(e)&&(P(a)||FX([a],[o])(e))));return l},b=e=>{var t,i;const n=(e=>({x:Math.min(Math.max(e.x,0),f.width),y:Math.min(Math.max(e.y,0),f.height)}))(e),r=null!==(t=c.x)&&void 0!==t?t:g.x+n.x,s=null!==(i=c.y)&&void 0!==i?i:g.y+n.y;return{canvasX:r,canvasY:s,clientX:v.x+r,clientY:v.y+s}};if("dimension"===p){const t=u[0];if(!t)return"none";const r=new Map;u.forEach((e=>{var t;r.has(e.series)||r.set(e.series,[]),null===(t=r.get(e.series))||void 0===t||t.push(e)}));const o=[{value:e[t.data.dimensionFields[0]],data:[...r.keys()].map((e=>{var t,i;return{series:e,datum:null!==(i=null===(t=r.get(e))||void 0===t?void 0:t.map((e=>y(e))))&&void 0!==i?i:[]}}))}],l={changePositionOnly:!1,dimensionInfo:o,chart:null!==(s=n.globalInstance.getChart())&&void 0!==s?s:void 0,datum:void 0,model:void 0,source:Rr.chart,event:b({x:u.reduce(((e,t)=>e+t.pos.x),0)/u.length,y:u.reduce(((e,t)=>e+t.pos.y),0)/u.length}),item:void 0,itemMap:new Map};null===(a=null==i?void 0:i.showTooltip)||void 0===a||a.call(i,p,o,l);const c=n.globalInstance;return cR.globalConfig.uniqueTooltip&&cR.hideTooltip(c.id),p}if("mark"===p){const t=u[0];if(!t)return"none";const r=Object.assign(Object.assign({},y(t)),e),s={changePositionOnly:!1,chart:null!==(o=n.globalInstance.getChart())&&void 0!==o?o:void 0,datum:r,model:t.series,source:Rr.chart,event:b(t.pos),item:void 0,itemMap:new Map};null===(l=null==i?void 0:i.showTooltip)||void 0===l||l.call(i,p,[{datum:[r],series:t.series}],s);const a=n.globalInstance;return cR.globalConfig.uniqueTooltip&&cR.hideTooltip(a.id),p}return"none"}(e,t,this.tooltipHandler,this._option);return"none"!==n&&(this._alwaysShow=!!(null==t?void 0:t.alwaysShow)),n}hideTooltip(){const e={changePositionOnly:!1,item:void 0,datum:void 0,source:Rr.chart};return this._alwaysShow=!1,!this._hideTooltipByHandler(e)}_isSameAsCacheInfo(e){if(e===this._cacheInfo)return!0;if(P(this._cacheInfo)||P(e))return!1;if(VX(e)){if(HX(this._cacheInfo))return!1;const t=this._cacheInfo;return t.length===e.length&&e.every(((e,i)=>En(e,t[i])))}if(VX(this._cacheInfo))return!1;const t=this._cacheInfo;return(null==e?void 0:e.datum)===t.datum&&(null==e?void 0:e.mark)===t.mark&&(null==e?void 0:e.series)===t.series}_isPointerInChart(e){const t=this._option.globalInstance;if(!t.getChart())return!1;const{x:i,y:n}=e,r=t.getCanvas(),{x:s,y:a,width:o,height:l}=r.getBoundingClientRect();return i>=s&&i<=s+o&&n>=a&&n<=a+l}_isPointerOnTooltip(e){var t,i;if(this._spec.enterable&&"html"===this._spec.renderMode){const{event:n}=e;let r;if(x(n.nativeEvent)){const e=n.nativeEvent;r=e.relatedTarget,e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0])}else r=n.relatedTarget;const s=null===(i=null===(t=this.tooltipHandler)||void 0===t?void 0:t.getTooltipContainer)||void 0===i?void 0:i.call(t);if(x(s)&&x(r)&&function(e,t){let i=e.parentNode;for(;null!==i;){if(i===t)return!0;i=i.parentNode}return!1}(r,s))return!0}return!1}getVisible(){return!1!==this._spec.visible}}GX.type=r.tooltip,GX.transformerConstructor=WX,GX.specKey="tooltip";class KX extends qW{constructor(){super(...arguments),this.name="crosshair"}render(){this.renderCrosshair(this)}}s_(),HE();class YX extends KX{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},YX.defaultAttributes,e))}renderCrosshair(e){const{start:t,end:i,lineStyle:n}=this.attribute;return e.createOrUpdateChild("crosshair-line",Object.assign({points:[t,i]},n),"line")}setLocation(e){const{start:t,end:i}=e;this.setAttributes({start:t,end:i})}}YX.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},s_(),hw();class XX extends KX{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},XX.defaultAttributes,e))}renderCrosshair(e){const{start:t,end:i,rectStyle:n}=this.attribute;return e.createOrUpdateChild("crosshair-rect",Object.assign({x:t.x,y:t.y,width:i.x-t.x,height:i.y-t.y},n),"rect")}setLocation(e){const{start:t,end:i}=e;this.setAttributes({start:t,end:i})}}var qX;XX.defaultAttributes={rectStyle:{fill:"#b2bacf",opacity:.2}},function(e){e[e.ALL=3]="ALL",e[e.HORIZONTAL=2]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL",e[e.NONE=0]="NONE"}(qX||(qX={}));var ZX=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const QX={x:["top","bottom"],y:["left","right"],category:["angle"],value:["radius"]};class $X extends dF{get enableRemain(){return"none"===this.triggerOff}constructor(e,t){super(e,t),this.specKey="crosshair",this.layoutType="none",this.gridZIndex=zw.CrossHair_Grid,this.labelZIndex=zw.CrossHair,this.trigger="hover",this.triggerOff="hover",this._handleEvent=Nr((e=>{if(!this._option)return;const{event:t}=e,i=this._option.getCompiler().getStage().getLayer(void 0),n={x:t.viewX,y:t.viewY};i.globalTransMatrix.transformPoint({x:t.viewX,y:t.viewY},n);const r=n.x-this.getLayoutStartPoint().x,s=n.y-this.getLayoutStartPoint().y;this.showDefault=!1,this._layoutCrosshair(r,s)}),10),this.enable=!0,this.showDefault=!0}_getLimitBounds(){var e,t;if(!this._limitBounds){const{width:i,height:n}=null!==(t=null===(e=this._option.globalInstance.getChart())||void 0===e?void 0:e.getCanvasRect())&&void 0!==t?t:{width:0,height:0};this._limitBounds={x1:0,y1:0,x2:i,y2:n}}return this._limitBounds}_showDefaultCrosshair(){this.showDefault&&this._showDefaultCrosshairBySpec()}setAttrFromSpec(){super.setAttrFromSpec(),this._parseCrosshairSpec()}created(){super.created(),this._initEvent()}_compareSpec(e,t){const i=super._compareSpec(e,t);return i.reMake||ty(t,e)||(i.reRender=!0,i.reMake=!0),i}_initEvent(){if(this._option.disableTriggerEvent)return;const e=this._getTriggerEvent();if(e){const{in:t,out:i}=e;z(t).forEach(((e,t)=>this._registerEvent(e,v(i)?i[t]:i)))}}_registerEvent(e,t){var i=this;this.event.on(e,{source:Rr.chart},this._handleEvent),this.event.on(t,{level:Dr.chart},(function(){i.enableRemain||i.hide()}))}_eventOff(e){this.event.off(e,this._handleEvent)}updateLayoutAttribute(){this._limitBounds=null,this._showDefaultCrosshair()}_getTriggerEvent(){const{mode:e=n["desktop-browser"]}=this._option,t=function(e){return e===n["desktop-browser"]||e===n["desktop-miniApp"]?{click:"pointertap",hover:"pointermove",hoverOut:"pointerleave",clickOut:"pointerleave"}:ue(e)||pe(e)?{click:"tap",hover:["pointerdown","pointermove"],hoverOut:"pointerleave",clickOut:"pointerleave"}:null}(e);if(t){const e=this.trigger||"hover",i=e=>"click"===e?"clickOut":"hoverOut";if(v(e)){let n=[],r=[];return e.forEach((e=>{n=n.concat(t[e]),r=r.concat(t[i(e)])})),{in:n,out:r}}return{in:t[e],out:t[i(e)]}}return null}_getAxisInfoByField(e){var t,i;const n=null===(i=null===(t=this._option)||void 0===t?void 0:t.getComponentsByKey)||void 0===i?void 0:i.call(t,"axes");if(!(null==n?void 0:n.length))return null;let r=Br(this._spec,"".concat(e,"Field.bindingAxesIndex"));if(r||(r=[],n.forEach(((t,i)=>{QX[e].includes(t.getOrient())&&r.push(i)}))),!r.length)return null;const s=new Map;let a=1/0,o=1/0,l=-1/0,c=-1/0;const{x:h,y:d}=this.getLayoutStartPoint();return r.forEach((e=>{a=1/0,o=1/0,l=-1/0,c=-1/0;const t=n.find((t=>t.getSpecIndex()===e));t&&(t.getRegions().forEach((e=>{const{x:t,y:i}=e.getLayoutStartPoint();a=Math.min(a,t-h),o=Math.min(o,i-d),l=Math.max(l,t+e.getLayoutRect().width-h),c=Math.max(c,i+e.getLayoutRect().height-d)})),s.set(e,{x1:a,y1:o,x2:l,y2:c,axis:t}))})),s}changeRegions(e){}onLayoutEnd(e){const t=this._regions[0];this.setLayoutRect(t.getLayoutRect()),this.setLayoutStartPosition(t.getLayoutStartPoint()),super.onLayoutEnd(e)}onRender(e){}_releaseEvent(){const e=this._getTriggerEvent();if(e){const{in:t,out:i}=e;v(t)?t.forEach((e=>this._eventOff(e))):this._eventOff(t),v(i)?i.forEach((e=>this._eventOff(e))):this._eventOff(i)}}_firstSeries(){for(let e=0;e<this._regions.length;e++){const t=this._regions[e].getSeries();for(let e=0;e<t.length;e++){const i=t[e];if(i)return i}}return null}_parseCrosshairSpec(){this._parseFieldInfo();const{trigger:e,triggerOff:t,labelZIndex:i,gridZIndex:n}=this._spec;e&&(this.trigger=e),this.triggerOff=t||this.trigger,void 0!==i&&(this.labelZIndex=i),void 0!==n&&(this.gridZIndex=n)}_parseField(e,t){var i,n,r,s;const a={},{line:o={},label:c={},visible:h}=e;a.visible=h,a.type=o.type||"line";const d=o.style||{},{strokeOpacity:u,fillOpacity:p,opacity:g,stroke:f,fill:v,lineWidth:y}=d,b=ZX(d,["strokeOpacity","fillOpacity","opacity","stroke","fill","lineWidth"]),_="line"===a.type;let x=_?u:p;if(l(g)&&(x=(null!=x?x:1)*g),a.style=!1===(null==o?void 0:o.visible)?{visible:!1}:Object.assign({opacity:x,pickable:!1,visible:!0},b),_)a.style.stroke=f||v,a.style.lineWidth=Br(o,"width",y||2);else{a.style.fill=v||f,(null===(r=null===(n=null===(i=this._spec[t])||void 0===i?void 0:i.line)||void 0===n?void 0:n.style)||void 0===r?void 0:r.stroke)&&(a.style.stroke=this._spec[t].line.style.stroke);const e=Br(o,"width");if("string"==typeof e){const t=parseInt(e.substring(0,e.length-1),10)/100;a.style.sizePercent=t}else"number"!=typeof e&&"function"!=typeof e||(a.style.size=e)}const S=c.labelBackground||{},w=c.style||{},C=S.style||{},{fill:k="rgba(47, 59, 82, 0.9)",stroke:A,outerBorder:E}=C,T=ZX(C,["fill","stroke","outerBorder"]);return a.label=(null==c?void 0:c.visible)?{visible:!0,formatMethod:c.formatMethod,minWidth:S.minWidth,maxWidth:S.maxWidth,padding:S.padding,textStyle:Object.assign(Object.assign({fontSize:14,pickable:!1},w),{fill:null!==(s=w.fill)&&void 0!==s?s:"#fff",stroke:Br(w,"stroke")}),panel:(m(null==S?void 0:S.visible)?null==S?void 0:S.visible:S)?Object.assign({visible:!0,pickable:!1,fill:k,stroke:A,outerBorder:Object.assign({stroke:k,distance:0,lineWidth:3},E)},T):{visible:!1},zIndex:this.labelZIndex,childrenPickable:!1,pickable:!1}:{visible:!1},a}_filterAxisByPoint(e,t,i){return e&&e.forEach((n=>{const r=n.axis;if(function(e,t,i){return e.x1>t||e.x2<t||e.y1>i||e.y2<i}(n,t,i)&&e.delete(r.getSpecIndex()),r.type.startsWith("polarAxis")){const n=r.getCenter(),s=r.getInnerRadius(),a=r.getOuterRadius(),o=nr.distancePP({x:t,y:i},n);(o>a||o<s)&&e.delete(r.getSpecIndex())}})),e}}$X.specKey="crosshair";class JX extends $X{static getSpecInfo(e){const t=e[this.specKey];if(P(t))return;if(!v(t))return t.xField||t.yField?[{spec:t,specPath:[this.specKey],type:r.cartesianCrosshair}]:void 0;const i=[];return t.forEach(((e,t)=>{(e.xField||e.yField)&&i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.cartesianCrosshair})})),i}constructor(e,t){super(e,t),this.type=r.cartesianCrosshair,this.name=r.cartesianCrosshair,this._currValueX=new Map,this._currValueY=new Map}_showDefaultCrosshairBySpec(){const{xField:e,yField:t}=this._spec;if((null==e?void 0:e.visible)&&e.defaultSelect){const{axisIndex:t,datum:i}=e.defaultSelect;this._defaultCrosshair(t,i,1)}if((null==t?void 0:t.visible)&&t.defaultSelect){const{axisIndex:e,datum:i}=t.defaultSelect;this._defaultCrosshair(e,i,2)}}_defaultCrosshair(e,t,i){const n=this._option.getComponentsByKey("axes").find((t=>t.getSpecIndex()===e));n&&(1===i?(this._currValueX.clear(),this._currValueX.set(e,{axis:n,v:t})):(this._currValueY.clear(),this._currValueY.set(e,{axis:n,v:t})),this.layoutByValue(i))}_findAllAxisContains(e,t){const i=this._getAxisInfoByField("x"),n=this._getAxisInfoByField("y");return{xAxisMap:this._filterAxisByPoint(i,e,t),yAxisMap:this._filterAxisByPoint(n,e,t)}}_getValueAt(e,t){let i=e.getScale().invert(t);return Cn(e.getScale().type)&&L(+i)&&(i=(+i).toFixed(2)),i}clearAxisValue(){this._currValueX.clear(),this._currValueY.clear()}setAxisValue(e,t){vr(t.getOrient())?this._currValueX.set(t.getSpecIndex(),{v:e,axis:t}):this._currValueY.set(t.getSpecIndex(),{v:e,axis:t})}_getAllAxisValues(e,t,i,n){let r=!1;return e.forEach((e=>{An(e.axis.getScale().type)&&(r?this.enable=!1:r=!0)})),!!this.enable&&(e.forEach(((e,r)=>{const s=e.axis;i.set(r,{v:this._getValueAt(s,t-(n?s.getLayoutStartPoint().x-this.getLayoutStartPoint().x:s.getLayoutStartPoint().y-this.getLayoutStartPoint().y)),axis:s})})),!0)}_layoutCrosshair(e,t){const{xAxisMap:i,yAxisMap:n}=this._findAllAxisContains(e,t);if(i&&0===i.size||n&&0===n.size){if(this.enableRemain)return;this.hide()}else this._currValueX.clear(),this._currValueY.clear(),i&&i.size&&this._getAllAxisValues(i,e,this._currValueX,!0),n&&n.size&&this._getAllAxisValues(n,t,this._currValueY,!1),this.layoutByValue(3)}hide(){this._xCrosshair&&this._xCrosshair.hideAll(),this._xTopLabel&&this._xTopLabel.hideAll(),this._xBottomLabel&&this._xBottomLabel.hideAll(),this._yCrosshair&&this._yCrosshair.hideAll(),this._yLeftLabel&&this._yLeftLabel.hideAll(),this._yRightLabel&&this._yRightLabel.hideAll()}layoutByValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;var t,i,n,r;if(!this.enable)return;const s=this._firstSeries();if(!s)return;let a={height:0,leftPos:0,rightPos:0,topPos:0,x:0,bottom:{visible:!1,text:"",dx:0,dy:0},top:{visible:!1,text:"",dx:0,dy:0},visible:!1,axis:null},o={width:0,leftPos:0,topPos:0,bottomPos:0,y:0,left:{visible:!1,text:"",dx:0,dy:0},right:{visible:!1,text:"",dx:0,dy:0},visible:!1,axis:null};const l=(e,t)=>{t.forEach((t=>{let{axis:i}=t;i.getRegions().forEach((t=>{e.x1=Math.min(e.x1,t.getLayoutStartPoint().x),e.y1=Math.min(e.y1,t.getLayoutStartPoint().y),e.x2=Math.max(e.x2,t.getLayoutStartPoint().x+t.getLayoutRect().width),e.y2=Math.max(e.y2,t.getLayoutStartPoint().y+t.getLayoutRect().height)}))}))};let c=0,h=0;if(this._currValueX.size){const e=Array.from(this._currValueX.values())[0];c=e.axis.getScale().scale(e.v)+e.axis.getLayoutStartPoint().x-this.getLayoutStartPoint().x,a.axis=e.axis}if(this._currValueY.size){const e=Array.from(this._currValueY.values())[0];h=e.axis.getScale().scale(e.v)+e.axis.getLayoutStartPoint().y-this.getLayoutStartPoint().y,o.axis=e.axis}a.visible=!!this._currValueX.size&&Number.isFinite(c),o.visible=!!this._currValueY.size&&Number.isFinite(h);const d={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0},u={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};let p;l(d,this._currValueX),l(u,this._currValueY);let g,f=0,m=0;if(this._xHair&&this._currValueX.forEach((e=>{let{axis:t,v:i}=e;var n;i=null!=i?i:"";const r=t.getScale();if(An(r.type))p=r.bandwidth(),0===p&&r.step&&(f=r.step());else if(Cn(r.type)){const e=s.fieldX[0],t=s.fieldX2,n=rF(s.getViewData().latestData,+i,e,t);if(n){const r=s.dataToPositionX(n);t?(p=Math.abs(r-s.dataToPositionX1(n)),i="".concat(n[e]," ~ ").concat(n[t])):p=1,c=r}}if(null===(n=this._xHair.label)||void 0===n?void 0:n.visible){const e=Zj(t.getSpec());"bottom"===t.getOrient()?(a.bottom.visible=!0,a.bottom.text=i,a.bottom.dx=0,a.bottom.dy=e):"top"===t.getOrient()&&(a.top.visible=!0,a.top.text=i,a.top.dx=0,a.top.dy=-e)}})),this._yHair&&this._currValueY.forEach((e=>{let{axis:t,v:i}=e;var n;i=null!=i?i:"";const r=t.getScale();if(An(r.type))g=r.bandwidth(),0===g&&r.step&&(m=r.step());else if(Cn(r.type)){const e=s.fieldY[0],t=s.fieldY2,n=rF(s.getViewData().latestData,+i,e,t);if(n){const r=s.dataToPositionY(n);t?(g=Math.abs(r-s.dataToPositionY1(n)),i="".concat(n[e]," ~ ").concat(n[t])):g=1,h=r}}if(null===(n=this._yHair.label)||void 0===n?void 0:n.visible){const e=Zj(t.getSpec());"left"===t.getOrient()?(o.left.visible=!0,o.left.text=i,o.left.dx=-e,o.left.dy=0):"right"===t.getOrient()&&(o.right.visible=!0,o.right.text=i,o.right.dx=e,o.right.dy=0)}})),this.enableRemain&&!a.visible&&x(this._cacheXCrossHairInfo))a=this._cacheXCrossHairInfo;else if(a.leftPos=d.x1,a.rightPos=d.x2,a.topPos=d.y1,a.height=d.y2-d.y1,a.x=c+this.getLayoutStartPoint().x,null===(i=null===(t=this._xHair)||void 0===t?void 0:t.label)||void 0===i?void 0:i.formatMethod){const{top:e,bottom:t}=a;t.visible&&(t.text=this._xHair.label.formatMethod(t.text,"bottom")),e.visible&&(e.text=this._xHair.label.formatMethod(e.text,"top"))}if(this.enableRemain&&!o.visible&&x(this._cacheYCrossHairInfo))o=this._cacheYCrossHairInfo;else if(o.leftPos=u.x1,o.topPos=u.y1,o.bottomPos=u.y2,o.width=u.x2-u.x1,o.y=h+this.getLayoutStartPoint().y,null===(r=null===(n=this._yHair)||void 0===n?void 0:n.label)||void 0===r?void 0:r.formatMethod){const{left:e,right:t}=o;e.visible&&(e.text=this._yHair.label.formatMethod(e.text,"left")),t.visible&&(t.text=this._yHair.label.formatMethod(t.text,"right"))}e&&(this._layoutHorizontal(o,null!=g?g:0,m),this._layoutVertical(a,null!=p?p:0,f)),this.enableRemain&&(this._cacheXCrossHairInfo=Object.assign(Object.assign({},a),{_isCache:!0}),this._cacheYCrossHairInfo=Object.assign(Object.assign({},o),{_isCache:!0}))}_layoutVertical(e,t,i){var n,r;if(e._isCache&&this.enableRemain||!this._xHair)return;const{x:s,topPos:a,height:o,top:l,bottom:c,visible:h}=e;if(h){const h=this._xHair.type;let d;if("line"===h)d={start:{x:s+t/2,y:a},end:{x:s+t/2,y:a+o}};else if("rect"===h){const n=this._getRectSize(this._xHair,t,e.axis),{leftPos:r,rightPos:l}=e;d={start:{x:Math.max(s-n/2-i/2,r),y:a},end:{x:Math.min(s+t+n/2+i/2,l),y:a+o}}}if(this._updateCrosshair("x",h,d),l.visible){const e=Object.assign(Object.assign(Object.assign({x:s+t/2,y:a},l),this._xHair.label),{textStyle:Object.assign(Object.assign({},null===(n=this._xHair.label)||void 0===n?void 0:n.textStyle),{textAlign:"center",textBaseline:"bottom"}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._xTopLabel,e,(e=>{e.name="crosshair-x-top-label",this._xTopLabel=e}))}else this._xTopLabel&&this._xTopLabel.hideAll();if(c.visible){const e=Object.assign(Object.assign(Object.assign({x:s+t/2,y:a+o},c),this._xHair.label),{textStyle:Object.assign(Object.assign({},null===(r=this._xHair.label)||void 0===r?void 0:r.textStyle),{textAlign:"center",textBaseline:"top"}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._xBottomLabel,e,(e=>{e.name="crosshair-x-bottom-label",this._xBottomLabel=e}))}else this._xBottomLabel&&this._xBottomLabel.hideAll()}}_layoutHorizontal(e,t,i){var n,r;if(e._isCache&&this.enableRemain||!this._yHair)return;const{leftPos:s,width:a,y:o,left:l,right:c,visible:h}=e;if(h){const h=this._yHair.type;let d;if("line"===h)d={start:{x:s,y:o+t/2},end:{x:s+a,y:o+t/2}};else if("rect"===h){const n=this._getRectSize(this._yHair,t,e.axis),{topPos:r,bottomPos:l}=e;d={start:{x:s,y:Math.max(o-n/2-i/2,r)},end:{x:s+a,y:Math.min(o+t+n/2+i/2,l)}}}if(this._updateCrosshair("y",h,d),l.visible){const e=Object.assign(Object.assign(Object.assign({x:s,y:o+t/2},l),this._yHair.label),{textStyle:Object.assign(Object.assign({},null===(n=this._yHair.label)||void 0===n?void 0:n.textStyle),{textAlign:"right",textBaseline:"middle"}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._yLeftLabel,e,(e=>{e.name="crosshair-y-left-label",this._yLeftLabel=e}))}else this._yLeftLabel&&this._yLeftLabel.hideAll();if(c.visible){const e=Object.assign(Object.assign(Object.assign({x:s+a,y:o+t},c),this._yHair.label),{textStyle:Object.assign(Object.assign({},null===(r=this._yHair.label)||void 0===r?void 0:r.textStyle),{textAlign:"left",textBaseline:"middle"}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._yRightLabel,e,(e=>{e.name="crosshair-y-right-label",this._yRightLabel=e}))}else this._yRightLabel&&this._yRightLabel.hideAll()}}_getRectSize(e,t,i){var n,r,s;let a=0;if(null===(n=e.style)||void 0===n?void 0:n.sizePercent)a=(e.style.sizePercent-1)*t;else if("number"==typeof(null===(r=e.style)||void 0===r?void 0:r.size))a=e.style.size-t;else if("function"==typeof(null===(s=e.style)||void 0===s?void 0:s.size)){const n=i.getLayoutRect();a=e.style.size(n,i)-t}return a}_parseFieldInfo(){const{xField:e,yField:t}=this._spec;e&&e.visible&&(this._xHair=this._parseField(e,"xField")),t&&t.visible&&(this._yHair=this._parseField(t,"yField"))}_updateCrosshair(e,t,i){const n=this.getContainer();let r,s;"x"===e?(r=this._xCrosshair,s=this._xHair.style):(r=this._yCrosshair,s=this._yHair.style),r?r.setAttributes(i):("line"===t?r=new YX(Object.assign(Object.assign({},i),{lineStyle:s,zIndex:this.gridZIndex+1,disableTriggerEvent:this._option.disableTriggerEvent})):"rect"===t&&(r=new XX(Object.assign(Object.assign({},i),{rectStyle:s,zIndex:this.gridZIndex,disableTriggerEvent:this._option.disableTriggerEvent}))),null==n||n.add(r),"x"===e?this._xCrosshair=r:this._yCrosshair=r)}_updateCrosshairLabel(e,t,i){const n=this.getContainer();e?e.setAttributes(t):(i(e=new mG(t)),null==n||n.add(e)),nF(e,this._getLimitBounds())}_getNeedClearVRenderComponents(){return[this._xCrosshair,this._xTopLabel,this._xBottomLabel,this._yCrosshair,this._yLeftLabel,this._yRightLabel]}}JX.specKey="crosshair",JX.type=r.cartesianCrosshair;s_(),sA();class eq extends KX{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},eq.defaultAttributes,e))}renderCrosshair(e){const{center:t,radius:i,innerRadius:n=0,sectorStyle:r}=this.attribute,{startAngle:s,endAngle:a}=this.attribute;return e.createOrUpdateChild("crosshair-sector",Object.assign(Object.assign(Object.assign({},t),{outerRadius:i,innerRadius:n,startAngle:s,endAngle:a}),r),"arc")}setLocation(e){const{center:t,startAngle:i=iG,endAngle:n=nG}=this.attribute,r=n-i,s=tl(rl(t,e));this.setAttributes({startAngle:s-r/2,endAngle:s+r/2})}}eq.defaultAttributes={sectorStyle:{fill:"#b2bacf",opacity:.2}},s_(),uT();class tq extends KX{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},tq.defaultAttributes,e))}renderCrosshair(e){const{center:t,radius:i,sides:n=6,lineStyle:r}=this.attribute,{startAngle:s,endAngle:a}=this.attribute,o=(a-s)%(2*Math.PI)==0,l=(a-s)/n;let c;for(let h=0;h<=n;h++){const e=nl(t,i,s+l*h);0===h?c="M".concat(e.x,",").concat(e.y):c+="L".concat(e.x,",").concat(e.y),h===n&&o&&(c+="Z")}return e.createOrUpdateChild("crosshair-polygon",Object.assign({path:c},r),"path")}setLocation(e){const{center:t}=this.attribute,i=nr.distancePP(e,t);this.setAttribute("radius",i)}}tq.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},s_(),sA();class iq extends KX{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},iq.defaultAttributes,e))}renderCrosshair(e){const{center:t,radius:i,lineStyle:n}=this.attribute;return e.createOrUpdateChild("crosshair-circle",Object.assign(Object.assign(Object.assign(Object.assign({},t),{outerRadius:i}),this.attribute),n),"arc")}setLocation(e){const{center:t}=this.attribute,i=nr.distancePP(e,t);this.setAttribute("radius",i)}}iq.defaultAttributes={lineStyle:{stroke:["#b2bacf",!1,!1,!1],lineWidth:1,lineDash:[2]}};var nq=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class rq extends $X{static getSpecInfo(e){const t=e[this.specKey];if(P(t))return;if(!v(t))return t.categoryField||t.valueField?[{spec:t,specPath:[this.specKey],type:r.polarCrosshair}]:void 0;const i=[];return t.forEach(((e,t)=>{(e.categoryField||e.valueField)&&i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.polarCrosshair})})),i}constructor(e,t){super(e,t),this.type=r.polarCrosshair,this.name=r.polarCrosshair,this._currValueAngle=new Map,this._currValueRadius=new Map}_showDefaultCrosshairBySpec(){const{categoryField:e,valueField:t}=this._spec;if((null==e?void 0:e.visible)&&e.defaultSelect){const{axisIndex:t,datum:i}=e.defaultSelect;this._defaultCrosshair(t,i,1)}if((null==t?void 0:t.visible)&&t.defaultSelect){const{axisIndex:e,datum:i}=t.defaultSelect;this._defaultCrosshair(e,i,2)}}_defaultCrosshair(e,t,i){const n=this._option.getComponentsByKey("axes").find((t=>t.getSpecIndex()===e));if(n){if(1===i){this._currValueAngle.clear();const i={angle:n.valueToPosition(t),radius:n.getOuterRadius()},r=n.coordToPoint(i);this._currValueAngle.set(e,this._getValueByAxis(n,r))}else{this._currValueRadius.clear();const i={angle:n.startAngle,radius:n.valueToPosition(t)},r=n.coordToPoint(i);this._currValueRadius.set(e,this._getValueByAxis(n,r))}this.layoutByValue(3)}}hide(){this._radiusCrosshair&&this._radiusCrosshair.hideAll(),this._radiusLabelCrosshair&&this._radiusLabelCrosshair.hideAll(),this._angleCrosshair&&this._angleCrosshair.hideAll(),this._angleLabelCrosshair&&this._angleLabelCrosshair.hideAll()}_findAllAxisContains(e,t){const i=this._getAxisInfoByField("category"),n=this._getAxisInfoByField("value");return{angleAxisMap:this._filterAxisByPoint(i,e,t),radiusAxisMap:this._filterAxisByPoint(n,e,t)}}_getAllAxisValues(e,t,i){let n=!1;return e.forEach((e=>{An(e.axis.getScale().type)&&(n?this.enable=!1:n=!0)})),!!this.enable&&(e.forEach(((e,n)=>{const r=e.axis;i.set(n,this._getValueByAxis(r,t))})),!0)}_getValueByAxis(e,t){const{x:i,y:n}=e.getLayoutStartPoint(),{x:r,y:s}=this.getLayoutStartPoint();let a=e.positionToData({x:t.x-(i-r),y:t.y-(n-s)});Cn(e.getScale().type)&&L(+a)&&(a=(+a).toFixed(2));const o={x:e.getCenter().x+this.getLayoutStartPoint().x,y:e.getCenter().y+this.getLayoutStartPoint().y};return{v:a,axis:e,center:o,innerRadius:e.getInnerRadius(),radius:e.getOuterRadius(),startAngle:e.startAngle,endAngle:e.endAngle,distance:nr.distancePP(t,e.getCenter()),coord:e.pointToCoord(t),point:t}}_layoutCrosshair(e,t){const{angleAxisMap:i,radiusAxisMap:n}=this._findAllAxisContains(e,t);if(0!==i.size||0!==n.size)this._currValueAngle.clear(),this._currValueRadius.clear(),i&&this._getAllAxisValues(i,{x:e,y:t},this._currValueAngle),n&&this._getAllAxisValues(n,{x:e,y:t},this._currValueRadius),this.layoutByValue(3);else{if(this.enableRemain)return;this.hide()}}layoutByValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;var t,i,n,r;if(!this.enable)return;const s=this._firstSeries();if(!s)return;let a={x:0,y:0,center:{x:0,y:0},radius:0,distance:0,startAngle:0,endAngle:0,innerRadius:0,visible:!1,label:{visible:!1,text:"",offset:0}},o={x:0,y:0,center:{x:0,y:0},radius:0,distance:0,startAngle:0,endAngle:0,innerRadius:0,visible:!1,sides:s.angleAxisHelper.getScale(0).ticks().length,label:{visible:!1,text:"",offset:0}};if(this._angleHair){a.visible=!!this._currValueAngle.size;const e=s.angleAxisHelper.getBandwidth(0);this._currValueAngle.forEach((t=>{var i,{axis:n,v:r,coord:o}=t,l=nq(t,["axis","v","coord"]);r=null!=r?r:"",_e(a,l);const c=s.angleAxisHelper.dataToPosition([r]);a.angle=c,(null===(i=this._angleHair.label)||void 0===i?void 0:i.visible)&&(a.label.visible=!0,a.label.text=r,a.label.offset=Zj(n.getSpec())),a.startAngle=c-e/2,a.endAngle=c+e/2}))}if(this._radiusHair&&(o.visible=!!this._currValueRadius.size,this._currValueRadius.forEach((e=>{var t,{axis:i,v:n,coord:r}=e,s=nq(e,["axis","v","coord"]);n=null!=n?n:"",(null===(t=this._radiusHair.label)||void 0===t?void 0:t.visible)&&(o.label.visible=!0,o.label.text=n,o.label.offset=Zj(i.getSpec())),o.angle=r.angle,o.axis=i,_e(o,s)}))),this.enableRemain&&!a.visible&&x(this._cacheAngleCrossHairInfo))a=this._cacheAngleCrossHairInfo;else if((null===(i=null===(t=this._angleHair)||void 0===t?void 0:t.label)||void 0===i?void 0:i.formatMethod)&&a.label.visible){const{label:e}=a;e.text=this._angleHair.label.formatMethod(e.text,"angle")}if(this.enableRemain&&!o.visible&&x(this._cacheRadiusCrossHairInfo))o=this._cacheRadiusCrossHairInfo;else if((null===(r=null===(n=this._radiusHair)||void 0===n?void 0:n.label)||void 0===r?void 0:r.formatMethod)&&o.label.visible){const{label:e}=o;e.text=this._radiusHair.label.formatMethod(e.text,"radius")}e&&(this._layoutHorizontal(o),this._layoutVertical(a)),this.enableRemain&&(this._cacheAngleCrossHairInfo=Object.assign(Object.assign({},a),{_isCache:!0}),this._cacheRadiusCrossHairInfo=Object.assign(Object.assign({},o),{_isCache:!0}))}_layoutVertical(e){var t;if(e._isCache&&this.enableRemain)return;const i=this.getContainer(),{angle:n,innerRadius:r,radius:s,label:a,startAngle:o,endAngle:l,center:c,visible:h}=e;if(h){const e="rect"===this._angleHair.type?"sector":"line";let h;if(h="sector"===e?{center:c,innerRadius:r,radius:s,startAngle:o,endAngle:l}:{start:nl(c,r,n),end:nl(c,s,n)},this._angleCrosshair)this._angleCrosshair.setAttributes(h);else{let t;"line"===e?t=new YX(Object.assign(Object.assign({},h),{lineStyle:this._angleHair.style,zIndex:this.gridZIndex})):"sector"===e&&(t=new eq(Object.assign(Object.assign({},h),{sectorStyle:this._angleHair.style,zIndex:this.gridZIndex}))),this._angleCrosshair=t,i.add(t)}if(a.visible){const e=sr(n),i=Object.assign(Object.assign(Object.assign(Object.assign({},nl(c,s+a.offset,n)),this._angleHair.label),a),{textStyle:Object.assign(Object.assign({},null===(t=this._angleHair.label)||void 0===t?void 0:t.textStyle),{textAlign:e.align,textBaseline:e.baseline}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._angleLabelCrosshair,i,(e=>{e.name="crosshair-angle-label",this._angleLabelCrosshair=e}))}else this._angleLabelCrosshair&&this._angleLabelCrosshair.hideAll()}}_layoutHorizontal(e){var t;if(e._isCache&&this.enableRemain)return;const{center:i,startAngle:n,endAngle:r,distance:s,sides:a,axis:o,label:l,point:c,radius:h,innerRadius:d,visible:u}=e,p=this.getContainer();if(u){const e=this._radiusHair.smooth?"circle":"polygon";let u=s;if("polygon"===e){const e=o.getCenter(),t=rl(e,c),i=(r-n)/a,l=Math.floor((t-n)/i),p=l*i+n,g=Math.min((l+1)*i+n,r),f=nl(e,s,p),m=nl(e,s,g),v=tg([m.x,m.y],[f.x,f.y],[e.x,e.y],[c.x,c.y]);v&&(u=At(nr.distancePN(c,v[0],v[1])+s,d,h))}const g={center:i,startAngle:n,endAngle:r,radius:u,sides:a};if(this._radiusCrosshair)this._radiusCrosshair.setAttributes(g);else{let t;t="polygon"===e?new tq(Object.assign(Object.assign({},g),{lineStyle:this._radiusHair.style,zIndex:this.gridZIndex+1})):new iq(Object.assign(Object.assign({},g),{lineStyle:this._radiusHair.style,zIndex:this.gridZIndex})),this._radiusCrosshair=t,p.add(t)}if(l.visible){const e=function(e){let t="center",i="middle";return t=(e=rr(e))>=Math.PI*(7/6)&&e<=Math.PI*(11/6)?"right":e>=Math.PI*(1/6)&&e<=Math.PI*(5/6)?"left":"center",i=e>=Math.PI*(5/3)||e<=Math.PI*(1/3)?"bottom":e>=Math.PI*(2/3)&&e<=Math.PI*(4/3)?"top":"middle",{align:t,baseline:i}}(n),r=Object.assign(Object.assign(Object.assign(Object.assign({},nl(i,u,n)),this._radiusHair.label),l),{textStyle:Object.assign(Object.assign({},null===(t=this._radiusHair.label)||void 0===t?void 0:t.textStyle),{textAlign:e.align,textBaseline:e.baseline}),zIndex:this.labelZIndex});this._updateCrosshairLabel(this._radiusLabelCrosshair,r,(e=>{e.name="crosshair-radius-label",this._radiusLabelCrosshair=e}))}else this._radiusLabelCrosshair&&this._radiusLabelCrosshair.hideAll()}}_parseFieldInfo(){var e;const{categoryField:t,valueField:i}=this._spec;t&&t.visible&&(this._angleHair=this._parseField(t,"categoryField")),i&&i.visible&&(this._radiusHair=this._parseField(i,"valueField"),this._radiusHair.smooth=null===(e=null==i?void 0:i.line)||void 0===e?void 0:e.smooth)}_updateCrosshairLabel(e,t,i){const n=this.getContainer();e?e.setAttributes(t):(e=new mG(t),null==n||n.add(e),i(e)),nF(e,this._getLimitBounds())}_getNeedClearVRenderComponents(){return[this._radiusCrosshair,this._radiusLabelCrosshair,this._angleCrosshair,this._angleLabelCrosshair]}}rq.specKey="crosshair",rq.type=r.polarCrosshair;class sq extends dF{get orient(){return this._orient}setStartAndEnd(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["percent","percent"];const[n="percent",r="percent"]=i,s="percent"===n?e:this._dataToStatePoint(e),a="percent"===r?t:this._dataToStatePoint(t);this._handleChange(s,a,!0)}enableInteraction(){this._activeRoam=!0}disableInteraction(){this._activeRoam=!1}zoomIn(e){this._handleChartZoom({zoomDelta:1.2,zoomX:null==e?void 0:e.x,zoomY:null==e?void 0:e.y})}zoomOut(e){this._handleChartZoom({zoomDelta:.8,zoomX:null==e?void 0:e.x,zoomY:null==e?void 0:e.y})}_handleChange(e,t,i){var n,r;null!==(r=null===(n=this._spec)||void 0===n?void 0:n.zoomLock)&&void 0!==r&&r||t-e<this._minSpan||this._maxSpan}_isReverse(){const e=this._relatedAxisComponent;if(!e)return!1;const t=e.getScale();return t.range()[0]>t.range()[1]&&(!e.getInverse()||this._isHorizontal)}_updateRangeFactor(e,t){const i=this._relatedAxisComponent.getScale(),n=this._isReverse(),r=n?[1-this._end,1-this._start]:[this._start,this._end];if(n)switch(e){case"startHandler":i.rangeFactorEnd(r[1]);break;case"endHandler":i.rangeFactorStart(r[0]);break;default:i.rangeFactorStart(r[0],!0),i.rangeFactorEnd(r[1])}else switch(e){case"startHandler":i.rangeFactorStart(r[0]);break;case"endHandler":i.rangeFactorEnd(r[1]);break;default:i.rangeFactorEnd(r[1],!0),i.rangeFactorStart(r[0])}const s=i.rangeFactor();s?(this._start=n?1-s[1]:s[0],this._end=n?1-s[0]:s[1]):(this._start=0,this._end=1)}get visible(){return this._visible}constructor(e,t){super(e,t),this.layoutType="none",this._orient="left",this._cacheVisibility=void 0,this._stateField="x",this._activeRoam=!0,this._zoomAttr={enable:!0,rate:1,focus:!0},this._dragAttr={enable:!0,rate:1,reverse:!0},this._scrollAttr={enable:!0,rate:1,reverse:!0},this.effect={onZoomChange:e=>{var t,i;const n=this._relatedAxisComponent;if(n&&"axis"===this._filterMode){const r=n.getScale(),s=n.getSpec();this._auto&&this._getAxisBandSize(s)&&this._spec.ignoreBandSize&&(r.bandwidth("auto"),r.maxBandwidth("auto"),r.minBandwidth("auto")),this._updateRangeFactor(e,"zoomChange"),null===(i=null===(t=this._component)||void 0===t?void 0:t.setStartAndEnd)||void 0===i||i.call(t,this._start,this._end),n.effect.scaleUpdate()}else gr(this._regions,(e=>{var t;null===(t=e.getViewData())||void 0===t||t.markRunning()}),{userId:this._seriesUserId,specIndex:this._seriesIndex}),gr(this._regions,(e=>{e.reFilterViewData()}),{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._visible=!0,this._handleStateChange=(e,t,i)=>{var n,r;return this._startValue=e,this._endValue=t,this._newDomain=this._parseDomainFromState(this._startValue,this._endValue),null===(r=(n=this.effect).onZoomChange)||void 0===r||r.call(n,i),!0},this._handleChartZoom=e=>{var t,i;if(!this._activeRoam)return;const{zoomDelta:n,zoomX:r,zoomY:s}=e,{x:a,y:o}=this._regions[0].getLayoutStartPoint(),{width:l,height:c}=this._regions[0].getLayoutRect(),h=Math.abs(this._start-this._end),d=null!==(i=null===(t=this._spec.roamZoom)||void 0===t?void 0:t.rate)&&void 0!==i?i:1;if(h>=1&&n<1)return;if(h<=.01&&n>1)return;const u=this._isHorizontal?r:s,p=h*(n-1)*d;let g=p/2,f=p/2;if(u){const e=this._isHorizontal?a:o,t=this._isHorizontal?l:c;g=Math.abs(e-u)/Math.abs(t-e)*p,f=Math.abs(t-u)/Math.abs(t-e)*p}const m=At(this._start+g,0,1),v=At(this._end-f,0,1);this._handleChange(Math.min(m,v),Math.max(m,v),!0)},this._handleChartScroll=(e,t)=>{var i;if(!this._activeRoam)return!1;const{scrollX:n,scrollY:r}=e;let s=this._isHorizontal?n:r;const a=this._isHorizontal?Hn(n/r)>=.5:Hn(r/n)>=.5;return this._scrollAttr.reverse||(s=-s),a&&this._handleChartMove(s,null!==(i=this._scrollAttr.rate)&&void 0!==i?i:1),a},this._handleChartDrag=(e,t)=>{var i;if(!this._activeRoam)return;const[n,r]=e;let s=this._isHorizontal?n:r;this._dragAttr.reverse&&(s=-s),this._handleChartMove(s,null!==(i=this._dragAttr.rate)&&void 0!==i?i:1)},this._handleChartMove=(e,t)=>{const i=this._isHorizontal?this.getLayoutRect().width:this.getLayoutRect().height;if(Math.abs(e)>=1e-6)if(e>0&&this._end<1){const n=Math.min(1-this._end,e/i)*t;this._handleChange(this._start+n,this._end+n,!0)}else if(e<0&&this._start>0){const n=Math.max(-this._start,e/i)*t;this._handleChange(this._start+n,this._end+n,!0)}},this._orient=_r(e),this._isHorizontal="horizontal"===xr(this._orient)}created(){super.created(),this._setAxisFromSpec(),this._setRegionsFromSpec(),this._initEvent(),this._initData(),this._initStateScale(),this._setStateFromSpec()}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}_setAxisFromSpec(){if(x(this._spec.axisId)?this._relatedAxisComponent=this._option.getComponentByUserId(this._spec.axisId):x(this._spec.axisIndex)&&(this._relatedAxisComponent=this._option.getComponentByIndex("axes",this._spec.axisIndex)),P(this._spec.field)&&!this._relatedAxisComponent){const e=this._option.getComponentsByKey("axes"),t=e.find((e=>e._orient===this._orient));if(t)this._relatedAxisComponent=t;else{const t=e.find((e=>!Cn(e.getScale().type)));this._relatedAxisComponent=t}}this._relatedAxisComponent&&"axis"===this._filterMode&&(this._relatedAxisComponent.autoIndentOnce=!0)}_setRegionsFromSpec(){var e,t;this._regions=this._relatedAxisComponent?this._relatedAxisComponent.getRegions():this._option.getAllRegions();const i=this._relatedAxisComponent?null===(t=(e=this._relatedAxisComponent).getBindSeriesFilter)||void 0===t?void 0:t.call(e):null;if(x(i)&&(x(i.userId)&&(this._seriesUserId=z(i.userId)),x(i.specIndex)&&(this._seriesIndex=z(i.specIndex))),x(this._spec.seriesId)){const e=z(this._spec.seriesId);this._seriesUserId?this._seriesUserId=this._seriesUserId.filter((t=>e.includes(t))):this._seriesUserId=e}if(x(this._spec.seriesIndex)){const e=z(this._spec.seriesIndex);this._seriesIndex?this._seriesIndex=this._seriesIndex.filter((t=>e.includes(t))):this._seriesIndex=e}if(x(this._spec.regionIndex)){const e=this._option.getRegionsInIndex(z(this._spec.regionIndex));this._regions=this._regions.filter((t=>e.includes(t)))}else if(x(this._spec.regionId)){const e=z(this._spec.regionId);this._regions=e.length?this._regions.filter((t=>e.includes(t.id))):[]}}onDataUpdate(){const e=this._computeDomainOfStateScale(Cn(this._stateScale.type));this._stateScale.domain(e,!0),this._handleChange(this._start,this._end,!0)}_computeDomainOfStateScale(e){const t=this._data.getLatestData().map((e=>e[this._stateField]));if(e){const e=t.map((e=>1*e));return t.length?[U(e),V(e)]:[-1/0,1/0]}return t}_initEvent(){this._initCommonEvent()}_initData(){const e=[],t=[],i=[];let n=!1;if(this._relatedAxisComponent){const r={};gr(this._regions,(s=>{var a,o;const l="cartesian"===s.coordinate?s.getXAxisHelper():"polar"===s.coordinate?s.angleAxisHelper:null,c="cartesian"===s.coordinate?s.getYAxisHelper():"polar"===s.coordinate?s.radiusAxisHelper:null;if(!l||!c)return;const h=l.getAxisId()===this._relatedAxisComponent.id?l:c.getAxisId()===this._relatedAxisComponent.id?c:this._isHorizontal?l:c,d=h===l?c:l,u=Cn(d.getScale(0).type);u&&(n=!0),e.push(s.getRawData());const p=s.getSpec(),g=z(p.xField),f=z(p.yField),m="cartesian"===s.coordinate?g[0]:null!==(a=p.angleField)&&void 0!==a?a:p.categoryField,v="cartesian"===s.coordinate?f[0]:null!==(o=p.radiusField)&&void 0!==o?o:p.valueField;if(r[s.id]="link"===s.type?"from_xField":h===l?m:v,t.push(r[s.id]),this._valueField){const e="link"===s.type?"from_yField":d===l?m:v;i.push(u?e:null)}}),{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._originalStateFields=r}else n=P(this._spec.valueField),gr(this._regions,(n=>{e.push(n.getRawData()),t.push(this._field),this._valueField&&i.push(this._spec.valueField)}),{userId:this._seriesUserId,specIndex:this._seriesIndex});const{dataSet:r}=this._option;po(r,"dataview",y),uo(r,"dataFilterComputeDomain",aF);const s=new R(r,{name:"".concat(this.type,"_").concat(this.id,"_data")});s.transform({type:"dataFilterComputeDomain",options:{input:{dataCollection:e,stateFields:t,valueFields:i},output:{stateField:this._stateField,valueField:this._valueField}}},!1),this._data=new _k(this._option,s),s.reRunAllTransform(),r.multipleDataViewAddListener(e,"change",this._handleDataCollectionChange.bind(this))}setAttrFromSpec(){var e;super.setAttrFromSpec(),!0===this._spec.roamZoom||this._spec.roamZoom?this._zoomAttr=O({},this._zoomAttr,this._spec.roamZoom):this._zoomAttr.enable=!1,!0===this._spec.roamDrag||this._spec.roamDrag?this._dragAttr=O({},this._dragAttr,this._spec.roamDrag):this._dragAttr.enable=!1,!0===this._spec.roamScroll||this._spec.roamScroll?this._scrollAttr=O({},this._scrollAttr,this._spec.roamScroll):this._scrollAttr.enable=!1,this._field=this._spec.field,this._width=this._computeWidth(),this._height=this._computeHeight(),this._visible=null===(e=this._spec.visible)||void 0===e||e}_statePointToData(e){const t=this._stateScale;let i=t.range();this._isReverse()&&(i=i.slice().reverse());const n=i[0]+(i[1]-i[0])*e;return t.invert(n)}_dataToStatePoint(e){const t=this._stateScale,i=t.scale(e);let n=t.range();return!this._isHorizontal&&Cn(t.type)&&(n=n.slice().reverse()),(i-n[0])/(n[1]-n[0])}_modeCheck(e,t){return"start"===e?"percent"===t&&this._spec.start||"value"===t&&this._spec.startValue:"percent"===t&&this._spec.end||"value"===t&&this._spec.endValue}_setStateFromSpec(){var e,t;let i,n;if(this._auto=!!this._spec.auto,this._spec.rangeMode){const[e,t]=this._spec.rangeMode;this._modeCheck("start",e)&&this._modeCheck("end",t)&&(i="percent"===e?this._spec.start:this._dataToStatePoint(this._spec.startValue),n="percent"===t?this._spec.end:this._dataToStatePoint(this._spec.endValue))}else i=this._spec.start?this._spec.start:this._spec.startValue?this._dataToStatePoint(this._spec.startValue):0,n=this._spec.end?this._spec.end:this._spec.endValue?this._dataToStatePoint(this._spec.endValue):1;this._startValue=this._statePointToData(i),this._endValue=this._statePointToData(n),this._start=i,this._end=n,this._minSpan=null!==(e=this._spec.minSpan)&&void 0!==e?e:0,this._maxSpan=null!==(t=this._spec.maxSpan)&&void 0!==t?t:1,Cn(this._stateScale.type)&&this._stateScale.domain[0]!==this._stateScale.domain[1]&&(this._spec.minValueSpan&&(this._minSpan=this._spec.minValueSpan/(this._stateScale.domain()[1]-this._stateScale.domain()[0])),this._spec.maxValueSpan&&(this._maxSpan=this._spec.maxValueSpan/(this._stateScale.domain()[1]-this._stateScale.domain()[0]))),this._minSpan=Math.max(0,this._minSpan),this._maxSpan=Math.min(this._maxSpan,1),this._relatedAxisComponent&&"axis"===this._filterMode||0===this._start&&1===this._end||(this._newDomain=this._parseDomainFromState(this._startValue,this._endValue))}_parseFieldOfSeries(e){var t;return null===(t=this._originalStateFields)||void 0===t?void 0:t[e.id]}_initStateScale(){const e=[0,1];if(this._relatedAxisComponent){const t=this._relatedAxisComponent.getScale(),i=Cn(t.type),n=this._computeDomainOfStateScale(i);if(this._stateScale=t.clone(),i){const t=n.map((e=>1*e));this._stateScale.domain(n.length?[U(t),V(t)]:[0,1],!0).range(e)}else this._stateScale.domain(n,!0).range(e)}else this._stateScale=new hk,this._stateScale.domain(this._computeDomainOfStateScale(),!0).range(e)}init(e){super.init(e),this._addTransformToSeries(),0===this._start&&1===this._end||this.effect.onZoomChange()}_addTransformToSeries(){this._relatedAxisComponent&&"axis"===this._filterMode||(uo(this._option.dataSet,"dataFilterWithNewDomain",sF),gr(this._regions,(e=>{e.addViewDataFilter({type:"dataFilterWithNewDomain",options:{getNewDomain:()=>this._newDomain,field:()=>{var t;return null!==(t=this._field)&&void 0!==t?t:this._parseFieldOfSeries(e)},isContinuous:()=>Cn(this._stateScale.type)},level:wo.dataZoomFilter})}),{userId:this._seriesUserId,specIndex:this._seriesIndex}))}onRender(e){}_compareSpec(e,t){const i=super._compareSpec(e,t);return i.reMake||ty(t,e)||(i.reRender=!0,i.reMake=!0),i}reInit(e){super.reInit(e),this._marks.forEach((e=>{e.getMarks().forEach((e=>{this.initMarkStyleWithSpec(e,this._spec[e.name])}))}))}changeRegions(){}update(e){}resize(e){}_parseDomainFromState(e,t){if(Cn(this._stateScale.type))return[Math.min(t,e),Math.max(t,e)];const i=this._stateScale.domain(),n=i.indexOf(e),r=i.indexOf(t);return i.slice(Math.min(n,r),Math.max(n,r)+1)}_initCommonEvent(){var e,t,i,n,r,s,a;const o={delayType:null!==(t=null===(e=this._spec)||void 0===e?void 0:e.delayType)&&void 0!==t?t:"throttle",delayTime:x(null===(i=this._spec)||void 0===i?void 0:i.delayType)?null!==(r=null===(n=this._spec)||void 0===n?void 0:n.delayTime)&&void 0!==r?r:30:0,realTime:null===(a=null===(s=this._spec)||void 0===s?void 0:s.realTime)||void 0===a||a};this._zoomAttr.enable&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom,o),this._scrollAttr.enable&&this.initScrollEventOfRegions(this._regions,null,this._handleChartScroll,o),this._dragAttr.enable&&this.initDragEventOfRegions(this._regions,null,this._handleChartDrag,o)}updateLayoutAttribute(){this._visible&&this._createOrUpdateComponent(),super.updateLayoutAttribute()}onLayoutStart(e,t,i){super.onLayoutStart(e,t,i);const n=this._autoUpdate(e),r=this._isHorizontal?"height":"width";this.layout.setLayoutRect({[r]:n?this["_".concat(r)]:0},{[r]:Tw.Built_In})}getBoundsInRect(e){const t={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0};return this._isHorizontal?(t.y2=t.y1+this._height,t.x2=t.x1+e.width):(t.x2=t.x1+this._width,t.y2=t.y1+e.height),t}hide(){var e;null===(e=this._component)||void 0===e||e.hideAll()}show(){var e;null===(e=this._component)||void 0===e||e.showAll()}_getAxisBandSize(e){const t=null==e?void 0:e.bandSize,i=null==e?void 0:e.maxBandSize,n=null==e?void 0:e.minBandSize;if(t||n||i)return{bandSize:t,maxBandSize:i,minBandSize:n}}_autoUpdate(e){var t,i,n,r,s,a;if(!this._auto)return this._cacheVisibility=void 0,!0;const o=this._relatedAxisComponent,l=null==o?void 0:o.getSpec(),c=null==o?void 0:o.getScale(),h=this._getAxisBandSize(l);if(An(c.type)&&(null==e?void 0:e.height)===(null===(t=this._cacheRect)||void 0===t?void 0:t.height)&&(null==e?void 0:e.width)===(null===(i=this._cacheRect)||void 0===i?void 0:i.width)&&this._fixedBandSize===(null==h?void 0:h.bandSize))return this._cacheVisibility;let d=!0;if(this._isHorizontal&&(null==e?void 0:e.width)!==(null===(n=this._cacheRect)||void 0===n?void 0:n.width)?c.range(o.getInverse()?[e.width,0]:[0,e.width]):(null==e?void 0:e.height)!==(null===(r=this._cacheRect)||void 0===r?void 0:r.height)&&c.range(o.getInverse()?[0,e.height]:[e.height,0]),this._cacheRect={width:null==e?void 0:e.width,height:null==e?void 0:e.height},this._fixedBandSize=null==h?void 0:h.bandSize,An(c.type)){h&&(this._start||this._end)&&this._updateRangeFactor(null,"auto");const[e,t]=null!==(s=c.rangeFactor())&&void 0!==s?s:[];d=(!P(e)||!P(t))&&!(0===e&&1===t)}else{const[e,t]=null!==(a=c.rangeFactor())&&void 0!==a?a:[this._start,this._end];d=!(0===e&&1===t)}return this.setStartAndEnd(this._start,this._end),d?this.show():this.hide(),this._cacheVisibility=d,d}_getNeedClearVRenderComponents(){return[this._component]}}$R(sq,mF);const aq="M -0.0544 0.25 C -0.0742 0.25 -0.0901 0.234 -0.0901 0.2143 L -0.0901 -0.1786 C -0.0901 -0.1983 -0.0742 -0.2143 -0.0544 -0.2143 L -0.0187 -0.2143 L -0.0187 -0.5 L 0.017 -0.5 L 0.017 -0.2143 L 0.0527 -0.2143 C 0.0724 -0.2143 0.0884 -0.1983 0.0884 -0.1786 L 0.0884 0.2143 C 0.0884 0.234 0.0724 0.25 0.0527 0.25 L 0.017 0.25 L 0.017 0.5 L -0.0187 0.5 L -0.0187 0.25 L -0.0544 0.25 Z M -0.0187 -0.1429 L -0.0544 -0.1429 L -0.0544 0.1786 L -0.0187 0.1786 L -0.0187 -0.1429 Z M 0.0527 -0.1429 L 0.017 -0.1429 L 0.017 0.1786 L 0.0527 0.1786 L 0.0527 -0.1429 Z",oq={orient:"bottom",showDetail:"auto",brushSelect:!0,zoomLock:!1,minSpan:0,maxSpan:1,delayType:"throttle",delayTime:0,realTime:!0,backgroundStyle:{fill:"white",stroke:"#D1DBEE",lineWidth:1,cornerRadius:2},dragMaskStyle:{fill:"#B0C8F9",fillOpacity:.2},backgroundChartStyle:{area:{visible:!0,stroke:"#D1DBEE",lineWidth:1,fill:"#F6F8FC"},line:{visible:!0,stroke:"#D1DBEE",lineWidth:1}},selectedBackgroundStyle:{fill:"#B0C8F9",fillOpacity:.5},selectedBackgroundChartStyle:{area:{visible:!0,stroke:"#B0C8F9",lineWidth:1,fill:"#fbb934"},line:{visible:!0,stroke:"#fbb934",lineWidth:1}},middleHandlerStyle:{visible:!0,background:{size:8,style:{fill:"white",stroke:"#B0C8F9",cornerRadius:2}},icon:{size:6,fill:"white",stroke:"#B0C8F9",symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}},startHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:aq,fill:"white",stroke:"#B0C8F9",lineWidth:.5},endHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:aq,fill:"white",stroke:"#B0C8F9",lineWidth:.5},startTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}},endTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}}},lq={horizontal:{angle:0,strokeBoundsBuffer:0,boundsPadding:2,pickMode:"imprecise",cursor:"ew-resize"},vertical:{angle:Math.PI/180*90,cursor:"ns-resize",boundsPadding:2,pickMode:"imprecise",strokeBoundsBuffer:0}};var cq;!function(e){e.startHandler="startHandler",e.endHandler="endHandler",e.middleHandler="middleHandler",e.background="background"}(cq||(cq={}));var hq=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const dq={debounce:F,throttle:Nr};gG(),hw(),RS(),tE(),HE();class uq extends qW{setPropsFromAttrs(){const{start:e,end:t,orient:i,previewData:n,previewPointsX:r,previewPointsY:s,previewPointsX1:a,previewPointsY1:o}=this.attribute;e&&(this.state.start=e),t&&(this.state.end=t);const{width:l,height:c}=this.getLayoutAttrFromConfig();this._spanCache=this.state.end-this.state.start,this._isHorizontal="top"===i||"bottom"===i,this._layoutCache.max=this._isHorizontal?l:c,this._layoutCache.attPos=this._isHorizontal?"x":"y",this._layoutCache.attSize=this._isHorizontal?"width":"height",n&&(this._previewData=n),Q(r)&&(this._previewPointsX=r),Q(s)&&(this._previewPointsY=s),Q(a)&&(this._previewPointsX1=a),Q(o)&&(this._previewPointsY1=o)}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},uq.defaultAttributes,e)),this.name="dataZoom",this._previewData=[],this._activeState=!1,this._activeCache={startPos:{x:0,y:0},lastPos:{x:0,y:0}},this._layoutCache={attPos:"x",attSize:"width",max:0},this.state={start:0,end:1},this._statePointToData=e=>e,this._onHandlerPointerDown=(e,t)=>{e.stopPropagation(),"start"===t?(this._activeTag=cq.startHandler,this._activeItem=this._startHandlerMask):"end"===t?(this._activeTag=cq.endHandler,this._activeItem=this._endHandlerMask):"middleRect"===t?(this._activeTag=cq.middleHandler,this._activeItem=this._middleHandlerRect):"middleSymbol"===t?(this._activeTag=cq.middleHandler,this._activeItem=this._middleHandlerSymbol):"background"===t&&(this._activeTag=cq.background,this._activeItem=this._background),this._activeState=!0,this._activeCache.startPos=this.eventPosToStagePos(e),this._activeCache.lastPos=this.eventPosToStagePos(e),"browser"===Bf.env&&(Bf.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),Bf.addEventListener("pointerup",this._onHandlerPointerUp.bind(this))),this.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0})},this._onHandlerPointerMove=dq[this.attribute.delayType]((e=>{e.stopPropagation();const{start:t,end:i,brushSelect:n,realTime:r=!0}=this.attribute,s=this.eventPosToStagePos(e),{attPos:a,max:o}=this._layoutCache,l=(s[a]-this._activeCache.lastPos[a])/o;let{start:c,end:h}=this.state;this._activeState&&(this._activeTag===cq.middleHandler?this.moveZoomWithMiddle((this.state.start+this.state.end)/2+l):this._activeTag===cq.startHandler?c+l>h?(c=h,h=c+l,this._activeTag=cq.endHandler):c+=l:this._activeTag===cq.endHandler&&(h+l<c?(h=c,c=h+l,this._activeTag=cq.startHandler):h+=l),this._activeCache.lastPos=s,n&&this.renderDragMask()),c=Math.min(Math.max(c,0),1),h=Math.min(Math.max(h,0),1),t===c&&i===h||(this.setStateAttr(c,h,!0),this._dispatchEvent("change",{start:c,end:h,tag:this._activeTag}))}),this.attribute.delayTime);const{position:i,showDetail:n}=e;this._activeCache.startPos=i,this._activeCache.lastPos=i,this._showText="auto"!==n&&n,this.setPropsFromAttrs()}setAttributes(e,t){super.setAttributes(e,t),this.setPropsFromAttrs()}bindEvents(){if(this.attribute.disableTriggerEvent)return;const{showDetail:e,brushSelect:t}=this.attribute;this._startHandlerMask&&this._startHandlerMask.addEventListener("pointerdown",(e=>this._onHandlerPointerDown(e,"start"))),this._endHandlerMask&&this._endHandlerMask.addEventListener("pointerdown",(e=>this._onHandlerPointerDown(e,"end"))),this._middleHandlerSymbol&&this._middleHandlerSymbol.addEventListener("pointerdown",(e=>this._onHandlerPointerDown(e,"middleSymbol"))),this._middleHandlerRect&&this._middleHandlerRect.addEventListener("pointerdown",(e=>this._onHandlerPointerDown(e,"middleRect")));const i=t?"background":"middleRect";this._selectedBackground&&this._selectedBackground.addEventListener("pointerdown",(e=>this._onHandlerPointerDown(e,i))),t&&this._background&&this._background.addEventListener("pointerdown",(e=>this._onHandlerPointerDown(e,"background"))),t&&this._previewGroup&&this._previewGroup.addEventListener("pointerdown",(e=>this._onHandlerPointerDown(e,"background"))),this._selectedPreviewGroup&&this._selectedPreviewGroup.addEventListener("pointerdown",(e=>this._onHandlerPointerDown(e,i))),this.addEventListener("pointerup",this._onHandlerPointerUp),this.addEventListener("pointerupoutside",this._onHandlerPointerUp),"auto"===e&&(this.addEventListener("pointerenter",this._onHandlerPointerEnter),this.addEventListener("pointerleave",this._onHandlerPointerLeave))}dragMaskSize(){const{position:e}=this.attribute,{attPos:t,max:i}=this._layoutCache;return this._activeCache.lastPos[t]-e[t]>i?i+e[t]-this._activeCache.startPos[t]:this._activeCache.lastPos[t]-e[t]<0?e[t]-this._activeCache.startPos[t]:this._activeCache.lastPos[t]-this._activeCache.startPos[t]}setStateAttr(e,t,i){const{zoomLock:n=!1,minSpan:r=0,maxSpan:s=1}=this.attribute,a=t-e;a!==this._spanCache&&(n||a<r||a>s)||(this._spanCache=a,this.state.start=e,this.state.end=t,i&&this.setAttributes({start:e,end:t}))}eventPosToStagePos(e){var t,i;const{x:n,y:r}=Bf.mapToCanvasPoint(e);return{x:n-((null===(t=this.stage)||void 0===t?void 0:t.x)||0),y:r-((null===(i=this.stage)||void 0===i?void 0:i.y)||0)}}_onHandlerPointerUp(e){e.preventDefault();const{start:t,end:i,brushSelect:n,realTime:r=!0}=this.attribute;if(this._activeState&&this._activeTag===cq.background){const t=this.eventPosToStagePos(e);this.backgroundDragZoom(this._activeCache.startPos,t)}this._activeState=!1,n&&this.renderDragMask(),r&&t===this.state.start&&i===this.state.end||(this.setStateAttr(this.state.start,this.state.end,!0),this._dispatchEvent("change",{start:this.state.start,end:this.state.end,tag:this._activeTag})),"browser"===Bf.env&&(Bf.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),Bf.removeEventListener("pointerup",this._onHandlerPointerUp.bind(this))),this.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0})}_onHandlerPointerEnter(e){e.stopPropagation(),this._showText=!0,this.renderText()}_onHandlerPointerLeave(e){e.stopPropagation(),this._showText=!1,this.renderText()}backgroundDragZoom(e,t){const{attPos:i,max:n}=this._layoutCache,{position:r}=this.attribute,s=e[i]-r[i],a=t[i]-r[i],o=Math.min(Math.max(Math.min(s,a)/n,0),1),l=Math.min(Math.max(Math.max(s,a)/n,0),1);Math.abs(o-l)<.01?this.moveZoomWithMiddle(o):this.setStateAttr(o,l,!1)}moveZoomWithMiddle(e){let t=e-(this.state.start+this.state.end)/2;0!==t&&(t>0?this.state.end+t>1&&(t=1-this.state.end):t<0&&this.state.start+t<0&&(t=-this.state.start),this.setStateAttr(this.state.start+t,this.state.end+t,!1))}renderDragMask(){const{dragMaskStyle:e}=this.attribute,{position:t,width:i,height:n}=this.getLayoutAttrFromConfig();this._isHorizontal?this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:At(this.dragMaskSize()<0?this._activeCache.lastPos.x:this._activeCache.startPos.x,t.x,t.x+i),y:t.y,width:this._activeState&&this._activeTag===cq.background&&Math.abs(this.dragMaskSize())||0,height:n},e),"rect"):this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:t.x,y:At(this.dragMaskSize()<0?this._activeCache.lastPos.y:this._activeCache.startPos.y,t.y,t.y+n),width:i,height:this._activeState&&this._activeTag===cq.background&&Math.abs(this.dragMaskSize())||0},e),"rect")}isTextOverflow(e,t,i){if(!t)return!1;if(this._isHorizontal){if("start"===i){if(t.x1<e.x1)return!0}else if(t.x2>e.x2)return!0}else if("start"===i){if(t.y1<e.y1)return!0}else if(t.y2>e.y2)return!0;return!1}setTextAttr(e,t){const{startTextStyle:i,endTextStyle:n}=this.attribute,{formatMethod:r}=i,s=hq(i,["formatMethod"]),{formatMethod:a}=n,o=hq(n,["formatMethod"]),{start:l,end:c}=this.state;this._startValue=this._statePointToData(l),this._endValue=this._statePointToData(c);const{position:h,width:d,height:u}=this.getLayoutAttrFromConfig(),p=r?r(this._startValue):this._startValue,g=a?a(this._endValue):this._endValue,f={x1:h.x,y1:h.y,x2:h.x+d,y2:h.y+u};let m,v,y,b;this._isHorizontal?(m={x:h.x+l*d,y:h.y+u/2},v={x:h.x+c*d,y:h.y+u/2},y={textAlign:this.isTextOverflow(f,e,"start")?"left":"right",textBaseline:"middle"},b={textAlign:this.isTextOverflow(f,t,"end")?"right":"left",textBaseline:"middle"}):(m={x:h.x+d/2,y:h.y+l*u},v={x:h.x+d/2,y:h.y+c*u},y={textAlign:"center",textBaseline:this.isTextOverflow(f,e,"start")?"top":"bottom"},b={textAlign:"center",textBaseline:this.isTextOverflow(f,t,"end")?"bottom":"top"}),this._startText=this.maybeAddLabel(this._container,O({},s,{text:p,x:m.x,y:m.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:y}),"data-zoom-start-text-".concat(h)),this._endText=this.maybeAddLabel(this._container,O({},o,{text:g,x:v.x,y:v.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:b}),"data-zoom-end-text-".concat(h))}renderText(){let e=null,t=null;this.setTextAttr(e,t),e=this._startText.AABBBounds,t=this._endText.AABBBounds,this.setTextAttr(e,t),e=this._startText.AABBBounds,t=this._endText.AABBBounds;const{x1:i,x2:n,y1:r,y2:s}=e,{dx:a=0,dy:o=0}=this.attribute.startTextStyle;if((new cl).set(i,r,n,s).intersects(t)){const e="bottom"===this.attribute.orient||"right"===this.attribute.orient?-1:1;this._isHorizontal?this._startText.setAttribute("dy",o+e*Math.abs(t.y1-t.y2)):this._startText.setAttribute("dx",a+e*Math.abs(t.x1-t.x2))}else this._isHorizontal?this._startText.setAttribute("dy",o):this._startText.setAttribute("dx",a)}getLayoutAttrFromConfig(){var e,t,i,n;if(this._layoutAttrFromConfig)return this._layoutAttrFromConfig;const{position:r,size:s,orient:a,middleHandlerStyle:o={},startHandlerStyle:l={},endHandlerStyle:c={}}=this.attribute,{width:h,height:d}=s,u=null!==(t=null===(e=o.background)||void 0===e?void 0:e.size)&&void 0!==t?t:10;let p,g,f;o.visible?this._isHorizontal?(p=h,g=d-u,f={x:r.x,y:r.y+u}):(p=h-u,g=d,f={x:r.x+("left"===a?u:0),y:r.y}):(p=h,g=d,f=r);const m=null!==(i=l.size)&&void 0!==i?i:this._isHorizontal?g:p,v=null!==(n=c.size)&&void 0!==n?n:this._isHorizontal?g:p;return l.visible&&(this._isHorizontal?(p-=(m+v)/2,f={x:f.x+m/2,y:f.y}):(g-=(m+v)/2,f={x:f.x,y:f.y+m})),this._layoutAttrFromConfig={position:f,width:p,height:g},this._layoutAttrFromConfig}render(){var e,t,i,n,r,s,a,o,l,c,h,d,u,p,g,f,m,v;this._layoutAttrFromConfig=null;const{orient:y,backgroundStyle:b,backgroundChartStyle:_={},selectedBackgroundStyle:x={},selectedBackgroundChartStyle:S={},middleHandlerStyle:w={},startHandlerStyle:C={},endHandlerStyle:k={},brushSelect:A,zoomLock:E}=this.attribute,{start:T,end:O}=this.state,{position:P,width:M,height:I}=this.getLayoutAttrFromConfig(),R=null!==(e=C.triggerMinSize)&&void 0!==e?e:40,D=null!==(t=k.triggerMinSize)&&void 0!==t?t:40,L=this.createOrUpdateChild("dataZoom-container",{},"group");if(this._container=L,this._background=L.createOrUpdateChild("background",Object.assign(Object.assign({x:P.x,y:P.y,width:M,height:I,cursor:A?"crosshair":"auto"},b),{pickable:!E}),"rect"),(null===(i=_.line)||void 0===i?void 0:i.visible)&&this.setPreviewAttributes("line",L),(null===(n=_.area)||void 0===n?void 0:n.visible)&&this.setPreviewAttributes("area",L),A&&this.renderDragMask(),this._isHorizontal?this._selectedBackground=L.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:P.x+T*M,y:P.y,width:(O-T)*M,height:I,cursor:A?"crosshair":"move"},x),{pickable:!E}),"rect"):this._selectedBackground=L.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:P.x,y:P.y+T*I,width:M,height:(O-T)*I,cursor:A?"crosshair":"move"},x),{pickable:!E}),"rect"),(null===(r=S.line)||void 0===r?void 0:r.visible)&&this.setSelectedPreviewAttributes("line",L),(null===(s=S.area)||void 0===s?void 0:s.visible)&&this.setSelectedPreviewAttributes("area",L),this._isHorizontal){if(w.visible){const e=(null===(a=w.background)||void 0===a?void 0:a.size)||10;this._middleHandlerRect=L.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:P.x+T*M,y:P.y-e,width:(O-T)*M,height:e},null===(o=w.background)||void 0===o?void 0:o.style),{pickable:!E}),"rect"),this._middleHandlerSymbol=L.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:P.x+(T+O)/2*M,y:P.y-e/2,strokeBoundsBuffer:0,angle:0,symbolType:null!==(c=null===(l=w.icon)||void 0===l?void 0:l.symbolType)&&void 0!==c?c:"square"},w.icon),{pickable:!E}),"symbol")}this._startHandler=L.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:P.x+T*M,y:P.y+I/2,size:I,symbolType:null!==(h=C.symbolType)&&void 0!==h?h:"square"},lq.horizontal),C),{pickable:!E}),"symbol"),this._endHandler=L.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:P.x+O*M,y:P.y+I/2,size:I,symbolType:null!==(d=k.symbolType)&&void 0!==d?d:"square"},lq.horizontal),k),{pickable:!E}),"symbol");const e=Math.max(this._startHandler.AABBBounds.width(),R),t=Math.max(this._startHandler.AABBBounds.height(),R),i=Math.max(this._endHandler.AABBBounds.width(),D),n=Math.max(this._endHandler.AABBBounds.height(),D);this._startHandlerMask=L.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:P.x+T*M-e/2,y:P.y+I/2-t/2,width:e,height:t,fill:"white",fillOpacity:0,zIndex:999},lq.horizontal),{pickable:!E}),"rect"),this._endHandlerMask=L.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:P.x+O*M-i/2,y:P.y+I/2-n/2,width:i,height:n,fill:"white",fillOpacity:0,zIndex:999},lq.horizontal),{pickable:!E}),"rect")}else{if(w.visible){const e=(null===(u=w.background)||void 0===u?void 0:u.size)||10;this._middleHandlerRect=L.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:"left"===y?P.x-e:P.x+M,y:P.y+T*I,width:e,height:(O-T)*I},null===(p=w.background)||void 0===p?void 0:p.style),{pickable:!E}),"rect"),this._middleHandlerSymbol=L.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:"left"===y?P.x-e/2:P.x+M+e/2,y:P.y+(T+O)/2*I,angle:Math.PI/180*90,symbolType:null!==(f=null===(g=w.icon)||void 0===g?void 0:g.symbolType)&&void 0!==f?f:"square",strokeBoundsBuffer:0},w.icon),{pickable:!E}),"symbol")}this._startHandler=L.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:P.x+M/2,y:P.y+T*I,size:M,symbolType:null!==(m=C.symbolType)&&void 0!==m?m:"square"},lq.vertical),C),{pickable:!E}),"symbol"),this._endHandler=L.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:P.x+M/2,y:P.y+O*I,size:M,symbolType:null!==(v=k.symbolType)&&void 0!==v?v:"square"},lq.vertical),k),{pickable:!E}),"symbol");const e=Math.max(this._startHandler.AABBBounds.width(),R),t=Math.max(this._startHandler.AABBBounds.height(),R),i=Math.max(this._endHandler.AABBBounds.width(),D),n=Math.max(this._endHandler.AABBBounds.height(),D);this._startHandlerMask=L.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:P.x+M/2+e/2,y:P.y+T*I-t/2,width:n,height:i,fill:"white",fillOpacity:0,zIndex:999},lq.vertical),{pickable:!E}),"rect"),this._endHandlerMask=L.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:P.x+M/2+i/2,y:P.y+O*I-n/2,width:n,height:i,fill:"white",fillOpacity:0,zIndex:999},lq.vertical),{pickable:!E}),"rect")}this._showText&&this.renderText()}computeBasePoints(){const{orient:e}=this.attribute,{position:t,width:i,height:n}=this.getLayoutAttrFromConfig();let r,s;return this._isHorizontal?(r=[{x:t.x,y:t.y+n}],s=[{x:t.x+i,y:t.y+n}]):"left"===e?(r=[{x:t.x+i,y:t.y}],s=[{x:t.x+i,y:t.y+n}]):(r=[{x:t.x,y:t.y+n}],s=[{x:t.x,y:t.y}]),{basePointStart:r,basePointEnd:s}}getPreviewLinePoints(){const e=this._previewData.map((e=>({x:this._previewPointsX&&this._previewPointsX(e),y:this._previewPointsY&&this._previewPointsY(e)})));if(0===e.length)return e;const{basePointStart:t,basePointEnd:i}=this.computeBasePoints();return t.concat(e).concat(i)}getPreviewAreaPoints(){const e=this._previewData.map((e=>({x:this._previewPointsX&&this._previewPointsX(e),y:this._previewPointsY&&this._previewPointsY(e),x1:this._previewPointsX1&&this._previewPointsX1(e),y1:this._previewPointsY1&&this._previewPointsY1(e)})));if(0===e.length)return e;const{basePointStart:t,basePointEnd:i}=this.computeBasePoints();return t.concat(e).concat(i)}setPreviewAttributes(e,t){this._previewGroup||(this._previewGroup=t.createOrUpdateChild("previewGroup",{pickable:!1},"group")),"line"===e?this._previewLine=this._previewGroup.createOrUpdateChild("previewLine",{},"line"):this._previewArea=this._previewGroup.createOrUpdateChild("previewArea",{curveType:"basis"},"area");const{backgroundChartStyle:i={}}=this.attribute;"line"===e&&this._previewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),"area"===e&&this._previewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}setSelectedPreviewAttributes(e,t){this._selectedPreviewGroupClip||(this._selectedPreviewGroupClip=t.createOrUpdateChild("selectedPreviewGroupClip",{pickable:!1},"group"),this._selectedPreviewGroup=this._selectedPreviewGroupClip.createOrUpdateChild("selectedPreviewGroup",{},"group")),"line"===e?this._selectedPreviewLine=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewLine",{},"line"):this._selectedPreviewArea=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewArea",{curveType:"basis"},"area");const{selectedBackgroundChartStyle:i={}}=this.attribute,{start:n,end:r}=this.state,{position:s,width:a,height:o}=this.getLayoutAttrFromConfig();this._selectedPreviewGroupClip.setAttributes({x:this._isHorizontal?s.x+n*a:s.x,y:this._isHorizontal?s.y:s.y+n*o,width:this._isHorizontal?(r-n)*a:a,height:this._isHorizontal?o:(r-n)*o,clip:!0,pickable:!1}),this._selectedPreviewGroup.setAttributes({x:-(this._isHorizontal?s.x+n*a:s.x),y:-(this._isHorizontal?s.y:s.y+n*o),width:this._isHorizontal?(r-n)*a:a,height:this._isHorizontal?o:(r-n)*o,pickable:!1}),"line"===e&&this._selectedPreviewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),"area"===e&&this._selectedPreviewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}maybeAddLabel(e,t,i){let n=this.find((e=>e.name===i),!0);return n?n.setAttributes(t):(n=new mG(t),n.name=i),e.add(n),n}setStartAndEnd(e,t){const{start:i,end:n}=this.attribute;x(e)&&x(t)&&(e!==this.state.start||t!==this.state.end)&&(this.state.start=e,this.state.end=t,i===this.state.start&&n===this.state.end||(this.setStateAttr(e,t,!0),this._dispatchEvent("change",{start:e,end:t,tag:this._activeTag})))}setPreviewData(e){this._previewData=e}setText(e,t){"start"===t?this._startText.setAttribute("text",e):this._endText.setAttribute("text",e)}getStartValue(){return this._startValue}getEndTextValue(){return this._endValue}getMiddleHandlerSize(){var e,t,i,n;const{middleHandlerStyle:r={}}=this.attribute,s=null!==(t=null===(e=r.background)||void 0===e?void 0:e.size)&&void 0!==t?t:10,a=null!==(n=null===(i=r.icon)||void 0===i?void 0:i.size)&&void 0!==n?n:10;return Math.max(s,...z(a))}setPreviewPointsX(e){Q(e)&&(this._previewPointsX=e)}setPreviewPointsY(e){Q(e)&&(this._previewPointsY=e)}setPreviewPointsX1(e){Q(e)&&(this._previewPointsX1=e)}setPreviewPointsY1(e){Q(e)&&(this._previewPointsY1=e)}setStatePointToData(e){Q(e)&&(this._statePointToData=e)}}uq.defaultAttributes=oq;class pq extends cF{_mergeThemeToSpec(e,t){const i=this._theme;let n=e;if(this._shouldMergeThemeToSpec()){const t=e=>{const t=_e({selectedBackgroundChart:{line:{},area:{}}},this._theme,e),{selectedBackgroundChart:i={}}=e,{line:n,area:r}=i;return n&&!1!==n.visible&&(t.selectedBackgroundChart.line.style=Object.assign(Object.assign({},t.selectedBackgroundChart.line.style),{visible:!0})),r&&!1!==r.visible&&(t.selectedBackgroundChart.area.style=Object.assign(Object.assign({},t.selectedBackgroundChart.area.style),{visible:!0})),t},i=e;n=v(i)?i.map((e=>t(e))):t(i)}return this._adjustPadding(n),{spec:n,theme:i}}}class gq extends sq{static getSpecInfo(e){const t=e[this.specKey];if(P(t))return;if(!v(t))return[{spec:t,specPath:[this.specKey],type:r.dataZoom}];const i=[];return t.forEach(((e,t)=>{i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.dataZoom})})),i}constructor(e,t){var i;super(e,t),this.type=r.dataZoom,this.name=r.dataZoom,this.transformerConstructor=pq,this.specKey="dataZoom",this.layoutZIndex=zw.DataZoom,this.layoutLevel=Hw.DataZoom,this.layoutType="region-relative",this._dataToPositionX=e=>{const t="left"===this._orient?this._middleHandlerSize:0,i=this._isHorizontal?this._startHandlerSize/2:0,n=this._isHorizontal?this._stateScale:this._valueScale,r=this._isHorizontal?this._stateField:this._valueField;return n.scale(e[r])+this.getLayoutStartPoint().x+t+i},this._dataToPositionX2=e=>{const t="left"===this._orient?this._middleHandlerSize:0,i=this._isHorizontal?this._startHandlerSize/2:0,n=this._isHorizontal?this._stateScale:this._valueScale,r=n.domain()[0];return n.scale(r)+this.getLayoutStartPoint().x+t+i},this._dataToPositionY=e=>{const t=this._isHorizontal?this._middleHandlerSize:0,i=this._isHorizontal?0:this._startHandlerSize/2,n=this._isHorizontal?this._valueScale:this._stateScale,r=this._isHorizontal?this._valueField:this._stateField;return n.scale(e[r])+this.getLayoutStartPoint().y+t+i},this._dataToPositionY2=e=>{const t=this._isHorizontal?this._middleHandlerSize:0,i=this._isHorizontal?0:this._startHandlerSize/2,n=this._isHorizontal?this._valueScale:this._stateScale,r=n.domain()[0];return n.scale(r)+this.getLayoutStartPoint().y+t+i},this._valueField="y",this._filterMode=null!==(i=e.filterMode)&&void 0!==i?i:"filter"}created(){super.created(),this._initValueScale()}setAttrFromSpec(){var e,t,i,n,r,s,a,o,l,c;super.setAttrFromSpec(),m(this._spec.roam)&&(this._zoomAttr.enable=this._spec.roam,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode),this._backgroundSize=null!==(t=null===(e=this._spec.background)||void 0===e?void 0:e.size)&&void 0!==t?t:30,this._middleHandlerSize=this._computeMiddleHandlerSize(),this._width=this._computeWidth(),this._height=this._computeHeight(),P(null===(r=null===(n=null===(i=this._spec)||void 0===i?void 0:i.startHandler)||void 0===n?void 0:n.style)||void 0===r?void 0:r.size)&&(this._spec.startHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize),P(null===(o=null===(a=null===(s=this._spec)||void 0===s?void 0:s.endHandler)||void 0===a?void 0:a.style)||void 0===o?void 0:o.size)&&(this._spec.endHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize);const h=null===(l=this._spec.startHandler.style.visible)||void 0===l||l,d=null===(c=this._spec.endHandler.style.visible)||void 0===c||c;this._startHandlerSize=h?this._spec.startHandler.style.size:0,this._endHandlerSize=d?this._spec.endHandler.style.size:0}onLayoutEnd(e){this._updateScaleRange(),!1!==this._cacheVisibility&&super.onLayoutEnd(e)}_initValueScale(){const e=this._computeDomainOfValueScale();if(e){const t=new ak;t.domain(e),this._valueScale=t}}_updateScaleRange(){var e,t;const i=(this._startHandlerSize+this._endHandlerSize)/2;if(!this._stateScale||!this._valueScale)return;let n;const r=this._isHorizontal?this.getLayoutRect().width-i:this.getLayoutRect().height-i,s=null!==(t=null===(e=this._relatedAxisComponent)||void 0===e?void 0:e.getScale().range())&&void 0!==t?t:[0,r];this._isHorizontal?(n=this._visible?[0,this._computeWidth()-i]:s,this._stateScale.range(n),this._valueScale.range([this._computeHeight()-this._middleHandlerSize,0])):"left"===this.layoutOrient?(n=this._visible?[0,this._computeHeight()-i]:s,this._stateScale.range(n),this._valueScale.range([this._computeWidth()-this._middleHandlerSize,0])):(n=this._visible?[0,this._computeHeight()-i]:s,this._stateScale.range(n),this._valueScale.range([0,this._computeWidth()-this._middleHandlerSize])),this._component&&!1!==this._cacheVisibility&&this._component.setAttributes({size:{width:this._computeWidth(),height:this._computeHeight()},position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y}})}_computeDomainOfValueScale(){const e=this._data.getLatestData().map((e=>e[this._valueField])),t=e.map((e=>1*e));return e.length?[U(t),V(t)]:null}_computeMiddleHandlerSize(){var e,t,i,n;let r=0;if(null===(t=null===(e=this._spec)||void 0===e?void 0:e.middleHandler)||void 0===t?void 0:t.visible){const e=null!==(i=this._spec.middleHandler.icon.style.size)&&void 0!==i?i:8,t=null!==(n=this._spec.middleHandler.background.size)&&void 0!==n?n:40;r+=Math.max(e,t)}return r}_computeWidth(){return!1===this._visible?0:l(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:this._backgroundSize+this._middleHandlerSize}_computeHeight(){return!1===this._visible?0:l(this._spec.height)?this._spec.height:this._isHorizontal?this._backgroundSize+this._middleHandlerSize:this.getLayoutRect().height-(this._startHandlerSize+this._endHandlerSize)/2}_isScaleValid(e){if(!e||!e.domain())return!1;const t=e.domain();return(!Cn(e.type)||t[0]!==t[1])&&(!An(e.type)||1!==(i=t,i&&v(i)?Array.from(new Set(z(i))):i).length);var i}_getAttrs(e){var t,i,n,r,s;const a=null!==(t=this._spec)&&void 0!==t?t:{};return Object.assign({zIndex:this.layoutZIndex,start:this._start,end:this._end,position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},orient:this._orient,size:{width:this.getLayoutRect().width,height:this.getLayoutRect().height},showDetail:a.showDetail,brushSelect:null!==(i=a.brushSelect)&&void 0!==i&&i,zoomLock:null!==(n=a.zoomLock)&&void 0!==n&&n,minSpan:this._minSpan,maxSpan:this._maxSpan,delayType:a.delayType,delayTime:x(a.delayType)?null!==(r=a.delayTime)&&void 0!==r?r:30:0,realTime:null===(s=a.realTime)||void 0===s||s,previewData:e&&this._data.getLatestData(),previewPointsX:e&&this._dataToPositionX,previewPointsY:e&&this._dataToPositionY},this._getComponentAttrs())}_createOrUpdateComponent(){if(this._visible){const e=this._isHorizontal?this._stateScale:this._valueScale,t=this._isHorizontal?this._valueScale:this._stateScale,i=this._isScaleValid(e)&&this._isScaleValid(t),n=this._getAttrs(i);if(this._component)this._component.setAttributes(n);else{const e=this.getContainer();this._component=new uq(n),this._isHorizontal?i&&this._component.setPreviewPointsY1(this._dataToPositionY2):i&&this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData((e=>this._statePointToData(e))),this._component.addEventListener("change",(e=>{const{start:t,end:i,tag:n}=e.detail;this._handleChange(t,i,void 0,n)})),e.add(this._component),this._updateScaleRange()}}}_handleChange(e,t,i,n){super._handleChange(e,t,i),i&&this._component&&this._component.setStartAndEnd(e,t),this._start=e,this._end=t,this._handleStateChange(this._statePointToData(e),this._statePointToData(t),n)&&this.event.emit(Ir.dataZoomChange,{model:this,value:{filterData:"axis"!==this._filterMode,start:e,end:t,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}_handleDataCollectionChange(){var e;const t=this._data.getDataView();if(t.reRunAllTransform(),null===(e=this._component)||void 0===e||e.setPreviewData(t.latestData),this._valueScale){const e=this._computeDomainOfValueScale();e&&this._valueScale.domain(e)}}_getComponentAttrs(){var e,t,i,n,r,s,a,o,l,c,h;const{middleHandler:d={},startText:u={},endText:p={},backgroundChart:g={},selectedBackgroundChart:f={}}=this._spec;return{backgroundStyle:Yj(null===(e=this._spec.background)||void 0===e?void 0:e.style),startHandlerStyle:Yj(null===(t=this._spec.startHandler)||void 0===t?void 0:t.style),middleHandlerStyle:d.visible?{visible:!0,icon:Yj(null===(i=d.icon)||void 0===i?void 0:i.style),background:{size:null===(n=d.background)||void 0===n?void 0:n.size,style:Yj(null===(r=d.background)||void 0===r?void 0:r.style)}}:{visible:!1},endHandlerStyle:Yj(null===(s=this._spec.endHandler)||void 0===s?void 0:s.style),startTextStyle:{padding:u.padding,formatMethod:u.formatMethod,textStyle:Yj(u.style)},endTextStyle:{padding:p.padding,formatMethod:p.formatMethod,textStyle:Yj(p.style)},selectedBackgroundStyle:Yj(this._spec.selectedBackground.style),dragMaskStyle:Yj(null===(a=this._spec.dragMask)||void 0===a?void 0:a.style),backgroundChartStyle:{line:_e(Yj(null===(o=g.line)||void 0===o?void 0:o.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},Yj(null===(l=g.area)||void 0===l?void 0:l.style))},selectedBackgroundChartStyle:{line:_e(Yj(null===(c=f.line)||void 0===c?void 0:c.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},Yj(null===(h=f.area)||void 0===h?void 0:h.style))},disableTriggerEvent:this._option.disableTriggerEvent}}_getNeedClearVRenderComponents(){return[this._component]}}gq.type=r.dataZoom,gq.transformerConstructor=pq,gq.specKey="dataZoom";const fq={debounce:F,throttle:Nr};s_(),hw();class mq extends qW{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},mq.defaultAttributes,e)),this.name="scrollbar",this._onRailPointerDown=e=>{const{viewX:t,viewY:i}=e,{direction:n,width:r,height:s,range:a}=this.attribute,o=this._sliderSize,[l,c]=this._getScrollRange();let h;if("vertical"===n){const e=i-this._viewPosition.y,t=At(e-o/2,l,c);h=e/s,this._slider.setAttribute("y",t,!0)}else{const e=t-this._viewPosition.x,i=At(e-o/2,l,c);h=e/r,this._slider.setAttribute("x",i,!0)}this.setScrollRange([h-(a[1]-a[0])/2,h+(a[1]-a[0])/2],!1),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()},this._onSliderPointerDown=e=>{e.stopPropagation();const{direction:t}=this.attribute;this._prePos="horizontal"===t?e.clientX:e.clientY,this._dispatchEvent("scrollDown",{pos:this._prePos,event:e}),"browser"===Bf.env?(Bf.addEventListener("pointermove",this._onSliderPointerMove,{capture:!0}),Bf.addEventListener("pointerup",this._onSliderPointerUp)):(this.stage.addEventListener("pointermove",this._onSliderPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onSliderPointerUp),this.stage.addEventListener("pointerupoutside",this._onSliderPointerUp))},this._computeScrollValue=e=>{const{direction:t}=this.attribute;let i,n,r=0;const{width:s,height:a}=this._getSliderRenderBounds();return"vertical"===t?(n=e.clientY,r=n-this._prePos,i=r/a):(n=e.clientX,r=n-this._prePos,i=r/s),[n,i]},this._onSliderPointerMove=fq[this.attribute.delayType]((e=>{e.stopPropagation();const t=this.getScrollRange(),[i,n]=this._computeScrollValue(e);this.setScrollRange([t[0]+n,t[1]+n],!0),this._prePos=i}),this.attribute.delayTime),this._onSliderPointerUp=e=>{e.preventDefault();const{realTime:t=!0,range:i,limitRange:n=[0,1]}=this.attribute,r=this.getScrollRange(),[s,a]=this._computeScrollValue(e),o=[r[0]+a,r[1]+a];t||this._dispatchEvent("scroll",{pre:i,value:yY(o,n[0],n[1])}),this._dispatchEvent("scrollUp",{pre:i,value:yY(o,n[0],n[1])}),"browser"===Bf.env?(Bf.removeEventListener("pointermove",this._onSliderPointerMove,{capture:!0}),Bf.removeEventListener("pointerup",this._onSliderPointerUp)):(this.stage.removeEventListener("pointermove",this._onSliderPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onSliderPointerUp),this.stage.removeEventListener("pointerupoutside",this._onSliderPointerUp))}}setScrollRange(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{direction:i="horizontal",limitRange:n=[0,1],range:r,realTime:s=!0}=this.attribute,a=yY(e,n[0],n[1]);if(t){const e=this._getSliderPos(a);this._slider&&("horizontal"===i?this._slider.setAttribute("x",e[0],!0):this._slider.setAttribute("y",e[0],!0),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame())}this.attribute.range=a,s&&(this._dispatchEvent("scroll",{pre:r,value:a}),this._dispatchEvent("scrollDrag",{pre:r,value:a}))}getScrollRange(){return this.attribute.range}bindEvents(){if(this.attribute.disableTriggerEvent)return;const{delayType:e="throttle",delayTime:t=0}=this.attribute;this._rail&&this._rail.addEventListener("pointerdown",fq[e](this._onRailPointerDown,t)),this._slider&&this._slider.addEventListener("pointerdown",this._onSliderPointerDown)}render(){this._reset();const{direction:e="horizontal",width:t,height:i,range:n,limitRange:r=[0,1],railStyle:s,sliderStyle:a,padding:o=2}=this.attribute,l=this.createOrUpdateChild("scrollbar-container",{},"group"),c=l.createOrUpdateChild("scrollbar-rail",Object.assign({x:0,y:0,width:t,height:i},s),"rect");this._rail=c;const h=this._getSliderRenderBounds(),d=this._getSliderPos(yY(n,r[0],r[1])),u=d[1]-d[0];let p;this._sliderSize=u,p="horizontal"===e?{x:d[0],y:h.y1,width:u,height:h.height}:{x:h.x1,y:d[0],width:h.width,height:u};const g=l.createOrUpdateChild("slider",Object.assign(Object.assign(Object.assign(Object.assign({},p),{cornerRadius:this._getDefaultSliderCornerRadius()}),a),{boundsPadding:nW(o),pickMode:"imprecise"}),"rect");this._slider=g,this._container=l;const f=this._container.AABBBounds;this._viewPosition={x:f.x1,y:f.y1}}_getSliderRenderBounds(){if(this._sliderRenderBounds)return this._sliderRenderBounds;const{width:e,height:t,padding:i=2}=this.attribute,[n,r,s,a]=nW(i),o={x1:a,y1:n,x2:e-r,y2:t-s,width:Math.max(0,e-(a+r)),height:Math.max(0,t-(n+s))};return this._sliderRenderBounds=o,o}_getDefaultSliderCornerRadius(){const{direction:e,round:t}=this.attribute;if(t){const{width:t,height:i}=this._getSliderRenderBounds();return"horizontal"===e?i:t}return 0}_getSliderPos(e){const{direction:t}=this.attribute,{width:i,height:n,x1:r,y1:s}=this._getSliderRenderBounds();return"horizontal"===t?[i*e[0]+r,i*e[1]+r]:[n*e[0]+s,n*e[1]+s]}_getScrollRange(){if(this._sliderLimitRange)return this._sliderLimitRange;const{limitRange:e=[0,1],direction:t}=this.attribute,[i,n]=yY(e,0,1),{width:r,height:s,x1:a,y1:o}=this._getSliderRenderBounds(),l=this._sliderSize;return"horizontal"===t?yY([a+i*r,a+n*r],a,r-l):yY([o+i*s,o+n*s],o,s-l)}_reset(){this._sliderRenderBounds=null,this._sliderLimitRange=null}}mq.defaultAttributes={direction:"horizontal",round:!0,sliderSize:20,sliderStyle:{fill:"rgba(0, 0, 0, .5)"},railStyle:{fill:"rgba(0, 0, 0, .0)"},padding:2,scrollRange:[0,1],delayType:"throttle",delayTime:0,realTime:!0};class vq extends sq{static getSpecInfo(e){const t=e[this.specKey];if(P(t))return;if(!v(t))return[{spec:t,specPath:[this.specKey],type:r.scrollBar}];const i=[];return t.forEach(((e,t)=>{i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.scrollBar})})),i}constructor(e,t){var i;super(e,t),this.type=r.scrollBar,this.name=r.scrollBar,this.specKey="scrollBar",this.layoutZIndex=zw.DataZoom,this.layoutLevel=Hw.DataZoom,this.layoutType="region-relative",this._filterMode=null!==(i=e.filterMode)&&void 0!==i?i:"axis"}setAttrFromSpec(){super.setAttrFromSpec(),m(this._spec.roam)&&(this._zoomAttr.enable=!1,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode)}onLayoutEnd(e){var t,i;this._updateScaleRange(),null===(i=(t=this.effect).onZoomChange)||void 0===i||i.call(t),super.onLayoutEnd(e)}_updateScaleRange(){this._component&&this._component.setAttributes({x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height})}_computeWidth(){return l(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:12}_computeHeight(){return l(this._spec.height)?this._spec.height:this._isHorizontal?12:this.getLayoutRect().height}_getAttrs(){var e,t,i,n,r,s;return Object.assign({zIndex:this.layoutZIndex,x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height,range:[this._start,this._end],direction:this._isHorizontal?"horizontal":"vertical",delayType:null===(e=this._spec)||void 0===e?void 0:e.delayType,delayTime:x(null===(t=this._spec)||void 0===t?void 0:t.delayType)?null!==(n=null===(i=this._spec)||void 0===i?void 0:i.delayTime)&&void 0!==n?n:30:0,realTime:null===(s=null===(r=this._spec)||void 0===r?void 0:r.realTime)||void 0===s||s},this._getComponentAttrs())}_createOrUpdateComponent(){const e=this._getAttrs();if(this._component)this._component.setAttributes(e);else{const t=this.getContainer();this._component=new mq(e),this._component.addEventListener("scroll",(e=>{const t=e.detail.value;this._handleChange(t[0],t[1])})),t.add(this._component)}}_handleChange(e,t,i){super._handleChange(e,t,i),i&&this._component&&this._component.setAttribute("range",[e,t]),this._start=e,this._end=t,this._handleStateChange(this._statePointToData(e),this._statePointToData(t))&&this.event.emit(Ir.scrollBarChange,{model:this,value:{filterData:"axis"!==this._filterMode,start:this._start,end:this._end,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}_handleDataCollectionChange(){}_initCommonEvent(){super._initCommonEvent(),this._component&&this._component.on("scroll",(e=>{const t=e.detail.value;this._handleChange(t[0],t[1])}))}_getComponentAttrs(){const{rail:e,slider:t,innerPadding:i}=this._spec,n={};return P(i)||(n.padding=i),ay(null==e?void 0:e.style)||(n.railStyle=Yj(e.style)),ay(null==t?void 0:t.style)||(n.sliderStyle=Yj(t.style)),n.disableTriggerEvent=this._option.disableTriggerEvent,n}_getNeedClearVRenderComponents(){return[this._component]}}vq.type=r.scrollBar,vq.specKey="scrollBar";const yq=(e,t)=>{const{datum:i,title:n,content:r}=t,s=[],a=i.call(null);return n.visible&&s.push({type:"title",index:0,datum:a,spec:n}),z(r).forEach(((e,t)=>{e.visible&&s.push({type:"content",index:t,datum:a,spec:e})})),s},bq={title:{style:{text:"",fontSize:20,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}},content:{style:{text:"",fontSize:16,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}}};s_(),KT(),fO();class _q extends qW{constructor(){super(...arguments),this.name="indicator"}render(){var e,t,i;const{visible:n,title:r={},content:s,size:a,limitRatio:o=1/0}=this.attribute,l=Math.min(a.width,a.height)*o,c=this.createOrUpdateChild("indicator-container",{x:0,y:0,zIndex:1},"group");if(!0!==n)return void(c&&c.hideAll());if(x(r))if(!1!==r.visible){const i=O({},Br(bq,"title.style"),r.style);"rich"===i.type?this._title=c.createOrUpdateChild("indicator-title",Object.assign(Object.assign({textConfig:i.text},i),{visible:r.visible,x:0,y:0,width:null!==(e=i.width)&&void 0!==e?e:0,height:null!==(t=i.height)&&void 0!==t?t:0}),"richtext"):"html"===i.type?this._title=c.createOrUpdateChild("indicator-title",Object.assign(Object.assign({textConfig:[],html:Object.assign(Object.assign({dom:i.text},oG),i)},i),{visible:r.visible,x:0,y:0}),"richtext"):this._title=c.createOrUpdateChild("indicator-title",Object.assign(Object.assign({},i),{lineHeight:x(i.lineHeight)?i.lineHeight:i.fontSize,visible:r.visible,x:0,y:0}),"text"),r.autoFit&&L(l)&&this._setLocalAutoFit(l,this._title,r),r.autoLimit&&L(o)&&this._title.setAttribute("maxLineWidth",l)}else{const e=c.find((e=>"indicator-title"===e.name),!1);e&&c.removeChild(e),this._title=void 0}if(x(s)){const e=z(s),t=[];e.forEach(((e,i)=>{var n,s;if(!1!==e.visible){const a=O({},Br(bq,"content.style"),e.style);let h;h="rich"===a.type?c.createOrUpdateChild("indicator-content-"+i,Object.assign(Object.assign({textConfig:a.text},a),{visible:r.visible,x:0,y:0,width:null!==(n=a.width)&&void 0!==n?n:0,height:null!==(s=a.height)&&void 0!==s?s:0}),"richtext"):"html"===a.type?c.createOrUpdateChild("indicator-content-"+i,Object.assign(Object.assign({textConfig:[],html:Object.assign(Object.assign({dom:a.text},oG),a)},a),{visible:r.visible,x:0,y:0}),"richtext"):c.createOrUpdateChild("indicator-content-"+i,Object.assign(Object.assign({},a),{lineHeight:x(a.lineHeight)?a.lineHeight:a.fontSize,visible:e.visible,x:0,y:0}),"text"),e.autoFit&&L(l)&&this._setLocalAutoFit(l,h,e),e.autoLimit&&L(o)&&h.setAttribute("maxLineWidth",l),t.push(h)}else{const e=c.find((e=>e.name==="indicator-content-"+i),!1);e&&c.removeChild(e)}})),this._content=t}this._setGlobalAutoFit(l),this._setYPosition();const h=null!==(i=null==c?void 0:c.AABBBounds.height())&&void 0!==i?i:0;c.setAttribute("y",a.height/2-h/2),c.setAttribute("x",a.width/2)}_setLocalAutoFit(e,t,i){var n,r,s,a,o,l,c,h;if("default"!==(null!==(n=i.fitStrategy)&&void 0!==n?n:"default"))return;const d=pG(null!==(s=null===(r=i.style)||void 0===r?void 0:r.text)&&void 0!==s?s:"",null!==(a=i.style)&&void 0!==a?a:{},null===(o=this.stage)||void 0===o?void 0:o.getTheme().text.fontFamily).width;if(d>0){const n=e*(null!==(l=i.fitPercent)&&void 0!==l?l:.5)/d,r=Math.floor((null!==(h=null===(c=i.style)||void 0===c?void 0:c.fontSize)&&void 0!==h?h:20)*n);t.setAttribute("fontSize",r),t.setAttribute("lineHeight",x(i.style.lineHeight)?i.style.lineHeight:r)}}_setGlobalAutoFit(e){var t,i,n,r,s,a,o;const l=e/2,c=[];let h=0;const d=null!==(t=this.attribute.title)&&void 0!==t?t:{};d.autoFit&&"inscribed"===d.fitStrategy?(this._title.setAttribute("fontSize",12),c.push({text:this._title,spec:null!==(i=this.attribute.title)&&void 0!==i?i:{}})):h+=null!==(a=null===(s=null===(r=null===(n=this._title)||void 0===n?void 0:n.AABBBounds)||void 0===r?void 0:r.height)||void 0===s?void 0:s.call(r))&&void 0!==a?a:0;const u=null!==(o=d.space)&&void 0!==o?o:0;if(h+=u,z(this.attribute.content).filter((e=>!1!==e.visible)).forEach(((e,t)=>{var i,n,r,s;const a=this._content[t];e.autoFit&&"inscribed"===e.fitStrategy?(a.setAttribute("fontSize",12),c.push({text:a,spec:e})):h+=null!==(r=null===(n=null===(i=null==a?void 0:a.AABBBounds)||void 0===i?void 0:i.height)||void 0===n?void 0:n.call(i))&&void 0!==r?r:0;const o=null!==(s=e.space)&&void 0!==s?s:0;h+=o})),c.length<=0)return;const p=12/c.reduce(((e,t)=>Math.max(e,t.text.AABBBounds.width())),0)*c.length,g=h/2,f=p**2+1,m=2*g*p,v=g**2-l**2,y=2*(p*((-m+Math.sqrt(m**2-4*f*v))/(2*f))+g),b=(y-h)/c.length;L(y)&&c.forEach((e=>{var t;const i=null===(t=e.spec.style)||void 0===t?void 0:t.lineHeight;e.text.setAttribute("fontSize",b),e.text.setAttribute("lineHeight",x(i)?i:b)}))}_setYPosition(){var e,t,i,n,r,s;let a=0;const o=null!==(n=null===(i=null===(t=null===(e=this._title)||void 0===e?void 0:e.AABBBounds)||void 0===t?void 0:t.height)||void 0===i?void 0:i.call(t))&&void 0!==n?n:0,l=null!==(s=null===(r=this.attribute.title)||void 0===r?void 0:r.space)&&void 0!==s?s:0;z(this.attribute.content).filter((e=>!1!==e.visible)).forEach(((e,t)=>{var i;const n=this._content[t];n.setAttribute("y",o+l+a);const r=null!==(i=e.space)&&void 0!==i?i:0;a+=n.AABBBounds.height()+r}))}}class xq extends dF{constructor(){super(...arguments),this.type=r.indicator,this.name=r.indicator,this.specKey="indicator",this.layoutType="none",this.layoutZIndex=zw.Indicator,this.layoutLevel=Hw.Indicator,this._gap=0,this._activeDatum=null}static getSpecInfo(e){if(this.type!==xq.type)return null;const t=e[this.specKey];if(!v(t))return!1===t.visible?[]:[{spec:t,specPath:[this.specKey],type:r.indicator}];const i=[];return t.forEach(((e,t)=>{e&&!1!==e.visible&&i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.indicator})})),i}created(){super.created(),this.initData(),this.initEvent()}setAttrFromSpec(){super.setAttrFromSpec(),this._gap=this._spec.gap||0,this._title=this._spec.title,this._content=z(this._spec.content),this._regions=this._option.getRegionsInUserIdOrIndex(z(this._spec.regionId),z(this._spec.regionIndex))}onRender(e){}changeRegions(e){}initEvent(){this._option.disableTriggerEvent||"none"!==this._spec.trigger&&("hover"===this._spec.trigger?(this.event.on("hovered",(e=>{e.model&&!this.isRelativeModel(e.model)||this.updateDatum(e.value[0])})),this.event.on("unhovered",(e=>{e.model&&!this.isRelativeModel(e.model)||this.updateDatum(null)}))):(this.event.on("selected",(e=>{e.model&&!this.isRelativeModel(e.model)||this.updateDatum(e.value[0])})),this.event.on("unselected",(e=>{e.model&&!this.isRelativeModel(e.model)||this.updateDatum(null)}))))}updateDatum(e){this._activeDatum=e,this._displayData.updateData();const t=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(t)}initData(){uo(this._option.dataSet,"indicatorFilter",yq);const e=new R(this._option.dataSet,{name:"".concat(this.type,"_").concat(this.id,"_data")});e.transform({type:"indicatorFilter",options:{title:this._title,content:this._content,datum:()=>this._activeDatum}}),e.target.addListener("change",this.updateDatum.bind(this)),this._displayData=new _k(this._option,e)}updateLayoutAttribute(){const e=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(e),super.updateLayoutAttribute()}_getIndicatorAttrs(){const e=this._regions[0],{width:t,height:i}=e.getLayoutRect(),{x:n,y:r}=e.getLayoutStartPoint(),s=[];return z(this._spec.content).forEach((e=>{const t=_e({},this._theme.content,e);s.push({visible:!1!==t.visible&&(!t.field||null!==this._activeDatum),space:t.space||this._gap,autoLimit:t.autoLimit,autoFit:t.autoFit,fitPercent:t.fitPercent,style:Object.assign(Object.assign({},Yj(t.style)),{text:this._createText(t.field,t.style.text)})})})),{visible:!1!==this._spec.visible&&(!1!==this._spec.fixed||null!==this._activeDatum),size:{width:t,height:i},zIndex:this.layoutZIndex,x:n,y:r,dx:this._spec.offsetX?re(this._spec.offsetX,this._computeLayoutRadius()):0,dy:this._spec.offsetY?re(this._spec.offsetY,this._computeLayoutRadius()):0,limitRatio:this._spec.limitRatio||1/0,title:{visible:!1!==this._spec.title.visible&&(!x(this._spec.title.field)||null!==this._activeDatum),space:this._spec.title.space||this._gap,autoLimit:this._spec.title.autoLimit,autoFit:this._spec.title.autoFit,fitPercent:this._spec.title.fitPercent,style:Object.assign(Object.assign({},Yj(this._spec.title.style)),{text:this._createText(this._spec.title.field,this._spec.title.style.text)})},content:s}}_createOrUpdateIndicatorComponent(e){if(this._indicatorComponent)ty(e,this._cacheAttrs)||this._indicatorComponent.setAttributes(e);else{const t=this.getContainer(),i=new _q(e);i.name="indicator",t.add(i),this._indicatorComponent=i,this._indicatorComponent.on("*",((e,t)=>this._delegateEvent(this._indicatorComponent,e,t)))}return this._cacheAttrs=e,this._indicatorComponent}_createText(e,t){var i;return e?this._activeDatum?this._activeDatum[e]:"":Q(t)?null!==(i=t(this._activeDatum,void 0))&&void 0!==i?i:"":null!=t?t:""}_computeLayoutRadius(){const e=this._regions[0],{width:t,height:i}=e.getLayoutRect();return Math.min(t/2,i/2)}isRelativeModel(e){return gr(this._regions,(t=>e===t))||this._regions.includes(e)}_getNeedClearVRenderComponents(){return[this._indicatorComponent]}clear(){this._cacheAttrs=null,super.clear()}}xq.type=r.indicator,xq.specKey="indicator";function Sq(e,t){const i=[];return t.forEach((t=>{const n={x:null,y:null};if(x(t.x)){const i=t.x;v(i)?n.x=i.map((i=>Cq(i,e,t))):n.x=Cq(i,e,t)}if(x(t.y)){const i=t.y;v(i)?n.y=i.map((i=>Cq(i,e,t))):n.y=Cq(i,e,t)}t.getRefRelativeSeries&&(n.getRefRelativeSeries=t.getRefRelativeSeries),i.push(n)})),i}const wq={min:(e,t)=>or(e[0].latestData,t.field),max:(e,t)=>lr(e[0].latestData,t.field),sum:function(e,t){return cr(e[0].latestData,t.field)},average:function(e,t){return hr(e[0].latestData,t.field)},variance:function(e,t){return dr(e[0].latestData,t.field)},standardDeviation:function(e,t){return function(e,t){return Math.sqrt(dr(e,t))}(e[0].latestData,t.field)},median:function(e,t){return function(e,t){return Ln(e.map((e=>e[t])))}(e[0].latestData,t.field)}};function Cq(e,t,i){const n=i.getRelativeSeries(),r=i.getStartRelativeSeries(),s=i.getEndRelativeSeries(),a=n.getData().getLatestData(),o=r.getData().getLatestData(),l=s.getData().getLatestData();if(Q(e))return e(a,o,l,n,r,s);if(k(e)){const{aggrType:i,field:n}=e;return wq[i](t,{field:n})}return e}const kq=["sum","average","min","max","variance","standardDeviation","median"];var Aq,Eq,Tq,Oq=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function Pq(e,t,i){if(!i)return!1;const n=e.map((e=>1*e)),r=U(n),s=V(n);return t<r||t>s}function Mq(e,t,i,n,r,s){var a,o;const{relativeSeries:c}=n;let h;return l(e.x)&&Pq(t,e.x,i)&&(null===(o=null==c?void 0:(a=c.getXAxisHelper()).setExtendDomain)||void 0===o||o.call(a,"marker_xAxis_extend",e.x)),h=J(e.x)?Rq(e.x,r)+s.x:c.getXAxisHelper().dataToPosition([e.x])+s.x,h}function Iq(e,t,i,n,r,s){var a,o;const{relativeSeries:c}=n;let h;return l(e.y)&&Pq(t,e.y,i)&&(null===(o=null===(a=c.getYAxisHelper())||void 0===a?void 0:a.setExtendDomain)||void 0===o||o.call(a,"marker_yAxis_extend",e.y)),h=J(e.y)?Rq(e.y,r)+s.y:c.getYAxisHelper().dataToPosition([e.y])+s.y,h}function Rq(e,t){return Number(e.substring(0,e.length-1))*t/100}function Dq(e){return kq.includes(e)}function Lq(e,t,i,n,r){const s=t.getRegion(),a=s.getLayoutStartPoint(),o=i.getRegion(),l=o.getLayoutStartPoint(),c=Math.abs(Math.min(a.x,l.x)-Math.max(a.x+s.getLayoutRect().width,l.x+o.getLayoutRect().width)),h=Math.abs(Math.min(a.y,l.y)-Math.max(a.y+s.getLayoutRect().height,l.y+o.getLayoutRect().height)),d={relativeSeries:n,startRelativeSeries:t,endRelativeSeries:i},u=[],p=e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData,g=n.getXAxisHelper().getScale(0).domain(),f=n.getYAxisHelper().getScale(0).domain();return p.forEach((e=>{const t=x(e.x),i=x(e.y);if(t&&i){const t=Mq(e,g,r,d,c,a),i=Iq(e,f,r,d,h,a);u.push([{x:t,y:i}])}else if(x(e.x)){const t=Mq(e,g,r,d,c,a),i=Math.max(a.y+s.getLayoutRect().height,l.y+o.getLayoutRect().height),n=Math.min(a.y,l.y);u.push([{x:t,y:i},{x:t,y:n}])}else if(x(e.y)){const t=Math.min(a.x,l.x),i=Iq(e,f,r,d,h,a),n=Math.max(a.x+s.getLayoutRect().width,l.x+o.getLayoutRect().width);u.push([{x:t,y:i},{x:n,y:i}])}})),u}function jq(e,t,i,n){const r=[],s=e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData,a=v(n);return s.forEach(((e,s)=>{var o,c,h,d;const u=(null==e?void 0:e.getRefRelativeSeries)?e.getRefRelativeSeries():t,p=u.getRegion(),g=p.getLayoutStartPoint(),{width:f,height:m}=p.getLayoutRect();let v=0,y=0;if(n){const e=a?n[s]:n,t=e.x,i=e.y;t&&(v=J(t)?Number(t.substring(0,t.length-1))*f/100:t),i&&(y=J(i)?Number(i.substring(0,i.length-1))*m/100:i)}const b=u.getXAxisHelper().getScale(0).domain(),_=u.getYAxisHelper().getScale(0).domain(),x=z(e.x),S=z(e.y);1===x.length&&l(x[0])&&Pq(b,x[0],i)&&(null===(c=null===(o=u.getXAxisHelper())||void 0===o?void 0:o.setExtendDomain)||void 0===c||c.call(o,"marker_xAxis_extend",x[0])),1===S.length&&l(S[0])&&Pq(_,S[0],i)&&(null===(d=null===(h=u.getYAxisHelper())||void 0===h?void 0:h.setExtendDomain)||void 0===d||d.call(h,"marker_yAxis_extend",S[0])),r.push({x:u.getXAxisHelper().dataToPosition(x)+g.x+v,y:u.getYAxisHelper().dataToPosition(S)+g.y+y})})),r}function Fq(e,t,i){if(i){const i=t.getRegion(),{x:n,y:r}=i.getLayoutStartPoint(),{width:s,height:a}=i.getLayoutRect();return e.map((e=>{let{x:t,y:i}=e;return J(t)&&(t=Rq(t,s)),t+=n,J(i)&&(i=Rq(i,a)),i+=r,{x:t,y:i}}))}const{width:n,height:r}=t.getOption().getChart().getCanvasRect();return e.map((e=>{let{x:t,y:i}=e;return J(t)&&(t=Rq(t,n)),J(i)&&(i=Rq(i,r)),{x:t,y:i}}))}function Bq(e){let t=1/0,i=-1/0,n=1/0,r=-1/0;return e.forEach((e=>{const s=e.getLayoutStartPoint(),a=e.getLayoutRect();s.x<t&&(t=s.x),s.x+a.width>i&&(i=s.x+a.width),s.y<n&&(n=s.y),s.y+a.height>r&&(r=s.y+a.height)})),{minX:t,maxX:i,minY:n,maxY:r}}function Nq(e){const{labelBackground:t={},style:i,shape:n}=e,r=Oq(e,["labelBackground","style","shape"]);if(!1!==e.visible){const e=r;return(null==n?void 0:n.visible)?e.shape=Object.assign({visible:!0},Yj(n.style)):e.shape={visible:!1},!1!==t.visible?(e.panel=Object.assign({visible:!0},Yj(t.style)),x(t.padding)&&(e.padding=nW(t.padding))):(e.panel={visible:!1},e.padding=0),i&&(e.textStyle=Yj(i)),e}return{visible:!1}}class zq extends qW{constructor(){super(...arguments),this.name="marker"}setAttribute(e,t,i){super.setAttribute(e,t,i),"visible"===e&&this.render()}_initContainer(){var e,t;const{limitRect:i={},clipInRange:n}=this.attribute;let r;if(n){const n=bp.group(Object.assign(Object.assign({},i),{clip:!0,pickable:!1}));r=bp.group({x:-(null!==(e=i.x)&&void 0!==e?e:0),y:-(null!==(t=i.y)&&void 0!==t?t:0),pickable:!1}),n.add(r),this._containerClip=n,this.add(n)}else r=bp.group({x:0,y:0,pickable:!1}),this.add(r);r.name="marker-container",this._container=r}_updateContainer(){var e,t;const{limitRect:i={},clipInRange:n}=this.attribute;this._containerClip&&this._containerClip.setAttributes(Object.assign({},i)),this._container.setAttributes({x:n?-(null!==(e=i.x)&&void 0!==e?e:0):0,y:n?-(null!==(t=i.y)&&void 0!==t?t:0):0})}render(){var e;this.setAttribute("pickable",!1);const t=null===(e=this.attribute.visible)||void 0===e||e;!1===this.attribute.interactive&&this.setAttribute("childrenPickable",!1),t&&this.isValidPoints()?this._container?(this._updateContainer(),this.updateMarker()):(this._initContainer(),this.initMarker(this._container)):(this._container=null,this.removeAllChild())}}!function(e){e.start="start",e.middle="middle",e.end="end",e.insideStartTop="insideStartTop",e.insideStartBottom="insideStartBottom",e.insideMiddleTop="insideMiddleTop",e.insideMiddleBottom="insideMiddleBottom",e.insideEndTop="insideEndTop",e.insideEndBottom="insideEndBottom"}(Aq||(Aq={})),function(e){e.left="left",e.right="right",e.top="top",e.bottom="bottom",e.middle="middle",e.insideLeft="insideLeft",e.insideRight="insideRight",e.insideTop="insideTop",e.insideBottom="insideBottom"}(Eq||(Eq={})),function(e){e.top="top",e.bottom="bottom",e.middle="middle",e.insideTop="insideTop",e.insideBottom="insideBottom",e.insideMiddle="insideMiddle"}(Tq||(Tq={}));const Hq={startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{position:Aq.end,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},Vq={start:{textAlign:"right",textBaseline:"middle"},insideStartTop:{textAlign:"left",textBaseline:"bottom"},insideStartBottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"left",textBaseline:"middle"},insideEndTop:{textAlign:"right",textBaseline:"bottom"},insideEndBottom:{textAlign:"right",textBaseline:"top"}},Uq={label:{position:Eq.right,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}},Wq={left:{textAlign:"right",textBaseline:"middle"},insideLeft:{textAlign:"left",textBaseline:"middle"},right:{textAlign:"left",textBaseline:"middle"},insideRight:{textAlign:"right",textBaseline:"middle"},top:{textAlign:"center",textBaseline:"bottom"},insideTop:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"},insideBottom:{textAlign:"center",textBaseline:"bottom"},middle:{textAlign:"center",textBaseline:"middle"}},Gq={top:{textAlign:"left",textBaseline:"bottom"},bottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"left",textBaseline:"middle"},insideTop:{textAlign:"right",textBaseline:"bottom"},insideBottom:{textAlign:"right",textBaseline:"top"},insideMiddle:{textAlign:"right",textBaseline:"middle"}};function Kq(e,t){const{x1:i,y1:n,x2:r,y2:s}=t,{x1:a,y1:o,x2:l,y2:c}=e.AABBBounds;let h=0,d=0;return a<i&&(h=i-a),o<n&&(d=n-o),l>r&&(h=r-l),c>s&&(d=s-c),{dx:h,dy:d}}function Yq(e,t){const{dx:i,dy:n}=Kq(e,t),{dx:r=0,dy:s=0}=e.attribute;i&&e.setAttribute("dx",i+r),n&&e.setAttribute("dy",n+s)}function Xq(){s_(),gG()}Xq(),ZW();class qq extends zq{getLine(){return this._line}getLabel(){return this._label}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},qq.defaultAttributes,e)),this.name="markLine"}setLabelPos(){var e,t;const{label:i={},limitRect:n}=this.attribute,{position:r="end",refX:s=0,refY:a=0,confine:o}=i,l=this._line.getMainSegmentPoints(),c=null!==(e=this._line.getEndAngle())&&void 0!==e?e:0,h=s*Math.cos(c)+a*Math.cos(c-Math.PI/2),d=s*Math.sin(c)+a*Math.sin(c-Math.PI/2);let u;if(u=r.includes("start")||r.includes("Start")?{x:l[0].x+h,y:l[0].y+d}:r.includes("middle")||r.includes("Middle")?{x:(l[0].x+l[l.length-1].x)/2+h,y:(l[0].y+l[l.length-1].y)/2+d}:{x:l[l.length-1].x+h,y:l[l.length-1].y+d},this._label.setAttributes(Object.assign(Object.assign({},u),{angle:i.autoRotate?c+(null!==(t=i.refAngle)&&void 0!==t?t:0):0,textStyle:Object.assign(Object.assign({},Vq[r]),i.textStyle)})),n&&o){const{x:e,y:t,width:i,height:r}=n;Yq(this._label,{x1:e,y1:t,x2:e+i,y2:t+r})}}initMarker(e){const{points:t,startSymbol:i,endSymbol:n,label:r,lineStyle:s,mainSegmentIndex:a,multiSegment:o}=this.attribute,l=new QW({points:t,startSymbol:i,endSymbol:n,lineStyle:s,mainSegmentIndex:a,multiSegment:o,pickable:!1});l.name="mark-line-line",this._line=l,e.add(l);const c=new mG(Object.assign({},r));c.name="mark-line-label",this._label=c,e.add(c),this.setLabelPos()}updateMarker(){const{points:e,startSymbol:t,endSymbol:i,label:n,lineStyle:r,mainSegmentIndex:s,multiSegment:a}=this.attribute;this._line&&this._line.setAttributes({points:e,startSymbol:t,endSymbol:i,lineStyle:r,mainSegmentIndex:s,multiSegment:a}),this._label&&this._label.setAttributes(Object.assign({dx:0,dy:0},n)),this.setLabelPos()}isValidPoints(){const{points:e}=this.attribute;if(!e||e.length<2)return!1;let t=!0;return e.forEach((e=>{if(e.length)e.forEach((e=>{L(e.x)&&L(e.y)||(t=!1)}));else if(!L(e.x)||!L(e.y))return void(t=!1)})),t}}qq.defaultAttributes=Hq;class Zq extends dF{constructor(){super(...arguments),this.layoutType="none",this._layoutOffsetX=0,this._layoutOffsetY=0}getRelativeSeries(){return this._relativeSeries}created(){super.created(),this.initEvent(),this._bindSeries(),this._initDataView()}_getAllRelativeSeries(){return{getRelativeSeries:()=>this._relativeSeries,getStartRelativeSeries:()=>this._startRelativeSeries,getEndRelativeSeries:()=>this._endRelativeSeries}}_getFieldInfoFromSpec(e,t,i){const n="x"===e?i.getSpec().xField:i.getSpec().yField;return _(t)&&Dq(t)?{field:n,aggrType:t}:t}_processSpecX(e){const t=this._relativeSeries;return Object.assign({x:this._getFieldInfoFromSpec("x",e,t)},this._getAllRelativeSeries())}_processSpecY(e){const t=this._relativeSeries;return Object.assign({y:this._getFieldInfoFromSpec("y",e,t)},this._getAllRelativeSeries())}_processSpecXY(e,t){const i=this._relativeSeries;return Object.assign({x:this._getFieldInfoFromSpec("x",e,i),y:this._getFieldInfoFromSpec("y",t,i)},this._getAllRelativeSeries())}_processSpecCoo(e){var t;return(null!==(t=e.coordinates)&&void 0!==t?t:z(e.coordinate)).map((e=>{const t=this._getSeriesByIdOrIndex(e.refRelativeSeriesId,e.refRelativeSeriesIndex),{xField:i,yField:n}=t.getSpec(),{xFieldDim:r,xFieldIndex:s,yFieldDim:a,yFieldIndex:o}=e;let l=i;x(s)&&(l=z(i)[s]),r&&z(i).includes(r)&&(l=r);let c=n;x(o)&&(c=z(n)[o]),a&&z(n).includes(a)&&(c=a);const h=Object.assign({x:void 0,y:void 0},this._getAllRelativeSeries());return _(e[l])&&Dq(e[l])?h.x={field:l,aggrType:e[l]}:h.x=z(l).map((t=>e[t])),_(e[c])&&Dq(e[c])?h.y={field:c,aggrType:e[c]}:h.y=z(c).map((t=>e[t])),h.getRefRelativeSeries=()=>t,h}))}updateLayoutAttribute(){var e,t,i;if(null===(e=this._spec.visible)||void 0===e||e){if(!this._markerComponent){const e=this._createMarkerComponent();e.name=null!==(t=this._spec.name)&&void 0!==t?t:this.type,e.id=null!==(i=this._spec.id)&&void 0!==i?i:"".concat(this.type,"-").concat(this.id),this._markerComponent=e,this.getContainer().add(this._markerComponent),this._markerComponent.on("*",((e,t)=>this._delegateEvent(this._markerComponent,e,t)))}this._markerLayout()}super.updateLayoutAttribute()}_getSeriesByIdOrIndex(e,t){var i,n;let r;return r=null===(i=this._option.getSeriesInUserIdOrIndex(x(e)?[e]:[],[t]))||void 0===i?void 0:i[0],r||(r=null!==(n=this._relativeSeries)&&void 0!==n?n:this._getFirstSeries()),r}_bindSeries(){const e=this._spec;this._relativeSeries=this._getSeriesByIdOrIndex(e.relativeSeriesId,e.relativeSeriesIndex),this._startRelativeSeries=this._getSeriesByIdOrIndex(e.startRelativeSeriesId,e.startRelativeSeriesIndex),this._endRelativeSeries=this._getSeriesByIdOrIndex(e.endRelativeSeriesId,e.endRelativeSeriesIndex)}initEvent(){}onRender(e){}changeRegions(e){}clear(){super.clear(),this._firstSeries=null}_getFirstSeries(){var e;if(this._firstSeries)return this._firstSeries;const t=fr(this._regions);return t?(this._firstSeries=t,t):(null===(e=this._option)||void 0===e||e.onError("need at least one series"),null)}_getNeedClearVRenderComponents(){return[this._markerComponent]}onLayoutStart(e,t,i){P(this._spec.offsetX)||(this._layoutOffsetX=ee(this._spec.offsetX,t.width,t)),P(this._spec.offsetY)||(this._layoutOffsetY=ee(this._spec.offsetY,t.height,t)),super.onLayoutStart(e,t,i)}}function Qq(e,t){return function(e,t,i){const{predict:n}=In(e,(e=>e[t]),(e=>e[i])),r=or(e,t),s=lr(e,t),a=n(r),o=n(s);return[{[t]:r,[i]:a},{[t]:s,[i]:o}]}(e[0].latestData,t.fieldX,t.fieldY)}function $q(e,t){if(t&&t.getRelativeSeries){const i=t.getRelativeSeries();if(i){const t=i.getViewData();return t&&t.latestData&&t.latestData.length?e:[]}}return e}class Jq extends Zq{constructor(){super(...arguments),this.type=r.markLine,this.name=r.markLine,this.specKey="markLine",this.layoutZIndex=zw.MarkLine}static getSpecInfo(e){const t=e[this.specKey];if(ay(t))return;if(!v(t)&&!1!==t.visible)return[{spec:t,specPath:[this.specKey],type:r.markLine}];const i=[];return t.forEach(((e,t)=>{!1!==e.visible&&i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.markLine})})),i}_createMarkerComponent(){var e,t,i;const{label:n={},startSymbol:r={},endSymbol:s={}}=this._spec,a={zIndex:this.layoutZIndex,interactive:null!==(e=this._spec.interactive)&&void 0!==e&&e,points:[{x:0,y:0},{x:0,y:0}],lineStyle:null===(t=this._spec.line)||void 0===t?void 0:t.style,clipInRange:null!==(i=this._spec.clip)&&void 0!==i&&i,label:Nq(n)};return r.visible?a.startSymbol=Object.assign(Object.assign({},r),{visible:!0,style:Yj(r.style)}):a.startSymbol={visible:!1},s.visible?a.endSymbol=Object.assign(Object.assign({},s),{visible:!0,style:Yj(s.style)}):a.endSymbol={visible:!1},new qq(a)}_markerLayout(){var e,t,i,n,r,s,a;const o=this._spec,l=this._markerData,c=this._startRelativeSeries,h=this._endRelativeSeries,d=this._relativeSeries,u=x(o.coordinates),p=x(o.process),g=p&&x(o.process.x),f=p&&x(o.process.y),m=u&&(!p||"process"in o&&"xy"in o.process),v=x(o.positions),y=null!==(e=o.autoRange)&&void 0!==e&&e;let b=[];if(this._isXYLayout||u&&g||u&&f){const e=Lq(l,c,h,d,y);b=1===e.length?e[0]:e.map((e=>e[0]))}else m?b=jq(l,d,y,o.coordinatesOffset):v&&(b=Fq(o.positions,d,o.regionRelative));const _=this._relativeSeries.getViewData().latestData,S=l.latestData[0]&&l.latestData[0].latestData?l.latestData[0].latestData:l.latestData;let w;if(o.clip||(null===(t=o.label)||void 0===t?void 0:t.confine)){const{minX:e,maxX:t,minY:i,maxY:n}=Bq([c.getRegion(),h.getRegion(),d.getRegion()]);w={x:e,y:i,width:t-e,height:n-i}}const C=null!==(n=null===(i=this._markerComponent)||void 0===i?void 0:i.attribute)&&void 0!==n?n:{},k=Object.assign(Object.assign({},C.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(S,_):null===(r=C.label)||void 0===r?void 0:r.text});if("type-step"===this._spec.type){const{multiSegment:e,mainSegmentIndex:t}=this._spec.line||{},{connectDirection:i,expandDistance:n=0}=this._spec;let r;if(J(n)){const e=c.getRegion(),t=e.getLayoutStartPoint(),s=h.getRegion(),a=s.getLayoutStartPoint();if("bottom"===i||"top"===i){const i=Math.abs(Math.min(t.y,a.y)-Math.max(t.y+e.getLayoutRect().height,a.y+s.getLayoutRect().height));r=Number(n.substring(0,n.length-1))*i/100}else{const i=Math.abs(Math.min(t.x,a.x)-Math.max(t.x+e.getLayoutRect().width,a.x+s.getLayoutRect().width));r=Number(n.substring(0,n.length-1))*i/100}}else r=n;const a=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=[],s=e.y-t.y,a=e.x-t.x;switch(i){case"top":r.push(e),r.push({x:e.x,y:s>0?e.y-n-Math.abs(s):e.y-n}),r.push({x:t.x,y:s>0?t.y-n:t.y-n-Math.abs(s)}),r.push(t);break;case"bottom":r.push(e),r.push({x:e.x,y:s<0?e.y+n+Math.abs(s):e.y+n}),r.push({x:t.x,y:s<0?t.y+n:t.y+n+Math.abs(s)}),r.push(t);break;case"left":r.push(e),r.push({x:a>0?e.x-n-Math.abs(a):e.x-n,y:e.y}),r.push({x:a>0?t.x-n:t.x-n-Math.abs(a),y:t.y}),r.push(t);break;case"right":r.push(e),r.push({x:a>0?e.x+n:e.x+n+Math.abs(a),y:e.y}),r.push({x:a>0?t.x+n+Math.abs(a):t.x+n,y:t.y}),r.push(t)}return r}(b[0],b[1],i,r);let o;o=e&&x(t)?{position:"middle",autoRotate:!1,refX:0,refY:0}:Object.assign(Object.assign({position:"start",autoRotate:!1},function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=e.y-t.y,s=e.x-t.x;return"bottom"===i?{dx:s>0?-s/2:Math.abs(s/2),dy:r>0?n:Math.abs(r)+n}:"top"===i?{dx:s>0?-Math.abs(s/2):+Math.abs(s/2),dy:r>0?-(Math.abs(r)+n):-n}:"left"===i?{dx:s>0?-s-n:-n,dy:r>0?-r/2:Math.abs(r/2)}:"right"===i?{dx:s>0?n:Math.abs(s)+n,dy:r>0?-r/2:Math.abs(r/2)}:{}}(b[0],b[1],i,r)),{refX:0,refY:0}),null===(s=this._markerComponent)||void 0===s||s.setAttributes({points:e?[[a[0],a[1]],[a[1],a[2]],[a[2],a[3]]]:a,label:Object.assign(Object.assign(Object.assign({},k),o),{textStyle:Object.assign(Object.assign({},C.label.textStyle),{textAlign:"center",textBaseline:"middle"})}),limitRect:w,multiSegment:e,mainSegmentIndex:t,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}else null===(a=this._markerComponent)||void 0===a||a.setAttributes({points:b,label:k,limitRect:w,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}_initDataView(){const e=this._spec,t=this._relativeSeries,i="x"in e,n="y"in e,r="x1"in e,s="y1"in e,a="coordinates"in e,o=i&&!n&&!s,l=i&&n&&s,c=n&&!i&&!r,h=n&&i&&r,d=i&&n&&r&&s;if(this._markerData=t.getViewData(),!(o||c||l||h||d||a))return;let u;uo(this._option.dataSet,"markerAggregation",Sq),uo(this._option.dataSet,"markerRegression",Qq),uo(this._option.dataSet,"markerFilter",$q),this._isXYLayout=o||l||c||h||d;let p=t.getViewData(),g=!0,f=!1;if(d){const{x:t,x1:i,y:n,y1:r}=e;u=[this._processSpecXY(t,n),this._processSpecXY(i,r)]}else if(o)u=[this._processSpecX(e.x)];else if(c)u=[this._processSpecY(e.y)];else if(l){const{x:t,y:i,y1:n}=e;u=[this._processSpecXY(t,i),this._processSpecXY(t,n)]}else if(h){const{x:t,x1:i,y:n}=e;u=[this._processSpecXY(t,n),this._processSpecXY(i,n)]}else if(a){if(u=this._processSpecCoo(e),g=!1,p=new R(this._option.dataSet,{name:"".concat(this.type,"_").concat(this.id,"_data")}).parse([t.getViewData()],{type:"dataview"}).transform({type:"markerAggregation",options:u}),e.process&&"x"in e.process&&(u=[this._processSpecX(e.process.x)],g=!0),e.process&&"y"in e.process&&(u=[this._processSpecY(e.process.y)],g=!0),e.process&&"xy"in e.process){const{xField:e,yField:i}=t.getSpec();u={fieldX:e,fieldY:i},f=!0}}else g=!1;const m=new R(this._option.dataSet);m.parse([p],{type:"dataview"}),g&&m.transform({type:"markerAggregation",options:u}),f&&m.transform({type:"markerRegression",options:u}),(g||f)&&m.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),m.target.on("change",(()=>{this._markerLayout()})),this._markerData=m}}Jq.type=r.markLine,Jq.specKey="markLine";s_(),v_(),fO();class eZ extends qW{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},eZ.defaultAttributes,e)),this.name="title"}render(){var e,t,i,n,r,s,a,o,l,c,h,d,u,p,g,f,m,y,b,_,S,w,C,k,A,E,T,O,P,M,I,R,D,L,j,F,B,N,z,H,V,U;const{textType:W,text:G,subtextType:K,textStyle:Y={},subtext:X,subtextStyle:q={},width:Z,height:Q,minWidth:$,maxWidth:J,minHeight:ee,maxHeight:te,align:ie,verticalAlign:ne,padding:re=0}=this.attribute,se=nW(re),ae=this.createOrUpdateChild("title-container",{x:se[3],y:se[0],zIndex:1},"group");if(!1!==this.attribute.visible&&!1!==Y.visible)if("rich"===W||x(Y.character)){const c=Object.assign({x:null!==(e=Y.x)&&void 0!==e?e:0,y:null!==(t=Y.y)&&void 0!==t?t:0,width:null!==(n=null!==(i=Y.width)&&void 0!==i?i:Z)&&void 0!==n?n:0,height:null!==(s=null!==(r=Y.height)&&void 0!==r?r:Q)&&void 0!==s?s:0,ellipsis:null===(a=Y.ellipsis)||void 0===a||a,wordBreak:null!==(o=Y.wordBreak)&&void 0!==o?o:"break-word",maxHeight:Y.maxHeight,maxWidth:Y.maxWidth,textConfig:null!==(l=Y.character)&&void 0!==l?l:G},Y);this._mainTitle=ae.createOrUpdateChild("mainTitle",c,"richtext")}else if("html"===W){const e=Object.assign({html:Object.assign(Object.assign({dom:G},oG),Y),x:null!==(c=Y.x)&&void 0!==c?c:0,y:null!==(h=Y.y)&&void 0!==h?h:0,width:null!==(u=null!==(d=Y.width)&&void 0!==d?d:Z)&&void 0!==u?u:0,height:null!==(g=null!==(p=Y.height)&&void 0!==p?p:Q)&&void 0!==g?g:0,ellipsis:null===(f=Y.ellipsis)||void 0===f||f,wordBreak:null!==(m=Y.wordBreak)&&void 0!==m?m:"break-word",maxHeight:Y.maxHeight,maxWidth:Y.maxWidth,textConfig:[]},Y);this._mainTitle=ae.createOrUpdateChild("mainTitle",e,"richtext")}else x(G)&&(this._mainTitle=ae.createOrUpdateChild("mainTitle",Object.assign(Object.assign({text:v(G)?G:[G]},Y),{maxLineWidth:null!==(y=Y.maxLineWidth)&&void 0!==y?y:Z,heightLimit:Y.heightLimit,lineClamp:Y.lineClamp,ellipsis:null===(b=Y.ellipsis)||void 0===b||b,x:0,y:0}),"wrapText"));const oe=this._mainTitle?this._mainTitle.AABBBounds.height():0,le=this._mainTitle?this._mainTitle.AABBBounds.width():0;if(!1!==this.attribute.visible&&!1!==q.visible)if("rich"===K||x(q.character)){const e=Object.assign({x:null!==(_=q.x)&&void 0!==_?_:0,y:null!==(S=q.y)&&void 0!==S?S:0,width:null!==(C=null!==(w=q.width)&&void 0!==w?w:Z)&&void 0!==C?C:0,height:null!==(A=null!==(k=q.height)&&void 0!==k?k:Q)&&void 0!==A?A:0,ellipsis:null===(E=q.ellipsis)||void 0===E||E,wordBreak:null!==(T=q.wordBreak)&&void 0!==T?T:"break-word",maxHeight:q.maxHeight,maxWidth:q.maxWidth,textConfig:null!==(O=q.character)&&void 0!==O?O:X},q);this._subTitle=ae.createOrUpdateChild("subTitle",e,"richtext")}else if("html"===K){const e=Object.assign({html:Object.assign(Object.assign({dom:X},oG),q),x:null!==(P=q.x)&&void 0!==P?P:0,y:null!==(M=q.y)&&void 0!==M?M:0,width:null!==(R=null!==(I=q.width)&&void 0!==I?I:Z)&&void 0!==R?R:0,height:null!==(L=null!==(D=q.height)&&void 0!==D?D:Q)&&void 0!==L?L:0,ellipsis:null===(j=q.ellipsis)||void 0===j||j,wordBreak:null!==(F=q.wordBreak)&&void 0!==F?F:"break-word",maxHeight:q.maxHeight,maxWidth:q.maxWidth,textConfig:[]},q);this._subTitle=ae.createOrUpdateChild("subTitle",e,"richtext")}else x(X)&&(this._subTitle=ae.createOrUpdateChild("subTitle",Object.assign(Object.assign({text:v(X)?X:[X]},q),{maxLineWidth:null!==(B=q.maxLineWidth)&&void 0!==B?B:Z,heightLimit:q.heightLimit,lineClamp:q.lineClamp,ellipsis:null===(N=q.ellipsis)||void 0===N||N,x:0,y:oe}),"wrapText"));const ce=this._subTitle?this._subTitle.AABBBounds.height():0,he=this._subTitle?this._subTitle.AABBBounds.width():0;let de=Math.max(le,he),ue=oe+(null!==(z=q.height)&&void 0!==z?z:ce);if(x(Z)&&(de=Z,this._mainTitle&&this._mainTitle.setAttribute("maxLineWidth",Z),this._subTitle&&this._subTitle.setAttribute("maxLineWidth",Z)),x(Q)&&(ue=Q),x($)&&de<$&&(de=$),x(J)&&(this._mainTitle&&this._mainTitle.setAttribute("maxLineWidth",J),this._subTitle&&this._subTitle.setAttribute("maxLineWidth",J),this._mainTitle&&this._mainTitle.setAttribute("maxWidth",J),this._subTitle&&this._subTitle.setAttribute("maxWidth",J),de>J&&(de=J)),x(ee)&&ue<ee&&(ue=ee),x(te)&&(this._mainTitle&&this._mainTitle.setAttribute("maxHeight",te),this._subTitle&&this._subTitle.setAttribute("maxHeight",te-oe),ue>te&&(ue=te)),ae.attribute.width=de,ae.attribute.height=ue,ae.attribute.boundsPadding=se,this._mainTitle){if(x(ie)||x(Y.align)){const e=Y.align?Y.align:ie,t=null!==(H=Y.width)&&void 0!==H?H:le;"left"===e?(this._mainTitle.setAttribute("x",0),this._mainTitle.setAttribute("textAlign","left")):"center"===e?(this._mainTitle.setAttribute("x",t/2),this._mainTitle.setAttribute("textAlign","center")):"right"===e&&(this._mainTitle.setAttribute("x",t),this._mainTitle.setAttribute("textAlign","right"))}if(x(ne)||x(Y.verticalAlign)){const e=Y.verticalAlign?Y.verticalAlign:ne,t=Y.height?Y.height:ue;"top"===e?(this._mainTitle.setAttribute("y",0),this._mainTitle.setAttribute("textBaseline","top")):"middle"===e?(this._mainTitle.setAttribute("y",t/2),this._mainTitle.setAttribute("textBaseline","middle")):"bottom"===e&&(this._mainTitle.setAttribute("y",t),this._mainTitle.setAttribute("textBaseline","bottom"))}}if(this._subTitle){if(x(ie)||x(q.align)){const e=q.align?q.align:ie,t=null!==(V=q.width)&&void 0!==V?V:he;"left"===e?(this._subTitle.setAttribute("x",0),this._subTitle.setAttribute("textAlign","left")):"center"===e?(this._subTitle.setAttribute("x",t/2),this._subTitle.setAttribute("textAlign","center")):"right"===e&&(this._subTitle.setAttribute("x",t),this._subTitle.setAttribute("textAlign","right"))}if(x(ne)||x(Y.verticalAlign)){const e=q.verticalAlign?q.verticalAlign:ne,t=oe,i=null!==(U=q.height)&&void 0!==U?U:0;"top"===e?(this._subTitle.setAttribute("y",t),this._subTitle.setAttribute("textBaseline","top")):"middle"===e?(this._subTitle.setAttribute("y",t+i/2),this._subTitle.setAttribute("textBaseline","middle")):"bottom"===e&&(this._subTitle.setAttribute("y",t+i),this._subTitle.setAttribute("textBaseline","bottom"))}}}}eZ.defaultAttributes={textStyle:{ellipsis:"...",fill:"#333",fontSize:20,fontWeight:"bold",textAlign:"left",textBaseline:"top"},subtextStyle:{ellipsis:"...",fill:"#6F6F6F",fontSize:16,fontWeight:"normal",textAlign:"left",textBaseline:"top"}};class tZ extends dF{get orient(){return this._orient}constructor(e,t){super(e,t),this.type=r.title,this.specKey=r.title,this.layoutType="normal",this.layoutZIndex=zw.Title,this.layoutLevel=Hw.Title,this._orient="top",this._orient=$(e.orient)?e.orient:"top"}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}static getSpecInfo(e){const t=e[this.specKey];if(!t||!1===t.visible)return null;if(!v(t))return[{spec:t,specPath:[this.specKey],type:r.title}];const i=[];return t.forEach(((e,t)=>{!1!==e.visible&&i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.title})})),i}onRender(e){}_compareSpec(e,t){const i=super._compareSpec(e,t);return(null==t?void 0:t.orient)!==(null==e?void 0:e.orient)&&(i.reMake=!0),i.change=!0,i.reRender=!0,i}changeRegions(e){}update(e){}resize(e){}afterSetLayoutStartPoint(e){L(e.x)&&this._titleComponent&&this._titleComponent.setAttribute("x",e.x),L(e.y)&&this._titleComponent&&this._titleComponent.setAttribute("y",e.y),super.afterSetLayoutStartPoint(e)}getBoundsInRect(e){let t={};this.setLayoutRect(e);const i=this._getTitleAttrs();this._createOrUpdateTitleComponent(i),t=this._getTitleLayoutRect();const{x:n,y:r}=this.getLayoutStartPoint();return{x1:n,y1:r,x2:n+t.width,y2:r+t.height}}_getTitleLayoutRect(){const e=this._titleComponent.AABBBounds;return{width:this._spec.width?this._spec.width:L(e.width())?e.width():0,height:this._spec.height?this._spec.height:L(e.height())?e.height():0}}_getTitleAttrs(){var e,t,i,n,r,s,a,o,l;const c=Math.max(0,null!==(e=this._spec.width)&&void 0!==e?e:this.getLayoutRect().width);return Object.assign(Object.assign({},uD(this._spec,["padding"])),{textType:null!==(t=this._spec.textType)&&void 0!==t?t:"text",text:null!==(i=this._spec.text)&&void 0!==i?i:"",subtextType:null!==(n=this._spec.subtextType)&&void 0!==n?n:"text",subtext:null!==(r=this._spec.subtext)&&void 0!==r?r:"",x:null!==(s=this._spec.x)&&void 0!==s?s:0,y:null!==(a=this._spec.y)&&void 0!==a?a:0,width:c,height:this._spec.height,minWidth:this._spec.minWidth,maxWidth:this._spec.maxWidth,minHeight:this._spec.minHeight,maxHeight:this._spec.maxHeight,padding:this._spec.innerPadding,align:null!==(o=this._spec.align)&&void 0!==o?o:"left",verticalAlign:null!==(l=this._spec.verticalAlign)&&void 0!==l?l:"top",textStyle:Object.assign({width:c},this._spec.textStyle),subtextStyle:Object.assign({width:c},this._spec.subtextStyle)})}_createOrUpdateTitleComponent(e){if(this._titleComponent)ty(e,this._cacheAttrs)||this._titleComponent.setAttributes(e);else{const t=this.getContainer(),i=new eZ(e);i.name="title",t.add(i),this._titleComponent=i,i.on("*",((e,t)=>this._delegateEvent(i,e,t)))}return this._cacheAttrs=e,this._titleComponent}_getNeedClearVRenderComponents(){return[this._titleComponent]}clear(){super.clear(),this._cacheAttrs=null}}tZ.type=r.title,tZ.specKey=r.title;Xq(),zO();class iZ extends zq{getArea(){return this._area}getLabel(){return this._label}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},iZ.defaultAttributes,e)),this.name="markArea"}_getPositionByDirection(e,t){const{x1:i,x2:n,y1:r,y2:s}=this._area.AABBBounds;return t.includes("left")||t.includes("Left")?{x:i,y:(r+s)/2}:t.includes("right")||t.includes("Right")?{x:n,y:(r+s)/2}:t.includes("top")||t.includes("Top")?{x:(i+n)/2,y:r}:t.includes("bottom")||t.includes("Bottom")?{x:(i+n)/2,y:s}:{x:(i+n)/2,y:(r+s)/2}}setLabelPos(){var e;if(this._label&&this._area){const{label:t={}}=this.attribute,i=null!==(e=t.position)&&void 0!==e?e:"middle",n=this._getPositionByDirection(this._area,i);if(this._label.setAttributes(Object.assign(Object.assign({},n),{textStyle:Object.assign(Object.assign({},Wq[i]),t.textStyle)})),this.attribute.limitRect&&t.confine){const{x:e,y:t,width:i,height:n}=this.attribute.limitRect;Yq(this._label,{x1:e,y1:t,x2:e+i,y2:t+n})}}}initMarker(e){const{points:t,label:i,areaStyle:n}=this.attribute,r=bp.polygon(Object.assign({points:t},n));r.name="mark-area-area",this._area=r,e.add(r);const s=new mG(Object.assign({},i));s.name="mark-area-label",this._label=s,e.add(s),this.setLabelPos()}updateMarker(){const{points:e,label:t,areaStyle:i}=this.attribute;this._area&&this._area.setAttributes(Object.assign({points:e},i)),this._area&&this._label.setAttributes(Object.assign({dx:0,dy:0},t)),this.setLabelPos()}isValidPoints(){const{points:e}=this.attribute;if(!e||e.length<3)return!1;let t=!0;return e.forEach((e=>{L(e.x)&&L(e.y)||(t=!1)})),t}}iZ.defaultAttributes=Uq;class nZ extends Zq{constructor(){super(...arguments),this.type=r.markArea,this.name=r.markArea,this.specKey="markArea",this.layoutZIndex=zw.MarkArea}static getSpecInfo(e){const t=e[this.specKey];if(ay(t))return;if(!v(t)&&!1!==t.visible)return[{spec:t,specPath:[this.specKey],type:r.markArea}];const i=[];return t.forEach(((e,t)=>{!1!==e.visible&&i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.markArea})})),i}_createMarkerComponent(){var e,t,i,n;const r=null!==(e=this._spec.label)&&void 0!==e?e:{},s={zIndex:this.layoutZIndex,interactive:null!==(t=this._spec.interactive)&&void 0!==t&&t,points:[{x:0,y:0}],areaStyle:Yj(null===(i=this._spec.area)||void 0===i?void 0:i.style),clipInRange:null!==(n=this._spec.clip)&&void 0!==n&&n,label:Nq(r)};return new iZ(s)}_markerLayout(){var e,t,i,n,r;const s=this._spec,a=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,c=this._relativeSeries,h=x(s.x)&&x(s.x1),d=x(s.y)&&x(s.y1),u=h&&d,p=x(s.coordinates),g=x(s.positions),f=null!==(e=s.autoRange)&&void 0!==e&&e;let m=[],v=[];u?(v=Lq(a,o,l,c,f),m=[{x:v[0][0].x,y:v[1][0].y},v[0][0],{x:v[1][0].x,y:v[0][0].y},v[1][0]]):h||d?(v=Lq(a,o,l,c,f),m=[...v[0],v[1][1],v[1][0]]):p?m=jq(a,c,f,s.coordinatesOffset):g&&(m=Fq(s.positions,c,s.regionRelative));const y=this._relativeSeries.getViewData().latestData,b=a?a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData:y;let _;if(s.clip||(null===(t=s.label)||void 0===t?void 0:t.confine)){const{minX:e,maxX:t,minY:i,maxY:n}=Bq([o.getRegion(),l.getRegion(),c.getRegion()]);_={x:e,y:i,width:t-e,height:n-i}}this._markerComponent&&this._markerComponent.setAttributes({points:m,label:Object.assign(Object.assign({},null===(i=this._markerComponent.attribute)||void 0===i?void 0:i.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(b,y):null===(r=null===(n=this._markerComponent.attribute)||void 0===n?void 0:n.label)||void 0===r?void 0:r.text}),limitRect:_,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}_initDataView(){const e=this._spec,t=this._relativeSeries,i=x(e.x)&&x(e.x1),n=x(e.y)&&x(e.y1),r=i&&n,s=x(e.coordinates);if(!i&&!n&&!s)return null;let a;r?a=[this._processSpecXY(e.x,e.y),this._processSpecXY(e.x1,e.y1)]:i?a=[this._processSpecX(e.x),this._processSpecX(e.x1)]:n?a=[this._processSpecY(e.y),this._processSpecY(e.y1)]:s&&(a=this._processSpecCoo(e));const o=t.getViewData();uo(this._option.dataSet,"markerAggregation",Sq),uo(this._option.dataSet,"markerFilter",$q);const l=new R(this._option.dataSet,{name:"".concat(this.type,"_").concat(this.id,"_data")});l.parse([o],{type:"dataview"}),l.transform({type:"markerAggregation",options:a}),a&&l.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),l.target.on("change",(()=>{this._markerLayout()})),this._markerData=l}}nZ.type=r.markArea,nZ.specKey="markArea";class rZ extends Mx{constructor(e){super(e)}}var sZ,aZ;!function(e){e.OnPlay="onPlay",e.OnPause="onPause",e.OnForward="onForward",e.OnBackward="onBackward"}(sZ||(sZ={})),function(e){e.Start="start",e.Pause="pause",e.Forward="forward",e.Backward="backward"}(aZ||(aZ={}));class oZ extends qW{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},oZ.defaultAttributes,e)),this._isPaused=!0,this.updateAttributes=()=>{this._startAttr={style:Object.assign(Object.assign(Object.assign({symbolType:"M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -73.1429 161.4994 a 48.7619 48.7619 0 0 1 25.9901 7.5093 l 201.7524 127.1223 a 48.7619 48.7619 0 0 1 0.3657 82.2613 l -201.7524 129.6335 A 48.7619 48.7619 0 0 1 292.5952 540.1838 v -256.7314 a 48.7619 48.7619 0 0 1 48.7619 -48.7619 z m 24.381 92.9402 v 167.9116 l 131.9497 -84.7726 L 365.7381 327.6063 z"},oZ.defaultControllerAttr),{visible:this.attribute.start.visible}),this.attribute.start.style)},this._pauseAttr={style:Object.assign(Object.assign(Object.assign({symbolType:"M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -48.7619 195.0476 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z m 158.4762 0 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z"},oZ.defaultControllerAttr),{visible:this.attribute.pause.visible}),this.attribute.pause.style)},this._forwardAttr={style:Object.assign(Object.assign(Object.assign({},oZ.defaultControllerAttr),{visible:this.attribute.forward.visible}),this.attribute.forward.style)},this._backwardAttr={style:Object.assign(Object.assign(Object.assign({},oZ.defaultControllerAttr),{visible:this.attribute.backward.visible}),this.attribute.backward.style)},this.updateLayout()},this.updateLayout=()=>{var e,t,i,n;this._layout=this.attribute.layout,"horizontal"===this._layout?(this._backwardAttr.style.symbolType=null!==(e=this._backwardAttr.style.symbolType)&&void 0!==e?e:"M 521.29 734.276 L 230.929 448.019 L 521.29 161.762 c 37.685 -37.153 38.003 -97.625 0.707 -134.384 c -37.297 -36.758 -98.646 -36.435 -136.331 0.718 l -357.43 352.378 c -0.155 0.153 -0.297 0.314 -0.451 0.468 c -0.084 0.082 -0.172 0.157 -0.256 0.239 c -18.357 18.092 -27.581 41.929 -27.743 65.902 c -0.004 0.311 -0.017 0.623 -0.018 0.934 c 0.001 0.316 0.014 0.632 0.018 0.948 c 0.165 23.97 9.389 47.803 27.743 65.892 c 0.083 0.082 0.171 0.157 0.255 0.239 c 0.154 0.154 0.296 0.315 0.452 0.468 l 357.43 352.378 c 37.685 37.153 99.034 37.476 136.331 0.718 c 37.297 -36.758 36.979 -97.231 -0.707 -134.384 z",this._forwardAttr.style.symbolType=null!==(t=this._forwardAttr.style.symbolType)&&void 0!==t?t:"M 30 163 L 320.361 449.257 L 30 735.514 c -37.685 37.153 -38.003 97.625 -0.707 134.384 c 37.297 36.758 98.646 36.435 136.331 -0.718 l 357.43 -352.378 c 0.155 -0.153 0.297 -0.314 0.451 -0.468 c 0.084 -0.082 0.172 -0.157 0.256 -0.239 c 18.357 -18.092 27.581 -41.929 27.743 -65.902 c 0.004 -0.311 0.017 -0.623 0.018 -0.934 c -0.001 -0.316 -0.014 -0.632 -0.018 -0.948 c -0.165 -23.97 -9.389 -47.803 -27.743 -65.892 c -0.083 -0.082 -0.171 -0.157 -0.255 -0.239 c -0.154 -0.154 -0.296 -0.315 -0.452 -0.468 l -357.43 -352.378 c -37.685 -37.153 -99.034 -37.476 -136.331 -0.718 c -37.297 36.758 -36.979 97.231 0.707 134.384 z"):"vertical"===this._layout&&(this._backwardAttr.style.symbolType=null!==(i=this._backwardAttr.style.symbolType)&&void 0!==i?i:"m 161.724 521.29 l 286.257 -290.361 l 286.257 290.361 c 37.153 37.685 97.625 38.003 134.384 0.707 c 36.758 -37.297 36.435 -98.646 -0.718 -136.331 l -352.378 -357.43 c -0.153 -0.155 -0.314 -0.297 -0.468 -0.451 c -0.082 -0.084 -0.157 -0.172 -0.239 -0.256 c -18.092 -18.357 -41.929 -27.581 -65.902 -27.743 c -0.311 -0.004 -0.623 -0.017 -0.934 -0.018 c -0.316 0.001 -0.632 0.014 -0.948 0.018 c -23.97 0.165 -47.803 9.389 -65.892 27.743 c -0.082 0.083 -0.157 0.171 -0.239 0.255 c -0.154 0.154 -0.315 0.296 -0.468 0.452 l -352.378 357.43 c -37.153 37.685 -37.476 99.034 -0.718 136.331 c 36.758 37.297 97.231 36.979 134.384 -0.707 z",this._forwardAttr.style.symbolType=null!==(n=this._forwardAttr.style.symbolType)&&void 0!==n?n:"M 734.276 28.71 L 448.019 319.071 L 161.762 28.71 c -37.153 -37.685 -97.625 -38.003 -134.384 -0.707 c -36.758 37.297 -36.435 98.646 0.718 136.331 l 352.378 357.43 c 0.153 0.155 0.314 0.297 0.468 0.451 c 0.082 0.084 0.157 0.172 0.239 0.256 c 18.092 18.357 41.929 27.581 65.902 27.743 c 0.311 0.004 0.623 0.017 0.934 0.018 c 0.316 -0.001 0.632 -0.014 0.948 -0.018 c 23.97 -0.165 47.803 -9.389 65.892 -27.743 c 0.082 -0.083 0.157 -0.171 0.239 -0.255 c 0.154 -0.154 0.315 -0.296 0.468 -0.452 l 352.378 -357.43 c 37.153 -37.685 37.476 -99.034 0.718 -136.331 c -36.758 -37.297 -97.231 -36.979 -134.384 0.707 z")},this._initPlay=()=>{P(this._playController)&&(this._playController=new rZ(Object.assign({},this._startAttr.style)),this.add(this._playController))},this._initBackward=()=>{P(this._backwardController)&&(this._backwardController=new rZ(Object.assign({},this._backwardAttr.style)),this.add(this._backwardController))},this._initForward=()=>{P(this._forwardController)&&(this._forwardController=new rZ(Object.assign({},this._forwardAttr.style)),this.add(this._forwardController))},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._playController.addEventListener("pointerdown",(e=>{e.stopPropagation(),!0===this._isPaused?this.play():this.pause()})),this._backwardController.addEventListener("pointerdown",(e=>{e.stopPropagation(),this.backward()})),this._forwardController.addEventListener("pointerdown",(e=>{e.stopPropagation(),this.forward()})))},this.renderPlay=()=>{this._isPaused?this._playController.setAttributes(Object.assign({symbolType:this._playController.getComputedAttribute("symbolType")},this._startAttr.style)):this._playController.setAttributes(Object.assign({symbolType:this._playController.getComputedAttribute("symbolType")},this._pauseAttr.style))},this.renderBackward=()=>{this._backwardController.setAttributes(this._backwardAttr.style)},this.renderForward=()=>{this._forwardController.setAttributes(this._forwardAttr.style)},this.play=()=>{this._dispatchEvent("ControllerEventEnum.OnPlay")},this.pause=()=>{this._dispatchEvent("ControllerEventEnum.OnPause")},this.forward=()=>{this._dispatchEvent("ControllerEventEnum.OnForward")},this.backward=()=>{this._dispatchEvent("ControllerEventEnum.OnBackward")},this.togglePlay=()=>{this._playController.setAttributes(this._startAttr.style),this._isPaused=!0},this.togglePause=()=>{this._playController.setAttributes(this._pauseAttr.style),this._isPaused=!1},this.updateAttributes(),this._initPlay(),this._initBackward(),this._initForward(),this._initEvents()}render(){this.updateAttributes(),this.renderPlay(),this.renderBackward(),this.renderForward()}}oZ.defaultControllerAttr={visible:!0,x:0,y:0,size:20,fill:"#91caff",pickMode:"imprecise",cursor:"pointer"},oZ.defaultAttributes={[aZ.Start]:{},[aZ.Pause]:{},[aZ.Backward]:{},[aZ.Forward]:{}};const lZ={visible:!0,style:{x:0,y:0,dx:0,dy:0,size:20},order:0,space:10},cZ=[200,10];var hZ;!function(e){e.Default="default",e.Reverse="reverse"}(hZ||(hZ={}));const dZ=e=>{let{direction:t,maxIndex:i,minIndex:n,dataIndex:r}=e;return(e=>{let{direction:t,maxIndex:i,dataIndex:n}=e;return t===hZ.Default&&n===i})({direction:t,maxIndex:i,dataIndex:r})||(e=>{let{direction:t,minIndex:i,dataIndex:n}=e;return t===hZ.Reverse&&n===i})({direction:t,minIndex:n,dataIndex:r})},uZ=e=>{let{direction:t,maxIndex:i,minIndex:n,dataIndex:r}=e;return(e=>{let{direction:t,minIndex:i,dataIndex:n}=e;return t===hZ.Default&&n===i})({direction:t,minIndex:n,dataIndex:r})||(e=>{let{direction:t,maxIndex:i,dataIndex:n}=e;return t===hZ.Reverse&&n===i})({direction:t,maxIndex:i,dataIndex:r})},pZ=e=>"top"===e||"bottom"===e;class gZ extends qW{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},gZ.defaultAttributes,e)),this._data=[],this._layoutInfo={},this._updateSliderAttrs=()=>{var e,t,i;let n;L(this._handlerStyle.size)?n=this._handlerStyle.size:this._handlerStyle.size&&this._handlerStyle.size.length&&(n=Wn(this._handlerStyle.size[0],this._handlerStyle.size[1]));const r={visible:this._sliderVisible,min:this._minIndex,max:this._maxIndex,value:null!==(e=this.attribute.dataIndex)&&void 0!==e?e:0,railWidth:this._railStyle.width,railHeight:this._railStyle.height,railStyle:this._railStyle,trackStyle:this._trackStyle,handlerSize:L(n)?n:void 0,handlerStyle:this._handlerStyle,dy:this.attribute.slider.dy,dx:this.attribute.slider.dx,slidable:!0,range:!1,handlerText:{visible:!1},startText:{visible:!1},endText:{visible:!1},disableTriggerEvent:this.attribute.disableTriggerEvent};if(pZ(this._orient)){const e=Math.max(0,this._layoutInfo.slider.size),i=null!==(t=this._railStyle.height)&&void 0!==t?t:cZ[1];r.layout="horizontal",r.railHeight=i,r.railWidth=e,r.x=this._layoutInfo.slider.x,r.y=this._layoutInfo.slider.y}else{const e=Math.max(0,this._layoutInfo.slider.size),t=null!==(i=this._railStyle.width)&&void 0!==i?i:cZ[1];r.layout="vertical",r.railWidth=t,r.railHeight=e,r.x=this._layoutInfo.slider.x,r.y=this._layoutInfo.slider.y}return r},this._initSlider=()=>{const e=this._updateSliderAttrs();this._slider=new SY(e),this._sliderVisible&&this.add(this._slider)},this._updateControllerAttrs=()=>{const e={start:this._start,pause:this._pause,forward:this._forward,backward:this._backward,disableTriggerEvent:this.attribute.disableTriggerEvent};return pZ(this._orient)?(e.layout="horizontal",e.start=Object.assign(Object.assign({},e.start),{style:Object.assign(Object.assign({},e.start.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),e.pause=Object.assign(Object.assign({},e.pause),{style:Object.assign(Object.assign({},e.pause.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),e.backward=Object.assign(Object.assign({},e.backward),{style:Object.assign(Object.assign({},e.backward.style),{x:this._layoutInfo.backward.x,y:this._layoutInfo.backward.y})}),e.forward=Object.assign(Object.assign({},e.forward),{style:Object.assign(Object.assign({},e.forward.style),{x:this._layoutInfo.forward.x,y:this._layoutInfo.forward.y})})):(e.layout="vertical",e.start=Object.assign(Object.assign({},e.start),{style:Object.assign(Object.assign({},e.start.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),e.pause=Object.assign(Object.assign({},e.pause),{style:Object.assign(Object.assign({},e.pause.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),e.backward=Object.assign(Object.assign({},e.backward),{style:Object.assign(Object.assign({},e.backward.style),{x:this._layoutInfo.backward.x,y:this._layoutInfo.backward.y})}),e.forward=Object.assign(Object.assign({},e.forward),{style:Object.assign(Object.assign({},e.forward.style),{x:this._layoutInfo.forward.x,y:this._layoutInfo.forward.y})})),e},this._initController=()=>{const e=this._updateControllerAttrs();this._controller=new oZ(e),this._controllerVisible&&this.add(this._controller)},this._initAttributes(),this._initLayoutInfo(),this._initController(),this._initSlider()}_initAttributes(){this._size=this.attribute.size,this._orient=this.attribute.orient,this._data=this.attribute.data,this._minIndex=0,this._maxIndex=this._data.length-1;const{slider:e={},controller:t={}}=this.attribute;this._sliderVisible=e.visible,this._railStyle=Object.assign({},e.railStyle),this._trackStyle=Object.assign({},e.trackStyle),this._handlerStyle=Object.assign({},e.handlerStyle),this._controllerVisible=t.visible,this._start=Object.assign({},t.start),this._pause=Object.assign({},t.pause),this._forward=Object.assign({},t.forward),this._backward=Object.assign({},t.backward)}_initLayoutInfo(){var e,t,i;const n=[this._start,this._backward,this._forward].sort(((e,t)=>e.order-t.order)),r=n.filter((e=>"end"!==e.position)),s=n.filter((e=>"end"===e.position)),a=null!==(e=pZ(this._orient)?this._railStyle.height:this._railStyle.width)&&void 0!==e?e:cZ[1],o=n.reduce(((e,t)=>{const i=t.style.size,n=l(i)?i:Wn(i[0],i[1]);return e+t.space+n}),0),c=this._sliderVisible?(pZ(this._orient)?null===(t=this._size)||void 0===t?void 0:t.width:null===(i=this._size)||void 0===i?void 0:i.height)-o:0,h=c-this.attribute.slider.space,d=r.reduce(((e,t)=>{const{key:i,space:n,style:{size:r}}=t,s=l(r)?r:Wn(r[0],r[1]);return this._layoutInfo[i]=Object.assign(Object.assign({},this._layoutInfo[i]),{size:s,x:pZ(this._orient)?e+n:(this._size.width-s)/2,y:pZ(this._orient)?(this._size.height-s)/2:e+n}),e+n+s}),0);this._layoutInfo.slider=Object.assign(Object.assign({},this._layoutInfo.slider),{size:h,x:pZ(this._orient)?d+this.attribute.slider.space:(this._size.width-a)/2,y:pZ(this._orient)?(this._size.height-a)/2:d+this.attribute.slider.space}),s.reduce(((e,t)=>{const{key:i,space:n,style:{size:r}}=t,s=l(r)?r:Wn(r[0],r[1]);return this._layoutInfo[i]=Object.assign(Object.assign({},this._layoutInfo[i]),{size:s,x:pZ(this._orient)?e+n:(this._size.width-s)/2,y:pZ(this._orient)?(this._size.height-s)/2:e+n}),e+n+s}),d+c)}render(){this._initLayoutInfo(),this.renderSlider(),this.renderController()}renderSlider(){const e=this._updateSliderAttrs();this._slider.setAttributes(e)}renderController(){const e=this._updateControllerAttrs();this._controller.setAttributes(e)}dispatchCustomEvent(e,t){this._dispatchEvent(e,{eventType:e,index:t,value:this._data[t]})}}var fZ;function mZ(){oY(),s_(),RS()}gZ.defaultAttributes={visible:!0,data:[],interval:1e3,orient:"bottom",align:"center",size:{height:20,width:300},slider:{visible:!0,space:10,dx:0,dy:0,railStyle:{cornerRadius:5},trackStyle:{},handlerStyle:{}},controller:{visible:!0,start:Object.assign(Object.assign({},lZ),{key:"start",position:"start",space:0}),pause:Object.assign(Object.assign({},lZ),{key:"pause",position:"start"}),forward:Object.assign(Object.assign({},lZ),{key:"forward",position:"end"}),backward:Object.assign(Object.assign({},lZ),{key:"backward",position:"start"})}},function(e){e.change="change",e.play="play",e.pause="pause",e.backward="backward",e.forward="forward",e.end="end",e.OnChange="change",e.OnPlay="play",e.OnPause="pause",e.OnBackward="backward",e.OnForward="forward",e.OnEnd="end"}(fZ||(fZ={})),mZ();class vZ extends gZ{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},e)),this._activeIndex=-1,this._isReachEnd=!1,this._initAttributes=()=>{var e,t,i,n;super._initAttributes(),this._alternate=null!==(e=this.attribute.alternate)&&void 0!==e&&e,this._interval=null!==(t=this.attribute.interval)&&void 0!==t?t:1e3,this._direction=null!==(i=this.attribute.direction)&&void 0!==i?i:hZ.Default,this._dataIndex=P(this.attribute.dataIndex)?"default"===this._direction?this._minIndex:this._maxIndex:null!==(n=this.attribute.dataIndex)&&void 0!==n?n:0,this._slider.setAttribute("value",this._dataIndex)},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._controller.addEventListener(sZ.OnPlay,(e=>{e.stopPropagation(),this.play()})),this._controller.addEventListener(sZ.OnPause,(e=>{e.stopPropagation(),this.pause()})),this._controller.addEventListener(sZ.OnForward,(e=>{e.stopPropagation(),this.forward()})),this._controller.addEventListener(sZ.OnBackward,(e=>{e.stopPropagation(),this.backward()})),this._slider.addEventListener("change",(e=>{const t=Math.floor(e.detail.value)+.5;this._dataIndex=e.detail.value>=t?Math.ceil(e.detail.value):Math.floor(e.detail.value),this._slider.setValue(this._dataIndex),this.dispatchCustomEvent(fZ.change)})))},this.play=()=>{this._isPlaying||1!==this._data.length&&(this._controller.togglePause(),this._isPlaying=!0,(dZ({dataIndex:this._dataIndex,maxIndex:this._maxIndex,minIndex:this._minIndex,direction:this._direction})||uZ({dataIndex:this._dataIndex,maxIndex:this._maxIndex,minIndex:this._minIndex,direction:this._direction}))&&(this._direction===hZ.Default?this._updateDataIndex(this._minIndex):this._updateDataIndex(this._maxIndex)),this.dispatchCustomEvent(fZ.play),this._isReachEnd=!1,this._tickTime=Date.now(),this._rafId=Bf.getRequestAnimationFrame()(this._play.bind(this,!0)))},this._play=e=>{const t=Date.now();if(this._isReachEnd&&t-this._tickTime>=this._interval)return this._isReachEnd=!1,void this._playEnd();e&&this._activeIndex!==this._dataIndex?(this.dispatchCustomEvent(fZ.change),this._activeIndex=this._dataIndex):t-this._tickTime>=this._interval&&(this._tickTime=t,this._updateDataIndex(((e,t,i,n)=>"default"===e?Math.min(t+1,n):Math.max(t-1,i))(this._direction,this._dataIndex,this._minIndex,this._maxIndex)),this._activeIndex=this._dataIndex,this.dispatchCustomEvent(fZ.change)),("default"===this._direction&&this._dataIndex>=this._maxIndex||"reverse"===this._direction&&this._dataIndex<=this._minIndex)&&(this._isReachEnd=!0),this._rafId=Bf.getRequestAnimationFrame()(this._play.bind(this,!1))},this._updateDataIndex=e=>{this._dataIndex=e,this._slider.setValue(this._dataIndex)},this._playEnd=()=>{this._isPlaying=!1,this._controller.togglePlay(),Bf.getCancelAnimationFrame()(this._rafId),this._activeIndex=-1,this.dispatchCustomEvent(fZ.end)},this.pause=()=>{this._isPlaying&&(this._isPlaying=!1,Bf.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(fZ.pause))},this.backward=()=>{const e=Math.max(this._dataIndex-1,this._minIndex);this._updateDataIndex(e),this.dispatchCustomEvent(fZ.change),this.dispatchCustomEvent(fZ.backward)},this.forward=()=>{const e=Math.min(this._dataIndex+1,this._maxIndex);this._updateDataIndex(e),this.dispatchCustomEvent(fZ.change),this.dispatchCustomEvent(fZ.forward)},this._initAttributes(),this._initEvents()}setAttributes(e,t){super.setAttributes(e,t),this._initAttributes()}dispatchCustomEvent(e){super.dispatchCustomEvent(e,this._dataIndex)}}var yZ=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};mZ();class bZ extends gZ{constructor(e){super(e),this._isPlaying=!1,this._startTime=Date.now(),this._initAttributes=()=>{var e,t;super._initAttributes(),this._maxIndex=this._data.length,this._slider.setAttribute("max",this._maxIndex),this._isPlaying=!1,this._elapsed=0,this._interval=null!==(e=this.attribute.interval)&&void 0!==e?e:1e3,this._dataIndex=null!==(t=this.attribute.dataIndex)&&void 0!==t?t:this._minIndex;const i=this._data.length;this.attribute.totalDuration&&this._data.length?(this._totalDuration=this.attribute.totalDuration,this._interval=this._totalDuration/(null!=i?i:1)):(this._totalDuration=this._interval*i,this._interval=this.attribute.interval)},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._controller.addEventListener(sZ.OnPlay,(e=>{e.stopPropagation(),this.play()})),this._controller.addEventListener(sZ.OnPause,(e=>{e.stopPropagation(),this.pause()})),this._controller.addEventListener(sZ.OnForward,(e=>{e.stopPropagation(),this.forward()})),this._controller.addEventListener(sZ.OnBackward,(e=>{e.stopPropagation(),this.backward()})),this._slider.addEventListener("change",(e=>{var t;e.stopPropagation();const i=null===(t=e.detail)||void 0===t?void 0:t.value,n=i/this._maxIndex;this._elapsed=n*this._totalDuration,this._startTime=Date.now()-this._elapsed,this._dispatchChange(i)})))},this._getSliderValue=()=>{const e=this._elapsed/this._totalDuration;return Math.min(e*this._maxIndex,this._maxIndex)},this._updateSlider=()=>{const e=this._getSliderValue();this._dataIndex=Math.floor(e),this._slider.setValue(Math.min(e,this._maxIndex)),this._dispatchChange(Math.floor(e))},this._dispatchChange=e=>{const t=Math.floor(e);t!==this._activeIndex&&(this._dataIndex=t,this._activeIndex=t,t!==this._maxIndex&&this.dispatchCustomEvent(fZ.change))},this.play=()=>yZ(this,void 0,void 0,(function*(){this._isPlaying||(this._controller.togglePause(),this._isPlaying=!0,this._elapsed>=this._totalDuration&&(this._elapsed=0),this._startTime=Date.now()-this._elapsed,this.dispatchCustomEvent(fZ.play),this._rafId=Bf.getRequestAnimationFrame()(this._play.bind(this)))})),this._play=()=>{this._elapsed=Date.now()-this._startTime;const e=this._getSliderValue();this._updateSlider(),e>=this._maxIndex?this._playEnd():this._rafId=Bf.getRequestAnimationFrame()(this._play.bind(this))},this._playEnd=()=>{this._isPlaying=!1,Bf.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(fZ.end)},this.pause=()=>{this._isPlaying&&(this._isPlaying=!1,this._elapsed=Date.now()-this._startTime,Bf.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(fZ.pause))},this.backward=()=>{const e=Date.now(),t=1*this._interval,i=this._elapsed-t;i<=0?(this._elapsed=0,this._startTime=e):(this._elapsed=i,this._startTime=this._startTime+this._interval),this._updateSlider(),this.dispatchCustomEvent(fZ.backward)},this.forward=()=>{const e=Date.now(),t=1*this._interval,i=this._elapsed+t;i>=this._totalDuration?(this._startTime=e-this._totalDuration,this._elapsed=this._totalDuration):(this._startTime=this._startTime-t,this._elapsed=i),this._updateSlider(),this.dispatchCustomEvent(fZ.forward)},this._initAttributes(),this._initEvents()}dispatchCustomEvent(e){super.dispatchCustomEvent(e,this._dataIndex)}render(){super.render()}}const _Z=e=>Yj(Object.assign({},e)),xZ=e=>Object.assign(Object.assign({},e),{style:Object.assign({},Yj(e.style))}),SZ=e=>{var t,i,n,r,s,a,o,l,c,h,d,u,p,g;const f=_Z(null!==(i=null===(t=null==e?void 0:e.slider)||void 0===t?void 0:t.trackStyle)&&void 0!==i?i:{}),m=_Z(null!==(r=null===(n=null==e?void 0:e.slider)||void 0===n?void 0:n.railStyle)&&void 0!==r?r:{}),v=(S=null!==(a=null===(s=null==e?void 0:e.slider)||void 0===s?void 0:s.handlerStyle)&&void 0!==a?a:{},Yj(Object.assign({},S))),y=xZ(null!==(l=null===(o=null==e?void 0:e.controller)||void 0===o?void 0:o.start)&&void 0!==l?l:{}),b=xZ(null!==(h=null===(c=null==e?void 0:e.controller)||void 0===c?void 0:c.pause)&&void 0!==h?h:{}),_=xZ(null!==(u=null===(d=null==e?void 0:e.controller)||void 0===d?void 0:d.backward)&&void 0!==u?u:{}),x=xZ(null!==(g=null===(p=null==e?void 0:e.controller)||void 0===p?void 0:p.forward)&&void 0!==g?g:{});var S;return Object.assign(Object.assign({},e),{direction:e.direction,interval:e.interval,visible:e.visible,orient:e.orient,slider:Object.assign(Object.assign({},e.slider),{trackStyle:f,railStyle:m,handlerStyle:v}),controller:Object.assign(Object.assign({},e.controller),{start:y,pause:b,backward:_,forward:x})})},wZ=e=>"left"===e||"right"===e,CZ=e=>"top"===e||"bottom"===e;class kZ extends dF{constructor(){super(...arguments),this.layoutZIndex=zw.Player,this.layoutLevel=Hw.Player,this.specKey="player",this.type=r.player,this._orient="bottom",this._getPlayerAttrs=()=>{var e,t;const i=this._spec.type,n={size:{width:this._width,height:this._height},dx:null!==(e=this._spec.dx)&&void 0!==e?e:0+this._dx,dy:null!==(t=this._spec.dy)&&void 0!==t?t:0+this._dy};return"discrete"===i?Object.assign(Object.assign(Object.assign({},(r=this._spec,s=this._specs,Object.assign(Object.assign({},SZ(r)),{data:s,type:"discrete"}))),n),{disableTriggerEvent:this._option.disableTriggerEvent}):Object.assign(Object.assign(Object.assign({},((e,t)=>Object.assign(Object.assign({},SZ(e)),{data:t,type:"continuous"}))(this._spec,this._specs)),n),{disableTriggerEvent:this._option.disableTriggerEvent});var r,s},this._createOrUpdatePlayerComponent=()=>{const e=Object.assign({},this._getPlayerAttrs()),t=this.getContainer();this._playerComponent?ty(e,this._cacheAttrs)||(this._cacheAttrs=e,this._playerComponent.setAttributes(e),this._playerComponent._initAttributes(),this._playerComponent.render()):("discrete"===e.type?this._playerComponent=new vZ(e):this._playerComponent=new bZ(e),this._cacheAttrs=e,this._playerComponent.name="player",t.add(this._playerComponent),this._initEvent())},this._maxSize=()=>{var e,t,i,n,r,s,a,o,l;return Math.max(...z(null===(t=null===(e=this._spec.controller.start)||void 0===e?void 0:e.style)||void 0===t?void 0:t.size),...z(null===(n=null===(i=this._spec.controller.pause)||void 0===i?void 0:i.style)||void 0===n?void 0:n.size),...z(null===(s=null===(r=this._spec.controller.backward)||void 0===r?void 0:r.style)||void 0===s?void 0:s.size),...z(null===(o=null===(a=this._spec.controller.forward)||void 0===a?void 0:a.style)||void 0===o?void 0:o.size),null!==(l=wZ(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)&&void 0!==l?l:10)},this._sliderExceededSize=()=>{var e,t,i,n,r,s,a,o,l;const c=null!==(e=wZ(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)&&void 0!==e?e:10,h=Math.max(...z(null===(i=null===(t=this._spec.controller.start)||void 0===t?void 0:t.style)||void 0===i?void 0:i.size),...z(null===(r=null===(n=this._spec.controller.pause)||void 0===n?void 0:n.style)||void 0===r?void 0:r.size),...z(null===(a=null===(s=this._spec.controller.backward)||void 0===s?void 0:s.style)||void 0===a?void 0:a.size),...z(null===(l=null===(o=this._spec.controller.forward)||void 0===o?void 0:o.style)||void 0===l?void 0:l.size));return c>=h?c-h:0},this._initEvent=()=>{this._option.disableTriggerEvent||(this._option.globalInstance.on(Ir.rendered,(()=>{var e;(null===(e=this._spec)||void 0===e?void 0:e.auto)&&this._playerComponent.play()})),this._playerComponent.addEventListener(fZ.OnEnd,(()=>{var e;this.event.emit(Ir.playerEnd,{model:this}),this._alternate&&"discrete"===this._spec.type&&(this._direction="default"===this._direction?"reverse":"default",this._playerComponent.setAttributes({direction:this._direction,dataIndex:"reverse"===this._direction?this._specs.length-2:1})),(null===(e=this._spec)||void 0===e?void 0:e.loop)&&this._playerComponent.play()})),this._playerComponent.addEventListener(fZ.OnChange,(e=>{const{index:t}=e.detail,i=this._specs[t];z(i.data).forEach((e=>{var t,i;null===(i=null===(t=this._option)||void 0===t?void 0:t.globalInstance)||void 0===i||i.updateData(e.id,e.values)})),this.event.emit(Ir.playerChange,{model:this,value:{spec:i,index:t,specs:this._specs}})})),this._playerComponent.addEventListener(fZ.OnBackward,(e=>{const{index:t}=e.detail,i=this._specs[t];this.event.emit(Ir.playerBackward,{model:this,value:{spec:i,index:t,specs:this._specs}})})),this._playerComponent.addEventListener(fZ.OnForward,(e=>{const{index:t}=e.detail,i=this._specs[t];this.event.emit(Ir.playerForward,{model:this,value:{spec:i,index:t,specs:this._specs}})})),this._playerComponent.addEventListener(fZ.OnPlay,(e=>{const{index:t}=e.detail,i=this._specs[t];this.event.emit(Ir.playerPlay,{model:this,value:{spec:i,index:t,specs:this._specs}})})),this._playerComponent.addEventListener(fZ.OnPause,(e=>{const{index:t}=e.detail,i=this._specs[t];this.event.emit(Ir.playerPause,{model:this,value:{spec:i,index:t,specs:this._specs}})})))}}get orient(){return this._orient}set layoutOrient(e){this._orient=e}static getSpecInfo(e){const t=e[this.specKey];return P(t)||!1===t.visible?null:[{spec:t,specPath:[this.specKey],type:r.player}]}setAttrFromSpec(){var e,t,i,n,r,s,a;super.setAttrFromSpec(),this._orient=null!==(e=this._spec.orient)&&void 0!==e?e:"bottom",this._specs=null!==(t=this._spec.specs)&&void 0!==t?t:[],this._direction=null!==(i=this._spec.direction)&&void 0!==i?i:"default",this._alternate=null!==(n=this._spec.alternate)&&void 0!==n&&n,this._dx=null!==(r=this._spec.dx)&&void 0!==r?r:0,this._dy=null!==(s=this._spec.dy)&&void 0!==s?s:0,this._position=null!==(a=this._spec.position)&&void 0!==a?a:"middle"}afterSetLayoutStartPoint(e){if(super.afterSetLayoutStartPoint(e),L(e.x)){const t=wZ(this._orient)?e.x+this._sliderExceededSize()/2:e.x;this._playerComponent&&this._playerComponent.setAttribute("x",t)}if(L(e.y)){const t=CZ(this._orient)?e.y+this._sliderExceededSize()/2:e.y;this._playerComponent&&this._playerComponent.setAttribute("y",t)}}getBoundsInRect(e,t){this._width=this._computeWidth(e),this._height=this._computeHeight(e),this._dx=this._computeDx(t),this._dy=this._computeDy(t);const i=this._computeLayoutRect(e,this._width,this._height);return this._createOrUpdatePlayerComponent(),i}changeRegions(e){}onRender(e){}_getNeedClearVRenderComponents(){return[this._playerComponent]}_computeLayoutRect(e,t,i){switch(this._orient){case"top":case"left":return{x1:0,y1:0,x2:t,y2:i};case"right":return{x1:e.width-t,y1:0,x2:e.width,y2:e.height};default:return{x1:0,y1:e.height-i,x2:e.width,y2:e.height}}}_computeWidth(e){return l(this._spec.width)?Math.min(e.width,Number(this._spec.width)):wZ(this._orient)?this._maxSize():e.width}_computeHeight(e){return l(this._spec.height)?(this._height=this._spec.height,Math.min(e.height,Number(this._spec.height))):CZ(this._orient)?this._maxSize():e.height}_computeDx(e){return wZ(this._orient)||"start"===this._position?0:"middle"===this._position?(e.width-this._width)/2:e.width-this._width}_computeDy(e){return CZ(this._orient)||"start"===this._position?0:"middle"===this._position?(e.height-this._height)/2:e.height-this._height}}kZ.specKey="player",kZ.type=r.player;const AZ=new Uint32Array(33),EZ=new Uint32Array(33);EZ[0]=0,AZ[0]=~EZ[0];for(let i=1;i<=32;++i)EZ[i]=EZ[i-1]<<1|1,AZ[i]=~EZ[i];function TZ(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*i+n)/n),s=~~((t+2*i+n)/n),a=e=>~~((e+i)/n);return a.invert=e=>e*n-i,a.bitmap=()=>function(e,t){const i=new Uint32Array(~~((e*t+32)/32));function n(e,t){i[e]|=t}function r(e,t){i[e]&=t}return{array:i,get:(t,n)=>{const r=n*e+t;return i[r>>>5]&1<<(31&r)},set:(t,i)=>{const r=i*e+t;n(r>>>5,1<<(31&r))},clear:(t,i)=>{const n=i*e+t;r(n>>>5,~(1<<(31&n)))},getRange:n=>{let{x1:r,y1:s,x2:a,y2:o}=n;if(a<0||o<0||r>e||s>t)return!0;let l,c,h,d,u=o;for(;u>=s;--u)if(l=u*e+r,c=u*e+a,h=l>>>5,d=c>>>5,h===d){if(i[h]&AZ[31&l]&EZ[1+(31&c)])return!0}else{if(i[h]&AZ[31&l])return!0;if(i[d]&EZ[1+(31&c)])return!0;for(let e=h+1;e<d;++e)if(i[e])return!0}return!1},setRange:i=>{let r,s,a,o,l,{x1:c,y1:h,x2:d,y2:u}=i;if(!(d<0||u<0||c>e||h>t))for(;h<=u;++h)if(r=h*e+c,s=h*e+d,a=r>>>5,o=s>>>5,a===o)n(a,AZ[31&r]&EZ[1+(31&s)]);else for(n(a,AZ[31&r]),n(o,EZ[1+(31&s)]),l=a+1;l<o;++l)n(l,4294967295)},clearRange:t=>{let i,n,s,a,o,{x1:l,y1:c,x2:h,y2:d}=t;for(;c<=d;++c)if(i=c*e+l,n=c*e+h,s=i>>>5,a=n>>>5,s===a)r(s,EZ[31&i]|AZ[1+(31&n)]);else for(r(s,EZ[31&i]),r(a,AZ[1+(31&n)]),o=s+1;o<a;++o)r(o,0)},outOfBounds:i=>{let{x1:n,y1:r,x2:s,y2:a}=i;return n<0||r<0||a>=t||s>=e},toImageData:n=>{const r=n.createImageData(e,t),s=r.data;for(let a=0;a<t;++a)for(let t=0;t<e;++t){const n=a*e+t,r=4*n,o=i[n>>>5]&1<<(31&n);s[r+0]=255*o,s[r+1]=255*o,s[r+2]=255*o,s[r+3]=31}return r}}}(r,s),a.ratio=n,a.padding=i,a.width=e,a.height=t,a}function OZ(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){const{x1:i,x2:n,y1:r,y2:s}=t,a=At(i,0,e.width),o=At(n,0,e.width),l=At(r,0,e.height),c=At(s,0,e.height);return{x1:e(a),x2:e(o),y1:e(l),y2:e(c)}}return{x1:e(t.x1),x2:e(t.x2),y1:e(t.y1),y2:e(t.y2)}}const PZ=["#ffffff","#000000"];function MZ(e,t,i,n,r,s){if("string"!=typeof e||"string"!=typeof t)return e;const a=new jt(e).toHex(),o=new jt(t).toHex();return IZ(a,o,i,n,s)?a:function(e,t,i,n,r,s){const a=[];r&&(r instanceof Array?a.push(...r):a.push(r)),a.push(...PZ);for(const o of a)if(e!==o&&IZ(o,t,i,n,s))return o}(a,o,i,n,r,s)}function IZ(e,t,i,n,r){if("lightness"===r){const i=jt.getColorBrightness(new jt(t));return jt.getColorBrightness(new jt(e))<.5?i>=.5:i<.5}return n?RZ(e,t)>n:"largeText"===i?RZ(e,t)>3:RZ(e,t)>4.5}function RZ(e,t){const i=DZ(e),n=DZ(t);return((i>n?i:n)+.05)/((i>n?n:i)+.05)}function DZ(e){const t=function(e){let t="",i="",n="";const r="#"===e[0]?1:0;for(let s=r;s<e.length;s++)"#"!==e[s]&&(s<r+2?t+=e[s]:s<r+4?i+=e[s]:s<r+6&&(n+=e[s]));return[parseInt(t,16),parseInt(i,16),parseInt(n,16)]}(e),i=t[0]/255,n=t[1]/255,r=t[2]/255;let s,a,o;return s=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),a=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),o=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o}function LZ(e,t,i,n){let r;switch(e){case"base":r=t;break;case"invertBase":r=i;break;case"similarBase":r=n}return r}function jZ(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=i;return r>0&&(s={x1:i.x1-r,x2:i.x2+r,y1:i.y1-r,y2:i.y2+r}),s=OZ(e,s),!(n&&t.outOfBounds(s))&&!t.getRange(s)}function FZ(e,t,i){let n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]).filter((e=>x(e)));for(let a=0;a<s.length;a++){const o=i.clone();if(o.setAttributes(s[a]),o.update(),jZ(e,t,OZ(e,o.AABBBounds),n,r))return t.setRange(OZ(e,o.AABBBounds,!0)),s[a]}return!1}function BZ(e,t,i,n,r,s,a){var o,l;const c=null===(o=n.overlap)||void 0===o?void 0:o.clampForce,h=null===(l=n.overlap)||void 0===l?void 0:l.overlapPadding;if("bound"===i.type||"position"===i.type){if(Q(a)){const o=((Q(i.position)?i.position(r.attribute):i.position)||(d=n.type,"rect"===d?zZ:NZ)).map((e=>a(r.AABBBounds,s,e,n.offset)));return FZ(e,t,r,o,c,h)}return!1}var d;if("moveY"===i.type){const n=(i.offset?Q(i.offset)?i.offset(r.attribute):i.offset:[]).map((e=>({x:r.attribute.x,y:r.attribute.y+e})));return FZ(e,t,r,n,c,h)}if("moveX"===i.type){const n=(i.offset?Q(i.offset)?i.offset(r.attribute):i.offset:[]).map((e=>({x:r.attribute.x+e,y:r.attribute.y})));return FZ(e,t,r,n,c,h)}return!1}const NZ=["top","bottom","right","left","top-right","bottom-right","top-left","bottom-left"],zZ=["top","inside-top","inside"];function HZ(e,t,i){const{x1:n,x2:r,y1:s,y2:a}=e.AABBBounds,o=Math.min(n,r),l=Math.max(n,r),c=Math.min(s,a),h=Math.max(s,a);let d=0,u=0;return o<0&&l-o<=t?d=-o:l>t&&o-(l-t)>=0&&(d=t-l),c<0&&h-c<=i?u=-c:h>i&&c-(h-i)>=0&&(u=i-h),{dx:d,dy:u}}const VZ={fadeIn:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,i,n;return{from:{opacity:0,fillOpacity:0,strokeOpacity:0},to:{opacity:null!==(t=e.opacity)&&void 0!==t?t:1,fillOpacity:null!==(i=e.fillOpacity)&&void 0!==i?i:1,strokeOpacity:null!==(n=e.strokeOpacity)&&void 0!==n?n:1}}},fadeOut:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,i,n;return{from:{opacity:null!==(t=e.opacity)&&void 0!==t?t:1,fillOpacity:null!==(i=e.fillOpacity)&&void 0!==i?i:1,strokeOpacity:null!==(n=e.strokeOpacity)&&void 0!==n?n:1},to:{opacity:0,fillOpacity:0,strokeOpacity:0}}}};function UZ(e,t){var i,n;return null!==(n=null===(i=VZ[t])||void 0===i?void 0:i.call(VZ,e))&&void 0!==n?n:{from:{},to:{}}}const WZ=(e,t,i,n)=>{const r=Object.assign({},e.attribute),s=Object.assign({},t.attribute);return z(null==n?void 0:n.excludeChannels).forEach((e=>{delete s[e]})),Object.keys(s).forEach((e=>{i&&!i.includes(e)&&delete s[e]})),{from:r,to:s}};function GZ(e,t,i,n){e.attribute.text!==t.attribute.text&&L(Number(e.attribute.text)*Number(t.attribute.text))&&e.animate().play(new Sy({text:e.attribute.text},{text:t.attribute.text},i,n))}const KZ={mode:"same-time",duration:300,easing:"linear"};function YZ(e,t,i,n){const r=function(e){return e.radius?{x:Math.cos(e.angle)*e.radius,y:Math.sin(e.angle)*e.radius}:{x:0,y:0}}({radius:i,angle:n});return{x:e+r.x,y:t+r.y}}function XZ(e){return(e=function(e){for(;e<0;)e+=2*Math.PI;for(;e>=2*Math.PI;)e-=2*Math.PI;return e}(e))>0&&e<=Math.PI/2?2:e>Math.PI/2&&e<=Math.PI?3:e>Math.PI&&e<=3*Math.PI/2?4:1}function qZ(e){return 3===e||4===e}function ZZ(e,t){const{x1:i,y1:n,x2:r,y2:s}=e,{x1:a,y1:o,x2:l,y2:c}=t;return!(i<=a&&r<=a||i>=l&&r>=l||n<=o&&s<=o||n>=c&&s>=c)}const QZ=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e)return;const{x1:r,y1:s,x2:a,y2:o}=e,l=Math.abs(a-r),c=Math.abs(o-s),h=(t.x1+t.x2)/2,d=(t.y1+t.y2)/2;let u=0,p=0,g=0,f=0;t&&(g=Math.abs(t.x1-t.x2)/2,f=Math.abs(t.y1-t.y2)/2);const m={"top-right":-235,"top-left":235,"bottom-right":45,"bottom-left":-45};switch(i){case"top":p=-1;break;case"bottom":p=1;break;case"left":u=-1;break;case"right":u=1;break;case"bottom-left":case"bottom-right":case"top-left":case"top-right":u=Math.sin(m[i]*(Math.PI/180)),p=Math.cos(m[i]*(Math.PI/180));break;case"center":u=0,p=0}return{x:h+u*(n+g)+Math.sign(u)*(l/2),y:d+p*(n+f)+Math.sign(p)*(c/2)}},$Z=e=>{if(!e||!e.attribute)return[];const{points:t,segments:i}=e.attribute;if(i&&i.length){const e=[];return i.forEach((t=>{t.points.forEach((t=>{e.push(t)}))})),e}return t};function JZ(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"end",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e||!t)return{x:1/0,y:1/0};const{x1:r,x2:s}=e,a=Math.abs(s-r),o=t.x1;let l=o;return"end"===i?l=o+a/2+n:"start"===i&&(l=o-a/2-n),{x:l,y:t.y1}}function eQ(e,t,i,n,r,s){return Math.abs(t/e)<s/r?{x:i+(e>0?r:-r),y:n+t*r/Math.abs(e)}:{x:i+e*s/Math.abs(t),y:n+(t>0?s:-s)}}s_(),KT(),fO(),HE();class tQ extends qW{setBitmap(e){this._bitmap=e}setBitmapTool(e){this._bmpTool=e}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},tQ.defaultAttributes,e)),this.name="label",this._onHover=e=>{const t=e.target;t===this._lastHover||ay(t.states)||(t.addState(sG.hover,!0),eG(this,(e=>{e===t||ay(e.states)||e.addState(sG.hoverReverse,!0)})),this._lastHover=t)},this._onUnHover=e=>{this._lastHover&&(eG(this,(e=>{ay(e.states)||(e.removeState(sG.hoverReverse),e.removeState(sG.hover))})),this._lastHover=null)},this._onClick=e=>{const t=e.target;if(this._lastSelect===t&&t.hasState("selected"))return this._lastSelect=null,void eG(this,(e=>{ay(e.states)||(e.removeState(sG.selectedReverse),e.removeState(sG.selected))}));ay(t.states)||(t.addState(sG.selected,!0),eG(this,(e=>{e===t||ay(e.states)||e.addState(sG.selectedReverse,!0)})),this._lastSelect=t)},this._handleRelatedGraphicSetState=e=>{var t,i,n,r,s;if((null===(t=e.detail)||void 0===t?void 0:t.type)===wl.STATE||(null===(i=e.detail)||void 0===i?void 0:i.type)===wl.ANIMATE_UPDATE&&(null===(n=e.detail.animationState)||void 0===n?void 0:n.isFirstFrameOfStep)){const t=null!==(s=null===(r=e.target)||void 0===r?void 0:r.currentStates)&&void 0!==s?s:[];(this._isCollectionBase?[...this._graphicToText.values()]:[this._graphicToText.get(e.target)]).forEach((e=>{e&&(e.text&&e.text.useStates(t),e.labelLine&&e.labelLine.useStates(t))}))}}}labeling(e,t,i,n){}_createLabelLine(e,t){const i=function(e,t){if(!e||!t)return;if(rg(e,t,!0))return;const i=Math.min(e.x1,e.x2),n=Math.min(e.y1,e.y2),r=Math.min(t.x1,t.x2),s=Math.min(t.y1,t.y2),a=Math.abs(e.x2-i)/2,o=Math.abs(e.y2-n)/2,l=Math.abs(t.x2-r)/2,c=Math.abs(t.y2-s)/2,h=i+a,d=n+o,u=r+l,p=s+c,g=u-h,f=p-d;return[eQ(g,f,h,d,a,o),eQ(-g,-f,u,p,l,c)]}(e.AABBBounds,null==t?void 0:t.AABBBounds);if(i){const e=bp.line({points:i});return t&&t.attribute.fill&&e.setAttribute("stroke",t.attribute.fill),this.attribute.line&&!ay(this.attribute.line.style)&&e.setAttributes(this.attribute.line.style),this._setStatesOfLabelLine(e),e}}render(){if(this._prepare(),P(this._idToGraphic)||this._isCollectionBase&&P(this._idToPoint))return;const{overlap:e,smartInvert:t,dataFilter:i,customLayoutFunc:n,customOverlapFunc:r}=this.attribute;let s,a=this.attribute.data;Q(i)&&(a=i(a)),s=Q(n)?n(a,this.getRelatedGraphic.bind(this),this._isCollectionBase?e=>this._idToPoint.get(e.id):null):this._layout(a),Q(r)?s=r(s,this.getRelatedGraphic.bind(this),this._isCollectionBase?e=>this._idToPoint.get(e.id):null):!1!==e&&(s=this._overlapping(s)),s&&s.length&&s.forEach((e=>{this._bindEvent(e),this._setStatesOfText(e)})),!1!==t&&this._smartInvert(s),this._renderLabels(s)}_bindEvent(e){if(this.attribute.disableTriggerEvent)return;if(!e)return;const{hover:t,select:i}=this.attribute;t&&(e.addEventListener("pointermove",this._onHover),e.addEventListener("pointerout",this._onUnHover)),i&&e.addEventListener("pointerdown",this._onClick)}_setStatesOfText(e){if(!e)return;const t=this.attribute.state;t&&!ay(t)&&(e.states=t)}_setStatesOfLabelLine(e){if(!e)return;const t=this.attribute.labelLineState;t&&!ay(t)&&(e.states=t)}_createLabelText(e){var t,i;return"rich"===e.textType?(e.textConfig=e.text,e.width=null!==(t=e.width)&&void 0!==t?t:0,e.height=null!==(i=e.height)&&void 0!==i?i:0,bp.richtext(e)):"html"===e.textType?(e.textConfig=[],e.html=Object.assign(Object.assign({dom:e.text},oG),e),bp.richtext(e)):bp.text(e)}_prepare(){var e,t,i,n,r;const s=[];let a;if(a=Q(this.attribute.getBaseMarks)?this.attribute.getBaseMarks():function(e,t){if(!t)return[];const i=e.find((e=>e.name===t),!0);return i?i.getChildren():[]}(this.getRootNode(),this.attribute.baseMarkGroupName),a.forEach((e=>{"willRelease"!==e.releaseStatus&&s.push(e)})),null===(e=this._idToGraphic)||void 0===e||e.clear(),null===(t=this._idToPoint)||void 0===t||t.clear(),this._baseMarks=s,this._isCollectionBase="line-data"===this.attribute.type,!s||0===s.length)return;const{data:o}=this.attribute;if(o&&0!==o.length){if(this._idToGraphic||(this._idToGraphic=new Map),this._isCollectionBase){this._idToPoint||(this._idToPoint=new Map);let e=0;for(let t=0;t<s.length;t++){const i=s[t],n=$Z(i);if(n&&n.length)for(let t=0;t<n.length;t++){const r=o[e];r&&n[t]&&(x(r.id)||(r.id="vrender-component-".concat(this.name,"-").concat(e)),this._idToPoint.set(r.id,n[t]),this._idToGraphic.set(r.id,i)),e++}}}else for(let e=0;e<s.length;e++){const t=o[e],i=s[e];t&&i&&(x(t.id)||(t.id="vrender-component-".concat(this.name,"-").concat(e)),this._idToGraphic.set(t.id,i))}if(!1!==this.attribute.animation){const e=D(this.attribute.animation)?this.attribute.animation:{};this._animationConfig={enter:O({},KZ,e,null!==(i=this.attribute.animationEnter)&&void 0!==i?i:{}),exit:O({},KZ,e,null!==(n=this.attribute.animationExit)&&void 0!==n?n:{}),update:v(this.attribute.animationUpdate)?this.attribute.animationUpdate:O({},KZ,e,null!==(r=this.attribute.animationUpdate)&&void 0!==r?r:{})}}}}getRelatedGraphic(e){return this._idToGraphic.get(e.id)}_layout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{textStyle:t={},position:i,offset:n}=this.attribute,r=[];for(let s=0;s<e.length;s++){const a=e[s],o=this.getRelatedGraphic(a);if(!o)continue;const l=Object.assign(Object.assign({fill:this._isCollectionBase?v(o.attribute.stroke)?o.attribute.stroke.find((e=>!!e&&!0!==e)):o.attribute.stroke:o.attribute.fill},t),a),c=this._createLabelText(l),h=this.getGraphicBounds(c),d=Q(i)?i(a):i,u=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(a.id),d):this.getGraphicBounds(o,{x:a.x,y:a.y},d),p=this.labeling(h,u,d,n);p&&(l.x=p.x,l.y=p.y,c.setAttributes(p)),r.push(c)}return r}_overlapping(e){var t,i,n,r;if(0===e.length)return[];const s=D(this.attribute.overlap)?this.attribute.overlap:{},a=[],o=this.getBaseMarkGroup(),l=null!==(t=s.size)&&void 0!==t?t:{width:null!==(i=null==o?void 0:o.AABBBounds.width())&&void 0!==i?i:0,height:null!==(n=null==o?void 0:o.AABBBounds.height())&&void 0!==n?n:0};if(0===l.width||0===l.height)return e;const{avoidBaseMark:c,strategy:h=[],hideOnHit:d=!0,clampForce:u=!0,avoidMarks:p=[],overlapPadding:g}=s,f=this._bmpTool||TZ(l.width,l.height),m=this._bitmap||f.bitmap(),v=h.some((e=>"bound"===e.type));c&&(null===(r=this._baseMarks)||void 0===r||r.forEach((e=>{e.AABBBounds&&m.setRange(OZ(f,e.AABBBounds,!0))}))),p.length>0&&p.forEach((e=>{_(e)?function(e,t){if(!t)return[];const i=e.find((e=>e.name===t),!0);return i?i.findAll((e=>"group"!==e.type),!0):[]}(this.getRootNode(),e).forEach((e=>{e.AABBBounds&&m.setRange(OZ(f,e.AABBBounds,!0))})):e.AABBBounds&&m.setRange(OZ(f,e.AABBBounds,!0))}));for(let y=0;y<e.length;y++){if(!1===e[y].visible)continue;const t=e[y],i=this.getRelatedGraphic(t.attribute);if(t.update(),!rg(i.AABBBounds,{x1:0,x2:f.width,y1:0,y2:f.height},!0))continue;if(jZ(f,m,t.AABBBounds,u,g)){if(!v){m.setRange(OZ(f,t.AABBBounds,!0)),a.push(t);continue}if(v&&i&&i.AABBBounds&&this._canPlaceInside(t.AABBBounds,i.AABBBounds)){m.setRange(OZ(f,t.AABBBounds,!0)),a.push(t);continue}}let n=!1;for(let r=0;r<h.length;r++)if(n=BZ(f,m,h[r],this.attribute,t,this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(e[y].attribute.id)):this.getGraphicBounds(i,e[y].attribute),this.labeling),!1!==n){t.setAttributes({x:n.x,y:n.y}),a.push(t);break}if(!n&&u){const{dx:e=0,dy:i=0}=HZ(t,f.width,f.height);if(0===e&&0===i){if(jZ(f,m,t.AABBBounds)){m.setRange(OZ(f,t.AABBBounds,!0)),a.push(t);continue}}else if(jZ(f,m,{x1:t.AABBBounds.x1+e,x2:t.AABBBounds.x2+e,y1:t.AABBBounds.y1+i,y2:t.AABBBounds.y2+i})){t.setAttributes({x:t.attribute.x+e,y:t.attribute.y+i}),m.setRange(OZ(f,t.AABBBounds,!0)),a.push(t);continue}}!n&&!d&&a.push(t)}return Q(this.onAfterLabelOverlap)&&this.onAfterLabelOverlap(m),a}getBaseMarkGroup(){const{baseMarkGroupName:e}=this.attribute;if(e)return this.getRootNode().find((t=>t.name===e),!0)}getGraphicBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){if(!1!==e.attribute.visible)return e.AABBBounds;const{x:t,y:i}=e.attribute;return{x1:t,x2:t,y1:i,y2:i}}const{x:i,y:n}=t;return{x1:i,x2:i,y1:n,y2:n}}_renderLabels(e){!1===this._enableAnimation||!1===this.attribute.animation?this._renderWithOutAnimation(e):this._renderWithAnimation(e)}_renderWithAnimation(e){var t;const i=new Map,n=this._graphicToText||new Map,r=[],s=[],{visible:a}=null!==(t=this.attribute.line)&&void 0!==t?t:{};e.forEach(((e,t)=>{const o=this.getRelatedGraphic(e.attribute),l=e.attribute.id,c=this._isCollectionBase?l:o,h=(null==n?void 0:n.get(c))?"update":"enter";let d;if(a&&(d=this._createLabelLine(e,o)),"enter"===h){if(r.push(e),i.set(c,d?{text:e,labelLine:d}:{text:e}),o){const{from:i,to:n}=UZ(e.attribute,"fadeIn");this.add(e),d&&(s.push(d),this.add(d)),this._syncStateWithRelatedGraphic(o),this._animationConfig.enter.duration>0&&o.once("animate-bind",(a=>{e.setAttributes(i),d&&d.setAttributes(i);const l=this._afterRelatedGraphicAttributeUpdate(e,r,d,s,t,o,n,this._animationConfig.enter);o.on("afterAttributeUpdate",l)}))}}else if("update"===h){const t=n.get(c);n.delete(c),i.set(c,t);const r=t.text,{duration:s,easing:a}=this._animationConfig.update;(function(e,t,i){if(!v(i)){const{duration:n,easing:r,increaseEffect:s=!0}=i;return e.animate().to(t.attribute,n,r),void(s&&GZ(e,t,n,r))}i.forEach(((i,n)=>{const{duration:r,easing:s,increaseEffect:a=!0,channel:o}=i,{from:l,to:c}=WZ(e,t,o,i.options);ay(c)||e.animate().to(c,r,s),"text"in l&&"text"in c&&a&&GZ(e,t,r,s)}))})(r,e,this._animationConfig.update),t.labelLine&&d&&t.labelLine.animate().to(d.attribute,s,a)}})),n.forEach((e=>{var t;null===(t=e.text)||void 0===t||t.animate().to(UZ(e.text.attribute,"fadeOut").to,this._animationConfig.exit.duration,this._animationConfig.exit.easing).onEnd((()=>{this.removeChild(e.text),e.labelLine&&this.removeChild(e.labelLine)}))})),this._graphicToText=i}_renderWithOutAnimation(e){var t;const i=new Map,n=this._graphicToText||new Map,r=[],{visible:s}=null!==(t=this.attribute.line)&&void 0!==t?t:{};e.forEach((e=>{const t=this.getRelatedGraphic(e.attribute),a=(null==n?void 0:n.get(t))?"update":"enter",o=this._isCollectionBase?e.attribute.id:t;let l;if(s&&(l=this._createLabelLine(e,t)),"enter"===a)r.push(e),i.set(o,l?{text:e,labelLine:l}:{text:e}),this.add(e),l&&this.add(l),this._syncStateWithRelatedGraphic(t);else if("update"===a){const t=n.get(o);n.delete(o),i.set(o,t),t.text.setAttributes(e.attribute),t.labelLine&&l&&t.labelLine.setAttributes(l.attribute)}})),n.forEach((e=>{this.removeChild(e.text),e.labelLine&&this.removeChild(e.labelLine)})),this._graphicToText=i}_syncStateWithRelatedGraphic(e){this.attribute.syncState&&e.on("afterAttributeUpdate",this._handleRelatedGraphicSetState)}_afterRelatedGraphicAttributeUpdate(e,t,i,n,r,s,a,o){let{mode:l,duration:c,easing:h,delay:d}=o;const u=o=>{var p,g,f;const{detail:m}=o;if(!m)return{};const v=null===(p=m.animationState)||void 0===p?void 0:p.step;if(m.type!==wl.ANIMATE_UPDATE||!v||"wait"===v.type&&null==(null===(g=v.prev)||void 0===g?void 0:g.type))return{};if(m.type===wl.ANIMATE_END)return e.setAttributes(a),void(i&&i.setAttributes(a));const y=()=>{s&&(s.onAnimateBind=void 0,s.removeEventListener("afterAttributeUpdate",u))};switch(l){case"after":m.animationState.end&&(e.animate({onStart:y}).wait(d).to(a,c,h),i&&i.animate().wait(d).to(a,c,h));break;case"after-all":r===t.length-1&&m.animationState.end&&(t.forEach((e=>{e.animate({onStart:y}).wait(d).to(a,c,h)})),n.forEach((e=>{e.animate().wait(d).to(a,c,h)})));break;default:if(this._isCollectionBase){const t=this._idToPoint.get(e.attribute.id);!t||e.animates&&e.animates.has("label-animate")||!s.containsPoint(t.x,t.y,Sl.LOCAL,null===(f=this.stage)||void 0===f?void 0:f.pickerService)||(e.animate({onStart:y}).wait(d).to(a,c,h),i&&i.animate().wait(d).to(a,c,h))}else m.animationState.isFirstFrameOfStep&&(e.animate({onStart:y}).wait(d).to(a,c,h),i&&i.animate().wait(d).to(a,c,h))}};return u}_smartInvert(e){var t,i,n,r,s;const a=D(this.attribute.smartInvert)?this.attribute.smartInvert:{},{textType:o,contrastRatiosThreshold:l,alternativeColors:c,mode:h}=a,d=null!==(t=a.fillStrategy)&&void 0!==t?t:"invertBase",u=null!==(i=a.strokeStrategy)&&void 0!==i?i:"base",p=null!==(n=a.brightColor)&&void 0!==n?n:"#ffffff",g=null!==(r=a.darkColor)&&void 0!==r?r:"#000000",f=null!==(s=a.outsideEnable)&&void 0!==s&&s;if("null"!==d||"null"!==u)for(let m=0;m<e.length;m++){const t=e[m];if(!t)continue;const i=this.getRelatedGraphic(t.attribute),n=i.attribute.fill,r=n,s=MZ(t.attribute.fill,n,o,l,c,h),a=IZ(s,p)?p:g;if(f){const e=LZ(d,r,s,a);if(e&&t.setAttributes({fill:e}),0===t.attribute.lineWidth)continue;const i=LZ(u,r,s,a);i&&t.setAttributes({stroke:i})}else if(this._canPlaceInside(t.AABBBounds,i.AABBBounds)){const e=LZ(d,r,s,a);if(e&&t.setAttributes({fill:e}),0===t.attribute.lineWidth)continue;const i=LZ(u,r,s,a);i&&t.setAttributes({stroke:i})}else{if(0===t.attribute.lineWidth)continue;if(t.attribute.stroke){t.setAttributes({fill:MZ(t.attribute.fill,t.attribute.stroke,o,l,c,h)});continue}const e=LZ(d,r,s,a);e&&t.setAttributes({fill:e});const i=LZ(u,r,s,a);i&&t.setAttributes({stroke:i})}}}_canPlaceInside(e,t){return!(!e||!t)&&t.encloses(e)}setLocation(e){this.translateTo(e.x,e.y)}disableAnimation(){this._enableAnimation=!1}enableAnimation(){this._enableAnimation=!0}}tQ.defaultAttributes={textStyle:{fontSize:12,textAlign:"center",textBaseline:"middle",boundsPadding:[-1,0,-1,0]},offset:0,pickable:!1};class iQ extends tQ{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},iQ.defaultAttributes,e))}labeling(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e||!t)return;const{x1:r,y1:s,x2:a,y2:o}=e,l=Math.abs(a-r),c=Math.abs(o-s),h=Math.abs(t.x2-t.x1),d=Math.abs(t.y2-t.y1);let u=(t.x1+t.x2)/2,p=(t.y1+t.y2)/2,g=0,f=0;switch(i){case"top":case"inside-top":f=-.5;break;case"bottom":case"inside-bottom":f=.5;break;case"left":case"inside-left":g=-.5;break;case"right":case"inside-right":g=.5;break;case"top-right":g=.5,f=-.5;break;case"top-left":g=-.5,f=-.5;break;case"bottom-right":g=.5,f=.5;break;case"bottom-left":g=-.5,f=.5}u+=g*h,p+=f*d;let m=0,v=0;const y=i.includes("inside");switch(i.includes("top")?v=y?1:-1:i.includes("bottom")?v=y?-1:1:i.includes("left")?m=y?1:-1:i.includes("right")&&(m=y?-1:1),i){case"top-right":case"bottom-right":m=-1;break;case"top-left":case"bottom-left":m=1}return{x:u+m*n+m*l/2,y:p+v*n+v*c/2}}}iQ.tag="rect-label",iQ.defaultAttributes={textStyle:{fontSize:12,fill:"#000",textAlign:"center",textBaseline:"middle",boundsPadding:[-1,0,-1,0]},position:"top",offset:5,pickable:!1};class nQ extends tQ{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},nQ.defaultAttributes,e)),this.name="symbol-label"}labeling(e,t){return QZ(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}}nQ.defaultAttributes={textStyle:{fontSize:12,fill:"#000",textAlign:"center",textBaseline:"middle",boundsPadding:[-1,0,-1,0]},position:"top",offset:5,pickable:!1};class rQ{constructor(e,t,i,n,r,s,a,o,l){this.refDatum=e,this.center=t,this.outerCenter=i,this.quadrant=n,this.radian=r,this.middleAngle=s,this.innerRadius=a,this.outerRadius=o,this.circleCenter=l,this.labelVisible=!0,this.labelLimit=0}getLabelBounds(){return this.labelPosition&&this.labelSize?{x1:this.labelPosition.x-this.labelSize.width/2,y1:this.labelPosition.y-this.labelSize.height/2,x2:this.labelPosition.x+this.labelSize.width/2,y2:this.labelPosition.y+this.labelSize.height/2}:{x1:0,x2:0,y1:0,y2:0}}}class sQ extends tQ{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},sQ.defaultAttributes,e)),this.name="arc-label",this._ellipsisWidth=0,this._arcLeft=new Map,this._arcRight=new Map}_overlapping(e){return e}labeling(e,t){if(e&&t)return{x:0,y:0}}_layout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=super._layout(e),i=t.map((e=>this.getGraphicBounds(e))),n=Object.assign(Object.assign({},this.attribute.textStyle),{text:"\u2026"}),r=this._createLabelText(n),s=this.getGraphicBounds(r),a=s.x2-s.x1,o=this.layoutArcLabels(this.attribute.position,this.attribute,Array.from(this._idToGraphic.values()),e,i,a);for(let l=0;l<e.length;l++){const i=e[l],n=o.find((e=>{var t;return(null===(t=e.refDatum)||void 0===t?void 0:t.id)===i.id}));if(n){const e={visible:n.labelVisible,x:n.labelPosition.x,y:n.labelPosition.y,angle:n.angle,maxLineWidth:n.labelLimit,points:n.pointA&&n.pointB&&n.pointC?[n.pointA,n.pointB,n.pointC]:void 0,line:n.labelLine};t[l].setAttributes(e)}}return t}layoutArcLabels(e,t,i,n,r,s){this._arcLeft.clear(),this._arcRight.clear(),this._ellipsisWidth=s;let a=0;i.forEach((e=>{e.attribute.outerRadius>a&&(a=e.attribute.outerRadius)})),n.forEach(((e,i)=>{var s,o;const l=this._idToGraphic.get(e.id).attribute,c={x:null!==(s=null==l?void 0:l.x)&&void 0!==s?s:0,y:null!==(o=null==l?void 0:l.y)&&void 0!==o?o:0};if(!P(n[i])&&!P(r[i])){const e=n[i]?n[i]:null,s=r[i]?r[i]:{x1:0,x2:0,y1:0,y2:0},o=(l.startAngle+l.endAngle)/2,d=l.endAngle-l.startAngle,u=XZ(l.endAngle-d/2),p=YZ(c.x,c.y,l.outerRadius,o),g=YZ(c.x,c.y,a+t.line.line1MinLength,o),f=new rQ(e,p,g,u,d,o,l.innerRadius,l.outerRadius,c);f.pointA=YZ(c.x,c.y,this.computeDatumRadius(2*c.x,2*c.y,l.outerRadius),f.middleAngle),f.labelSize={width:s.x2-s.x1,height:s.y2-s.y1},1===(h=f.quadrant)||2===h?this._arcRight.set(f.refDatum,f):qZ(f.quadrant)&&this._arcLeft.set(f.refDatum,f)}var h}));const o=Array.from(this._arcLeft.values()),l=Array.from(this._arcRight.values()),c=[];switch(e){case"inside":case"inside-inner":case"inside-outer":c.push(...this._layoutInsideLabels(l,t,i)),c.push(...this._layoutInsideLabels(o,t,i));break;default:c.push(...this._layoutOutsideLabels(l,t,i)),c.push(...this._layoutOutsideLabels(o,t,i))}return c}_layoutInsideLabels(e,t,i){var n,r;const s=t,a=s.spaceWidth,o=null!==(n=s.position)&&void 0!==n?n:"inside",l=null!==(r=s.offsetRadius)&&void 0!==r?r:-a;return e.forEach((e=>{var i,n,r;const{labelSize:c,radian:h}=e,d=e.innerRadius,u=e.outerRadius;let p;if(h<(g=u,(f=c.height)>2*g?NaN:2*Math.asin(f/2/g)))p=0;else{let e;e=h>=Math.PI?d:Math.max(d,c.height/2/Math.tan(h/2)),p=u-e-a}var g,f;!0!==s.rotate&&(p=u-a);const m=this._getFormatLabelText(e.refDatum,p);e.labelText=m;const v=Math.min(p,e.labelSize.width),y=this._computeAlign(e,t);let b,_=0;"inside"===o&&(_="left"===y?v:"right"===y?0:v/2),b="inside-inner"===o?d-l+_:u+l-_,e.labelPosition=YZ(e.circleCenter.x,e.circleCenter.y,b,e.middleAngle),e.labelLimit=v,sb(v,0)||(e.labelVisible=!1),e.angle=null!==(n=null===(i=t.textStyle)||void 0===i?void 0:i.angle)&&void 0!==n?n:e.middleAngle;let x=null!==(r=s.offsetAngle)&&void 0!==r?r:0;["inside-inner","inside-outer"].includes(o)&&(x+=Math.PI/2),e.angle+=x})),e}_layoutOutsideLabels(e,t,i){var n,r,s;const a=null!==(n=i[0].attribute.x)&&void 0!==n?n:0,o=2*(null!==(r=i[0].attribute.y)&&void 0!==r?r:0),l=t.line.line2MinLength,c=t.layout,h=t.spaceWidth;if(e.forEach((e=>{const t=qZ(e.quadrant)?-1:1;e.labelPosition={x:e.outerCenter.x+t*(e.labelSize.width/2+l+h),y:e.outerCenter.y}})),e.sort(((e,t)=>e.labelPosition.y-t.labelPosition.y)),!1!==t.coverEnable||"none"===c.strategy){for(const n of e){const{labelPosition:e,labelSize:r}=n;n.labelLimit=r.width,n.pointB=qZ(n.quadrant)?{x:e.x+r.width/2+l+h,y:e.y}:{x:e.x-r.width/2-l-h,y:e.y},this._computeX(n,t,i)}!1===t.coverEnable&&"none"===c.strategy&&this._coverLabels(e)}else{const n=o/((null===(s=t.textStyle)||void 0===s?void 0:s.fontSize)||16);this._adjustY(e,n,t,i);const{minY:r,maxY:a}=e.reduce(((e,t)=>{const{y1:i,y2:n}=t.getLabelBounds();return e.minY=Math.max(0,Math.min(i,e.minY)),e.maxY=Math.min(o,Math.max(n,e.maxY)),e}),{minY:1/0,maxY:-1/0}),l=Math.max(Math.abs(o/2-r),Math.abs(a-o/2)),c=this._computeLayoutRadius(l,t,i);for(const s of e)this._computePointB(s,c,t,i),this._computeX(s,t,i)}const d=2*a;return e.forEach((e=>{var i,n;e.labelVisible&&(ab(e.pointB.x,l+h)||sb(e.pointB.x,d-l-h))&&(e.labelVisible=!1),e.angle=null!==(n=null===(i=t.textStyle)||void 0===i?void 0:i.angle)&&void 0!==n?n:0,t.offsetAngle&&(e.angle+=t.offsetAngle),e.labelLine=Object.assign({},t.line)})),e}_computeX(e,t,i){var n;const r=e.circleCenter,s=2*r.x;r.y;let a=0;i.forEach((e=>{e.attribute.outerRadius>a&&(a=e.attribute.outerRadius)}));const o=this.computeLayoutOuterRadius(a,t.width,t.height),l=t.line.line1MinLength,c=t.line.line2MinLength,h=null===(n=t.layout)||void 0===n?void 0:n.align,d=t.spaceWidth,{labelPosition:u,quadrant:p,pointB:g}=e;L(g.x*g.y)||(e.pointC={x:NaN,y:NaN},u.x=NaN,e.labelLimit=0);const f=this.computeRadius(o,t.width,t.height),m=qZ(p)?-1:1;let v=0,y=(m>0?s-g.x:g.x)-c-d;"labelLine"===h&&(v=(f+l+c)*m+r.x,y=(m>0?s-v:v)-d);const b=this._getFormatLabelText(e.refDatum,y);e.labelText=b;let _=Math.min(y,e.labelSize.width);switch(h){case"labelLine":break;case"edge":v=m>0?s-_-d:_+d;break;default:v=g.x+m*c}_=Math.max(this._ellipsisWidth,_),e.labelLimit=_,e.pointC={x:v,y:u.y};const x=.5*(e.labelLimit<e.labelSize.width?e.labelLimit:e.labelSize.width);if("edge"===h){const e=0;u.x=(m>0?s+e:e)-m*x}else{const e=0;u.x=v+e+m*(d+x)}}_computeAlign(e,t){var i,n,r,s,a,o;const l=t,c=null!==(n=null===(i=l.textStyle)||void 0===i?void 0:i.textAlign)&&void 0!==n?n:null===(r=l.textStyle)||void 0===r?void 0:r.align,h=null!==(a=null===(s=l.layout)||void 0===s?void 0:s.textAlign)&&void 0!==a?a:null===(o=l.layout)||void 0===o?void 0:o.align;return"inside"!==l.position?P(c)||"auto"===c?"edge"===h?qZ(e.quadrant)?"left":"right":qZ(e.quadrant)?"right":"left":c:P(c)||"auto"===c?"center":c}_getFormatLabelText(e,t){var i;return null!==(i=null==e?void 0:e.text)&&void 0!==i?i:""}_adjustY(e,t,i,n){var r;n[0].attribute.x;const s=2*(null!==(r=n[0].attribute.y)&&void 0!==r?r:0),a=i.layout;if("vertical"===a.strategy){let t,i=0;const n=e.length;if(n<=0)return;for(let s=0;s<n;s++){const{y1:r}=e[s].getLabelBounds();if(t=r-i,ab(t,0)){const i=this._shiftY(e,s,n-1,-t);this._shiftY(e,i,0,t/2)}const{y2:a}=e[s].getLabelBounds();i=a}const{y1:r}=e[0].getLabelBounds();t=r-0,ab(t,0)&&this._shiftY(e,0,n-1,-t);for(let a=e.length-1;a>=0&&e[a].getLabelBounds().y2>s;a--)e[a].labelVisible=!1}else if("none"!==a.strategy){const r=e.map(((e,t)=>({arc:e,originIndex:t,priorityIndex:0})));r.sort(((e,t)=>t.arc.radian-e.arc.radian)),r.forEach(((e,t)=>{e.priorityIndex=t,e.arc.labelVisible=!1}));let o=1/0,l=-1/0;for(let c=0;c<t&&c<e.length;c++){this._storeY(e);const t=r[c].arc;this._computeYRange(t,i,n),t.labelVisible=!0;const h=t.labelPosition.y,{lastIndex:d,nextIndex:u}=this._findNeighborIndex(e,r[c]),p=e[d],g=e[u];if(-1===d&&-1!==u){const i=g.labelPosition.y;h>i?t.labelPosition.y=i-g.labelSize.height/2-t.labelSize.height/2:this._twoWayShift(e,t,g,u)}else if(-1!==d&&-1===u){const i=p.labelPosition.y;h<i?t.labelPosition.y=i+p.labelSize.height/2+t.labelSize.height/2:this._twoWayShift(e,p,t,r[c].originIndex)}else if(-1!==d&&-1!==u){const i=p.labelPosition.y,n=g.labelPosition.y;h>n?(t.labelPosition.y=n-g.labelSize.height/2-t.labelSize.height/2,this._twoWayShift(e,p,t,r[c].originIndex)):h<i?(t.labelPosition.y=i+p.labelSize.height/2+t.labelSize.height/2,this._twoWayShift(e,t,g,u)):(this._twoWayShift(e,p,t,r[c].originIndex),this._twoWayShift(e,t,g,u))}const f=Math.min(o,r[c].originIndex),m=Math.max(l,r[c].originIndex);let v;if(v=e[m].getLabelBounds().y2-s,sb(v,0)&&this._shiftY(e,m,0,-v),v=e[f].getLabelBounds().y1-0,ab(v,0)&&this._shiftY(e,f,e.length-1,-v),v=e[m].getLabelBounds().y2-s,sb(v,0)){t.labelVisible=!1,this._restoreY(e);break}a.tangentConstraint&&!this._checkYRange(e)?(t.labelVisible=!1,this._restoreY(e)):(o=f,l=m)}}}_shiftY(e,t,i,n){const r=t<i?1:-1;let s=t;for(;-1!==s;){e[s].labelPosition.y+=n;const t=this._findNextVisibleIndex(e,s,i,r);if(t>=0&&t<e.length){const{y1:i,y2:n}=e[s].getLabelBounds(),{y1:a,y2:o}=e[t].getLabelBounds();if(r>0&&n<a||r<0&&i>o)return s}s=t}return i}_findNextVisibleIndex(e,t,i,n){const r=(i-t)*n;for(let s=1;s<=r;s++){const i=t+s*n;if(e[i].labelVisible)return i}return-1}_computePointB(e,t,i,n){const r=i;let s=0;n.forEach((e=>{e.attribute.outerRadius>s&&(s=e.attribute.outerRadius)}));const a=this.computeLayoutOuterRadius(s,i.width,i.height),o=r.line.line1MinLength;if("none"===r.layout.strategy)e.pointB={x:e.outerCenter.x,y:e.outerCenter.y};else{const n=e.circleCenter,r=this.computeRadius(a,i.width,i.height),{labelPosition:s,quadrant:l}=e,c=t-Math.max(r+o,e.outerRadius),h=Math.sqrt(t**2-Math.abs(n.y-s.y)**2)-c;L(h)?e.pointB={x:n.x+h*(qZ(l)?-1:1),y:s.y}:e.pointB={x:NaN,y:NaN}}}_storeY(e){for(const t of e)t.labelVisible&&(t.lastLabelY=t.labelPosition.y)}_computeYRange(e,t,i){const n=e.circleCenter,r={width:2*n.x,height:2*n.y};let s=0;i.forEach((e=>{e.attribute.outerRadius>s&&(s=e.attribute.outerRadius)}));const a=this.computeLayoutOuterRadius(s,t.width,t.height),o=t.line.line1MinLength,{width:l,height:c}=r,h=this.computeRadius(a,t.width,t.height),d=this._computeLayoutRadius(c/2,t,i),u=Math.abs(e.center.x-l/2),p=e.center.y-c/2;let g,f,m;if(rb(l/2,u))g=0,f=1,m=-p;else if(rb(c/2,p))g=1,f=0,m=-u;else{const e=-1/(p/u);g=e,f=-1,m=p-e*u}const v=function(e,t,i,n,r,s){if(0===e&&0===t||s<=0)return[];if(0===e){const e=-i/t,a=s**2-(e-r)**2;return a<0?[]:0===a?[{x:n,y:e}]:[{x:Math.sqrt(a)+n,y:e},{x:-Math.sqrt(a)+n,y:e}]}if(0===t){const t=-i/e,a=s**2-(t-n)**2;return a<0?[]:0===a?[{x:t,y:r}]:[{x:t,y:Math.sqrt(a)+r},{x:t,y:-Math.sqrt(a)+r}]}const a=(t/e)**2+1,o=2*((i/e+n)*(t/e)-r),l=o**2-4*a*((i/e+n)**2+r**2-s**2);if(l<0)return[];const c=(-o+Math.sqrt(l))/(2*a),h=(-o-Math.sqrt(l))/(2*a),d=-(t*c+i)/e;return 0===l?[{x:d,y:c}]:[{x:d,y:c},{x:-(t*h+i)/e,y:h}]}(g,f,m,o+h-d,0,d);if(v.length<2)return;let y,b;v[0].x>v[1].x&&v.reverse(),v[0].x<0?rb(v[0].y,v[1].y)?sb(e.middleAngle,-Math.PI)&&ab(e.middleAngle,0)||sb(e.middleAngle,Math.PI)&&ab(e.middleAngle,2*Math.PI)?(y=0,b=v[1].y+c/2):(y=v[1].y+c/2,b=c):v[0].y<v[1].y?(y=0,b=v[1].y+c/2):(y=v[1].y+c/2,b=r.height):(y=Math.min(v[0].y,v[1].y)+c/2,b=Math.max(v[0].y,v[1].y)+c/2),e.labelYRange=[y,b]}_computeLayoutRadius(e,t,i){const n=t,r=n.layoutArcGap,s=n.line.line1MinLength;let a=0;i.forEach((e=>{e.attribute.outerRadius>a&&(a=e.attribute.outerRadius)}));const o=this.computeLayoutOuterRadius(a,t.width,t.height),l=this.computeRadius(o,t.width,t.height)+s,c=l-r;return Math.max((c**2+e**2)/(2*c),l)}_findNeighborIndex(e,t){const i=t.originIndex;let n=-1,r=-1;for(let s=i-1;s>=0;s--)if(e[s].labelVisible){n=s;break}for(let s=i+1;s<e.length;s++)if(e[s].labelVisible){r=s;break}return{lastIndex:n,nextIndex:r}}_twoWayShift(e,t,i,n){const r=i.getLabelBounds().y1-t.getLabelBounds().y2;if(ab(r,0)){const t=this._shiftY(e,n,e.length-1,-r);this._shiftY(e,t,0,r/2)}}_restoreY(e){for(const t of e)t.labelVisible&&(t.labelPosition.y=t.lastLabelY)}_checkYRange(e){for(const t of e){const{labelYRange:e,labelPosition:i}=t;if(t.labelVisible&&e&&(ab(i.y,e[0])||sb(i.y,e[1])))return!1}return!0}_coverLabels(e){if(e.length<=1)return;let t=e[0].getLabelBounds();for(let i=1;i<e.length;i++){const n=e[i].getLabelBounds();ZZ(t,n)?e[i].labelVisible=!1:t=n}}_createLabelLine(e,t){var i,n,r,s,a,o,l;const{points:c,line:h={},visible:d,fill:u}=e.attribute,p=e.attribute.points?bp.line({visible:null===(r=null!==(i=h.visible&&d)&&void 0!==i?i:null===(n=e.attribute)||void 0===n?void 0:n.visible)||void 0===r||r,stroke:null!==(a=null===(s=h.style)||void 0===s?void 0:s.stroke)&&void 0!==a?a:u,lineWidth:null!==(l=null===(o=h.style)||void 0===o?void 0:o.lineWidth)&&void 0!==l?l:1,points:c,curveType:h.smooth?"basis":null}):void 0;return p&&this._setStatesOfLabelLine(p),p}computeRadius(e,t,i,n){return this.computeLayoutRadius(t||0,i||0)*e*(P(n)?1:n)}computeLayoutRadius(e,t){return Math.min(e/2,t/2)}_canPlaceInside(e,t){return"inside"===this.attribute.position}computeLayoutOuterRadius(e,t,i){return e/(Math.min(t,i)/2)}computeDatumRadius(e,t,i){const n=this.computeLayoutOuterRadius(i,e,t);return this.computeLayoutRadius(e||0,t||0)*n}}sQ.defaultAttributes={coverEnable:!1,spaceWidth:5,layoutArcGap:6,textStyle:{visible:!0,fontSize:14,fontWeight:"normal",fillOpacity:1,textAlign:"center",textBaseline:"middle"},position:"outside",offset:0,line:{visible:!0,line1MinLength:20,line2MinLength:10},layout:{align:"arc",strategy:"priority",tangentConstraint:!0},pickable:!1};class aQ extends tQ{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},aQ.defaultAttributes,e)),this.name="line-data-label"}labeling(e,t){return QZ(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}}aQ.defaultAttributes={textStyle:{fontSize:12,fill:"#000",textAlign:"center",textBaseline:"middle",boundsPadding:[-1,0,-1,0]},position:"top",offset:5,pickable:!1};class oQ extends tQ{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},oQ.defaultAttributes,e)),this.name="line-label"}getGraphicBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"end";if(!e||"line"!==e.type)return super.getGraphicBounds(e,t);const n=e.attribute.points||[t],r="start"===i?0:n.length-1;return n[r]?{x1:n[r].x,x2:n[r].x,y1:n[r].y,y2:n[r].y}:void 0}labeling(e,t){return JZ(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"end",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}}oQ.defaultAttributes={textStyle:{fontSize:12,fill:"#000",textAlign:"center",textBaseline:"middle",boundsPadding:[-1,0,-1,0]},position:"end",offset:6,pickable:!1};class lQ extends tQ{constructor(e){super(O({},lQ.defaultAttributes,e)),this.name="line-label"}getGraphicBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"end";var n;if("area"!==e.type)return super.getGraphicBounds(e,t);const r=(null===(n=null==e?void 0:e.attribute)||void 0===n?void 0:n.points)||[t],s="start"===i?0:r.length-1;return{x1:r[s].x,x2:r[s].x,y1:r[s].y,y2:r[s].y}}labeling(e,t){return JZ(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"end",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}}lQ.defaultAttributes={textStyle:{fontSize:12,fill:"#000",textAlign:"center",textBaseline:"middle",boundsPadding:[-1,0,-1,0]},position:"end",offset:6,pickable:!1};const cQ={rect:iQ,symbol:nQ,arc:sQ,line:oQ,area:lQ,"line-data":aQ};class hQ extends qW{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},hQ.defaultAttributes,e)),this.name="data-label"}render(){var e;const{dataLabels:t,size:i}=this.attribute;if(!t||0===t.length)return;const{width:n=0,height:r=0}=i||{};if(!n||!r||!L(r*n))return;this._componentMap||(this._componentMap=new Map);const s=TZ(n,r),a=s.bitmap(),o=new Map,l=this._componentMap;for(let c=0;c<t.length;c++){const i=t[c],n=cQ[i.type]||tQ;if(n){const{baseMarkGroupName:t,type:r}=i,l=null!==(e=i.id)&&void 0!==e?e:"".concat(t,"-").concat(r,"-").concat(c);let h=this._componentMap.get(l);h?(h.setBitmapTool(s),h.setBitmap(a),h.setAttributes(i),o.set(l,h)):(h=new n(i),h.setBitmap(a),h.setBitmapTool(s),this.add(h),o.set(l,h))}}l.forEach(((e,t)=>{o.get(t)||this.removeChild(e)})),this._componentMap=o}setLocation(e){this.translateTo(e.x,e.y)}disableAnimation(){this._componentMap.forEach((e=>{e.disableAnimation()}))}enableAnimation(){this._componentMap.forEach((e=>{e.enableAnimation()}))}}hQ.defaultAttributes={pickable:!1};class dQ extends Yb{constructor(e,t){super(e,Ur.label,t),this.spec.componentType=Ur.label}parseAddition(e){return super.parseAddition(e),this.labelStyle(e.labelStyle),this.size(e.size),this.target(e.target),this}labelStyle(e){return this.setFunctionSpec(e,"labelStyle")}size(e){return this.setFunctionSpec(e,"size")}target(e){if(this.spec.target){const e=z(this.spec.target).map((e=>_(e)?this.view.getMarkById(e):e));this.detach(e)}if(this.spec.target=e,e){const t=z(e).map((e=>_(e)?this.view.getMarkById(e):e));this.attach(t)}return this.commit(),this}_updateComponentEncoders(){const e=Object.assign({update:{}},this.spec.encode),t=Object.keys(e).reduce(((t,i)=>{const n=e[i];return n&&(t[i]={callback:(e,t,i)=>{var r,s,a,o;const l=z(this.spec.target).map((e=>_(e)?this.view.getMarkById(e):e)),c=null===(s=null===(r=this.group)||void 0===r?void 0:r.getGroupGraphicItem)||void 0===s?void 0:s.call(r);let h=Kf(this.spec.size,i);h||(h=c?{width:null!==(a=c.attribute.width)&&void 0!==a?a:c.AABBBounds.width(),height:null!==(o=c.attribute.height)&&void 0!==o?o:c.AABBBounds.height()}:{width:1/0,height:1/0});const d=this.spec.skipTheme?null:this.view.getCurrentTheme();return function(e,t,i,n,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};var a;const o=null===(a=s.components)||void 0===a?void 0:a.dataLabel,l=e.map(((e,t)=>{var a,o,l,c,h;const d=Object.assign(Object.assign({},r),{labelIndex:t}),u=null!==(a=Kf(n,d,e))&&void 0!==a?a:{},{components:p={}}=s;let g={};switch(e.markType){case Vr.line:case Vr.area:g="line"===u.type?p.lineLabel:"area"===u.type?p.areaLabel:p.lineDataLabel;break;case Vr.rect:case Vr.rect3d:case Vr.interval:g=p.rectLabel;break;case Vr.symbol:case Vr.circle:case Vr.cell:g=p.symbolLabel;break;case Vr.arc:case Vr.arc3d:g=p.arcLabel;break;case Vr.polygon:case Vr.path:default:g=p.pointLabel}const f=null!==(o=u.data)&&void 0!==o?o:[],m=null!==(c=null===(l=null==g?void 0:g.data)||void 0===l?void 0:l[0])&&void 0!==c?c:{};f&&f.length>0?f.forEach(((t,n)=>{if(e.elements[n]){const r=uy(i,t,e.elements[n],d);O(t,m,r)}})):e.elements.forEach((t=>{if("willRelease"!==t.getGraphicItem().releaseStatus)if(e.isCollectionMark())t.getDatum().forEach((e=>{const n=uy(i,e,t,d);f.push(O({},m,n))}));else{const e=uy(i,t.getDatum(),t,d),n=O({},m,e);f.push(n)}}));const v=null===(h=e.graphicItem)||void 0===h?void 0:h.name;return O({},g,{data:f,baseMarkGroupName:v,getBaseMarks:()=>e.elements.map((e=>e.getGraphicItem()))},null!=u?u:{})})).filter((e=>!P(e)));return O({},o,{size:t,dataLabels:l})}(l,h,n,this.spec.labelStyle,i,d)}}),t}),{});this._encoders=t}}dQ.componentType=Ur.label;const uQ=()=>{nm.registerGraphicComponent(Ur.label,(e=>new hQ(e))),nm.registerComponent(Ur.label,dQ)};const pQ={rect:vQ,symbol:mQ,arc:bQ,point:function(e){const{labelSpec:t}=e;let i;return i=!1!==t.overlap&&{avoidBaseMark:!1},{position:"center",overlap:i}},"line-data":function(e){const t=mQ(e);return m(t.overlap)||(t.overlap.avoidBaseMark=!1),t},stackLabel:function(e){const t=e.series,i=e.labelSpec||{},n=t.getTotalData();return{customLayoutFunc:n=>n.map((n=>{const r=i.position||"withChange",s=i.offset||0,a=n.data,o=gQ(e,a,i.formatMethod);return o.x=(e=>"vertical"===t.direction?t.totalPositionX(e,"index",.5):"middle"===r?.5*(t.totalPositionX(e,"end")+t.totalPositionY(e,"start")):"max"===r?t.totalPositionX(e,e.end>=e.start?"end":"start")+s:"min"===r?t.totalPositionX(e,e.end>=e.start?"start":"end")-s:t.totalPositionX(e,"end")+(e.end>=e.start?s:-s))(a),o.y=(e=>"vertical"===t.direction?"middle"===r?.5*(t.totalPositionY(e,"end")+t.totalPositionY(e,"start")):"max"===r?t.totalPositionY(e,e.end>=e.start?"end":"start")-s:"min"===r?t.totalPositionY(e,e.end>=e.start?"start":"end")+s:t.totalPositionY(e,"end")+(e.end>=e.start?-s:s):t.totalPositionY(e,"index",.5))(a),"vertical"===t.direction?o.textBaseline="middle"===r?r:"withChange"===r&&a.end-a.start>=0||"max"===r?"bottom":"top":o.textAlign="middle"===r?"center":"withChange"===r&&a.end-a.start>=0||"max"===r?"left":"right",u_(Object.assign(Object.assign({},o),{id:n.id}))})),dataFilter:e=>{const i=[];return n.forEach((n=>{const r=e.find((e=>{var i;return n.index===(null===(i=e.data)||void 0===i?void 0:i[t.getDimensionField()[0]])}));r&&(r.data=n,i.push(r))})),i},overlap:{strategy:[]}}},line:_Q,area:_Q,rect3d:vQ,arc3d:bQ,treemap:function(e){const t=e.labelSpec;return{customLayoutFunc:i=>i.map((i=>{const n=i.data,r=gQ(e,n,t.formatMethod);return u_(Object.assign(Object.assign({},r),{id:i.id,pickable:!1}))})),overlap:!1}}};function gQ(e,t,i,n){var r;const{labelMark:s,series:a}=e,o={text:t[a.getMeasureField()[0]],data:t,textType:null!==(r=e.labelSpec.textType)&&void 0!==r?r:"text"},l=Object.keys(s.stateStyle.normal);for(const d of l){const e=s.getAttribute(d,t);o[d]=e}return i&&(o.text=i(o.text,t,{series:a})),n&&("pie"===a.type?t._percent_=(100*t[qe]).toFixed(2)+"%":t[Iw]&&(t._percent_=(100*t[Iw]).toFixed(2)+"%"),o.text=(h=t,(c=n)&&h?c.replace(/\\?\{([^{}]+)\}/g,((e,t)=>"\\"===e.charAt(0)?e.slice(1):void 0===h[t]?"":h[t])):c)),o;var c,h}function fQ(e){return Q(e)?t=>e(t.data):e}function mQ(e){var t,i,n;const{series:r,labelSpec:s}=e,a="horizontal"===r.direction?"right":"top",o=null!==(t=fQ(s.position))&&void 0!==t?t:a;let l;return l=!1!==s.overlap&&{strategy:null!==(n=null===(i=s.overlap)||void 0===i?void 0:i.strategy)&&void 0!==n?n:[{type:"position",position:["top","bottom","right","left","top-right","top-left","bottom-left","bottom-right"]}],avoidBaseMark:"center"!==o},{position:o,overlap:l}}function vQ(e){var t,i,n,r,s,a;const{series:o,labelSpec:l={}}=e,c=null!==(t=fQ(l.position))&&void 0!==t?t:"outside",h=null!==(i=o.direction)&&void 0!==i?i:"vertical",d="horizontal"===o.direction?null===(n=o.getXAxisHelper())||void 0===n?void 0:n.isInverse():null===(r=o.getYAxisHelper())||void 0===r?void 0:r.isInverse();let u,p=c;_(c)&&"inside"!==p&&(p=e=>{const{data:t}=e,i=o.getMeasureField()[0];if("outside"===c){const e={vertical:["top","bottom"],horizontal:["right","left"]},n=(null==t?void 0:t[i])>=0&&d||(null==t?void 0:t[i])<0&&!d?1:0;return e[h][n]}return"inside-bottom"===c?"horizontal"===o.direction?"inside-left":"inside-bottom":"inside-top"===c?"horizontal"===o.direction?"inside-right":"inside-top":c}),u=!1!==l.overlap&&{strategy:null!==(a=null===(s=l.overlap)||void 0===s?void 0:s.strategy)&&void 0!==a?a:yQ(o)};let g=!1;return _(c)&&c.includes("inside")&&(g=!0),{position:p,overlap:u,smartInvert:g}}function yQ(e){return[{type:"position",position:t=>{var i,n;const{data:r}=t,s=e.getMeasureField()[0];return("horizontal"===e.direction?null===(i=e.getXAxisHelper())||void 0===i?void 0:i.isInverse():null===(n=e.getYAxisHelper())||void 0===n?void 0:n.isInverse())?(null==r?void 0:r[s])>=0?"horizontal"===e.direction?["left","inside-left"]:["bottom","inside-bottom"]:"horizontal"===e.direction?["right","inside-right"]:["top","inside-top"]:(null==r?void 0:r[s])>=0?"horizontal"===e.direction?["right","inside-right"]:["top","inside-top"]:"horizontal"===e.direction?["left","inside-left"]:["bottom","inside-bottom"]}}]}function bQ(e){var t;const{labelSpec:i}=e,n=null!==(t=fQ(i.position))&&void 0!==t?t:"outside",r=n;let s;return s=i.smartInvert?i.smartInvert:_(n)&&n.includes("inside"),{position:r,smartInvert:s}}function _Q(e){var t,i,n,r;const{labelSpec:s,series:a}=e,o=null===(n=null===(i=null===(t=a.getViewDataStatistics)||void 0===t?void 0:t.call(a).latestData)||void 0===i?void 0:i[a.getSeriesField()])||void 0===n?void 0:n.values,l=o?o.map(((e,t)=>({[a.getSeriesField()]:e,index:t}))):[];return{position:null!==(r=s.position)&&void 0!==r?r:"end",data:l}}class xQ extends dF{constructor(e,t){super(e,t),this.type=r.label,this.name=r.label,this.layoutType="none",this.layoutZIndex=zw.Label,this._regions=t.getRegionsInIndex([t.specIndex])}_interactiveConfig(e){const{interactive:t}=e;if(!0!==t)return{hover:!1,select:!1};const i={hover:!1,select:!1,state:e.state},{hover:n,select:r}=this._option.getChart().getSpec();return!1===n&&!1===n.enable||(i.hover=!0),!1===r&&!1===r.enable||(i.select=!0),i}_compareSpec(e,t){const i=super._compareSpec(e,t);return i.reRender=!0,ty(t,e)||(i.reMake=!0),i}onRender(e){}changeRegions(e){}_getNeedClearVRenderComponents(){return[]}}xQ.type=r.label;class SQ extends DB{constructor(){super(...arguments),this.skipEncode=!1}getRule(){return this._rule}setRule(e){this._rule=e}getTarget(){return this._target}setTarget(e){this._target=e,this._rule||this.setRule(e.type)}getComponent(){return this._component}setComponent(e){this._component=e}}SQ.type="text",SQ.constructorType="label";const wQ=()=>{_n.registerMark(SQ.constructorType,SQ),uP()};class CQ extends cF{_initTheme(e,t){return{spec:e,theme:this._theme}}}class kQ extends xQ{constructor(e,t){super(e,t),this.type=r.label,this.name=r.label,this.specKey="label",this.transformerConstructor=CQ,this.layoutZIndex=zw.Label,this._layoutRule=e.labelLayout||"series"}static getSpecInfo(e,t){const i=[];return((null==t?void 0:t.region)||[]).forEach(((n,s)=>{const a=(n.seriesIndexes||[]).some((e=>{const i=t.series[e],{markLabelSpec:n={}}=i;return Object.values(n).some((e=>Array.isArray(e)&&(e=>e.some((e=>e.visible)))(e)))}));("region"!==e.labelLayout||a)&&i.push({spec:e,type:r.label,specInfoPath:["region",s,"markLabel"],specIndex:s})})),i}init(e){super.init(e),this.initEvent(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}reInit(e){super.reInit(e),this._labelInfoMap&&this._labelInfoMap.clear(),this._initTextMark(),this._initTextMarkStyle()}initEvent(){this.event.on(Ir.dataZoomChange,(()=>{this._labelComponentMap.forEach(((e,t)=>{const i=t.getProduct().getGroupGraphicItem();i&&i.disableAnimation()})),this.event.on($r.AFTER_MARK_RENDER_END,e)}));const e=()=>{this._labelComponentMap.forEach(((e,t)=>{const i=t.getProduct().getGroupGraphicItem();i&&i.enableAnimation()})),this.event.off($r.AFTER_MARK_RENDER_END,e)};this.event.on("afterElementEncode",(e=>{var t;const i=e.item;!1===this._option.getChart().getLayoutTag()&&(null===(t=i.getContext())||void 0===t?void 0:t.model)===this&&this._delegateLabelEvent(i.getGroupGraphicItem())}))}_delegateLabelEvent(e){const t=null==e?void 0:e.findAll((e=>"text"===e.type),!0).filter((e=>!e.__vchart_event));t&&t.length>0&&t.forEach((t=>{t.__vchart_event=!0,t.addEventListener("*",((i,n)=>this._delegateEvent(e,i,n,t,t.attribute.data)))}))}_initTextMark(){this._labelInfoMap||(this._labelInfoMap=new Map),this._labelComponentMap||(this._labelComponentMap=new Map),gr(this._regions,(e=>{const{markLabelSpec:t={}}=e.getSpecInfo(),i=Object.keys(t),n=e.getRegion();this._labelInfoMap.get(n)||this._labelInfoMap.set(n,[]);for(let r=0;r<i.length;r++){const s=i[r],a=e.getMarkInName(s);a&&t[s].forEach(((t,i)=>{if(t.visible){const r=this._labelInfoMap.get(n),o=this._createMark({type:"label",name:"".concat(s,"-label-").concat(i)},{noSeparateStyle:!0,attributeContext:e.getMarkAttributeContext()});o.setTarget(a),r.push({labelMark:o,baseMark:a,series:e,labelSpec:t})}}))}}))}_initLabelComponent(){this._labelInfoMap.forEach(((e,t)=>{if("region"===this._layoutRule){const e=this._createMark({type:"component",name:"".concat(t.getGroupMark().name,"-label-component")},{componentType:"label",noSeparateStyle:!0,support3d:this._spec.support3d});e&&(e.setSkipBeforeLayouted(!0),this._marks.addMark(e),this._labelComponentMap.set(e,(()=>this._labelInfoMap.get(t))))}else e.forEach(((e,i)=>{const n=this._createMark({type:"component",name:"".concat(e.labelMark.name,"-component")},{componentType:"label",noSeparateStyle:!0,support3d:e.baseMark.getSupport3d()});n&&(n.setSkipBeforeLayouted(!0),this._marks.addMark(n),this._labelComponentMap.set(n,(()=>this._labelInfoMap.get(t)[i])),e.labelMark.setComponent(n))}))}))}_initTextMarkStyle(){this._labelInfoMap.forEach((e=>{e.forEach((e=>{var t,i;const{labelMark:n,labelSpec:r,series:s}=e;if(this.initMarkStyleWithSpec(n,r,void 0),Q(null==r?void 0:r.getStyleHandler)){const e=r.getStyleHandler(s);null==e||e.call(s,n)}(null===(i=null===(t=n.stateStyle)||void 0===t?void 0:t.normal)||void 0===i?void 0:i.lineWidth)&&n.setAttribute("stroke",s.getColorAttribute(),"normal",Tw.Base_Series)}))}))}updateLayoutAttribute(){super.updateLayoutAttribute(),this._labelComponentMap.forEach(((e,t)=>{const i=e();v(i)?this._updateMultiLabelAttribute(i,t):this._updateSingleLabelAttribute(i,t)}))}_updateMultiLabelAttribute(e,t){this._updateLabelComponentAttribute(t.getProduct(),e.map((e=>{let{baseMark:t}=e;return t.getProduct()})),e)}_updateSingleLabelAttribute(e,t){const{baseMark:i}=e;this._updateLabelComponentAttribute(t.getProduct(),i.getProduct(),[e])}_updateLabelComponentAttribute(e,t,i){const n=this._option.getAllComponents().filter((e=>"totalLabel"===e.type));e.target(t).configure({interactive:!1}).depend(n.map((e=>e.getMarks()[0].getProduct()))).labelStyle(((e,t)=>{var n,r;const s=i[t.labelIndex];if(s){const{labelSpec:e,labelMark:t}=s,i=t.getRule(),a=this._interactiveConfig(e),o=null!==(r=null===(n=this._spec)||void 0===n?void 0:n.centerOffset)&&void 0!==r?r:0,l=_e({textStyle:Object.assign({pickable:!0===e.interactive},e.style),overlap:{avoidMarks:this._option.getAllComponents().filter((e=>"totalLabel"===e.type)).map((e=>e.getMarks()[0].getProductId()))},x:0,y:0},function(e,t){var i;const{labelSpec:n}=t;return n.overlap&&!D(n.overlap)&&(n.overlap={}),(null!==(i=pQ[e])&&void 0!==i?i:pQ.point)(t)}(i,s),Object.assign(Object.assign(Object.assign({},uD(e,["position","style","state","type"])),a),{centerOffset:o}));return"line"!==i&&"area"!==i||(l.type=i),l}})).encode(((e,t,n)=>{if(i[n.labelIndex]){const{labelSpec:t,labelMark:r}=i[n.labelIndex];return r.skipEncode?{data:e}:gQ(i[n.labelIndex],e,t.formatMethod,t.formatter)}})).size((()=>i[0].series.getRegion().getLayoutRect()))}compileMarks(){this.getMarks().forEach((e=>{var t;const i=this._labelComponentMap.get(e)();let n;n=v(i)?i[0].series.getRegion().getGroupMark().getProduct():i.series.getRegion().getGroupMark().getProduct(),e.compile({group:n}),null===(t=e.getProduct())||void 0===t||t.configure({context:{model:this,labelInfo:i}})}))}getVRenderComponents(){const e=[];return this._labelComponentMap.forEach(((t,i)=>{const n=i.getProduct().getGroupGraphicItem();n&&e.push(n)})),e}}kQ.type=r.label,kQ.specKey="label",kQ.transformerConstructor=CQ;class AQ extends xQ{constructor(){super(...arguments),this.type=r.totalLabel,this.name=r.totalLabel,this.specKey="totalLabel",this.layoutZIndex=zw.Label}static getSpecInfo(e,t){var i;const n=[];return null===(i=null==t?void 0:t.region)||void 0===i||i.forEach(((e,i)=>{var s;null===(s=e.seriesIndexes)||void 0===s||s.forEach((e=>{const{spec:s}=t.series[e],a=s[this.specKey];(null==a?void 0:a.visible)&&n.push({spec:a,type:r.totalLabel,specPath:["series",e,this.specKey],specIndex:i})}))})),n}init(e){super.init(e),this._initTextMark(),this._initLabelComponent()}_initTextMark(){var e;const t=this._getSeries();if(null===(e=t.getSpec().totalLabel)||void 0===e?void 0:e.visible){const e=t.getMarksInType(["rect","symbol"])[0],i=this._createMark({type:"label",name:"".concat(e.name,"-total-label")});this._baseMark=e,this._textMark=i,this._initTextMarkStyle()}}_initTextMarkStyle(){super.initMarkStyleWithSpec(this._textMark,this._spec),this.setMarkStyle(this._textMark,{text:e=>e[Lw]},"normal",Tw.Default)}_initLabelComponent(){const e=this._getSeries(),t=this._createMark({type:"component",name:"".concat(e.name,"-total-label-component")},{componentType:"label",noSeparateStyle:!0,support3d:this._spec.support3d});t&&this._marks.addMark(t)}updateLayoutAttribute(){super.updateLayoutAttribute();const e=this._getSeries();this._marks.forEach(((t,i)=>{t.getProduct().target(this._baseMark.getProduct()).configure({interactive:!1}).labelStyle((()=>{if(this._baseMark){const{offset:t,animation:i,overlap:n}=this._spec,r=this._interactiveConfig(this._spec);return _e({textStyle:{pickable:!0===this._spec.interactive},position:EQ(e,this._baseMark.type),x:0,y:0},Object.assign({offset:t,animation:i,overlap:n,dataFilter:e=>e.filter((e=>e.data[Fw]))},r))}})).encode((t=>gQ({baseMark:this._baseMark,labelMark:this._textMark,series:e,labelSpec:e.getSpec().totalLabel},t,this._spec.formatMethod))).size((()=>this._regions[0].getLayoutRect()))}))}compileMarks(){this.getMarks().forEach((e=>{var t;const i=this._regions[0].getGroupMark().getProduct();e.compile({group:i}),null===(t=e.getProduct())||void 0===t||t.configure({context:{model:this}})}))}getVRenderComponents(){const e=[];return this.getMarks().forEach((t=>{const i=t.getProduct().getGroupGraphicItem();i&&e.push(i)})),e}_getSeries(){return this._option.getSeriesInIndex([this.getSpecPath()[1]])[0]}}function EQ(e,t){let i;return i="rect"===t&&"horizontal"===e.direction?"right":"top",i}AQ.type=r.totalLabel,AQ.specKey="totalLabel";Xq(),ZW(),RS(),SE(),HE();class TQ extends zq{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},TQ.defaultAttributes,e)),this.name="markPoint"}setLabelPos(){}setItemAttributes(e,t,i,n){var r;if(!e)return;const{autoRotate:s=!0,refX:a=0,refY:o=0,refAngle:l=0,textStyle:c={},richTextStyle:h={},imageStyle:d={},position:u=Tq.middle}=t,p=(null===(r=this._line)||void 0===r?void 0:r.getEndAngle())||0,g=a*Math.cos(p)+o*Math.cos(p-Math.PI/2),f=a*Math.sin(p)+o*Math.sin(p-Math.PI/2);"text"===n?e.setAttributes(Object.assign(Object.assign({},c),{textStyle:Object.assign(Object.assign({},Gq[(null==t?void 0:t.position)||"end"]),c.textStyle)})):"richText"===n?e.setAttributes({dx:this.getItemDx(e,u,h)+(h.dx||0),dy:this.getItemDy(e,u,h)+(h.dy||0)}):"image"===n&&e.setAttributes({dx:this.getItemDx(e,u,d)+(d.dx||0),dy:this.getItemDy(e,u,d)+(d.dy||0)}),e.setAttributes({x:i.x+(g||0),y:i.y+(f||0),angle:s&&p+l})}getItemDx(e,t,i){var n,r;const s=null!==(r=null===(n=null==e?void 0:e.AABBBounds)||void 0===n?void 0:n.width())&&void 0!==r?r:(null==i?void 0:i.width)||0;return t.includes("inside")?-s:0}getItemDy(e,t,i){var n,r;const s=null!==(r=null===(n=null==e?void 0:e.AABBBounds)||void 0===n?void 0:n.height())&&void 0!==r?r:(null==i?void 0:i.height)||0;return t.includes("top")||t.includes("Top")?-s:t.includes("middle")||t.includes("Middle")?-s/2:0}initItem(e,t){const{type:i="text",symbolStyle:n,richTextStyle:r,imageStyle:s,renderCustomCallback:a}=e;let o;return"symbol"===i?o=bp.symbol(Object.assign(Object.assign({},t),n)):"text"===i?o=new mG(Object.assign({},t)):"richText"===i?o=bp.richtext(Object.assign(Object.assign({},t),r)):"image"===i?o=bp.image(Object.assign(Object.assign({},t),s)):"custom"===i&&a&&(o=a()),this.setItemAttributes(o,e,t,i),o}getItemLineAttr(e,t,i){let n=[];const{type:r="type-s"}=e;return n="type-do"===r?[t,{x:(t.x+i.x)/2,y:i.y},i]:"type-po"===r?[t,{x:i.x,y:t.y},i]:"type-op"===r?[t,{x:t.x,y:i.y},i]:[t,i],n}setItemLineAttr(e,t,i,n){if(this._line){const{startSymbol:r,endSymbol:s,lineStyle:a}=e,o=this.getItemLineAttr(e,t,i);this._line.setAttributes({points:o,startSymbol:r,endSymbol:s,lineStyle:a,visible:n})}}getDecorativeLineAttr(e,t){var i;const n=(null===(i=null==e?void 0:e.decorativeLine)||void 0===i?void 0:i.length)||10,r=this._line.getEndAngle()||0;return{startPointOffsetX:n/2*Math.cos(r-Math.PI/2),startPointOffsetY:n/2*Math.sin(r-Math.PI/2),endPointOffsetX:-n/2*Math.cos(r-Math.PI/2),endPointOffsetY:-n/2*Math.sin(r-Math.PI/2)}}setDecorativeLineAttr(e,t,i){if(this._decorativeLine){const{lineStyle:n}=e,{startPointOffsetX:r,startPointOffsetY:s,endPointOffsetX:a,endPointOffsetY:o}=this.getDecorativeLineAttr(e,t);this._decorativeLine.setAttributes(Object.assign(Object.assign({points:[{x:t.x+r,y:t.y+s},{x:t.x+a,y:t.y+o}]},n),{visible:i}))}}setAllOfItemsAttr(e){var t;const{position:i,itemLine:n={},itemContent:r={},limitRect:s}=this.attribute,{type:a="text",confine:o}=r;if(s&&o){const{x:t,y:i,width:n,height:r}=s,{dx:a,dy:o}=Kq(this._item,{x1:t,y1:i,x2:t+n,y2:i+r});e.x=e.x+a,e.y=e.y+o}this.setItemAttributes(this._item,r,e,a),this.setItemLineAttr(n,i,e,n.visible),this.setDecorativeLineAttr(n,e,null===(t=n.decorativeLine)||void 0===t?void 0:t.visible)}initMarker(e){const{position:t,itemContent:i={}}=this.attribute,n={x:t.x+(i.offsetX||0),y:t.y+(i.offsetY||0)},r=new QW({points:[],pickable:!1});r.name="mark-point-line",this._line=r,e.add(r);const s=bp.line({points:[]});s.name="mark-point-decorativeLine",this._decorativeLine=s,e.add(s);const a=this.initItem(i,n);this._item=a,this.setAllOfItemsAttr(n),e.add(a)}updateMarker(){const{position:e,itemContent:t={}}=this.attribute,{type:i="text"}=t,n={x:e.x+(t.offsetX||0),y:e.y+(t.offsetY||0)};this.setItemAttributes(this._item,t,n,i),this.setAllOfItemsAttr(n)}isValidPoints(){const{position:e}=this.attribute;return!(!L(e.x)||!L(e.y))}}TQ.defaultAttributes={itemLine:{visible:!0,decorativeLine:{visible:!1,length:30},startSymbol:{visible:!0,clip:!0,symbolType:"circle",size:20,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},endSymbol:{visible:!1,clip:!0,symbolType:"triangle",size:12,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},lineStyle:{stroke:"#000",lineWidth:1}},itemContent:{type:"text",position:"middle",refX:10,symbolStyle:{symbolType:"star",fill:"rgb(48, 115, 242)",fillOpacity:.8,size:20},textStyle:{dx:0,dy:0},imageStyle:{width:80,height:80},richTextStyle:{width:100,height:100}}};var OQ=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class PQ extends Zq{constructor(){super(...arguments),this.type=r.markPoint,this.name=r.markPoint,this.specKey="markPoint",this.layoutZIndex=zw.MarkPoint}static getSpecInfo(e){const t=e[this.specKey];if(ay(t))return;if(!v(t)&&!1!==t.visible)return[{spec:t,specPath:[this.specKey],type:r.markPoint}];const i=[];return t.forEach(((e,t)=>{!1!==e.visible&&i.push({spec:e,specIndex:t,specPath:[this.specKey,t],type:r.markPoint})})),i}_createMarkerComponent(){var e,t;const{itemContent:i={},itemLine:n={}}=this._spec,{text:r={},symbol:s,image:a,richText:o}=i,l=OQ(i,["text","symbol","image","richText"]),c={zIndex:this.layoutZIndex,interactive:null!==(e=this._spec.interactive)&&void 0!==e&&e,position:{x:0,y:0},clipInRange:null!==(t=this._spec.clip)&&void 0!==t&&t,itemContent:Object.assign({symbolStyle:Yj(null==s?void 0:s.style),imageStyle:null==a?void 0:a.style,textStyle:Nq(r),richTextStyle:null==o?void 0:o.style},l)},{visible:h,line:d={}}=n,u=OQ(n,["visible","line"]);return c.itemLine=!1!==h?Object.assign(Object.assign({},u),{visible:!0,lineStyle:Yj(d.style)}):{visible:!1},new TQ(c)}_markerLayout(){var e,t,i,n,r,s;const a=this._spec,o=this._markerData,l=this._relativeSeries,c="x"in a&&"y"in a,h="coordinate"in a,d="position"in a,u=null!==(e=null==a?void 0:a.autoRange)&&void 0!==e&&e;let p;c?p=Lq(o,l,l,l,u)[0][0]:h?p=jq(o,l,u,a.coordinatesOffset)[0]:d&&(p=Fq([a.position],l,a.regionRelative)[0]);const g=this._relativeSeries.getViewData().latestData,f=o?o.latestData[0]&&o.latestData[0].latestData?o.latestData[0].latestData:o.latestData:g;let m;if(a.clip||(null===(t=a.itemContent)||void 0===t?void 0:t.confine)){const{minX:e,maxX:t,minY:i,maxY:n}=Bq([l.getRegion()]);m={x:e,y:i,width:t-e,height:n-i}}if(this._markerComponent){const e=null!==(i=this._markerComponent.attribute)&&void 0!==i?i:{},t=null!==(r=null===(n=e.itemContent)||void 0===n?void 0:n.textStyle)&&void 0!==r?r:{};this._markerComponent.setAttributes({position:p,itemContent:Object.assign(Object.assign({},e.itemContent),{textStyle:Object.assign(Object.assign({},t),{text:(null===(s=this._spec.itemContent.text)||void 0===s?void 0:s.formatMethod)?this._spec.itemContent.text.formatMethod(f,g):t.text})}),limitRect:m,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}}_initDataView(){const e=this._spec,t=this._relativeSeries,i=x(e.x)&&x(e.y),n=x(e.coordinate);if(!n&&!i)return;let r;uo(this._option.dataSet,"markerAggregation",Sq),uo(this._option.dataSet,"markerFilter",$q),i?r=[this._processSpecXY(e.x,e.y)]:n&&(r=this._processSpecCoo(e));const s=new R(this._option.dataSet,{name:"".concat(this.type,"_").concat(this.id,"_data")});s.parse([t.getViewData()],{type:"dataview"}),s.transform({type:"markerAggregation",options:r}),r&&s.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),s.target.on("change",(()=>{this._markerLayout()})),this._markerData=s}}PQ.type=r.markPoint,PQ.specKey="markPoint";var MQ;!function(e){e.drawStart="drawStart",e.drawEnd="drawEnd",e.drawing="drawing",e.moving="moving",e.moveStart="moveStart",e.moveEnd="moveEnd",e.brushClear="brushClear"}(MQ||(MQ={}));const IQ={trigger:"pointerdown",updateTrigger:"pointermove",endTrigger:"pointerup",resetTrigger:"pointerupoutside",hasMask:!0,brushMode:"single",brushType:"rect",brushStyle:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",strokeWidth:2},brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:10,interactiveRange:{y1:-1/0,y2:1/0,x1:-1/0,x2:1/0}},RQ=5;const DQ={debounce:F,throttle:Nr};s_(),zO();class LQ extends qW{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},LQ.defaultAttributes,e)),this.name="brush",this._activeDrawState=!1,this._cacheDrawPoints=[],this._isDrawedBeforeEnd=!1,this._activeMoveState=!1,this._operatingMaskMoveDx=0,this._operatingMaskMoveDy=0,this._operatingMaskMoveRangeX=[-1/0,1/0],this._operatingMaskMoveRangeY=[-1/0,1/0],this._brushMaskAABBBoundsDict={},this._onBrushStart=e=>{var t;if(this._outOfInteractiveRange(e))return;e.stopPropagation();const i=null===(t=this.attribute.brushMoved)||void 0===t||t;this._activeMoveState=i&&this._isPosInBrushMask(e),this._activeDrawState=!this._activeMoveState,this._activeDrawState&&this._initDraw(e),this._activeMoveState&&this._initMove(e)},this._onBrushing=e=>{this._outOfInteractiveRange(e)||((this._activeDrawState||this._activeMoveState)&&e.stopPropagation(),this._activeDrawState&&this._drawing(e),this._activeMoveState&&this._moving(e))},this._onBrushEnd=e=>{e.preventDefault();const{removeOnClick:t=!0}=this.attribute;this._activeDrawState&&!this._isDrawedBeforeEnd&&t?(this._container.incrementalClearChild(),this._brushMaskAABBBoundsDict={},this._dispatchEvent(MQ.brushClear,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e})):(this._activeDrawState&&this._dispatchEvent(MQ.drawEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e}),this._activeMoveState&&this._dispatchEvent(MQ.moveEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e})),this._activeDrawState=!1,this._activeMoveState=!1,this._isDrawedBeforeEnd=!1,this._operatingMask&&this._operatingMask.setAttribute("pickable",!1)}}_bindBrushEvents(){if(this.attribute.disableTriggerEvent)return;const{delayType:e="throttle",delayTime:t=0,trigger:i=IQ.trigger,updateTrigger:n=IQ.updateTrigger,endTrigger:r=IQ.endTrigger,resetTrigger:s=IQ.resetTrigger}=this.attribute;this.stage.addEventListener(i,this._onBrushStart),this.stage.addEventListener(n,DQ[e](this._onBrushing,t)),this.stage.addEventListener(r,this._onBrushEnd),this.stage.addEventListener(s,this._onBrushEnd)}_isPosInBrushMask(e){const t=this.eventPosToStagePos(e),i=this._container.getChildren();for(let n=0;n<i.length;n++){const{points:e=[],dx:r=0,dy:s=0}=i[n].attribute;if(tX(e.map((e=>({x:e.x+r,y:e.y+s}))),t.x,t.y))return this._operatingMask=i[n],!0}return!1}_initDraw(e){const{brushMode:t}=this.attribute,i=this.eventPosToStagePos(e);this._cacheDrawPoints=[i],this._isDrawedBeforeEnd=!1,"single"===t&&(this._brushMaskAABBBoundsDict={},this._container.incrementalClearChild()),this._addBrushMask(),this._dispatchEvent(MQ.drawStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e})}_initMove(e){var t,i;this._cacheMovePoint=this.eventPosToStagePos(e),this._operatingMaskMoveDx=null!==(t=this._operatingMask.attribute.dx)&&void 0!==t?t:0,this._operatingMaskMoveDy=null!==(i=this._operatingMask.attribute.dy)&&void 0!==i?i:0;const{interactiveRange:n}=this.attribute,{minY:r=-1/0,maxY:s=1/0,minX:a=-1/0,maxX:o=1/0}=n,{x1:l,x2:c,y1:h,y2:d}=this._operatingMask.globalAABBBounds,u=a-l,p=o-c,g=r-h,f=s-d;this._operatingMaskMoveRangeX=[u,p],this._operatingMaskMoveRangeY=[g,f],this._operatingMask.setAttribute("pickable",!0),this._dispatchEvent(MQ.moveStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e})}_drawing(e){var t,i;const n=this.eventPosToStagePos(e),{x1:r=0,x2:s=0,y1:a=0,y2:o=0}=null===(t=this._operatingMask)||void 0===t?void 0:t._AABBBounds,{sizeThreshold:l=RQ,brushType:c}=this.attribute,h=this._cacheDrawPoints.length;if(this._isDrawedBeforeEnd=!!(Math.abs(s-r)>l||Math.abs(a-o)>l),h>0){const e=null!==(i=this._cacheDrawPoints[this._cacheDrawPoints.length-1])&&void 0!==i?i:{};if(n.x===e.x&&n.y===e.y)return}"polygon"===c||h<=1?this._cacheDrawPoints.push(n):this._cacheDrawPoints[h-1]=n;const d=this._computeMaskPoints();this._operatingMask.setAttribute("points",d),this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(MQ.drawing,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e})}_moving(e){const t=this._cacheMovePoint,i=this.eventPosToStagePos(e);if(i.x===(null==t?void 0:t.x)&&i.y===(null==t?void 0:t.y))return;const n=i.x-t.x,r=i.y-t.y,s=Math.min(this._operatingMaskMoveRangeX[1],Math.max(this._operatingMaskMoveRangeX[0],n))+this._operatingMaskMoveDx,a=Math.min(this._operatingMaskMoveRangeY[1],Math.max(this._operatingMaskMoveRangeY[0],r))+this._operatingMaskMoveDy;this._operatingMask.setAttributes({dx:s,dy:a}),this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(MQ.moving,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e})}_computeMaskPoints(){const{brushType:e,xRange:t=[0,0],yRange:i=[0,0]}=this.attribute;let n=[];const r=this._cacheDrawPoints[0],s=this._cacheDrawPoints[this._cacheDrawPoints.length-1];return n="rect"===e?[r,{x:s.x,y:r.y},s,{x:r.x,y:s.y}]:"x"===e?[{x:r.x,y:i[0]},{x:s.x,y:i[0]},{x:s.x,y:i[1]},{x:r.x,y:i[1]}]:"y"===e?[{x:t[0],y:r.y},{x:t[0],y:s.y},{x:t[1],y:s.y},{x:t[1],y:r.y}]:S(this._cacheDrawPoints),n}_addBrushMask(){var e;const{brushStyle:t,hasMask:i}=this.attribute,n=bp.polygon(Object.assign(Object.assign({points:S(this._cacheDrawPoints),cursor:"move",pickable:!1},t),{opacity:i?null!==(e=t.opacity)&&void 0!==e?e:1:0}));n.name="brush-".concat(Date.now()),this._operatingMask=n,this._container.add(n),this._brushMaskAABBBoundsDict[n.name]=n.AABBBounds}_outOfInteractiveRange(e){const{interactiveRange:t}=this.attribute,{minY:i=-1/0,maxY:n=1/0,minX:r=-1/0,maxX:s=1/0}=t,a=this.eventPosToStagePos(e);return a.x>s||a.x<r||a.y>n||a.y<i}eventPosToStagePos(e){var t,i;const{x:n,y:r}=Bf.mapToCanvasPoint(e);return{x:n-((null===(t=this.stage)||void 0===t?void 0:t.x)||0),y:r-((null===(i=this.stage)||void 0===i?void 0:i.y)||0)}}render(){this._bindBrushEvents();const e=this.createOrUpdateChild("brush-container",{},"group");this._container=e}releaseBrushEvents(){const{delayType:e="throttle",delayTime:t=0,trigger:i=IQ.trigger,updateTrigger:n=IQ.updateTrigger,endTrigger:r=IQ.endTrigger,resetTrigger:s=IQ.resetTrigger}=this.attribute;this.stage.removeEventListener(i,this._onBrushStart),this.stage.removeEventListener(n,DQ[e](this._onBrushing,t)),this.stage.removeEventListener(r,this._onBrushEnd),this.stage.removeEventListener(s,this._onBrushEnd)}}LQ.defaultAttributes=IQ;class jQ extends dF{constructor(){super(...arguments),this.layoutType="none",this.type=r.brush,this.name=r.brush,this.specKey="brush",this.layoutZIndex=zw.Brush,this._linkedSeries=[],this._itemMap={},this._linkedItemMap={},this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._needInitOutState=!0,this._cacheInteractiveRangeAttrs=[],this._needDisablePickable=!1}init(){const e=this._transformBrushedMarkAttr(this._spec.inBrush),t=this._transformBrushedMarkAttr(this._spec.outOfBrush);this._option.getAllSeries().forEach((i=>{i.getActiveMarks().forEach((n=>{n&&(i.setMarkStyle(n,Object.assign({},e),"inBrush",Tw.Series),i.setMarkStyle(n,Object.assign({},t),"outOfBrush",Tw.Series))}))}))}static getSpecInfo(e){const t=e[this.specKey];if(!P(t)&&!1!==t.visible)return[{spec:t,specPath:[this.specKey],type:r.brush}]}created(){super.created(),this.initEvent(),this._bindRegions(),this._bindLinkedSeries(),this._initNeedOperatedItem()}_extendDataInBrush(e){const t=[];for(const i in e)for(const n in e[i])t.push(e[i][n].data[0]);return t}_extendDatumOutOfBrush(e){const t=[];for(const i in e)t.push(e[i].data[0]);return t}_getBrushInteractiveAttr(e){const t=e.getLayoutStartPoint(),i=e.getLayoutRect(),n=t.x,r=n+i.width,s=t.y,a=s+i.height;return{interactiveRange:{minY:s,maxY:a,minX:n,maxX:r},xRange:[n,r],yRange:[s,a]}}_updateBrushComponent(e,t){const i=this._getBrushInteractiveAttr(e),n=this._brushComponents[t];n.setAttributes(i),this._initMarkBrushState(t,""),n.children[0].removeAllChild(),this._needInitOutState=!0}_createBrushComponent(e,t){var i,n;const r=this._getBrushInteractiveAttr(e),s=new LQ(Object.assign(Object.assign(Object.assign({zIndex:this.layoutZIndex,brushStyle:Yj(null===(i=this._spec)||void 0===i?void 0:i.style)},r),this._spec),{disableTriggerEvent:this._option.disableTriggerEvent}));s.id=null!==(n=this._spec.id)&&void 0!==n?n:"brush-".concat(this.id),this.getContainer().add(s);const{brushMode:a="single"}=this._spec;this._brushComponents.push(s),this._cacheInteractiveRangeAttrs.push(r),s.addEventListener(MQ.drawStart,(t=>{this._emitEvent(Ir.brushStart,e)})),s.addEventListener(MQ.moveStart,(t=>{this._emitEvent(Ir.brushStart,e)})),s.addEventListener(MQ.drawing,(i=>{this._needInitOutState&&"single"===a&&this._initMarkBrushState(t,"outOfBrush"),this._needInitOutState=!1,this._needDisablePickable=!0,this._handleBrushChange(Ir.brushChange,e,i)})),s.addEventListener(MQ.moving,(t=>{this._handleBrushChange(Ir.brushChange,e,t)})),s.addEventListener(MQ.brushClear,(i=>{this._initMarkBrushState(t,""),this._needInitOutState=!0,this._needDisablePickable=!1,this._handleBrushChange(Ir.brushChange,e,i),this._handleBrushChange(Ir.brushClear,e,i)})),s.addEventListener(MQ.drawEnd,(t=>{this._needInitOutState=!0,this._needDisablePickable=!1,this._handleBrushChange(Ir.brushEnd,e,t)})),s.addEventListener(MQ.moveEnd,(t=>{this._handleBrushChange(Ir.brushEnd,e,t)}))}_handleBrushChange(e,t,i){const{operateMask:n}=i.detail;this._reconfigItem(n,t),this._reconfigLinkedItem(n,t),this._emitEvent(e,t)}_emitEvent(e,t){this.event.emit(e,{model:this,value:{operateType:e,operateRegion:t,inBrushData:this._extendDataInBrush(this._inBrushElementsMap),outOfBrushData:this._extendDatumOutOfBrush(this._outOfBrushElementsMap),linkInBrushData:this._extendDataInBrush(this._linkedInBrushElementsMap),linkOutOfBrushData:this._extendDatumOutOfBrush(this._linkedOutOfBrushElementsMap),inBrushElementsMap:this._inBrushElementsMap,outOfBrushElementsMap:this._outOfBrushElementsMap,linkedInBrushElementsMap:this._linkedInBrushElementsMap,linkedOutOfBrushElementsMap:this._linkedOutOfBrushElementsMap}})}_transformBrushedMarkAttr(e){const t={};return(null==e?void 0:e.symbol)&&(t.symbolType=e.symbol),(null==e?void 0:e.symbolSize)&&(t.size=e.symbolSize),(null==e?void 0:e.color)&&(t.fill=e.color),(null==e?void 0:e.colorAlpha)&&(t.fillOpacity=e.colorAlpha),Object.assign(Object.assign({},Yj(e)),t)}_reconfigItem(e,t){this._itemMap[t.id].forEach((t=>{const i=t.getProduct();i&&i.elements&&i.elements.length&&i.elements.forEach((i=>{var n,r,s;const a=i.getGraphicItem(),o=t.id+"_"+i.key;(null===(n=this._outOfBrushElementsMap)||void 0===n?void 0:n[o])&&this._isBrushContainItem(e,a)?(i.addState("inBrush"),this._inBrushElementsMap[null==e?void 0:e.name]||(this._inBrushElementsMap[null==e?void 0:e.name]={}),this._inBrushElementsMap[null==e?void 0:e.name][o]=i,delete this._outOfBrushElementsMap[o]):(null===(s=null===(r=this._inBrushElementsMap)||void 0===r?void 0:r[null==e?void 0:e.name])||void 0===s?void 0:s[o])&&!this._isBrushContainItem(e,a)&&(i.removeState("inBrush"),i.addState("outOfBrush"),this._outOfBrushElementsMap[o]=i,delete this._inBrushElementsMap[e.name][o]),a.setAttribute("pickable",!this._needDisablePickable)}))}))}_reconfigLinkedItem(e,t){const i=t.getLayoutStartPoint(),n=t.getSeries().map((e=>e.id));this._linkedSeries.forEach((t=>{if(!n.includes(t.id)){const n=t.getRegion().getLayoutStartPoint(),r=n.x-i.x,s=n.y-i.y;this._linkedItemMap[t.id].forEach((t=>{const i=t.getProduct();i&&i.elements&&i.elements.length&&i.elements.forEach((i=>{var n,a,o;const l=i.getGraphicItem(),c=t.id+"_"+i.key;(null===(n=this._linkedOutOfBrushElementsMap)||void 0===n?void 0:n[c])&&this._isBrushContainItem(e,l,{dx:r,dy:s})?(i.addState("inBrush"),this._linkedInBrushElementsMap[null==e?void 0:e.name]||(this._linkedInBrushElementsMap[null==e?void 0:e.name]={}),this._linkedInBrushElementsMap[null==e?void 0:e.name][c]=i,delete this._linkedOutOfBrushElementsMap[c]):(null===(o=null===(a=this._linkedInBrushElementsMap)||void 0===a?void 0:a[null==e?void 0:e.name])||void 0===o?void 0:o[c])&&!this._isBrushContainItem(e,l,{dx:r,dy:s})&&(i.removeState("inBrush"),i.addState("outOfBrush"),this._linkedOutOfBrushElementsMap[c]=i),l.setAttribute("pickable",!this._needDisablePickable)}))}))}}))}_isBrushContainItem(e,t,i){var n,r,s;if(!(null==e?void 0:e.globalTransMatrix)||!(null===(n=null==e?void 0:e.attribute)||void 0===n?void 0:n.points))return!1;const a=null!==(s=null===(r=null==e?void 0:e.attribute)||void 0===r?void 0:r.points)&&void 0!==s?s:[],{a:o,b:l,c:c,d:h,e:d,f:u}=e.globalTransMatrix,p=(null==i?void 0:i.dx)||0,g=(null==i?void 0:i.dy)||0,f=a.map((e=>({x:o*e.x+c*e.y+d+p,y:l*e.x+h*e.y+u+g})));e.globalAABBBounds.clone().set(e.globalAABBBounds.x1+p,e.globalAABBBounds.y1+g,e.globalAABBBounds.x2+p,e.globalAABBBounds.y2+g);const m=t.globalTransMatrix.e,v=t.globalTransMatrix.f;let y=[];if("symbol"===t.type){const{size:e=0}=null==t?void 0:t.attribute,i=z(e)[0]/2;return y=[{x:m-i,y:v-i},{x:m+i,y:v-i},{x:m+i,y:v+i},{x:m-i,y:v+i}],rX(f,y)}if("rect"===t.type){const{x1:e,x2:i,y1:n,y2:r}=null==t?void 0:t.AABBBounds,s=Math.abs(e-i),a=Math.abs(n-r);return y=[{x:m,y:v},{x:m+s,y:v},{x:m+s,y:v+a},{x:m,y:v+a}],rX(f,y)}return e.globalAABBBounds.intersects(t.globalAABBBounds)}_bindRegions(){x(this._spec.regionId)&&x(this._spec.regionIndex)&&(this._relativeRegions=this._option.getAllRegions()),this._relativeRegions=this._option.getRegionsInUserIdOrIndex(z(this._spec.regionId),z(this._spec.regionIndex))}_bindLinkedSeries(){x(this._spec.brushLinkSeriesId)&&x(this._spec.brushLinkSeriesIndex)||(this._linkedSeries=this._option.getSeriesInUserIdOrIndex(z(this._spec.brushLinkSeriesId),z(this._spec.brushLinkSeriesIndex)))}_initNeedOperatedItem(){const e=this._spec.seriesId,t=this._spec.seriesIndex;this._relativeRegions.forEach((i=>{const n=[];i.getSeries().forEach((r=>{(e&&z(e).includes(r.userId.toString())||t&&z(t).includes(r.getSpecIndex())||!t&&!e)&&n.push(...r.getMarksWithoutRoot()),this._itemMap[i.id]=n}))})),this._linkedSeries.forEach((e=>{this._linkedItemMap[e.id]=e.getMarksWithoutRoot()}))}_initMarkBrushState(e,t){this._brushComponents.forEach(((t,i)=>{i!==e&&t.children[0].removeAllChild()})),this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._option.getAllSeries().forEach((e=>{e.getMarksWithoutRoot().forEach((e=>{const i=e.getProduct();i&&i.elements&&i.elements.length&&i.elements.forEach((i=>{const n=e.id+"_"+i.key;i.removeState("inBrush"),i.removeState("outOfBrush"),i.addState(t),this._outOfBrushElementsMap[n]=i,this._linkedOutOfBrushElementsMap[n]=i}))}))}))}initEvent(){}onRender(e){}changeRegions(e){}_getNeedClearVRenderComponents(){return this._brushComponents}_compareSpec(e,t){this._brushComponents&&this._relativeRegions.forEach(((e,t)=>{this._updateBrushComponent(e,t)}));const i=super._compareSpec(e,t);return ty(t,e)||(i.reRender=!0,i.reMake=!0),i}onLayoutEnd(e){var t;super.onLayoutEnd(e),this._option.disableTriggerEvent||(null===(t=this._spec.visible)||void 0===t||t)&&(this._brushComponents?this._relativeRegions.forEach(((e,t)=>{this._updateBrushComponent(e,t)})):(this._brushComponents=[],this._relativeRegions.forEach(((e,t)=>{this._createBrushComponent(e,t)}))))}clearGraphic(){this._brushComponents&&this._brushComponents.forEach((e=>{e._container.incrementalClearChild()}))}clear(){var e;this._brushComponents&&(null===(e=this.getContainer())||void 0===e||e.removeChild(this._brushComponents),this._brushComponents.forEach((e=>{e.removeAllChild(),e.releaseBrushEvents()})),this._brushComponents=null),super.clear()}}jQ.type=r.brush,jQ.specKey="brush";class FQ extends kk{constructor(){super(...arguments),this.type=FQ.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}FQ.type="image";const BQ=()=>{_n.registerMark(FQ.type,FQ),Ok(),SE(),nm.registerGraphic(Vr.image,rE)};class NQ extends dF{constructor(){super(...arguments),this.type=r.customMark,this.specKey="customMark",this.layoutType="none",this.layoutZIndex=zw.CustomMark,this.layoutLevel=Hw.CustomMark}static getSpecInfo(e){const t=e[this.specKey];return t?[{spec:t,specIndex:0,specPath:[this.specKey],type:r.customMark}]:null}created(){super.created(),this.initMarks(),this.initEvent()}initMarks(){this._spec&&this._spec.forEach(((e,t)=>{this._createExtensionMark(e,null,"".concat(Ge,"_series_").concat(this.id,"_extensionMark"),t)}))}_createExtensionMark(e,t,i,n){var r;const s=this._createMark({type:e.type,name:"".concat(Ge,"_").concat(n)},{skipBeforeLayouted:!0,attributeContext:this._getMarkAttributeContext()});if(s&&(P(t)?this._marks.addMark(s):t&&t.addMark(s),this.initMarkStyleWithSpec(s,e),"group"===e.type&&(i="".concat(i,"_").concat(n),null===(r=e.children)||void 0===r||r.forEach(((e,t)=>{this._createExtensionMark(e,s,i,t)}))),x(e.dataId)||L(e.dataIndex))){const t=this.getChart().getSeriesData(e.dataId,e.dataIndex);t&&(t.target.addListener("change",(()=>{s.getData().updateData()})),s.setDataView(t))}}initEvent(){}_compareSpec(e,t){const i=super._compareSpec(e,t);return ty(t,e)||(i.reMake=!0),i.change=!0,i.reRender=!0,i}changeRegions(e){}_getNeedClearVRenderComponents(){return[]}onRender(e){}_getMarkAttributeContext(){return{vchart:this._option.globalInstance,globalScale:(e,t)=>{var i;return null===(i=this._option.globalScale.getScale(e))||void 0===i?void 0:i.scale(t)}}}}NQ.type=r.customMark,NQ.specKey="customMark";let zQ,HQ,VQ,UQ;function WQ(e){return zQ=1/0,HQ=1/0,VQ=-1/0,UQ=-1/0,e.forEach((e=>{zQ>e.x&&(zQ=e.x),VQ<e.x&&(VQ=e.x),HQ>e.y&&(HQ=e.y),UQ<e.y&&(UQ=e.y)})),{x1:zQ,y1:HQ,x2:VQ,y2:UQ}}function GQ(e,t){if(!e)return!1;if(!t)return!1;const i="Feature"===(s=t).type?s.geometry:s,n=i.type,r=t.bbox;var s;let a=i.coordinates;if(r&&!0===sg(e,{x1:r[0],x2:r[1],y1:r[1],y2:r[3]},!0))return!1;"Polygon"===n&&(a=[a]);let o=!1;for(let l=0;l<a.length;++l)for(let t=0;t<a[l].length;++t)if(tX(a[l][t].map((e=>({x:e[0],y:e[1]}))),e.x,e.y))return o=!0,o;return o}function KQ(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=el(e[0]),s=el(e[1]),a=el(i),o=Ka(t,n.units),l=Math.asin(Math.sin(s)*Math.cos(o)+Math.cos(s)*Math.sin(o)*Math.cos(a));return{x:tl(r+Math.atan2(Math.sin(a)*Math.sin(o)*Math.cos(s),Math.cos(o)-Math.sin(s)*Math.sin(l))),y:tl(l)}}function YQ(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2)}function XQ(e){return{x1:e.x,x2:e.x+e.width,y1:e.y,y2:e.y+e.height}}function qQ(e){var t;if(!e||0===e.length)return[];if(1===e.length)return[e[0].rect];const i=e.map((e=>{var t;return Object.assign(Object.assign({},e),{bound:XQ(e.rect),anchorCandidates:t$(null!==(t=e.anchors)&&void 0!==t?t:[],e.point,e.rect,e.offset)})})),n=[];n.push(i[0].bound);for(let r=1;r<=i.length-1;r++){const e=i[r],s=e.bound;let a=n.some((e=>YQ(e,s)));if(e.anchorCandidates)if(a&&(null===(t=e.anchorCandidates)||void 0===t?void 0:t.length)>0){for(let t=0;t<e.anchorCandidates.length;t++){const i=e.anchorCandidates[t],r={x1:i.x,y1:i.y,x2:i.x+s.x2-s.x1,y2:i.y+s.y2-s.y1,anchor:i};if(!n.some((e=>YQ(e,r)))){n.push(r),a=!1;break}}a&&n.push(e.bound)}else n.push(e.bound)}return n.map((e=>function(e){return{x:e.x1,y:e.y1,width:e.x2-e.x1,height:e.y2-e.y1}}(e)))}function ZQ(e){return e>180?e-360:e}function QQ(e,t){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI+90}function $Q(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;const r=5621/n;let s=t;for(let a=1;a<=r;a++){const t=KQ(s,n,i);if(!JQ(e,t))return[t.x,t.y];s=[t.x,t.y]}return t}function JQ(e,t){for(let i=0;i<e.length;i++)if(GQ(t,e[i]))return!0;return!1}function e$(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Object.assign({},e);return"top"===t?(n.x-=e.width/2,n.y-=i+e.height/2):"bottom"===t?(n.x-=e.width/2,n.y+=i-e.height/2):"left"===t?(n.x-=i+e.width,n.y-=e.height/2):"right"===t&&(n.x+=i,n.y-=e.height/2),n}function t$(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=[];return e.forEach((e=>{const{x:s,y:a}=e$(Object.assign(Object.assign({},t),{width:i.width,height:i.height}),e,n);r.push({x:s,y:a})})),r}class i$ extends dF{constructor(){super(...arguments),this.type=r.mapLabel,this.name=r.mapLabel,this.specKey="mapLabel",this.layoutType="none",this.layoutZIndex=zw.MarkPoint,this._activeDatum=[]}static getSpecInfo(e){const t=e[this.specKey];return t&&t.visible&&!x(t.series)?[{spec:t,specPath:[this.specKey],type:r.mapLabel}]:null}setAttrFromSpec(){var e,t,i,n;this.nameField=null!==(e=this._spec.nameField)&&void 0!==e?e:null===(t=this._series)||void 0===t?void 0:t.getDimensionField()[0],this.valueField=null!==(i=this._spec.valueField)&&void 0!==i?i:null===(n=this._series)||void 0===n?void 0:n.getMeasureField()[0]}created(){super.created(),0!=!!this._spec.visible&&(this.initRelatedInfo(),this.initData(),this.initEvent())}initRelatedInfo(){var e,t,i,n,r,s,a,o;this._series=this._option.getSeriesInUserIdOrIndex([this._spec.seriesId])[0],"outer"===this._spec.position&&(this._map=null===(t=null===(e=this._regions[0].getSeriesInType("map")[0])||void 0===e?void 0:e.getMapViewData())||void 0===t?void 0:t.latestData,this._longitudeField=null===(r=null===(n=(i=this._regions[0]).getSpec)||void 0===n?void 0:n.call(i))||void 0===r?void 0:r.longitudeField,this._latitudeField=null===(o=null===(a=(s=this._regions[0]).getSpec)||void 0===a?void 0:a.call(s))||void 0===o?void 0:o.latitudeField)}initData(){const e=this._series;if(!e)return;const t=e.getViewData();if(t){const e=new R(this._option.dataSet,{name:"".concat(this.name,"_data")});e.parse([t],{type:"dataview"}),e.transform({type:"copyDataView",level:wo.copyDataView},!1),this._data=new _k(this._option,e),e.target.addListener("change",(()=>{"hover"!==this._spec.trigger&&"click"!==this._spec.trigger&&(this._activeDatum=this._data.getLatestData())}))}}initEvent(){this.event.on("zoom",{filter:e=>this._isRelativeModel(e.model)},(e=>(this.handleZoom(e),!0))),this.event.on("panmove",{filter:e=>this._isRelativeModel(e.model)},(e=>(this.handlePan(e),!0)));const e=this._spec.trigger;"none"!==e&&("hover"===e?(this.event.on("hovered",{filter:e=>this._isRelativeSeries(e.model)},(e=>{this._updateDatum(e.value)})),this.event.on("unhovered",(()=>{this._updateDatum([])}))):"click"===e&&(this.event.on("selected",{filter:e=>this._isRelativeSeries(e.model)},(e=>{this._updateDatum(e.value)})),this.event.on("unselected",(()=>{this._updateDatum([])}))))}handlePan(e){const{delta:t}=e;this._markerComponents.forEach((e=>{e.translate(t[0],t[1])}))}handleZoom(e){this._updateMarkerLayoutAttribute()}_updateDatum(e){this._activeDatum=e,this._markerComponents.forEach(((e,t)=>{var i;const n=null===(i=this._data)||void 0===i?void 0:i.getLatestData()[t];this._activeDatum.includes(n)?e.setAttribute("visible",!0):e.setAttribute("visible",!1)}))}dataToPosition(e){return this._series.dataToPosition(e)}updateLayoutAttribute(){var e;const t=null===(e=this._data)||void 0===e?void 0:e.getLatestData();t&&0!==t.length&&(super.updateLayoutAttribute(),this._updateMarkerLayoutAttribute())}_updateMarkerLayoutAttribute(){var e;const t=[],i=[];this._markerComponents||(this._markerComponents=null===(e=this._data)||void 0===e?void 0:e.getLatestData().map(((e,t)=>{var i;const n=new TQ({position:void 0});return n&&(n.name="".concat(this.name,"_marker_").concat(t),n.id=null!==(i=this._spec.id)&&void 0!==i?i:"".concat(this.name,"_marker_").concat(this.id),n.setAttribute("zIndex",this.layoutZIndex)),n}))),this._markerComponents.forEach(((e,n)=>{e.removeAllChild();const{pairInfo:r,contentMarks:s}=this._evaluateMarker(this._data.getLatestData()[n],n);r&&t.push(r),s&&i.push(s)}));const n=this._layoutLabels(t);this._layoutMarkers(n,i),this._renderMarkers()}_evaluateMarker(e,t){var i,n,r,s,a,o,l,c,h,d,u,p;let g=0,f=0,m=0,v=0,y=0;const b=this._spec.position||"top",_=this._spec.offset,S=ie(null===(i=this._spec.background)||void 0===i?void 0:i.padding),w=this._spec.space||0;f+=((null==S?void 0:S.left)||0)+((null==S?void 0:S.right)||0),m+=((null==S?void 0:S.top)||0)+((null==S?void 0:S.bottom)||0);const C={},k=this.dataToPosition(e),A=uu({});if(A.name="".concat(this.name,"_marker_itemContainer_").concat(t),C.container=A,null===(n=this._spec.background)||void 0===n?void 0:n.visible){const e=jS(Yj(Object.assign({},this._spec.background.style)));e.setAttributes(k),C.labelBackground=e,A.appendChild(e)}if(null===(r=this._spec.icon)||void 0===r?void 0:r.visible){const e=Ix(Yj(Object.assign({},this._spec.icon.style)));e.setAttributes(k),e.setAttribute("symbolType",null===(s=this._spec.icon.style)||void 0===s?void 0:s.shape);const t=e.AABBBounds,i=null!==(a=(null==t?void 0:t.y2)-(null==t?void 0:t.y1))&&void 0!==a?a:0,n=null!==(o=(null==t?void 0:t.x2)-(null==t?void 0:t.x1))&&void 0!==o?o:0;C.icon=e,A.appendChild(e),y=i,v+=n,g++}if(null===(l=this._spec.nameLabel)||void 0===l?void 0:l.visible){const t=u_(Yj(Object.assign({},this._spec.nameLabel.style)));t.setAttributes(k),t.setAttribute("text",e[this.nameField]);const i=t.AABBBounds,n=null!==(c=(null==i?void 0:i.y2)-(null==i?void 0:i.y1))&&void 0!==c?c:0,r=null!==(h=(null==i?void 0:i.x2)-(null==i?void 0:i.x1))&&void 0!==h?h:0;C.nameLabel=t,A.appendChild(t),y=Math.max(y,n),v+=r,g++}if((null===(d=this._spec.valueLabel)||void 0===d?void 0:d.visible)&&x(e[this.valueField])){const t=u_(Yj(Object.assign({},this._spec.valueLabel.style)));t.setAttributes(k),t.setAttribute("text",e[this.valueField]);const i=t.AABBBounds,n=null!==(u=(null==i?void 0:i.y2)-(null==i?void 0:i.y1))&&void 0!==u?u:0,r=null!==(p=(null==i?void 0:i.x2)-(null==i?void 0:i.x1))&&void 0!==p?p:0;C.valueLabel=t,A.appendChild(t),y=Math.max(y,n),v+=r,g++}const E=Object.values(C).find((e=>!!e&&"group"!==e.type)),T={x:null==E?void 0:E.getComputedAttribute("x"),y:null==E?void 0:E.getComputedAttribute("y")},O={x:T.x,y:T.y,width:0,height:0};O.width=f+v+(g-1)*w,O.height=m+y;const P={rect:O,point:T,index:t};if("outer"!==b){const e=["top","right","left","bottom"].filter((e=>e!==b));P.rect=e$(O,b,_),P.anchors=e,P.offset=_}else P.pointCoord={x:+(null==e?void 0:e[this._longitudeField]),y:+(null==e?void 0:e[this._latitudeField])};return{pairInfo:P,contentMarks:C}}_layoutMarkers(e,t){var i,n,r;for(let s=0;s<t.length;s++){if(!e[s]||!t[s])return;const{icon:a,nameLabel:o,valueLabel:l,labelBackground:c,container:h}=t[s],d=e[s],u=ie(null===(i=this._spec.background)||void 0===i?void 0:i.padding),p=this._spec.space||0,g=d.height/2;let f=(null==u?void 0:u.left)||0;[a,o,l].forEach(((e,t)=>{var i,n;if(e){const r=e.AABBBounds;let s=0;"symbol"===e.type&&(s+=(null!==(i=r.x2-r.x1)&&void 0!==i?i:0)/2),e.setAttributes({x:f+s,y:g}),f+=null!==(n=r.x2-r.x1)&&void 0!==n?n:0,2!==t&&(f+=p)}})),null==c||c.setAttributes({x:0,y:0,width:d.width,height:d.height}),null==h||h.setAttributes({dx:-d.width/2,dy:-d.height/2});const m=this._data.getLatestData()[s],v=this.dataToPosition(m),y=this.getRegions()[0].getLayoutStartPoint(),b=!(!(null===(n=this._spec.leader)||void 0===n?void 0:n.visible)||!(a||o||l));this._markerComponents[s].setAttributes({x:y.x,y:y.y,position:v,visible:this._activeDatum.includes(m),itemContent:{refX:0,type:"custom",renderCustomCallback:()=>h,autoRotate:!1,offsetX:d.x+d.width/2-v.x,offsetY:d.y+d.height/2-v.y},itemLine:{visible:b,type:"type-po",lineStyle:Yj(Object.assign({},null===(r=this._spec.leader)||void 0===r?void 0:r.style)),startSymbol:{visible:!1}}})}}_renderMarkers(){if(this._markerComponents&&this._markerComponents.length)for(let e=0;e<this._markerComponents.length;e++)this.getContainer().add(this._markerComponents[e])}_layoutLabels(e){return"outer"===this._spec.position&&this._map?function(e,t,i){const n=e.map((e=>e.pointCoord)),{x1:r,x2:s,y1:a,y2:o}=WQ(n),l=i([(r+s)/2,(a+o)/2]);return l?qQ(e.map((e=>{const n=e.rect,r=JQ(t,e.pointCoord)?i($Q(t,[e.pointCoord.x,e.pointCoord.y],ZQ(QQ(e.point,l)))):e.point;r&&(n.x=r.x,n.y=r.y);const s=ZQ(QQ(e.point,l));let a;const o=[];return s>=-45&&s<45?(a="top",o.push("left","right")):s>=45&&s<135?a="right":s>=-135&&s<-45?(a="left",o.push("left")):(a="bottom",o.push("left","right")),e.anchors=o,e.offset=20,e.rect=e$(e.rect,a,0),e}))):[]}(e,this._map,(e=>this._series.dataToPosition({[this._longitudeField]:e[0],[this._latitudeField]:e[1]}))):qQ(e)}_isRelativeModel(e){var t,i,n;const r=null!==(i=null===(t=this._series.getXAxisHelper())||void 0===t?void 0:t.getAxisId())&&void 0!==i?i:null===(n=this._series.getCoordinateHelper())||void 0===n?void 0:n.getCoordinateId();return(null==e?void 0:e.id)===r}_isRelativeSeries(e){return(null==e?void 0:e.id)===this._series.id}onRender(e){}changeRegions(){}_getNeedClearVRenderComponents(){return this._markerComponents}}i$.type=r.mapLabel,i$.specKey="mapLabel";class n${constructor(e,t){this._chartLayoutRect={x:0,y:0,width:1,height:1},this._col=1,this._row=1,this._elementMap=new Map,this.standardizationSpec(e),this._gridInfo=e,this._col=e.col,this._row=e.row,this._colSize=new Array(this._col).fill(null),this._rowSize=new Array(this._row).fill(null),this._colElements=new Array(this._col).fill([]),this._rowElements=new Array(this._row).fill([]),this._onError=null==t?void 0:t.onError,this.initUserSetting()}standardizationSpec(e){var t,i,n;e.col=null!==(t=e.col)&&void 0!==t?t:1,e.row=null!==(i=e.row)&&void 0!==i?i:1,e.elements=null!==(n=e.elements)&&void 0!==n?n:[]}initUserSetting(){this._gridInfo.colWidth&&this.setSizeFromUserSetting(this._gridInfo.colWidth,this._colSize,this._col,this._chartLayoutRect.width),this._gridInfo.rowHeight&&this.setSizeFromUserSetting(this._gridInfo.rowHeight,this._rowSize,this._row,this._chartLayoutRect.height),this._colSize.forEach(((e,t)=>{e||(this._colSize[t]={value:0,isUserSetting:!1,isLayoutSetting:!1})})),this._rowSize.forEach(((e,t)=>{e||(this._rowSize[t]={value:0,isUserSetting:!1,isLayoutSetting:!1})}))}setSizeFromUserSetting(e,t,i,n){e.forEach((e=>{e.index<0&&e.index>=i||(L(e.size)?t[e.index]={value:+e.size,isUserSetting:!0,isLayoutSetting:!1}:Q(e.size)&&(t[e.index]={value:e.size(n),isUserSetting:!0,isLayoutSetting:!1}))}))}clearLayoutSize(){this._colSize.forEach((e=>{e.isLayoutSetting=!1,e.isUserSetting||(e.value=0)})),this._rowSize.forEach((e=>{e.isLayoutSetting=!1,e.isUserSetting||(e.value=0)}))}getItemGridInfo(e){var t;const i=this._elementMap.get(e);if(i)return i;let n;return n=null===(t=this._gridInfo.elements)||void 0===t?void 0:t.find((t=>{var i;if("modelId"in t&&x(t.modelId)){if(x(e.model.userId)&&e.model.userId===t.modelId)return!0}else if("modelKey"in t&&x(t.modelKey)&&"modelIndex"in t&&x(t.modelIndex)&&(null!==(i=e.model.specKey)&&void 0!==i?i:e.model.type)===t.modelKey&&e.model.getSpecIndex()===t.modelIndex)return!0;return!1})),n||(n={col:0,colSpan:1,row:0,rowSpan:1}),this._elementMap.set(e,n),n}getSizeFromGird(e,t){var i;const n="col"===t?this._colSize:this._rowSize;let r=0;for(let s=e[t];s<e[t]+(null!==(i=e["".concat(t,"Span")])&&void 0!==i?i:1);s++)r+=n[s].value;return r}getSizeFromUser(e,t){var i,n;const r="col"===t?this._colSize:this._rowSize;if(!(null===(i=r[e[t]])||void 0===i?void 0:i.isUserSetting))return;let s=0;for(let a=e[t];a<e[t]+(null!==(n=e["".concat(t,"Span")])&&void 0!==n?n:1);a++){if(!r[a].isUserSetting)return;s+=r[a].value}return s}setItemLayoutSizeToGrid(e,t){if(r$(e)){if(t.colSpan&&t.colSpan>1)return;if(this._colSize[t.col].isUserSetting)return;this._colSize[t.col].value=Math.max(this._colSize[t.col].value,e.getLayoutRect().width+e.layoutPaddingLeft+e.layoutPaddingRight),this._colSize[t.col].isLayoutSetting=!0}else{if(t.rowSpan&&t.rowSpan>1)return;if(this._rowSize[t.row].isUserSetting)return;this._rowSize[t.row].value=Math.max(this._rowSize[t.row].value,e.getLayoutRect().height+e.layoutPaddingTop+e.layoutPaddingBottom),this._rowSize[t.row].isLayoutSetting=!0}}layoutGrid(e){const t="col"===e?this._colSize:this._rowSize;let i="col"===e?this._chartLayoutRect.width:this._chartLayoutRect.height;const n=[];t.forEach((e=>{e.isUserSetting||e.isLayoutSetting?i-=e.value:n.push(e)})),i<0&&console.warn("layout content ".concat(e," size bigger than chart")),n.forEach((e=>e.value=i/n.length))}getItemPosition(e){const t=this.getItemGridInfo(e),i={x:this._chartLayoutRect.x,y:this._chartLayoutRect.y};for(let n=0;n<t.col;n++)i.x+=this._colSize[n].value;for(let n=0;n<t.row;n++)i.y+=this._rowSize[n].value;return i.x+=e.layoutPaddingLeft+e.layoutOffsetX,i.y+=e.layoutPaddingTop+e.layoutOffsetY,i}getItemLayoutRect(e){var t,i;const n=this.getItemGridInfo(e);return{width:(null!==(t=this.getSizeFromGird(n,"col"))&&void 0!==t?t:this._chartLayoutRect.width)-e.layoutPaddingLeft-e.layoutPaddingRight,height:(null!==(i=this.getSizeFromGird(n,"row"))&&void 0!==i?i:this._chartLayoutRect.height)-e.layoutPaddingTop-e.layoutPaddingBottom}}layoutItems(e,t,i,n){this._chartLayoutRect=i,this._chartViewBox=n,this.clearLayoutSize(),t.sort(((e,t)=>t.layoutLevel-e.layoutLevel));const r=t.filter((e=>"normal"===e.layoutType&&!1!==e.getModelVisible())),s=r.filter((e=>r$(e))),a=r.filter((e=>!r$(e)));r.forEach((e=>{this.layoutOneItem(e,"user",!1)}));const o=t.filter((e=>"region-relative"===e.layoutType)),l=o.filter((e=>r$(e))),c=o.filter((e=>!r$(e)));l.forEach((e=>this.layoutOneItem(e,"user",!1))),this.layoutGrid("col"),a.forEach((e=>this.layoutOneItem(e,"colGrid",!1))),c.forEach((e=>{this.layoutOneItem(e,"colGrid",!1)})),this.layoutGrid("row"),c.forEach((e=>{this.layoutOneItem(e,"grid",!1)})),s.forEach((e=>this.layoutOneItem(e,"grid",!1))),l.forEach((e=>{this.layoutOneItem(e,"grid",!0)})),this.layoutGrid("col"),t.filter((e=>"region"===e.layoutType)).forEach((e=>this.layoutOneItem(e,"grid",!1))),this.layoutAbsoluteItems(t.filter((e=>"absolute"===e.layoutType))),t.filter((e=>"absolute"!==e.layoutType)).forEach((e=>{e.setLayoutStartPosition(this.getItemPosition(e))}))}layoutAbsoluteItems(e){e.forEach((e=>{e.absoluteLayoutInRect(this._chartLayoutRect)}))}layoutOneItem(e,t,i){var n,r;const s="rowGrid"===t||"grid"===t?this.getSizeFromGird.bind(this):this.getSizeFromUser.bind(this),a="colGrid"===t||"grid"===t?this.getSizeFromGird.bind(this):this.getSizeFromUser.bind(this),o=this.getItemGridInfo(e),l={width:(null!==(n=a(o,"col"))&&void 0!==n?n:this._chartLayoutRect.width)-e.layoutPaddingLeft-e.layoutPaddingRight,height:(null!==(r=s(o,"row"))&&void 0!==r?r:this._chartLayoutRect.height)-e.layoutPaddingTop-e.layoutPaddingBottom},c=e.computeBoundsInRect(l);L(c.width)||(c.width=l.width),L(c.height)||(c.height=l.height),e.setLayoutRect("grid"!==t?c:l),this.setItemLayoutSizeToGrid(e,o)}}function r$(e){return"left"===e.layoutOrient||"right"===e.layoutOrient}n$.type="grid";class s$ extends hC{layoutItems(e,t,i,n){this._layoutInit(e,t,i,n),this._layoutNormalItems(t);const r={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},s=t.filter((e=>"absolute"===e.layoutType)),a=s.filter((e=>"z"===e.layoutOrient));let o={width:0,height:0};a.length&&(o=a[0].getLayoutRect()),this.leftCurrent+=o.width/8,this.rightCurrent-=o.width/8,this.topCurrent+=o.height/8,this.bottomCurrent-=o.height/8;const{regionItems:l,relativeItems:c,relativeOverlapItems:h,allRelatives:d,overlapItems:u}=this._groupItems(t);this.layoutRegionItems(l,c,h,u),this._processAutoIndent(l,c,h,u,d,r);const p=s.filter((e=>"z"!==e.layoutOrient));this.layoutAbsoluteItems(p);const g=c.filter((e=>"axes"===e.model.specKey&&vr(e.layoutOrient)))[0],f=c.filter((e=>"axes"===e.model.specKey&&yr(e.layoutOrient)))[0];if(g&&a.length){const e=g.getLayoutStartPoint(),t=g.getLayoutRect(),i={x:"left"===f.layoutOrient?e.x+t.width:e.x,y:e.y,width:this._chartLayoutRect.width,height:this._chartLayoutRect.height};a[0].model.directionStr="left"===f.layoutOrient?"r2l":"l2r";const n=g.getLayoutRect(),r=f.getLayoutRect(),s={length:a[0].getLayoutRect().width,width:n.width,height:r.height};g.model.setLayout3dBox&&g.model.setLayout3dBox(s),f.model.setLayout3dBox&&f.model.setLayout3dBox(s),a[0].model.setLayout3dBox&&a[0].model.setLayout3dBox(s),this.layoutZAxisItems(a,i)}}layoutZAxisItems(e,t){e.forEach((e=>{e.absoluteLayoutInRect(t)}))}getItemComputeLayoutRect(e,t){return t||(t={offsetLeft:0,offsetRight:0,offsetTop:0,offsetBottom:0}),{width:this.rightCurrent-this.leftCurrent-e.layoutPaddingLeft-e.layoutPaddingRight-(t.offsetLeft+t.offsetRight),height:this.bottomCurrent-this.topCurrent-e.layoutPaddingTop-e.layoutPaddingBottom-(t.offsetTop+t.offsetBottom)}}_checkAutoIndent(e){const t={top:0,left:0,bottom:0,right:0},i=this._chartViewBox.x2-this._chartViewBox.x1-this.rightCurrent,n=this._chartViewBox.y2-this._chartViewBox.y1-this.bottomCurrent;return e.forEach((e=>{if(!e.getModelVisible()||!e.autoIndent)return;const r="left"===e.layoutOrient||"right"===e.layoutOrient,s=e.getLastComputeOutBounds();r?(t.top=Math.max(t.top,s.y1-this.topCurrent),t.bottom=Math.max(t.bottom,s.y2-n)):(t.left=Math.max(t.left,s.x1-this.leftCurrent),t.right=Math.max(t.right,s.x2-i))})),t}}s$.type="layout3d";var a$=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const o$=new hl;s_(),v_(),RS(),hw();class l$ extends qW{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:O({},l$.defaultAttributes,e)),this.name="poptip",this.positionList=["top","tl","tr","bottom","bl","br","left","lt","lb","right","rt","rb"]}render(){var e,t,i,n,r,s,a,o;const{titleStyle:l={},position:c,contentStyle:h={},panel:d={},space:u=4,minWidth:p=0,maxWidth:g=1/0,padding:f=4,maxWidthPercent:y,visible:b,state:_,dx:S=0,dy:w=0}=this.attribute;let{title:C="",content:k=""}=this.attribute;C=this.attribute.titleFormatMethod?this.attribute.titleFormatMethod(C):C,k=this.attribute.contentFormatMethod?this.attribute.contentFormatMethod(k):k;const A=nW(f),E=this.createOrUpdateChild("poptip-content",{x:0,y:0,zIndex:1},"group"),T=g-A[1]-A[3],O=x(C)&&!1!==b,P=Object.assign(Object.assign({text:v(C)?C:[C],visible:O},l),{x:A[3],y:A[0],maxLineWidth:T,textAlign:"left",textBaseline:"top"}),M=E.createOrUpdateChild("poptip-title",P,"wrapText");ay(null==_?void 0:_.title)||(M.states=_.title);const I=M.AABBBounds,R=I.height(),D=I.width();let L=R+u;O||(L=0);const j=x(k)&&!1!==b,F=Object.assign(Object.assign({text:v(k)?k:[k],visible:j},h),{x:A[3],y:A[0]+L,maxLineWidth:T,textAlign:"left",textBaseline:"top"}),B=E.createOrUpdateChild("poptip-content",F,"wrapText");ay(null==_?void 0:_.content)||(B.states=_.content);const N=B.AABBBounds,z=N.height(),H=N.width();j&&(L+=z);let V=Wn(D+A[1]+A[3],H+A[1]+A[3]);V>g?V=g:V<p&&(V=p);let U=A[0]+A[2]+L;const{visible:W}=d,G=a$(d,["visible"]),K=null!==(e=G.size)&&void 0!==e?e:12,Y=v(K)?[K[0]+(null!==(t=G.space)&&void 0!==t?t:0),K[1]+(null!==(i=G.space)&&void 0!==i?i:0)]:K+(null!==(n=G.space)&&void 0!==n?n:0),X=null!==(r=G.lineWidth)&&void 0!==r?r:1,q=this.stage?[null!==(s=this.stage.viewWidth)&&void 0!==s?s:this.stage.width,null!==(a=this.stage.viewHeight)&&void 0!==a?a:this.stage.height]:void 0;if(q){const e=this.AABBBounds,t=null!==(o=this.attribute.x)&&void 0!==o?o:e.x1,i=q[0]-e.x1;let n=Math.max(t,i);const r=(v(K)?K[0]:12)+3;if(n=Math.min(n-r,n*y),n<V){V=n;const e=A[1]+A[3];M.setAttribute("maxLineWidth",n-e),B.setAttribute("maxLineWidth",n-e),U=A[0]+A[2],O&&(U+=M.AABBBounds.height()+u),U+=B.AABBBounds.height()}}const Z="auto"===c;let Q,$=-1/0;for(let x=0;x<this.positionList.length+1;x++){const e=Z?this.positionList[x===this.positionList.length?Q:x]:c,{angle:t,offset:i,rectOffset:n}=this.getAngleAndOffset(e,V,U,v(Y)?Y:[Y,Y-X]);if(m(W)){const e=(v(K)?K[0]:K)/4,n=E.createOrUpdateChild("poptip-symbol-panel",Object.assign(Object.assign({},G),{visible:W&&(j||O),x:e,y:0,strokeBoundsBuffer:-1,boundsPadding:-2,anchor:[0,0],symbolType:"arrow2Left",angle:t,dx:i[0],dy:i[1],size:K,zIndex:-9}),"symbol");ay(null==_?void 0:_.panel)||(n.states=_.panel);const r=E.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},G),{visible:W&&(j||O),x:0,y:0,width:V,height:U,zIndex:-8}),"rect");ay(null==_?void 0:_.panel)||(r.states=_.panel)}if(E.setAttributes({x:-i[0]+S,y:-i[1]+w}),!Z||!q)break;{o$.setValue(0,0,V,U).transformWithMatrix(E.globalTransMatrix);const e=o$,t=(new cl).setValue(0,0,q[0],q[1]);if(ee=t,te=!1,(J=e)&&ee?(Kp=J.x1,Yp=J.x2,Xp=J.y1,qp=J.y2,Zp=ee.x1,Qp=ee.x2,$p=ee.y1,Jp=ee.y2,te&&(Kp>Yp&&([Kp,Yp]=[Yp,Kp]),Xp>qp&&([Xp,qp]=[qp,Xp]),Zp>Qp&&([Zp,Qp]=[Qp,Zp]),$p>Jp&&([$p,Jp]=[Jp,$p])),Kp>Zp&&Yp<Qp&&Xp>$p&&qp<Jp?ng.BBOX1:Zp>Kp&&Qp<Yp&&$p>Xp&&Jp<qp?ng.BBOX2:ng.NONE):ng.NONE)break;{const i=ig(e,t,!1),n=(i.x2-i.x1)*(i.y2-i.y1);n>$&&($=n,Q=x)}}}var J,ee,te}getAngleAndOffset(e,t,i,n){const r=n[1]/2;switch(e){case"tl":return{angle:Fn/2*3,offset:[t/4,i+r],rectOffset:[-t/4,-i-n[1]]};case"top":return{angle:Fn/2*3,offset:[t/2,i+r],rectOffset:[0,-i-n[1]]};case"tr":return{angle:Fn/2*3,offset:[t/4*3,i+r],rectOffset:[t/4*3,-i-n[1]]};case"rt":return{angle:0,offset:[-r,i/5],rectOffset:[t/4*3,-i-n[1]]};case"right":return{angle:0,offset:[-r,i/2],rectOffset:[t/4*3,-i-n[1]]};case"rb":return{angle:0,offset:[-r,i/5*4],rectOffset:[t/4*3,-i-n[1]]};case"bl":return{angle:Fn/2,offset:[t/4,-r],rectOffset:[-t/4,-i-n[1]]};case"bottom":return{angle:Fn/2,offset:[t/2,-r],rectOffset:[0,-i-n[1]]};case"br":return{angle:Fn/2,offset:[t/4*3,-r],rectOffset:[t/4*3,-i-n[1]]};case"lt":return{angle:Fn,offset:[t+r,i/5],rectOffset:[-t/4,-i-n[1]]};case"left":return{angle:Fn,offset:[t+r,i/2],rectOffset:[0,-i-n[1]]};case"lb":return{angle:Fn,offset:[t+r,i/5*4],rectOffset:[t/4*3,-i-n[1]]}}}}l$.defaultAttributes={position:"rt",visible:!0,title:null,content:null,titleStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},contentStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},maxWidthPercent:.8,space:8,padding:10};var c$=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let h$=class{render(e,t,i,n,r,s,a,o,l,c,h,d,u){var p;if(1===e._showPoptip){const{visible:t,visibleCb:i}=e.attribute.poptip||{};if(!1===t||i&&!1===i(e))return;const n={};O(n,l$.defaultAttributes,e.attribute.poptip?e.attribute.poptip:{}),this.poptipComponent?this.poptipComponent.initAttributes(n):this.poptipComponent=new l$(n);let r=e.attribute.poptip||{};if("text"===e.type&&null==r.title&&null==r.content){const t={};O(t,n_.poptip,r),r=t,r.content=null!==(p=r.content)&&void 0!==p?p:e.attribute.text}const s=e.globalTransMatrix;this.poptipComponent.setAttributes(Object.assign(Object.assign({visibleAll:!0,pickable:!1,childrenPickable:!1},r),{x:s.e,y:s.f})),c.stage.tryInitInteractiveLayer();const a=c.stage.getLayer("_builtin_interactive");a&&a.add(this.poptipComponent)}else 2===e._showPoptip&&(e._showPoptip=0,this.poptipComponent&&this.poptipComponent.setAttributes({visibleAll:!1}))}};h$=c$([jo()],h$);var d$=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let u$=class{constructor(){this.name="poptip",this.activeEvent="onRegister",this._uid=To.GenAutoIncrementId(),this.key=this.name+this._uid,this.poptip=e=>{const t=e.target;if(t.isContainer||!t.attribute)return void this.unpoptip(e);if(t===this.activeGraphic)return;const{poptip:i}=t.attribute;i&&(t.setAttributes({}),t._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(t,!0)},this.unpoptip=e=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(e){this.pluginService=e;const{stage:t}=this.pluginService;t.addEventListener("pointerover",this.poptip)}setActiveGraphic(e,t){this.activeGraphic=e,this.pluginService.stage.renderNextFrame()}deactivate(e){const{stage:t}=this.pluginService;t.removeEventListener("pointerover",this.poptip)}};u$=d$([jo()],u$);let p$=class{constructor(){this.name="poptipForText",this.activeEvent="onRegister",this._uid=To.GenAutoIncrementId(),this.key=this.name+this._uid,this.pointerlave=e=>{const{stage:t}=this.pluginService;e.target===t&&this.unpoptip(e)},this.poptip=e=>{const t=e.target;if("text"!==t.type||!t.cliped||t.isContainer||!t.attribute||t.attribute.disableAutoClipedPoptip)return void this.unpoptip(e);if(t===this.activeGraphic)return;const{poptip:i={}}=t.attribute;i&&(t.setAttributes({}),t._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(t,!0)},this.unpoptip=e=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(e){this.pluginService=e;const{stage:t}=this.pluginService;t.addEventListener("pointerover",this.poptip),t.addEventListener("pointerleave",this.pointerlave)}setActiveGraphic(e,t){this.activeGraphic=e,this.pluginService.stage.renderNextFrame()}deactivate(e){const{stage:t}=this.pluginService;t.removeEventListener("pointerover",this.poptip),t.removeEventListener("pointerleave",this.pointerlave)}};p$=d$([jo()],p$);const g$=new Oo(((e,t,i,n)=>{i(h$)||(e(h$).toSelf().inSingletonScope(),e(Zg).toService(h$)),i(u$)||(e(u$).toSelf(),e(xp).toService(u$)),i(p$)||(e(p$).toSelf(),e(xp).toService(p$))}));cR.useRegisters([()=>{WM(),GM(),tD(),rD(),AM(),CM(),_n.registerSeries(aD.type,aD),_n.registerChart(mD.type,mD)},()=>{kD(),_n.registerChart(ED.type,ED)},()=>{ND(),_n.registerChart(HD.type,HD)},()=>{nL(),_n.registerChart(sL.type,sL)},()=>{VF(),_n.registerChart(KF.type,KF)},()=>{cB(),_n.registerChart(uB.type,uB)},()=>{_B(),_n.registerChart(SB.type,SB)},()=>{ND(),_n.registerChart(UB.type,UB)},()=>{SF(),_n.registerChart(CF.type,CF)},()=>{aN(),qB(),$B(),_n.registerSeries(lN.type,lN),_n.registerChart(hN.type,hN)},()=>{kz(),_n.registerChart(Ez.type,Ez)},()=>{wz(),QN(),LB(),AN(),_n.registerSeries(Cz.type,Cz),kz(),_n.registerChart(Ez.type,Ez)},()=>{Qz(),_n.registerChart(Jz.type,Jz)},()=>{qV(),_n.registerChart(QV.type,QV)},()=>{fU(),rD(),CM(),_n.registerSeries(mU.type,mU),_n.registerChart(yU.type,yU)},()=>{qB(),BF(),$B(),kM(),_n.registerSeries(JB.type,JB),_n.registerChart(iN.type,iN)},()=>{dH(),_n.registerChart(pH.type,pH)},()=>{SH(),_n.registerChart(CH.type,CH)},()=>{yD(),_n.registerSeries(qU.type,qU),_n.registerChart(QU.type,QU)},()=>{QH(),_n.registerChart(JH.type,JH)},()=>{SV(),_n.registerChart(CV.type,CV)},()=>{LV(),_n.registerChart(FV.type,FV)},()=>{GU(),_n.registerChart(YU.type,YU)},()=>{oW(),_n.registerChart(cW.type,cW)},()=>{rD(),TB(),LD(),LB(),_n.registerSeries(jB.type,jB),TB(),rD(),_n.registerSeries(PB.type,PB),_n.registerChart(NB.type,NB)},()=>{SW(),_n.registerChart(CW.type,CW)},()=>{_n.registerChart(CB.type,CB)},()=>{GD(),_n.registerChart(YD.type,YD)},()=>{QF(),_n.registerChart(JF.type,JF)},()=>{GD(),_n.registerChart(WB.type,WB)},()=>{tH(),LB(),TB(),_n.registerSeries(nH.type,nH),_n.registerChart(rH.type,rH)},()=>{UD(),_n.registerSeries(kH.type,kH),_n.registerChart(EH.type,EH)},()=>{Oz(),_n.registerChart(Mz.type,Mz)},()=>{wz(),QN(),LB(),EN(),_n.registerSeries(Tz.type,Tz),Oz(),_n.registerChart(Mz.type,Mz)},()=>{EK(),_n.registerComponent(LK.type,LK)},()=>{EK(),_n.registerComponent(FK.type,FK)},()=>{EK(),_n.registerComponent(BK.type,BK)},()=>{EK(),_n.registerComponent(VK.type,VK)},()=>{EK(),_n.registerComponent(WK.type,WK)},()=>{EK(),_n.registerComponent(XK.type,XK)},()=>{EK(),_n.registerComponent(qK.type,qK)},()=>{_n.registerComponent(fY.type,fY)},()=>{_n.registerComponent(MY.type,MY)},()=>{_n.registerComponent(GX.type,GX)},()=>{_n.registerComponent(JX.type,JX)},()=>{_n.registerComponent(rq.type,rq)},()=>{_n.registerComponent(gq.type,gq)},()=>{_n.registerComponent(vq.type,vq)},()=>{_n.registerComponent(xq.type,xq)},bF,()=>{_n.registerComponent(PQ.type,PQ)},()=>{_n.registerComponent(Jq.type,Jq)},()=>{_n.registerComponent(nZ.type,nZ)},()=>{_n.registerComponent(tZ.type,tZ)},()=>{_n.registerComponent(kZ.type,kZ)},()=>{uQ(),wQ(),SK(),_n.registerComponent(kQ.type,kQ,!0)},()=>{uQ(),wQ(),SK(),_n.registerComponent(AQ.type,AQ,!0)},()=>{_n.registerComponent(jQ.type,jQ)},()=>{BQ(),_n.registerComponent(NQ.type,NQ)},()=>{_n.registerComponent(i$.type,i$)},()=>{ph.load(g$)},()=>{_n.registerLayout(n$.type,n$)},()=>{_n.registerLayout(s$.type,s$)}]);const f$=cR,m$="Inter,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif",v$="theme-mode",y$=()=>document.body.hasAttribute(v$)&&"dark"===document.body.getAttribute(v$)?"dark":"light",b$={name:"semiDesignDark",description:"Semi Design - dark",type:"dark",fontFamily:m$,colorScheme:{default:{dataScheme:kt.colorScheme.default.dataScheme,palette:{backgroundColor:"#16161a",borderColor:"rgba(255,255,255,0.08)",shadowColor:"rgba(0,0,0,0.25)",hoverBackgroundColor:"rgba(255,255,255,0.12)",sliderRailColor:"rgba(255,255,255,0.12)",sliderHandleColor:"#e4e7f5",sliderTrackColor:"rgba(84,169,255,1)",popupBackgroundColor:"#43444a",primaryFontColor:"rgba(249,249,249,1)",secondaryFontColor:"rgba(249,249,249,0.8)",tertiaryFontColor:"rgba(249,249,249,0.6)",axisLabelFontColor:"rgba(249,249,249,0.6)",disableFontColor:"rgba(249,249,249,0.35)",axisMarkerFontColor:"#16161a",axisGridColor:"rgba(255,255,255,0.08)",axisDomainColor:"rgba(255,255,255,0.08)",dataZoomHandleStrokeColor:"rgba(46,50,56,0.13)",dataZoomChartColor:"rgba(255,255,255,0.16)",playerControllerColor:"rgba(84,169,255,1)",axisMarkerBackgroundColor:"rgba(249,249,249,1)",markLabelBackgroundColor:"rgba(255,255,255,0.08)",markLineStrokeColor:"rgba(249,249,249,0.8)",dangerColor:"rgba(252,114,90,1)",warningColor:"rgba(255,174,67,1)",successColor:"rgba(93,194,100,1)",infoColor:"rgba(84,169,255,1)"}}}},_$={default:{dataScheme:kt.colorScheme.default.dataScheme,palette:{backgroundColor:"rgba(255,255,255,1)",borderColor:"rgba(28,31,35,0.08)",shadowColor:"rgba(0,0,0,0.1)",hoverBackgroundColor:"rgba(46,50,56,0.05)",sliderRailColor:"rgba(46,50,56,0.05)",sliderHandleColor:"rgba(255,255,255,1)",sliderTrackColor:"rgba(0,100,250,1)",popupBackgroundColor:"rgba(255,255,255,1)",primaryFontColor:"rgba(28,31,35,1)",secondaryFontColor:"rgba(28,31,35,0.8)",tertiaryFontColor:"rgba(28,31,35,0.62)",axisLabelFontColor:"rgba(28,31,35,0.62)",disableFontColor:"rgba(28,31,35,0.35)",axisMarkerFontColor:"rgba(255,255,255,1)",axisGridColor:"rgba(28,31,35,0.08)",axisDomainColor:"rgba(28,31,35,0.15)",dataZoomHandleStrokeColor:"rgba(46,50,56,0.13)",dataZoomChartColor:"rgba(46,50,56,0.09)",playerControllerColor:"rgba(0,100,250,1)",axisMarkerBackgroundColor:"rgba(28,31,35,1)",markLabelBackgroundColor:"rgba(28,31,35,0.08)",markLineStrokeColor:"rgba(28,31,35,0.8)",dangerColor:"rgba(249,57,32,1)",warningColor:"rgba(252,136,0,1)",successColor:"rgba(59,179,70,1)",infoColor:"rgba(0,100,250,1)"}}},x$={backgroundColor:"--semi-color-bg-0",borderColor:"--semi-color-border",hoverBackgroundColor:"--semi-color-fill-0",sliderRailColor:"--semi-color-fill-0",sliderHandleColor:"--semi-white",sliderTrackColor:"--semi-color-primary",popupBackgroundColor:"--semi-color-bg-3",primaryFontColor:"--semi-color-text-0",secondaryFontColor:"--semi-color-text-1",tertiaryFontColor:"--semi-color-text-2",axisLabelFontColor:"--semi-color-text-0",disableFontColor:"--semi-color-disabled-text",axisMarkerFontColor:"--semi-color-bg-0",axisGridColor:"--semi-color-border",axisDomainColor:{light:"--semi-grey-9",dark:"--semi-color-border"},dataZoomHandleStrokeColor:{light:"--semi-color-fill-2"},dataZoomChartColor:"--semi-color-fill-1",playerControllerColor:"--semi-color-primary",axisMarkerBackgroundColor:"--semi-color-text-0",markLabelBackgroundColor:"--semi-color-border",markLineStrokeColor:"--semi-color-text-1",dangerColor:"--semi-color-danger",warningColor:"--semi-color-warning",successColor:"--semi-color-success",infoColor:"--semi-color-info"},S$=[{maxDomainLength:10,scheme:["--semi-color-data-0","--semi-color-data-2","--semi-color-data-4","--semi-color-data-6","--semi-color-data-8","--semi-color-data-10","--semi-color-data-12","--semi-color-data-14","--semi-color-data-16","--semi-color-data-18"]},{scheme:["--semi-color-data-0","--semi-color-data-1","--semi-color-data-2","--semi-color-data-3","--semi-color-data-4","--semi-color-data-5","--semi-color-data-6","--semi-color-data-7","--semi-color-data-8","--semi-color-data-9","--semi-color-data-10","--semi-color-data-11","--semi-color-data-12","--semi-color-data-13","--semi-color-data-14","--semi-color-data-15","--semi-color-data-16","--semi-color-data-17","--semi-color-data-18","--semi-color-data-19"]}],w$=(e,t,i)=>{const n=e&&getComputedStyle(null!=i?i:document.body).getPropertyValue(e)||t;return n&&!isNaN(n[0])?"rgba(".concat(n,")"):n},C$=(e,t,i,n)=>t.map(((t,r)=>{const{scheme:s}=i[r];return Object.assign(Object.assign({},t),{scheme:t.scheme.map(((t,i)=>w$("object"==typeof t?t[e]:t,null==s?void 0:s[i],n)))})})),k$=(e,t,i,n)=>{const r={};return Object.keys(t).forEach((s=>{const a="object"==typeof t[s]?t[s][e]:t[s];r[s]=w$(a,i[s],n)})),r},A$={light:{name:"semiDesignLight",description:"Semi Design - light",type:"light",fontFamily:m$,colorScheme:_$},dark:b$},E$=(e,t)=>{const i=A$[e],{dataScheme:n,palette:r}=i.colorScheme.default,s={default:{dataScheme:C$(e,S$,n,t),palette:k$(e,x$,r,t)}};return Object.assign(Object.assign({},i),{colorScheme:s})},T$=(e,t,i)=>{t||(t=y$());const n=(e=>"semiDesign".concat(e[0].toUpperCase()).concat(e.slice(1)))(t);(e||f$.ThemeManager.getCurrentTheme()!==n)&&(e&&f$.ThemeManager.removeTheme(n),f$.ThemeManager.themeExist(n)||f$.ThemeManager.registerTheme(n,null!=i?i:E$(t)),f$.ThemeManager.setCurrentTheme(n))};var O$,P$=i(65043),M$=i.t(P$,2),I$=i(84391),R$=i(97950),D$=i.t(R$,2);function L$(){return L$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},L$.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(O$||(O$={}));const j$="popstate";function F$(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function B$(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(i){}}}function N$(e,t){return{usr:e.state,key:e.key,idx:t}}function z$(e,t,i,n){return void 0===i&&(i=null),L$({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?V$(t):t,{state:i,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function H$(e){let{pathname:t="/",search:i="",hash:n=""}=e;return i&&"?"!==i&&(t+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function V$(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function U$(e,t,i,n){void 0===n&&(n={});let{window:r=document.defaultView,v5Compat:s=!1}=n,a=r.history,o=O$.Pop,l=null,c=h();function h(){return(a.state||{idx:null}).idx}function d(){o=O$.Pop;let e=h(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function u(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,i="string"===typeof e?e:H$(e);return i=i.replace(/ $/,"%20"),F$(t,"No window.location.(origin|href) available to create URL for href: "+i),new URL(i,t)}null==c&&(c=0,a.replaceState(L$({},a.state,{idx:c}),""));let p={get action(){return o},get location(){return e(r,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(j$,d),l=e,()=>{r.removeEventListener(j$,d),l=null}},createHref:e=>t(r,e),createURL:u,encodeLocation(e){let t=u(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=O$.Push;let n=z$(p.location,e,t);i&&i(n,e),c=h()+1;let d=N$(n,c),u=p.createHref(n);try{a.pushState(d,"",u)}catch(fe){if(fe instanceof DOMException&&"DataCloneError"===fe.name)throw fe;r.location.assign(u)}s&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o=O$.Replace;let n=z$(p.location,e,t);i&&i(n,e),c=h();let r=N$(n,c),d=p.createHref(n);a.replaceState(r,"",d),s&&l&&l({action:o,location:p.location,delta:0})},go:e=>a.go(e)};return p}var W$;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(W$||(W$={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function G$(e,t,i){void 0===i&&(i="/");let n=sJ(("string"===typeof t?V$(t):t).pathname||"/",i);if(null==n)return null;let r=K$(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let i=e.length===t.length&&e.slice(0,-1).every(((e,i)=>e===t[i]));return i?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(r);let s=null;for(let a=0;null==s&&a<r.length;++a){let e=rJ(n);s=iJ(r[a],e)}return s}function K$(e,t,i,n){void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===n&&(n="");let r=(e,r,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};a.relativePath.startsWith("/")&&(F$(a.relativePath.startsWith(n),'Absolute route path "'+a.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(n.length));let o=hJ([n,a.relativePath]),l=i.concat(a);e.children&&e.children.length>0&&(F$(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),K$(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:tJ(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var i;if(""!==e.path&&null!=(i=e.path)&&i.includes("?"))for(let n of Y$(e.path))r(e,t,n);else r(e,t)})),t}function Y$(e){let t=e.split("/");if(0===t.length)return[];let[i,...n]=t,r=i.endsWith("?"),s=i.replace(/\?$/,"");if(0===n.length)return r?[s,""]:[s];let a=Y$(n.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),r&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const X$=/^:[\w-]+$/,q$=3,Z$=2,Q$=1,$$=10,J$=-2,eJ=e=>"*"===e;function tJ(e,t){let i=e.split("/"),n=i.length;return i.some(eJ)&&(n+=J$),t&&(n+=Z$),i.filter((e=>!eJ(e))).reduce(((e,t)=>e+(X$.test(t)?q$:""===t?Q$:$$)),n)}function iJ(e,t){let{routesMeta:i}=e,n={},r="/",s=[];for(let a=0;a<i.length;++a){let e=i[a],o=a===i.length-1,l="/"===r?t:t.slice(r.length)||"/",c=nJ({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},l);if(!c)return null;Object.assign(n,c.params);let h=e.route;s.push({params:n,pathname:hJ([r,c.pathname]),pathnameBase:dJ(hJ([r,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(r=hJ([r,c.pathnameBase]))}return s}function nJ(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[i,n]=function(e,t,i){void 0===t&&(t=!1);void 0===i&&(i=!0);B$("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,i)=>(n.push({paramName:t,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),r=t.match(i);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:n.reduce(((e,t,i)=>{let{paramName:n,isOptional:r}=t;if("*"===n){let e=o[i]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[i];return e[n]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:a,pattern:e}}function rJ(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(fe){return B$(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+fe+")."),e}}function sJ(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,n=e.charAt(i);return n&&"/"!==n?null:e.slice(i)||"/"}function aJ(e,t,i,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+i+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function oJ(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function lJ(e,t){let i=oJ(e);return t?i.map(((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)):i.map((e=>e.pathnameBase))}function cJ(e,t,i,n){let r;void 0===n&&(n=!1),"string"===typeof e?r=V$(e):(r=L$({},e),F$(!r.pathname||!r.pathname.includes("?"),aJ("?","pathname","search",r)),F$(!r.pathname||!r.pathname.includes("#"),aJ("#","pathname","hash",r)),F$(!r.search||!r.search.includes("#"),aJ("#","search","hash",r)));let s,a=""===e||""===r.pathname,o=a?"/":r.pathname;if(null==o)s=i;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:i,search:n="",hash:r=""}="string"===typeof e?V$(e):e,s=i?i.startsWith("/")?i:function(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?i.length>1&&i.pop():"."!==e&&i.push(e)})),i.length>1?i.join("/"):"/"}(i,t):t;return{pathname:s,search:uJ(n),hash:pJ(r)}}(r,s),c=o&&"/"!==o&&o.endsWith("/"),h=(a||"."===o)&&i.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}const hJ=e=>e.join("/").replace(/\/\/+/g,"/"),dJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uJ=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",pJ=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function gJ(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const fJ=["post","put","patch","delete"],mJ=(new Set(fJ),["get",...fJ]);new Set(mJ),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function vJ(){return vJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},vJ.apply(this,arguments)}const yJ=P$.createContext(null);const bJ=P$.createContext(null);const _J=P$.createContext(null);const xJ=P$.createContext(null);const SJ=P$.createContext({outlet:null,matches:[],isDataRoute:!1});const wJ=P$.createContext(null);function CJ(){return null!=P$.useContext(xJ)}function kJ(){return CJ()||F$(!1),P$.useContext(xJ).location}function AJ(e){P$.useContext(_J).static||P$.useLayoutEffect(e)}function EJ(){let{isDataRoute:e}=P$.useContext(SJ);return e?function(){let{router:e}=FJ(LJ.UseNavigateStable),t=NJ(jJ.UseNavigateStable),i=P$.useRef(!1);AJ((()=>{i.current=!0}));let n=P$.useCallback((function(n,r){void 0===r&&(r={}),i.current&&("number"===typeof n?e.navigate(n):e.navigate(n,vJ({fromRouteId:t},r)))}),[e,t]);return n}():function(){CJ()||F$(!1);let e=P$.useContext(yJ),{basename:t,future:i,navigator:n}=P$.useContext(_J),{matches:r}=P$.useContext(SJ),{pathname:s}=kJ(),a=JSON.stringify(lJ(r,i.v7_relativeSplatPath)),o=P$.useRef(!1);AJ((()=>{o.current=!0}));let l=P$.useCallback((function(i,r){if(void 0===r&&(r={}),!o.current)return;if("number"===typeof i)return void n.go(i);let l=cJ(i,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:hJ([t,l.pathname])),(r.replace?n.replace:n.push)(l,r.state,r)}),[t,n,a,s,e]);return l}()}function TJ(e,t){let{relative:i}=void 0===t?{}:t,{future:n}=P$.useContext(_J),{matches:r}=P$.useContext(SJ),{pathname:s}=kJ(),a=JSON.stringify(lJ(r,n.v7_relativeSplatPath));return P$.useMemo((()=>cJ(e,JSON.parse(a),s,"path"===i)),[e,a,s,i])}function OJ(e,t,i,n){CJ()||F$(!1);let{navigator:r}=P$.useContext(_J),{matches:s}=P$.useContext(SJ),a=s[s.length-1],o=a?a.params:{},l=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let c,h=kJ();if(t){var d;let e="string"===typeof t?V$(t):t;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||F$(!1),c=e}else c=h;let u=c.pathname||"/",p=u;if("/"!==l){let e=l.replace(/^\//,"").split("/");p="/"+u.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=G$(e,{pathname:p});let f=DJ(g&&g.map((e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:hJ([l,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:hJ([l,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,i,n);return t&&f?P$.createElement(xJ.Provider,{value:{location:vJ({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:O$.Pop}},f):f}function PJ(){let e=function(){var e;let t=P$.useContext(wJ),i=BJ(jJ.UseRouteError),n=NJ(jJ.UseRouteError);if(void 0!==t)return t;return null==(e=i.errors)?void 0:e[n]}(),t=gJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n};return P$.createElement(P$.Fragment,null,P$.createElement("h2",null,"Unexpected Application Error!"),P$.createElement("h3",{style:{fontStyle:"italic"}},t),i?P$.createElement("pre",{style:r},i):null,null)}const MJ=P$.createElement(PJ,null);class IJ extends P$.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?P$.createElement(SJ.Provider,{value:this.props.routeContext},P$.createElement(wJ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RJ(e){let{routeContext:t,match:i,children:n}=e,r=P$.useContext(yJ);return r&&r.static&&r.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=i.route.id),P$.createElement(SJ.Provider,{value:t},n)}function DJ(e,t,i,n){var r;if(void 0===t&&(t=[]),void 0===i&&(i=null),void 0===n&&(n=null),null==e){var s;if(null==(s=i)||!s.errors)return null;e=i.matches}let a=e,o=null==(r=i)?void 0:r.errors;if(null!=o){let e=a.findIndex((e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id])));e>=0||F$(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,c=-1;if(i&&n&&n.v7_partialHydration)for(let h=0;h<a.length;h++){let e=a[h];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=h),e.route.id){let{loaderData:t,errors:n}=i,r=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||r){l=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight(((e,n,r)=>{let s,h=!1,d=null,u=null;i&&(s=o&&n.route.id?o[n.route.id]:void 0,d=n.route.errorElement||MJ,l&&(c<0&&0===r?(!function(e,t,i){t||zJ[e]||(zJ[e]=!0)}("route-fallback",!1),h=!0,u=null):c===r&&(h=!0,u=n.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,r+1)),g=()=>{let t;return t=s?d:h?u:n.route.Component?P$.createElement(n.route.Component,null):n.route.element?n.route.element:e,P$.createElement(RJ,{match:n,routeContext:{outlet:e,matches:p,isDataRoute:null!=i},children:t})};return i&&(n.route.ErrorBoundary||n.route.errorElement||0===r)?P$.createElement(IJ,{location:i.location,revalidation:i.revalidation,component:d,error:s,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}var LJ=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(LJ||{}),jJ=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jJ||{});function FJ(e){let t=P$.useContext(yJ);return t||F$(!1),t}function BJ(e){let t=P$.useContext(bJ);return t||F$(!1),t}function NJ(e){let t=function(e){let t=P$.useContext(SJ);return t||F$(!1),t}(),i=t.matches[t.matches.length-1];return i.route.id||F$(!1),i.route.id}const zJ={};M$.startTransition;function HJ(e){let{to:t,replace:i,state:n,relative:r}=e;CJ()||F$(!1);let{future:s,static:a}=P$.useContext(_J),{matches:o}=P$.useContext(SJ),{pathname:l}=kJ(),c=EJ(),h=cJ(t,lJ(o,s.v7_relativeSplatPath),l,"path"===r),d=JSON.stringify(h);return P$.useEffect((()=>c(JSON.parse(d),{replace:i,state:n,relative:r})),[c,d,r,i,n]),null}function VJ(e){F$(!1)}function UJ(e){let{basename:t="/",children:i=null,location:n,navigationType:r=O$.Pop,navigator:s,static:a=!1,future:o}=e;CJ()&&F$(!1);let l=t.replace(/^\/*/,"/"),c=P$.useMemo((()=>({basename:l,navigator:s,static:a,future:vJ({v7_relativeSplatPath:!1},o)})),[l,o,s,a]);"string"===typeof n&&(n=V$(n));let{pathname:h="/",search:d="",hash:u="",state:p=null,key:g="default"}=n,f=P$.useMemo((()=>{let e=sJ(h,l);return null==e?null:{location:{pathname:e,search:d,hash:u,state:p,key:g},navigationType:r}}),[l,h,d,u,p,g,r]);return null==f?null:P$.createElement(_J.Provider,{value:c},P$.createElement(xJ.Provider,{children:i,value:f}))}function WJ(e){let{children:t,location:i}=e;return OJ(GJ(t),i)}new Promise((()=>{}));P$.Component;function GJ(e,t){void 0===t&&(t=[]);let i=[];return P$.Children.forEach(e,((e,n)=>{if(!P$.isValidElement(e))return;let r=[...t,n];if(e.type===P$.Fragment)return void i.push.apply(i,GJ(e.props.children,r));e.type!==VJ&&F$(!1),e.props.index&&e.props.children&&F$(!1);let s={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=GJ(e.props.children,r)),i.push(s)})),i}function KJ(){return KJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},KJ.apply(this,arguments)}function YJ(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}function XJ(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,i)=>{let n=e[i];return t.concat(Array.isArray(n)?n.map((e=>[i,e])):[[i,n]])}),[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const qJ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(V6){}new Map;const ZJ=M$.startTransition;D$.flushSync,M$.useId;function QJ(e){let{basename:t,children:i,future:n,window:r}=e,s=P$.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:r,v5Compat:!0})&&(a={}),U$((function(e,t){let{pathname:i,search:n,hash:r}=e.location;return z$("",{pathname:i,search:n,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:H$(t)}),null,a)));let o=s.current,[l,c]=P$.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},d=P$.useCallback((e=>{h&&ZJ?ZJ((()=>c(e))):c(e)}),[c,h]);return P$.useLayoutEffect((()=>o.listen(d)),[o,d]),P$.createElement(UJ,{basename:t,children:i,location:l.location,navigationType:l.action,navigator:o,future:n})}const $J="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,JJ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e0=P$.forwardRef((function(e,t){let i,{onClick:n,relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,u=YJ(e,qJ),{basename:p}=P$.useContext(_J),g=!1;if("string"===typeof c&&JJ.test(c)&&(i=c,$J))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),i=sJ(t.pathname,p);t.origin===e.origin&&null!=i?c=i+t.search+t.hash:g=!0}catch(V6){}let f=function(e,t){let{relative:i}=void 0===t?{}:t;CJ()||F$(!1);let{basename:n,navigator:r}=P$.useContext(_J),{hash:s,pathname:a,search:o}=TJ(e,{relative:i}),l=a;return"/"!==n&&(l="/"===a?n:hJ([n,a])),r.createHref({pathname:l,search:o,hash:s})}(c,{relative:r}),m=function(e,t){let{target:i,replace:n,state:r,preventScrollReset:s,relative:a,unstable_viewTransition:o}=void 0===t?{}:t,l=EJ(),c=kJ(),h=TJ(e,{relative:a});return P$.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();let i=void 0!==n?n:H$(c)===H$(h);l(e,{replace:i,state:r,preventScrollReset:s,relative:a,unstable_viewTransition:o})}}),[c,l,h,n,r,i,e,s,a,o])}(c,{replace:a,state:o,target:l,preventScrollReset:h,relative:r,unstable_viewTransition:d});return P$.createElement("a",KJ({},u,{href:i||f,onClick:g||s?n:function(e){n&&n(e),e.defaultPrevented||m(e)},ref:t,target:l}))}));var t0,i0;function n0(e){let t=P$.useRef(XJ(e)),i=P$.useRef(!1),n=kJ(),r=P$.useMemo((()=>function(e,t){let i=XJ(e);return t&&t.forEach(((e,n)=>{i.has(n)||t.getAll(n).forEach((e=>{i.append(n,e)}))})),i}(n.search,i.current?null:t.current)),[n.search]),s=EJ(),a=P$.useCallback(((e,t)=>{const n=XJ("function"===typeof e?e(r):e);i.current=!0,s("?"+n,t)}),[s,r]);return[r,a]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(t0||(t0={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(i0||(i0={}));var r0=i(40812),s0=i(87328),a0=i(58168),o0=i(43024),l0=i(83727),c0=i(38214),h0=i(21653),d0=i(87061);function u0(e){var t=e.active,i=e.children,n=e.className,r=e.content,s=e.disabled,a=e.indeterminate,o=e.inline,l=e.inverted,c=e.size,h=(0,o0.default)("ui",c,(0,l0.b5)(t,"active"),(0,l0.b5)(s,"disabled"),(0,l0.b5)(a,"indeterminate"),(0,l0.b5)(l,"inverted"),(0,l0.b5)(i||r,"text"),(0,l0.vQ)(o,"inline"),"loader",n),d=(0,c0.A)(u0,e),u=(0,h0.A)(u0,e);return P$.createElement(u,(0,a0.A)({},d,{className:h}),d0.gD(i)?r:i)}u0.handledProps=["active","as","children","className","content","disabled","indeterminate","inline","inverted","size"],u0.propTypes={};const p0=u0;var g0=i(70579);const f0=e=>{let{prompt:t="page"}=e;return(0,g0.jsx)(r0.A,{style:{height:100},children:(0,g0.jsx)(s0.A,{active:!0,inverted:!0,children:(0,g0.jsxs)(p0,{indeterminate:!0,children:["\u52a0\u8f7d",t,"\u4e2d..."]})})})};var m0=i(68169),v0=i(664),y0=i(62034);function b0(e){if(""===e)return(0,g0.jsx)(v0.vw,{size:"large",children:"default"});let t=e.split(",");return t.sort(),(0,g0.jsx)(g0.Fragment,{children:t.map((e=>"vip"===e||"pro"===e?(0,g0.jsx)(v0.vw,{size:"large",color:"yellow",children:e}):"svip"===e||"premium"===e?(0,g0.jsx)(v0.vw,{size:"large",color:"red",children:e}):"default"===e?(0,g0.jsx)(v0.vw,{size:"large",children:e}):(0,g0.jsx)(v0.vw,{size:"large",color:O0(e),children:e})))})}function _0(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e4?(e/1e3).toFixed(1)+"k":e}function x0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=localStorage.getItem("display_in_currency");return e=e.toFixed(t),i?"$"+e:e}function S0(e){if((e=e.toFixed(2))>=1e5){let t=e.toString(),i=t.indexOf("."),n=t,r="";return-1!==i&&(n=t.slice(0,i),r=t.slice(i)),n.slice(0,2)+".."+n.slice(-2)+r}return e}function w0(){let e=localStorage.getItem("quota_per_unit");return e=parseFloat(e),e}function C0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=localStorage.getItem("quota_per_unit");return i=parseFloat(i),(e/i).toFixed(t)}function k0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=localStorage.getItem("quota_per_unit"),n=localStorage.getItem("display_in_currency");return i=parseFloat(i),n="true"===n,n?"$"+(e/i).toFixed(t):_0(e)}function A0(e,t){let i=localStorage.getItem("display_in_currency");return i="true"===i,i?"\uff08\u7b49\u4ef7\u91d1\u989d\uff1a".concat(k0(e,t),"\uff09"):""}const E0=["amber","blue","cyan","green","grey","indigo","light-blue","lime","orange","pink","purple","red","teal","violet","yellow"],T0={"dall-e":"rgb(147,112,219)","dall-e-2":"rgb(147,112,219)","dall-e-3":"rgb(153,50,204)",midjourney:"rgb(136,43,180)","gpt-3.5-turbo":"rgb(184,227,167)","gpt-3.5-turbo-0301":"rgb(131,220,131)","gpt-3.5-turbo-0613":"rgb(60,179,113)","gpt-3.5-turbo-1106":"rgb(32,178,170)","gpt-3.5-turbo-16k":"rgb(252,200,149)","gpt-3.5-turbo-16k-0613":"rgb(255,181,119)","gpt-3.5-turbo-instruct":"rgb(175,238,238)","gpt-4":"rgb(135,206,235)","gpt-4-0314":"rgb(70,130,180)","gpt-4-0613":"rgb(100,149,237)","gpt-4-1106-preview":"rgb(30,144,255)","gpt-4-0125-preview":"rgb(2,177,236)","gpt-4-turbo-preview":"rgb(2,177,255)","gpt-4-32k":"rgb(104,111,238)","gpt-4-32k-0314":"rgb(90,105,205)","gpt-4-32k-0613":"rgb(61,71,139)","gpt-4-all":"rgb(65,105,225)","gpt-4-gizmo-*":"rgb(0,0,255)","gpt-4-vision-preview":"rgb(25,25,112)","text-ada-001":"rgb(255,192,203)","text-babbage-001":"rgb(255,160,122)","text-curie-001":"rgb(219,112,147)","text-davinci-002":"rgb(199,21,133)","text-davinci-003":"rgb(219,112,147)","text-davinci-edit-001":"rgb(255,105,180)","text-embedding-ada-002":"rgb(255,182,193)","text-embedding-v1":"rgb(255,174,185)","text-moderation-latest":"rgb(255,130,171)","text-moderation-stable":"rgb(255,160,122)","tts-1":"rgb(255,140,0)","tts-1-1106":"rgb(255,165,0)","tts-1-hd":"rgb(255,215,0)","tts-1-hd-1106":"rgb(255,223,0)","whisper-1":"rgb(245,245,220)"};function O0(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n);let i=t%E0.length;return E0[i]}var P0=i(82916);const M0=e=>{const t={username:"",display_name:"",password:""},[i,n]=(0,P$.useState)(t),[r,s]=(0,P$.useState)(!1),{username:a,display_name:o,password:l}=i,c=(e,t)=>{n((i=>({...i,[e]:t})))},h=()=>{e.handleClose()};return(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsx)(v0.DD,{placement:"left",title:(0,g0.jsx)(P0.A,{level:3,children:"\u6dfb\u52a0\u7528\u6237"}),headerStyle:{borderBottom:"1px solid var(--semi-color-border)"},bodyStyle:{borderBottom:"1px solid var(--semi-color-border)"},visible:e.visible,footer:(0,g0.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.$n,{theme:"solid",size:"large",onClick:async()=>{if(s(!0),""===i.username||""===i.password)return;const r=await m0.nC.post("/api/user/",i),{success:a,message:o}=r.data;a?((0,m0.Te)("\u7528\u6237\u8d26\u6237\u521b\u5efa\u6210\u529f\uff01"),n(t),e.refresh(),e.handleClose()):(0,m0.Qg)(o),s(!1)},children:"\u63d0\u4ea4"}),(0,g0.jsx)(v0.$n,{theme:"solid",size:"large",type:"tertiary",onClick:h,children:"\u53d6\u6d88"})]})}),closeIcon:null,onCancel:()=>h(),width:(0,m0.Fr)()?"100%":600,children:(0,g0.jsxs)(v0.tK,{spinning:r,children:[(0,g0.jsx)(v0.pd,{style:{marginTop:20},label:"\u7528\u6237\u540d",name:"username",addonBefore:"\u7528\u6237\u540d",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",onChange:e=>c("username",e),value:a,autoComplete:"off"}),(0,g0.jsx)(v0.pd,{style:{marginTop:20},addonBefore:"\u663e\u793a\u540d",label:"\u663e\u793a\u540d\u79f0",name:"display_name",autoComplete:"off",placeholder:"\u8bf7\u8f93\u5165\u663e\u793a\u540d\u79f0",onChange:e=>c("display_name",e),value:o}),(0,g0.jsx)(v0.pd,{style:{marginTop:20},label:"\u5bc6 \u7801",name:"password",type:"password",addonBefore:"\u5bc6\u7801",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:e=>c("password",e),value:l,autoComplete:"off"})]})})})},I0=e=>{const t=e.editingUser.id,[i,n]=(0,P$.useState)(!0),[r,s]=(0,P$.useState)({username:"",display_name:"",password:"",github_id:"",wechat_id:"",email:"",quota:0,group:"default"}),[a,o]=(0,P$.useState)([]),{username:l,display_name:c,password:h,github_id:d,wechat_id:u,telegram_id:p,email:g,quota:f,group:m}=r,v=(e,t)=>{s((i=>({...i,[e]:t})))},y=(EJ(),()=>{e.handleClose()});(0,P$.useEffect)((()=>{(async()=>{let e;n(!0),e=t?await m0.nC.get("/api/user/".concat(t)):await m0.nC.get("/api/user/self");const{success:i,message:r,data:a}=e.data;i?(a.password="",s(a)):(0,m0.Qg)(r),n(!1)})().then(),t&&(async()=>{try{let e=await m0.nC.get("/api/group/");o(e.data.data.map((e=>({label:e,value:e}))))}catch(fe){(0,m0.Qg)(fe.message)}})().then()}),[e.editingUser.id]);return(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsx)(v0.DD,{placement:"right",title:(0,g0.jsx)(P0.A,{level:3,children:"\u7f16\u8f91\u7528\u6237"}),headerStyle:{borderBottom:"1px solid var(--semi-color-border)"},bodyStyle:{borderBottom:"1px solid var(--semi-color-border)"},visible:e.visible,footer:(0,g0.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.$n,{theme:"solid",size:"large",onClick:async()=>{let i;if(n(!0),t){let e={...r,id:parseInt(t)};"string"===typeof e.quota&&(e.quota=parseInt(e.quota)),i=await m0.nC.put("/api/user/",e)}else i=await m0.nC.put("/api/user/self",r);const{success:s,message:a}=i.data;s?((0,m0.Te)("\u7528\u6237\u4fe1\u606f\u66f4\u65b0\u6210\u529f\uff01"),e.refresh(),e.handleClose()):(0,m0.Qg)(a),n(!1)},children:"\u63d0\u4ea4"}),(0,g0.jsx)(v0.$n,{theme:"solid",size:"large",type:"tertiary",onClick:y,children:"\u53d6\u6d88"})]})}),closeIcon:null,onCancel:()=>y(),width:(0,m0.Fr)()?"100%":600,children:(0,g0.jsxs)(v0.tK,{spinning:i,children:[(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u7528\u6237\u540d"})}),(0,g0.jsx)(v0.pd,{label:"\u7528\u6237\u540d",name:"username",placeholder:"\u8bf7\u8f93\u5165\u65b0\u7684\u7528\u6237\u540d",onChange:e=>v("username",e),value:l,autoComplete:"new-password"}),(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u5bc6\u7801"})}),(0,g0.jsx)(v0.pd,{label:"\u5bc6\u7801",name:"password",type:"password",placeholder:"\u8bf7\u8f93\u5165\u65b0\u7684\u5bc6\u7801\uff0c\u6700\u77ed 8 \u4f4d",onChange:e=>v("password",e),value:h,autoComplete:"new-password"}),(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u663e\u793a\u540d\u79f0"})}),(0,g0.jsx)(v0.pd,{label:"\u663e\u793a\u540d\u79f0",name:"display_name",placeholder:"\u8bf7\u8f93\u5165\u65b0\u7684\u663e\u793a\u540d\u79f0",onChange:e=>v("display_name",e),value:c,autoComplete:"new-password"}),t&&(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u5206\u7ec4"})}),(0,g0.jsx)(v0.l6,{placeholder:"\u8bf7\u9009\u62e9\u5206\u7ec4",name:"group",fluid:!0,search:!0,selection:!0,allowAdditions:!0,additionLabel:"\u8bf7\u5728\u7cfb\u7edf\u8bbe\u7f6e\u9875\u9762\u7f16\u8f91\u5206\u7ec4\u500d\u7387\u4ee5\u6dfb\u52a0\u65b0\u7684\u5206\u7ec4\uff1a",onChange:e=>v("group",e),value:r.group,autoComplete:"new-password",optionList:a}),(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u5269\u4f59\u989d\u5ea6".concat(A0(f))})}),(0,g0.jsx)(v0.pd,{name:"quota",placeholder:"\u8bf7\u8f93\u5165\u65b0\u7684\u5269\u4f59\u989d\u5ea6",onChange:e=>v("quota",e),value:f,type:"number",autoComplete:"new-password"})]}),(0,g0.jsx)(v0.cG,{style:{marginTop:20},children:"\u4ee5\u4e0b\u4fe1\u606f\u4e0d\u53ef\u4fee\u6539"}),(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u5df2\u7ed1\u5b9a\u7684 GitHub \u8d26\u6237"})}),(0,g0.jsx)(v0.pd,{name:"github_id",value:d,autoComplete:"new-password",placeholder:"\u6b64\u9879\u53ea\u8bfb\uff0c\u9700\u8981\u7528\u6237\u901a\u8fc7\u4e2a\u4eba\u8bbe\u7f6e\u9875\u9762\u7684\u76f8\u5173\u7ed1\u5b9a\u6309\u94ae\u8fdb\u884c\u7ed1\u5b9a\uff0c\u4e0d\u53ef\u76f4\u63a5\u4fee\u6539",readonly:!0}),(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u5df2\u7ed1\u5b9a\u7684\u5fae\u4fe1\u8d26\u6237"})}),(0,g0.jsx)(v0.pd,{name:"wechat_id",value:u,autoComplete:"new-password",placeholder:"\u6b64\u9879\u53ea\u8bfb\uff0c\u9700\u8981\u7528\u6237\u901a\u8fc7\u4e2a\u4eba\u8bbe\u7f6e\u9875\u9762\u7684\u76f8\u5173\u7ed1\u5b9a\u6309\u94ae\u8fdb\u884c\u7ed1\u5b9a\uff0c\u4e0d\u53ef\u76f4\u63a5\u4fee\u6539",readonly:!0}),(0,g0.jsx)(v0.pd,{name:"telegram_id",value:p,autoComplete:"new-password",placeholder:"\u6b64\u9879\u53ea\u8bfb\uff0c\u9700\u8981\u7528\u6237\u901a\u8fc7\u4e2a\u4eba\u8bbe\u7f6e\u9875\u9762\u7684\u76f8\u5173\u7ed1\u5b9a\u6309\u94ae\u8fdb\u884c\u7ed1\u5b9a\uff0c\u4e0d\u53ef\u76f4\u63a5\u4fee\u6539",readonly:!0}),(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u5df2\u7ed1\u5b9a\u7684\u90ae\u7bb1\u8d26\u6237"})}),(0,g0.jsx)(v0.pd,{name:"email",value:g,autoComplete:"new-password",placeholder:"\u6b64\u9879\u53ea\u8bfb\uff0c\u9700\u8981\u7528\u6237\u901a\u8fc7\u4e2a\u4eba\u8bbe\u7f6e\u9875\u9762\u7684\u76f8\u5173\u7ed1\u5b9a\u6309\u94ae\u8fdb\u884c\u7ed1\u5b9a\uff0c\u4e0d\u53ef\u76f4\u63a5\u4fee\u6539",readonly:!0})]})})})};function R0(e){switch(e){case 1:return(0,g0.jsx)(v0.vw,{size:"large",children:"\u666e\u901a\u7528\u6237"});case 10:return(0,g0.jsx)(v0.vw,{color:"yellow",size:"large",children:"\u7ba1\u7406\u5458"});case 100:return(0,g0.jsx)(v0.vw,{color:"orange",size:"large",children:"\u8d85\u7ea7\u7ba1\u7406\u5458"});default:return(0,g0.jsx)(v0.vw,{color:"red",size:"large",children:"\u672a\u77e5\u8eab\u4efd"})}}const D0=()=>{const e=[{title:"ID",dataIndex:"id"},{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u5206\u7ec4",dataIndex:"group",render:(e,t,i)=>(0,g0.jsx)("div",{children:b0(e)})},{title:"\u7edf\u8ba1\u4fe1\u606f",dataIndex:"info",render:(e,t,i)=>(0,g0.jsx)("div",{children:(0,g0.jsxs)(v0.$x,{spacing:1,children:[(0,g0.jsx)(v0.m_,{content:"\u5269\u4f59\u989d\u5ea6",children:(0,g0.jsx)(v0.vw,{color:"white",size:"large",children:k0(t.quota)})}),(0,g0.jsx)(v0.m_,{content:"\u5df2\u7528\u989d\u5ea6",children:(0,g0.jsx)(v0.vw,{color:"white",size:"large",children:k0(t.used_quota)})}),(0,g0.jsx)(v0.m_,{content:"\u8c03\u7528\u6b21\u6570",children:(0,g0.jsx)(v0.vw,{color:"white",size:"large",children:_0(t.request_count)})})]})})},{title:"\u89d2\u8272",dataIndex:"role",render:(e,t,i)=>(0,g0.jsx)("div",{children:R0(e)})},{title:"\u72b6\u6001",dataIndex:"status",render:(e,t,i)=>(0,g0.jsx)("div",{children:E(e)})},{title:"",dataIndex:"operate",render:(e,t,i)=>(0,g0.jsxs)("div",{children:[(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(v0.iS,{title:"\u786e\u5b9a\uff1f",okType:"warning",onConfirm:()=>{A(t.username,"promote",t)},children:(0,g0.jsx)(v0.$n,{theme:"light",type:"warning",style:{marginRight:1},children:"\u63d0\u5347"})}),(0,g0.jsx)(v0.iS,{title:"\u786e\u5b9a\uff1f",okType:"warning",onConfirm:()=>{A(t.username,"demote",t)},children:(0,g0.jsx)(v0.$n,{theme:"light",type:"secondary",style:{marginRight:1},children:"\u964d\u7ea7"})}),1===t.status?(0,g0.jsx)(v0.$n,{theme:"light",type:"warning",style:{marginRight:1},onClick:async()=>{A(t.username,"disable",t)},children:"\u7981\u7528"}):(0,g0.jsx)(v0.$n,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async()=>{A(t.username,"enable",t)},disabled:3===t.status,children:"\u542f\u7528"}),(0,g0.jsx)(v0.$n,{theme:"light",type:"tertiary",style:{marginRight:1},onClick:()=>{y(t),m(!0)},children:"\u7f16\u8f91"})]}),(0,g0.jsx)(v0.iS,{title:"\u786e\u5b9a\u662f\u5426\u8981\u5220\u9664\u6b64\u7528\u6237\uff1f",content:"\u786c\u5220\u9664\uff0c\u6b64\u4fee\u6539\u5c06\u4e0d\u53ef\u9006",okType:"danger",position:"left",onConfirm:()=>{A(t.username,"delete",t).then((()=>{C(t.id)}))},children:(0,g0.jsx)(v0.$n,{theme:"light",type:"danger",style:{marginRight:1},children:"\u5220\u9664"})})]})}],[t,i]=(0,P$.useState)([]),[n,r]=(0,P$.useState)(!0),[s,a]=(0,P$.useState)(1),[o,l]=(0,P$.useState)(""),[c,h]=(0,P$.useState)(!1),[d,u]=(0,P$.useState)(y0.re),[p,g]=(0,P$.useState)(!1),[f,m]=(0,P$.useState)(!1),[v,y]=(0,P$.useState)({id:void 0}),[b,_]=(0,P$.useState)(""),[x,S]=(0,P$.useState)(!1),w=e=>{e.length>=s*y0.re?u(e.length+1):u(e.length)},C=e=>{console.log(e);let n=[...t];if(null!=e){let t=n.findIndex((t=>t.id===e));t>-1&&(n.splice(t,1),i(n))}},k=async e=>{const n=await m0.nC.get("/api/user/?p=".concat(e,"&order=").concat(b)),{success:s,message:a,data:o}=n.data;if(s)if(0===e)i(o),w(o);else{let e=t;e.push(...o),i(e),w(e)}else(0,m0.Qg)(a);r(!1)};(0,P$.useEffect)((()=>{k(0).then().catch((e=>{(0,m0.Qg)(e)}))}),[b]);const A=async(e,n,r)=>{const s=await m0.nC.post("/api/user/manage",{username:e,action:n}),{success:a,message:o}=s.data;if(a){(0,m0.Te)("\u64cd\u4f5c\u6210\u529f\u5b8c\u6210\uff01");let e=s.data.data,a=[...t];"delete"===n||(r.status=e.status,r.role=e.role),i(a)}else(0,m0.Qg)(o)},E=e=>{switch(e){case 1:return(0,g0.jsx)(v0.vw,{size:"large",children:"\u5df2\u6fc0\u6d3b"});case 2:return(0,g0.jsx)(v0.vw,{size:"large",color:"red",children:"\u5df2\u5c01\u7981"});default:return(0,g0.jsx)(v0.vw,{size:"large",color:"grey",children:"\u672a\u77e5\u72b6\u6001"})}},T=async()=>{if(""===o)return await k(0),a(1),void _("");h(!0);const e=await m0.nC.get("/api/user/search?keyword=".concat(o)),{success:t,message:n,data:r}=e.data;t?(i(r),a(1)):(0,m0.Qg)(n),h(!1)},O=t.slice((s-1)*y0.re,s*y0.re),P=async()=>{""===o?await k(s-1):await T()},M=(e,t)=>{let{value:i}=t;_(i),a(1),S(!1)};return(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(M0,{refresh:P,visible:p,handleClose:()=>{g(!1)}}),(0,g0.jsx)(I0,{refresh:P,visible:f,handleClose:()=>{m(!1),y({id:void 0})},editingUser:v}),(0,g0.jsx)(v0.lV,{onSubmit:T,children:(0,g0.jsx)(v0.lV.Input,{label:"\u641c\u7d22\u5173\u952e\u5b57",icon:"search",field:"keyword",iconPosition:"left",placeholder:"\u641c\u7d22\u7528\u6237\u7684 ID\uff0c\u7528\u6237\u540d\uff0c\u663e\u793a\u540d\u79f0\uff0c\u4ee5\u53ca\u90ae\u7bb1\u5730\u5740 ...",value:o,loading:c,onChange:e=>(async e=>{l(e.trim())})(e)})}),(0,g0.jsx)(v0.XI,{columns:e,dataSource:O,pagination:{currentPage:s,pageSize:y0.re,total:d,pageSizeOpts:[10,20,50,100],onPageChange:e=>{a(e),e===Math.ceil(t.length/y0.re)+1&&k(e-1).then((e=>{}))}},loading:n}),(0,g0.jsx)(v0.$n,{theme:"light",type:"primary",style:{marginRight:8},onClick:()=>{g(!0)},children:"\u6dfb\u52a0\u7528\u6237"}),(0,g0.jsx)(v0.ms,{trigger:"click",position:"bottomLeft",visible:x,onVisibleChange:e=>S(e),render:(0,g0.jsxs)(v0.ms.Menu,{children:[(0,g0.jsx)(v0.ms.Item,{onClick:()=>M(0,{value:""}),children:"\u9ed8\u8ba4\u6392\u5e8f"}),(0,g0.jsx)(v0.ms.Item,{onClick:()=>M(0,{value:"quota"}),children:"\u6309\u5269\u4f59\u989d\u5ea6\u6392\u5e8f"}),(0,g0.jsx)(v0.ms.Item,{onClick:()=>M(0,{value:"used_quota"}),children:"\u6309\u5df2\u7528\u989d\u5ea6\u6392\u5e8f"}),(0,g0.jsx)(v0.ms.Item,{onClick:()=>M(0,{value:"request_count"}),children:"\u6309\u8bf7\u6c42\u6b21\u6570\u6392\u5e8f"})]}),children:(0,g0.jsx)(v0.$n,{style:{marginLeft:"10px"},children:(e=>{switch(e){case"quota":return"\u6309\u5269\u4f59\u989d\u5ea6\u6392\u5e8f";case"used_quota":return"\u6309\u5df2\u7528\u989d\u5ea6\u6392\u5e8f";case"request_count":return"\u6309\u8bf7\u6c42\u6b21\u6570\u6392\u5e8f";default:return"\u9ed8\u8ba4\u6392\u5e8f"}})(b)})})]})},L0=()=>(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsxs)(v0.Layout,{children:[(0,g0.jsx)(v0.Layout.Header,{children:(0,g0.jsx)("h3",{children:"\u7ba1\u7406\u7528\u6237"})}),(0,g0.jsx)(v0.Layout.Content,{children:(0,g0.jsx)(D0,{})})]})});function j0(e){let{children:t}=e;return localStorage.getItem("user")?t:(0,g0.jsx)(HJ,{to:"/login",state:{from:m0.b6.location}})}var F0=i(72883);function B0(e){var t=e.children,i=e.className,n=e.computer,r=e.color,s=e.floated,a=e.largeScreen,o=e.mobile,l=e.only,c=e.stretched,h=e.tablet,d=e.textAlign,u=e.verticalAlign,p=e.widescreen,g=e.width,f=(0,o0.default)(r,(0,l0.b5)(c,"stretched"),(0,l0.FY)(l,"only"),(0,l0.T9)(d),(0,l0.xm)(s,"floated"),(0,l0.mV)(u),(0,l0.T5)(n,"wide computer"),(0,l0.T5)(a,"wide large screen"),(0,l0.T5)(o,"wide mobile"),(0,l0.T5)(h,"wide tablet"),(0,l0.T5)(p,"wide widescreen"),(0,l0.T5)(g,"wide"),"column",i),m=(0,c0.A)(B0,e),v=(0,h0.A)(B0,e);return P$.createElement(v,(0,a0.A)({},m,{className:f}),t)}B0.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],B0.propTypes={},B0.create=(0,F0.Iy)(B0,(function(e){return{children:e}}));const N0=B0;function z0(e){var t=e.centered,i=e.children,n=e.className,r=e.color,s=e.columns,a=e.divided,o=e.only,l=e.reversed,c=e.stretched,h=e.textAlign,d=e.verticalAlign,u=(0,o0.default)(r,(0,l0.b5)(t,"centered"),(0,l0.b5)(a,"divided"),(0,l0.b5)(c,"stretched"),(0,l0.FY)(o,"only"),(0,l0.FY)(l,"reversed"),(0,l0.T9)(h),(0,l0.mV)(d),(0,l0.T5)(s,"column",!0),"row",n),p=(0,c0.A)(z0,e),g=(0,h0.A)(z0,e);return P$.createElement(g,(0,a0.A)({},p,{className:u}),i)}z0.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],z0.propTypes={};const H0=z0;function V0(e){var t=e.celled,i=e.centered,n=e.children,r=e.className,s=e.columns,a=e.container,o=e.divided,l=e.doubling,c=e.inverted,h=e.padded,d=e.relaxed,u=e.reversed,p=e.stackable,g=e.stretched,f=e.textAlign,m=e.verticalAlign,v=(0,o0.default)("ui",(0,l0.b5)(i,"centered"),(0,l0.b5)(a,"container"),(0,l0.b5)(l,"doubling"),(0,l0.b5)(c,"inverted"),(0,l0.b5)(p,"stackable"),(0,l0.b5)(g,"stretched"),(0,l0.vQ)(t,"celled"),(0,l0.vQ)(o,"divided"),(0,l0.vQ)(h,"padded"),(0,l0.vQ)(d,"relaxed"),(0,l0.FY)(u,"reversed"),(0,l0.T9)(f),(0,l0.mV)(m),(0,l0.T5)(s,"column",!0),"grid",r),y=(0,c0.A)(V0,e),b=(0,h0.A)(V0,e);return P$.createElement(b,(0,a0.A)({},y,{className:v}),n)}V0.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],V0.Column=N0,V0.Row=H0,V0.propTypes={};const U0=V0;var W0=i(48146),G0=i(66565),K0=i(77387),Y0=i(28943),X0=i(61176),q0=i(67720),Z0=i(19127),Q0=i(74074);function $0(e){var t=e.children,i=e.className,n=e.content,r=e.hidden,s=e.visible,a=(0,o0.default)((0,l0.b5)(s,"visible"),(0,l0.b5)(r,"hidden"),"content",i),o=(0,c0.A)($0,e),l=(0,h0.A)($0,e);return P$.createElement(l,(0,a0.A)({},o,{className:a}),d0.gD(t)?n:t)}$0.handledProps=["as","children","className","content","hidden","visible"],$0.propTypes={};const J0=$0;var e1=i(80779),t1=i(86288),i1=i(44973),n1=i(33493);const r1=function(e,t){var i=-1,n=(0,n1.A)(e)?Array(e.length):[];return(0,i1.A)(e,(function(e,r,s){n[++i]=t(e,r,s)})),n};var s1=i(45386);const a1=function(e,t){return((0,s1.A)(e)?e1.A:r1)(e,(0,t1.A)(t,3))};function o1(e){var t=e.attached,i=e.basic,n=e.buttons,r=e.children,s=e.className,a=e.color,o=e.compact,l=e.content,c=e.floated,h=e.fluid,d=e.icon,u=e.inverted,p=e.labeled,g=e.negative,f=e.positive,m=e.primary,v=e.secondary,y=e.size,b=e.toggle,_=e.vertical,x=e.widths,S=(0,o0.default)("ui",a,y,(0,l0.b5)(i,"basic"),(0,l0.b5)(o,"compact"),(0,l0.b5)(h,"fluid"),(0,l0.b5)(d,"icon"),(0,l0.b5)(u,"inverted"),(0,l0.b5)(p,"labeled"),(0,l0.b5)(g,"negative"),(0,l0.b5)(f,"positive"),(0,l0.b5)(m,"primary"),(0,l0.b5)(v,"secondary"),(0,l0.b5)(b,"toggle"),(0,l0.b5)(_,"vertical"),(0,l0.vQ)(t,"attached"),(0,l0.xm)(c,"floated"),(0,l0.T5)(x),"buttons",s),w=(0,c0.A)(o1,e),C=(0,h0.A)(o1,e);return(0,X0.A)(n)?P$.createElement(C,(0,a0.A)({},w,{className:S}),d0.gD(r)?l:r):P$.createElement(C,(0,a0.A)({},w,{className:S}),a1(n,(function(e){return u1.create(e)})))}o1.handledProps=["as","attached","basic","buttons","children","className","color","compact","content","floated","fluid","icon","inverted","labeled","negative","positive","primary","secondary","size","toggle","vertical","widths"],o1.propTypes={};const l1=o1;function c1(e){var t=e.className,i=e.text,n=(0,o0.default)("or",t),r=(0,c0.A)(c1,e),s=(0,h0.A)(c1,e);return P$.createElement(s,(0,a0.A)({},r,{className:n,"data-text":i}))}c1.handledProps=["as","className","text"],c1.propTypes={};const h1=c1;var d1=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).ref=(0,P$.createRef)(),t.computeElementType=function(){var e=t.props,i=e.attached,n=e.label;if(!(0,X0.A)(i)||!(0,X0.A)(n))return"div"},t.computeTabIndex=function(e){var i=t.props,n=i.disabled,r=i.tabIndex;return(0,X0.A)(r)?n?-1:"div"===e?0:void 0:r},t.focus=function(e){return(0,Y0.A)(t.ref.current,"focus",e)},t.handleClick=function(e){t.props.disabled?e.preventDefault():(0,Y0.A)(t.props,"onClick",e,t.props)},t.hasIconClass=function(){var e=t.props,i=e.labelPosition,n=e.children,r=e.content,s=e.icon;return!0===s||s&&(i||d0.gD(n)&&(0,X0.A)(r))},t}(0,K0.A)(t,e);var i=t.prototype;return i.computeButtonAriaRole=function(e){var t=this.props.role;return(0,X0.A)(t)?"button"!==e?"button":void 0:t},i.render=function(){var e=this.props,i=e.active,n=e.animated,r=e.attached,s=e.basic,a=e.children,o=e.circular,l=e.className,c=e.color,h=e.compact,d=e.content,u=e.disabled,p=e.floated,g=e.fluid,f=e.icon,m=e.inverted,v=e.label,y=e.labelPosition,b=e.loading,_=e.negative,x=e.positive,S=e.primary,w=e.secondary,C=e.size,k=e.toggle,A=e.type,E=(0,o0.default)(c,C,(0,l0.b5)(i,"active"),(0,l0.b5)(s,"basic"),(0,l0.b5)(o,"circular"),(0,l0.b5)(h,"compact"),(0,l0.b5)(g,"fluid"),(0,l0.b5)(this.hasIconClass(),"icon"),(0,l0.b5)(m,"inverted"),(0,l0.b5)(b,"loading"),(0,l0.b5)(_,"negative"),(0,l0.b5)(x,"positive"),(0,l0.b5)(S,"primary"),(0,l0.b5)(w,"secondary"),(0,l0.b5)(k,"toggle"),(0,l0.vQ)(n,"animated"),(0,l0.vQ)(r,"attached")),T=(0,o0.default)((0,l0.vQ)(y||!!v,"labeled")),O=(0,o0.default)((0,l0.b5)(u,"disabled"),(0,l0.xm)(p,"floated")),P=(0,c0.A)(t,this.props),M=(0,h0.A)(t,this.props,this.computeElementType),I=this.computeTabIndex(M);if(!(0,X0.A)(v)){var R=(0,o0.default)("ui",E,"button",l),D=(0,o0.default)("ui",T,"button",l,O),L=Q0.A.create(v,{defaultProps:{basic:!0,pointing:"left"===y?"right":"left"},autoGenerateKey:!1});return P$.createElement(M,(0,a0.A)({},P,{className:D,onClick:this.handleClick}),"left"===y&&L,P$.createElement(q0.o,{innerRef:this.ref},P$.createElement("button",{className:R,"aria-pressed":k?!!i:void 0,disabled:u,type:A,tabIndex:I},Z0.A.create(f,{autoGenerateKey:!1})," ",d)),("right"===y||!y)&&L)}var j=(0,o0.default)("ui",E,O,T,"button",l),F=!d0.gD(a),B=this.computeButtonAriaRole(M);return P$.createElement(q0.o,{innerRef:this.ref},P$.createElement(M,(0,a0.A)({},P,{className:j,"aria-pressed":k?!!i:void 0,disabled:u&&"button"===M||void 0,onClick:this.handleClick,role:B,type:A,tabIndex:I}),F&&a,!F&&Z0.A.create(f,{autoGenerateKey:!1}),!F&&d))},t}(P$.Component);d1.handledProps=["active","animated","as","attached","basic","children","circular","className","color","compact","content","disabled","floated","fluid","icon","inverted","label","labelPosition","loading","negative","onClick","positive","primary","role","secondary","size","tabIndex","toggle","type"],d1.propTypes={},d1.defaultProps={as:"button"},d1.Content=J0,d1.Group=l1,d1.Or=h1,d1.create=(0,F0.Iy)(d1,(function(e){return{content:e}}));const u1=d1;var p1=i(7015),g1=i(25920);const f1=function(e,t,i){"__proto__"==t&&g1.A?(0,g1.A)(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i};var m1=i(55009),v1=Object.prototype.hasOwnProperty;const y1=function(e,t,i){var n=e[t];v1.call(e,t)&&(0,m1.A)(n,i)&&(void 0!==i||t in e)||f1(e,t,i)};var b1=i(43228),_1=i(75884),x1=i(37664),S1=i(26548);const w1=function(e,t,i,n){if(!(0,x1.A)(e))return e;for(var r=-1,s=(t=(0,b1.A)(t,e)).length,a=s-1,o=e;null!=o&&++r<s;){var l=(0,S1.A)(t[r]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=a){var h=o[l];void 0===(c=n?n(h,l,o):void 0)&&(c=(0,x1.A)(h)?h:(0,_1.A)(t[r+1])?[]:{})}y1(o,l,c),o=o[l]}return e};const C1=function(e,t,i){return null==e?e:w1(e,t,i)};var k1=i(35987),A1=i(12460),E1=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).inputRef=(0,P$.createRef)(),t.labelRef=(0,P$.createRef)(),t.canToggle=function(){var e=t.props,i=e.disabled,n=e.radio,r=e.readOnly,s=t.state.checked;return!i&&!r&&!(n&&s)},t.computeTabIndex=function(){var e=t.props,i=e.disabled,n=e.tabIndex;return(0,X0.A)(n)?i?-1:0:n},t.handleClick=function(e){var i=t.props.id,n=t.state,r=n.checked,s=n.indeterminate,a=(0,Y0.A)(t.inputRef.current,"contains",e.target),o=(0,Y0.A)(t.labelRef.current,"contains",e.target),l=!o&&!a,c=!(0,X0.A)(i);o&&c||(0,Y0.A)(t.props,"onClick",e,(0,a0.A)({},t.props,{checked:!r,indeterminate:!!s})),t.isClickFromMouse&&(t.isClickFromMouse=!1,o&&!c&&t.handleChange(e),l&&t.handleChange(e),o&&c&&e.stopPropagation())},t.handleChange=function(e){var i=t.state.checked;t.canToggle()&&((0,Y0.A)(t.props,"onChange",e,(0,a0.A)({},t.props,{checked:!i,indeterminate:!1})),t.setState({checked:!i,indeterminate:!1}))},t.handleMouseDown=function(e){var i=t.state,n=i.checked,r=i.indeterminate;(0,Y0.A)(t.props,"onMouseDown",e,(0,a0.A)({},t.props,{checked:!!n,indeterminate:!!r})),e.defaultPrevented||(0,Y0.A)(t.inputRef.current,"focus"),e.preventDefault()},t.handleMouseUp=function(e){var i=t.state,n=i.checked,r=i.indeterminate;t.isClickFromMouse=!0,(0,Y0.A)(t.props,"onMouseUp",e,(0,a0.A)({},t.props,{checked:!!n,indeterminate:!!r}))},t.setIndeterminate=function(){var e=t.state.indeterminate;C1(t.inputRef,"current.indeterminate",!!e)},t}(0,K0.A)(t,e);var i=t.prototype;return i.componentDidMount=function(){this.setIndeterminate()},i.componentDidUpdate=function(){this.setIndeterminate()},i.render=function(){var e=this.props,i=e.className,n=e.disabled,r=e.label,s=e.id,a=e.name,o=e.radio,l=e.readOnly,c=e.slider,h=e.toggle,d=e.type,u=e.value,p=this.state,g=p.checked,f=p.indeterminate,m=(0,o0.default)("ui",(0,l0.b5)(g,"checked"),(0,l0.b5)(n,"disabled"),(0,l0.b5)(f,"indeterminate"),(0,l0.b5)((0,X0.A)(r),"fitted"),(0,l0.b5)(o,"radio"),(0,l0.b5)(l,"read-only"),(0,l0.b5)(c,"slider"),(0,l0.b5)(h,"toggle"),"checkbox",i),v=(0,c0.A)(t,this.props),y=(0,h0.A)(t,this.props),b=(0,k1.yT)(v,{htmlProps:k1.ui}),_=b[0],x=b[1],S=(0,F0.SH)(r,{defaultProps:{htmlFor:s},autoGenerateKey:!1})||P$.createElement("label",{htmlFor:s});return P$.createElement(y,(0,a0.A)({},x,{className:m,onClick:this.handleClick,onChange:this.handleChange,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),P$.createElement(q0.o,{innerRef:this.inputRef},P$.createElement("input",(0,a0.A)({},_,{checked:g,className:"hidden",disabled:n,id:s,name:a,readOnly:!0,tabIndex:this.computeTabIndex(),type:d,value:u}))),P$.createElement(q0.o,{innerRef:this.labelRef},S))},t}(A1.A);function T1(e){var t=e.slider,i=e.toggle,n=e.type,r=(0,c0.A)(T1,e),s=!(t||i)||void 0;return P$.createElement(E1,(0,a0.A)({},r,{type:n,radio:s,slider:t,toggle:i}))}E1.handledProps=["as","checked","className","defaultChecked","defaultIndeterminate","disabled","fitted","id","indeterminate","label","name","onChange","onClick","onMouseDown","onMouseUp","radio","readOnly","slider","tabIndex","toggle","type","value"],E1.propTypes={},E1.defaultProps={type:"checkbox"},E1.autoControlledProps=["checked","indeterminate"],T1.handledProps=["slider","toggle","type"],T1.propTypes={},T1.defaultProps={type:"radio"};const O1=T1;function P1(e){var t=e.children,i=e.className,n=e.content,r=e.control,s=e.disabled,a=e.error,o=e.inline,l=e.label,c=e.required,h=e.type,d=e.width,u=e.id,p=(0,o0.default)((0,l0.b5)(s,"disabled"),(0,l0.b5)(a,"error"),(0,l0.b5)(o,"inline"),(0,l0.b5)(c,"required"),(0,l0.T5)(d,"wide"),"field",i),g=(0,c0.A)(P1,e),f=(0,h0.A)(P1,e),m=(0,p1.A)(a,"pointing","above"),v=Q0.A.create(a,{autoGenerateKey:!1,defaultProps:{prompt:!0,pointing:m,id:u?u+"-error-message":void 0,role:"alert","aria-atomic":!0}}),y=("below"===m||"right"===m)&&v,b=("above"===m||"left"===m)&&v;if((0,X0.A)(r))return(0,X0.A)(l)?P$.createElement(f,(0,a0.A)({},g,{className:p,id:u}),d0.gD(t)?n:t):P$.createElement(f,(0,a0.A)({},g,{className:p,id:u}),y,(0,F0.SH)(l,{autoGenerateKey:!1}),b);var _={"aria-describedby":u&&a?u+"-error-message":null,"aria-invalid":!!a||void 0},x=(0,a0.A)({},g,{content:n,children:t,disabled:s,required:c,type:h,id:u});return"input"!==r||"checkbox"!==h&&"radio"!==h?r===E1||r===O1?P$.createElement(f,{className:p},y,(0,P$.createElement)(r,(0,a0.A)({},_,x,{label:l})),b):P$.createElement(f,{className:p},(0,F0.SH)(l,{defaultProps:{htmlFor:u},autoGenerateKey:!1}),y,(0,P$.createElement)(r,(0,a0.A)({},_,x)),b):P$.createElement(f,{className:p},P$.createElement("label",null,y,(0,P$.createElement)(r,(0,a0.A)({},_,x))," ",l,b))}P1.handledProps=["as","children","className","content","control","disabled","error","id","inline","label","required","type","width"],P1.propTypes={};const M1=P1;function I1(e){var t=e.control,i=(0,c0.A)(I1,e),n=(0,h0.A)(I1,e);return P$.createElement(n,(0,a0.A)({},i,{control:t}))}I1.handledProps=["as","control"],I1.propTypes={},I1.defaultProps={as:M1,control:u1};const R1=I1;function D1(e){var t=e.control,i=(0,c0.A)(D1,e),n=(0,h0.A)(D1,e);return P$.createElement(n,(0,a0.A)({},i,{control:t}))}D1.handledProps=["as","control"],D1.propTypes={},D1.defaultProps={as:M1,control:E1};const L1=D1;var j1=i(70884);const F1=function(e){for(var t=-1,i=null==e?0:e.length,n=0,r=[];++t<i;){var s=e[t];s&&(r[n++]=s)}return r};const B1=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0};const N1=function(e,t){var i=!0;return(0,i1.A)(e,(function(e,n,r){return i=!!t(e,n,r)})),i};var z1=i(58635);const H1=function(e,t,i){var n=(0,s1.A)(e)?B1:N1;return i&&(0,z1.A)(e,t,i)&&(t=void 0),n(e,(0,t1.A)(t,3))};var V1=i(5347),U1=i(21512),W1=i(48784),G1=i(17328),K1=i(88948);const Y1=function(e,t,i,n){var r=-1,s=U1.A,a=!0,o=e.length,l=[],c=t.length;if(!o)return l;i&&(t=(0,e1.A)(t,(0,G1.A)(i))),n?(s=W1.A,a=!1):t.length>=200&&(s=K1.A,a=!1,t=new V1.A(t));e:for(;++r<o;){var h=e[r],d=null==i?h:i(h);if(h=n||0!==h?h:0,a&&d===d){for(var u=c;u--;)if(t[u]===d)continue e;l.push(h)}else s(t,d,n)||l.push(h)}return l};var X1=i(61869),q1=i(53239);const Z1=function(e){return(0,q1.A)(e)&&(0,n1.A)(e)};var Q1=(0,X1.A)((function(e,t){return Z1(e)?Y1(e,t):[]}));const $1=Q1;var J1=i(99266);const e2=function(e){return function(t,i,n){var r=Object(t);if(!(0,n1.A)(t)){var s=(0,t1.A)(i,3);t=(0,J1.A)(t),i=function(e){return s(r[e],e,r)}}var a=e(t,i,n);return a>-1?r[s?t[a]:a]:void 0}};var t2=i(82782),i2=i(46230),n2=Math.max;const r2=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=null==i?0:(0,i2.A)(i);return r<0&&(r=n2(n+r,0)),(0,t2.A)(e,(0,t1.A)(t,3),r)};const s2=e2(r2);var a2=i(80425);const o2=function(e,t,i){var n=null==e?0:e.length;return n?(t=n-(t=i||void 0===t?1:(0,i2.A)(t)),(0,a2.A)(e,0,t<0?0:t)):[]};var l2=i(17235),c2=i(37280),h2=i(9500),d2=i(81375),u2=i(20286),p2=i(9993),g2=Object.prototype.hasOwnProperty;const f2=function(e){if(null==e)return!0;if((0,n1.A)(e)&&((0,s1.A)(e)||"string"==typeof e||"function"==typeof e.splice||(0,d2.A)(e)||(0,p2.A)(e)||(0,h2.A)(e)))return!e.length;var t=(0,c2.A)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,u2.A)(e))return!(0,l2.A)(e).length;for(var i in e)if(g2.call(e,i))return!1;return!0};var m2=i(93678);const v2=(0,i(53718).A)("length");var y2=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const b2=function(e){return y2.test(e)};var _2="\\ud800-\\udfff",x2="["+_2+"]",S2="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",w2="\\ud83c[\\udffb-\\udfff]",C2="[^"+_2+"]",k2="(?:\\ud83c[\\udde6-\\uddff]){2}",A2="[\\ud800-\\udbff][\\udc00-\\udfff]",E2="(?:"+S2+"|"+w2+")"+"?",T2="[\\ufe0e\\ufe0f]?",O2=T2+E2+("(?:\\u200d(?:"+[C2,k2,A2].join("|")+")"+T2+E2+")*"),P2="(?:"+[C2+S2+"?",S2,k2,A2,x2].join("|")+")",M2=RegExp(w2+"(?="+w2+")|"+P2+O2,"g");const I2=function(e){for(var t=M2.lastIndex=0;M2.test(e);)++t;return t};const R2=function(e){return b2(e)?I2(e):v2(e)};const D2=function(e){if(null==e)return 0;if((0,n1.A)(e))return(0,m2.A)(e)?R2(e):e.length;var t=(0,c2.A)(e);return"[object Map]"==t||"[object Set]"==t?e.size:(0,l2.A)(e).length};var L2=i(97269),j2=i(75622),F2=j2.A?j2.A.isConcatSpreadable:void 0;const B2=function(e){return(0,s1.A)(e)||(0,h2.A)(e)||!!(F2&&e&&e[F2])};const N2=function e(t,i,n,r,s){var a=-1,o=t.length;for(n||(n=B2),s||(s=[]);++a<o;){var l=t[a];i>0&&n(l)?i>1?e(l,i-1,n,r,s):(0,L2.A)(s,l):r||(s[s.length]=l)}return s};var z2=(0,X1.A)((function(e,t){return Z1(e)?Y1(e,N2(t,1,Z1,!0)):[]}));const H2=z2;var V2=i(51837);const U2=(0,X1.A)((function(e){return(0,V2.A)(N2(e,1,Z1,!0))}));var W2=i(3219),G2=i(6772),K2=i(30864);const Y2=function(e,t){return(0,K2.A)(e,t)};var X2=i(64067),q2=i(63367);const Z2=function(e,t,i){for(var n=-1,r=t.length,s={};++n<r;){var a=t[n],o=(0,q2.A)(e,a);i(o,a)&&w1(s,(0,b1.A)(a,e),o)}return s};var Q2=i(83e3);const $2=function(e,t){return Z2(e,t,(function(t,i){return(0,Q2.A)(e,i)}))};const J2=function(e){return(null==e?0:e.length)?N2(e,1):[]};var e3=i(70070),t3=i(17633);var i3=function(e){return(0,t3.A)((0,e3.A)(e,void 0,J2),e+"")}((function(e,t){return null==e?{}:$2(e,t)}));const n3=i3;var r3=i(4173),s3=i.n(r3),a3=i(93090),o3=i.n(a3),l3=i(17324),c3=i.n(l3),h3=i(57233),d3=function(e){function t(){return e.apply(this,arguments)||this}return(0,K0.A)(t,e),t.prototype.render=function(){var e=this.props,i=e.className,n=e.name,r=(0,o0.default)(n,"flag",i),s=(0,c0.A)(t,this.props),a=(0,h0.A)(t,this.props);return P$.createElement(a,(0,a0.A)({},s,{className:r}))},t}(P$.PureComponent);d3.handledProps=["as","className","name"],d3.propTypes={},d3.defaultProps={as:"i"},d3.create=(0,F0.Iy)(d3,(function(e){return{name:e}}));const u3=d3;function p3(e){var t=e.className,i=(0,o0.default)("divider",t),n=(0,c0.A)(p3,e),r=(0,h0.A)(p3,e);return P$.createElement(r,(0,a0.A)({},n,{className:i}))}p3.handledProps=["as","className"],p3.propTypes={};const g3=p3;var f3=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleClick=function(e){(0,Y0.A)(t.props,"onClick",e,t.props)},t}return(0,K0.A)(t,e),t.prototype.render=function(){var e=this.props,i=e.active,n=e.children,r=e.className,s=e.content,a=e.disabled,o=e.description,l=e.flag,c=e.icon,h=e.image,d=e.label,u=e.selected,p=e.text,g=(0,o0.default)((0,l0.b5)(i,"active"),(0,l0.b5)(a,"disabled"),(0,l0.b5)(u,"selected"),"item",r),f=(0,X0.A)(c)?d0.y(n,"DropdownMenu")&&"dropdown":c,m=(0,c0.A)(t,this.props),v=(0,h0.A)(t,this.props),y={role:"option","aria-disabled":a,"aria-checked":i,"aria-selected":u};if(!d0.gD(n))return P$.createElement(v,(0,a0.A)({},m,y,{className:g,onClick:this.handleClick}),n);var b=u3.create(l,{autoGenerateKey:!1}),_=Z0.A.create(f,{autoGenerateKey:!1}),x=G0.A.create(h,{autoGenerateKey:!1}),S=Q0.A.create(d,{autoGenerateKey:!1}),w=(0,F0.Qf)("span",(function(e){return{children:e}}),o,{defaultProps:{className:"description"},autoGenerateKey:!1}),C=(0,F0.Qf)("span",(function(e){return{children:e}}),d0.gD(s)?p:s,{defaultProps:{className:"text"},autoGenerateKey:!1});return P$.createElement(v,(0,a0.A)({},m,y,{className:g,onClick:this.handleClick}),x,_,b,S,w,C)},t}(P$.Component);f3.handledProps=["active","as","children","className","content","description","disabled","flag","icon","image","label","onClick","selected","text","value"],f3.propTypes={},f3.create=(0,F0.Iy)(f3,(function(e){return e}));const m3=f3;function v3(e){var t=e.children,i=e.className,n=e.content,r=e.icon,s=(0,o0.default)("header",i),a=(0,c0.A)(v3,e),o=(0,h0.A)(v3,e);return d0.gD(t)?P$.createElement(o,(0,a0.A)({},a,{className:s}),Z0.A.create(r,{autoGenerateKey:!1}),n):P$.createElement(o,(0,a0.A)({},a,{className:s}),t)}v3.handledProps=["as","children","className","content","icon"],v3.propTypes={},v3.create=(0,F0.Iy)(v3,(function(e){return{content:e}}));const y3=v3;function b3(e){var t=e.children,i=e.className,n=e.content,r=e.direction,s=e.open,a=e.scrolling,o=(0,o0.default)(r,(0,l0.b5)(s,"visible"),(0,l0.b5)(a,"scrolling"),"menu transition",i),l=(0,c0.A)(b3,e),c=(0,h0.A)(b3,e);return P$.createElement(c,(0,a0.A)({},l,{className:o}),d0.gD(t)?n:t)}b3.handledProps=["as","children","className","content","direction","open","scrolling"],b3.propTypes={};const _3=b3;var x3=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleChange=function(e){var i=(0,p1.A)(e,"target.value");(0,Y0.A)(t.props,"onChange",e,(0,a0.A)({},t.props,{value:i}))},t}return(0,K0.A)(t,e),t.prototype.render=function(){var e=this.props,i=e.autoComplete,n=e.className,r=e.tabIndex,s=e.type,a=e.value,o=(0,o0.default)("search",n),l=(0,c0.A)(t,this.props);return P$.createElement("input",(0,a0.A)({},l,{"aria-autocomplete":"list",autoComplete:i,className:o,onChange:this.handleChange,tabIndex:r,type:s,value:a}))},t}(P$.Component);x3.handledProps=["as","autoComplete","className","tabIndex","type","value"],x3.propTypes={},x3.defaultProps={autoComplete:"off",type:"text"},x3.create=(0,F0.Iy)(x3,(function(e){return{type:e}}));const S3=x3;function w3(e){var t=e.children,i=e.className,n=e.content,r=(0,o0.default)("divider",i),s=(0,c0.A)(w3,e),a=(0,h0.A)(w3,e);return P$.createElement(a,(0,a0.A)({"aria-atomic":!0,"aria-live":"polite",role:"alert"},s,{className:r}),d0.gD(t)?n:t)}w3.handledProps=["as","children","className","content"],w3.propTypes={},w3.create=(0,F0.Iy)(w3,(function(e){return{content:e}}));const C3=w3;var k3=i(44953),A3=i(93434),E3=/[\\^$.*+?()[\]{}|]/g,T3=RegExp(E3.source);const O3=function(e){return(e=(0,A3.A)(e))&&T3.test(e)?e.replace(E3,"\\$&"):e};const P3=function(e){return function(t){return null==e?void 0:e[t]}};const M3=P3({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"});var I3=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,R3=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");const D3=function(e){return(e=(0,A3.A)(e))&&e.replace(I3,M3).replace(R3,"")};var L3=i(58923);const j3=function(e,t){var i=[];return(0,i1.A)(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i};const F3=function(e,t){return((0,s1.A)(e)?L3.A:j3)(e,(0,t1.A)(t,3))};function B3(e){var t=e.additionLabel,i=e.additionPosition,n=e.allowAdditions,r=e.deburr,s=e.multiple,a=e.options,o=e.search,l=e.searchQuery,c=e.value,h=a;if(s&&(h=F3(h,(function(e){return!(0,j1.A)(c,e.value)}))),o&&l)if((0,X2.A)(o))h=o(h,l);else{var d=r?D3(l):l,u=new RegExp(O3(d),"i");h=F3(h,(function(e){return u.test(r?D3(e.text):e.text)}))}if(n&&o&&l&&!(0,k3.A)(h,{text:l})){var p={key:"addition",text:[P$.isValidElement(t)?P$.cloneElement(t,{key:"addition-label"}):t||"",P$.createElement("b",{key:"addition-query"},l)],value:l,className:"addition","data-additional":!0};"top"===i?h.unshift(p):h.push(p)}return h}B3.handledProps=[];const N3=function(e,t,i,n){var r=-1,s=null==e?0:e.length;for(n&&s&&(i=e[++r]);++r<s;)i=t(i,e[r],r,e);return i};const z3=function(e,t,i,n,r){return r(e,(function(e,r,s){i=n?(n=!1,e):t(i,e,r,s)})),i};const H3=function(e,t,i){var n=(0,s1.A)(e)?N3:z3,r=arguments.length<3;return n(e,(0,t1.A)(t,4),i,r,i1.A)};function V3(e){var t,i=e.additionLabel,n=e.additionPosition,r=e.allowAdditions,s=e.deburr,a=e.multiple,o=e.options,l=e.search,c=e.searchQuery,h=e.selectedIndex,d=e.value,u=B3({value:d,options:o,searchQuery:c,additionLabel:i,additionPosition:n,allowAdditions:r,deburr:s,multiple:a,search:l}),p=H3(u,(function(e,t,i){return t.disabled||e.push(i),e}),[]);if(!h||h<0){var g=p[0];t=a?g:r2(u,["value",d])||p[0]}else if(a)t=s2(p,(function(e){return e>=h})),h>=u.length-1&&(t=p[p.length-1]);else{var f=r2(u,["value",d]);t=(0,j1.A)(p,f)?f:void 0}return(!t||t<0)&&(t=p[0]),t}var U3=function(e,t){return(0,X0.A)(e)?t:e},W3=function(e){return e?e.map((function(e){return n3(e,["key","value"])})):e};function G3(e){var t=e.flag,i=e.image,n=e.text;return(0,X2.A)(n)?n:{content:P$.createElement(P$.Fragment,null,u3.create(t),G0.A.create(i),n)}}var K3=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).searchRef=(0,P$.createRef)(),t.sizerRef=(0,P$.createRef)(),t.ref=(0,P$.createRef)(),t.handleChange=function(e,i){(0,Y0.A)(t.props,"onChange",e,(0,a0.A)({},t.props,{value:i}))},t.closeOnChange=function(e){var i=t.props,n=i.closeOnChange,r=i.multiple;((0,G2.A)(n)?!r:n)&&t.close(e,W2.A)},t.closeOnEscape=function(e){t.props.closeOnEscape&&o3().getCode(e)===o3().Escape&&(e.preventDefault(),t.close(e))},t.moveSelectionOnKeyDown=function(e){var i,n=t.props,r=n.multiple,s=n.selectOnNavigation;if(t.state.open){var a=((i={})[o3().ArrowDown]=1,i[o3().ArrowUp]=-1,i)[o3().getCode(e)];if(void 0!==a){e.preventDefault();var o=t.getSelectedIndexAfterMove(a);!r&&s&&t.makeSelectedItemActive(e,o),t.setState({selectedIndex:o})}}},t.openOnSpace=function(e){var i,n,r,s=t.state.focus&&!t.state.open&&o3().getCode(e)===o3().Spacebar,a="INPUT"!==(null==(i=e.target)?void 0:i.tagName)&&"TEXTAREA"!==(null==(n=e.target)?void 0:n.tagName)&&!0!==(null==(r=e.target)?void 0:r.isContentEditable);s&&(a&&e.preventDefault(),t.open(e))},t.openOnArrow=function(e){var i=t.state,n=i.focus,r=i.open;if(n&&!r){var s=o3().getCode(e);s!==o3().ArrowDown&&s!==o3().ArrowUp||(e.preventDefault(),t.open(e))}},t.makeSelectedItemActive=function(e,i){var n=t.state,r=n.open,s=n.value,a=t.props.multiple,o=t.getSelectedItem(i),l=(0,p1.A)(o,"value"),c=(0,p1.A)(o,"disabled");if((0,X0.A)(l)||!r||c)return s;var h=a?U2(s,[l]):l;return(a?!!H2(h,s).length:h!==s)&&(t.setState({value:h}),t.handleChange(e,h),o["data-additional"]&&(0,Y0.A)(t.props,"onAddItem",e,(0,a0.A)({},t.props,{value:l}))),s},t.selectItemOnEnter=function(e){var i=t.props.search,n=t.state,r=n.open,s=n.selectedIndex;if(r&&(o3().getCode(e)===o3().Enter||!i&&o3().getCode(e)===o3().Spacebar)){e.preventDefault();var a=D2(B3({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search}));if(!i||0!==a){var o=t.makeSelectedItemActive(e,s);t.setState({selectedIndex:V3({additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search,selectedIndex:s,value:o,options:t.props.options,searchQuery:""})}),t.closeOnChange(e),t.clearSearchQuery(),i&&(0,Y0.A)(t.searchRef.current,"focus")}}},t.removeItemOnBackspace=function(e){var i=t.props,n=i.multiple,r=i.search,s=t.state,a=s.searchQuery,o=s.value;if(o3().getCode(e)===o3().Backspace&&!a&&r&&n&&!f2(o)){e.preventDefault();var l=o2(o);t.setState({value:l}),t.handleChange(e,l)}},t.closeOnDocumentClick=function(e){t.props.closeOnBlur&&(t.ref.current&&(0,h3.A)(t.ref.current,e)||t.close())},t.handleMouseDown=function(e){t.isMouseDown=!0,(0,Y0.A)(t.props,"onMouseDown",e,t.props),document.addEventListener("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,document.removeEventListener("mouseup",t.handleDocumentMouseUp)},t.handleClick=function(e){var i=t.props,n=i.minCharacters,r=i.search,s=t.state,a=s.open,o=s.searchQuery;if((0,Y0.A)(t.props,"onClick",e,t.props),e.stopPropagation(),!r)return t.toggle(e);a?(0,Y0.A)(t.searchRef.current,"focus"):o.length>=n||1===n?t.open(e):(0,Y0.A)(t.searchRef.current,"focus")},t.handleIconClick=function(e){var i=t.props.clearable,n=t.hasValue();(0,Y0.A)(t.props,"onClick",e,t.props),e.stopPropagation(),i&&n?t.clearValue(e):t.toggle(e)},t.handleItemClick=function(e,i){var n=t.props,r=n.multiple,s=n.search,a=t.state.value,o=i.value;if(e.stopPropagation(),(r||i.disabled)&&e.nativeEvent.stopImmediatePropagation(),!i.disabled){var l=i["data-additional"],c=r?U2(t.state.value,[o]):o;(r?!!H2(c,a).length:c!==a)&&(t.setState({value:c}),t.handleChange(e,c)),t.clearSearchQuery(),s?(0,Y0.A)(t.searchRef.current,"focus"):(0,Y0.A)(t.ref.current,"focus"),t.closeOnChange(e),l&&(0,Y0.A)(t.props,"onAddItem",e,(0,a0.A)({},t.props,{value:o}))}},t.handleFocus=function(e){t.state.focus||((0,Y0.A)(t.props,"onFocus",e,t.props),t.setState({focus:!0}))},t.handleBlur=function(e){var i=(0,p1.A)(e,"currentTarget");if(!i||!i.contains(document.activeElement)){var n=t.props,r=n.closeOnBlur,s=n.multiple,a=n.selectOnBlur;t.isMouseDown||((0,Y0.A)(t.props,"onBlur",e,t.props),a&&!s&&(t.makeSelectedItemActive(e,t.state.selectedIndex),r&&t.close()),t.setState({focus:!1}),t.clearSearchQuery())}},t.handleSearchChange=function(e,i){var n=i.value;e.stopPropagation();var r=t.props.minCharacters,s=t.state.open,a=n;(0,Y0.A)(t.props,"onSearchChange",e,(0,a0.A)({},t.props,{searchQuery:a})),t.setState({searchQuery:a,selectedIndex:0}),!s&&a.length>=r?t.open():s&&1!==r&&a.length<r&&t.close()},t.handleKeyDown=function(e){t.moveSelectionOnKeyDown(e),t.openOnArrow(e),t.openOnSpace(e),t.selectItemOnEnter(e),(0,Y0.A)(t.props,"onKeyDown",e)},t.getSelectedItem=function(e){var i=B3({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});return(0,p1.A)(i,"["+e+"]")},t.getItemByValue=function(e){var i=t.props.options;return s2(i,{value:e})},t.getDropdownAriaOptions=function(){var e=t.props,i=e.loading,n=e.disabled,r=e.search,s=e.multiple,a={role:r?"combobox":"listbox","aria-busy":i,"aria-disabled":n,"aria-expanded":!!t.state.open};return"listbox"===a.role&&(a["aria-multiselectable"]=s),a},t.clearSearchQuery=function(){var e=t.state.searchQuery;void 0!==e&&""!==e&&t.setState({searchQuery:""})},t.handleLabelClick=function(e,i){e.stopPropagation(),t.setState({selectedLabel:i.value}),(0,Y0.A)(t.props,"onLabelClick",e,i)},t.handleLabelRemove=function(e,i){e.stopPropagation();var n=t.state.value,r=$1(n,i.value);t.setState({value:r}),t.handleChange(e,r)},t.getSelectedIndexAfterMove=function(e,i){void 0===i&&(i=t.state.selectedIndex);var n=B3({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(void 0!==n&&!H1(n,"disabled")){var r=n.length-1,s=i+e;return!t.props.wrapSelection&&(s>r||s<0)?s=i:s>r?s=0:s<0&&(s=r),n[s].disabled?t.getSelectedIndexAfterMove(e,s):s}},t.handleIconOverrides=function(e){var i=t.props.clearable;return{className:(0,o0.default)(i&&t.hasValue()&&"clear",e.className),onClick:function(i){(0,Y0.A)(e,"onClick",i,e),t.handleIconClick(i)}}},t.clearValue=function(e){var i=t.props.multiple?[]:"";t.setState({value:i}),t.handleChange(e,i)},t.computeSearchInputTabIndex=function(){var e=t.props,i=e.disabled,n=e.tabIndex;return(0,X0.A)(n)?i?-1:0:n},t.computeSearchInputWidth=function(){var e=t.state.searchQuery;if(t.sizerRef.current&&e){t.sizerRef.current.style.display="inline",t.sizerRef.current.textContent=e;var i=Math.ceil(t.sizerRef.current.getBoundingClientRect().width);return t.sizerRef.current.style.removeProperty("display"),i}},t.computeTabIndex=function(){var e=t.props,i=e.disabled,n=e.search,r=e.tabIndex;if(!n)return i?-1:(0,X0.A)(r)?0:r},t.handleSearchInputOverrides=function(e){return{onChange:function(i,n){(0,Y0.A)(e,"onChange",i,n),t.handleSearchChange(i,n)}}},t.hasValue=function(){var e=t.props.multiple,i=t.state.value;return e?!f2(i):!(0,X0.A)(i)&&""!==i},t.scrollSelectedItemIntoView=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var i=e.querySelector(".item.selected");if(i){var n=i.offsetTop<e.scrollTop,r=i.offsetTop+i.clientHeight>e.scrollTop+e.clientHeight;n?e.scrollTop=i.offsetTop:r&&(e.scrollTop=i.offsetTop+i.clientHeight-e.clientHeight)}}}},t.setOpenDirection=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var i=t.ref.current.getBoundingClientRect(),n=e.clientHeight,r=document.documentElement.clientHeight-i.top-i.height-n,s=i.top-n,a=r<0&&s>r;!a!==!t.state.upward&&t.setState({upward:a})}}},t.open=function(e,i){void 0===e&&(e=null),void 0===i&&(i=!0);var n=t.props,r=n.disabled,s=n.search;r||(s&&(0,Y0.A)(t.searchRef.current,"focus"),(0,Y0.A)(t.props,"onOpen",e,t.props),i&&t.setState({open:!0}),t.scrollSelectedItemIntoView())},t.close=function(e,i){void 0===i&&(i=t.handleClose),t.state.open&&((0,Y0.A)(t.props,"onClose",e,t.props),t.setState({open:!1},i))},t.handleClose=function(){var e=document.activeElement===t.searchRef.current;!e&&t.ref.current&&t.ref.current.blur();var i=document.activeElement===t.ref.current,n=e||i;t.setState({focus:n})},t.toggle=function(e){return t.state.open?t.close(e):t.open(e)},t.renderText=function(){var e,i=t.props,n=i.multiple,r=i.placeholder,s=i.search,a=i.text,o=t.state,l=o.searchQuery,c=o.selectedIndex,h=o.value,d=o.open,u=t.hasValue(),p=(0,o0.default)(r&&!u&&"default","text",s&&l&&"filtered"),g=r;return a?g=a:d&&!n?e=t.getSelectedItem(c):u&&(e=t.getItemByValue(h)),C3.create(e?G3(e):g,{defaultProps:{className:p}})},t.renderSearchInput=function(){var e=t.props,i=e.search,n=e.searchInput,r=t.state.searchQuery;return i&&P$.createElement(q0.o,{innerRef:t.searchRef},S3.create(n,{defaultProps:{style:{width:t.computeSearchInputWidth()},tabIndex:t.computeSearchInputTabIndex(),value:r},overrideProps:t.handleSearchInputOverrides}))},t.renderSearchSizer=function(){var e=t.props,i=e.search,n=e.multiple;return i&&n&&P$.createElement("span",{className:"sizer",ref:t.sizerRef})},t.renderLabels=function(){var e=t.props,i=e.multiple,n=e.renderLabel,r=t.state,s=r.selectedLabel,a=r.value;if(i&&!f2(a)){var o=a1(a,t.getItemByValue);return a1(F1(o),(function(e,i){var r={active:e.value===s,as:"a",key:U3(e.key,e.value),onClick:t.handleLabelClick,onRemove:t.handleLabelRemove,value:e.value};return Q0.A.create(n(e,i,r),{defaultProps:r})}))}},t.renderOptions=function(){var e=t.props,i=e.lazyLoad,n=e.multiple,r=e.search,s=e.noResultsMessage,a=t.state,o=a.open,l=a.selectedIndex,c=a.value;if(i&&!o)return null;var h=B3({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(null!==s&&r&&f2(h))return P$.createElement("div",{className:"message"},s);var d=n?function(e){return(0,j1.A)(c,e)}:function(e){return e===c};return a1(h,(function(e,i){return m3.create((0,a0.A)({active:d(e.value),selected:l===i},e,{key:U3(e.key,e.value),style:(0,a0.A)({},e.style,{pointerEvents:"all"})}),{generateKey:!1,overrideProps:function(e){return{onClick:function(i,n){null==e.onClick||e.onClick(i,n),t.handleItemClick(i,n)}}}})}))},t.renderMenu=function(){var e=t.props,i=e.children,n=e.direction,r=e.header,s=t.state.open,a=t.getDropdownMenuAriaOptions();if(!d0.gD(i)){var o=P$.Children.only(i),l=(0,o0.default)(n,(0,l0.b5)(s,"visible"),o.props.className);return(0,P$.cloneElement)(o,(0,a0.A)({className:l},a))}return P$.createElement(_3,(0,a0.A)({},a,{direction:n,open:s}),y3.create(r,{autoGenerateKey:!1}),t.renderOptions())},t}(0,K0.A)(t,e);var i=t.prototype;return i.getInitialAutoControlledState=function(){return{focus:!1,searchQuery:""}},t.getAutoControlledStateFromProps=function(e,t,i){var n={__options:e.options,__value:t.value};return(!c3()(i.__value,t.value)||!Y2(W3(e.options),W3(i.__options)))&&(n.selectedIndex=V3({additionLabel:e.additionLabel,additionPosition:e.additionPosition,allowAdditions:e.allowAdditions,deburr:e.deburr,multiple:e.multiple,search:e.search,selectedIndex:t.selectedIndex,value:t.value,options:e.options,searchQuery:t.searchQuery})),n},i.componentDidMount=function(){this.state.open&&this.open(null,!1)},i.shouldComponentUpdate=function(e,t){return!c3()(e,this.props)||!c3()(t,this.state)},i.componentDidUpdate=function(e,t){var i=this.props,n=i.closeOnBlur,r=i.minCharacters,s=i.openOnFocus,a=i.search;if(!t.focus&&this.state.focus){if(!this.isMouseDown){var o=!a||a&&1===r&&!this.state.open;s&&o&&this.open()}}else t.focus&&!this.state.focus&&!this.isMouseDown&&n&&this.close();!t.open&&this.state.open?(this.setOpenDirection(),this.scrollSelectedItemIntoView()):t.open&&this.state.open,t.selectedIndex!==this.state.selectedIndex&&this.scrollSelectedItemIntoView()},i.getDropdownMenuAriaOptions=function(){var e=this.props,t=e.search,i=e.multiple,n={};return t&&(n["aria-multiselectable"]=i,n.role="listbox"),n},i.render=function(){var e=this.props,i=e.basic,n=e.button,r=e.className,s=e.compact,a=e.disabled,o=e.error,l=e.fluid,c=e.floating,h=e.icon,d=e.inline,u=e.item,p=e.labeled,g=e.loading,f=e.multiple,m=e.pointing,v=e.search,y=e.selection,b=e.scrolling,_=e.simple,x=e.trigger,S=this.state,w=S.focus,C=S.open,k=S.upward,A=(0,o0.default)("ui",(0,l0.b5)(C,"active visible"),(0,l0.b5)(a,"disabled"),(0,l0.b5)(o,"error"),(0,l0.b5)(g,"loading"),(0,l0.b5)(i,"basic"),(0,l0.b5)(n,"button"),(0,l0.b5)(s,"compact"),(0,l0.b5)(l,"fluid"),(0,l0.b5)(c,"floating"),(0,l0.b5)(d,"inline"),(0,l0.b5)(p,"labeled"),(0,l0.b5)(u,"item"),(0,l0.b5)(f,"multiple"),(0,l0.b5)(v,"search"),(0,l0.b5)(y,"selection"),(0,l0.b5)(_,"simple"),(0,l0.b5)(b,"scrolling"),(0,l0.b5)(k,"upward"),(0,l0.vQ)(m,"pointing"),"dropdown",r),E=(0,c0.A)(t,this.props),T=(0,h0.A)(t,this.props),O=this.getDropdownAriaOptions(T,this.props);return P$.createElement(q0.o,{innerRef:this.ref},P$.createElement(T,(0,a0.A)({},E,O,{className:A,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onChange:this.handleChange,tabIndex:this.computeTabIndex()}),this.renderLabels(),this.renderSearchInput(),this.renderSearchSizer(),x||this.renderText(),Z0.A.create(h,{overrideProps:this.handleIconOverrides,autoGenerateKey:!1}),this.renderMenu(),C&&P$.createElement(s3(),{name:"keydown",on:this.closeOnEscape}),C&&P$.createElement(s3(),{name:"click",on:this.closeOnDocumentClick}),w&&P$.createElement(s3(),{name:"keydown",on:this.removeItemOnBackspace})))},t}(A1.A);function Y3(e){var t=e.control,i=(0,c0.A)(Y3,e),n=(0,h0.A)(Y3,e);return P$.createElement(n,(0,a0.A)({},i,{control:t}))}K3.handledProps=["additionLabel","additionPosition","allowAdditions","as","basic","button","children","className","clearable","closeOnBlur","closeOnChange","closeOnEscape","compact","deburr","defaultOpen","defaultSearchQuery","defaultSelectedLabel","defaultUpward","defaultValue","direction","disabled","error","floating","fluid","header","icon","inline","item","labeled","lazyLoad","loading","minCharacters","multiple","noResultsMessage","onAddItem","onBlur","onChange","onClick","onClose","onFocus","onLabelClick","onMouseDown","onOpen","onSearchChange","open","openOnFocus","options","placeholder","pointing","renderLabel","scrolling","search","searchInput","searchQuery","selectOnBlur","selectOnNavigation","selectedLabel","selection","simple","tabIndex","text","trigger","upward","value","wrapSelection"],K3.propTypes={},K3.defaultProps={additionLabel:"Add ",additionPosition:"top",closeOnBlur:!0,closeOnEscape:!0,deburr:!1,icon:"dropdown",minCharacters:1,noResultsMessage:"No results found.",openOnFocus:!0,renderLabel:G3,searchInput:"text",selectOnBlur:!0,selectOnNavigation:!0,wrapSelection:!0},K3.autoControlledProps=["open","searchQuery","selectedLabel","value","upward"],K3.Divider=g3,K3.Header=y3,K3.Item=m3,K3.Menu=_3,K3.SearchInput=S3,K3.Text=C3,Y3.handledProps=["as","control"],Y3.propTypes={},Y3.defaultProps={as:M1,control:K3};const X3=Y3;function q3(e){var t=e.children,i=e.className,n=e.grouped,r=e.inline,s=e.unstackable,a=e.widths,o=(0,o0.default)((0,l0.b5)(n,"grouped"),(0,l0.b5)(r,"inline"),(0,l0.b5)(s,"unstackable"),(0,l0.T5)(a,null,!0),"fields",i),l=(0,c0.A)(q3,e),c=(0,h0.A)(q3,e);return P$.createElement(c,(0,a0.A)({},l,{className:o}),t)}q3.handledProps=["as","children","className","grouped","inline","unstackable","widths"],q3.propTypes={};const Z3=q3;var Q3=i(71837),$3=function(e){function t(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(i=e.call.apply(e,[this].concat(r))||this).inputRef=(0,P$.createRef)(),i.computeIcon=function(){var e=i.props,t=e.loading,n=e.icon;return(0,X0.A)(n)?t?"spinner":void 0:n},i.computeTabIndex=function(){var e=i.props,t=e.disabled,n=e.tabIndex;return(0,X0.A)(n)?t?-1:void 0:n},i.focus=function(e){return i.inputRef.current.focus(e)},i.select=function(){return i.inputRef.current.select()},i.handleChange=function(e){var t=(0,p1.A)(e,"target.value");(0,Y0.A)(i.props,"onChange",e,(0,a0.A)({},i.props,{value:t}))},i.handleChildOverrides=function(e,t){return(0,a0.A)({},t,e.props,{ref:function(t){(0,Q3.G)(e.ref,t),i.inputRef.current=t}})},i.partitionProps=function(){var e=i.props,n=e.disabled,r=e.type,s=i.computeTabIndex(),a=(0,c0.A)(t,i.props),o=(0,k1.yT)(a),l=o[0],c=o[1];return[(0,a0.A)({},l,{disabled:n,type:r,tabIndex:s,onChange:i.handleChange,ref:i.inputRef}),c]},i}return(0,K0.A)(t,e),t.prototype.render=function(){var e=this,i=this.props,n=i.action,r=i.actionPosition,s=i.children,a=i.className,o=i.disabled,l=i.error,c=i.fluid,h=i.focus,d=i.icon,u=i.iconPosition,p=i.input,g=i.inverted,f=i.label,m=i.labelPosition,v=i.loading,y=i.size,b=i.transparent,_=i.type,x=(0,o0.default)("ui",y,(0,l0.b5)(o,"disabled"),(0,l0.b5)(l,"error"),(0,l0.b5)(c,"fluid"),(0,l0.b5)(h,"focus"),(0,l0.b5)(g,"inverted"),(0,l0.b5)(v,"loading"),(0,l0.b5)(b,"transparent"),(0,l0.xm)(r,"action")||(0,l0.b5)(n,"action"),(0,l0.xm)(u,"icon")||(0,l0.b5)(d||v,"icon"),(0,l0.xm)(m,"labeled")||(0,l0.b5)(f,"labeled"),"input",a),S=(0,h0.A)(t,this.props),w=this.partitionProps(),C=w[0],k=w[1];if(!d0.gD(s)){var A=a1(P$.Children.toArray(s),(function(t){return"input"!==t.type?t:(0,P$.cloneElement)(t,e.handleChildOverrides(t,C))}));return P$.createElement(S,(0,a0.A)({},k,{className:x}),A)}var E=u1.create(n,{autoGenerateKey:!1}),T=Q0.A.create(f,{defaultProps:{className:(0,o0.default)("label",(0,j1.A)(m,"corner")&&m)},autoGenerateKey:!1});return P$.createElement(S,(0,a0.A)({},k,{className:x}),"left"===r&&E,"right"!==m&&T,(0,F0.uG)(p||_,{defaultProps:C,autoGenerateKey:!1}),Z0.A.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==r&&E,"right"===m&&T)},t}(P$.Component);$3.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],$3.propTypes={},$3.defaultProps={type:"text"},$3.create=(0,F0.Iy)($3,(function(e){return{type:e}}));const J3=$3;function e5(e){var t=e.control,i=(0,c0.A)(e5,e),n=(0,h0.A)(e5,e);return P$.createElement(n,(0,a0.A)({},i,{control:t}))}e5.handledProps=["as","control"],e5.propTypes={},e5.defaultProps={as:M1,control:J3};const t5=e5;function i5(e){var t=e.control,i=(0,c0.A)(i5,e),n=(0,h0.A)(i5,e);return P$.createElement(n,(0,a0.A)({},i,{control:t}))}i5.handledProps=["as","control"],i5.propTypes={},i5.defaultProps={as:M1,control:O1};const n5=i5;function r5(e){return P$.createElement(K3,(0,a0.A)({},e,{selection:!0}))}r5.handledProps=["options"],r5.propTypes={},r5.Divider=K3.Divider,r5.Header=K3.Header,r5.Item=K3.Item,r5.Menu=K3.Menu;const s5=r5;function a5(e){var t=e.control,i=e.options,n=(0,c0.A)(a5,e),r=(0,h0.A)(a5,e);return P$.createElement(r,(0,a0.A)({},n,{control:t,options:i}))}a5.handledProps=["as","control","options"],a5.propTypes={},a5.defaultProps={as:M1,control:s5};const o5=a5;var l5=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).ref=(0,P$.createRef)(),t.focus=function(){return t.ref.current.focus()},t.handleChange=function(e){var i=(0,p1.A)(e,"target.value");(0,Y0.A)(t.props,"onChange",e,(0,a0.A)({},t.props,{value:i}))},t.handleInput=function(e){var i=(0,p1.A)(e,"target.value");(0,Y0.A)(t.props,"onInput",e,(0,a0.A)({},t.props,{value:i}))},t}return(0,K0.A)(t,e),t.prototype.render=function(){var e=this.props,i=e.rows,n=e.value,r=(0,c0.A)(t,this.props),s=(0,h0.A)(t,this.props);return P$.createElement(q0.o,{innerRef:this.ref},P$.createElement(s,(0,a0.A)({},r,{onChange:this.handleChange,onInput:this.handleInput,rows:i,value:n})))},t}(P$.Component);l5.handledProps=["as","onChange","onInput","rows","value"],l5.propTypes={},l5.defaultProps={as:"textarea",rows:3};const c5=l5;function h5(e){var t=e.control,i=(0,c0.A)(h5,e),n=(0,h0.A)(h5,e);return P$.createElement(n,(0,a0.A)({},i,{control:t}))}h5.handledProps=["as","control"],h5.propTypes={},h5.defaultProps={as:M1,control:c5};const d5=h5;var u5=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleSubmit=function(e){"string"!==typeof t.props.action&&(0,Y0.A)(e,"preventDefault");for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];Y0.A.apply(void 0,[t.props,"onSubmit",e,t.props].concat(n))},t}return(0,K0.A)(t,e),t.prototype.render=function(){var e=this.props,i=e.action,n=e.children,r=e.className,s=e.error,a=e.inverted,o=e.loading,l=e.reply,c=e.size,h=e.success,d=e.unstackable,u=e.warning,p=e.widths,g=(0,o0.default)("ui",c,(0,l0.b5)(s,"error"),(0,l0.b5)(a,"inverted"),(0,l0.b5)(o,"loading"),(0,l0.b5)(l,"reply"),(0,l0.b5)(h,"success"),(0,l0.b5)(d,"unstackable"),(0,l0.b5)(u,"warning"),(0,l0.T5)(p,null,!0),"form",r),f=(0,c0.A)(t,this.props),m=(0,h0.A)(t,this.props);return P$.createElement(m,(0,a0.A)({},f,{action:i,className:g,onSubmit:this.handleSubmit}),n)},t}(P$.Component);u5.handledProps=["action","as","children","className","error","inverted","loading","onSubmit","reply","size","success","unstackable","warning","widths"],u5.propTypes={},u5.defaultProps={as:"form"},u5.Field=M1,u5.Button=R1,u5.Checkbox=L1,u5.Dropdown=X3,u5.Group=Z3,u5.Input=t5,u5.Radio=n5,u5.Select=o5,u5.TextArea=d5;const p5=u5;function g5(e){var t=e.children,i=e.className,n=e.content,r=(0,o0.default)("content",i),s=(0,c0.A)(g5,e),a=(0,h0.A)(g5,e);return P$.createElement(a,(0,a0.A)({},s,{className:r}),d0.gD(t)?n:t)}g5.handledProps=["as","children","className","content"],g5.propTypes={};const f5=g5;function m5(e){var t=e.children,i=e.className,n=e.content,r=(0,o0.default)("header",i),s=(0,c0.A)(m5,e),a=(0,h0.A)(m5,e);return P$.createElement(a,(0,a0.A)({},s,{className:r}),d0.gD(t)?n:t)}m5.handledProps=["as","children","className","content"],m5.propTypes={},m5.create=(0,F0.Iy)(m5,(function(e){return{content:e}}));const v5=m5;function y5(e){var t=e.children,i=e.className,n=e.content,r=(0,o0.default)("content",i),s=(0,c0.A)(y5,e),a=(0,h0.A)(y5,e);return P$.createElement(a,(0,a0.A)({},s,{className:r}),d0.gD(t)?n:t)}y5.handledProps=["as","children","className","content"],y5.propTypes={},y5.defaultProps={as:"li"},y5.create=(0,F0.Iy)(y5,(function(e){return{content:e}}));const b5=y5;function _5(e){var t=e.children,i=e.className,n=e.items,r=(0,o0.default)("list",i),s=(0,c0.A)(_5,e),a=(0,h0.A)(_5,e);return P$.createElement(a,(0,a0.A)({},s,{className:r}),d0.gD(t)?a1(n,b5.create):t)}_5.handledProps=["as","children","className","items"],_5.propTypes={},_5.defaultProps={as:"ul"},_5.create=(0,F0.Iy)(_5,(function(e){return{items:e}}));const x5=_5;var S5=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleDismiss=function(e){var i=t.props.onDismiss;i&&i(e,t.props)},t}return(0,K0.A)(t,e),t.prototype.render=function(){var e=this.props,i=e.attached,n=e.children,r=e.className,s=e.color,a=e.compact,o=e.content,l=e.error,c=e.floating,h=e.header,d=e.hidden,u=e.icon,p=e.info,g=e.list,f=e.negative,m=e.onDismiss,v=e.positive,y=e.size,b=e.success,_=e.visible,x=e.warning,S=(0,o0.default)("ui",s,y,(0,l0.b5)(a,"compact"),(0,l0.b5)(l,"error"),(0,l0.b5)(c,"floating"),(0,l0.b5)(d,"hidden"),(0,l0.b5)(u,"icon"),(0,l0.b5)(p,"info"),(0,l0.b5)(f,"negative"),(0,l0.b5)(v,"positive"),(0,l0.b5)(b,"success"),(0,l0.b5)(_,"visible"),(0,l0.b5)(x,"warning"),(0,l0.vQ)(i,"attached"),"message",r),w=m&&P$.createElement(Z0.A,{name:"close",onClick:this.handleDismiss}),C=(0,c0.A)(t,this.props),k=(0,h0.A)(t,this.props);return d0.gD(n)?P$.createElement(k,(0,a0.A)({},C,{className:S}),w,Z0.A.create(u,{autoGenerateKey:!1}),(!(0,X0.A)(h)||!(0,X0.A)(o)||!(0,X0.A)(g))&&P$.createElement(f5,null,v5.create(h,{autoGenerateKey:!1}),x5.create(g,{autoGenerateKey:!1}),(0,F0._L)(o,{autoGenerateKey:!1}))):P$.createElement(k,(0,a0.A)({},C,{className:S}),w,n)},t}(P$.Component);S5.handledProps=["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"],S5.propTypes={},S5.Content=f5,S5.Header=v5,S5.List=x5,S5.Item=b5;var w5=i(26215),C5=i.n(w5);const k5=()=>{const[e,t]=(0,P$.useState)({username:"",password:"",password2:"",email:"",verification_code:""}),{username:i,password:n,password2:r}=e,[s,a]=(0,P$.useState)(!1),[o,l]=(0,P$.useState)(!1),[c,h]=(0,P$.useState)(""),[d,u]=(0,P$.useState)(""),[p,g]=(0,P$.useState)(!1),f=(0,m0.a8)();let m=new URLSearchParams(window.location.search).get("aff");m&&localStorage.setItem("aff",m),(0,P$.useEffect)((()=>{let e=localStorage.getItem("status");e&&(e=JSON.parse(e),a(e.email_verification),e.turnstile_check&&(l(!0),h(e.turnstile_site_key)))}));let v=EJ();function y(e){const{name:i,value:n}=e.target;console.log(i,n),t((e=>({...e,[i]:n})))}return(0,g0.jsx)(U0,{textAlign:"center",style:{marginTop:"48px"},children:(0,g0.jsxs)(U0.Column,{style:{maxWidth:450},children:[(0,g0.jsxs)(W0.A,{as:"h2",color:"",textAlign:"center",children:[(0,g0.jsx)(G0.A,{src:f})," \u65b0\u7528\u6237\u6ce8\u518c"]}),(0,g0.jsx)(p5,{size:"large",children:(0,g0.jsxs)(r0.A,{children:[(0,g0.jsx)(p5.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"\u8f93\u5165\u7528\u6237\u540d\uff0c\u6700\u957f 12 \u4f4d",onChange:y,name:"username"}),(0,g0.jsx)(p5.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"\u8f93\u5165\u5bc6\u7801\uff0c\u6700\u77ed 8 \u4f4d\uff0c\u6700\u957f 20 \u4f4d",onChange:y,name:"password",type:"password"}),(0,g0.jsx)(p5.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"\u8f93\u5165\u5bc6\u7801\uff0c\u6700\u77ed 8 \u4f4d\uff0c\u6700\u957f 20 \u4f4d",onChange:y,name:"password2",type:"password"}),s?(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(p5.Input,{fluid:!0,icon:"mail",iconPosition:"left",placeholder:"\u8f93\u5165\u90ae\u7bb1\u5730\u5740",onChange:y,name:"email",type:"email",action:(0,g0.jsx)(u1,{onClick:async()=>{if(""===e.email)return;if(o&&""===d)return void(0,m0.cf)("\u8bf7\u7a0d\u540e\u51e0\u79d2\u91cd\u8bd5\uff0cTurnstile \u6b63\u5728\u68c0\u67e5\u7528\u6237\u73af\u5883\uff01");g(!0);const t=await m0.nC.get("/api/verification?email=".concat(e.email,"&turnstile=").concat(d)),{success:i,message:n}=t.data;i?(0,m0.Te)("\u9a8c\u8bc1\u7801\u53d1\u9001\u6210\u529f\uff0c\u8bf7\u68c0\u67e5\u4f60\u7684\u90ae\u7bb1\uff01"):(0,m0.Qg)(n),g(!1)},disabled:p,children:"\u83b7\u53d6\u9a8c\u8bc1\u7801"})}),(0,g0.jsx)(p5.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"\u8f93\u5165\u9a8c\u8bc1\u7801",onChange:y,name:"verification_code"})]}):(0,g0.jsx)(g0.Fragment,{}),o?(0,g0.jsx)(C5(),{sitekey:c,onVerify:e=>{u(e)}}):(0,g0.jsx)(g0.Fragment,{}),(0,g0.jsx)(u1,{color:"green",fluid:!0,size:"large",onClick:async function(t){if(n.length<8)(0,m0.cf)("\u5bc6\u7801\u957f\u5ea6\u4e0d\u5f97\u5c0f\u4e8e 8 \u4f4d\uff01");else if(n===r){if(i&&n){if(o&&""===d)return void(0,m0.cf)("\u8bf7\u7a0d\u540e\u51e0\u79d2\u91cd\u8bd5\uff0cTurnstile \u6b63\u5728\u68c0\u67e5\u7528\u6237\u73af\u5883\uff01");g(!0),m||(m=localStorage.getItem("aff")),e.aff_code=m;const t=await m0.nC.post("/api/user/register?turnstile=".concat(d),e),{success:i,message:n}=t.data;i?(v("/login"),(0,m0.Te)("\u6ce8\u518c\u6210\u529f\uff01")):(0,m0.Qg)(n),g(!1)}}else(0,m0.cf)("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4")},loading:p,children:"\u6ce8\u518c"})]})}),(0,g0.jsxs)(S5,{children:["\u5df2\u6709\u8d26\u6237\uff1f",(0,g0.jsx)(e0,{to:"/login",className:"btn btn-link",children:"\u70b9\u51fb\u767b\u5f55"})]})]})})},A5=(e,t)=>{switch(t.type){case"login":return{...e,user:t.payload};case"logout":return{...e,user:void 0};default:return e}},E5={user:void 0},T5=P$.createContext({state:E5,dispatch:()=>null}),O5=e=>{let{children:t}=e;const[i,n]=P$.useReducer(A5,E5);return(0,g0.jsx)(T5.Provider,{value:[i,n],children:t})};async function P5(e){const t=await async function(){const e=await m0.nC.get("/api/oauth/state"),{success:t,message:i,data:n}=e.data;return t?n:((0,m0.Qg)(i),"")}();t&&window.open("https://github.com/login/oauth/authorize?client_id=".concat(e,"&state=").concat(t,"&scope=user:email"))}var M5=i(66503),I5=i(23302),R5=i.n(I5),D5=i(96041);const L5=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{d:"M12.0101 1C5.92171 1 1 5.92171 1 12.0101C1 16.8771 4.15354 20.9967 8.5284 22.455C9.07526 22.5644 9.27577 22.218 9.27577 21.9264C9.27577 21.6712 9.25754 20.7962 9.25754 19.8848C6.19514 20.541 5.55714 18.5723 5.55714 18.5723C5.06497 17.2963 4.33583 16.9682 4.33583 16.9682C3.33326 16.2938 4.40874 16.2938 4.40874 16.2938C5.52069 16.3667 6.104 17.4239 6.104 17.4239C7.08834 19.101 8.67423 18.627 9.31223 18.3354C9.40337 17.6245 9.69503 17.1323 10.0049 16.8589C7.56229 16.6037 4.99206 15.6558 4.99206 11.4267C4.99206 10.2237 5.42954 9.23931 6.12223 8.47371C6.01286 8.20028 5.63006 7.07011 6.2316 5.55714C6.2316 5.55714 7.16126 5.26548 9.25754 6.68731C10.1325 6.45034 11.0804 6.32274 12.0101 6.32274C12.9397 6.32274 13.8876 6.45034 14.7626 6.68731C16.8589 5.26548 17.7885 5.55714 17.7885 5.55714C18.3901 7.07011 18.0073 8.20028 17.8979 8.47371C18.6088 9.23931 19.0281 10.2237 19.0281 11.4267C19.0281 15.6558 16.4578 16.5854 13.997 16.8589C14.398 17.2052 14.7443 17.8614 14.7443 18.9004C14.7443 20.377 14.7261 21.5618 14.7261 21.9264C14.7261 22.218 14.9266 22.5644 15.4735 22.455C19.8483 20.9967 23.0019 16.8771 23.0019 12.0101C23.0201 5.92171 18.0802 1 12.0101 1Z",fill:"currentColor"}),P$.createElement("path",{d:"M5.17419 16.8042C5.15596 16.8589 5.06482 16.8771 4.99191 16.8406C4.91899 16.8042 4.86431 16.7313 4.90076 16.6766C4.91899 16.6219 5.01014 16.6037 5.08305 16.6401C5.15596 16.6766 5.19242 16.7495 5.17419 16.8042ZM5.61168 17.2964C5.55699 17.351 5.44762 17.3146 5.39294 17.2417C5.32002 17.1688 5.30179 17.0594 5.35648 17.0047C5.41116 16.95 5.50231 16.9865 5.57522 17.0594C5.64814 17.1505 5.66636 17.2599 5.61168 17.2964ZM6.04916 17.9344C5.97625 17.989 5.86688 17.9344 5.81219 17.8432C5.73928 17.7521 5.73928 17.6245 5.81219 17.588C5.88511 17.5333 5.99448 17.588 6.04916 17.6792C6.12208 17.7703 6.12208 17.8797 6.04916 17.9344ZM6.65071 18.5541C6.59602 18.627 6.46842 18.6088 6.35905 18.5177C6.26791 18.4265 6.23145 18.2989 6.30436 18.2442C6.35905 18.1713 6.48665 18.1896 6.59602 18.2807C6.68716 18.3536 6.70539 18.4812 6.65071 18.5541ZM7.47099 18.9005C7.45276 18.9916 7.32516 19.0281 7.19756 18.9916C7.06996 18.9552 6.99705 18.8458 7.01528 18.7729C7.03351 18.6817 7.16111 18.6453 7.28871 18.6817C7.41631 18.7182 7.48922 18.8093 7.47099 18.9005ZM8.36419 18.9734C8.36419 19.0645 8.25482 19.1374 8.12722 19.1374C7.99962 19.1374 7.89025 19.0645 7.89025 18.9734C7.89025 18.8822 7.99962 18.8093 8.12722 18.8093C8.25482 18.8093 8.36419 18.8822 8.36419 18.9734ZM9.20271 18.8276C9.22093 18.9187 9.12979 19.0098 9.00219 19.0281C8.87459 19.0463 8.76522 18.9916 8.74699 18.9005C8.72876 18.8093 8.81991 18.7182 8.94751 18.7C9.07511 18.6817 9.18448 18.7364 9.20271 18.8276Z",fill:"currentColor"}))}),"github_logo"),j5=()=>{function e(){return(0,g0.jsxs)("svg",{t:"1709714447384",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5091",width:"16",height:"16",children:[(0,g0.jsx)("path",{d:"M690.1 377.4c5.9 0 11.8 0.2 17.6 0.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6 5.5 3.9 9.1 10.3 9.1 17.6 0 2.4-0.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-0.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-0.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4 0.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-0.1 17.8-0.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8z m-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1z m-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1z","p-id":"5092"}),(0,g0.jsx)("path",{d:"M866.7 792.7c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-0.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34c1.7 1 3.3 1.7 5.2 1.7 2.4 0 4.7-0.9 6.4-2.6 1.7-1.7 2.6-4 2.6-6.4 0-2.2-0.9-4.4-1.4-6.6-0.3-1.2-7.6-28.3-12.2-45.3-0.5-1.9-0.9-3.8-0.9-5.7 0.1-5.9 3.1-11.2 7.6-14.5zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9z m179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c-0.1 19.8-16.2 35.9-36 35.9z","p-id":"5093"})]})}return(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.In,{svg:(0,g0.jsx)(e,{})})})},F5=()=>{const[e,t]=(0,P$.useState)({username:"",password:"",wechat_verification_code:""}),[i,n]=n0(),[r,s]=(0,P$.useState)(!1),{username:a,password:o}=e,[l,c]=(0,P$.useContext)(T5),[h,d]=(0,P$.useState)(!1),[u,p]=(0,P$.useState)(""),[g,f]=(0,P$.useState)("");let m=EJ();const[v,y]=(0,P$.useState)({});(0,m0.a8)();(0,P$.useEffect)((()=>{i.get("expired")&&(0,m0.Qg)("\u672a\u767b\u5f55\u6216\u767b\u5f55\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01");let e=localStorage.getItem("status");e&&(e=JSON.parse(e),y(e),e.turnstile_check&&(d(!0),p(e.turnstile_site_key)))}),[]);const[b,_]=(0,P$.useState)(!1);function x(e,i){t((t=>({...t,[e]:i})))}return(0,g0.jsx)("div",{children:(0,g0.jsxs)(v0.Layout,{children:[(0,g0.jsx)(v0.Layout.Header,{}),(0,g0.jsx)(v0.Layout.Content,{children:(0,g0.jsx)("div",{style:{justifyContent:"center",display:"flex",marginTop:120},children:(0,g0.jsxs)("div",{style:{width:500},children:[(0,g0.jsxs)(v0.Zp,{children:[(0,g0.jsx)(P0.A,{heading:2,style:{textAlign:"center"},children:"\u7528\u6237\u767b\u5f55"}),(0,g0.jsxs)(v0.lV,{children:[(0,g0.jsx)(v0.lV.Input,{field:"username",label:"\u7528\u6237\u540d",placeholder:"\u7528\u6237\u540d",name:"username",onChange:e=>x("username",e)}),(0,g0.jsx)(v0.lV.Input,{field:"password",label:"\u5bc6\u7801",placeholder:"\u5bc6\u7801",name:"password",type:"password",onChange:e=>x("password",e)}),(0,g0.jsx)(v0.$n,{theme:"solid",style:{width:"100%"},type:"primary",size:"large",htmlType:"submit",onClick:async function(e){if(h&&""===g)(0,m0.cf)("\u8bf7\u7a0d\u540e\u51e0\u79d2\u91cd\u8bd5\uff0cTurnstile \u6b63\u5728\u68c0\u67e5\u7528\u6237\u73af\u5883\uff01");else if(s(!0),a&&o){const e=await m0.nC.post("/api/user/login?turnstile=".concat(g),{username:a,password:o}),{success:t,message:i,data:n}=e.data;t?(c({type:"login",payload:n}),localStorage.setItem("user",JSON.stringify(n)),(0,m0.Te)("\u767b\u5f55\u6210\u529f\uff01"),"root"===a&&"123456"===o&&v0.aF.error({title:"\u60a8\u6b63\u5728\u4f7f\u7528\u9ed8\u8ba4\u5bc6\u7801\uff01",content:"\u8bf7\u7acb\u523b\u4fee\u6539\u9ed8\u8ba4\u5bc6\u7801\uff01",centered:!0}),m("/token")):(0,m0.Qg)(i)}else(0,m0.Qg)("\u8bf7\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\uff01")},children:"\u767b\u5f55"})]}),(0,g0.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[(0,g0.jsxs)(M5.A,{children:["\u6ca1\u6709\u8d26\u53f7\u8bf7\u5148 ",(0,g0.jsx)(e0,{to:"/register",children:"\u6ce8\u518c\u8d26\u53f7"})]}),(0,g0.jsxs)(M5.A,{children:["\u5fd8\u8bb0\u5bc6\u7801 ",(0,g0.jsx)(e0,{to:"/reset",children:"\u70b9\u51fb\u91cd\u7f6e"})]})]}),v.github_oauth||v.wechat_login||v.telegram_oauth?(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(v0.cG,{margin:"12px",align:"center",children:"\u7b2c\u4e09\u65b9\u767b\u5f55"}),(0,g0.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:20},children:[v.github_oauth?(0,g0.jsx)(v0.$n,{type:"primary",icon:(0,g0.jsx)(L5,{}),onClick:()=>P5(v.github_client_id)}):(0,g0.jsx)(g0.Fragment,{}),v.wechat_login?(0,g0.jsx)(v0.$n,{type:"primary",style:{color:"rgba(var(--semi-green-5), 1)"},icon:(0,g0.jsx)(v0.In,{svg:(0,g0.jsx)(j5,{})}),onClick:()=>{_(!0)}}):(0,g0.jsx)(g0.Fragment,{}),v.telegram_oauth?(0,g0.jsx)(R5(),{dataOnauth:async e=>{const t={};["id","first_name","last_name","username","photo_url","auth_date","hash","lang"].forEach((i=>{e[i]&&(t[i]=e[i])}));const i=await m0.nC.get("/api/oauth/telegram/login",{params:t}),{success:n,message:r,data:s}=i.data;n?(c({type:"login",payload:s}),localStorage.setItem("user",JSON.stringify(s)),(0,m0.Te)("\u767b\u5f55\u6210\u529f\uff01"),m("/")):(0,m0.Qg)(r)},botName:v.telegram_bot_name}):(0,g0.jsx)(g0.Fragment,{})]})]}):(0,g0.jsx)(g0.Fragment,{}),(0,g0.jsxs)(v0.aF,{title:"\u5fae\u4fe1\u626b\u7801\u767b\u5f55",visible:b,maskClosable:!0,onOk:async()=>{if(h&&""===g)return void(0,m0.cf)("\u8bf7\u7a0d\u540e\u51e0\u79d2\u91cd\u8bd5\uff0cTurnstile \u6b63\u5728\u68c0\u67e5\u7528\u6237\u73af\u5883\uff01");const t=await m0.nC.get("/api/oauth/wechat?code=".concat(e.wechat_verification_code)),{success:i,message:n,data:r}=t.data;i?(c({type:"login",payload:r}),localStorage.setItem("user",JSON.stringify(r)),m("/"),(0,m0.Te)("\u767b\u5f55\u6210\u529f\uff01"),_(!1)):(0,m0.Qg)(n)},onCancel:()=>_(!1),okText:"\u767b\u5f55",size:"small",centered:!0,children:[(0,g0.jsx)("div",{style:{display:"flex",alignItem:"center",flexDirection:"column"},children:(0,g0.jsx)("img",{src:v.wechat_qrcode})}),(0,g0.jsx)("div",{style:{textAlign:"center"},children:(0,g0.jsx)("p",{children:"\u5fae\u4fe1\u626b\u7801\u5173\u6ce8\u516c\u4f17\u53f7\uff0c\u8f93\u5165\u300c\u9a8c\u8bc1\u7801\u300d\u83b7\u53d6\u9a8c\u8bc1\u7801\uff08\u4e09\u5206\u949f\u5185\u6709\u6548\uff09"})}),(0,g0.jsx)(v0.lV,{size:"large",children:(0,g0.jsx)(v0.lV.Input,{field:"wechat_verification_code",placeholder:"\u9a8c\u8bc1\u7801",label:"\u9a8c\u8bc1\u7801",value:e.wechat_verification_code,onChange:e=>x("wechat_verification_code",e)})})]})]}),h?(0,g0.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:20},children:(0,g0.jsx)(C5(),{sitekey:u,onVerify:e=>{f(e)}})}):(0,g0.jsx)(g0.Fragment,{})]})})})]})})},B5=()=>(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsxs)(S5,{negative:!0,children:[(0,g0.jsx)(S5.Header,{children:"\u9875\u9762\u4e0d\u5b58\u5728"}),(0,g0.jsx)("p",{children:"\u8bf7\u68c0\u67e5\u4f60\u7684\u6d4f\u89c8\u5668\u5730\u5740\u662f\u5426\u6b63\u786e"})]})});function N5(e){var t=e.children,i=e.className,n=e.clearing,r=e.content,s=e.fitted,a=e.hidden,o=e.horizontal,l=e.inverted,c=e.section,h=e.vertical,d=(0,o0.default)("ui",(0,l0.b5)(n,"clearing"),(0,l0.b5)(s,"fitted"),(0,l0.b5)(a,"hidden"),(0,l0.b5)(o,"horizontal"),(0,l0.b5)(l,"inverted"),(0,l0.b5)(c,"section"),(0,l0.b5)(h,"vertical"),"divider",i),u=(0,c0.A)(N5,e),p=(0,h0.A)(N5,e);return P$.createElement(p,(0,a0.A)({},u,{className:d}),d0.gD(t)?r:t)}N5.handledProps=["as","children","className","clearing","content","fitted","hidden","horizontal","inverted","section","vertical"],N5.propTypes={};const z5=N5;var H5=i(29236),V5=i(76897);const U5=r3.instance;var W5=i(57504),G5=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleButtonOverrides=function(e){return{onClick:function(i,n){(0,Y0.A)(e,"onClick",i,n),(0,Y0.A)(t.props,"onActionClick",i,n)}}},t}return(0,K0.A)(t,e),t.prototype.render=function(){var e=this,i=this.props,n=i.actions,r=i.children,s=i.className,a=i.content,o=(0,o0.default)("actions",s),l=(0,c0.A)(t,this.props),c=(0,h0.A)(t,this.props);return d0.gD(r)?d0.gD(a)?P$.createElement(c,(0,a0.A)({},l,{className:o}),a1(n,(function(t){return u1.create(t,{overrideProps:e.handleButtonOverrides})}))):P$.createElement(c,(0,a0.A)({},l,{className:o}),a):P$.createElement(c,(0,a0.A)({},l,{className:o}),r)},t}(P$.Component);function K5(e){var t=e.children,i=e.className,n=e.content,r=e.image,s=e.scrolling,a=(0,o0.default)(i,(0,l0.b5)(r,"image"),(0,l0.b5)(s,"scrolling"),"content"),o=(0,c0.A)(K5,e),l=(0,h0.A)(K5,e);return P$.createElement(l,(0,a0.A)({},o,{className:a}),d0.gD(t)?n:t)}G5.handledProps=["actions","as","children","className","content","onActionClick"],G5.propTypes={},G5.create=(0,F0.Iy)(G5,(function(e){return{actions:e}})),K5.handledProps=["as","children","className","content","image","scrolling"],K5.propTypes={},K5.create=(0,F0.Iy)(K5,(function(e){return{content:e}}));const Y5=K5;function X5(e){var t=e.children,i=e.className,n=e.content,r=(0,o0.default)("description",i),s=(0,c0.A)(X5,e),a=(0,h0.A)(X5,e);return P$.createElement(a,(0,a0.A)({},s,{className:r}),d0.gD(t)?n:t)}X5.handledProps=["as","children","className","content"],X5.propTypes={};const q5=X5;const Z5=(0,V5.A)()?P$.useLayoutEffect:P$.useEffect;var Q5=/\s+/;var $5=new Map,J5=function(e,t){var i=function(e){var t=[];return e?(e.forEach((function(e){"string"===typeof e.current&&e.current.split(Q5).forEach((function(e){t.push(e)}))})),t.filter((function(e,t,i){return e.length>0&&i.indexOf(e)===t}))):[]}(t),n=function(e,t){return[t.filter((function(t){return-1===e.indexOf(t)})),e.filter((function(e){return-1===t.indexOf(e)}))]}($5.get(e)||[],i),r=n[0],s=n[1];e&&(r.forEach((function(t){return e.classList.add(t)})),s.forEach((function(t){return e.classList.remove(t)}))),$5.set(e,i)},e4=new function(){var e=this;this.add=function(t,i){if(e.nodes.has(t)){e.nodes.get(t).add(i)}else{var n=new Set;n.add(i),e.nodes.set(t,n)}},this.del=function(t,i){if(e.nodes.has(t)){var n=e.nodes.get(t);1!==n.size?n.delete(i):e.nodes.delete(t)}},this.emit=function(t,i){i(t,e.nodes.get(t))},this.nodes=new Map};function t4(e){var t=e.blurring,i=e.children,n=e.className,r=e.centered,s=e.content,a=e.inverted,o=e.mountNode,l=e.scrolling,c=P$.useRef(),h=(0,o0.default)("ui",(0,l0.b5)(a,"inverted"),(0,l0.b5)(!r,"top aligned"),"page modals dimmer transition visible active",n),d=(0,o0.default)("dimmable dimmed",(0,l0.b5)(t,"blurring"),(0,l0.b5)(l,"scrolling")),u=(0,c0.A)(t4,e),p=(0,h0.A)(t4,e);return function(e,t){var i=P$.useRef(),n=P$.useRef(!1);Z5((function(){if(i.current=t,n.current){var r=(0,Q3.X)(e)?e.current:e;e4.emit(r,J5)}n.current=!0}),[t]),Z5((function(){var t=(0,Q3.X)(e)?e.current:e;return e4.add(t,i),e4.emit(t,J5),function(){e4.del(t,i),e4.emit(t,J5)}}),[e])}(o,d),P$.useEffect((function(){c.current&&c.current.style&&c.current.style.setProperty("display","flex","important")}),[]),P$.createElement(q0.o,{innerRef:c},P$.createElement(p,(0,a0.A)({},u,{className:h}),d0.gD(i)?s:i))}t4.handledProps=["as","blurring","centered","children","className","content","inverted","mountNode","scrolling"],t4.propTypes={},t4.create=(0,F0.Iy)(t4,(function(e){return{content:e}}));const i4=t4;function n4(e){var t=e.children,i=e.className,n=e.content,r=(0,o0.default)("header",i),s=(0,c0.A)(n4,e),a=(0,h0.A)(n4,e);return P$.createElement(a,(0,a0.A)({},s,{className:r}),d0.gD(t)?n:t)}n4.handledProps=["as","children","className","content"],n4.propTypes={},n4.create=(0,F0.Iy)(n4,(function(e){return{content:e}}));const r4=n4;var s4=function(e){function t(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(i=e.call.apply(e,[this].concat(r))||this).legacy=(0,V5.A)()&&!window.ActiveXObject&&"ActiveXObject"in window,i.ref=(0,P$.createRef)(),i.dimmerRef=(0,P$.createRef)(),i.latestDocumentMouseDownEvent=null,i.getMountNode=function(){return(0,V5.A)()?i.props.mountNode||document.body:null},i.handleActionsOverrides=function(e){return{onActionClick:function(t,n){(0,Y0.A)(e,"onActionClick",t,n),(0,Y0.A)(i.props,"onActionClick",t,i.props),i.handleClose(t)}}},i.handleClose=function(e){i.setState({open:!1}),(0,Y0.A)(i.props,"onClose",e,(0,a0.A)({},i.props,{open:!1}))},i.handleDocumentMouseDown=function(e){i.latestDocumentMouseDownEvent=e},i.handleDocumentClick=function(e){var t=i.props.closeOnDimmerClick,n=i.latestDocumentMouseDownEvent;i.latestDocumentMouseDownEvent=null,!t||(0,h3.A)(i.ref.current,n)||(0,h3.A)(i.ref.current,e)||(i.setState({open:!1}),(0,Y0.A)(i.props,"onClose",e,(0,a0.A)({},i.props,{open:!1})))},i.handleIconOverrides=function(e){return{onClick:function(t){(0,Y0.A)(e,"onClick",t),i.handleClose(t)}}},i.handleOpen=function(e){(0,Y0.A)(i.props,"onOpen",e,(0,a0.A)({},i.props,{open:!0})),i.setState({open:!0})},i.handlePortalMount=function(e){var t=i.props.eventPool;i.setState({scrolling:!1}),i.setPositionAndClassNames(),U5.sub("mousedown",i.handleDocumentMouseDown,{pool:t,target:i.dimmerRef.current}),U5.sub("click",i.handleDocumentClick,{pool:t,target:i.dimmerRef.current}),(0,Y0.A)(i.props,"onMount",e,i.props)},i.handlePortalUnmount=function(e){var t=i.props.eventPool;cancelAnimationFrame(i.animationRequestId),U5.unsub("mousedown",i.handleDocumentMouseDown,{pool:t,target:i.dimmerRef.current}),U5.unsub("click",i.handleDocumentClick,{pool:t,target:i.dimmerRef.current}),(0,Y0.A)(i.props,"onUnmount",e,i.props)},i.setPositionAndClassNames=function(){var e,t=i.props.centered,n={};if(i.ref.current){var r=i.ref.current.getBoundingClientRect(),s=function(e){var t=e.height+0,i=e.height+0,n=window.innerHeight;return n/2+-i/2+t+50<n}(r);e=!s;var a=i.legacy?function(e,t,i){var n=t&&e?-i.height/2:0;return{marginLeft:-i.width/2,marginTop:n}}(s,t,r):{};c3()(i.state.legacyStyles,a)||(n.legacyStyles=a),i.state.scrolling!==e&&(n.scrolling=e)}f2(n)||i.setState(n),i.animationRequestId=requestAnimationFrame(i.setPositionAndClassNames)},i.renderContent=function(e){var n=i.props,r=n.actions,s=n.basic,a=n.children,o=n.className,l=n.closeIcon,c=n.content,h=n.header,d=n.size,u=n.style,p=i.state,g=p.legacyStyles,f=p.scrolling,m=(0,o0.default)("ui",d,(0,l0.b5)(s,"basic"),(0,l0.b5)(i.legacy,"legacy"),(0,l0.b5)(f,"scrolling"),"modal transition visible active",o),v=(0,h0.A)(t,i.props),y=!0===l?"close":l,b=Z0.A.create(y,{overrideProps:i.handleIconOverrides});return P$.createElement(q0.o,{innerRef:i.ref},P$.createElement(v,(0,a0.A)({},e,{className:m,style:(0,a0.A)({},g,u)}),b,d0.gD(a)?P$.createElement(P$.Fragment,null,r4.create(h,{autoGenerateKey:!1}),Y5.create(c,{autoGenerateKey:!1}),G5.create(r,{overrideProps:i.handleActionsOverrides})):a))},i}(0,K0.A)(t,e);var i=t.prototype;return i.componentWillUnmount=function(){this.handlePortalUnmount()},i.render=function(){var e=this.props,i=e.centered,n=e.closeOnDocumentClick,r=e.dimmer,s=e.eventPool,a=e.trigger,o=this.state,l=o.open,c=o.scrolling,h=this.getMountNode();if(!(0,V5.A)())return(0,P$.isValidElement)(a)?a:null;var d=(0,c0.A)(t,this.props),u=W5.A.handledProps,p=H3(d,(function(e,t,i){return(0,j1.A)(u,i)||(e[i]=t),e}),{}),g=n3(d,u);return P$.createElement(W5.A,(0,a0.A)({closeOnDocumentClick:n},g,{trigger:a,eventPool:s,mountNode:h,open:l,onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount}),P$.createElement(q0.o,{innerRef:this.dimmerRef},i4.create((0,H5.A)(r)?r:{},{autoGenerateKey:!1,defaultProps:{blurring:"blurring"===r,inverted:"inverted"===r},overrideProps:{children:this.renderContent(p),centered:i,mountNode:h,scrolling:c}})))},t}(A1.A);s4.handledProps=["actions","as","basic","centered","children","className","closeIcon","closeOnDimmerClick","closeOnDocumentClick","content","defaultOpen","dimmer","eventPool","header","mountNode","onActionClick","onClose","onMount","onOpen","onUnmount","open","size","style","trigger"],s4.propTypes={},s4.defaultProps={centered:!0,dimmer:!0,closeOnDimmerClick:!0,closeOnDocumentClick:!1,eventPool:"Modal"},s4.autoControlledProps=["open"],s4.Actions=G5,s4.Content=Y5,s4.Description=q5,s4.Dimmer=i4,s4.Header=r4;const a4=s4,o4=()=>{let[e,t]=(0,P$.useState)({PasswordLoginEnabled:"",PasswordRegisterEnabled:"",EmailVerificationEnabled:"",GitHubOAuthEnabled:"",GitHubClientId:"",GitHubClientSecret:"",Notice:"",SMTPServer:"",SMTPPort:"",SMTPAccount:"",SMTPFrom:"",SMTPToken:"",ServerAddress:"",Footer:"",WeChatAuthEnabled:"",WeChatServerAddress:"",WeChatServerToken:"",WeChatAccountQRCodeImageURL:"",MessagePusherAddress:"",MessagePusherToken:"",TurnstileCheckEnabled:"",TurnstileSiteKey:"",TurnstileSecretKey:"",RegisterEnabled:"",EmailDomainRestrictionEnabled:"",EmailDomainWhitelist:""});const[i,n]=(0,P$.useState)({});let[r,s]=(0,P$.useState)(!1);const[a,o]=(0,P$.useState)([]),[l,c]=(0,P$.useState)(""),[h,d]=(0,P$.useState)(!1);(0,P$.useEffect)((()=>{(async()=>{const e=await m0.nC.get("/api/option/"),{success:i,message:r,data:s}=e.data;if(i){let e={};s.forEach((t=>{e[t.key]=t.value})),t({...e,EmailDomainWhitelist:e.EmailDomainWhitelist.split(",")}),n(e),o(e.EmailDomainWhitelist.split(",").map((e=>({key:e,text:e,value:e}))))}else(0,m0.Qg)(r)})().then()}),[]);const u=async(i,n)=>{switch(s(!0),i){case"PasswordLoginEnabled":case"PasswordRegisterEnabled":case"EmailVerificationEnabled":case"GitHubOAuthEnabled":case"WeChatAuthEnabled":case"TurnstileCheckEnabled":case"EmailDomainRestrictionEnabled":case"RegisterEnabled":n="true"===e[i]?"false":"true"}const r=await m0.nC.put("/api/option/",{key:i,value:n}),{success:a,message:o}=r.data;a?("EmailDomainWhitelist"===i&&(n=n.split(",")),t((e=>({...e,[i]:n})))):(0,m0.Qg)(o),s(!1)},p=async(i,n)=>{let{name:r,value:s}=n;"PasswordLoginEnabled"!==r||"true"!==e[r]?"Notice"===r||r.startsWith("SMTP")||"ServerAddress"===r||"GitHubClientId"===r||"GitHubClientSecret"===r||"WeChatServerAddress"===r||"WeChatServerToken"===r||"WeChatAccountQRCodeImageURL"===r||"TurnstileSiteKey"===r||"TurnstileSecretKey"===r||"EmailDomainWhitelist"===r?t((e=>({...e,[r]:s}))):await u(r,s):d(!0)},g=()=>{const i=e.EmailDomainWhitelist;""===l||i.includes(l)||(c(""),t({...e,EmailDomainWhitelist:[...i,l]}),o([...a,{key:l,text:l,value:l}]))};return(0,g0.jsx)(U0,{columns:1,children:(0,g0.jsx)(U0.Column,{children:(0,g0.jsxs)(p5,{loading:r,children:[(0,g0.jsx)(W0.A,{as:"h3",children:"\u901a\u7528\u8bbe\u7f6e"}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.Input,{label:"\u670d\u52a1\u5668\u5730\u5740",placeholder:"\u4f8b\u5982\uff1ahttps://yourdomain.com",value:e.ServerAddress,name:"ServerAddress",onChange:p})}),(0,g0.jsx)(p5.Button,{onClick:async()=>{let t=(0,m0.UC)(e.ServerAddress);await u("ServerAddress",t)},children:"\u66f4\u65b0\u670d\u52a1\u5668\u5730\u5740"}),(0,g0.jsx)(z5,{}),(0,g0.jsx)(W0.A,{as:"h3",children:"\u914d\u7f6e\u767b\u5f55\u6ce8\u518c"}),(0,g0.jsxs)(p5.Group,{inline:!0,children:[(0,g0.jsx)(p5.Checkbox,{checked:"true"===e.PasswordLoginEnabled,label:"\u5141\u8bb8\u901a\u8fc7\u5bc6\u7801\u8fdb\u884c\u767b\u5f55",name:"PasswordLoginEnabled",onChange:p}),h&&(0,g0.jsxs)(a4,{open:h,onClose:()=>d(!1),size:"tiny",style:{maxWidth:"450px"},children:[(0,g0.jsx)(a4.Header,{children:"\u8b66\u544a"}),(0,g0.jsx)(a4.Content,{children:(0,g0.jsx)("p",{children:"\u53d6\u6d88\u5bc6\u7801\u767b\u5f55\u5c06\u5bfc\u81f4\u6240\u6709\u672a\u7ed1\u5b9a\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f\u7684\u7528\u6237\uff08\u5305\u62ec\u7ba1\u7406\u5458\uff09\u65e0\u6cd5\u901a\u8fc7\u5bc6\u7801\u767b\u5f55\uff0c\u786e\u8ba4\u53d6\u6d88\uff1f"})}),(0,g0.jsxs)(a4.Actions,{children:[(0,g0.jsx)(u1,{onClick:()=>d(!1),children:"\u53d6\u6d88"}),(0,g0.jsx)(u1,{color:"yellow",onClick:async()=>{d(!1),await u("PasswordLoginEnabled","false")},children:"\u786e\u5b9a"})]})]}),(0,g0.jsx)(p5.Checkbox,{checked:"true"===e.PasswordRegisterEnabled,label:"\u5141\u8bb8\u901a\u8fc7\u5bc6\u7801\u8fdb\u884c\u6ce8\u518c",name:"PasswordRegisterEnabled",onChange:p}),(0,g0.jsx)(p5.Checkbox,{checked:"true"===e.EmailVerificationEnabled,label:"\u901a\u8fc7\u5bc6\u7801\u6ce8\u518c\u65f6\u9700\u8981\u8fdb\u884c\u90ae\u7bb1\u9a8c\u8bc1",name:"EmailVerificationEnabled",onChange:p}),(0,g0.jsx)(p5.Checkbox,{checked:"true"===e.GitHubOAuthEnabled,label:"\u5141\u8bb8\u901a\u8fc7 GitHub \u8d26\u6237\u767b\u5f55 & \u6ce8\u518c",name:"GitHubOAuthEnabled",onChange:p}),(0,g0.jsx)(p5.Checkbox,{checked:"true"===e.WeChatAuthEnabled,label:"\u5141\u8bb8\u901a\u8fc7\u5fae\u4fe1\u767b\u5f55 & \u6ce8\u518c",name:"WeChatAuthEnabled",onChange:p})]}),(0,g0.jsxs)(p5.Group,{inline:!0,children:[(0,g0.jsx)(p5.Checkbox,{checked:"true"===e.RegisterEnabled,label:"\u5141\u8bb8\u65b0\u7528\u6237\u6ce8\u518c\uff08\u6b64\u9879\u4e3a\u5426\u65f6\uff0c\u65b0\u7528\u6237\u5c06\u65e0\u6cd5\u4ee5\u4efb\u4f55\u65b9\u5f0f\u8fdb\u884c\u6ce8\u518c\uff09",name:"RegisterEnabled",onChange:p}),(0,g0.jsx)(p5.Checkbox,{checked:"true"===e.TurnstileCheckEnabled,label:"\u542f\u7528 Turnstile \u7528\u6237\u6821\u9a8c",name:"TurnstileCheckEnabled",onChange:p})]}),(0,g0.jsx)(z5,{}),(0,g0.jsxs)(W0.A,{as:"h3",children:["\u914d\u7f6e\u90ae\u7bb1\u57df\u540d\u767d\u540d\u5355",(0,g0.jsx)(W0.A.Subheader,{children:"\u7528\u4ee5\u9632\u6b62\u6076\u610f\u7528\u6237\u5229\u7528\u4e34\u65f6\u90ae\u7bb1\u6279\u91cf\u6ce8\u518c"})]}),(0,g0.jsx)(p5.Group,{widths:3,children:(0,g0.jsx)(p5.Checkbox,{label:"\u542f\u7528\u90ae\u7bb1\u57df\u540d\u767d\u540d\u5355",name:"EmailDomainRestrictionEnabled",onChange:p,checked:"true"===e.EmailDomainRestrictionEnabled})}),(0,g0.jsxs)(p5.Group,{widths:2,children:[(0,g0.jsx)(p5.Dropdown,{label:"\u5141\u8bb8\u7684\u90ae\u7bb1\u57df\u540d",placeholder:"\u5141\u8bb8\u7684\u90ae\u7bb1\u57df\u540d",name:"EmailDomainWhitelist",required:!0,fluid:!0,multiple:!0,selection:!0,onChange:p,value:e.EmailDomainWhitelist,autoComplete:"new-password",options:a}),(0,g0.jsx)(p5.Input,{label:"\u6dfb\u52a0\u65b0\u7684\u5141\u8bb8\u7684\u90ae\u7bb1\u57df\u540d",action:(0,g0.jsx)(u1,{type:"button",onClick:()=>{g()},children:"\u586b\u5165"}),onKeyDown:e=>{"Enter"===e.key&&g()},autoComplete:"new-password",placeholder:"\u8f93\u5165\u65b0\u7684\u5141\u8bb8\u7684\u90ae\u7bb1\u57df\u540d",value:l,onChange:(e,t)=>{let{value:i}=t;c(i)}})]}),(0,g0.jsx)(p5.Button,{onClick:async()=>{i.EmailDomainWhitelist!==e.EmailDomainWhitelist.join(",")&&""!==e.SMTPToken&&await u("EmailDomainWhitelist",e.EmailDomainWhitelist.join(","))},children:"\u4fdd\u5b58\u90ae\u7bb1\u57df\u540d\u767d\u540d\u5355\u8bbe\u7f6e"}),(0,g0.jsx)(z5,{}),(0,g0.jsxs)(W0.A,{as:"h3",children:["\u914d\u7f6e SMTP",(0,g0.jsx)(W0.A.Subheader,{children:"\u7528\u4ee5\u652f\u6301\u7cfb\u7edf\u7684\u90ae\u4ef6\u53d1\u9001"})]}),(0,g0.jsxs)(p5.Group,{widths:3,children:[(0,g0.jsx)(p5.Input,{label:"SMTP \u670d\u52a1\u5668\u5730\u5740",name:"SMTPServer",onChange:p,autoComplete:"new-password",value:e.SMTPServer,placeholder:"\u4f8b\u5982\uff1asmtp.qq.com"}),(0,g0.jsx)(p5.Input,{label:"SMTP \u7aef\u53e3",name:"SMTPPort",onChange:p,autoComplete:"new-password",value:e.SMTPPort,placeholder:"\u9ed8\u8ba4: 587"}),(0,g0.jsx)(p5.Input,{label:"SMTP \u8d26\u6237",name:"SMTPAccount",onChange:p,autoComplete:"new-password",value:e.SMTPAccount,placeholder:"\u901a\u5e38\u662f\u90ae\u7bb1\u5730\u5740"})]}),(0,g0.jsxs)(p5.Group,{widths:3,children:[(0,g0.jsx)(p5.Input,{label:"SMTP \u53d1\u9001\u8005\u90ae\u7bb1",name:"SMTPFrom",onChange:p,autoComplete:"new-password",value:e.SMTPFrom,placeholder:"\u901a\u5e38\u548c\u90ae\u7bb1\u5730\u5740\u4fdd\u6301\u4e00\u81f4"}),(0,g0.jsx)(p5.Input,{label:"SMTP \u8bbf\u95ee\u51ed\u8bc1",name:"SMTPToken",onChange:p,type:"password",autoComplete:"new-password",checked:"true"===e.RegisterEnabled,placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a"})]}),(0,g0.jsx)(p5.Button,{onClick:async()=>{i.SMTPServer!==e.SMTPServer&&await u("SMTPServer",e.SMTPServer),i.SMTPAccount!==e.SMTPAccount&&await u("SMTPAccount",e.SMTPAccount),i.SMTPFrom!==e.SMTPFrom&&await u("SMTPFrom",e.SMTPFrom),i.SMTPPort!==e.SMTPPort&&""!==e.SMTPPort&&await u("SMTPPort",e.SMTPPort),i.SMTPToken!==e.SMTPToken&&""!==e.SMTPToken&&await u("SMTPToken",e.SMTPToken)},children:"\u4fdd\u5b58 SMTP \u8bbe\u7f6e"}),(0,g0.jsx)(z5,{}),(0,g0.jsxs)(W0.A,{as:"h3",children:["\u914d\u7f6e GitHub OAuth App",(0,g0.jsxs)(W0.A.Subheader,{children:["\u7528\u4ee5\u652f\u6301\u901a\u8fc7 GitHub \u8fdb\u884c\u767b\u5f55\u6ce8\u518c\uff0c",(0,g0.jsx)("a",{href:"https://github.com/settings/developers",target:"_blank",children:"\u70b9\u51fb\u6b64\u5904"}),"\u7ba1\u7406\u4f60\u7684 GitHub OAuth App"]})]}),(0,g0.jsxs)(S5,{children:["Homepage URL \u586b ",(0,g0.jsx)("code",{children:e.ServerAddress}),"\uff0cAuthorization callback URL \u586b"," ",(0,g0.jsx)("code",{children:"".concat(e.ServerAddress,"/oauth/github")})]}),(0,g0.jsxs)(p5.Group,{widths:3,children:[(0,g0.jsx)(p5.Input,{label:"GitHub Client ID",name:"GitHubClientId",onChange:p,autoComplete:"new-password",value:e.GitHubClientId,placeholder:"\u8f93\u5165\u4f60\u6ce8\u518c\u7684 GitHub OAuth APP \u7684 ID"}),(0,g0.jsx)(p5.Input,{label:"GitHub Client Secret",name:"GitHubClientSecret",onChange:p,type:"password",autoComplete:"new-password",value:e.GitHubClientSecret,placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a"})]}),(0,g0.jsx)(p5.Button,{onClick:async()=>{i.GitHubClientId!==e.GitHubClientId&&await u("GitHubClientId",e.GitHubClientId),i.GitHubClientSecret!==e.GitHubClientSecret&&""!==e.GitHubClientSecret&&await u("GitHubClientSecret",e.GitHubClientSecret)},children:"\u4fdd\u5b58 GitHub OAuth \u8bbe\u7f6e"}),(0,g0.jsx)(z5,{}),(0,g0.jsxs)(W0.A,{as:"h3",children:["\u914d\u7f6e WeChat Server",(0,g0.jsxs)(W0.A.Subheader,{children:["\u7528\u4ee5\u652f\u6301\u901a\u8fc7\u5fae\u4fe1\u8fdb\u884c\u767b\u5f55\u6ce8\u518c\uff0c",(0,g0.jsx)("a",{href:"https://github.com/songquanpeng/wechat-server",target:"_blank",children:"\u70b9\u51fb\u6b64\u5904"}),"\u4e86\u89e3 WeChat Server"]})]}),(0,g0.jsxs)(p5.Group,{widths:3,children:[(0,g0.jsx)(p5.Input,{label:"WeChat Server \u670d\u52a1\u5668\u5730\u5740",name:"WeChatServerAddress",placeholder:"\u4f8b\u5982\uff1ahttps://yourdomain.com",onChange:p,autoComplete:"new-password",value:e.WeChatServerAddress}),(0,g0.jsx)(p5.Input,{label:"WeChat Server \u8bbf\u95ee\u51ed\u8bc1",name:"WeChatServerToken",type:"password",onChange:p,autoComplete:"new-password",value:e.WeChatServerToken,placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a"}),(0,g0.jsx)(p5.Input,{label:"\u5fae\u4fe1\u516c\u4f17\u53f7\u4e8c\u7ef4\u7801\u56fe\u7247\u94fe\u63a5",name:"WeChatAccountQRCodeImageURL",onChange:p,autoComplete:"new-password",value:e.WeChatAccountQRCodeImageURL,placeholder:"\u8f93\u5165\u4e00\u4e2a\u56fe\u7247\u94fe\u63a5"})]}),(0,g0.jsx)(p5.Button,{onClick:async()=>{i.WeChatServerAddress!==e.WeChatServerAddress&&await u("WeChatServerAddress",(0,m0.UC)(e.WeChatServerAddress)),i.WeChatAccountQRCodeImageURL!==e.WeChatAccountQRCodeImageURL&&await u("WeChatAccountQRCodeImageURL",e.WeChatAccountQRCodeImageURL),i.WeChatServerToken!==e.WeChatServerToken&&""!==e.WeChatServerToken&&await u("WeChatServerToken",e.WeChatServerToken)},children:"\u4fdd\u5b58 WeChat Server \u8bbe\u7f6e"}),(0,g0.jsx)(z5,{}),(0,g0.jsxs)(W0.A,{as:"h3",children:["\u914d\u7f6e Message Pusher",(0,g0.jsxs)(W0.A.Subheader,{children:["\u7528\u4ee5\u63a8\u9001\u62a5\u8b66\u4fe1\u606f\uff0c",(0,g0.jsx)("a",{href:"https://github.com/songquanpeng/message-pusher",target:"_blank",children:"\u70b9\u51fb\u6b64\u5904"}),"\u4e86\u89e3 Message Pusher"]})]}),(0,g0.jsxs)(p5.Group,{widths:3,children:[(0,g0.jsx)(p5.Input,{label:"Message Pusher \u63a8\u9001\u5730\u5740",name:"MessagePusherAddress",placeholder:"\u4f8b\u5982\uff1ahttps://msgpusher.com/push/your_username",onChange:p,autoComplete:"new-password",value:e.MessagePusherAddress}),(0,g0.jsx)(p5.Input,{label:"Message Pusher \u8bbf\u95ee\u51ed\u8bc1",name:"MessagePusherToken",type:"password",onChange:p,autoComplete:"new-password",value:e.MessagePusherToken,placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a"})]}),(0,g0.jsx)(p5.Button,{onClick:async()=>{i.MessagePusherAddress!==e.MessagePusherAddress&&await u("MessagePusherAddress",(0,m0.UC)(e.MessagePusherAddress)),i.MessagePusherToken!==e.MessagePusherToken&&""!==e.MessagePusherToken&&await u("MessagePusherToken",e.MessagePusherToken)},children:"\u4fdd\u5b58 Message Pusher \u8bbe\u7f6e"}),(0,g0.jsx)(z5,{}),(0,g0.jsxs)(W0.A,{as:"h3",children:["\u914d\u7f6e Turnstile",(0,g0.jsxs)(W0.A.Subheader,{children:["\u7528\u4ee5\u652f\u6301\u7528\u6237\u6821\u9a8c\uff0c",(0,g0.jsx)("a",{href:"https://dash.cloudflare.com/",target:"_blank",children:"\u70b9\u51fb\u6b64\u5904"}),"\u7ba1\u7406\u4f60\u7684 Turnstile Sites\uff0c\u63a8\u8350\u9009\u62e9 Invisible Widget Type"]})]}),(0,g0.jsxs)(p5.Group,{widths:3,children:[(0,g0.jsx)(p5.Input,{label:"Turnstile Site Key",name:"TurnstileSiteKey",onChange:p,autoComplete:"new-password",value:e.TurnstileSiteKey,placeholder:"\u8f93\u5165\u4f60\u6ce8\u518c\u7684 Turnstile Site Key"}),(0,g0.jsx)(p5.Input,{label:"Turnstile Secret Key",name:"TurnstileSecretKey",onChange:p,type:"password",autoComplete:"new-password",value:e.TurnstileSecretKey,placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a"})]}),(0,g0.jsx)(p5.Button,{onClick:async()=>{i.TurnstileSiteKey!==e.TurnstileSiteKey&&await u("TurnstileSiteKey",e.TurnstileSiteKey),i.TurnstileSecretKey!==e.TurnstileSecretKey&&""!==e.TurnstileSecretKey&&await u("TurnstileSecretKey",e.TurnstileSecretKey)},children:"\u4fdd\u5b58 Turnstile \u8bbe\u7f6e"})]})})})};var l4=i(20096);const c4=()=>{let[e,t]=(0,P$.useState)({Footer:"",Notice:"",About:"",SystemName:"",Logo:"",HomePageContent:"",Theme:""}),[i,n]=(0,P$.useState)(!1);const[r,s]=(0,P$.useState)(!1),[a,o]=(0,P$.useState)({tag_name:"",content:""});(0,P$.useEffect)((()=>{(async()=>{const i=await m0.nC.get("/api/option/"),{success:n,message:r,data:s}=i.data;if(n){let i={};s.forEach((t=>{t.key in e&&(i[t.key]=t.value)})),t(i)}else(0,m0.Qg)(r)})().then()}),[]);const l=async(e,i)=>{n(!0);const r=await m0.nC.put("/api/option/",{key:e,value:i}),{success:s,message:a}=r.data;s?t((t=>({...t,[e]:i}))):(0,m0.Qg)(a),n(!1)},c=async(e,i)=>{let{name:n,value:r}=i;t((e=>({...e,[n]:r})))};return(0,g0.jsxs)(U0,{columns:1,children:[(0,g0.jsx)(U0.Column,{children:(0,g0.jsxs)(p5,{loading:i,children:[(0,g0.jsx)(W0.A,{as:"h3",children:"\u901a\u7528\u8bbe\u7f6e"}),(0,g0.jsx)(p5.Button,{onClick:async()=>{const e=await m0.nC.get("https://api.github.com/repos/songquanpeng/one-api/releases/latest"),{tag_name:t,body:i}=e.data;""===t?(0,m0.Te)("\u5df2\u662f\u6700\u65b0\u7248\u672c\uff1a".concat(t)):(o({tag_name:t,content:l4.xI.parse(i)}),s(!0))},children:"\u68c0\u67e5\u66f4\u65b0"}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.TextArea,{label:"\u516c\u544a",placeholder:"\u5728\u6b64\u8f93\u5165\u65b0\u7684\u516c\u544a\u5185\u5bb9\uff0c\u652f\u6301 Markdown & HTML \u4ee3\u7801",value:e.Notice,name:"Notice",onChange:c,style:{minHeight:150,fontFamily:"JetBrains Mono, Consolas"}})}),(0,g0.jsx)(p5.Button,{onClick:async()=>{await l("Notice",e.Notice)},children:"\u4fdd\u5b58\u516c\u544a"}),(0,g0.jsx)(z5,{}),(0,g0.jsx)(W0.A,{as:"h3",children:"\u4e2a\u6027\u5316\u8bbe\u7f6e"}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.Input,{label:"\u7cfb\u7edf\u540d\u79f0",placeholder:"\u5728\u6b64\u8f93\u5165\u7cfb\u7edf\u540d\u79f0",value:e.SystemName,name:"SystemName",onChange:c})}),(0,g0.jsx)(p5.Button,{onClick:async()=>{await l("SystemName",e.SystemName)},children:"\u8bbe\u7f6e\u7cfb\u7edf\u540d\u79f0"}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.Input,{label:(0,g0.jsxs)("label",{children:["\u4e3b\u9898\u540d\u79f0\uff08",(0,g0.jsx)(e0,{to:"https://github.com/songquanpeng/one-api/blob/main/web/README.md",children:"\u5f53\u524d\u53ef\u7528\u4e3b\u9898"}),"\uff09"]}),placeholder:"\u8bf7\u8f93\u5165\u4e3b\u9898\u540d\u79f0",value:e.Theme,name:"Theme",onChange:c})}),(0,g0.jsx)(p5.Button,{onClick:async()=>{await l("Theme",e.Theme)},children:"\u8bbe\u7f6e\u4e3b\u9898\uff08\u91cd\u542f\u751f\u6548\uff09"}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.Input,{label:"Logo \u56fe\u7247\u5730\u5740",placeholder:"\u5728\u6b64\u8f93\u5165 Logo \u56fe\u7247\u5730\u5740",value:e.Logo,name:"Logo",type:"url",onChange:c})}),(0,g0.jsx)(p5.Button,{onClick:async()=>{await l("Logo",e.Logo)},children:"\u8bbe\u7f6e Logo"}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.TextArea,{label:"\u9996\u9875\u5185\u5bb9",placeholder:"\u5728\u6b64\u8f93\u5165\u9996\u9875\u5185\u5bb9\uff0c\u652f\u6301 Markdown & HTML \u4ee3\u7801\uff0c\u8bbe\u7f6e\u540e\u9996\u9875\u7684\u72b6\u6001\u4fe1\u606f\u5c06\u4e0d\u518d\u663e\u793a\u3002\u5982\u679c\u8f93\u5165\u7684\u662f\u4e00\u4e2a\u94fe\u63a5\uff0c\u5219\u4f1a\u4f7f\u7528\u8be5\u94fe\u63a5\u4f5c\u4e3a iframe \u7684 src \u5c5e\u6027\uff0c\u8fd9\u5141\u8bb8\u4f60\u8bbe\u7f6e\u4efb\u610f\u7f51\u9875\u4f5c\u4e3a\u9996\u9875\u3002",value:e.HomePageContent,name:"HomePageContent",onChange:c,style:{minHeight:150,fontFamily:"JetBrains Mono, Consolas"}})}),(0,g0.jsx)(p5.Button,{onClick:()=>(async t=>{await l(t,e[t])})("HomePageContent"),children:"\u4fdd\u5b58\u9996\u9875\u5185\u5bb9"}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.TextArea,{label:"\u5173\u4e8e",placeholder:"\u5728\u6b64\u8f93\u5165\u65b0\u7684\u5173\u4e8e\u5185\u5bb9\uff0c\u652f\u6301 Markdown & HTML \u4ee3\u7801\u3002\u5982\u679c\u8f93\u5165\u7684\u662f\u4e00\u4e2a\u94fe\u63a5\uff0c\u5219\u4f1a\u4f7f\u7528\u8be5\u94fe\u63a5\u4f5c\u4e3a iframe \u7684 src \u5c5e\u6027\uff0c\u8fd9\u5141\u8bb8\u4f60\u8bbe\u7f6e\u4efb\u610f\u7f51\u9875\u4f5c\u4e3a\u5173\u4e8e\u9875\u9762\u3002",value:e.About,name:"About",onChange:c,style:{minHeight:150,fontFamily:"JetBrains Mono, Consolas"}})}),(0,g0.jsx)(p5.Button,{onClick:async()=>{await l("About",e.About)},children:"\u4fdd\u5b58\u5173\u4e8e"}),(0,g0.jsx)(S5,{children:"\u79fb\u9664 One API \u7684\u7248\u6743\u6807\u8bc6\u5fc5\u987b\u9996\u5148\u83b7\u5f97\u6388\u6743\uff0c\u9879\u76ee\u7ef4\u62a4\u9700\u8981\u82b1\u8d39\u5927\u91cf\u7cbe\u529b\uff0c\u5982\u679c\u672c\u9879\u76ee\u5bf9\u4f60\u6709\u610f\u4e49\uff0c\u8bf7\u4e3b\u52a8\u652f\u6301\u672c\u9879\u76ee\u3002"}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.Input,{label:"\u9875\u811a",placeholder:"\u5728\u6b64\u8f93\u5165\u65b0\u7684\u9875\u811a\uff0c\u7559\u7a7a\u5219\u4f7f\u7528\u9ed8\u8ba4\u9875\u811a\uff0c\u652f\u6301 HTML \u4ee3\u7801",value:e.Footer,name:"Footer",onChange:c})}),(0,g0.jsx)(p5.Button,{onClick:async()=>{await l("Footer",e.Footer)},children:"\u8bbe\u7f6e\u9875\u811a"})]})}),(0,g0.jsxs)(a4,{onClose:()=>s(!1),onOpen:()=>s(!0),open:r,children:[(0,g0.jsxs)(a4.Header,{children:["\u65b0\u7248\u672c\uff1a",a.tag_name]}),(0,g0.jsx)(a4.Content,{children:(0,g0.jsx)(a4.Description,{children:(0,g0.jsx)("div",{dangerouslySetInnerHTML:{__html:a.content}})})}),(0,g0.jsxs)(a4.Actions,{children:[(0,g0.jsx)(u1,{onClick:()=>s(!1),children:"\u5173\u95ed"}),(0,g0.jsx)(u1,{content:"\u8be6\u60c5",onClick:()=>{s(!1),window.location="https://github.com/songquanpeng/one-api/releases/latest"}})]})]})]})},h4=()=>{var e,t,i,n,r,s,a,o;const[l,c]=(0,P$.useContext)(T5);let h=EJ();const[d,u]=(0,P$.useState)({wechat_verification_code:"",email_verification_code:"",email:"",self_account_deletion_confirmation:"",set_new_password:"",set_new_password_confirmation:""}),[p,g]=(0,P$.useState)({}),[f,m]=(0,P$.useState)(!1),[v,y]=(0,P$.useState)(!1),[b,_]=(0,P$.useState)(!1),[x,S]=(0,P$.useState)(!1),[w,C]=(0,P$.useState)(!1),[k,A]=(0,P$.useState)(""),[E,T]=(0,P$.useState)(""),[O,P]=(0,P$.useState)(!1),[M,I]=(0,P$.useState)(!1),[R,D]=(0,P$.useState)(30),[L,j]=(0,P$.useState)(""),[F,B]=(0,P$.useState)(""),[N,z]=(0,P$.useState)(!1),[H,V]=(0,P$.useState)(0);(0,P$.useEffect)((()=>{let e=localStorage.getItem("status");e&&(e=JSON.parse(e),g(e),e.turnstile_check&&(C(!0),A(e.turnstile_site_key))),G().then((e=>{console.log(l)})),W().then(),V(w0())}),[]),(0,P$.useEffect)((()=>{let e=null;return M&&R>0?e=setInterval((()=>{D(R-1)}),1e3):0===R&&(I(!1),D(30)),()=>clearInterval(e)}),[M,R]);const U=(e,t)=>{u((i=>({...i,[e]:t})))},W=async()=>{const e=await m0.nC.get("/api/user/aff"),{success:t,message:i,data:n}=e.data;if(t){let e="".concat(window.location.origin,"/register?aff=").concat(n);j(e)}else(0,m0.Qg)(i)},G=async()=>{let e=await m0.nC.get("/api/user/self");const{success:t,message:i,data:n}=e.data;t?c({type:"login",payload:n}):(0,m0.Qg)(i)},K=()=>l.user?l.user.username:"null";return(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.Layout,{children:(0,g0.jsxs)(v0.Layout.Content,{children:[(0,g0.jsxs)(v0.aF,{title:"\u8bf7\u8f93\u5165\u8981\u5212\u8f6c\u7684\u6570\u91cf",visible:N,onOk:async()=>{if(H<w0())return void(0,m0.Qg)("\u5212\u8f6c\u91d1\u989d\u6700\u4f4e\u4e3a"+k0(w0()));const e=await m0.nC.post("/api/user/aff_transfer",{quota:H}),{success:t,message:i}=e.data;t?((0,m0.Te)(i),z(!1),G().then()):(0,m0.Qg)(i)},onCancel:()=>{z(!1)},maskClosable:!1,size:"small",centered:!0,children:[(0,g0.jsxs)("div",{style:{marginTop:20},children:[(0,g0.jsx)(v0.o5.Text,{children:"\u53ef\u7528\u989d\u5ea6".concat(A0(null===l||void 0===l||null===(e=l.user)||void 0===e?void 0:e.aff_quota))}),(0,g0.jsx)(v0.pd,{style:{marginTop:5},value:null===l||void 0===l||null===(t=l.user)||void 0===t?void 0:t.aff_quota,disabled:!0})]}),(0,g0.jsxs)("div",{style:{marginTop:20},children:[(0,g0.jsx)(v0.o5.Text,{children:"\u5212\u8f6c\u989d\u5ea6".concat(A0(H)," \u6700\u4f4e")+k0(w0())}),(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.YI,{min:0,style:{marginTop:5},value:H,onChange:e=>V(e),disabled:!1})})]})]}),(0,g0.jsxs)("div",{style:{marginTop:20},children:[(0,g0.jsx)(v0.Zp,{title:(0,g0.jsx)(v0.Zp.Meta,{avatar:(0,g0.jsx)(v0.eu,{size:"default",color:O0(K()),style:{marginRight:4},children:"string"===typeof K()&&K().slice(0,1)}),title:(0,g0.jsx)(v0.o5.Text,{children:K()}),description:(0,m0.jX)()?(0,g0.jsx)(v0.vw,{color:"red",children:"\u7ba1\u7406\u5458"}):(0,g0.jsx)(v0.vw,{color:"blue",children:"\u666e\u901a\u7528\u6237"})}),headerExtraContent:(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsxs)(v0.$x,{vertical:!0,align:"start",children:[(0,g0.jsx)(v0.vw,{color:"green",children:"ID: "+(null===l||void 0===l||null===(i=l.user)||void 0===i?void 0:i.id)}),(0,g0.jsx)(v0.vw,{color:"blue",children:null===l||void 0===l||null===(n=l.user)||void 0===n?void 0:n.group})]})}),footer:(0,g0.jsxs)(v0.KH,{row:!0,children:[(0,g0.jsx)(v0.KH.Item,{itemKey:"\u5f53\u524d\u4f59\u989d",children:k0(null===l||void 0===l||null===(r=l.user)||void 0===r?void 0:r.quota)}),(0,g0.jsx)(v0.KH.Item,{itemKey:"\u5386\u53f2\u6d88\u8017",children:k0(null===l||void 0===l||null===(s=l.user)||void 0===s?void 0:s.used_quota)}),(0,g0.jsx)(v0.KH.Item,{itemKey:"\u8bf7\u6c42\u6b21\u6570",children:null===(a=l.user)||void 0===a?void 0:a.request_count})]}),children:(0,g0.jsx)(v0.o5.Title,{heading:6,children:"\u8c03\u7528\u4fe1\u606f"})}),(0,g0.jsxs)(v0.Zp,{children:[(0,g0.jsx)(v0.o5.Title,{heading:6,children:"\u9080\u8bf7\u94fe\u63a5"}),(0,g0.jsx)(v0.pd,{style:{marginTop:10},value:L,onClick:async e=>{e.target.select(),await(0,m0.C)(e.target.value),(0,m0.Te)("\u9080\u8bf7\u94fe\u63a5\u5df2\u590d\u5236\u5230\u526a\u5207\u677f")},readOnly:!0})]}),(0,g0.jsxs)(v0.Zp,{children:[(0,g0.jsx)(v0.o5.Title,{heading:6,children:"\u4e2a\u4eba\u4fe1\u606f"}),(0,g0.jsxs)("div",{style:{marginTop:20},children:[(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u90ae\u7bb1"}),(0,g0.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.pd,{value:l.user&&""!==l.user.email?l.user.email:"\u672a\u7ed1\u5b9a",readonly:!0})}),(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.$n,{onClick:()=>{_(!0)},children:l.user&&""!==l.user.email?"\u4fee\u6539\u7ed1\u5b9a":"\u7ed1\u5b9a\u90ae\u7bb1"})})]})]}),(0,g0.jsxs)("div",{style:{marginTop:10},children:[(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u5fae\u4fe1"}),(0,g0.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.pd,{value:l.user&&""!==l.user.wechat_id?"\u5df2\u7ed1\u5b9a":"\u672a\u7ed1\u5b9a",readonly:!0})}),(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.$n,{disabled:l.user&&""!==l.user.wechat_id||!p.wechat_login,children:p.wechat_login?"\u7ed1\u5b9a":"\u672a\u542f\u7528"})})]})]}),(0,g0.jsxs)("div",{style:{marginTop:10},children:[(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"GitHub"}),(0,g0.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.pd,{value:l.user&&""!==l.user.github_id?l.user.github_id:"\u672a\u7ed1\u5b9a",readonly:!0})}),(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.$n,{onClick:()=>{P5(p.github_client_id)},disabled:l.user&&""!==l.user.github_id||!p.github_oauth,children:p.github_oauth?"\u7ed1\u5b9a":"\u672a\u542f\u7528"})})]})]}),(0,g0.jsxs)("div",{style:{marginTop:10},children:[(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.$n,{onClick:async()=>{const e=await m0.nC.get("/api/user/token"),{success:t,message:i,data:n}=e.data;t?(B(n),await(0,m0.C)(n),(0,m0.Te)("\u4ee4\u724c\u5df2\u91cd\u7f6e\u5e76\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f")):(0,m0.Qg)(i)},children:"\u751f\u6210\u7cfb\u7edf\u8bbf\u95ee\u4ee4\u724c"}),(0,g0.jsx)(v0.$n,{onClick:()=>{m(!0)},children:"\u4fee\u6539\u5bc6\u7801"}),(0,g0.jsx)(v0.$n,{type:"danger",onClick:()=>{S(!0)},children:"\u5220\u9664\u4e2a\u4eba\u8d26\u6237"})]}),F&&(0,g0.jsx)(v0.pd,{readOnly:!0,value:F,onClick:async e=>{e.target.select(),await(0,m0.C)(e.target.value),(0,m0.Te)("\u7cfb\u7edf\u4ee4\u724c\u5df2\u590d\u5236\u5230\u526a\u5207\u677f")},style:{marginTop:"10px"}}),p.wechat_login&&(0,g0.jsx)(v0.$n,{onClick:()=>{y(!0)},children:"\u7ed1\u5b9a\u5fae\u4fe1\u8d26\u53f7"}),(0,g0.jsxs)(v0.aF,{onCancel:()=>y(!1),visible:v,size:"mini",children:[(0,g0.jsx)(v0._V,{src:p.wechat_qrcode}),(0,g0.jsx)("div",{style:{textAlign:"center"},children:(0,g0.jsx)("p",{children:"\u5fae\u4fe1\u626b\u7801\u5173\u6ce8\u516c\u4f17\u53f7\uff0c\u8f93\u5165\u300c\u9a8c\u8bc1\u7801\u300d\u83b7\u53d6\u9a8c\u8bc1\u7801\uff08\u4e09\u5206\u949f\u5185\u6709\u6548\uff09"})}),(0,g0.jsx)(v0.pd,{placeholder:"\u9a8c\u8bc1\u7801",name:"wechat_verification_code",value:d.wechat_verification_code,onChange:e=>U("wechat_verification_code",e)}),(0,g0.jsx)(v0.$n,{color:"",fluid:!0,size:"large",onClick:async()=>{if(""===d.wechat_verification_code)return;const e=await m0.nC.get("/api/oauth/wechat/bind?code=".concat(d.wechat_verification_code)),{success:t,message:i}=e.data;t?((0,m0.Te)("\u5fae\u4fe1\u8d26\u6237\u7ed1\u5b9a\u6210\u529f\uff01"),y(!1)):(0,m0.Qg)(i)},children:"\u7ed1\u5b9a"})]})]})]}),(0,g0.jsxs)(v0.aF,{onCancel:()=>_(!1),onOk:async()=>{if(""===d.email_verification_code)return void(0,m0.Qg)("\u8bf7\u8f93\u5165\u90ae\u7bb1\u9a8c\u8bc1\u7801\uff01");P(!0);const e=await m0.nC.get("/api/oauth/email/bind?email=".concat(d.email,"&code=").concat(d.email_verification_code)),{success:t,message:i}=e.data;t?((0,m0.Te)("\u90ae\u7bb1\u8d26\u6237\u7ed1\u5b9a\u6210\u529f\uff01"),_(!1),l.user.email=d.email):(0,m0.Qg)(i),P(!1)},visible:b,size:"small",centered:!0,maskClosable:!1,children:[(0,g0.jsx)(v0.o5.Title,{heading:6,children:"\u7ed1\u5b9a\u90ae\u7bb1\u5730\u5740"}),(0,g0.jsxs)("div",{style:{marginTop:20,display:"flex",justifyContent:"space-between"},children:[(0,g0.jsx)(v0.pd,{fluid:!0,placeholder:"\u8f93\u5165\u90ae\u7bb1\u5730\u5740",onChange:e=>U("email",e),name:"email",type:"email"}),(0,g0.jsx)(v0.$n,{onClick:async()=>{if(""===d.email)return void(0,m0.Qg)("\u8bf7\u8f93\u5165\u90ae\u7bb1\uff01");if(I(!0),w&&""===E)return void(0,m0.cf)("\u8bf7\u7a0d\u540e\u51e0\u79d2\u91cd\u8bd5\uff0cTurnstile \u6b63\u5728\u68c0\u67e5\u7528\u6237\u73af\u5883\uff01");P(!0);const e=await m0.nC.get("/api/verification?email=".concat(d.email,"&turnstile=").concat(E)),{success:t,message:i}=e.data;t?(0,m0.Te)("\u9a8c\u8bc1\u7801\u53d1\u9001\u6210\u529f\uff0c\u8bf7\u68c0\u67e5\u90ae\u7bb1\uff01"):(0,m0.Qg)(i),P(!1)},disabled:M||O,children:M?"\u91cd\u65b0\u53d1\u9001(".concat(R,")"):"\u83b7\u53d6\u9a8c\u8bc1\u7801"})]}),(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.pd,{fluid:!0,placeholder:"\u9a8c\u8bc1\u7801",name:"email_verification_code",value:d.email_verification_code,onChange:e=>U("email_verification_code",e)})}),w?(0,g0.jsx)(C5(),{sitekey:k,onVerify:e=>{T(e)}}):(0,g0.jsx)(g0.Fragment,{})]}),(0,g0.jsxs)(v0.aF,{onCancel:()=>S(!1),visible:x,size:"small",centered:!0,onOk:async()=>{if(d.self_account_deletion_confirmation!==l.user.username)return void(0,m0.Qg)("\u8bf7\u8f93\u5165\u4f60\u7684\u8d26\u6237\u540d\u4ee5\u786e\u8ba4\u5220\u9664\uff01");const e=await m0.nC.delete("/api/user/self"),{success:t,message:i}=e.data;t?((0,m0.Te)("\u8d26\u6237\u5df2\u5220\u9664\uff01"),await m0.nC.get("/api/user/logout"),c({type:"logout"}),localStorage.removeItem("user"),h("/login")):(0,m0.Qg)(i)},children:[(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.lZ,{type:"danger",description:"\u60a8\u6b63\u5728\u5220\u9664\u81ea\u5df1\u7684\u5e10\u6237\uff0c\u5c06\u6e05\u7a7a\u6240\u6709\u6570\u636e\u4e14\u4e0d\u53ef\u6062\u590d",closeIcon:null})}),(0,g0.jsxs)("div",{style:{marginTop:20},children:[(0,g0.jsx)(v0.pd,{placeholder:"\u8f93\u5165\u4f60\u7684\u8d26\u6237\u540d ".concat(null===l||void 0===l||null===(o=l.user)||void 0===o?void 0:o.username," \u4ee5\u786e\u8ba4\u5220\u9664"),name:"self_account_deletion_confirmation",value:d.self_account_deletion_confirmation,onChange:e=>U("self_account_deletion_confirmation",e)}),w?(0,g0.jsx)(C5(),{sitekey:k,onVerify:e=>{T(e)}}):(0,g0.jsx)(g0.Fragment,{})]})]}),(0,g0.jsx)(v0.aF,{onCancel:()=>m(!1),visible:f,size:"small",centered:!0,onOk:async()=>{if(d.set_new_password!==d.set_new_password_confirmation)return void(0,m0.Qg)("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01");const e=await m0.nC.put("/api/user/self",{password:d.set_new_password}),{success:t,message:i}=e.data;t?((0,m0.Te)("\u5bc6\u7801\u4fee\u6539\u6210\u529f\uff01"),y(!1)):(0,m0.Qg)(i),m(!1)},children:(0,g0.jsxs)("div",{style:{marginTop:20},children:[(0,g0.jsx)(v0.pd,{name:"set_new_password",placeholder:"\u65b0\u5bc6\u7801",value:d.set_new_password,onChange:e=>U("set_new_password",e)}),(0,g0.jsx)(v0.pd,{style:{marginTop:20},name:"set_new_password_confirmation",placeholder:"\u786e\u8ba4\u65b0\u5bc6\u7801",value:d.set_new_password_confirmation,onChange:e=>U("set_new_password_confirmation",e)}),w?(0,g0.jsx)(C5(),{sitekey:k,onVerify:e=>{T(e)}}):(0,g0.jsx)(g0.Fragment,{})]})})]})]})})})},d4=()=>{let e=new Date,[t,i]=(0,P$.useState)({QuotaForNewUser:0,QuotaForInviter:0,QuotaForInvitee:0,QuotaRemindThreshold:0,PreConsumedQuota:0,ModelRatio:"",CompletionRatio:"",GroupRatio:"",TopUpLink:"",ChatLink:"",QuotaPerUnit:0,AutomaticDisableChannelEnabled:"",AutomaticEnableChannelEnabled:"",ChannelDisableThreshold:0,LogConsumeEnabled:"",DisplayInCurrencyEnabled:"",DisplayTokenStatEnabled:"",ApproximateTokenEnabled:"",RetryTimes:0});const[n,r]=(0,P$.useState)({});let[s,a]=(0,P$.useState)(!1),[o,l]=(0,P$.useState)((0,m0.gA)(e.getTime()/1e3-2592e3));(0,P$.useEffect)((()=>{(async()=>{const e=await m0.nC.get("/api/option/"),{success:t,message:n,data:s}=e.data;if(t){let e={};s.forEach((t=>{"ModelRatio"!==t.key&&"GroupRatio"!==t.key&&"CompletionRatio"!==t.key||(t.value=JSON.stringify(JSON.parse(t.value),null,2)),"{}"===t.value&&(t.value=""),e[t.key]=t.value})),i(e),r(e)}else(0,m0.Qg)(n)})().then()}),[]);const c=async(e,n)=>{a(!0),e.endsWith("Enabled")&&(n="true"===t[e]?"false":"true");const r=await m0.nC.put("/api/option/",{key:e,value:n}),{success:s,message:o}=r.data;s?i((t=>({...t,[e]:n}))):(0,m0.Qg)(o),a(!1)},h=async(e,t)=>{let{name:n,value:r}=t;n.endsWith("Enabled")?await c(n,r):i((e=>({...e,[n]:r})))},d=async e=>{switch(e){case"monitor":n.ChannelDisableThreshold!==t.ChannelDisableThreshold&&await c("ChannelDisableThreshold",t.ChannelDisableThreshold),n.QuotaRemindThreshold!==t.QuotaRemindThreshold&&await c("QuotaRemindThreshold",t.QuotaRemindThreshold);break;case"ratio":if(n.ModelRatio!==t.ModelRatio){if(!(0,m0.oM)(t.ModelRatio))return void(0,m0.Qg)("\u6a21\u578b\u500d\u7387\u4e0d\u662f\u5408\u6cd5\u7684 JSON \u5b57\u7b26\u4e32");await c("ModelRatio",t.ModelRatio)}if(n.GroupRatio!==t.GroupRatio){if(!(0,m0.oM)(t.GroupRatio))return void(0,m0.Qg)("\u5206\u7ec4\u500d\u7387\u4e0d\u662f\u5408\u6cd5\u7684 JSON \u5b57\u7b26\u4e32");await c("GroupRatio",t.GroupRatio)}if(n.CompletionRatio!==t.CompletionRatio){if(!(0,m0.oM)(t.CompletionRatio))return void(0,m0.Qg)("\u8865\u5168\u500d\u7387\u4e0d\u662f\u5408\u6cd5\u7684 JSON \u5b57\u7b26\u4e32");await c("CompletionRatio",t.CompletionRatio)}break;case"quota":n.QuotaForNewUser!==t.QuotaForNewUser&&await c("QuotaForNewUser",t.QuotaForNewUser),n.QuotaForInvitee!==t.QuotaForInvitee&&await c("QuotaForInvitee",t.QuotaForInvitee),n.QuotaForInviter!==t.QuotaForInviter&&await c("QuotaForInviter",t.QuotaForInviter),n.PreConsumedQuota!==t.PreConsumedQuota&&await c("PreConsumedQuota",t.PreConsumedQuota);break;case"general":n.TopUpLink!==t.TopUpLink&&await c("TopUpLink",t.TopUpLink),n.ChatLink!==t.ChatLink&&await c("ChatLink",t.ChatLink),n.QuotaPerUnit!==t.QuotaPerUnit&&await c("QuotaPerUnit",t.QuotaPerUnit),n.RetryTimes!==t.RetryTimes&&await c("RetryTimes",t.RetryTimes)}};return(0,g0.jsx)(U0,{columns:1,children:(0,g0.jsx)(U0.Column,{children:(0,g0.jsxs)(p5,{loading:s,children:[(0,g0.jsx)(W0.A,{as:"h3",children:"\u901a\u7528\u8bbe\u7f6e"}),(0,g0.jsxs)(p5.Group,{widths:4,children:[(0,g0.jsx)(p5.Input,{label:"\u5145\u503c\u94fe\u63a5",name:"TopUpLink",onChange:h,autoComplete:"new-password",value:t.TopUpLink,type:"link",placeholder:"\u4f8b\u5982\u53d1\u5361\u7f51\u7ad9\u7684\u8d2d\u4e70\u94fe\u63a5"}),(0,g0.jsx)(p5.Input,{label:"\u804a\u5929\u9875\u9762\u94fe\u63a5",name:"ChatLink",onChange:h,autoComplete:"new-password",value:t.ChatLink,type:"link",placeholder:"\u4f8b\u5982 ChatGPT Next Web \u7684\u90e8\u7f72\u5730\u5740"}),(0,g0.jsx)(p5.Input,{label:"\u5355\u4f4d\u7f8e\u5143\u989d\u5ea6",name:"QuotaPerUnit",onChange:h,autoComplete:"new-password",value:t.QuotaPerUnit,type:"number",step:"0.01",placeholder:"\u4e00\u5355\u4f4d\u8d27\u5e01\u80fd\u5151\u6362\u7684\u989d\u5ea6"}),(0,g0.jsx)(p5.Input,{label:"\u5931\u8d25\u91cd\u8bd5\u6b21\u6570",name:"RetryTimes",type:"number",step:"1",min:"0",onChange:h,autoComplete:"new-password",value:t.RetryTimes,placeholder:"\u5931\u8d25\u91cd\u8bd5\u6b21\u6570"})]}),(0,g0.jsxs)(p5.Group,{inline:!0,children:[(0,g0.jsx)(p5.Checkbox,{checked:"true"===t.DisplayInCurrencyEnabled,label:"\u4ee5\u8d27\u5e01\u5f62\u5f0f\u663e\u793a\u989d\u5ea6",name:"DisplayInCurrencyEnabled",onChange:h}),(0,g0.jsx)(p5.Checkbox,{checked:"true"===t.DisplayTokenStatEnabled,label:"Billing \u76f8\u5173 API \u663e\u793a\u4ee4\u724c\u989d\u5ea6\u800c\u975e\u7528\u6237\u989d\u5ea6",name:"DisplayTokenStatEnabled",onChange:h}),(0,g0.jsx)(p5.Checkbox,{checked:"true"===t.ApproximateTokenEnabled,label:"\u4f7f\u7528\u8fd1\u4f3c\u7684\u65b9\u5f0f\u4f30\u7b97 token \u6570\u4ee5\u51cf\u5c11\u8ba1\u7b97\u91cf",name:"ApproximateTokenEnabled",onChange:h})]}),(0,g0.jsx)(p5.Button,{onClick:()=>{d("general").then()},children:"\u4fdd\u5b58\u901a\u7528\u8bbe\u7f6e"}),(0,g0.jsx)(z5,{}),(0,g0.jsx)(W0.A,{as:"h3",children:"\u65e5\u5fd7\u8bbe\u7f6e"}),(0,g0.jsx)(p5.Group,{inline:!0,children:(0,g0.jsx)(p5.Checkbox,{checked:"true"===t.LogConsumeEnabled,label:"\u542f\u7528\u989d\u5ea6\u6d88\u8d39\u65e5\u5fd7\u8bb0\u5f55",name:"LogConsumeEnabled",onChange:h})}),(0,g0.jsx)(p5.Group,{widths:4,children:(0,g0.jsx)(p5.Input,{label:"\u76ee\u6807\u65f6\u95f4",value:o,type:"datetime-local",name:"history_timestamp",onChange:(e,t)=>{let{name:i,value:n}=t;l(n)}})}),(0,g0.jsx)(p5.Button,{onClick:()=>{(async()=>{console.log(t);const e=await m0.nC.delete("/api/log/?target_timestamp=".concat(Date.parse(o)/1e3)),{success:i,message:n,data:r}=e.data;i?(0,m0.Te)("".concat(r," \u6761\u65e5\u5fd7\u5df2\u6e05\u7406\uff01")):(0,m0.Qg)("\u65e5\u5fd7\u6e05\u7406\u5931\u8d25\uff1a"+n)})().then()},children:"\u6e05\u7406\u5386\u53f2\u65e5\u5fd7"}),(0,g0.jsx)(z5,{}),(0,g0.jsx)(W0.A,{as:"h3",children:"\u76d1\u63a7\u8bbe\u7f6e"}),(0,g0.jsxs)(p5.Group,{widths:3,children:[(0,g0.jsx)(p5.Input,{label:"\u6700\u957f\u54cd\u5e94\u65f6\u95f4",name:"ChannelDisableThreshold",onChange:h,autoComplete:"new-password",value:t.ChannelDisableThreshold,type:"number",min:"0",placeholder:"\u5355\u4f4d\u79d2\uff0c\u5f53\u8fd0\u884c\u6e20\u9053\u5168\u90e8\u6d4b\u8bd5\u65f6\uff0c\u8d85\u8fc7\u6b64\u65f6\u95f4\u5c06\u81ea\u52a8\u7981\u7528\u6e20\u9053"}),(0,g0.jsx)(p5.Input,{label:"\u989d\u5ea6\u63d0\u9192\u9608\u503c",name:"QuotaRemindThreshold",onChange:h,autoComplete:"new-password",value:t.QuotaRemindThreshold,type:"number",min:"0",placeholder:"\u4f4e\u4e8e\u6b64\u989d\u5ea6\u65f6\u5c06\u53d1\u9001\u90ae\u4ef6\u63d0\u9192\u7528\u6237"})]}),(0,g0.jsxs)(p5.Group,{inline:!0,children:[(0,g0.jsx)(p5.Checkbox,{checked:"true"===t.AutomaticDisableChannelEnabled,label:"\u5931\u8d25\u65f6\u81ea\u52a8\u7981\u7528\u6e20\u9053",name:"AutomaticDisableChannelEnabled",onChange:h}),(0,g0.jsx)(p5.Checkbox,{checked:"true"===t.AutomaticEnableChannelEnabled,label:"\u6210\u529f\u65f6\u81ea\u52a8\u542f\u7528\u6e20\u9053",name:"AutomaticEnableChannelEnabled",onChange:h})]}),(0,g0.jsx)(p5.Button,{onClick:()=>{d("monitor").then()},children:"\u4fdd\u5b58\u76d1\u63a7\u8bbe\u7f6e"}),(0,g0.jsx)(z5,{}),(0,g0.jsx)(W0.A,{as:"h3",children:"\u989d\u5ea6\u8bbe\u7f6e"}),(0,g0.jsxs)(p5.Group,{widths:4,children:[(0,g0.jsx)(p5.Input,{label:"\u65b0\u7528\u6237\u521d\u59cb\u989d\u5ea6",name:"QuotaForNewUser",onChange:h,autoComplete:"new-password",value:t.QuotaForNewUser,type:"number",min:"0",placeholder:"\u4f8b\u5982\uff1a100"}),(0,g0.jsx)(p5.Input,{label:"\u8bf7\u6c42\u9884\u6263\u8d39\u989d\u5ea6",name:"PreConsumedQuota",onChange:h,autoComplete:"new-password",value:t.PreConsumedQuota,type:"number",min:"0",placeholder:"\u8bf7\u6c42\u7ed3\u675f\u540e\u591a\u9000\u5c11\u8865"}),(0,g0.jsx)(p5.Input,{label:"\u9080\u8bf7\u65b0\u7528\u6237\u5956\u52b1\u989d\u5ea6",name:"QuotaForInviter",onChange:h,autoComplete:"new-password",value:t.QuotaForInviter,type:"number",min:"0",placeholder:"\u4f8b\u5982\uff1a2000"}),(0,g0.jsx)(p5.Input,{label:"\u65b0\u7528\u6237\u4f7f\u7528\u9080\u8bf7\u7801\u5956\u52b1\u989d\u5ea6",name:"QuotaForInvitee",onChange:h,autoComplete:"new-password",value:t.QuotaForInvitee,type:"number",min:"0",placeholder:"\u4f8b\u5982\uff1a1000"})]}),(0,g0.jsx)(p5.Button,{onClick:()=>{d("quota").then()},children:"\u4fdd\u5b58\u989d\u5ea6\u8bbe\u7f6e"}),(0,g0.jsx)(z5,{}),(0,g0.jsx)(W0.A,{as:"h3",children:"\u500d\u7387\u8bbe\u7f6e"}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.TextArea,{label:"\u6a21\u578b\u500d\u7387",name:"ModelRatio",onChange:h,style:{minHeight:250,fontFamily:"JetBrains Mono, Consolas"},autoComplete:"new-password",value:t.ModelRatio,placeholder:"\u4e3a\u4e00\u4e2a JSON \u6587\u672c\uff0c\u952e\u4e3a\u6a21\u578b\u540d\u79f0\uff0c\u503c\u4e3a\u500d\u7387"})}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.TextArea,{label:"\u8865\u5168\u500d\u7387",name:"CompletionRatio",onChange:h,style:{minHeight:250,fontFamily:"JetBrains Mono, Consolas"},autoComplete:"new-password",value:t.CompletionRatio,placeholder:"\u4e3a\u4e00\u4e2a JSON \u6587\u672c\uff0c\u952e\u4e3a\u6a21\u578b\u540d\u79f0\uff0c\u503c\u4e3a\u500d\u7387\uff0c\u6b64\u5904\u7684\u500d\u7387\u8bbe\u7f6e\u662f\u6a21\u578b\u8865\u5168\u500d\u7387\u76f8\u8f83\u4e8e\u63d0\u793a\u500d\u7387\u7684\u6bd4\u4f8b\uff0c\u4f7f\u7528\u8be5\u8bbe\u7f6e\u53ef\u5f3a\u5236\u8986\u76d6 One API \u7684\u5185\u90e8\u6bd4\u4f8b"})}),(0,g0.jsx)(p5.Group,{widths:"equal",children:(0,g0.jsx)(p5.TextArea,{label:"\u5206\u7ec4\u500d\u7387",name:"GroupRatio",onChange:h,style:{minHeight:250,fontFamily:"JetBrains Mono, Consolas"},autoComplete:"new-password",value:t.GroupRatio,placeholder:"\u4e3a\u4e00\u4e2a JSON \u6587\u672c\uff0c\u952e\u4e3a\u5206\u7ec4\u540d\u79f0\uff0c\u503c\u4e3a\u500d\u7387"})}),(0,g0.jsx)(p5.Button,{onClick:()=>{d("ratio").then()},children:"\u4fdd\u5b58\u500d\u7387\u8bbe\u7f6e"})]})})})},u4=()=>{let e=[{tab:"\u4e2a\u4eba\u8bbe\u7f6e",content:(0,g0.jsx)(h4,{}),itemKey:"1"}];return(0,m0.jX)()&&(e.push({tab:"\u8fd0\u8425\u8bbe\u7f6e",content:(0,g0.jsx)(d4,{}),itemKey:"2"}),e.push({tab:"\u7cfb\u7edf\u8bbe\u7f6e",content:(0,g0.jsx)(o4,{}),itemKey:"3"}),e.push({tab:"\u5176\u4ed6\u8bbe\u7f6e",content:(0,g0.jsx)(c4,{}),itemKey:"4"})),(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.Layout,{children:(0,g0.jsx)(v0.Layout.Content,{children:(0,g0.jsx)(v0.tU,{type:"line",defaultActiveKey:"1",children:e.map((e=>(0,g0.jsx)(v0.mF,{itemKey:e.itemKey,tab:e.tab,children:e.content})))})})})})},p4=()=>{const[e,t]=(0,P$.useState)({email:""}),{email:i}=e,[n,r]=(0,P$.useState)(!1),[s,a]=(0,P$.useState)(!1),[o,l]=(0,P$.useState)(""),[c,h]=(0,P$.useState)(""),[d,u]=(0,P$.useState)(!1),[p,g]=(0,P$.useState)(30);return(0,P$.useEffect)((()=>{let e=null;return d&&p>0?e=setInterval((()=>{g(p-1)}),1e3):0===p&&(u(!1),g(30)),()=>clearInterval(e)}),[d,p]),(0,g0.jsx)(U0,{textAlign:"center",style:{marginTop:"48px"},children:(0,g0.jsxs)(U0.Column,{style:{maxWidth:450},children:[(0,g0.jsxs)(W0.A,{as:"h2",color:"",textAlign:"center",children:[(0,g0.jsx)(G0.A,{src:"/logo.png"})," \u5bc6\u7801\u91cd\u7f6e"]}),(0,g0.jsx)(p5,{size:"large",children:(0,g0.jsxs)(r0.A,{children:[(0,g0.jsx)(p5.Input,{fluid:!0,icon:"mail",iconPosition:"left",placeholder:"\u90ae\u7bb1\u5730\u5740",name:"email",value:i,onChange:function(e){const{name:i,value:n}=e.target;t((e=>({...e,[i]:n})))}}),s?(0,g0.jsx)(C5(),{sitekey:o,onVerify:e=>{h(e)}}):(0,g0.jsx)(g0.Fragment,{}),(0,g0.jsx)(u1,{color:"green",fluid:!0,size:"large",onClick:async function(n){if(u(!0),!i)return;if(s&&""===c)return void(0,m0.cf)("\u8bf7\u7a0d\u540e\u51e0\u79d2\u91cd\u8bd5\uff0cTurnstile \u6b63\u5728\u68c0\u67e5\u7528\u6237\u73af\u5883\uff01");r(!0);const a=await m0.nC.get("/api/reset_password?email=".concat(i,"&turnstile=").concat(c)),{success:o,message:l}=a.data;o?((0,m0.Te)("\u91cd\u7f6e\u90ae\u4ef6\u53d1\u9001\u6210\u529f\uff0c\u8bf7\u68c0\u67e5\u90ae\u7bb1\uff01"),t({...e,email:""})):(0,m0.Qg)(l),r(!1)},loading:n,disabled:d,children:d?"\u91cd\u8bd5 (".concat(p,")"):"\u63d0\u4ea4"})]})})]})})},g4=()=>{const[e,t]=n0(),[i,n]=(0,P$.useContext)(T5),[r,s]=(0,P$.useState)("\u5904\u7406\u4e2d..."),[a,o]=(0,P$.useState)(!0);let l=EJ();const c=async(e,t,i)=>{const r=await m0.nC.get("/api/oauth/github?code=".concat(e,"&state=").concat(t)),{success:a,message:o,data:h}=r.data;if(a)"bind"===o?((0,m0.Te)("\u7ed1\u5b9a\u6210\u529f\uff01"),l("/setting")):(n({type:"login",payload:h}),localStorage.setItem("user",JSON.stringify(h)),(0,m0.Te)("\u767b\u5f55\u6210\u529f\uff01"),l("/"));else{if((0,m0.Qg)(o),0===i)return s("\u64cd\u4f5c\u5931\u8d25\uff0c\u91cd\u5b9a\u5411\u81f3\u767b\u5f55\u754c\u9762\u4e2d..."),void l("/setting");i++,s("\u51fa\u73b0\u9519\u8bef\uff0c\u7b2c ".concat(i," \u6b21\u91cd\u8bd5\u4e2d...")),await new Promise((e=>setTimeout(e,2e3*i))),await c(e,t,i)}};return(0,P$.useEffect)((()=>{let t=e.get("code"),i=e.get("state");c(t,i,0).then()}),[]),(0,g0.jsx)(r0.A,{style:{minHeight:"300px"},children:(0,g0.jsx)(s0.A,{active:!0,inverted:!0,children:(0,g0.jsx)(p0,{size:"large",children:r})})})},f4=()=>{const[e,t]=(0,P$.useState)({email:"",token:""}),{email:i,token:n}=e,[r,s]=(0,P$.useState)(!1),[a,o]=(0,P$.useState)(!1),[l,c]=(0,P$.useState)(30),[h,d]=(0,P$.useState)(""),[u,p]=n0();return(0,P$.useEffect)((()=>{let e=u.get("token"),i=u.get("email");t({token:e,email:i})}),[]),(0,P$.useEffect)((()=>{let e=null;return a&&l>0?e=setInterval((()=>{c(l-1)}),1e3):0===l&&(o(!1),c(30)),()=>clearInterval(e)}),[a,l]),(0,g0.jsx)(U0,{textAlign:"center",style:{marginTop:"48px"},children:(0,g0.jsxs)(U0.Column,{style:{maxWidth:450},children:[(0,g0.jsxs)(W0.A,{as:"h2",color:"",textAlign:"center",children:[(0,g0.jsx)(G0.A,{src:"/logo.png"})," \u5bc6\u7801\u91cd\u7f6e\u786e\u8ba4"]}),(0,g0.jsx)(p5,{size:"large",children:(0,g0.jsxs)(r0.A,{children:[(0,g0.jsx)(p5.Input,{fluid:!0,icon:"mail",iconPosition:"left",placeholder:"\u90ae\u7bb1\u5730\u5740",name:"email",value:i,readOnly:!0}),h&&(0,g0.jsx)(p5.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"\u65b0\u5bc6\u7801",name:"newPassword",value:h,readOnly:!0,onClick:e=>{e.target.select(),navigator.clipboard.writeText(h),(0,m0.An)("\u5bc6\u7801\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\uff1a".concat(h))}}),(0,g0.jsx)(u1,{color:"green",fluid:!0,size:"large",onClick:async function(e){if(o(!0),!i)return;s(!0);const t=await m0.nC.post("/api/user/reset",{email:i,token:n}),{success:r,message:a}=t.data;if(r){let e=t.data.data;d(e),await(0,m0.C)(e),(0,m0.An)("\u65b0\u5bc6\u7801\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\uff1a".concat(e))}else(0,m0.Qg)(a);s(!1)},loading:r,disabled:a,children:a?"\u5bc6\u7801\u91cd\u7f6e\u5b8c\u6210":"\u63d0\u4ea4"})]})})]})})},m4={"gpt-3.5-turbo-0301":"gpt-3.5-turbo","gpt-4-0314":"gpt-4","gpt-4-32k-0314":"gpt-4-32k"};function v4(e){switch(e){case 15:return"\u6309\u7167\u5982\u4e0b\u683c\u5f0f\u8f93\u5165\uff1aAPIKey|SecretKey";case 18:return"\u6309\u7167\u5982\u4e0b\u683c\u5f0f\u8f93\u5165\uff1aAPPID|APISecret|APIKey";case 22:return"\u6309\u7167\u5982\u4e0b\u683c\u5f0f\u8f93\u5165\uff1aAPIKey-AppId\uff0c\u4f8b\u5982\uff1afastgpt-0sp2gtvfdgyi4k30jwlgwf1i-64f335d84283f05518e9e041";case 23:return"\u6309\u7167\u5982\u4e0b\u683c\u5f0f\u8f93\u5165\uff1aAppId|SecretId|SecretKey";default:return"\u8bf7\u8f93\u5165\u6e20\u9053\u5bf9\u5e94\u7684\u9274\u6743\u5bc6\u94a5"}}const y4=e=>{EJ();const t=e.editingChannel.id,i=void 0!==t,[n,r]=(0,P$.useState)(i),s=()=>{e.handleClose()},a={name:"",type:1,key:"",openai_organization:"",base_url:"",other:"",model_mapping:"",models:[],auto_ban:1,groups:["default"]},[o,l]=(0,P$.useState)(!1),[c,h]=(0,P$.useState)(!0),[d,u]=(0,P$.useState)(a),[p,g]=(0,P$.useState)([]),[f,m]=(0,P$.useState)([]),[v,y]=(0,P$.useState)([]),[b,_]=(0,P$.useState)([]),[x,S]=(0,P$.useState)([]),[w,C]=(0,P$.useState)(""),k=(e,t)=>{if(u((i=>({...i,[e]:t}))),"type"===e&&0===d.models.length){let e=[];switch(t){case 14:e=["claude-instant-1.2","claude-2","claude-2.0","claude-2.1","claude-3-opus-20240229","claude-3-sonnet-20240229","claude-3-haiku-20240307"];break;case 11:e=["PaLM-2"];break;case 15:e=["ERNIE-Bot","ERNIE-Bot-turbo","ERNIE-Bot-4","Embedding-V1"];break;case 17:e=["qwen-turbo","qwen-plus","qwen-max","qwen-max-longcontext","text-embedding-v1"];break;case 16:e=["chatglm_pro","chatglm_std","chatglm_lite"];break;case 18:e=["SparkDesk","SparkDesk-v1.1","SparkDesk-v2.1","SparkDesk-v3.1","SparkDesk-v3.5"];break;case 19:e=["360GPT_S2_V9","embedding-bert-512-v1","embedding_s1_v1","semantic_similarity_s1_v1"];break;case 23:e=["hunyuan"];break;case 24:e=["gemini-pro","gemini-pro-vision"];break;case 25:e=["moonshot-v1-8k","moonshot-v1-32k","moonshot-v1-128k"];break;case 26:e=["glm-4","glm-4v","glm-3-turbo"];break;case 2:e=["mj_imagine","mj_variation","mj_reroll","mj_blend","mj_upscale","mj_describe"];break;case 5:e=["swap_face","mj_imagine","mj_variation","mj_reroll","mj_blend","mj_upscale","mj_describe","mj_zoom","mj_shorten","mj_modal","mj_inpaint","mj_custom_zoom","mj_high_variation","mj_low_variation","mj_pan"]}u((t=>({...t,models:e})))}};(0,P$.useEffect)((()=>{let e=[...p];d.models.forEach((t=>{e.find((e=>e.key===t))||e.push({label:t,value:t})})),m(e)}),[p,d.models]),(0,P$.useEffect)((()=>{(async()=>{try{let e=await m0.nC.get("/api/channel/models"),t=e.data.data.map((e=>({label:e.id,value:e.id})));g(t),S(e.data.data.map((e=>e.id))),_(e.data.data.filter((e=>e.id.startsWith("gpt-3")||e.id.startsWith("text-"))).map((e=>e.id)))}catch(fe){(0,m0.Qg)(fe.message)}})().then(),(async()=>{try{let e=await m0.nC.get("/api/group/");y(e.data.data.map((e=>({label:e,value:e}))))}catch(fe){(0,m0.Qg)(fe.message)}})().then(),i?(async()=>{r(!0);let e=await m0.nC.get("/api/channel/".concat(t));const{success:i,message:n,data:s}=e.data;i?(""===s.models?s.models=[]:s.models=s.models.split(","),""===s.group?s.groups=[]:s.groups=s.group.split(","),""!==s.model_mapping&&(s.model_mapping=JSON.stringify(JSON.parse(s.model_mapping),null,2)),u(s),0===s.auto_ban?h(!1):h(!0)):(0,m0.Qg)(n),r(!1)})().then((()=>{})):u(a)}),[e.editingChannel.id]);return(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsx)(v0.DD,{maskClosable:!1,placement:i?"right":"left",title:(0,g0.jsx)(P0.A,{level:3,children:i?"\u66f4\u65b0\u6e20\u9053\u4fe1\u606f":"\u521b\u5efa\u65b0\u7684\u6e20\u9053"}),headerStyle:{borderBottom:"1px solid var(--semi-color-border)"},bodyStyle:{borderBottom:"1px solid var(--semi-color-border)"},visible:e.visible,footer:(0,g0.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.$n,{theme:"solid",size:"large",onClick:async()=>{if(!i&&(""===d.name||""===d.key))return void(0,m0.cf)("\u8bf7\u586b\u5199\u6e20\u9053\u540d\u79f0\u548c\u6e20\u9053\u5bc6\u94a5\uff01");if(0===d.models.length)return void(0,m0.cf)("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u6a21\u578b\uff01");if(""!==d.model_mapping&&!(0,m0.oM)(d.model_mapping))return void(0,m0.cf)("\u6a21\u578b\u6620\u5c04\u5fc5\u987b\u662f\u5408\u6cd5\u7684 JSON \u683c\u5f0f\uff01");let n,r={...d};if(r.base_url&&r.base_url.endsWith("/")&&(r.base_url=r.base_url.slice(0,r.base_url.length-1)),3===r.type&&""===r.other&&(r.other="2024-03-01-preview"),18===r.type&&""===r.other&&(r.other="v2.1"),!Array.isArray(r.models))return(0,m0.Qg)("\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u52ff\u91cd\u590d\u63d0\u4ea4\uff01"),void s();r.auto_ban=c?1:0,r.models=r.models.join(","),r.group=r.groups.join(","),n=i?await m0.nC.put("/api/channel/",{...r,id:parseInt(t)}):await m0.nC.post("/api/channel/",r);const{success:o,message:l}=n.data;o?(i?(0,m0.Te)("\u6e20\u9053\u66f4\u65b0\u6210\u529f\uff01"):((0,m0.Te)("\u6e20\u9053\u521b\u5efa\u6210\u529f\uff01"),u(a)),e.refresh(),e.handleClose()):(0,m0.Qg)(l)},children:"\u63d0\u4ea4"}),(0,g0.jsx)(v0.$n,{theme:"solid",size:"large",type:"tertiary",onClick:s,children:"\u53d6\u6d88"})]})}),closeIcon:null,onCancel:()=>s(),width:(0,m0.Fr)()?"100%":600,children:(0,g0.jsxs)(v0.tK,{spinning:n,children:[(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u7c7b\u578b\uff1a"})}),(0,g0.jsx)(v0.l6,{name:"type",required:!0,optionList:y0.pk,value:d.type,onChange:e=>k("type",e),style:{width:"50%"}}),3===d.type&&(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.lZ,{type:"warning",description:(0,g0.jsxs)(g0.Fragment,{children:["\u6ce8\u610f\uff0c",(0,g0.jsx)("strong",{children:"\u6a21\u578b\u90e8\u7f72\u540d\u79f0\u5fc5\u987b\u548c\u6a21\u578b\u540d\u79f0\u4fdd\u6301\u4e00\u81f4"}),"\uff0c\u56e0\u4e3a One API \u4f1a\u628a\u8bf7\u6c42\u4f53\u4e2d\u7684 model \u53c2\u6570\u66ff\u6362\u4e3a\u4f60\u7684\u90e8\u7f72\u540d\u79f0\uff08\u6a21\u578b\u540d\u79f0\u4e2d\u7684\u70b9\u4f1a\u88ab\u5254\u9664\uff09\uff0c",(0,g0.jsx)("a",{target:"_blank",href:"https://github.com/songquanpeng/one-api/issues/133?notification_referrer_id=NT_kwDOAmJSYrM2NjIwMzI3NDgyOjM5OTk4MDUw#issuecomment-1571602271",children:"\u56fe\u7247\u6f14\u793a"}),"\u3002"]})})}),(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"AZURE_OPENAI_ENDPOINT\uff1a"})}),(0,g0.jsx)(v0.pd,{label:"AZURE_OPENAI_ENDPOINT",name:"azure_base_url",placeholder:"\u8bf7\u8f93\u5165 AZURE_OPENAI_ENDPOINT\uff0c\u4f8b\u5982\uff1ahttps://docs-test-001.openai.azure.com",onChange:e=>{k("base_url",e)},value:d.base_url,autoComplete:"new-password"}),(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u9ed8\u8ba4 API \u7248\u672c\uff1a"})}),(0,g0.jsx)(v0.pd,{label:"\u9ed8\u8ba4 API \u7248\u672c",name:"azure_other",placeholder:"\u8bf7\u8f93\u5165\u9ed8\u8ba4 API \u7248\u672c\uff0c\u4f8b\u5982\uff1a2024-03-01-preview\uff0c\u8be5\u914d\u7f6e\u53ef\u4ee5\u88ab\u5b9e\u9645\u7684\u8bf7\u6c42\u67e5\u8be2\u53c2\u6570\u6240\u8986\u76d6",onChange:e=>{k("other",e)},value:d.other,autoComplete:"new-password"})]}),8===d.type&&(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"Base URL\uff1a"})}),(0,g0.jsx)(v0.pd,{name:"base_url",placeholder:"\u8bf7\u8f93\u5165\u81ea\u5b9a\u4e49\u6e20\u9053\u7684 Base URL",onChange:e=>{k("base_url",e)},value:d.base_url,autoComplete:"new-password"})]}),(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u540d\u79f0\uff1a"})}),(0,g0.jsx)(v0.pd,{required:!0,name:"name",placeholder:"\u8bf7\u4e3a\u6e20\u9053\u547d\u540d",onChange:e=>{k("name",e)},value:d.name,autoComplete:"new-password"}),(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u5206\u7ec4\uff1a"})}),(0,g0.jsx)(v0.l6,{placeholder:"\u8bf7\u9009\u62e9\u53ef\u4ee5\u4f7f\u7528\u8be5\u6e20\u9053\u7684\u5206\u7ec4",name:"groups",required:!0,multiple:!0,selection:!0,allowAdditions:!0,additionLabel:"\u8bf7\u5728\u7cfb\u7edf\u8bbe\u7f6e\u9875\u9762\u7f16\u8f91\u5206\u7ec4\u500d\u7387\u4ee5\u6dfb\u52a0\u65b0\u7684\u5206\u7ec4\uff1a",onChange:e=>{k("groups",e)},value:d.groups,autoComplete:"new-password",optionList:v}),18===d.type&&(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u6a21\u578b\u7248\u672c\uff1a"})}),(0,g0.jsx)(v0.pd,{name:"other",placeholder:"\u8bf7\u8f93\u5165\u661f\u706b\u5927\u6a21\u578b\u7248\u672c\uff0c\u6ce8\u610f\u662f\u63a5\u53e3\u5730\u5740\u4e2d\u7684\u7248\u672c\u53f7\uff0c\u4f8b\u5982\uff1av2.1",onChange:e=>{k("other",e)},value:d.other,autoComplete:"new-password"})]}),21===d.type&&(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u77e5\u8bc6\u5e93 ID\uff1a"})}),(0,g0.jsx)(v0.pd,{label:"\u77e5\u8bc6\u5e93 ID",name:"other",placeholder:"\u8bf7\u8f93\u5165\u77e5\u8bc6\u5e93 ID\uff0c\u4f8b\u5982\uff1a123456",onChange:e=>{k("other",e)},value:d.other,autoComplete:"new-password"})]}),(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u6a21\u578b\uff1a"})}),(0,g0.jsx)(v0.l6,{placeholder:"\u8bf7\u9009\u62e9\u8be5\u6e20\u9053\u6240\u652f\u6301\u7684\u6a21\u578b",name:"models",required:!0,multiple:!0,selection:!0,onChange:e=>{k("models",e)},value:d.models,autoComplete:"new-password",optionList:f}),(0,g0.jsxs)("div",{style:{lineHeight:"40px",marginBottom:"12px"},children:[(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.$n,{type:"primary",onClick:()=>{k("models",b)},children:"\u586b\u5165\u57fa\u7840\u6a21\u578b"}),(0,g0.jsx)(v0.$n,{type:"secondary",onClick:()=>{k("models",x)},children:"\u586b\u5165\u6240\u6709\u6a21\u578b"}),(0,g0.jsx)(v0.$n,{type:"warning",onClick:()=>{k("models",[])},children:"\u6e05\u9664\u6240\u6709\u6a21\u578b"})]}),(0,g0.jsx)(v0.pd,{addonAfter:(0,g0.jsx)(v0.$n,{type:"primary",onClick:()=>{if(""===w.trim())return;if(d.models.includes(w))return(0,m0.Qg)("\u8be5\u6a21\u578b\u5df2\u5b58\u5728\uff01");let e=[...d.models];e.push(w);let t=[];t.push({key:w,text:w,value:w}),m((e=>[...e,...t])),C(""),k("models",e)},children:"\u586b\u5165"}),placeholder:"\u8f93\u5165\u81ea\u5b9a\u4e49\u6a21\u578b\u540d\u79f0",value:w,onChange:e=>{C(e.trim())}})]}),(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u6a21\u578b\u91cd\u5b9a\u5411\uff1a"})}),(0,g0.jsx)(v0.fs,{placeholder:"\u6b64\u9879\u53ef\u9009\uff0c\u7528\u4e8e\u4fee\u6539\u8bf7\u6c42\u4f53\u4e2d\u7684\u6a21\u578b\u540d\u79f0\uff0c\u4e3a\u4e00\u4e2a JSON \u5b57\u7b26\u4e32\uff0c\u952e\u4e3a\u8bf7\u6c42\u4e2d\u6a21\u578b\u540d\u79f0\uff0c\u503c\u4e3a\u8981\u66ff\u6362\u7684\u6a21\u578b\u540d\u79f0\uff0c\u4f8b\u5982\uff1a\n".concat(JSON.stringify(m4,null,2)),name:"model_mapping",onChange:e=>{k("model_mapping",e)},autosize:!0,value:d.model_mapping,autoComplete:"new-password"}),(0,g0.jsx)(v0.o5.Text,{style:{color:"rgba(var(--semi-blue-5), 1)",userSelect:"none",cursor:"pointer"},onClick:()=>{k("model_mapping",JSON.stringify(m4,null,2))},children:"\u586b\u5165\u6a21\u677f"}),(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u5bc6\u94a5\uff1a"})}),o?(0,g0.jsx)(v0.fs,{label:"\u5bc6\u94a5",name:"key",required:!0,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u94a5\uff0c\u4e00\u884c\u4e00\u4e2a",onChange:e=>{k("key",e)},value:d.key,style:{minHeight:150,fontFamily:"JetBrains Mono, Consolas"},autoComplete:"new-password"}):(0,g0.jsx)(v0.pd,{label:"\u5bc6\u94a5",name:"key",required:!0,placeholder:v4(d.type),onChange:e=>{k("key",e)},value:d.key,autoComplete:"new-password"}),(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u7ec4\u7ec7\uff1a"})}),(0,g0.jsx)(v0.pd,{label:"\u7ec4\u7ec7\uff0c\u53ef\u9009\uff0c\u4e0d\u586b\u5219\u4e3a\u9ed8\u8ba4\u7ec4\u7ec7",name:"openai_organization",placeholder:"\u8bf7\u8f93\u5165\u7ec4\u7ec7org-xxx",onChange:e=>{k("openai_organization",e)},value:d.openai_organization}),(0,g0.jsx)("div",{style:{marginTop:10,display:"flex"},children:(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.Sc,{name:"auto_ban",checked:c,onChange:()=>{h(!c)}}),(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u662f\u5426\u81ea\u52a8\u7981\u7528\uff08\u4ec5\u5f53\u81ea\u52a8\u7981\u7528\u5f00\u542f\u65f6\u6709\u6548\uff09\uff0c\u5173\u95ed\u540e\u4e0d\u4f1a\u81ea\u52a8\u7981\u7528\u8be5\u6e20\u9053\uff1a"})]})}),!i&&(0,g0.jsx)("div",{style:{marginTop:10,display:"flex"},children:(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.Sc,{checked:o,label:"\u6279\u91cf\u521b\u5efa",name:"batch",onChange:()=>l(!o)}),(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u6279\u91cf\u521b\u5efa"})]})}),3!==d.type&&8!==d.type&&22!==d.type&&(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u4ee3\u7406\uff1a"})}),(0,g0.jsx)(v0.pd,{label:"\u4ee3\u7406",name:"base_url",placeholder:"\u6b64\u9879\u53ef\u9009\uff0c\u7528\u4e8e\u901a\u8fc7\u4ee3\u7406\u7ad9\u6765\u8fdb\u884c API \u8c03\u7528",onChange:e=>{k("base_url",e)},value:d.base_url,autoComplete:"new-password"})]}),22===d.type&&(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)("div",{style:{marginTop:10},children:(0,g0.jsx)(v0.o5.Text,{strong:!0,children:"\u79c1\u6709\u90e8\u7f72\u5730\u5740\uff1a"})}),(0,g0.jsx)(v0.pd,{name:"base_url",placeholder:"\u8bf7\u8f93\u5165\u79c1\u6709\u90e8\u7f72\u5730\u5740\uff0c\u683c\u5f0f\u4e3a\uff1ahttps://fastgpt.run/api/openapi",onChange:e=>{k("base_url",e)},value:d.base_url,autoComplete:"new-password"})]})]})})})};let b4;function _4(e){var t,i;if(!b4){b4=new Map;for(let e=0;e<y0.pk.length;e++)b4[y0.pk[e].value]=y0.pk[e];b4[0]={value:0,text:"\u672a\u77e5\u7c7b\u578b",color:"grey"}}return(0,g0.jsx)(v0.vw,{size:"large",color:null===(t=b4[e])||void 0===t?void 0:t.color,children:null===(i=b4[e])||void 0===i?void 0:i.text})}const x4=()=>{const e=[{title:"ID",dataIndex:"id"},{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u7c7b\u578b",dataIndex:"type",render:(e,t,i)=>(0,g0.jsx)("div",{children:_4(e)})},{title:"\u72b6\u6001",dataIndex:"status",render:(e,t,i)=>(0,g0.jsx)("div",{children:z(e)})},{title:"\u54cd\u5e94\u65f6\u95f4",dataIndex:"response_time",render:(e,t,i)=>(0,g0.jsx)("div",{children:H(e)})},{title:"\u5df2\u7528/\u5269\u4f59",dataIndex:"expired_time",render:(e,t,i)=>(0,g0.jsx)("div",{children:(0,g0.jsxs)(v0.$x,{spacing:1,children:[(0,g0.jsx)(v0.m_,{content:"\u5df2\u7528\u989d\u5ea6",children:(0,g0.jsx)(v0.vw,{color:"white",type:"ghost",size:"large",children:k0(t.used_quota)})}),(0,g0.jsx)(v0.m_,{content:"\u5269\u4f59\u989d\u5ea6"+t.balance+"\uff0c\u70b9\u51fb\u66f4\u65b0",children:(0,g0.jsxs)(v0.vw,{color:"white",type:"ghost",size:"large",onClick:()=>{W(t)},children:["$",S0(t.balance)]})})]})})},{title:"\u4f18\u5148\u7ea7",dataIndex:"priority",render:(e,t,i)=>(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.YI,{style:{width:70},name:"priority",onBlur:e=>{N(t.id,"priority",t,e.target.value)},keepFocus:!0,innerButtons:!0,defaultValue:t.priority,min:-999})})},{title:"",dataIndex:"operate",render:(e,t,i)=>(0,g0.jsxs)("div",{children:[(0,g0.jsx)(v0.$n,{theme:"light",type:"primary",style:{marginRight:1},onClick:()=>V(t),children:"\u6d4b\u8bd5"}),(0,g0.jsx)(v0.iS,{title:"\u786e\u5b9a\u662f\u5426\u8981\u5220\u9664\u6b64\u6e20\u9053\uff1f",content:"\u6b64\u4fee\u6539\u5c06\u4e0d\u53ef\u9006",okType:"danger",position:"left",onConfirm:()=>{N(t.id,"delete",t).then((()=>{L(t.id)}))},children:(0,g0.jsx)(v0.$n,{theme:"light",type:"danger",style:{marginRight:1},children:"\u5220\u9664"})}),1===t.status?(0,g0.jsx)(v0.$n,{theme:"light",type:"warning",style:{marginRight:1},onClick:async()=>{N(t.id,"disable",t)},children:"\u7981\u7528"}):(0,g0.jsx)(v0.$n,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async()=>{N(t.id,"enable",t)},children:"\u542f\u7528"}),(0,g0.jsx)(v0.$n,{theme:"light",type:"tertiary",style:{marginRight:1},onClick:()=>{I(t),T(!0)},children:"\u7f16\u8f91"})]})}],[t,i]=(0,P$.useState)([]),[n,r]=(0,P$.useState)(!0),[s,a]=(0,P$.useState)(1),[o,l]=(0,P$.useState)(!1),[c,h]=(0,P$.useState)(""),[d,u]=(0,P$.useState)(""),[p,g]=(0,P$.useState)(""),[f,m]=(0,P$.useState)(!1),[v,y]=(0,P$.useState)(!1),[b,_]=(0,P$.useState)(y0.re),[x,S]=(0,P$.useState)((0,m0.Lx)("channel-test")),[w,C]=(0,P$.useState)(b),[k,A]=(0,P$.useState)([]),[E,T]=(0,P$.useState)(!1),[O,P]=(0,P$.useState)(!1),[M,I]=(0,P$.useState)({id:void 0}),[R,D]=(0,P$.useState)([]),L=e=>{let n=[...t];if(null!=e){let t=n.findIndex((t=>t.id===e));t>-1&&(n.splice(t,1),i(n))}},j=e=>{for(let t=0;t<e.length;t++){e[t].key=""+e[t].id;let i=[];e[t].models.split(",").forEach(((n,r)=>{i.push({node:"item",name:n,onClick:()=>{V(e[t],n)}})})),e[t].test_models=i}i(e),e.length>=b?C(e.length+b):C(e.length)},F=async(e,i,n)=>{r(!0);const s=await m0.nC.get("/api/channel/?p=".concat(e,"&page_size=").concat(i,"&id_sort=").concat(n)),{success:a,message:o,data:l}=s.data;if(a)if(0===e)j(l);else{let n=[...t];n.splice(e*i,l.length,...l),j(n)}else(0,m0.Qg)(o);r(!1)},B=async()=>{await F(s-1,b,o)};(0,P$.useEffect)((()=>{const e="true"===localStorage.getItem("id-sort"),t=parseInt(localStorage.getItem("page-size"))||y0.re;l(e),_(t),F(0,t,e).then().catch((e=>{(0,m0.Qg)(e)})),K().then()}),[]);const N=async(e,n,r,s)=>{let a,o={id:e};switch(n){case"delete":a=await m0.nC.delete("/api/channel/".concat(e,"/"));break;case"enable":o.status=1,a=await m0.nC.put("/api/channel/",o);break;case"disable":o.status=2,a=await m0.nC.put("/api/channel/",o);break;case"priority":if(""===s)return;o.priority=parseInt(s),a=await m0.nC.put("/api/channel/",o);break;case"weight":if(""===s)return;o.weight=parseInt(s),o.weight<0&&(o.weight=0),a=await m0.nC.put("/api/channel/",o)}const{success:l,message:c}=a.data;if(l){(0,m0.Te)("\u64cd\u4f5c\u6210\u529f\u5b8c\u6210\uff01");let e=a.data.data,s=[...t];"delete"===n||(r.status=e.status),i(s)}else(0,m0.Qg)(c)},z=e=>{switch(e){case 1:return(0,g0.jsx)(v0.vw,{size:"large",color:"green",children:"\u5df2\u542f\u7528"});case 2:return(0,g0.jsx)(v0.vw,{size:"large",color:"yellow",children:"\u5df2\u7981\u7528"});case 3:return(0,g0.jsx)(v0.vw,{size:"large",color:"yellow",children:"\u81ea\u52a8\u7981\u7528"});default:return(0,g0.jsx)(v0.vw,{size:"large",color:"grey",children:"\u672a\u77e5\u72b6\u6001"})}},H=e=>{let t=e/1e3;return t=t.toFixed(2)+" \u79d2",0===e?(0,g0.jsx)(v0.vw,{size:"large",color:"grey",children:"\u672a\u6d4b\u8bd5"}):e<=1e3?(0,g0.jsx)(v0.vw,{size:"large",color:"green",children:t}):e<=3e3?(0,g0.jsx)(v0.vw,{size:"large",color:"lime",children:t}):e<=5e3?(0,g0.jsx)(v0.vw,{size:"large",color:"yellow",children:t}):(0,g0.jsx)(v0.vw,{size:"large",color:"red",children:t})},V=async(e,t)=>{const i=await m0.nC.get("/api/channel/test/".concat(e.id,"?model=").concat(t)),{success:n,message:r,time:s}=i.data;n?(e.response_time=1e3*s,e.test_time=Date.now()/1e3,(0,m0.cf)("\u6e20\u9053 ".concat(e.name," \u6d4b\u8bd5\u6210\u529f\uff0c\u8017\u65f6 ").concat(s.toFixed(2)," \u79d2\u3002"))):(0,m0.Qg)(r)},U=async e=>{const t=await m0.nC.get("/api/channel/test?scope=".concat(e)),{success:i,message:n}=t.data;i?(0,m0.cf)("\u5df2\u6210\u529f\u5f00\u59cb\u6d4b\u8bd5\u6e20\u9053\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u67e5\u770b\u7ed3\u679c\u3002"):(0,m0.Qg)(n)},W=async e=>{const t=await m0.nC.get("/api/channel/update_balance/".concat(e.id,"/")),{success:i,message:n,balance:r}=t.data;i?(e.balance=r,e.balance_updated_time=Date.now()/1e3,(0,m0.cf)("\u6e20\u9053 ".concat(e.name," \u4f59\u989d\u66f4\u65b0\u6210\u529f\uff01"))):(0,m0.Qg)(n)};let G=t.slice((s-1)*b,s*b);const K=async()=>{try{let e=await m0.nC.get("/api/group/");A(e.data.data.map((e=>({label:e,value:e}))))}catch(fe){(0,m0.Qg)(fe.message)}};return(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(y4,{refresh:B,visible:E,handleClose:()=>{T(!1)},editingChannel:M}),(0,g0.jsxs)("div",{style:{display:"flex",placeItems:"center",justifyContent:"space-between"},children:[(0,g0.jsx)(v0.lV,{onSubmit:()=>{(async(e,t,n)=>{if(""===e&&""===t&&""===n)return await F(0,b,o),void a(1);m(!0);const r=await m0.nC.get("/api/channel/search?keyword=".concat(e,"&group=").concat(t,"&model=").concat(n)),{success:s,message:l,data:c}=r.data;s?(i(c),a(1)):(0,m0.Qg)(l),m(!1)})(c,d,p)},labelPosition:"left",children:(0,g0.jsx)("div",{style:{display:"flex"},children:(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.lV.Input,{field:"search_keyword",label:"\u641c\u7d22",placeholder:"ID\uff0c\u540d\u79f0\u548c\u5bc6\u94a5 ...",value:c,loading:f,onChange:e=>{h(e.trim())}}),(0,g0.jsx)(v0.$n,{label:"\u67e5\u8be2",type:"primary",htmlType:"submit",className:"btn-margin-right",style:{marginRight:8},children:"\u67e5\u8be2"})]})})}),(0,g0.jsx)("div",{style:{display:(0,m0.Fr)()?"":"flex",marginTop:(0,m0.Fr)()?0:-45,zIndex:999,position:"relative",pointerEvents:"none"},children:(0,g0.jsxs)(v0.$x,{style:{pointerEvents:"auto",marginTop:(0,m0.Fr)()?0:45},children:[(0,g0.jsx)(v0.$n,{theme:"light",type:"primary",style:{marginRight:8},onClick:()=>{I({id:void 0}),T(!0)},children:"\u6dfb\u52a0\u65b0\u7684\u6e20\u9053"}),(0,g0.jsx)(v0.iS,{title:"\u786e\u5b9a\uff1f",okType:"warning",onConfirm:()=>{U("all")},position:(0,m0.Fr)()?"top":"left",children:(0,g0.jsx)(v0.$n,{theme:"light",type:"warning",style:{marginRight:8},children:"\u6d4b\u8bd5\u6240\u6709\u6e20\u9053"})}),(0,g0.jsx)(v0.iS,{title:"\u786e\u5b9a\uff1f",okType:"warning",onConfirm:()=>{U("disabled")},position:(0,m0.Fr)()?"top":"left",children:(0,g0.jsx)(v0.$n,{theme:"light",type:"warning",style:{marginRight:8},children:"\u6d4b\u8bd5\u7981\u7528\u6e20\u9053"})}),(0,g0.jsx)(v0.iS,{title:"\u786e\u5b9a\u662f\u5426\u8981\u5220\u9664\u7981\u7528\u6e20\u9053\uff1f",content:"\u6b64\u4fee\u6539\u5c06\u4e0d\u53ef\u9006",okType:"danger",onConfirm:async()=>{const e=await m0.nC.delete("/api/channel/disabled"),{success:t,message:i,data:n}=e.data;t?((0,m0.Te)("\u5df2\u5220\u9664\u6240\u6709\u7981\u7528\u6e20\u9053\uff0c\u5171\u8ba1 ".concat(n," \u4e2a")),await B()):(0,m0.Qg)(i)},position:(0,m0.Fr)()?"top":"left",children:(0,g0.jsx)(v0.$n,{theme:"light",type:"danger",style:{marginRight:8},children:"\u5220\u9664\u7981\u7528\u6e20\u9053"})}),(0,g0.jsx)(v0.$n,{theme:"light",type:"primary",style:{marginRight:8},onClick:B,children:"\u5237\u65b0"})]})})]}),(0,g0.jsx)(v0.XI,{className:"channel-table",style:{marginTop:15},columns:e,dataSource:G,pagination:{currentPage:s,pageSize:b,total:w,pageSizeOpts:[10,20,50,100],showSizeChanger:!0,formatPageText:e=>"",onPageSizeChange:e=>{(async e=>{localStorage.setItem("page-size",e+""),_(e),a(1),F(0,e,o).then().catch((e=>{(0,m0.Qg)(e)}))})(e).then()},onPageChange:e=>{a(e),e===Math.ceil(t.length/b)+1&&F(e-1,b,o).then((e=>{}))}},loading:n,onRow:(e,t)=>1!==e.status?{style:{background:"var(--semi-color-disabled-border)"}}:{},rowSelection:O?{onChange:(e,t)=>{D(t)}}:null})]})},S4=()=>(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsxs)(v0.Layout,{children:[(0,g0.jsx)(v0.Layout.Header,{children:(0,g0.jsx)("h3",{children:"\u7ba1\u7406\u6e20\u9053"})}),(0,g0.jsx)(v0.Layout.Content,{children:(0,g0.jsx)(x4,{})})]})});var w4=i(73304);const C4=e=>{const[t,i]=(0,P$.useState)(!1),[n,r]=(0,P$.useState)(t),s={name:"",remain_quota:t?0:5e5,expired_time:-1,unlimited_quota:!1,model_limits_enabled:!1,model_limits:[]},[a,o]=(0,P$.useState)(s),{name:l,remain_quota:c,expired_time:h,unlimited_quota:d,model_limits_enabled:u,model_limits:p}=a,[g,f]=(0,P$.useState)({}),m=(EJ(),(e,t)=>{o((i=>({...i,[e]:t})))}),v=()=>{e.handleClose()},y=(e,t,i,n)=>{let r=(new Date).getTime()/1e3,s=30*e*24*60*60;s+=24*t*60*60,s+=60*i*60,s+=60*n,0!==s?(r+=s,o({...a,expired_time:(0,m0.gA)(r)})):o({...a,expired_time:-1})};(0,P$.useEffect)((()=>{i(void 0!==e.editingToken.id)}),[e.editingToken.id]),(0,P$.useEffect)((()=>{t?(async()=>{r(!0);let t=await m0.nC.get("/api/token/".concat(e.editingToken.id));const{success:i,message:n,data:s}=t.data;i?(-1!==s.expired_time&&(s.expired_time=(0,m0.gA)(s.expired_time)),o(s)):(0,m0.Qg)(n),r(!1)})().then((()=>{})):o(s)}),[t]);const[b,_]=(0,P$.useState)(1),x=e=>{const t=parseInt(e,10);!isNaN(t)&&t>0&&_(t)},S=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let i=0;i<6;i++)t+=e.charAt(Math.floor(62*Math.random()));return t};return(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsx)(v0.DD,{placement:t?"right":"left",title:(0,g0.jsx)(P0.A,{level:3,children:t?"\u66f4\u65b0\u4ee4\u724c\u4fe1\u606f":"\u521b\u5efa\u65b0\u7684\u4ee4\u724c"}),headerStyle:{borderBottom:"1px solid var(--semi-color-border)"},bodyStyle:{borderBottom:"1px solid var(--semi-color-border)"},visible:e.visiable,footer:(0,g0.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.$n,{theme:"solid",size:"large",onClick:async()=>{if(r(!0),t){let t={...a};if(t.remain_quota=parseInt(t.remain_quota),-1!==t.expired_time){let e=Date.parse(t.expired_time);if(isNaN(e))return(0,m0.Qg)("\u8fc7\u671f\u65f6\u95f4\u683c\u5f0f\u9519\u8bef\uff01"),void r(!1);t.expired_time=Math.ceil(e/1e3)}let i=await m0.nC.put("/api/token/",{...t,id:parseInt(e.editingToken.id)});const{success:n,message:s}=i.data;n?((0,m0.Te)("\u4ee4\u724c\u66f4\u65b0\u6210\u529f\uff01"),e.refresh(),e.handleClose()):(0,m0.Qg)(s)}else{let t=0;for(let e=0;e<b;e++){let i={...a};if(0!==e&&(i.name="".concat(a.name,"-").concat(S())),i.remain_quota=parseInt(i.remain_quota),-1!==i.expired_time){let e=Date.parse(i.expired_time);if(isNaN(e)){(0,m0.Qg)("\u8fc7\u671f\u65f6\u95f4\u683c\u5f0f\u9519\u8bef\uff01"),r(!1);break}i.expired_time=Math.ceil(e/1e3)}let n=await m0.nC.post("/api/token/",i);const{success:s,message:o}=n.data;if(!s){(0,m0.Qg)(o);break}t++}t>0&&((0,m0.Te)("".concat(t,"\u4e2a\u4ee4\u724c\u521b\u5efa\u6210\u529f\uff0c\u8bf7\u5728\u5217\u8868\u9875\u9762\u70b9\u51fb\u590d\u5236\u83b7\u53d6\u4ee4\u724c\uff01")),e.refresh(),e.handleClose())}r(!1),o(s),_(1)},children:"\u63d0\u4ea4"}),(0,g0.jsx)(v0.$n,{theme:"solid",size:"large",type:"tertiary",onClick:v,children:"\u53d6\u6d88"})]})}),closeIcon:null,onCancel:()=>v(),width:(0,m0.Fr)()?"100%":600,children:(0,g0.jsxs)(v0.tK,{spinning:n,children:[(0,g0.jsx)(v0.pd,{style:{marginTop:20},label:"\u540d\u79f0",name:"name",placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",onChange:e=>m("name",e),value:l,autoComplete:"new-password",required:!t}),(0,g0.jsx)(z5,{}),(0,g0.jsx)(v0.lr,{label:"\u8fc7\u671f\u65f6\u95f4",name:"expired_time",placeholder:"\u8bf7\u9009\u62e9\u8fc7\u671f\u65f6\u95f4",onChange:e=>m("expired_time",e),value:h,autoComplete:"new-password",type:"dateTime"}),(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.$n,{type:"tertiary",onClick:()=>{y(0,0,0,0)},children:"\u6c38\u4e0d\u8fc7\u671f"}),(0,g0.jsx)(v0.$n,{type:"tertiary",onClick:()=>{y(0,0,1,0)},children:"\u4e00\u5c0f\u65f6"}),(0,g0.jsx)(v0.$n,{type:"tertiary",onClick:()=>{y(1,0,0,0)},children:"\u4e00\u4e2a\u6708"}),(0,g0.jsx)(v0.$n,{type:"tertiary",onClick:()=>{y(0,1,0,0)},children:"\u4e00\u5929"})]})}),(0,g0.jsx)(z5,{}),(0,g0.jsx)(v0.lZ,{type:"warning",description:"\u6ce8\u610f\uff0c\u4ee4\u724c\u7684\u989d\u5ea6\u4ec5\u7528\u4e8e\u9650\u5236\u4ee4\u724c\u672c\u8eab\u7684\u6700\u5927\u989d\u5ea6\u4f7f\u7528\u91cf\uff0c\u5b9e\u9645\u7684\u4f7f\u7528\u53d7\u5230\u8d26\u6237\u7684\u5269\u4f59\u989d\u5ea6\u9650\u5236\u3002"}),(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u989d\u5ea6".concat(A0(c))})}),(0,g0.jsx)(v0.j9,{style:{marginTop:8},name:"remain_quota",placeholder:"\u8bf7\u8f93\u5165\u989d\u5ea6",onChange:e=>m("remain_quota",e),value:c,autoComplete:"new-password",type:"number",data:[{value:5e5,label:"1$"},{value:5e6,label:"10$"},{value:25e6,label:"50$"},{value:5e7,label:"100$"},{value:25e7,label:"500$"},{value:5e8,label:"1000$"}],disabled:d}),!t&&(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u65b0\u5efa\u6570\u91cf"})}),(0,g0.jsx)(v0.j9,{style:{marginTop:8},label:"\u6570\u91cf",placeholder:"\u8bf7\u9009\u62e9\u6216\u8f93\u5165\u521b\u5efa\u4ee4\u724c\u7684\u6570\u91cf",onChange:e=>x(e),onSelect:e=>x(e),value:b.toString(),autoComplete:"off",type:"number",data:[{value:10,label:"10\u4e2a"},{value:20,label:"20\u4e2a"},{value:30,label:"30\u4e2a"},{value:100,label:"100\u4e2a"}],disabled:d})]}),(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.$n,{style:{marginTop:8},type:"warning",onClick:()=>{o({...a,unlimited_quota:!d})},children:d?"\u53d6\u6d88\u65e0\u9650\u989d\u5ea6":"\u8bbe\u4e3a\u65e0\u9650\u989d\u5ea6"})})]})})})};function k4(e){return(0,g0.jsx)(g0.Fragment,{children:(0,m0.gA)(e)})}function A4(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case 1:return t?(0,g0.jsx)(v0.vw,{color:"green",size:"large",children:"\u5df2\u542f\u7528\uff1a\u9650\u5236\u6a21\u578b"}):(0,g0.jsx)(v0.vw,{color:"green",size:"large",children:"\u5df2\u542f\u7528"});case 2:return(0,g0.jsx)(v0.vw,{color:"red",size:"large",children:" \u5df2\u7981\u7528 "});case 3:return(0,g0.jsx)(v0.vw,{color:"yellow",size:"large",children:" \u5df2\u8fc7\u671f "});case 4:return(0,g0.jsx)(v0.vw,{color:"grey",size:"large",children:" \u5df2\u8017\u5c3d "});default:return(0,g0.jsx)(v0.vw,{color:"black",size:"large",children:" \u672a\u77e5\u72b6\u6001 "})}}const E4=()=>{const e=[{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:(e,t,i)=>(0,g0.jsx)("div",{children:A4(e,t.model_limits_enabled)})},{title:"\u5df2\u7528\u989d\u5ea6",dataIndex:"used_quota",render:(e,t,i)=>(0,g0.jsx)("div",{children:k0(parseInt(e))})},{title:"\u5269\u4f59\u989d\u5ea6",dataIndex:"remain_quota",render:(e,t,i)=>(0,g0.jsx)("div",{children:t.unlimited_quota?(0,g0.jsx)(v0.vw,{size:"large",color:"white",children:"\u65e0\u9650\u5236"}):(0,g0.jsx)(v0.vw,{size:"large",color:"light-blue",children:k0(parseInt(e))})})},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created_time",render:(e,t,i)=>(0,g0.jsx)("div",{children:k4(e)})},{title:"\u8fc7\u671f\u65f6\u95f4",dataIndex:"expired_time",render:(e,t,i)=>(0,g0.jsx)("div",{children:-1===t.expired_time?"\u6c38\u4e0d\u8fc7\u671f":k4(e)})},{title:"",dataIndex:"operate",render:(e,t,i)=>(0,g0.jsxs)("div",{children:[(0,g0.jsx)(v0.AM,{content:"sk-"+t.key,style:{padding:20},position:"top",children:(0,g0.jsx)(v0.$n,{theme:"light",type:"tertiary",style:{marginRight:1},children:"\u67e5\u770b"})}),(0,g0.jsx)(v0.$n,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async e=>{await D("sk-"+t.key)},children:"\u590d\u5236"}),(0,g0.jsxs)(v0.O1,{style:{marginRight:1},"aria-label":"\u9879\u76ee\u64cd\u4f5c\u6309\u94ae\u7ec4",children:[(0,g0.jsx)(v0.$n,{theme:"light",style:{color:"rgba(var(--semi-teal-7), 1)"},onClick:()=>{L("next",t.key)},children:"\u804a\u5929"}),(0,g0.jsx)(v0.ms,{trigger:"click",position:"bottomRight",menu:[{node:"item",key:"next",disabled:!localStorage.getItem("chat_link"),name:"ChatGPT Next Web",onClick:()=>{L("next",t.key)}},{node:"item",key:"next-mj",disabled:!localStorage.getItem("chat_link2"),name:"ChatGPT Web & Midjourney",onClick:()=>{L("next-mj",t.key)}},{node:"item",key:"ama",name:"AMA \u95ee\u5929\uff08BotGem\uff09",onClick:()=>{L("ama",t.key)}},{node:"item",key:"opencat",name:"OpenCat",onClick:()=>{L("opencat",t.key)}}],children:(0,g0.jsx)(v0.$n,{style:{padding:"8px 4px",color:"rgba(var(--semi-teal-7), 1)"},type:"primary",icon:(0,g0.jsx)(w4.A,{})})})]}),(0,g0.jsx)(v0.iS,{title:"\u786e\u5b9a\u662f\u5426\u8981\u5220\u9664\u6b64\u4ee4\u724c\uff1f",content:"\u6b64\u4fee\u6539\u5c06\u4e0d\u53ef\u9006",okType:"danger",position:"left",onConfirm:()=>{F(t.id,"delete",t).then((()=>{j(t.key)}))},children:(0,g0.jsx)(v0.$n,{theme:"light",type:"danger",style:{marginRight:1},children:"\u5220\u9664"})}),1===t.status?(0,g0.jsx)(v0.$n,{theme:"light",type:"warning",style:{marginRight:1},onClick:async()=>{F(t.id,"disable",t)},children:"\u7981\u7528"}):(0,g0.jsx)(v0.$n,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async()=>{F(t.id,"enable",t)},children:"\u542f\u7528"}),(0,g0.jsx)(v0.$n,{theme:"light",type:"tertiary",style:{marginRight:1},onClick:()=>{A(t),r(!0)},children:"\u7f16\u8f91"})]})}],[t,i]=(0,P$.useState)(y0.re),[n,r]=(0,P$.useState)(!1),[s,a]=(0,P$.useState)([]),[o,l]=(0,P$.useState)([]),[c,h]=(0,P$.useState)(t),[d,u]=(0,P$.useState)(!0),[p,g]=(0,P$.useState)(1),[f,m]=(0,P$.useState)(""),[v,y]=(0,P$.useState)(""),[b,_]=(0,P$.useState)(!1),[x,S]=(0,P$.useState)(!1),[w,C]=(0,P$.useState)(0),[k,A]=(0,P$.useState)({id:void 0}),[E,T]=(0,P$.useState)(""),[O,P]=(0,P$.useState)(!1),M=e=>{a(e),e.length>=t?h(e.length+t):h(e.length)};let I=s.slice((p-1)*t,p*t);const R=async e=>{u(!0);const i=await m0.nC.get("/api/token/?p=".concat(e,"&size=").concat(t,"&order=").concat(E)),{success:n,message:r,data:a}=i.data;if(n)if(0===e)M(a);else{let i=[...s];i.splice(e*t,a.length,...a),M(i)}else(0,m0.Qg)(r);u(!1)},D=async e=>{await(0,m0.C)(e)?(0,m0.Te)("\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\uff01"):v0.aF.error({title:"\u65e0\u6cd5\u590d\u5236\u5230\u526a\u8d34\u677f\uff0c\u8bf7\u624b\u52a8\u590d\u5236",content:e})},L=async(e,t)=>{let i=localStorage.getItem("status"),n="";i&&(i=JSON.parse(i),n=i.server_address),""===n&&(n=window.location.origin);let r=encodeURIComponent(n);const s=localStorage.getItem("chat_link"),a=localStorage.getItem("chat_link2");let o,l;switch(s&&(o=s+'/#/?settings={"key":"sk-'.concat(t,'","url":"').concat(n,'"}')),e){case"ama":l="ama://set-api-key?server=".concat(r,"&key=sk-").concat(t);break;case"opencat":l="opencat://team/join?domain=".concat(r,"&token=sk-").concat(t);break;case"next-mj":l=a+'/#/?settings={"key":"sk-'.concat(t,'","url":"').concat(n,'"}');break;default:if(!s)return void(0,m0.Qg)("\u7ba1\u7406\u5458\u672a\u8bbe\u7f6e\u804a\u5929\u94fe\u63a5");l=o}window.open(l,"_blank")};(0,P$.useEffect)((()=>{R(0).then().catch((e=>{(0,m0.Qg)(e)}))}),[t,E]);const j=e=>{let t=[...s];if(null!=e){let i=t.findIndex((t=>t.key===e));i>-1&&(t.splice(i,1),M(t))}},F=async(e,t,i)=>{u(!0);let n,r={id:e};switch(t){case"delete":n=await m0.nC.delete("/api/token/".concat(e,"/"));break;case"enable":r.status=1,n=await m0.nC.put("/api/token/?status_only=true",r);break;case"disable":r.status=2,n=await m0.nC.put("/api/token/?status_only=true",r)}const{success:a,message:o}=n.data;if(a){(0,m0.Te)("\u64cd\u4f5c\u6210\u529f\u5b8c\u6210\uff01");let e=n.data.data,r=[...s];"delete"===t||(i.status=e.status),M(r)}else(0,m0.Qg)(o);u(!1)},B={onSelect:(e,t)=>{},onSelectAll:(e,t)=>{},onChange:(e,t)=>{l(t)}},N=(e,t)=>{let{value:i}=t;T(i),g(1),P(!1)};return(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(C4,{refresh:async()=>{await R(p-1)},editingToken:k,visiable:n,handleClose:()=>{r(!1),setTimeout((()=>{A({id:void 0})}),500)}}),(0,g0.jsxs)(v0.lV,{layout:"horizontal",style:{marginTop:10},labelPosition:"left",children:[(0,g0.jsx)(v0.lV.Input,{field:"keyword",label:"\u641c\u7d22\u5173\u952e\u5b57",placeholder:"\u4ee4\u724c\u540d\u79f0",value:f,loading:b,onChange:async e=>{m(e.trim())}}),(0,g0.jsx)(v0.$n,{label:"\u67e5\u8be2",type:"primary",htmlType:"submit",className:"btn-margin-right",onClick:async()=>{if(""===f&&""===v)return await R(0),g(1),void T("");_(!0);const e=await m0.nC.get("/api/token/search?keyword=".concat(f,"&token=").concat(v)),{success:t,message:i,data:n}=e.data;t?(M(n),g(1)):(0,m0.Qg)(i),_(!1)},style:{marginRight:8},children:"\u67e5\u8be2"})]}),(0,g0.jsx)(v0.XI,{style:{marginTop:20},columns:e,dataSource:I,pagination:{currentPage:p,pageSize:t,total:c,showSizeChanger:!0,pageSizeOptions:[10,20,50,100],formatPageText:e=>"\u7b2c ".concat(e.currentStart," - ").concat(e.currentEnd," \u6761\uff0c\u5171 ").concat(s.length," \u6761"),onPageSizeChange:e=>{i(e),g(1)},onPageChange:e=>{g(e),e===Math.ceil(s.length/t)+1&&R(e-1).then((e=>{}))}},loading:d,rowSelection:B,onRow:(e,t)=>1!==e.status?{style:{background:"var(--semi-color-disabled-border)"}}:{}}),(0,g0.jsx)(v0.$n,{theme:"light",type:"primary",style:{marginRight:8},onClick:()=>{A({id:void 0}),r(!0)},children:"\u6dfb\u52a0\u4ee4\u724c"}),(0,g0.jsx)(v0.$n,{label:"\u590d\u5236\u6240\u9009\u4ee4\u724c",type:"warning",onClick:async()=>{if(0===o.length)return void(0,m0.Qg)("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u4ee4\u724c\uff01");let e="";for(let t=0;t<o.length;t++)e+=o[t].name+"    sk-"+o[t].key+"\n";await D(e)},children:"\u590d\u5236\u6240\u9009\u4ee4\u724c\u5230\u526a\u8d34\u677f"}),(0,g0.jsx)(v0.ms,{trigger:"click",position:"bottomLeft",visible:O,onVisibleChange:e=>P(e),render:(0,g0.jsxs)(v0.ms.Menu,{children:[(0,g0.jsx)(v0.ms.Item,{onClick:()=>N(0,{value:""}),children:"\u9ed8\u8ba4\u6392\u5e8f"}),(0,g0.jsx)(v0.ms.Item,{onClick:()=>N(0,{value:"remain_quota"}),children:"\u6309\u5269\u4f59\u989d\u5ea6\u6392\u5e8f"}),(0,g0.jsx)(v0.ms.Item,{onClick:()=>N(0,{value:"used_quota"}),children:"\u6309\u5df2\u7528\u989d\u5ea6\u6392\u5e8f"})]}),children:(0,g0.jsx)(v0.$n,{style:{marginLeft:"10px"},children:(e=>{switch(e){case"remain_quota":return"\u6309\u5269\u4f59\u989d\u5ea6\u6392\u5e8f";case"used_quota":return"\u6309\u5df2\u7528\u989d\u5ea6\u6392\u5e8f";default:return"\u9ed8\u8ba4\u6392\u5e8f"}})(E)})})]})},T4=()=>(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsxs)(v0.Layout,{children:[(0,g0.jsx)(v0.Layout.Header,{children:(0,g0.jsx)("h3",{children:"\u6211\u7684\u4ee4\u724c"})}),(0,g0.jsx)(v0.Layout.Content,{children:(0,g0.jsx)(E4,{})})]})}),O4=e=>{const t=void 0!==e.editingRedemption.id,[i,n]=(0,P$.useState)(t),r=(function(){let{matches:e}=P$.useContext(SJ),t=e[e.length-1];t&&t.params}(),EJ(),{name:"",quota:1e5,count:1}),[s,a]=(0,P$.useState)(r),{name:o,quota:l,count:c}=s,h=()=>{e.handleClose()},d=(e,t)=>{a((i=>({...i,[e]:t})))};(0,P$.useEffect)((()=>{t?(async()=>{n(!0);let t=await m0.nC.get("/api/redemption/".concat(e.editingRedemption.id));const{success:i,message:r,data:s}=t.data;i?a(s):(0,m0.Qg)(r),n(!1)})().then((()=>{})):a(r)}),[e.editingRedemption.id]);return(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsx)(v0.DD,{placement:t?"right":"left",title:(0,g0.jsx)(P0.A,{level:3,children:t?"\u66f4\u65b0\u5151\u6362\u7801\u4fe1\u606f":"\u521b\u5efa\u65b0\u7684\u5151\u6362\u7801"}),headerStyle:{borderBottom:"1px solid var(--semi-color-border)"},bodyStyle:{borderBottom:"1px solid var(--semi-color-border)"},visible:e.visiable,footer:(0,g0.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,g0.jsxs)(v0.$x,{children:[(0,g0.jsx)(v0.$n,{theme:"solid",size:"large",onClick:async()=>{if(!t&&""===s.name)return;n(!0);let i,o=s;o.count=parseInt(o.count),o.quota=parseInt(o.quota),i=t?await m0.nC.put("/api/redemption/",{...o,id:parseInt(e.editingRedemption.id)}):await m0.nC.post("/api/redemption/",{...o});const{success:l,message:c,data:h}=i.data;if(l?t?((0,m0.Te)("\u5151\u6362\u7801\u66f4\u65b0\u6210\u529f\uff01"),e.refresh(),e.handleClose()):((0,m0.Te)("\u5151\u6362\u7801\u521b\u5efa\u6210\u529f\uff01"),a(r),e.refresh(),e.handleClose()):(0,m0.Qg)(c),!t&&h){let e="";for(let t=0;t<h.length;t++)e+=h[t]+"\n";v0.aF.confirm({title:"\u5151\u6362\u7801\u521b\u5efa\u6210\u529f",content:(0,g0.jsxs)("div",{children:[(0,g0.jsx)("p",{children:"\u5151\u6362\u7801\u521b\u5efa\u6210\u529f\uff0c\u662f\u5426\u4e0b\u8f7d\u5151\u6362\u7801\uff1f"}),(0,g0.jsx)("p",{children:"\u5151\u6362\u7801\u5c06\u4ee5\u6587\u672c\u6587\u4ef6\u7684\u5f62\u5f0f\u4e0b\u8f7d\uff0c\u6587\u4ef6\u540d\u4e3a\u5151\u6362\u7801\u7684\u540d\u79f0\u3002"})]}),onOk:()=>{(0,m0.I9)(e,"".concat(s.name,".txt"))}})}n(!1)},children:"\u63d0\u4ea4"}),(0,g0.jsx)(v0.$n,{theme:"solid",size:"large",type:"tertiary",onClick:h,children:"\u53d6\u6d88"})]})}),closeIcon:null,onCancel:()=>h(),width:(0,m0.Fr)()?"100%":600,children:(0,g0.jsxs)(v0.tK,{spinning:i,children:[(0,g0.jsx)(v0.pd,{style:{marginTop:20},label:"\u540d\u79f0",name:"name",placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",onChange:e=>d("name",e),value:o,autoComplete:"new-password",required:!t}),(0,g0.jsx)(z5,{}),(0,g0.jsx)("div",{style:{marginTop:20},children:(0,g0.jsx)(v0.o5.Text,{children:"\u989d\u5ea6".concat(A0(l))})}),(0,g0.jsx)(v0.j9,{style:{marginTop:8},name:"quota",placeholder:"\u8bf7\u8f93\u5165\u989d\u5ea6",onChange:e=>d("quota",e),value:l,autoComplete:"new-password",type:"number",position:"bottom",data:[{value:5e5,label:"1$"},{value:5e6,label:"10$"},{value:25e6,label:"50$"},{value:5e7,label:"100$"},{value:25e7,label:"500$"},{value:5e8,label:"1000$"}]}),!t&&(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(z5,{}),(0,g0.jsx)(v0.o5.Text,{children:"\u751f\u6210\u6570\u91cf"}),(0,g0.jsx)(v0.pd,{style:{marginTop:8},label:"\u751f\u6210\u6570\u91cf",name:"count",placeholder:"\u8bf7\u8f93\u5165\u751f\u6210\u6570\u91cf",onChange:e=>d("count",e),value:c,autoComplete:"new-password",type:"number"})]})]})})})};function P4(e){switch(e){case 1:return(0,g0.jsx)(v0.vw,{color:"green",size:"large",children:"\u672a\u4f7f\u7528"});case 2:return(0,g0.jsx)(v0.vw,{color:"red",size:"large",children:" \u5df2\u7981\u7528 "});case 3:return(0,g0.jsx)(v0.vw,{color:"grey",size:"large",children:" \u5df2\u4f7f\u7528 "});default:return(0,g0.jsx)(v0.vw,{color:"black",size:"large",children:" \u672a\u77e5\u72b6\u6001 "})}}const M4=()=>{const e=[{title:"ID",dataIndex:"id"},{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:(e,t,i)=>(0,g0.jsx)("div",{children:P4(e)})},{title:"\u989d\u5ea6",dataIndex:"quota",render:(e,t,i)=>(0,g0.jsx)("div",{children:k0(parseInt(e))})},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created_time",render:(e,t,i)=>{return(0,g0.jsx)("div",{children:(n=e,(0,g0.jsx)(g0.Fragment,{children:(0,m0.gA)(n)}))});var n}},{title:"",dataIndex:"operate",render:(e,t,i)=>(0,g0.jsxs)("div",{children:[(0,g0.jsx)(v0.AM,{content:t.key,style:{padding:20},position:"top",children:(0,g0.jsx)(v0.$n,{theme:"light",type:"tertiary",style:{marginRight:1},children:"\u67e5\u770b"})}),(0,g0.jsx)(v0.$n,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async e=>{await S(t.key)},children:"\u590d\u5236"}),(0,g0.jsx)(v0.iS,{title:"\u786e\u5b9a\u662f\u5426\u8981\u5220\u9664\u6b64\u5151\u6362\u7801\uff1f",content:"\u6b64\u4fee\u6539\u5c06\u4e0d\u53ef\u9006",okType:"danger",position:"left",onConfirm:()=>{w(t.id,"delete",t).then((()=>{x(t.key)}))},children:(0,g0.jsx)(v0.$n,{theme:"light",type:"danger",style:{marginRight:1},children:"\u5220\u9664"})}),1===t.status?(0,g0.jsx)(v0.$n,{theme:"light",type:"warning",style:{marginRight:1},onClick:async()=>{w(t.id,"disable",t)},children:"\u7981\u7528"}):(0,g0.jsx)(v0.$n,{theme:"light",type:"secondary",style:{marginRight:1},onClick:async()=>{w(t.id,"enable",t)},disabled:3===t.status,children:"\u542f\u7528"}),(0,g0.jsx)(v0.$n,{theme:"light",type:"tertiary",style:{marginRight:1},onClick:()=>{m(t),y(!0)},disabled:1!==t.status,children:"\u7f16\u8f91"})]})}],[t,i]=(0,P$.useState)([]),[n,r]=(0,P$.useState)(!0),[s,a]=(0,P$.useState)(1),[o,l]=(0,P$.useState)(""),[c,h]=(0,P$.useState)(!1),[d,u]=(0,P$.useState)(y0.re),[p,g]=(0,P$.useState)([]),[f,m]=(0,P$.useState)({id:void 0}),[v,y]=(0,P$.useState)(!1),b=e=>{i(e),e.length>=s*y0.re?u(e.length+1):u(e.length)},_=async e=>{const i=await m0.nC.get("/api/redemption/?p=".concat(e)),{success:n,message:s,data:a}=i.data;if(n)if(0===e)b(a);else{let e=t;e.push(...a),b(e)}else(0,m0.Qg)(s);r(!1)},x=e=>{let n=[...t];if(null!=e){let t=n.findIndex((t=>t.key===e));t>-1&&(n.splice(t,1),i(n))}},S=async e=>{await(0,m0.C)(e)?(0,m0.Te)("\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\uff01"):v0.aF.error({title:"\u65e0\u6cd5\u590d\u5236\u5230\u526a\u8d34\u677f\uff0c\u8bf7\u624b\u52a8\u590d\u5236",content:e})};(0,P$.useEffect)((()=>{_(0).then().catch((e=>{(0,m0.Qg)(e)}))}),[]);const w=async(e,n,r)=>{let s,a={id:e};switch(n){case"delete":s=await m0.nC.delete("/api/redemption/".concat(e,"/"));break;case"enable":a.status=1,s=await m0.nC.put("/api/redemption/?status_only=true",a);break;case"disable":a.status=2,s=await m0.nC.put("/api/redemption/?status_only=true",a)}const{success:o,message:l}=s.data;if(o){(0,m0.Te)("\u64cd\u4f5c\u6210\u529f\u5b8c\u6210\uff01");let e=s.data.data,a=[...t];"delete"===n||(r.status=e.status),i(a)}else(0,m0.Qg)(l)};let C=t.slice((s-1)*y0.re,s*y0.re);const k={onSelect:(e,t)=>{},onSelectAll:(e,t)=>{},onChange:(e,t)=>{g(t)}};return(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(O4,{refresh:async()=>{await _(s-1)},editingRedemption:f,visiable:v,handleClose:()=>{y(!1)}}),(0,g0.jsx)(v0.lV,{onSubmit:async()=>{if(""===o)return await _(0),void a(1);h(!0);const e=await m0.nC.get("/api/redemption/search?keyword=".concat(o)),{success:t,message:n,data:r}=e.data;t?(i(r),a(1)):(0,m0.Qg)(n),h(!1)},children:(0,g0.jsx)(v0.lV.Input,{label:"\u641c\u7d22\u5173\u952e\u5b57",field:"keyword",icon:"search",iconPosition:"left",placeholder:"\u5173\u952e\u5b57(id\u6216\u8005\u540d\u79f0)",value:o,loading:c,onChange:async e=>{l(e.trim())}})}),(0,g0.jsx)(v0.XI,{style:{marginTop:20},columns:e,dataSource:C,pagination:{currentPage:s,pageSize:y0.re,total:d,formatPageText:e=>"\u7b2c ".concat(e.currentStart," - ").concat(e.currentEnd," \u6761\uff0c\u5171 ").concat(t.length," \u6761"),onPageChange:e=>{a(e),e===Math.ceil(t.length/y0.re)+1&&_(e-1).then((e=>{}))}},loading:n,rowSelection:k,onRow:(e,t)=>1!==e.status?{style:{background:"var(--semi-color-disabled-border)"}}:{}}),(0,g0.jsx)(v0.$n,{theme:"light",type:"primary",style:{marginRight:8},onClick:()=>{m({id:void 0}),y(!0)},children:"\u6dfb\u52a0\u5151\u6362\u7801"}),(0,g0.jsx)(v0.$n,{label:"\u590d\u5236\u6240\u9009\u5151\u6362\u7801",type:"warning",onClick:async()=>{if(0===p.length)return void(0,m0.Qg)("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u5151\u6362\u7801\uff01");let e="";for(let t=0;t<p.length;t++)e+=p[t].name+"    "+p[t].key+"\n";await S(e)},children:"\u590d\u5236\u6240\u9009\u5151\u6362\u7801\u5230\u526a\u8d34\u677f"})]})},I4=()=>(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsxs)(v0.Layout,{children:[(0,g0.jsx)(v0.Layout.Header,{children:(0,g0.jsx)("h3",{children:"\u7ba1\u7406\u5151\u6362\u7801"})}),(0,g0.jsx)(v0.Layout.Content,{children:(0,g0.jsx)(M4,{})})]})}),R4=()=>{const[e,t]=(0,P$.useState)(""),[i,n]=(0,P$.useState)(""),[r,s]=(0,P$.useState)(10),[a,o]=(0,P$.useState)(1),[l,c]=(0,P$.useState)(0),[h,d]=(0,P$.useState)(1),[u,p]=(0,P$.useState)(""),[g,f]=(0,P$.useState)(!1),[m,v]=(0,P$.useState)(0),[y,b]=(0,P$.useState)(!1),[_,x]=(0,P$.useState)(!1),[S,w]=(0,P$.useState)("");(0,P$.useEffect)((()=>{let e=localStorage.getItem("status");e&&(e=JSON.parse(e),e.top_up_link&&p(e.top_up_link),e.min_topup&&d(e.min_topup),e.enable_online_topup&&f(e.enable_online_topup)),(async()=>{let e=await m0.nC.get("/api/user/self");const{success:t,message:i,data:n}=e.data;t?v(n.quota):(0,m0.Qg)(i)})().then()}),[]);const C=async e=>{void 0===e&&(e=r);try{const t=await m0.nC.post("/api/user/amount",{amount:parseFloat(e),top_up_code:i});if(void 0!==t){const{message:e,data:i}=t.data;"success"===e?c(parseFloat(i)):(0,m0.Qg)(i)}else(0,m0.Qg)(t)}catch(H6){console.log(H6)}};return(0,g0.jsx)("div",{children:(0,g0.jsxs)(v0.Layout,{children:[(0,g0.jsx)(v0.Layout.Header,{children:(0,g0.jsx)("h3",{children:"\u5145\u503c\u989d\u5ea6"})}),(0,g0.jsxs)(v0.Layout.Content,{children:[(0,g0.jsxs)(v0.aF,{title:"\u786e\u5b9a\u8981\u5145\u503c\u5417",visible:_,onOk:async()=>{if(0===l&&await C(),r<h)(0,m0.cf)("\u5145\u503c\u6570\u91cf\u4e0d\u80fd\u5c0f\u4e8e"+h);else{x(!1);try{const e=await m0.nC.post("/api/user/pay",{amount:parseInt(r),top_up_code:i,payment_method:S});if(void 0!==e){const{message:t,data:i}=e.data;if("success"===t){let t=i,n=e.data.url,r=document.createElement("form");r.action=n,r.method="POST",navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<1||(r.target="_blank");for(let e in t){let i=document.createElement("input");i.type="hidden",i.name=e,i.value=t[e],r.appendChild(i)}document.body.appendChild(r),r.submit(),document.body.removeChild(r)}else(0,m0.Qg)(i)}else(0,m0.Qg)(e)}catch(H6){console.log(H6)}}},onCancel:()=>{x(!1)},maskClosable:!1,size:"small",centered:!0,children:[(0,g0.jsxs)("p",{children:["\u5145\u503c\u6570\u91cf\uff1a",r,"$"]}),(0,g0.jsxs)("p",{children:["\u5b9e\u4ed8\u91d1\u989d\uff1a",l+"\u5143"]}),(0,g0.jsx)("p",{children:"\u662f\u5426\u786e\u8ba4\u5145\u503c\uff1f"})]}),(0,g0.jsx)("div",{style:{marginTop:20,display:"flex",justifyContent:"center"},children:(0,g0.jsxs)(v0.Zp,{style:{width:"500px",padding:"20px"},children:[(0,g0.jsxs)(P0.A,{level:3,style:{textAlign:"center"},children:["\u4f59\u989d ",k0(m)]}),(0,g0.jsxs)("div",{style:{marginTop:20},children:[(0,g0.jsx)(v0.cG,{children:"\u5151\u6362\u4f59\u989d"}),(0,g0.jsxs)(v0.lV,{children:[(0,g0.jsx)(v0.lV.Input,{field:"redemptionCode",label:"\u5151\u6362\u7801",placeholder:"\u5151\u6362\u7801",name:"redemptionCode",value:e,onChange:e=>{t(e)}}),(0,g0.jsxs)(v0.$x,{children:[u?(0,g0.jsx)(v0.$n,{type:"primary",theme:"solid",onClick:()=>{u?window.open(u,"_blank"):(0,m0.Qg)("\u8d85\u7ea7\u7ba1\u7406\u5458\u672a\u8bbe\u7f6e\u5145\u503c\u94fe\u63a5\uff01")},children:"\u83b7\u53d6\u5151\u6362\u7801"}):null,(0,g0.jsx)(v0.$n,{type:"warning",theme:"solid",onClick:async()=>{if(""!==e){b(!0);try{const i=await m0.nC.post("/api/user/topup",{key:e}),{success:n,message:r,data:s}=i.data;n?((0,m0.Te)("\u5151\u6362\u6210\u529f\uff01"),v0.aF.success({title:"\u5151\u6362\u6210\u529f\uff01",content:"\u6210\u529f\u5151\u6362\u989d\u5ea6\uff1a"+k0(s),centered:!0}),v((e=>e+s)),t("")):(0,m0.Qg)(r)}catch(H6){(0,m0.Qg)("\u8bf7\u6c42\u5931\u8d25")}finally{b(!1)}}else(0,m0.cf)("\u8bf7\u8f93\u5165\u5151\u6362\u7801\uff01")},disabled:y,children:y?"\u5151\u6362\u4e2d...":"\u5151\u6362"})]})]})]})]})})]})]})})};var D4=i(3784);const{Header:L4}=v0.Layout;const j4=["amber","blue","cyan","green","grey","indigo","light-blue","lime","orange","pink","purple","red","teal","violet","yellow"];function F4(e){switch(e){case 1:return(0,g0.jsx)(v0.vw,{color:"cyan",size:"large",children:" \u5145\u503c "});case 2:return(0,g0.jsx)(v0.vw,{color:"lime",size:"large",children:" \u6d88\u8d39 "});case 3:return(0,g0.jsx)(v0.vw,{color:"orange",size:"large",children:" \u7ba1\u7406 "});case 4:return(0,g0.jsx)(v0.vw,{color:"purple",size:"large",children:" \u7cfb\u7edf "});default:return(0,g0.jsx)(v0.vw,{color:"black",size:"large",children:" \u672a\u77e5 "})}}const B4=()=>{const e=[{title:"\u65f6\u95f4",dataIndex:"timestamp2string"},{title:"\u6e20\u9053",dataIndex:"channel",className:(0,m0.qc)()?"tableShow":"tableHiddle",render:(e,t,i)=>x&&(0===t.type||2===t.type)?(0,g0.jsx)("div",{children:(0,g0.jsxs)(v0.vw,{color:j4[parseInt(e)%j4.length],size:"large",children:[" ",e," "]})}):(0,g0.jsx)(g0.Fragment,{})},{title:"\u7528\u6237",dataIndex:"username",className:(0,m0.qc)()?"tableShow":"tableHiddle",render:(e,t,i)=>x?(0,g0.jsxs)("div",{children:[(0,g0.jsx)(v0.eu,{size:"small",color:O0(e),style:{marginRight:4},onClick:()=>D(t.user_id),children:"string"===typeof e&&e.slice(0,1)}),e]}):(0,g0.jsx)(g0.Fragment,{})},{title:"\u4ee4\u724c",dataIndex:"token_name",render:(e,t,i)=>0===t.type||2===t.type?(0,g0.jsx)("div",{children:(0,g0.jsxs)(v0.vw,{color:"grey",size:"large",onClick:()=>{N(e)},children:[" ",e," "]})}):(0,g0.jsx)(g0.Fragment,{})},{title:"\u7c7b\u578b",dataIndex:"type",render:(e,t,i)=>(0,g0.jsx)("div",{children:F4(e)})},{title:"\u6a21\u578b",dataIndex:"model_name",render:(e,t,i)=>0===t.type||2===t.type?(0,g0.jsx)("div",{children:(0,g0.jsxs)(v0.vw,{color:O0(e),size:"large",onClick:()=>{N(e)},children:[" ",e," "]})}):(0,g0.jsx)(g0.Fragment,{})},{title:"\u63d0\u793a",dataIndex:"prompt_tokens",render:(e,t,i)=>0===t.type||2===t.type?(0,g0.jsx)("div",{children:(0,g0.jsxs)("span",{children:[" ",e," "]})}):(0,g0.jsx)(g0.Fragment,{})},{title:"\u8865\u5168",dataIndex:"completion_tokens",render:(e,t,i)=>parseInt(e)>0&&(0===t.type||2===t.type)?(0,g0.jsx)("div",{children:(0,g0.jsxs)("span",{children:[" ",e," "]})}):(0,g0.jsx)(g0.Fragment,{})},{title:"\u82b1\u8d39",dataIndex:"quota",render:(e,t,i)=>0===t.type||2===t.type?(0,g0.jsx)("div",{children:k0(e,6)}):(0,g0.jsx)(g0.Fragment,{})},{title:"\u8be6\u60c5",dataIndex:"content",render:(e,t,i)=>(0,g0.jsx)(D4.A,{ellipsis:{rows:2,showTooltip:{type:"popover",opts:{style:{width:240}}}},style:{maxWidth:240},children:e})}],[t,i]=(0,P$.useState)([]),[n,r]=(0,P$.useState)(!1),[s,a]=(0,P$.useState)(!1),[o,l]=(0,P$.useState)(!1),[c,h]=(0,P$.useState)(1),[d,u]=(0,P$.useState)(y0.re),[p,g]=(0,P$.useState)(y0.re),[f,m]=(0,P$.useState)(""),[v,y]=(0,P$.useState)(!1),[b,_]=(0,P$.useState)(0),x=(0,m0.qc)();let S=new Date;const[w,C]=(0,P$.useState)({username:"",token_name:"",model_name:"",start_timestamp:(0,m0.gA)(S.getTime()/1e3-86400),end_timestamp:(0,m0.gA)(S.getTime()/1e3+3600),channel:""}),{username:k,token_name:A,model_name:E,start_timestamp:T,end_timestamp:O,channel:P}=w,[M,I]=(0,P$.useState)({quota:0,token:0}),R=(e,t)=>{C((i=>({...i,[t]:e})))},D=async e=>{if(!x)return;const t=await m0.nC.get("/api/user/".concat(e)),{success:i,message:n,data:r}=t.data;i?v0.aF.info({title:"\u7528\u6237\u4fe1\u606f",content:(0,g0.jsxs)("div",{style:{padding:12},children:[(0,g0.jsxs)("p",{children:["\u7528\u6237\u540d: ",r.username]}),(0,g0.jsxs)("p",{children:["\u4f59\u989d: ",k0(r.quota)]}),(0,g0.jsxs)("p",{children:["\u5df2\u7528\u989d\u5ea6\uff1a",k0(r.used_quota)]}),(0,g0.jsxs)("p",{children:["\u8bf7\u6c42\u6b21\u6570\uff1a",_0(r.request_count)]})]}),centered:!0}):(0,m0.Qg)(n)},L=e=>{for(let t=0;t<e.length;t++)e[t].timestamp2string=(0,m0.gA)(e[t].created_at),e[t].key=""+e[t].id;i(e),u(e.length+y0.re)},j=async function(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a(!0);let r="",s=Date.parse(T)/1e3,o=Date.parse(O)/1e3;r=x?"/api/log/?p=".concat(e,"&page_size=").concat(i,"&type=").concat(n,"&username=").concat(k,"&token_name=").concat(A,"&model_name=").concat(E,"&start_timestamp=").concat(s,"&end_timestamp=").concat(o,"&channel=").concat(P):"/api/log/self/?p=".concat(e,"&page_size=").concat(i,"&type=").concat(n,"&token_name=").concat(A,"&model_name=").concat(E,"&start_timestamp=").concat(s,"&end_timestamp=").concat(o);const l=await m0.nC.get(r),{success:c,message:h,data:d}=l.data;if(c)if(0===e)L(d);else{let n=[...t];n.splice(e*i,d.length,...d),L(n)}else(0,m0.Qg)(h);a(!1)},F=t.slice((c-1)*p,c*p),B=async e=>{h(1),await j(0,p,e)},N=async e=>{await(0,m0.C)(e)?(0,m0.Te)("\u5df2\u590d\u5236\uff1a"+e):v0.aF.error({title:"\u65e0\u6cd5\u590d\u5236\u5230\u526a\u8d34\u677f\uff0c\u8bf7\u624b\u52a8\u590d\u5236",content:e})};(0,P$.useEffect)((()=>{const e=parseInt(localStorage.getItem("page-size"))||y0.re;g(e),j(0,e).then().catch((e=>{(0,m0.Qg)(e)}))}),[]);return(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsxs)(v0.Layout,{children:[(0,g0.jsx)(L4,{children:(0,g0.jsx)(v0.tK,{spinning:o,children:(0,g0.jsxs)("h3",{children:["\u4f7f\u7528\u660e\u7ec6\uff08\u603b\u6d88\u8017\u989d\u5ea6\uff1a",(0,g0.jsx)("span",{onClick:async()=>{l(!0),x?await(async()=>{let e=Date.parse(T)/1e3,t=Date.parse(O)/1e3,i=await m0.nC.get("/api/log/stat?type=".concat(b,"&username=").concat(k,"&token_name=").concat(A,"&model_name=").concat(E,"&start_timestamp=").concat(e,"&end_timestamp=").concat(t,"&channel=").concat(P));const{success:n,message:r,data:s}=i.data;n?I(s):(0,m0.Qg)(r)})():await(async()=>{let e=Date.parse(T)/1e3,t=Date.parse(O)/1e3,i=await m0.nC.get("/api/log/self/stat?type=".concat(b,"&token_name=").concat(A,"&model_name=").concat(E,"&start_timestamp=").concat(e,"&end_timestamp=").concat(t));const{success:n,message:r,data:s}=i.data;n?I(s):(0,m0.Qg)(r)})(),r(!0),l(!1)},style:{cursor:"pointer",color:"gray"},children:n?k0(M.quota):"\u70b9\u51fb\u67e5\u770b"}),"\uff09"]})})}),(0,g0.jsx)(v0.lV,{layout:"horizontal",style:{marginTop:10},children:(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(v0.lV.Input,{field:"token_name",label:"\u4ee4\u724c\u540d\u79f0",style:{width:176},value:A,placeholder:"\u53ef\u9009\u503c",name:"token_name",onChange:e=>R(e,"token_name")}),(0,g0.jsx)(v0.lV.Input,{field:"model_name",label:"\u6a21\u578b\u540d\u79f0",style:{width:176},value:E,placeholder:"\u53ef\u9009\u503c",name:"model_name",onChange:e=>R(e,"model_name")}),(0,g0.jsx)(v0.lV.DatePicker,{field:"start_timestamp",label:"\u8d77\u59cb\u65f6\u95f4",style:{width:272},initValue:T,value:T,type:"dateTime",name:"start_timestamp",onChange:e=>R(e,"start_timestamp")}),(0,g0.jsx)(v0.lV.DatePicker,{field:"end_timestamp",fluid:!0,label:"\u7ed3\u675f\u65f6\u95f4",style:{width:272},initValue:O,value:O,type:"dateTime",name:"end_timestamp",onChange:e=>R(e,"end_timestamp")}),x&&(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(v0.lV.Input,{field:"channel",label:"\u6e20\u9053 ID",style:{width:176},value:P,placeholder:"\u53ef\u9009\u503c",name:"channel",onChange:e=>R(e,"channel")}),(0,g0.jsx)(v0.lV.Input,{field:"username",label:"\u7528\u6237\u540d\u79f0",style:{width:176},value:k,placeholder:"\u53ef\u9009\u503c",name:"username",onChange:e=>R(e,"username")})]}),(0,g0.jsx)(v0.lV.Section,{children:(0,g0.jsx)(v0.$n,{label:"\u67e5\u8be2",type:"primary",htmlType:"submit",className:"btn-margin-right",onClick:B,loading:s,children:"\u67e5\u8be2"})})]})}),(0,g0.jsx)(v0.XI,{style:{marginTop:5},columns:e,dataSource:F,pagination:{currentPage:c,pageSize:p,total:d,pageSizeOpts:[10,20,50,100],showSizeChanger:!0,onPageSizeChange:e=>{(async e=>{localStorage.setItem("page-size",e+""),g(e),h(1),j(0,e).then().catch((e=>{(0,m0.Qg)(e)}))})(e).then()},onPageChange:e=>{h(e),e===Math.ceil(t.length/p)+1&&j(e-1,p).then((e=>{}))}}}),(0,g0.jsxs)(v0.l6,{defaultValue:"0",style:{width:120},onChange:e=>{_(parseInt(e)),B(parseInt(e)).then()},children:[(0,g0.jsx)(v0.l6.Option,{value:"0",children:"\u5168\u90e8"}),(0,g0.jsx)(v0.l6.Option,{value:"1",children:"\u5145\u503c"}),(0,g0.jsx)(v0.l6.Option,{value:"2",children:"\u6d88\u8d39"}),(0,g0.jsx)(v0.l6.Option,{value:"3",children:"\u7ba1\u7406"}),(0,g0.jsx)(v0.l6.Option,{value:"4",children:"\u7cfb\u7edf"})]})]})})},N4=()=>(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsx)(B4,{})}),z4=()=>{const e=localStorage.getItem("chat_link");return(0,g0.jsx)("iframe",{src:e,style:{width:"100%",height:"85vh",border:"none"}})},H4=["amber","blue","cyan","green","grey","indigo","light-blue","lime","orange","pink","purple","red","teal","violet","yellow"];function V4(e){switch(e){case"IMAGINE":return(0,g0.jsx)(v0.vw,{color:"blue",size:"large",children:"\u7ed8\u56fe"});case"UPSCALE":return(0,g0.jsx)(v0.vw,{color:"orange",size:"large",children:"\u653e\u5927"});case"VARIATION":return(0,g0.jsx)(v0.vw,{color:"purple",size:"large",children:"\u53d8\u6362"});case"HIGH_VARIATION":return(0,g0.jsx)(v0.vw,{color:"purple",size:"large",children:"\u5f3a\u53d8\u6362"});case"LOW_VARIATION":return(0,g0.jsx)(v0.vw,{color:"purple",size:"large",children:"\u5f31\u53d8\u6362"});case"PAN":return(0,g0.jsx)(v0.vw,{color:"cyan",size:"large",children:"\u5e73\u79fb"});case"DESCRIBE":return(0,g0.jsx)(v0.vw,{color:"yellow",size:"large",children:"\u56fe\u751f\u6587"});case"BLEND":return(0,g0.jsx)(v0.vw,{color:"lime",size:"large",children:"\u56fe\u6df7\u5408"});case"SHORTEN":return(0,g0.jsx)(v0.vw,{color:"pink",size:"large",children:"\u7f29\u8bcd"});case"REROLL":return(0,g0.jsx)(v0.vw,{color:"indigo",size:"large",children:"\u91cd\u7ed8"});case"INPAINT":return(0,g0.jsx)(v0.vw,{color:"violet",size:"large",children:"\u5c40\u90e8\u91cd\u7ed8-\u63d0\u4ea4"});case"ZOOM":return(0,g0.jsx)(v0.vw,{color:"teal",size:"large",children:"\u53d8\u7126"});case"CUSTOM_ZOOM":return(0,g0.jsx)(v0.vw,{color:"teal",size:"large",children:"\u81ea\u5b9a\u4e49\u53d8\u7126-\u63d0\u4ea4"});case"MODAL":return(0,g0.jsx)(v0.vw,{color:"green",size:"large",children:"\u7a97\u53e3\u5904\u7406"});case"SWAP_FACE":return(0,g0.jsx)(v0.vw,{color:"light-green",size:"large",children:"\u6362\u8138"});default:return(0,g0.jsx)(v0.vw,{color:"white",size:"large",children:"\u672a\u77e5"})}}function U4(e){switch(e){case 1:return(0,g0.jsx)(v0.vw,{color:"green",size:"large",children:"\u5df2\u63d0\u4ea4"});case 21:return(0,g0.jsx)(v0.vw,{color:"lime",size:"large",children:"\u7b49\u5f85\u4e2d"});case 22:return(0,g0.jsx)(v0.vw,{color:"orange",size:"large",children:"\u91cd\u590d\u63d0\u4ea4"});case 0:return(0,g0.jsx)(v0.vw,{color:"yellow",size:"large",children:"\u672a\u63d0\u4ea4"});default:return(0,g0.jsx)(v0.vw,{color:"white",size:"large",children:"\u672a\u77e5"})}}function W4(e){switch(e){case"SUCCESS":return(0,g0.jsx)(v0.vw,{color:"green",size:"large",children:"\u6210\u529f"});case"NOT_START":return(0,g0.jsx)(v0.vw,{color:"grey",size:"large",children:"\u672a\u542f\u52a8"});case"SUBMITTED":return(0,g0.jsx)(v0.vw,{color:"yellow",size:"large",children:"\u961f\u5217\u4e2d"});case"IN_PROGRESS":return(0,g0.jsx)(v0.vw,{color:"blue",size:"large",children:"\u6267\u884c\u4e2d"});case"FAILURE":return(0,g0.jsx)(v0.vw,{color:"red",size:"large",children:"\u5931\u8d25"});case"MODAL":return(0,g0.jsx)(v0.vw,{color:"yellow",size:"large",children:"\u7a97\u53e3\u7b49\u5f85"});default:return(0,g0.jsx)(v0.vw,{color:"white",size:"large",children:"\u672a\u77e5"})}}const G4=e=>{const t=new Date(1e3*e),i=t.getFullYear(),n=("0"+(t.getMonth()+1)).slice(-2),r=("0"+t.getDate()).slice(-2),s=("0"+t.getHours()).slice(-2),a=("0"+t.getMinutes()).slice(-2),o=("0"+t.getSeconds()).slice(-2);return"".concat(i,"-").concat(n,"-").concat(r," ").concat(s,":").concat(a,":").concat(o)},K4=()=>{const[e,t]=(0,P$.useState)(!1),[i,n]=(0,P$.useState)(""),r=[{title:"\u63d0\u4ea4\u65f6\u95f4",dataIndex:"submit_time",render:(e,t,i)=>(0,g0.jsx)("div",{children:G4(e/1e3)})},{title:"\u6e20\u9053",dataIndex:"channel_id",className:(0,m0.qc)()?"tableShow":"tableHiddle",render:(e,t,i)=>(0,g0.jsx)("div",{children:(0,g0.jsxs)(v0.vw,{color:H4[parseInt(e)%H4.length],size:"large",onClick:()=>{j(e)},children:[" ",e," "]})})},{title:"\u7c7b\u578b",dataIndex:"action",render:(e,t,i)=>(0,g0.jsx)("div",{children:V4(e)})},{title:"\u4efb\u52a1ID",dataIndex:"mj_id",render:(e,t,i)=>(0,g0.jsx)("div",{children:e})},{title:"\u63d0\u4ea4\u7ed3\u679c",dataIndex:"code",className:(0,m0.qc)()?"tableShow":"tableHiddle",render:(e,t,i)=>(0,g0.jsx)("div",{children:U4(e)})},{title:"\u4efb\u52a1\u72b6\u6001",dataIndex:"status",className:(0,m0.qc)()?"tableShow":"tableHiddle",render:(e,t,i)=>(0,g0.jsx)("div",{children:W4(e)})},{title:"\u8fdb\u5ea6",dataIndex:"progress",render:(e,t,i)=>(0,g0.jsx)("div",{children:(0,g0.jsx)(v0.ke,{stroke:"FAILURE"===t.status?"var(--semi-color-warning)":null,percent:e?parseInt(e.replace("%","")):0,showInfo:!0,"aria-label":"drawing progress"})})},{title:"\u7ed3\u679c\u56fe\u7247",dataIndex:"image_url",render:(e,t,i)=>e?(0,g0.jsx)(v0.$n,{onClick:()=>{x(e),v(!0)},children:"\u67e5\u770b\u56fe\u7247"}):"\u65e0"},{title:"Prompt",dataIndex:"prompt",render:(e,i,r)=>e?(0,g0.jsx)(v0.o5.Text,{ellipsis:{showTooltip:!0},style:{width:100},onClick:()=>{n(e),t(!0)},children:e}):"\u65e0"},{title:"PromptEn",dataIndex:"prompt_en",render:(e,i,r)=>e?(0,g0.jsx)(v0.o5.Text,{ellipsis:{showTooltip:!0},style:{width:100},onClick:()=>{n(e),t(!0)},children:e}):"\u65e0"},{title:"\u5931\u8d25\u539f\u56e0",dataIndex:"fail_reason",render:(e,i,r)=>e?(0,g0.jsx)(v0.o5.Text,{ellipsis:{showTooltip:!0},style:{width:100},onClick:()=>{n(e),t(!0)},children:e}):"\u65e0"}],[s,a]=(0,P$.useState)([]),[o,l]=(0,P$.useState)(!0),[c,h]=(0,P$.useState)(1),[d,u]=(0,P$.useState)(y0.re),[p,g]=(0,P$.useState)(0),f=(0,m0.qc)(),[m,v]=(0,P$.useState)(!1),[y,b]=(0,P$.useState)(!1),[_,x]=(0,P$.useState)("");let S=new Date;const[w,C]=(0,P$.useState)({channel_id:"",mj_id:"",start_timestamp:(0,m0.gA)(S.getTime()/1e3-2592e3),end_timestamp:(0,m0.gA)(S.getTime()/1e3+3600)}),{channel_id:k,mj_id:A,start_timestamp:E,end_timestamp:T}=w,[O,P]=(0,P$.useState)({quota:0,token:0}),M=(e,t)=>{C((i=>({...i,[t]:e})))},I=e=>{for(let t=0;t<e.length;t++)e[t].timestamp2string=(0,m0.gA)(e[t].created_at),e[t].key=""+e[t].id;a(e),u(e.length+y0.re)},R=async e=>{l(!0);let t="",i=Date.parse(E),n=Date.parse(T);t=f?"/api/mj/?p=".concat(e,"&channel_id=").concat(k,"&mj_id=").concat(A,"&start_timestamp=").concat(i,"&end_timestamp=").concat(n):"/api/mj/self/?p=".concat(e,"&mj_id=").concat(A,"&start_timestamp=").concat(i,"&end_timestamp=").concat(n);const r=await m0.nC.get(t),{success:a,message:o,data:c}=r.data;if(a)if(0===e)I(c);else{let t=[...s];t.splice(e*y0.re,c.length,...c),I(t)}else(0,m0.Qg)(o);l(!1)},D=s.slice((c-1)*y0.re,c*y0.re),L=async()=>{h(1),await R(0)},j=async e=>{await(0,m0.C)(e)?(0,m0.Te)("\u5df2\u590d\u5236\uff1a"+e):v0.aF.error({title:"\u65e0\u6cd5\u590d\u5236\u5230\u526a\u8d34\u677f\uff0c\u8bf7\u624b\u52a8\u590d\u5236",content:e})};return(0,P$.useEffect)((()=>{L().then()}),[p]),(0,P$.useEffect)((()=>{"true"!==localStorage.getItem("mj_notify_enabled")&&b(!0)}),[]),(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsxs)(v0.Layout,{children:[f&&y?(0,g0.jsx)(v0.lZ,{type:"info",description:"\u5f53\u524d\u672a\u5f00\u542fMidjourney\u56de\u8c03\uff0c\u90e8\u5206\u9879\u76ee\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u7ed8\u56fe\u7ed3\u679c\uff0c\u53ef\u5728\u8fd0\u8425\u8bbe\u7f6e\u4e2d\u5f00\u542f\u3002"}):(0,g0.jsx)(g0.Fragment,{}),(0,g0.jsx)(v0.lV,{layout:"horizontal",style:{marginTop:10},children:(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(v0.lV.Input,{field:"channel_id",label:"\u6e20\u9053 ID",style:{width:176},value:k,placeholder:"\u53ef\u9009\u503c",name:"channel_id",onChange:e=>M(e,"channel_id")}),(0,g0.jsx)(v0.lV.Input,{field:"mj_id",label:"\u4efb\u52a1 ID",style:{width:176},value:A,placeholder:"\u53ef\u9009\u503c",name:"mj_id",onChange:e=>M(e,"mj_id")}),(0,g0.jsx)(v0.lV.DatePicker,{field:"start_timestamp",label:"\u8d77\u59cb\u65f6\u95f4",style:{width:272},initValue:E,value:E,type:"dateTime",name:"start_timestamp",onChange:e=>M(e,"start_timestamp")}),(0,g0.jsx)(v0.lV.DatePicker,{field:"end_timestamp",fluid:!0,label:"\u7ed3\u675f\u65f6\u95f4",style:{width:272},initValue:T,value:T,type:"dateTime",name:"end_timestamp",onChange:e=>M(e,"end_timestamp")}),(0,g0.jsx)(v0.lV.Section,{children:(0,g0.jsx)(v0.$n,{label:"\u67e5\u8be2",type:"primary",htmlType:"submit",className:"btn-margin-right",onClick:L,children:"\u67e5\u8be2"})})]})}),(0,g0.jsx)(v0.XI,{style:{marginTop:5},columns:r,dataSource:D,pagination:{currentPage:c,pageSize:y0.re,total:d,pageSizeOpts:[10,20,50,100],onPageChange:e=>{h(e),e===Math.ceil(s.length/y0.re)+1&&R(e-1).then((e=>{}))}},loading:o}),(0,g0.jsx)(v0.aF,{visible:e,onOk:()=>t(!1),onCancel:()=>t(!1),closable:null,bodyStyle:{height:"400px",overflow:"auto"},width:800,children:(0,g0.jsx)("p",{style:{whiteSpace:"pre-line"},children:i})}),(0,g0.jsx)(v0.kC,{src:_,visible:m,onVisibleChange:e=>v(e)})]})})},Y4=()=>(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsx)(K4,{})}),X4=e=>{const t=(0,P$.useRef)();let i=new Date;const[n,r]=(0,P$.useState)({username:"",token_name:"",model_name:"",start_timestamp:"hour"===localStorage.getItem("data_export_default_time")?(0,m0.gA)(i.getTime()/1e3-86400):"week"===localStorage.getItem("data_export_default_time")?(0,m0.gA)(i.getTime()/1e3-2592e3):(0,m0.gA)(i.getTime()/1e3-604800),end_timestamp:(0,m0.gA)(i.getTime()/1e3+3600),channel:"",data_export_default_time:""}),{username:s,model_name:a,start_timestamp:o,end_timestamp:l,channel:c}=n,h=(0,m0.qc)(),d=(0,P$.useRef)(!1),[u,p]=(0,P$.useState)(null),[g,f]=(0,P$.useState)(null),[m,v]=(0,P$.useState)(!1),[y,b]=(0,P$.useState)([]),[_,x]=(0,P$.useState)(0),[S,w]=(0,P$.useState)(0),[C,k]=(0,P$.useState)(localStorage.getItem("data_export_default_time")||"hour"),A=(e,t)=>{"data_export_default_time"!==t?r((i=>({...i,[t]:e}))):k(e)},E={type:"bar",data:[{id:"barData",values:[]}],xField:"Time",yField:"Usage",seriesField:"Model",stack:!0,legends:{visible:!0},title:{visible:!0,text:"\u6a21\u578b\u6d88\u8017\u5206\u5e03",subtext:"0"},bar:{state:{hover:{stroke:"#000",lineWidth:1}}},tooltip:{mark:{content:[{key:e=>e.Model,value:e=>x0(parseFloat(e.Usage),4)}]},dimension:{content:[{key:e=>e.Model,value:e=>e.Usage}],updateContent:e=>{e.sort(((e,t)=>t.value-e.value));let t=0;for(let i=0;i<e.length;i++)t+=parseFloat(e[i].value),e[i].value=x0(parseFloat(e[i].value),4);return e.unshift({key:"\u603b\u8ba1",value:x0(t,4)}),e}}},color:{specified:T0}},T={type:"pie",data:[{id:"id0",values:[{type:"null",value:"0"}]}],outerRadius:.8,innerRadius:.5,padAngle:.6,valueField:"value",categoryField:"type",pie:{style:{cornerRadius:10},state:{hover:{outerRadius:.85,stroke:"#000",lineWidth:1},selected:{outerRadius:.85,stroke:"#000",lineWidth:1}}},title:{visible:!0,text:"\u6a21\u578b\u8c03\u7528\u6b21\u6570\u5360\u6bd4"},legends:{visible:!0,orient:"left"},label:{visible:!0},tooltip:{mark:{content:[{key:e=>e.type,value:e=>_0(e.value)}]}},color:{specified:T0}},O=async(e,t)=>{v(!0);let n="",r=Date.parse(o)/1e3,a=Date.parse(l)/1e3;n=h?"/api/data/?username=".concat(s,"&start_timestamp=").concat(r,"&end_timestamp=").concat(a,"&default_time=").concat(C):"/api/data/self/?start_timestamp=".concat(r,"&end_timestamp=").concat(a,"&default_time=").concat(C);const c=await m0.nC.get(n),{success:d,message:u,data:p}=c.data;if(d){b(p),0===p.length&&p.push({count:0,model_name:"\u65e0\u6570\u636e",quota:0,created_at:i.getTime()/1e3});let n=3600;"day"===C?n=86400:"week"===C&&(n=604800),p.forEach((e=>{e.created_at=Math.floor(e.created_at/n)*n})),P(e,t,p)}else(0,m0.Qg)(u);v(!1)},P=(e,t,i)=>{let n=[],r=[],s=0,a=0;for(let o=0;o<i.length;o++){const e=i[o];s+=e.quota,a+=e.count;let t=n.find((t=>t.type===e.model_name));t?t.value+=e.count:n.push({type:e.model_name,value:e.count});let l=(0,m0.pi)(e.created_at,C),c=r.find((t=>t.Time===l&&t.Model===e.model_name));c?c.Usage+=parseFloat(C0(e.quota)):r.push({Time:l,Model:e.model_name,Usage:parseFloat(C0(e.quota))})}x(s),w(a),n.sort(((e,t)=>t.value-e.value)),T.title.subtext="\u603b\u8ba1\uff1a".concat(_0(a)),T.data[0].values=n,E.title.subtext="\u603b\u8ba1\uff1a".concat(k0(s,2)),E.data[0].values=r,t.updateSpec(T),e.updateSpec(E),t.reLayout(),e.reLayout()};return(0,P$.useEffect)((()=>{d.current||(d.current=!0,(async()=>{let e=u;u||(e=new f$(E,{dom:"model_data"}),p(e),e.renderAsync());let t=g;g||(t=new f$(T,{dom:"model_pie"}),f(t),t.renderAsync()),console.log("init vchart"),await O(e,t)})())}),[]),(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsxs)(v0.Layout,{children:[(0,g0.jsx)(v0.Layout.Header,{children:(0,g0.jsx)("h3",{children:"\u6570\u636e\u770b\u677f"})}),(0,g0.jsxs)(v0.Layout.Content,{children:[(0,g0.jsx)(v0.lV,{ref:t,layout:"horizontal",style:{marginTop:10},children:(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(v0.lV.DatePicker,{field:"start_timestamp",label:"\u8d77\u59cb\u65f6\u95f4",style:{width:272},initValue:o,value:o,type:"dateTime",name:"start_timestamp",onChange:e=>A(e,"start_timestamp")}),(0,g0.jsx)(v0.lV.DatePicker,{field:"end_timestamp",fluid:!0,label:"\u7ed3\u675f\u65f6\u95f4",style:{width:272},initValue:l,value:l,type:"dateTime",name:"end_timestamp",onChange:e=>A(e,"end_timestamp")}),(0,g0.jsx)(v0.lV.Select,{field:"data_export_default_time",label:"\u65f6\u95f4\u7c92\u5ea6",style:{width:176},initValue:C,placeholder:"\u65f6\u95f4\u7c92\u5ea6",name:"data_export_default_time",optionList:[{label:"\u5c0f\u65f6",value:"hour"},{label:"\u5929",value:"day"},{label:"\u5468",value:"week"}],onChange:e=>A(e,"data_export_default_time")}),h&&(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsx)(v0.lV.Input,{field:"username",label:"\u7528\u6237\u540d\u79f0",style:{width:176},value:s,placeholder:"\u53ef\u9009\u503c",name:"username",onChange:e=>A(e,"username")})}),(0,g0.jsx)(v0.lV.Section,{children:(0,g0.jsx)(v0.$n,{label:"\u67e5\u8be2",type:"primary",htmlType:"submit",className:"btn-margin-right",onClick:async()=>{await O(u,g)},loading:m,children:"\u67e5\u8be2"})})]})}),(0,g0.jsxs)(v0.tK,{spinning:m,children:[(0,g0.jsx)("div",{style:{height:500},children:(0,g0.jsx)("div",{id:"model_pie",style:{width:"100%",minWidth:100}})}),(0,g0.jsx)("div",{style:{height:500},children:(0,g0.jsx)("div",{id:"model_data",style:{width:"100%",minWidth:100}})})]})]})]})})},q4=(0,P$.lazy)((()=>i.e(151).then(i.bind(i,30151)))),Z4=(0,P$.lazy)((()=>i.e(585).then(i.bind(i,25585))));const Q4=function(){const[e,t]=(0,P$.useContext)(T5);return(0,P$.useEffect)((()=>{(()=>{let e=localStorage.getItem("user");if(e){let i=JSON.parse(e);t({type:"login",payload:i})}})();let e=(0,m0.fx)();e&&(document.title=e);let i=(0,m0.a8)();if(i){let e=document.querySelector("link[rel~='icon']");e&&(e.href=i)}}),[]),(0,g0.jsx)(v0.Layout,{children:(0,g0.jsx)(v0.Layout.Content,{children:(0,g0.jsxs)(WJ,{children:[(0,g0.jsx)(VJ,{path:"/",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(q4,{})})}),(0,g0.jsx)(VJ,{path:"/channel",element:(0,g0.jsx)(j0,{children:(0,g0.jsx)(S4,{})})}),(0,g0.jsx)(VJ,{path:"/channel/edit/:id",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(y4,{})})}),(0,g0.jsx)(VJ,{path:"/channel/add",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(y4,{})})}),(0,g0.jsx)(VJ,{path:"/token",element:(0,g0.jsx)(j0,{children:(0,g0.jsx)(T4,{})})}),(0,g0.jsx)(VJ,{path:"/redemption",element:(0,g0.jsx)(j0,{children:(0,g0.jsx)(I4,{})})}),(0,g0.jsx)(VJ,{path:"/user",element:(0,g0.jsx)(j0,{children:(0,g0.jsx)(L0,{})})}),(0,g0.jsx)(VJ,{path:"/user/edit/:id",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(I0,{})})}),(0,g0.jsx)(VJ,{path:"/user/edit",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(I0,{})})}),(0,g0.jsx)(VJ,{path:"/user/reset",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(f4,{})})}),(0,g0.jsx)(VJ,{path:"/login",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(F5,{})})}),(0,g0.jsx)(VJ,{path:"/register",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(k5,{})})}),(0,g0.jsx)(VJ,{path:"/reset",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(p4,{})})}),(0,g0.jsx)(VJ,{path:"/oauth/github",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(g4,{})})}),(0,g0.jsx)(VJ,{path:"/setting",element:(0,g0.jsx)(j0,{children:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(u4,{})})})}),(0,g0.jsx)(VJ,{path:"/topup",element:(0,g0.jsx)(j0,{children:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(R4,{})})})}),(0,g0.jsx)(VJ,{path:"/log",element:(0,g0.jsx)(j0,{children:(0,g0.jsx)(N4,{})})}),(0,g0.jsx)(VJ,{path:"/detail",element:(0,g0.jsx)(j0,{children:(0,g0.jsx)(X4,{})})}),(0,g0.jsx)(VJ,{path:"/midjourney",element:(0,g0.jsx)(j0,{children:(0,g0.jsx)(Y4,{})})}),(0,g0.jsx)(VJ,{path:"/about",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(Z4,{})})}),(0,g0.jsx)(VJ,{path:"/chat",element:(0,g0.jsx)(P$.Suspense,{fallback:(0,g0.jsx)(f0,{}),children:(0,g0.jsx)(z4,{})})}),(0,g0.jsx)(VJ,{path:"*",element:(0,g0.jsx)(B5,{})})]})})})};let $4,J4,e6,t6,i6,n6,r6,s6,a6,o6="",l6={},c6=[],h6=[],d6=0,u6=0,p6=0;class g6{constructor(e){this.pos={x:e?e.x:0,y:e?e.y:0},this.vel={x:0,y:0},this.shrink=.97,this.size=2,this.resistance=1,this.gravity=0,this.flick=!1,this.alpha=1,this.fade=0,this.color=0}update(){this.vel.x*=this.resistance,this.vel.y*=this.resistance,this.vel.y+=this.gravity,this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.size*=this.shrink,this.alpha-=this.fade}render(e){if(!this.exists())return;e.save(),e.globalCompositeOperation="lighter";let t=this.pos.x,i=this.pos.y,n=this.size/2,r=e.createRadialGradient(t,i,.1,t,i,n);r.addColorStop(.1,"rgba(255,255,255,"+this.alpha+")"),r.addColorStop(.8,"hsla("+this.color+", 100%, 50%, "+this.alpha+")"),r.addColorStop(1,"hsla("+this.color+", 100%, 50%, 0.1)"),e.fillStyle=r,e.beginPath(),e.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size:this.size,0,2*Math.PI,!0),e.closePath(),e.fill(),e.restore()}exists(){return this.alpha>=.1&&this.size>=1}}class f6 extends g6{constructor(e){super({x:e,y:p6}),this.explosionColor=0}explode(){for(let e=0;e<l6.explode_debris_num;e++){let e=new g6(this.pos),t=Math.random()*Math.PI*2,i=15*Math.cos(Math.random()*Math.PI/2);e.vel.x=Math.cos(t)*i,e.vel.y=Math.sin(t)*i,e.size=l6.explode_particles_size,e.gravity=.2,e.resistance=.9+.01*l6.explode_particles_resistance,e.shrink=.05*Math.random()+.95,e.flick=!0,e.color=this.explosionColor,c6.push(e)}}render(e){if(!this.exists())return;e.save(),e.globalCompositeOperation="lighter";let t=this.pos.x,i=this.pos.y,n=this.size/2,r=e.createRadialGradient(t,i,.1,t,i,n);r.addColorStop(.1,"rgba(255, 255, 255 ,"+this.alpha+")"),r.addColorStop(1,"rgba(0, 0, 0, "+this.alpha+")"),e.fillStyle=r,e.beginPath(),e.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size/2+this.size/2:this.size,0,2*Math.PI,!0),e.closePath(),e.fill(),e.restore()}}const m6={init:function(e,t){e&&"string"===typeof e&&null!=document.getElementById(e)?(o6=document.getElementById(e),l6.frequency=t.frequency||200,l6.launch_speed=t.launch_speed||12,l6.launch_particles_size=t.launch_particles_size||0,l6.explode_debris_num=10*Math.random()+(t.debris_num||150),l6.explode_particles_resistance=t.explode_particles_resistance||5,l6.explode_particles_size=t.explode_particles_resistance||10,u6=t.width||document.body.clientWidth+"px",p6=t.height||document.body.clientHeight+"px",$4=t.top||"0px",J4=t.bottom||"0px",e6=t.left||"0px",t6=t.right||"0px",i6=t.zIndex||100,d6=10*l6.explode_debris_num,n6=document.createElement("canvas"),n6.id="fireworksField",n6.style.width=u6,n6.style.height=p6,n6.style.position="absolute",n6.style.top=$4,n6.style.bottom=J4,n6.style.left=e6,n6.style.right=t6,n6.style.opacity=1,n6.style.zIndex=i6,r6=n6.getContext("2d"),o6.appendChild(n6),s6=setInterval(this.reload,l6.frequency),a6=setInterval(this.loop,50)):console.log("id\u5bf9\u8c61\u4e0d\u5b58\u5728")},reload:function(){if(h6.length<100){let e=new f6(Math.random()*u6);e.explosionColor=10*Math.floor(360*Math.random()/10),e.vel.y=-1*l6.launch_speed,e.vel.x=2*Math.random()-1,e.size=l6.launch_particles_size,e.shrink=1.008,e.gravity=.005,h6.push(e)}},loop:function(){u6!==window.innerWidth&&(n6.width=u6=window.innerWidth),p6!==window.innerHeight&&(n6.height=p6=window.innerHeight),r6.fillStyle="rgba(0, 0, 0, 0.05)",r6.clearRect(0,0,u6,p6);let e=[];for(let i=0;i<h6.length;i++){h6[i].update(),h6[i].render(r6);let t=Math.sqrt(Math.pow(u6-h6[i].pos.x,2)+Math.pow(p6-h6[i].pos.y,2)),n=h6[i].pos.y<2*p6/3&&100*Math.random()<=1;h6[i].pos.y<p6/5||h6[i].vel.y>=0||t<50||n?h6[i].explode():e.push(h6[i])}h6=e;let t=[];for(let i=0;i<c6.length;i++)c6[i].update(),c6[i].exists()&&(c6[i].render(r6),t.push(c6[i]));for(c6=t;c6.length>d6;)c6.shift()},start:function(){s6&&clearInterval(s6),a6&&clearInterval(a6),s6=setInterval(this.reload,l6.frequency),a6=setInterval(this.loop,50)},stop:function(){clearInterval(s6),setTimeout((function(){clearInterval(a6)}),2e4)}};var v6=i(23463);const y6=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 8.5C23 12.6421 19.6421 16 15.5 16C14.0696 16 12.7327 15.5996 11.5953 14.9047L11 15.5V19H7V23H2V19L8.91221 12.0878C8.33057 11.0221 8 9.79964 8 8.5C8 4.35786 11.3579 1 15.5 1C19.6421 1 23 4.35786 23 8.5ZM19 7.5C19 6.11929 17.8807 5 16.5 5C15.1193 5 14 6.11929 14 7.5C14 8.88071 15.1193 10 16.5 10C17.8807 10 19 8.88071 19 7.5Z",fill:"currentColor"}))}),"key");const b6=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{d:"M12 16C13.9818 16 15.7453 14.3394 16.7142 11.8589C17.3163 11.6122 17.8892 10.8644 18.1508 9.88823C18.4909 8.61881 18.4234 7.48536 17.4964 7.13266C17.4064 2.7111 15.6617 1 12 1C8.33858 1 6.59387 2.71088 6.50372 7.13179C5.57454 7.48354 5.50668 8.61777 5.84709 9.8882C6.10904 10.8658 6.68318 11.6143 7.28626 11.8599C8.2552 14.3398 10.0186 16 12 16Z",fill:"currentColor"}),P$.createElement("path",{d:"M19.6049 22C20.8385 22 21.7171 20.8487 20.867 19.9547C19.1971 18.1985 15.853 17 12 17C8.14699 17 4.80292 18.1985 3.133 19.9547C2.2829 20.8487 3.16148 22 4.39513 22H19.6049Z",fill:"currentColor"}))}),"user");let _6=[{text:"\u5173\u4e8e",itemKey:"about",to:"/about",icon:(0,g0.jsx)(v6.A,{})}];localStorage.getItem("chat_link")&&_6.splice(1,0,{name:"\u804a\u5929",to:"/chat",icon:"comments"});const x6=()=>{const[e,t]=(0,P$.useContext)(T5);let i=EJ();const[n,r]=(0,P$.useState)(!1),[s,a]=(0,P$.useState)(!1);(0,m0.fx)(),(0,m0.a8)();var o=localStorage.getItem("theme-mode");const l=new Date,c=0===l.getMonth()&&1===l.getDate()||1===l.getMonth()&&l.getDate()>=9&&l.getDate()<=24;(0,P$.useEffect)((()=>{"dark"===o&&h(!0),c&&console.log("Happy New Year!")}),[]);const h=e=>{const t=document.body;e?(t.setAttribute("theme-mode","dark"),localStorage.setItem("theme-mode","dark")):(t.removeAttribute("theme-mode"),localStorage.setItem("theme-mode","light")),a(e)};return(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsx)(v0.Layout,{children:(0,g0.jsx)("div",{style:{width:"100%"},children:(0,g0.jsx)(v0.so,{mode:"horizontal",renderWrapper:e=>{let{itemElement:t,isSubNav:i,isInSubNav:n,props:r}=e;return(0,g0.jsx)(e0,{style:{textDecoration:"none"},to:{about:"/about",login:"/login",register:"/register"}[r.itemKey],children:t})},selectedKeys:[],onSelect:e=>{},footer:(0,g0.jsxs)(g0.Fragment,{children:[c&&(0,g0.jsx)(v0.ms,{position:"bottomRight",render:(0,g0.jsx)(v0.ms.Menu,{children:(0,g0.jsx)(v0.ms.Item,{onClick:()=>{m6.init("root",{}),m6.start(),setTimeout((()=>{m6.stop(),setTimeout((()=>{window.location.reload()}),1e4)}),3e3)},children:"Happy New Year!!!"})}),children:(0,g0.jsx)(v0.so.Item,{itemKey:"new-year",text:"\ud83c\udfee"})}),(0,g0.jsx)(v0.so.Item,{itemKey:"about",icon:(0,g0.jsx)(v6.A,{})}),(0,g0.jsx)(v0.dO,{checkedText:"\ud83c\udf1e",size:"large",checked:s,uncheckedText:"\ud83c\udf19",onChange:h}),e.user?(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsxs)(v0.ms,{position:"bottomRight",render:(0,g0.jsx)(v0.ms.Menu,{children:(0,g0.jsx)(v0.ms.Item,{onClick:async function(){r(!1),await m0.nC.get("/api/user/logout"),(0,m0.Te)("\u6ce8\u9500\u6210\u529f!"),t({type:"logout"}),localStorage.removeItem("user"),i("/login")},children:"\u9000\u51fa"})}),children:[(0,g0.jsx)(v0.eu,{size:"small",color:O0(e.user.username),style:{margin:4},children:e.user.username[0]}),(0,g0.jsx)("span",{children:e.user.username})]})}):(0,g0.jsxs)(g0.Fragment,{children:[(0,g0.jsx)(v0.so.Item,{itemKey:"login",text:"\u767b\u5f55",icon:(0,g0.jsx)(y6,{})}),(0,g0.jsx)(v0.so.Item,{itemKey:"register",text:"\u6ce8\u518c",icon:(0,g0.jsx)(b6,{})})]})]})})})})})};function S6(e){var t=e.children,i=e.className,n=e.content,r=e.fluid,s=e.text,a=e.textAlign,o=(0,o0.default)("ui",(0,l0.b5)(s,"text"),(0,l0.b5)(r,"fluid"),(0,l0.T9)(a),"container",i),l=(0,c0.A)(S6,e),c=(0,h0.A)(S6,e);return P$.createElement(c,(0,a0.A)({},l,{className:o}),d0.gD(t)?n:t)}S6.handledProps=["as","children","className","content","fluid","text","textAlign"],S6.propTypes={};const w6=S6,C6=()=>{const e=(0,m0.fx)(),[t,i]=(0,P$.useState)((0,m0.dq)());let n=5;return(0,P$.useEffect)((()=>{const e=setInterval((()=>{n<=0?clearInterval(e):(n--,(()=>{let e=localStorage.getItem("footer_html");e&&i(e)})())}),200);return()=>clearTimeout(e)}),[]),(0,g0.jsx)(r0.A,{vertical:!0,children:(0,g0.jsx)(w6,{textAlign:"center",children:t?(0,g0.jsx)("div",{className:"custom-footer",dangerouslySetInnerHTML:{__html:t}}):(0,g0.jsxs)("div",{className:"custom-footer",children:[(0,g0.jsxs)("a",{href:"https://github.com/songquanpeng/one-api",target:"_blank",children:[e," ",""," "]}),"\u7531"," ",(0,g0.jsx)("a",{href:"https://github.com/songquanpeng",target:"_blank",children:"JustSong"})," ","\u6784\u5efa\uff0c\u4e3b\u9898 air \u6765\u81ea"," ",(0,g0.jsx)("a",{href:"https://github.com/Calcium-Ion",target:"_blank",children:"Calon"})," ","\uff0c\u6e90\u4ee3\u7801\u9075\u5faa"," ",(0,g0.jsx)("a",{href:"https://opensource.org/licenses/mit-license.php",children:"MIT \u534f\u8bae"})]})})})};var k6=i(91036),A6=i(68332);const E6=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{d:"M2 11.4454C2 11.1619 2.12032 10.8917 2.33104 10.7021L11.331 2.60207C11.7113 2.2598 12.2887 2.2598 12.669 2.60207L21.669 10.7021C21.8797 10.8917 22 11.1619 22 11.4454V20C22 21.1046 21.1046 22 20 22H16C15.4477 22 15 21.5523 15 21V17C15 15.3432 13.6569 14 12 14C10.3431 14 9 15.3432 9 17V21C9 21.5523 8.55228 22 8 22H4C2.89543 22 2 21.1046 2 20V11.4454Z",fill:"currentColor"}))}),"home");const T6=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.2122 15.0486L21.4658 15.1885C21.9809 15.4726 22.1534 16.0952 21.851 16.5793C21.7576 16.7288 21.625 16.8535 21.4658 16.9412L12.5474 21.8602C12.2094 22.0466 11.7906 22.0466 11.4526 21.8602L2.53419 16.9412C2.0191 16.6571 1.84663 16.0345 2.14896 15.5504C2.24239 15.4009 2.37501 15.2762 2.53419 15.1885L2.78753 15.0486L11.4526 19.8278C11.7737 20.0049 12.1678 20.0137 12.4961 19.8543L12.5474 19.8278L21.2122 15.0486ZM21.2122 10.9838L21.4658 11.1236C21.9809 11.4077 22.1534 12.0304 21.851 12.5144C21.7576 12.664 21.625 12.7886 21.4658 12.8764L12.5474 17.7953C12.2094 17.9818 11.7906 17.9818 11.4526 17.7953L2.53419 12.8764C2.0191 12.5923 1.84663 11.9696 2.14896 11.4856C2.24239 11.336 2.37501 11.2114 2.53419 11.1236L2.78753 10.9838L11.4526 15.7629C11.7737 15.94 12.1678 15.9489 12.4961 15.7895L12.5474 15.7629L21.2122 10.9838ZM12.5474 2.13981L21.4658 7.05875C21.9809 7.34285 22.1534 7.96554 21.851 8.44956C21.7576 8.59914 21.625 8.72375 21.4658 8.81155L12.5474 13.7305C12.2094 13.9169 11.7906 13.9169 11.4526 13.7305L2.53419 8.81155C2.0191 8.52745 1.84663 7.90477 2.14896 7.42074C2.24239 7.27117 2.37501 7.14655 2.53419 7.05875L11.4526 2.13981C11.7906 1.9534 12.2094 1.9534 12.5474 2.13981Z",fill:"currentColor"}))}),"layers");const O6=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 11.5C23 5.70101 18.299 1 12.5 1C6.70101 1 2 5.70101 2 11.5C2 13.4179 2.51422 15.2157 3.4123 16.7631L2.08689 20.7393C1.83512 21.4946 2.52398 22.2269 3.29323 22.0218L7.70712 20.8448C9.14399 21.5832 10.7733 22 12.5 22C18.299 22 23 17.299 23 11.5ZM7.5 13C6.67157 13 6 12.3284 6 11.5C6 10.6716 6.67157 10 7.5 10C8.32843 10 9 10.6716 9 11.5C9 12.3284 8.32843 13 7.5 13ZM14 11.5C14 12.3284 13.3284 13 12.5 13C11.6716 13 11 12.3284 11 11.5C11 10.6716 11.6716 10 12.5 10C13.3284 10 14 10.6716 14 11.5ZM17.5 13C16.6716 13 16 12.3284 16 11.5C16 10.6716 16.6716 10 17.5 10C18.3284 10 19 10.6716 19 11.5C19 12.3284 18.3284 13 17.5 13Z",fill:"currentColor"}))}),"comment");const P6=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4.5C4 2.59886 5.41639 1 7.5 1C8.46493 1 9.28471 1.47945 9.91399 2.02664C10.5512 2.58073 11.0941 3.29071 11.5259 3.95501C11.6981 4.21986 11.8566 4.48369 12 4.73638C12.1434 4.48369 12.3019 4.21986 12.4741 3.95501C12.9059 3.29071 13.4488 2.58073 14.086 2.02664C14.7153 1.47945 15.5351 1 16.5 1C18.5836 1 20 2.59886 20 4.5C20 5.47934 19.5978 6.36474 18.9495 7H21C21.5523 7 22 7.44772 22 8V10C22 10.5523 21.5523 11 21 11H13V6H11V11H3C2.44772 11 2 10.5523 2 10V8C2 7.44772 2.44772 7 3 7H5.05051C4.40223 6.36474 4 5.47934 4 4.5ZM11 12H4V20C4 21.1046 4.89543 22 6 22H11V12ZM13 22H18C19.1046 22 20 21.1046 20 20V12H13V22ZM10.4137 6C10.25 5.69701 10.0603 5.36998 9.84906 5.04499C9.46835 4.45929 9.04256 3.91927 8.60163 3.53586C8.15279 3.14555 7.78507 3 7.5 3C6.58361 3 6 3.63972 6 4.5C6 5.32843 6.67157 6 7.5 6H10.4137ZM14.1509 5.04499C13.9397 5.36998 13.75 5.69701 13.5863 6H16.5C17.3284 6 18 5.32843 18 4.5C18 3.63972 17.4164 3 16.5 3C16.2149 3 15.8472 3.14555 15.3984 3.53586C14.9574 3.91927 14.5316 4.45929 14.1509 5.04499Z",fill:"currentColor"}))}),"gift");const M6=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4C2.34315 4 1 5.34315 1 7V9H23V7C23 5.34315 21.6569 4 20 4H4ZM23 11H1V18C1 19.6569 2.34315 21 4 21H20C21.6569 21 23 19.6569 23 18V11ZM4 15C4 14.4477 4.44772 14 5 14H7C7.55228 14 8 14.4477 8 15V16C8 16.5523 7.55228 17 7 17H5C4.44772 17 4 16.5523 4 16V15Z",fill:"currentColor"}))}),"credit_card");const I6=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{d:"M17 2C16.4477 2 16 2.44772 16 3V19H14V10C14 9.44772 13.5523 9 13 9H11C10.4477 9 10 9.44771 10 10V19H8V8C8 7.44772 7.55228 7 7 7H5C4.44772 7 4 7.44772 4 8V19H3C2.44772 19 2 19.4477 2 20V21C2 21.5523 2.44772 22 3 22H21C21.5523 22 22 21.5523 22 21V20C22 19.4477 21.5523 19 21 19H20V3C20 2.44772 19.5523 2 19 2H17Z",fill:"currentColor"}))}),"histogram");var R6=i(9670);const D6=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 2C3.34315 2 2 3.34315 2 5V19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5ZM10 7.5C10 8.88071 8.88071 10 7.5 10C6.11929 10 5 8.88071 5 7.5C5 6.11929 6.11929 5 7.5 5C8.88071 5 10 6.11929 10 7.5ZM16.7071 11.7071C16.3166 11.3166 15.6834 11.3166 15.2929 11.7071L11 16L9.70711 14.7071C9.31658 14.3166 8.68342 14.3166 8.29289 14.7071L5 18V19H8H12H19V14L16.7071 11.7071Z",fill:"currentColor"}))}),"image");const L6=(0,D5.T)((function(e){return P$.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),P$.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99973 5.07197C7.19713 5.53535 6.20729 5.53113 5.40866 5.06092L5.1637 4.91669C4.55751 4.55978 3.77662 4.65563 3.34264 5.20927C2.69567 6.03462 2.17585 6.94251 1.79166 7.90124C1.53027 8.55354 1.83733 9.27693 2.449 9.62286L2.69407 9.76145C3.50107 10.2178 4.00002 11.0732 4.00002 12.0003C4.00002 12.9271 3.50145 13.7822 2.69492 14.2387L2.44842 14.3783C1.83596 14.725 1.52888 15.4497 1.79213 16.1024C1.98358 16.577 2.21048 17.044 2.47374 17.5C2.73723 17.9564 3.0285 18.3868 3.34416 18.7902C3.77773 19.3443 4.5588 19.4406 5.16498 19.0834L5.40839 18.9399C6.20714 18.4692 7.19739 18.4648 8.0003 18.9284C8.80291 19.3918 9.29417 20.2511 9.28627 21.1778L9.28386 21.4601C9.27787 22.1629 9.75107 22.7906 10.4468 22.8903C11.4692 23.0368 12.5154 23.0404 13.5537 22.8927C14.2499 22.7936 14.7231 22.1653 14.7169 21.462L14.7143 21.1785C14.7061 20.2514 15.1974 19.3916 16.0003 18.928C16.8029 18.4647 17.7927 18.4689 18.5914 18.9391L18.8363 19.0833C19.4425 19.4402 20.2234 19.3444 20.6574 18.7907C21.3044 17.9654 21.8242 17.0575 22.2084 16.0988C22.4698 15.4465 22.1627 14.7231 21.551 14.3772L21.306 14.2386C20.499 13.7822 20 12.9268 20 11.9997C20 11.0729 20.4986 10.2178 21.3051 9.76126L21.5516 9.62174C22.1641 9.27506 22.4712 8.55029 22.2079 7.89761C22.0165 7.42297 21.7896 6.95598 21.5263 6.50001C21.2628 6.04362 20.9715 5.61325 20.6559 5.20982C20.2223 4.65568 19.4412 4.55944 18.8351 4.91665L18.5916 5.06009C17.7929 5.53078 16.8026 5.53519 15.9997 5.07163C15.1971 4.60825 14.7059 3.74891 14.7138 2.82218L14.7162 2.53994C14.7222 1.83708 14.249 1.20945 13.5532 1.10973C12.5308 0.963214 11.4846 0.959581 10.4464 1.10733C9.75011 1.20641 9.27691 1.83473 9.28317 2.53798L9.28569 2.82154C9.29395 3.74862 8.80264 4.60841 7.99973 5.07197ZM14 15.4641C15.9132 14.3595 16.5687 11.9132 15.4641 9.99999C14.3595 8.08682 11.9132 7.43132 10 8.53589C8.08684 9.64046 7.43134 12.0868 8.53591 14C9.64048 15.9132 12.0868 16.5687 14 15.4641Z",fill:"currentColor"}))}),"setting"),j6=()=>{const[e,t]=(0,P$.useContext)(T5),[i,n]=(0,P$.useContext)(A6.M),r=(0,m0.Fr)()||"true"===localStorage.getItem("default_collapse_sidebar");EJ();const[s,a]=(0,P$.useState)(["home"]),o=(0,m0.fx)(),l=(0,m0.a8)(),[c,h]=(0,P$.useState)(r),d=(0,P$.useMemo)((()=>[{text:"\u9996\u9875",itemKey:"home",to:"/",icon:(0,g0.jsx)(E6,{})},{text:"\u6e20\u9053",itemKey:"channel",to:"/channel",icon:(0,g0.jsx)(T6,{}),className:(0,m0.qc)()?"semi-navigation-item-normal":"tableHiddle"},{text:"\u804a\u5929",itemKey:"chat",to:"/chat",icon:(0,g0.jsx)(O6,{}),className:localStorage.getItem("chat_link")?"semi-navigation-item-normal":"tableHiddle"},{text:"\u4ee4\u724c",itemKey:"token",to:"/token",icon:(0,g0.jsx)(y6,{})},{text:"\u5151\u6362",itemKey:"redemption",to:"/redemption",icon:(0,g0.jsx)(P6,{}),className:(0,m0.qc)()?"semi-navigation-item-normal":"tableHiddle"},{text:"\u5145\u503c",itemKey:"topup",to:"/topup",icon:(0,g0.jsx)(M6,{})},{text:"\u7528\u6237",itemKey:"user",to:"/user",icon:(0,g0.jsx)(b6,{}),className:(0,m0.qc)()?"semi-navigation-item-normal":"tableHiddle"},{text:"\u65e5\u5fd7",itemKey:"log",to:"/log",icon:(0,g0.jsx)(I6,{})},{text:"\u6570\u636e\u770b\u677f",itemKey:"detail",to:"/detail",icon:(0,g0.jsx)(R6.A,{}),className:"true"===localStorage.getItem("enable_data_export")?"semi-navigation-item-normal":"tableHiddle"},{text:"\u7ed8\u56fe",itemKey:"midjourney",to:"/midjourney",icon:(0,g0.jsx)(D6,{}),className:"true"===localStorage.getItem("enable_drawing")?"semi-navigation-item-normal":"tableHiddle"},{text:"\u8bbe\u7f6e",itemKey:"setting",to:"/setting",icon:(0,g0.jsx)(L6,{})}]),[localStorage.getItem("enable_data_export"),localStorage.getItem("enable_drawing"),localStorage.getItem("chat_link"),(0,m0.qc)()]);return(0,P$.useEffect)((()=>{(async()=>{const e=await m0.nC.get("/api/status"),{success:t,data:i}=e.data;t?(localStorage.setItem("status",JSON.stringify(i)),n({type:"set",payload:i}),localStorage.setItem("system_name",i.system_name),localStorage.setItem("logo",i.logo),localStorage.setItem("footer_html",i.footer_html),localStorage.setItem("quota_per_unit",i.quota_per_unit),localStorage.setItem("display_in_currency",i.display_in_currency),localStorage.setItem("enable_drawing",i.enable_drawing),localStorage.setItem("enable_data_export",i.enable_data_export),localStorage.setItem("data_export_default_time",i.data_export_default_time),localStorage.setItem("default_collapse_sidebar",i.default_collapse_sidebar),localStorage.setItem("mj_notify_enabled",i.mj_notify_enabled),i.chat_link?localStorage.setItem("chat_link",i.chat_link):localStorage.removeItem("chat_link"),i.chat_link2?localStorage.setItem("chat_link2",i.chat_link2):localStorage.removeItem("chat_link2")):(0,m0.Qg)("\u65e0\u6cd5\u6b63\u5e38\u8fde\u63a5\u81f3\u670d\u52a1\u5668\uff01")})().then((()=>{h((0,m0.Fr)()||"true"===localStorage.getItem("default_collapse_sidebar"))}))}),[]),(0,g0.jsx)(g0.Fragment,{children:(0,g0.jsx)(v0.Layout,{children:(0,g0.jsx)("div",{style:{height:"100%"},children:(0,g0.jsx)(v0.so,{style:{maxWidth:200},defaultIsCollapsed:(0,m0.Fr)()||"true"===localStorage.getItem("default_collapse_sidebar"),isCollapsed:c,onCollapseChange:e=>{h(e)},selectedKeys:s,renderWrapper:e=>{let{itemElement:t,isSubNav:i,isInSubNav:n,props:r}=e;return(0,g0.jsx)(e0,{style:{textDecoration:"none"},to:{home:"/",channel:"/channel",token:"/token",redemption:"/redemption",topup:"/topup",user:"/user",log:"/log",midjourney:"/midjourney",setting:"/setting",about:"/about",chat:"/chat",detail:"/detail"}[r.itemKey],children:t})},items:d,onSelect:e=>{a([e.itemKey])},header:{logo:(0,g0.jsx)("img",{src:l,alt:"logo",style:{marginRight:"0.75em"}}),text:o},children:(0,g0.jsx)(v0.so.Footer,{collapseButton:!0})})})})})};(e=>{const{defaultMode:t,isWatchingMode:i=!0,isWatchingThemeSwitch:n=!1}=null!=e?e:{};var r,s,a;T$(!1,t),i&&(r=document.body,s=v$,a=()=>T$(),new MutationObserver((e=>{e.forEach((e=>{e.attributeName===s&&a(e)}))})).observe(r,{attributes:!0})),n&&(e=>{new MutationObserver((t=>{t.forEach((t=>{var i;if(1===t.addedNodes.length){const n=t.addedNodes[0];"LINK"===n.tagName&&"true"===(null===(i=n.getAttribute)||void 0===i?void 0:i.call(n,"semi-theme-switcher"))&&e(t,n)}}))})).observe(document.body,{childList:!0})})((()=>{const e=y$(),t=JSON.stringify(E$(e).colorScheme);let i=0;const n=setInterval((()=>{const r=E$(e);(i>50||t!==JSON.stringify(r.colorScheme))&&(T$(!0,e,r),clearInterval(n)),i++}),100)}))})({isWatchingThemeSwitch:!0});const F6=I$.createRoot(document.getElementById("root")),{Sider:B6,Content:N6,Header:z6}=v0.Layout;F6.render((0,g0.jsx)(P$.StrictMode,{children:(0,g0.jsx)(A6.u,{children:(0,g0.jsx)(O5,{children:(0,g0.jsx)(QJ,{children:(0,g0.jsxs)(v0.Layout,{children:[(0,g0.jsx)(B6,{children:(0,g0.jsx)(j6,{})}),(0,g0.jsxs)(v0.Layout,{children:[(0,g0.jsx)(z6,{children:(0,g0.jsx)(x6,{})}),(0,g0.jsx)(N6,{style:{padding:"24px"},children:(0,g0.jsx)(Q4,{})}),(0,g0.jsx)(v0.Layout.Footer,{children:(0,g0.jsx)(C6,{})})]}),(0,g0.jsx)(k6.N9,{})]})})})})}))})()})();
//# sourceMappingURL=main.74e7b41b.js.map