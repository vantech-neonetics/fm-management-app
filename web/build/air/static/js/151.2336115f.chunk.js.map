{"version":3,"file":"static/js/151.2336115f.chunk.js","mappings":"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","sources":["pages/Home/index.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { Card, Col, Row } from '@douyinfe/semi-ui';\nimport { API, showError, showNotice, timestamp2string } from '../../helpers';\nimport { StatusContext } from '../../context/Status';\nimport { marked } from 'marked';\n\nconst Home = () => {\n  const [statusState] = useContext(StatusContext);\n  const [homePageContentLoaded, setHomePageContentLoaded] = useState(false);\n  const [homePageContent, setHomePageContent] = useState('');\n\n  const displayNotice = async () => {\n    const res = await API.get('/api/notice');\n    const { success, message, data } = res.data;\n    if (success) {\n      let oldNotice = localStorage.getItem('notice');\n      if (data !== oldNotice && data !== '') {\n        const htmlNotice = marked(data);\n        showNotice(htmlNotice, true);\n        localStorage.setItem('notice', data);\n      }\n    } else {\n      showError(message);\n    }\n  };\n\n  const displayHomePageContent = async () => {\n    setHomePageContent(localStorage.getItem('home_page_content') || '');\n    const res = await API.get('/api/home_page_content');\n    const { success, message, data } = res.data;\n    if (success) {\n      let content = data;\n      if (!data.startsWith('https://')) {\n        content = marked.parse(data);\n      }\n      setHomePageContent(content);\n      localStorage.setItem('home_page_content', content);\n    } else {\n      showError(message);\n      setHomePageContent('加载首页内容失败...');\n    }\n    setHomePageContentLoaded(true);\n  };\n\n  const getStartTimeString = () => {\n    const timestamp = statusState?.status?.start_time;\n    return statusState.status ? timestamp2string(timestamp) : '';\n  };\n\n  useEffect(() => {\n    displayNotice().then();\n    displayHomePageContent().then();\n  }, []);\n  return (\n    <>\n      {\n        homePageContentLoaded && homePageContent === '' ?\n          <>\n            <Card\n              bordered={false}\n              headerLine={false}\n              title='系统状况'\n              bodyStyle={{ padding: '10px 20px' }}\n            >\n              <Row gutter={16}>\n                <Col span={12}>\n                  <Card\n                    title='系统信息'\n                    headerExtraContent={<span\n                      style={{ fontSize: '12px', color: 'var(--semi-color-text-1)' }}>系统信息总览</span>}>\n                    <p>名称：{statusState?.status?.system_name}</p>\n                    <p>版本：{statusState?.status?.version ? statusState?.status?.version : 'unknown'}</p>\n                    <p>\n                      源码：\n                      <a\n                        href='https://github.com/songquanpeng/one-api'\n                        target='_blank' rel='noreferrer'\n                      >\n                        https://github.com/songquanpeng/one-api\n                      </a>\n                    </p>\n                    <p>启动时间：{getStartTimeString()}</p>\n                  </Card>\n                </Col>\n                <Col span={12}>\n                  <Card\n                    title='系统配置'\n                    headerExtraContent={<span\n                      style={{ fontSize: '12px', color: 'var(--semi-color-text-1)' }}>系统配置总览</span>}>\n                    <p>\n                      邮箱验证：\n                      {statusState?.status?.email_verification === true ? '已启用' : '未启用'}\n                    </p>\n                    <p>\n                      GitHub 身份验证：\n                      {statusState?.status?.github_oauth === true ? '已启用' : '未启用'}\n                    </p>\n                    <p>\n                      微信身份验证：\n                      {statusState?.status?.wechat_login === true ? '已启用' : '未启用'}\n                    </p>\n                    <p>\n                      Turnstile 用户校验：\n                      {statusState?.status?.turnstile_check === true ? '已启用' : '未启用'}\n                    </p>\n                    {/*<p>*/}\n                    {/*  Telegram 身份验证：*/}\n                    {/*  {statusState?.status?.telegram_oauth === true*/}\n                    {/*    ? '已启用' : '未启用'}*/}\n                    {/*</p>*/}\n                  </Card>\n                </Col>\n              </Row>\n            </Card>\n\n          </>\n          : <>\n            {\n              homePageContent.startsWith('https://') ?\n                <iframe src={homePageContent} style={{ width: '100%', height: '100vh', border: 'none' }} /> :\n                <div style={{ fontSize: 'larger' }} dangerouslySetInnerHTML={{ __html: homePageContent }}></div>\n            }\n          </>\n      }\n\n    </>\n  );\n};\n\nexport default Home;"],"names":["Home","_statusState$status2","_statusState$status3","_statusState$status4","_statusState$status5","_statusState$status6","_statusState$status7","_statusState$status8","statusState","useContext","StatusContext","homePageContentLoaded","setHomePageContentLoaded","useState","homePageContent","setHomePageContent","useEffect","async","res","API","get","success","message","data","localStorage","getItem","htmlNotice","marked","showNotice","setItem","showError","displayNotice","then","content","startsWith","parse","displayHomePageContent","_jsx","_Fragment","children","Card","bordered","headerLine","title","bodyStyle","padding","_jsxs","Row","gutter","Col","span","headerExtraContent","style","fontSize","color","status","system_name","version","href","target","rel","getStartTimeString","_statusState$status","timestamp","start_time","timestamp2string","email_verification","github_oauth","wechat_login","turnstile_check","src","width","height","border","dangerouslySetInnerHTML","__html"],"sourceRoot":""}