"use strict";(self.webpackChunkone_api_web=self.webpackChunkone_api_web||[]).push([[871],{8032:function(e,t,r){r.d(t,{p:function(){return a}});const a={1:{key:1,text:"OpenAI",value:1,color:"success"},14:{key:14,text:"Anthropic Claude",value:14,color:"primary"},33:{key:33,text:"AWS Claude",value:33,color:"primary"},37:{key:37,text:"Cloudflare",value:37,color:"success"},3:{key:3,text:"Azure OpenAI",value:3,color:"success"},11:{key:11,text:"Google PaLM2",value:11,color:"warning"},24:{key:24,text:"Google Gemini",value:24,color:"warning"},28:{key:28,text:"Mistral AI",value:28,color:"warning"},15:{key:15,text:"\u767e\u5ea6\u6587\u5fc3\u5343\u5e06",value:15,color:"primary"},17:{key:17,text:"\u963f\u91cc\u901a\u4e49\u5343\u95ee",value:17,color:"primary"},18:{key:18,text:"\u8baf\u98de\u661f\u706b\u8ba4\u77e5",value:18,color:"primary"},16:{key:16,text:"\u667a\u8c31 ChatGLM",value:16,color:"primary"},19:{key:19,text:"360 \u667a\u8111",value:19,color:"primary"},25:{key:25,text:"Moonshot AI",value:25,color:"primary"},23:{key:23,text:"\u817e\u8baf\u6df7\u5143",value:23,color:"primary"},26:{key:26,text:"\u767e\u5ddd\u5927\u6a21\u578b",value:26,color:"primary"},27:{key:27,text:"MiniMax",value:27,color:"primary"},29:{key:29,text:"Groq",value:29,color:"primary"},30:{key:30,text:"Ollama",value:30,color:"primary"},31:{key:31,text:"\u96f6\u4e00\u4e07\u7269",value:31,color:"primary"},32:{key:32,text:"\u9636\u8dc3\u661f\u8fb0",value:32,color:"primary"},34:{key:34,text:"Coze",value:34,color:"primary"},35:{key:35,text:"Cohere",value:35,color:"primary"},36:{key:36,text:"DeepSeek",value:36,color:"primary"},38:{key:38,text:"DeepL",value:38,color:"primary"},39:{key:39,text:"together.ai",value:39,color:"primary"},8:{key:8,text:"\u81ea\u5b9a\u4e49\u6e20\u9053",value:8,color:"error"},22:{key:22,text:"\u77e5\u8bc6\u5e93\uff1aFastGPT",value:22,color:"success"},21:{key:21,text:"\u77e5\u8bc6\u5e93\uff1aAI Proxy",value:21,color:"success"},20:{key:20,text:"\u4ee3\u7406\uff1aOpenRouter",value:20,color:"success"},2:{key:2,text:"\u4ee3\u7406\uff1aAPI2D",value:2,color:"success"},5:{key:5,text:"\u4ee3\u7406\uff1aOpenAI-SB",value:5,color:"success"},7:{key:7,text:"\u4ee3\u7406\uff1aOhMyGPT",value:7,color:"success"},10:{key:10,text:"\u4ee3\u7406\uff1aAI Proxy",value:10,color:"success"},4:{key:4,text:"\u4ee3\u7406\uff1aCloseAI",value:4,color:"success"},6:{key:6,text:"\u4ee3\u7406\uff1aOpenAI Max",value:6,color:"success"},9:{key:9,text:"\u4ee3\u7406\uff1aAI.LS",value:9,color:"success"},12:{key:12,text:"\u4ee3\u7406\uff1aAPI2GPT",value:12,color:"success"},13:{key:13,text:"\u4ee3\u7406\uff1aAIGC2D",value:13,color:"success"}}},1736:function(e,t,r){r.d(t,{re:function(){return a}});r(5512);const a=10;r(8032)},1675:function(e,t,r){var a=r(5043),l=r(6446),n=r(6240),o=r(4535),s=r(310),i=r(579);const c=(0,a.forwardRef)(((e,t)=>{let{children:r,color:a="default",variant:o="soft",startIcon:s,endIcon:c,sx:u,...m}=e;const x=(0,n.A)(),p={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return(0,i.jsxs)(d,{ref:t,component:"span",ownerState:{color:a,variant:o},sx:{...s&&{pl:.75},...c&&{pr:.75},...u},theme:x,...m,children:[s&&(0,i.jsxs)(l.A,{sx:{mr:.75,...p},children:[" ",s," "]}),r,c&&(0,i.jsxs)(l.A,{sx:{ml:.75,...p},children:[" ",c," "]})]})}));t.A=c;const d=(0,o.Ay)(l.A)((e=>{var t,r,a,l,n;let{theme:o,ownerState:i}=e;const c="filled"===i.variant,d="outlined"===i.variant,u="soft"===i.variant,m="ghost"===i.variant,x={..."default"===i.color&&{...c&&{color:o.palette.grey[300],backgroundColor:o.palette.text.primary},...d&&{color:o.palette.grey[500],border:`2px solid ${o.palette.grey[500]}`},...u&&{color:o.palette.text.secondary,backgroundColor:(0,s.X4)(o.palette.grey[500],.16)}}},p={..."default"!==i.color&&{...c&&{color:o.palette.background.paper,backgroundColor:null===(t=o.palette[i.color])||void 0===t?void 0:t.main},...d&&{backgroundColor:"transparent",color:null===(r=o.palette[i.color])||void 0===r?void 0:r.main,border:`2px solid ${null===(a=o.palette[i.color])||void 0===a?void 0:a.main}`},...u&&{color:o.palette[i.color].dark,backgroundColor:(0,s.X4)(null===(l=o.palette[i.color])||void 0===l?void 0:l.main,.16)},...m&&{color:null===(n=o.palette[i.color])||void 0===n?void 0:n.main}}};return{height:24,minWidth:24,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:o.spacing(0,.75),fontSize:o.typography.pxToRem(12),fontWeight:o.typography.fontWeightBold,transition:o.transitions.create("all",{duration:o.transitions.duration.shorter}),...x,...p}}))},7327:function(e,t,r){r.r(t),r.d(t,{default:function(){return J}});var a=r(5043),l=r(9985),n=r(1806),o=r(3460),s=r(9650),i=r(864),c=r.n(i),d=r(9090),u=r(611),m=r(196),x=r(5263),p=r(8911),h=r(5865),A=r(2110),v=r(6446),y=r(9252),g=r(2518),j=r(8076),f=r(2420),k=r(1675);var b={0:{value:"0",text:"\u5168\u90e8",color:""},1:{value:"1",text:"\u5145\u503c",color:"primary"},2:{value:"2",text:"\u6d88\u8d39",color:"orange"},3:{value:"3",text:"\u7ba1\u7406",color:"default"},4:{value:"4",text:"\u7cfb\u7edf",color:"secondary"}},_=r(579);function w(e){const t=b[e];return t?(0,_.jsxs)(k.A,{variant:"filled",color:t.color,children:[" ",t.text," "]}):(0,_.jsxs)(k.A,{variant:"filled",color:"error",children:[" ","\u672a\u77e5"," "]})}function C(e){let{item:t,userIsAdmin:r}=e;return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(j.A,{tabIndex:t.id,children:[(0,_.jsx)(f.A,{children:(0,l.gA)(t.created_at)}),r&&(0,_.jsx)(f.A,{children:t.channel||""}),r&&(0,_.jsx)(f.A,{children:(0,_.jsx)(k.A,{color:"default",variant:"outlined",children:t.username})}),(0,_.jsx)(f.A,{children:t.token_name&&(0,_.jsx)(k.A,{color:"default",variant:"soft",children:t.token_name})}),(0,_.jsx)(f.A,{children:w(t.type)}),(0,_.jsx)(f.A,{children:t.model_name&&(0,_.jsx)(k.A,{color:"primary",variant:"outlined",children:t.model_name})}),(0,_.jsx)(f.A,{children:t.prompt_tokens||""}),(0,_.jsx)(f.A,{children:t.completion_tokens||""}),(0,_.jsx)(f.A,{children:t.quota?(0,l.X8)(t.quota,6):""}),(0,_.jsx)(f.A,{children:t.content})]})})}var I=r(4882);var z=e=>{let{userIsAdmin:t}=e;return(0,_.jsx)(I.A,{children:(0,_.jsxs)(j.A,{children:[(0,_.jsx)(f.A,{children:"\u65f6\u95f4"}),t&&(0,_.jsx)(f.A,{children:"\u6e20\u9053"}),t&&(0,_.jsx)(f.A,{children:"\u7528\u6237"}),(0,_.jsx)(f.A,{children:"\u4ee4\u724c"}),(0,_.jsx)(f.A,{children:"\u7c7b\u578b"}),(0,_.jsx)(f.A,{children:"\u6a21\u578b"}),(0,_.jsx)(f.A,{children:"\u63d0\u793a"}),(0,_.jsx)(f.A,{children:"\u8865\u5168"}),(0,_.jsx)(f.A,{children:"\u989d\u5ea6"}),(0,_.jsx)(f.A,{children:"\u8be6\u60c5"})]})})},M=r(6240),P=r(6671),S=(0,r(7391).A)("brand-github-copilot","IconBrandGithubCopilot",[["path",{d:"M4 18v-5.5c0 -.667 .167 -1.333 .5 -2",key:"svg-0"}],["path",{d:"M12 7.5c0 -1 -.01 -4.07 -4 -3.5c-3.5 .5 -4 2.5 -4 3.5c0 1.5 0 4 3 4c4 0 5 -2.5 5 -4z",key:"svg-1"}],["path",{d:"M4 12c-1.333 .667 -2 1.333 -2 2c0 1 0 3 1.5 4c3 2 6.5 3 8.5 3s5.499 -1 8.5 -3c1.5 -1 1.5 -3 1.5 -4c0 -.667 -.667 -1.333 -2 -2",key:"svg-2"}],["path",{d:"M20 18v-5.5c0 -.667 -.167 -1.333 -.5 -2",key:"svg-3"}],["path",{d:"M12 7.5l0 -.297l.01 -.269l.027 -.298l.013 -.105l.033 -.215c.014 -.073 .029 -.146 .046 -.22l.06 -.223c.336 -1.118 1.262 -2.237 3.808 -1.873c2.838 .405 3.703 1.797 3.93 2.842l.036 .204c0 .033 .01 .066 .013 .098l.016 .185l0 .171l0 .49l-.015 .394l-.02 .271c-.122 1.366 -.655 2.845 -2.962 2.845c-3.256 0 -4.524 -1.656 -4.883 -3.081l-.053 -.242a3.865 3.865 0 0 1 -.036 -.235l-.021 -.227a3.518 3.518 0 0 1 -.007 -.215z",key:"svg-4"}],["path",{d:"M10 15v2",key:"svg-5"}],["path",{d:"M14 15v2",key:"svg-6"}]]),F=r(5267),T=r(7633),q=r(3193),R=r(9190),W=r(4050),G=r(1787),$=r(5174),D=r(2143),O=r(8390),B=r(4061),L=r(9302),N=r(446),H=r.n(N);function X(e){let{filterName:t,handleFilterName:r,userIsAdmin:a}=e;const l=(0,M.A)().palette.grey[500];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(p.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2,md:4},padding:"24px",paddingBottom:"0px",children:[(0,_.jsxs)(q.A,{children:[(0,_.jsx)(R.A,{htmlFor:"channel-token_name-label",children:"\u4ee4\u724c\u540d\u79f0"}),(0,_.jsx)(W.A,{id:"token_name",name:"token_name",sx:{minWidth:"100%"},label:"\u4ee4\u724c\u540d\u79f0",value:t.token_name,onChange:r,placeholder:"\u4ee4\u724c\u540d\u79f0",startAdornment:(0,_.jsx)(G.A,{position:"start",children:(0,_.jsx)(P.A,{stroke:1.5,size:"20px",color:l})})})]}),(0,_.jsxs)(q.A,{children:[(0,_.jsx)(R.A,{htmlFor:"channel-model_name-label",children:"\u6a21\u578b\u540d\u79f0"}),(0,_.jsx)(W.A,{id:"model_name",name:"model_name",sx:{minWidth:"100%"},label:"\u6a21\u578b\u540d\u79f0",value:t.model_name,onChange:r,placeholder:"\u6a21\u578b\u540d\u79f0",startAdornment:(0,_.jsx)(G.A,{position:"start",children:(0,_.jsx)(S,{stroke:1.5,size:"20px",color:l})})})]}),(0,_.jsx)(q.A,{children:(0,_.jsx)(O.$,{dateAdapter:L.R,adapterLocale:"zh-cn",children:(0,_.jsx)(B.K,{label:"\u8d77\u59cb\u65f6\u95f4",ampm:!1,name:"start_timestamp",value:0===t.start_timestamp?null:H().unix(t.start_timestamp),onChange:e=>{r(null!==e?{target:{name:"start_timestamp",value:e.unix()}}:{target:{name:"start_timestamp",value:0}})},slotProps:{actionBar:{actions:["clear","today","accept"]}}})})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(O.$,{dateAdapter:L.R,adapterLocale:"zh-cn",children:(0,_.jsx)(B.K,{label:"\u7ed3\u675f\u65f6\u95f4",name:"end_timestamp",ampm:!1,value:0===t.end_timestamp?null:H().unix(t.end_timestamp),onChange:e=>{r(null!==e?{target:{name:"end_timestamp",value:e.unix()}}:{target:{name:"end_timestamp",value:0}})},slotProps:{actionBar:{actions:["clear","today","accept"]}}})})})]}),(0,_.jsxs)(p.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2,md:4},padding:"24px",children:[a&&(0,_.jsxs)(q.A,{children:[(0,_.jsx)(R.A,{htmlFor:"channel-channel-label",children:"\u6e20\u9053ID"}),(0,_.jsx)(W.A,{id:"channel",name:"channel",sx:{minWidth:"100%"},label:"\u6e20\u9053ID",value:t.channel,onChange:r,placeholder:"\u6e20\u9053ID",startAdornment:(0,_.jsx)(G.A,{position:"start",children:(0,_.jsx)(F.A,{stroke:1.5,size:"20px",color:l})})})]}),a&&(0,_.jsxs)(q.A,{children:[(0,_.jsx)(R.A,{htmlFor:"channel-username-label",children:"\u7528\u6237\u540d\u79f0"}),(0,_.jsx)(W.A,{id:"username",name:"username",sx:{minWidth:"100%"},label:"\u7528\u6237\u540d\u79f0",value:t.username,onChange:r,placeholder:"\u7528\u6237\u540d\u79f0",startAdornment:(0,_.jsx)(G.A,{position:"start",children:(0,_.jsx)(T.A,{stroke:1.5,size:"20px",color:l})})})]}),(0,_.jsxs)(q.A,{sx:{minWidth:"22%"},children:[(0,_.jsx)(R.A,{htmlFor:"channel-type-label",children:"\u7c7b\u578b"}),(0,_.jsx)($.A,{id:"channel-type-label",label:"\u7c7b\u578b",value:t.type,name:"type",onChange:r,sx:{minWidth:"100%"},MenuProps:{PaperProps:{style:{maxHeight:200}}},children:Object.values(b).map((e=>(0,_.jsx)(D.A,{value:e.value,children:e.text},e.value)))})]})]})]})}r(6484);var K=r(3862),Q=r(1736),E=r(3991),V=r(8302);function J(){const e={p:0,username:"",token_name:"",model_name:"",start_timestamp:0,end_timestamp:(new Date).getTime()/1e3+3600,type:0,channel:""},[t,r]=(0,a.useState)([]),[i,j]=(0,a.useState)(0),[f,k]=(0,a.useState)(!1),[b,w]=(0,a.useState)(e),[I,M]=(0,a.useState)(!0),P=(0,l.qc)(),S=async e=>{k(!0);const a=P?"/api/log/":"/api/log/self/",n=b;n.p=e,P||(delete n.username,delete n.channel);const o=await K.n.get(a,{params:n}),{success:s,message:i,data:c}=o.data;if(s)if(0===e)r(c);else{let a=[...t];a.splice(e*Q.re,c.length,...c),r(a)}else(0,l.Qg)(i);k(!1)},F=async e=>{e.preventDefault(),await S(0),j(0)};return(0,a.useEffect)((()=>{w(e),j(0),S(0).then().catch((e=>{(0,l.Qg)(e)})),M(!1)}),[I]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:2.5,children:(0,_.jsx)(h.A,{variant:"h4",children:"\u65e5\u5fd7"})}),(0,_.jsxs)(A.A,{children:[(0,_.jsx)(v.A,{component:"form",onSubmit:F,noValidate:!0,sx:{marginTop:2},children:(0,_.jsx)(X,{filterName:b,handleFilterName:e=>{w({...b,[e.target.name]:e.target.value})},userIsAdmin:P})}),(0,_.jsx)(x.A,{sx:{textAlign:"right",height:50,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3)},children:(0,_.jsx)(y.A,{children:(0,_.jsxs)(m.A,{variant:"outlined","aria-label":"outlined small primary button group",sx:{marginBottom:2},children:[(0,_.jsx)(g.A,{onClick:()=>{M(!0)},startIcon:(0,_.jsx)(E.A,{width:"18px"}),children:"\u5237\u65b0/\u6e05\u9664\u641c\u7d22\u6761\u4ef6"}),(0,_.jsx)(g.A,{onClick:F,startIcon:(0,_.jsx)(V.A,{width:"18px"}),children:"\u641c\u7d22"})]})})}),f&&(0,_.jsx)(u.A,{}),(0,_.jsx)(c(),{component:"div",children:(0,_.jsx)(s.A,{sx:{overflow:"unset"},children:(0,_.jsxs)(n.A,{sx:{minWidth:800},children:[(0,_.jsx)(z,{userIsAdmin:P}),(0,_.jsx)(o.A,{children:t.slice(i*Q.re,(i+1)*Q.re).map(((e,t)=>(0,_.jsx)(C,{item:e,userIsAdmin:P},`${e.id}_${t}`)))})]})})}),(0,_.jsx)(d.A,{page:i,component:"div",count:t.length+(t.length%Q.re===0?1:0),rowsPerPage:Q.re,onPageChange:(e,r)=>{(async()=>{r===Math.ceil(t.length/Q.re)&&await S(r),j(r)})()},rowsPerPageOptions:[Q.re]})]})]})}},1673:function(e,t,r){r.d(t,{A:function(){return f}});var a=r(8587),l=r(8168),n=r(5043),o=r(8387),s=r(8606),i=r(4827),c=r(5213),d=r(4535),u=r(6803),m=r(7056),x=r(2400);function p(e){return(0,x.Ay)("MuiFormHelperText",e)}var h,A=(0,m.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),v=r(2876),y=r(579);const g=["children","className","component","disabled","error","filled","focused","margin","required","variant"],j=(0,d.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${(0,u.A)(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})((e=>{let{theme:t,ownerState:r}=e;return(0,l.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${A.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${A.error}`]:{color:(t.vars||t).palette.error.main}},"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})}));var f=n.forwardRef((function(e,t){const r=(0,v.A)({props:e,name:"MuiFormHelperText"}),{children:n,className:d,component:m="p"}=r,x=(0,a.A)(r,g),A=(0,c.A)(),f=(0,i.A)({props:r,muiFormControl:A,states:["variant","size","disabled","error","filled","focused","required"]}),k=(0,l.A)({},r,{component:m,contained:"filled"===f.variant||"outlined"===f.variant,variant:f.variant,size:f.size,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required}),b=(e=>{const{classes:t,contained:r,size:a,disabled:l,error:n,filled:o,focused:i,required:c}=e,d={root:["root",l&&"disabled",n&&"error",a&&`size${(0,u.A)(a)}`,r&&"contained",i&&"focused",o&&"filled",c&&"required"]};return(0,s.A)(d,p,t)})(k);return(0,y.jsx)(j,(0,l.A)({as:m,ownerState:k,className:(0,o.A)(b.root,d),ref:t},x,{children:" "===n?h||(h=(0,y.jsx)("span",{className:"notranslate",children:"\u200b"})):n}))}))}}]);
//# sourceMappingURL=871.989edb76.chunk.js.map